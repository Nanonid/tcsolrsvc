if(OWF.Util.isRunningInOWF()){Map.save=function(){OWF.Preferences.setUserPreference({namespace:OWF.getInstanceId(),name:"widgetstate",value:OWF.Util.toString(this.state),onSuccess:function(){},onFailure:function(){}})};Map.setPrintEnabled=function(a){OWF.Chrome.updateHeaderButtons({items:[{itemId:"print",type:"print",disabled:!a}]})};OWF.ready(function(){var a=OWF.Launcher.getLaunchData();if(a&&a.address){Map.placeMarker(a)}OWF.Preferences.getUserPreference({namespace:OWF.getInstanceId(),name:"widgetstate",onSuccess:function(c){if(c.value){Map.setState(OWF.Util.parseJson(c.value))}}});OWF.Eventing.subscribe("org.owfgoss.owf.examples.GoogleMapsExample.plotAddress",function(c,e,d){Map.placeMarker(e)});OWF.Intents.receive({action:"plot",dataType:"application/vnd.owf.sample.address"},function(c,d,e){Map.placeMarker(e)});OWF.Intents.receive({action:"navigate",dataType:"application/vnd.owf.sample.addresses"},function(c,d,e){Map.getDirections(e[0],e[1])});OWF.Chrome.insertHeaderButtons({items:[{xtype:"widgettool",type:"print",itemId:"print",tooltip:{text:"Print Directions!"},handler:function(c,d){Map.toggleMapPrintView()}}]});$.subscribe("marker:pan",function(){Map.setPrintEnabled(false)});$.subscribe("navigate",function(){Map.setPrintEnabled(true)});var b=Ozone.state.WidgetState.getInstance({onStateEventReceived:function(c,e){var d=e.eventName;if(d==="beforeclose"){b.removeStateEventOverrides({event:[d],callback:function(){OWF.Preferences.deleteUserPreference({namespace:OWF.getInstanceId(),name:"widgetstate",onSuccess:function(f){b.closeWidget()}})}})}else{if(d==="activate"||d==="show"){Map.el.style.display="block"}else{if(d==="hide"){Map.el.style.display="none"}}}}});b.addStateEventOverrides({events:["beforeclose"]});b.addStateEventListeners({events:["activate","hide","show"]});OWF.notifyWidgetReady()})};