Ext.define("Stocks",{extend:"Ext.data.Model",fields:[{name:"date",type:"date"},]});Ext.define("Ozone.components.StockChart",{extend:"Ext.chart.Chart",alias:["widget.stockchart"],store:Ext.create("Ext.data.Store",{model:"Stocks",proxy:{type:"memory",reader:{type:"json",root:"stocks"}}}),shadow:false,symbols:{},axes:[],series:[],initComponent:function(){var a=this;a.callParent(arguments)},plot:function(d){if(d){var b=this,c=b.axes.get(1),e=true,a={stocks:[],metaData:{fields:[]}};Ext.Array.each(d,function(g,h,f){if(g){if(e){a.stocks.push({date:g.date});a.metaData.fields.push({name:"date",type:"date"});c.toDate=g.date;c.fromDate=Ext.Date.add(Ext.Date.clone(g.date),Ext.Date.SECOND,-40);e=false}a.stocks[0][g.symbol]=g.price;a.metaData.fields.push({name:g.symbol,type:"float"});if(!b.symbols[g.symbol]){b.series.add({type:"line",axis:["left","bottom"],xField:"date",yField:g.symbol,markerConfig:{radius:5,size:5},style:{"stroke-width":1}});b.symbols[g.symbol]=true}}});if(b.store.getCount()>10){b.store.removeAt(0)}b.store.loadRawData(a,true)}}});