(function(){eval('var djConfig = {scopeMap:[["dojo","owfdojo"],["dijit","owfdijit"],["dojox","owfdojox"]]};');var sMap=null;if((sMap||(typeof djConfig!="undefined"&&djConfig.scopeMap))&&(typeof window!="undefined")){var scopeDef="",scopePrefix="",scopeSuffix="",scopeMap={},scopeMapRev={};sMap=sMap||djConfig.scopeMap;for(var i=0;i<sMap.length;i++){var newScope=sMap[i];scopeDef+="var "+newScope[0]+" = {}; "+newScope[1]+" = "+newScope[0]+";"+newScope[1]+"._scopeName = '"+newScope[1]+"';";scopePrefix+=(i==0?"":",")+newScope[0];scopeSuffix+=(i==0?"":",")+newScope[1];scopeMap[newScope[0]]=newScope[1];scopeMapRev[newScope[1]]=newScope[0]}eval(scopeDef+"dojo._scopeArgs = ["+scopeSuffix+"];");dojo._scopePrefixArgs=scopePrefix;dojo._scopePrefix="(function("+scopePrefix+"){";dojo._scopeSuffix="})("+scopeSuffix+")";dojo._scopeMap=scopeMap;dojo._scopeMapRev=scopeMapRev}(function(){if(typeof this["loadFirebugConsole"]=="function"){this["loadFirebugConsole"]()}else{this.console=this.console||{};var cn=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];var i=0,tn;while((tn=cn[i++])){if(!console[tn]){(function(){var tcn=tn+"";console[tcn]=("log" in console)?function(){var a=Array.apply({},arguments);a.unshift(tcn+":");console.log(a.join(" "))}:function(){};console[tcn]._fake=true})()}}}if(typeof dojo=="undefined"){dojo={_scopeName:"dojo",_scopePrefix:"",_scopePrefixArgs:"",_scopeSuffix:"",_scopeMap:{},_scopeMapRev:{}}}var d=dojo;if(typeof dijit=="undefined"){dijit={_scopeName:"dijit"}}if(typeof dojox=="undefined"){dojox={_scopeName:"dojox"}}if(!d._scopeArgs){d._scopeArgs=[dojo,dijit,dojox]}d.global=this;d.config={isDebug:false,debugAtAllCosts:false};if(typeof djConfig!="undefined"){for(var opt in djConfig){d.config[opt]=djConfig[opt]}}dojo.locale=d.config.locale;var rev="$Rev: 22487 $".match(/\d+/);dojo.version={major:1,minor:0,patch:0,flag:"",revision:rev?+rev[0]:NaN,toString:function(){with(d.version){return major+"."+minor+"."+patch+flag+" ("+revision+")"}}};if(typeof OpenAjax!="undefined"){OpenAjax.hub.registerLibrary(dojo._scopeName,"http://dojotoolkit.org",d.version.toString())}var extraNames,extraLen,empty={};for(var i in {toString:1}){extraNames=[];break}dojo._extraNames=extraNames=extraNames||["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];extraLen=extraNames.length;dojo._mixin=function(target,source){var name,s,i;for(name in source){s=source[name];if(!(name in target)||(target[name]!==s&&(!(name in empty)||empty[name]!==s))){target[name]=s}}if(extraLen&&source){for(i=0;i<extraLen;++i){name=extraNames[i];s=source[name];if(!(name in target)||(target[name]!==s&&(!(name in empty)||empty[name]!==s))){target[name]=s}}}return target};dojo.mixin=function(obj,props){if(!obj){obj={}}for(var i=1,l=arguments.length;i<l;i++){d._mixin(obj,arguments[i])}return obj};dojo._getProp=function(parts,create,context){var obj=context||d.global;for(var i=0,p;obj&&(p=parts[i]);i++){if(i==0&&d._scopeMap[p]){p=d._scopeMap[p]}obj=(p in obj?obj[p]:(create?obj[p]={}:undefined))}return obj};dojo.setObject=function(name,value,context){var parts=name.split("."),p=parts.pop(),obj=d._getProp(parts,true,context);return obj&&p?(obj[p]=value):undefined};dojo.getObject=function(name,create,context){return d._getProp(name.split("."),create,context)};dojo.exists=function(name,obj){return !!d.getObject(name,false,obj)};dojo["eval"]=function(scriptFragment){return d.global.eval?d.global.eval(scriptFragment):eval(scriptFragment)};d.deprecated=d.experimental=function(){}})();(function(){var d=dojo;d.mixin(d,{_loadedModules:{},_inFlightCount:0,_hasResource:{},_modulePrefixes:{dojo:{name:"dojo",value:"."},doh:{name:"doh",value:"../util/doh"},tests:{name:"tests",value:"tests"}},_moduleHasPrefix:function(module){var mp=d._modulePrefixes;return !!(mp[module]&&mp[module].value)},_getModulePrefix:function(module){var mp=d._modulePrefixes;if(d._moduleHasPrefix(module)){return mp[module].value}return module},_loadedUrls:[],_postLoad:false,_loaders:[],_unloaders:[],_loadNotifying:false});dojo._loadPath=function(relpath,module,cb){var uri=((relpath.charAt(0)=="/"||relpath.match(/^\w+:/))?"":d.baseUrl)+relpath;try{return !module?d._loadUri(uri,cb):d._loadUriAndCheck(uri,module,cb)}catch(e){console.error(e);return false}};dojo._loadUri=function(uri,cb){if(d._loadedUrls[uri]){return true}d._inFlightCount++;var contents=d._getText(uri,true);if(contents){d._loadedUrls[uri]=true;d._loadedUrls.push(uri);if(cb){contents="("+contents+")"}else{contents=d._scopePrefix+contents+d._scopeSuffix}if(!d.isIE){contents+="\r\n//@ sourceURL="+uri}var value=d["eval"](contents);if(cb){cb(value)}}if(--d._inFlightCount==0&&d._postLoad&&d._loaders.length){setTimeout(function(){if(d._inFlightCount==0){d._callLoaded()}},0)}return !!contents};dojo._loadUriAndCheck=function(uri,moduleName,cb){var ok=false;try{ok=d._loadUri(uri,cb)}catch(e){console.error("failed loading "+uri+" with error: "+e)}return !!(ok&&d._loadedModules[moduleName])};dojo.loaded=function(){d._loadNotifying=true;d._postLoad=true;var mll=d._loaders;d._loaders=[];for(var x=0;x<mll.length;x++){mll[x]()}d._loadNotifying=false;if(d._postLoad&&d._inFlightCount==0&&mll.length){d._callLoaded()}};dojo.unloaded=function(){var mll=d._unloaders;while(mll.length){(mll.pop())()}};d._onto=function(arr,obj,fn){if(!fn){arr.push(obj)}else{if(fn){var func=(typeof fn=="string")?obj[fn]:fn;arr.push(function(){func.call(obj)})}}};dojo.ready=dojo.addOnLoad=function(obj,functionName){d._onto(d._loaders,obj,functionName);if(d._postLoad&&d._inFlightCount==0&&!d._loadNotifying){d._callLoaded()}};var dca=d.config.addOnLoad;if(dca){d.addOnLoad[(dca instanceof Array?"apply":"call")](d,dca)}dojo._modulesLoaded=function(){if(d._postLoad){return}if(d._inFlightCount>0){console.warn("files still in flight!");return}d._callLoaded()};dojo._callLoaded=function(){if(typeof setTimeout=="object"||(d.config.useXDomain&&d.isOpera)){setTimeout(d.isAIR?function(){d.loaded()}:d._scopeName+".loaded();",0)}else{d.loaded()}};dojo._getModuleSymbols=function(modulename){var syms=modulename.split(".");for(var i=syms.length;i>0;i--){var parentModule=syms.slice(0,i).join(".");if(i==1&&!d._moduleHasPrefix(parentModule)){syms[0]="../"+syms[0]}else{var parentModulePath=d._getModulePrefix(parentModule);if(parentModulePath!=parentModule){syms.splice(0,i,parentModulePath);break}}}return syms};dojo._global_omit_module_check=false;dojo.loadInit=function(init){init()};dojo._loadModule=dojo.require=function(moduleName,omitModuleCheck){omitModuleCheck=d._global_omit_module_check||omitModuleCheck;var module=d._loadedModules[moduleName];if(module){return module}var relpath=d._getModuleSymbols(moduleName).join("/")+".js";var modArg=!omitModuleCheck?moduleName:null;var ok=d._loadPath(relpath,modArg);if(!ok&&!omitModuleCheck){throw new Error("Could not load '"+moduleName+"'; last tried '"+relpath+"'")}if(!omitModuleCheck&&!d._isXDomain){module=d._loadedModules[moduleName];if(!module){throw new Error("symbol '"+moduleName+"' is not defined after loading '"+relpath+"'")}}return module};dojo.provide=function(resourceName){resourceName=resourceName+"";return(d._loadedModules[resourceName]=d.getObject(resourceName,true))};dojo.platformRequire=function(modMap){var common=modMap.common||[];var result=common.concat(modMap[d._name]||modMap["default"]||[]);for(var x=0;x<result.length;x++){var curr=result[x];if(curr.constructor==Array){d._loadModule.apply(d,curr)}else{d._loadModule(curr)}}};dojo.requireIf=function(condition,resourceName){if(condition===true){var args=[];for(var i=1;i<arguments.length;i++){args.push(arguments[i])}d.require.apply(d,args)}};dojo.requireAfterIf=d.requireIf;dojo.registerModulePath=function(module,prefix){d._modulePrefixes[module]={name:module,value:prefix}};dojo.requireLocalization=function(moduleName,bundleName,locale,availableFlatLocales){d.require("dojo.i18n");d.i18n._requireLocalization.apply(d.hostenv,arguments)};var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");dojo._Url=function(){var n=null,_a=arguments,uri=[_a[0]];for(var i=1;i<_a.length;i++){if(!_a[i]){continue}var relobj=new d._Url(_a[i]+""),uriobj=new d._Url(uri[0]+"");if(relobj.path==""&&!relobj.scheme&&!relobj.authority&&!relobj.query){if(relobj.fragment!=n){uriobj.fragment=relobj.fragment}relobj=uriobj}else{if(!relobj.scheme){relobj.scheme=uriobj.scheme;if(!relobj.authority){relobj.authority=uriobj.authority;if(relobj.path.charAt(0)!="/"){var path=uriobj.path.substring(0,uriobj.path.lastIndexOf("/")+1)+relobj.path;var segs=path.split("/");for(var j=0;j<segs.length;j++){if(segs[j]=="."){if(j==segs.length-1){segs[j]=""}else{segs.splice(j,1);j--}}else{if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){if(j==(segs.length-1)){segs.splice(j,1);segs[j-1]=""}else{segs.splice(j-1,2);j-=2}}}}relobj.path=segs.join("/")}}}}uri=[];if(relobj.scheme){uri.push(relobj.scheme,":")}if(relobj.authority){uri.push("//",relobj.authority)}uri.push(relobj.path);if(relobj.query){uri.push("?",relobj.query)}if(relobj.fragment){uri.push("#",relobj.fragment)}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n}};dojo._Url.prototype.toString=function(){return this.uri};dojo.moduleUrl=function(module,url){var loc=d._getModuleSymbols(module).join("/");if(!loc){return null}if(loc.lastIndexOf("/")!=loc.length-1){loc+="/"}var colonIndex=loc.indexOf(":");if(loc.charAt(0)!="/"&&(colonIndex==-1||colonIndex>loc.indexOf("/"))){loc=d.baseUrl+loc}return new d._Url(loc,url)}})();if(typeof window!="undefined"){dojo.isBrowser=true;dojo._name="browser";(function(){var d=dojo;if(document&&document.getElementsByTagName){var scripts=document.getElementsByTagName("script");var rePkg=/dojo(\.xd)?\.js(\W|$)/i;for(var i=0;i<scripts.length;i++){var src=scripts[i].getAttribute("src");if(!src){continue}var m=src.match(rePkg);if(m){if(!d.config.baseUrl){d.config.baseUrl=src.substring(0,m.index)}var cfg=scripts[i].getAttribute("djConfig");if(cfg){var cfgo=eval("({ "+cfg+" })");for(var x in cfgo){dojo.config[x]=cfgo[x]}}break}}}d.baseUrl=d.config.baseUrl;var n=navigator;var dua=n.userAgent,dav=n.appVersion,tv=parseFloat(dav);if(dua.indexOf("Opera")>=0){d.isOpera=tv}if(dua.indexOf("AdobeAIR")>=0){d.isAIR=1}d.isKhtml=(dav.indexOf("Konqueror")>=0)?tv:0;d.isWebKit=parseFloat(dua.split("WebKit/")[1])||undefined;d.isChrome=parseFloat(dua.split("Chrome/")[1])||undefined;d.isMac=dav.indexOf("Macintosh")>=0;var index=Math.max(dav.indexOf("WebKit"),dav.indexOf("Safari"),0);if(index&&!dojo.isChrome){d.isSafari=parseFloat(dav.split("Version/")[1]);if(!d.isSafari||parseFloat(dav.substr(index+7))<=419.3){d.isSafari=2}}if(dua.indexOf("Gecko")>=0&&!d.isKhtml&&!d.isWebKit){d.isMozilla=d.isMoz=tv}if(d.isMoz){d.isFF=parseFloat(dua.split("Firefox/")[1]||dua.split("Minefield/")[1])||undefined}if(document.all&&!d.isOpera){d.isIE=parseFloat(dav.split("MSIE ")[1])||undefined;var mode=document.documentMode;if(mode&&mode!=5&&Math.floor(d.isIE)!=mode){d.isIE=mode}}if(dojo.isIE&&window.location.protocol==="file:"){dojo.config.ieForceActiveXXhr=true}d.isQuirks=document.compatMode=="BackCompat";d.locale=dojo.config.locale||(d.isIE?n.userLanguage:n.language).toLowerCase();d._XMLHTTP_PROGIDS=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];d._xhrObj=function(){var http,last_e;if(!dojo.isIE||!dojo.config.ieForceActiveXXhr){try{http=new XMLHttpRequest()}catch(e){}}if(!http){for(var i=0;i<3;++i){var progid=d._XMLHTTP_PROGIDS[i];try{http=new ActiveXObject(progid)}catch(e){last_e=e}if(http){d._XMLHTTP_PROGIDS=[progid];break}}}if(!http){throw new Error("XMLHTTP not available: "+last_e)}return http};d._isDocumentOk=function(http){var stat=http.status||0,lp=location.protocol;return(stat>=200&&stat<300)||stat==304||stat==1223||(!stat&&(lp=="file:"||lp=="chrome:"||lp=="chrome-extension:"||lp=="app:"))};var owloc=window.location+"";var base=document.getElementsByTagName("base");var hasBase=(base&&base.length>0);d._getText=function(uri,fail_ok){var http=d._xhrObj();if(!hasBase&&dojo._Url){uri=(new dojo._Url(owloc,uri)).toString()}if(d.config.cacheBust){uri+="";uri+=(uri.indexOf("?")==-1?"?":"&")+String(d.config.cacheBust).replace(/\W+/g,"")}http.open("GET",uri,false);try{http.send(null);if(!d._isDocumentOk(http)){var err=Error("Unable to load "+uri+" status:"+http.status);err.status=http.status;err.responseText=http.responseText;throw err}}catch(e){if(fail_ok){return null}throw e}return http.responseText};var _w=window;var _handleNodeEvent=function(evtName,fp){var _a=_w.attachEvent||_w.addEventListener;evtName=_w.attachEvent?evtName:evtName.substring(2);_a(evtName,function(){fp.apply(_w,arguments)},false)};d._windowUnloaders=[];d.windowUnloaded=function(){var mll=d._windowUnloaders;while(mll.length){(mll.pop())()}d=null};var _onWindowUnloadAttached=0;d.addOnWindowUnload=function(obj,functionName){d._onto(d._windowUnloaders,obj,functionName);if(!_onWindowUnloadAttached){_onWindowUnloadAttached=1;_handleNodeEvent("onunload",d.windowUnloaded)}};var _onUnloadAttached=0;d.addOnUnload=function(obj,functionName){d._onto(d._unloaders,obj,functionName);if(!_onUnloadAttached){_onUnloadAttached=1;_handleNodeEvent("onbeforeunload",dojo.unloaded)}}})();dojo._initFired=false;dojo._loadInit=function(e){if(dojo._scrollIntervalId){clearInterval(dojo._scrollIntervalId);dojo._scrollIntervalId=0}if(!dojo._initFired){dojo._initFired=true;if(!dojo.config.afterOnLoad&&window.detachEvent){window.detachEvent("onload",dojo._loadInit)}if(dojo._inFlightCount==0){dojo._modulesLoaded()}}};if(!dojo.config.afterOnLoad){if(document.addEventListener){document.addEventListener("DOMContentLoaded",dojo._loadInit,false);window.addEventListener("load",dojo._loadInit,false)}else{if(window.attachEvent){window.attachEvent("onload",dojo._loadInit);if(!dojo.config.skipIeDomLoaded&&self===self.top){dojo._scrollIntervalId=setInterval(function(){try{if(document.body){document.documentElement.doScroll("left");dojo._loadInit()}}catch(e){}},30)}}}}if(dojo.isIE){try{(function(){document.namespaces.add("v","urn:schemas-microsoft-com:vml");var vmlElems=["*","group","roundrect","oval","shape","rect","imagedata","path","textpath","text"],i=0,l=1,s=document.createStyleSheet();if(dojo.isIE>=8){i=1;l=vmlElems.length}for(;i<l;++i){s.addRule("v\\:"+vmlElems[i],"behavior:url(#default#VML); display:inline-block")}})()}catch(e){}}}(function(){var mp=dojo.config.modulePaths;if(mp){for(var param in mp){dojo.registerModulePath(param,mp[param])}}})();if(dojo.config.isDebug){dojo.require("dojo._firebug.firebug")}if(dojo.config.debugAtAllCosts){dojo.config.useXDomain=true;dojo.require("dojo._base._loader.loader_xd");dojo.require("dojo._base._loader.loader_debug");dojo.require("dojo.i18n")}if(!dojo._hasResource["dojo._base.lang"]){dojo._hasResource["dojo._base.lang"]=true;dojo.provide("dojo._base.lang");(function(){var d=dojo,opts=Object.prototype.toString;dojo.isString=function(it){return(typeof it=="string"||it instanceof String)};dojo.isArray=function(it){return it&&(it instanceof Array||typeof it=="array")};dojo.isFunction=function(it){return opts.call(it)==="[object Function]"};dojo.isObject=function(it){return it!==undefined&&(it===null||typeof it=="object"||d.isArray(it)||d.isFunction(it))};dojo.isArrayLike=function(it){return it&&it!==undefined&&!d.isString(it)&&!d.isFunction(it)&&!(it.tagName&&it.tagName.toLowerCase()=="form")&&(d.isArray(it)||isFinite(it.length))};dojo.isAlien=function(it){return it&&!d.isFunction(it)&&/\{\s*\[native code\]\s*\}/.test(String(it))};dojo.extend=function(constructor,props){for(var i=1,l=arguments.length;i<l;i++){d._mixin(constructor.prototype,arguments[i])}return constructor};dojo._hitchArgs=function(scope,method){var pre=d._toArray(arguments,2);var named=d.isString(method);return function(){var args=d._toArray(arguments);var f=named?(scope||d.global)[method]:method;return f&&f.apply(scope||this,pre.concat(args))}};dojo.hitch=function(scope,method){if(arguments.length>2){return d._hitchArgs.apply(d,arguments)}if(!method){method=scope;scope=null}if(d.isString(method)){scope=scope||d.global;if(!scope[method]){throw (['dojo.hitch: scope["',method,'"] is null (scope="',scope,'")'].join(""))}return function(){return scope[method].apply(scope,arguments||[])}}return !scope?method:function(){return method.apply(scope,arguments||[])}};dojo.delegate=dojo._delegate=(function(){function TMP(){}return function(obj,props){TMP.prototype=obj;var tmp=new TMP();TMP.prototype=null;if(props){d._mixin(tmp,props)}return tmp}})();var efficient=function(obj,offset,startWith){return(startWith||[]).concat(Array.prototype.slice.call(obj,offset||0))};var slow=function(obj,offset,startWith){var arr=startWith||[];for(var x=offset||0;x<obj.length;x++){arr.push(obj[x])}return arr};dojo._toArray=d.isIE?function(obj){return((obj.item)?slow:efficient).apply(this,arguments)}:efficient;dojo.partial=function(method){var arr=[null];return d.hitch.apply(d,arr.concat(d._toArray(arguments)))};var extraNames=d._extraNames,extraLen=extraNames.length,empty={};dojo.clone=function(o){if(!o||typeof o!="object"||d.isFunction(o)){return o}if(o.nodeType&&"cloneNode" in o){return o.cloneNode(true)}if(o instanceof Date){return new Date(o.getTime())}var r,i,l,s,name;if(d.isArray(o)){r=[];for(i=0,l=o.length;i<l;++i){if(i in o){r.push(d.clone(o[i]))}}}else{r=o.constructor?new o.constructor():{}}for(name in o){s=o[name];if(!(name in r)||(r[name]!==s&&(!(name in empty)||empty[name]!==s))){r[name]=d.clone(s)}}if(extraLen){for(i=0;i<extraLen;++i){name=extraNames[i];s=o[name];if(!(name in r)||(r[name]!==s&&(!(name in empty)||empty[name]!==s))){r[name]=s}}}return r};dojo.trim=String.prototype.trim?function(str){return str.trim()}:function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};var _pattern=/\{([^\}]+)\}/g;dojo.replace=function(tmpl,map,pattern){return tmpl.replace(pattern||_pattern,d.isFunction(map)?map:function(_,k){return d.getObject(k,false,map)})}})()}if(!dojo._hasResource["dojo._base.array"]){dojo._hasResource["dojo._base.array"]=true;dojo.provide("dojo._base.array");(function(){var _getParts=function(arr,obj,cb){return[(typeof arr=="string")?arr.split(""):arr,obj||dojo.global,(typeof cb=="string")?new Function("item","index","array",cb):cb]};var everyOrSome=function(every,arr,callback,thisObject){var _p=_getParts(arr,thisObject,callback);arr=_p[0];for(var i=0,l=arr.length;i<l;++i){var result=!!_p[2].call(_p[1],arr[i],i,arr);if(every^result){return result}}return every};dojo.mixin(dojo,{indexOf:function(array,value,fromIndex,findLast){var step=1,end=array.length||0,i=0;if(findLast){i=end-1;step=end=-1}if(fromIndex!=undefined){i=fromIndex}if((findLast&&i>end)||i<end){for(;i!=end;i+=step){if(array[i]==value){return i}}}return -1},lastIndexOf:function(array,value,fromIndex){return dojo.indexOf(array,value,fromIndex,true)},forEach:function(arr,callback,thisObject){if(!arr||!arr.length){return}var _p=_getParts(arr,thisObject,callback);arr=_p[0];for(var i=0,l=arr.length;i<l;++i){_p[2].call(_p[1],arr[i],i,arr)}},every:function(arr,callback,thisObject){return everyOrSome(true,arr,callback,thisObject)},some:function(arr,callback,thisObject){return everyOrSome(false,arr,callback,thisObject)},map:function(arr,callback,thisObject){var _p=_getParts(arr,thisObject,callback);arr=_p[0];var outArr=(arguments[3]?(new arguments[3]()):[]);for(var i=0,l=arr.length;i<l;++i){outArr.push(_p[2].call(_p[1],arr[i],i,arr))}return outArr},filter:function(arr,callback,thisObject){var _p=_getParts(arr,thisObject,callback);arr=_p[0];var outArr=[];for(var i=0,l=arr.length;i<l;++i){if(_p[2].call(_p[1],arr[i],i,arr)){outArr.push(arr[i])}}return outArr}})})()}if(!dojo._hasResource["dojo._base.declare"]){dojo._hasResource["dojo._base.declare"]=true;dojo.provide("dojo._base.declare");(function(){var d=dojo,mix=d._mixin,op=Object.prototype,opts=op.toString,xtor=new Function,counter=0,cname="constructor";function err(msg){throw new Error("declare: "+msg)}function c3mro(bases){var result=[],roots=[{cls:0,refs:[]}],nameMap={},clsCount=1,l=bases.length,i=0,j,lin,base,top,proto,rec,name,refs;for(;i<l;++i){base=bases[i];if(!base){err("mixin #"+i+" is unknown. Did you use dojo.require to pull it in?")}else{if(opts.call(base)!="[object Function]"){err("mixin #"+i+" is not a callable constructor.")}}lin=base._meta?base._meta.bases:[base];top=0;for(j=lin.length-1;j>=0;--j){proto=lin[j].prototype;if(!proto.hasOwnProperty("declaredClass")){proto.declaredClass="uniqName_"+(counter++)}name=proto.declaredClass;if(!nameMap.hasOwnProperty(name)){nameMap[name]={count:0,refs:[],cls:lin[j]};++clsCount}rec=nameMap[name];if(top&&top!==rec){rec.refs.push(top);++top.count}top=rec}++top.count;roots[0].refs.push(top)}while(roots.length){top=roots.pop();result.push(top.cls);--clsCount;while(refs=top.refs,refs.length==1){top=refs[0];if(!top||--top.count){top=0;break}result.push(top.cls);--clsCount}if(top){for(i=0,l=refs.length;i<l;++i){top=refs[i];if(!--top.count){roots.push(top)}}}}if(clsCount){err("can't build consistent linearization")}base=bases[0];result[0]=base?base._meta&&base===result[result.length-base._meta.bases.length]?base._meta.bases.length:1:0;return result}function inherited(args,a,f){var name,chains,bases,caller,meta,base,proto,opf,pos,cache=this._inherited=this._inherited||{};if(typeof args=="string"){name=args;args=a;a=f}f=0;caller=args.callee;name=name||caller.nom;if(!name){err("can't deduce a name to call inherited()")}meta=this.constructor._meta;bases=meta.bases;pos=cache.p;if(name!=cname){if(cache.c!==caller){pos=0;base=bases[0];meta=base._meta;if(meta.hidden[name]!==caller){chains=meta.chains;if(chains&&typeof chains[name]=="string"){err("calling chained method with inherited: "+name)}do{meta=base._meta;proto=base.prototype;if(meta&&(proto[name]===caller&&proto.hasOwnProperty(name)||meta.hidden[name]===caller)){break}}while(base=bases[++pos]);pos=base?pos:-1}}base=bases[++pos];if(base){proto=base.prototype;if(base._meta&&proto.hasOwnProperty(name)){f=proto[name]}else{opf=op[name];do{proto=base.prototype;f=proto[name];if(f&&(base._meta?proto.hasOwnProperty(name):f!==opf)){break}}while(base=bases[++pos])}}f=base&&f||op[name]}else{if(cache.c!==caller){pos=0;meta=bases[0]._meta;if(meta&&meta.ctor!==caller){chains=meta.chains;if(!chains||chains.constructor!=="manual"){err("calling chained constructor with inherited")}while(base=bases[++pos]){meta=base._meta;if(meta&&meta.ctor===caller){break}}pos=base?pos:-1}}while(base=bases[++pos]){meta=base._meta;f=meta?meta.ctor:base;if(f){break}}f=base&&f}cache.c=f;cache.p=pos;if(f){return a===true?f:f.apply(this,a||args)}}function getInherited(name,args){if(typeof name=="string"){return this.inherited(name,args,true)}return this.inherited(name,true)}function isInstanceOf(cls){var bases=this.constructor._meta.bases;for(var i=0,l=bases.length;i<l;++i){if(bases[i]===cls){return true}}return this instanceof cls}function mixOwn(target,source){var name,i=0,l=d._extraNames.length;for(name in source){if(name!=cname&&source.hasOwnProperty(name)){target[name]=source[name]}}for(;i<l;++i){name=d._extraNames[i];if(name!=cname&&source.hasOwnProperty(name)){target[name]=source[name]}}}function safeMixin(target,source){var name,t,i=0,l=d._extraNames.length;for(name in source){t=source[name];if((t!==op[name]||!(name in op))&&name!=cname){if(opts.call(t)=="[object Function]"){t.nom=name}target[name]=t}}for(;i<l;++i){name=d._extraNames[i];t=source[name];if((t!==op[name]||!(name in op))&&name!=cname){if(opts.call(t)=="[object Function]"){t.nom=name}target[name]=t}}return target}function extend(source){safeMixin(this.prototype,source);return this}function chainedConstructor(bases,ctorSpecial){return function(){var a=arguments,args=a,a0=a[0],f,i,m,l=bases.length,preArgs;if(!(this instanceof a.callee)){return applyNew(a)}if(ctorSpecial&&(a0&&a0.preamble||this.preamble)){preArgs=new Array(bases.length);preArgs[0]=a;for(i=0;;){a0=a[0];if(a0){f=a0.preamble;if(f){a=f.apply(this,a)||a}}f=bases[i].prototype;f=f.hasOwnProperty("preamble")&&f.preamble;if(f){a=f.apply(this,a)||a}if(++i==l){break}preArgs[i]=a}}for(i=l-1;i>=0;--i){f=bases[i];m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,preArgs?preArgs[i]:a)}}f=this.postscript;if(f){f.apply(this,args)}}}function singleConstructor(ctor,ctorSpecial){return function(){var a=arguments,t=a,a0=a[0],f;if(!(this instanceof a.callee)){return applyNew(a)}if(ctorSpecial){if(a0){f=a0.preamble;if(f){t=f.apply(this,t)||t}}f=this.preamble;if(f){f.apply(this,t)}}if(ctor){ctor.apply(this,a)}f=this.postscript;if(f){f.apply(this,a)}}}function simpleConstructor(bases){return function(){var a=arguments,i=0,f,m;if(!(this instanceof a.callee)){return applyNew(a)}for(;f=bases[i];++i){m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,a);break}}f=this.postscript;if(f){f.apply(this,a)}}}function chain(name,bases,reversed){return function(){var b,m,f,i=0,step=1;if(reversed){i=bases.length-1;step=-1}for(;b=bases[i];i+=step){m=b._meta;f=(m?m.hidden:b.prototype)[name];if(f){f.apply(this,arguments)}}}}function forceNew(ctor){xtor.prototype=ctor.prototype;var t=new xtor;xtor.prototype=null;return t}function applyNew(args){var ctor=args.callee,t=forceNew(ctor);ctor.apply(t,args);return t}d.declare=function(className,superclass,props){if(typeof className!="string"){props=superclass;superclass=className;className=""}props=props||{};var proto,i,t,ctor,name,bases,chains,mixins=1,parents=superclass;if(opts.call(superclass)=="[object Array]"){bases=c3mro(superclass);t=bases[0];mixins=bases.length-t;superclass=bases[mixins]}else{bases=[0];if(superclass){if(opts.call(superclass)=="[object Function]"){t=superclass._meta;bases=bases.concat(t?t.bases:superclass)}else{err("base class is not a callable constructor.")}}else{if(superclass!==null){err("unknown base class. Did you use dojo.require to pull it in?")}}}if(superclass){for(i=mixins-1;;--i){proto=forceNew(superclass);if(!i){break}t=bases[i];(t._meta?mixOwn:mix)(proto,t.prototype);ctor=new Function;ctor.superclass=superclass;ctor.prototype=proto;superclass=proto.constructor=ctor}}else{proto={}}safeMixin(proto,props);t=props.constructor;if(t!==op.constructor){t.nom=cname;proto.constructor=t}for(i=mixins-1;i;--i){t=bases[i]._meta;if(t&&t.chains){chains=mix(chains||{},t.chains)}}if(proto["-chains-"]){chains=mix(chains||{},proto["-chains-"])}t=!chains||!chains.hasOwnProperty(cname);bases[0]=ctor=(chains&&chains.constructor==="manual")?simpleConstructor(bases):(bases.length==1?singleConstructor(props.constructor,t):chainedConstructor(bases,t));ctor._meta={bases:bases,hidden:props,chains:chains,parents:parents,ctor:props.constructor};ctor.superclass=superclass&&superclass.prototype;ctor.extend=extend;ctor.prototype=proto;proto.constructor=ctor;proto.getInherited=getInherited;proto.inherited=inherited;proto.isInstanceOf=isInstanceOf;if(className){proto.declaredClass=className;d.setObject(className,ctor)}if(chains){for(name in chains){if(proto[name]&&typeof chains[name]=="string"&&name!=cname){t=proto[name]=chain(name,bases,chains[name]==="after");t.nom=name}}}return ctor};d.safeMixin=safeMixin})()}if(!dojo._hasResource["dojo._base.connect"]){dojo._hasResource["dojo._base.connect"]=true;dojo.provide("dojo._base.connect");dojo._listener={getDispatcher:function(){return function(){var ap=Array.prototype,c=arguments.callee,ls=c._listeners,t=c.target;var r=t&&t.apply(this,arguments);var i,lls;lls=[].concat(ls);for(i in lls){if(!(i in ap)){lls[i].apply(this,arguments)}}return r}},add:function(source,method,listener){source=source||dojo.global;var f=source[method];if(!f||!f._listeners){var d=dojo._listener.getDispatcher();d.target=f;d._listeners=[];f=source[method]=d}return f._listeners.push(listener)},remove:function(source,method,handle){var f=(source||dojo.global)[method];if(f&&f._listeners&&handle--){delete f._listeners[handle]}}};dojo.connect=function(obj,event,context,method,dontFix){var a=arguments,args=[],i=0;args.push(dojo.isString(a[0])?null:a[i++],a[i++]);var a1=a[i+1];args.push(dojo.isString(a1)||dojo.isFunction(a1)?a[i++]:null,a[i++]);for(var l=a.length;i<l;i++){args.push(a[i])}return dojo._connect.apply(this,args)};dojo._connect=function(obj,event,context,method){var l=dojo._listener,h=l.add(obj,event,dojo.hitch(context,method));return[obj,event,h,l]};dojo.disconnect=function(handle){if(handle&&handle[0]!==undefined){dojo._disconnect.apply(this,handle);delete handle[0]}};dojo._disconnect=function(obj,event,handle,listener){listener.remove(obj,event,handle)};dojo._topics={};dojo.subscribe=function(topic,context,method){return[topic,dojo._listener.add(dojo._topics,topic,dojo.hitch(context,method))]};dojo.unsubscribe=function(handle){if(handle){dojo._listener.remove(dojo._topics,handle[0],handle[1])}};dojo.publish=function(topic,args){var f=dojo._topics[topic];if(f){f.apply(this,args||[])}};dojo.connectPublisher=function(topic,obj,event){var pf=function(){dojo.publish(topic,arguments)};return event?dojo.connect(obj,event,pf):dojo.connect(obj,pf)}}if(!dojo._hasResource["dojo._base.Deferred"]){dojo._hasResource["dojo._base.Deferred"]=true;dojo.provide("dojo._base.Deferred");(function(){var mutator=function(){};var freeze=Object.freeze||function(){};dojo.Deferred=function(canceller){var result,finished,isError,head,nextListener;var promise=this.promise={};function complete(value){if(finished){throw new Error("This deferred has already been resolved")}result=value;finished=true;notify()}function notify(){var mutated;while(!mutated&&nextListener){var listener=nextListener;nextListener=nextListener.next;if(mutated=(listener.progress==mutator)){finished=false}var func=(isError?listener.error:listener.resolved);if(func){try{var newResult=func(result);if(newResult&&typeof newResult.then==="function"){newResult.then(dojo.hitch(listener.deferred,"resolve"),dojo.hitch(listener.deferred,"reject"));continue}var unchanged=mutated&&newResult===undefined;listener.deferred[unchanged&&isError?"reject":"resolve"](unchanged?result:newResult)}catch(e){listener.deferred.reject(e)}}else{if(isError){listener.deferred.reject(result)}else{listener.deferred.resolve(result)}}}}this.resolve=this.callback=function(value){this.fired=0;this.results=[value,null];complete(value)};this.reject=this.errback=function(error){isError=true;this.fired=1;complete(error);this.results=[null,error];if(!error||error.log!==false){(dojo.config.deferredOnError||function(x){console.error(x)})(error)}};this.progress=function(update){var listener=nextListener;while(listener){var progress=listener.progress;progress&&progress(update);listener=listener.next}};this.addCallbacks=function(callback,errback){this.then(callback,errback,mutator);return this};this.then=promise.then=function(resolvedCallback,errorCallback,progressCallback){var returnDeferred=progressCallback==mutator?this:new dojo.Deferred(promise.cancel);var listener={resolved:resolvedCallback,error:errorCallback,progress:progressCallback,deferred:returnDeferred};if(nextListener){head=head.next=listener}else{nextListener=head=listener}if(finished){notify()}return returnDeferred.promise};var deferred=this;this.cancel=promise.cancel=function(){if(!finished){var error=canceller&&canceller(deferred);if(!finished){if(!(error instanceof Error)){error=new Error(error)}error.log=false;deferred.reject(error)}}};freeze(promise)};dojo.extend(dojo.Deferred,{addCallback:function(callback){return this.addCallbacks(dojo.hitch.apply(dojo,arguments))},addErrback:function(errback){return this.addCallbacks(null,dojo.hitch.apply(dojo,arguments))},addBoth:function(callback){var enclosed=dojo.hitch.apply(dojo,arguments);return this.addCallbacks(enclosed,enclosed)},fired:-1})})();dojo.when=function(promiseOrValue,callback,errback,progressHandler){if(promiseOrValue&&typeof promiseOrValue.then==="function"){return promiseOrValue.then(callback,errback,progressHandler)}return callback(promiseOrValue)}}if(!dojo._hasResource["dojo._base.json"]){dojo._hasResource["dojo._base.json"]=true;dojo.provide("dojo._base.json");dojo.fromJson=function(json){return eval("("+json+")")};dojo._escapeString=function(str){return('"'+str.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};dojo.toJsonIndentStr="\t";dojo.toJson=function(it,prettyPrint,_indentStr){if(it===undefined){return"undefined"}var objtype=typeof it;if(objtype=="number"||objtype=="boolean"){return it+""}if(it===null){return"null"}if(dojo.isString(it)){return dojo._escapeString(it)}var recurse=arguments.callee;var newObj;_indentStr=_indentStr||"";var nextIndent=prettyPrint?_indentStr+dojo.toJsonIndentStr:"";var tf=it.__json__||it.json;if(dojo.isFunction(tf)){newObj=tf.call(it);if(it!==newObj){return recurse(newObj,prettyPrint,nextIndent)}}if(it.nodeType&&it.cloneNode){throw new Error("Can't serialize DOM nodes")}var sep=prettyPrint?" ":"";var newLine=prettyPrint?"\n":"";if(dojo.isArray(it)){var res=dojo.map(it,function(obj){var val=recurse(obj,prettyPrint,nextIndent);if(typeof val!="string"){val="undefined"}return newLine+nextIndent+val});return"["+res.join(","+sep)+newLine+_indentStr+"]"}if(objtype=="function"){return null}var output=[],key;for(key in it){var keyStr,val;if(typeof key=="number"){keyStr='"'+key+'"'}else{if(typeof key=="string"){keyStr=dojo._escapeString(key)}else{continue}}val=recurse(it[key],prettyPrint,nextIndent);if(typeof val!="string"){continue}output.push(newLine+nextIndent+keyStr+":"+sep+val)}return"{"+output.join(","+sep)+newLine+_indentStr+"}"}}if(!dojo._hasResource["dojo._base.Color"]){dojo._hasResource["dojo._base.Color"]=true;dojo.provide("dojo._base.Color");(function(){var d=dojo;dojo.Color=function(color){if(color){this.setColor(color)}};dojo.Color.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:d.config.transparentColor||[255,255,255]};dojo.extend(dojo.Color,{r:255,g:255,b:255,a:1,_set:function(r,g,b,a){var t=this;t.r=r;t.g=g;t.b=b;t.a=a},setColor:function(color){if(d.isString(color)){d.colorFromString(color,this)}else{if(d.isArray(color)){d.colorFromArray(color,this)}else{this._set(color.r,color.g,color.b,color.a);if(!(color instanceof d.Color)){this.sanitize()}}}return this},sanitize:function(){return this},toRgb:function(){var t=this;return[t.r,t.g,t.b]},toRgba:function(){var t=this;return[t.r,t.g,t.b,t.a]},toHex:function(){var arr=d.map(["r","g","b"],function(x){var s=this[x].toString(16);return s.length<2?"0"+s:s},this);return"#"+arr.join("")},toCss:function(includeAlpha){var t=this,rgb=t.r+", "+t.g+", "+t.b;return(includeAlpha?"rgba("+rgb+", "+t.a:"rgb("+rgb)+")"},toString:function(){return this.toCss(true)}});dojo.blendColors=function(start,end,weight,obj){var t=obj||new d.Color();d.forEach(["r","g","b","a"],function(x){t[x]=start[x]+(end[x]-start[x])*weight;if(x!="a"){t[x]=Math.round(t[x])}});return t.sanitize()};dojo.colorFromRgb=function(color,obj){var m=color.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return m&&dojo.colorFromArray(m[1].split(/\s*,\s*/),obj)};dojo.colorFromHex=function(color,obj){var t=obj||new d.Color(),bits=(color.length==4)?4:8,mask=(1<<bits)-1;color=Number("0x"+color.substr(1));if(isNaN(color)){return null}d.forEach(["b","g","r"],function(x){var c=color&mask;color>>=bits;t[x]=bits==4?17*c:c});t.a=1;return t};dojo.colorFromArray=function(a,obj){var t=obj||new d.Color();t._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));if(isNaN(t.a)){t.a=1}return t.sanitize()};dojo.colorFromString=function(str,obj){var a=d.Color.named[str];return a&&d.colorFromArray(a,obj)||d.colorFromRgb(str,obj)||d.colorFromHex(str,obj)}})()}if(!dojo._hasResource["dojo._base"]){dojo._hasResource["dojo._base"]=true;dojo.provide("dojo._base")}if(!dojo._hasResource["dojo._base.window"]){dojo._hasResource["dojo._base.window"]=true;dojo.provide("dojo._base.window");dojo.doc=window.document||null;dojo.body=function(){return dojo.doc.body||dojo.doc.getElementsByTagName("body")[0]};dojo.setContext=function(globalObject,globalDocument){dojo.global=globalObject;dojo.doc=globalDocument};dojo.withGlobal=function(globalObject,callback,thisObject,cbArguments){var oldGlob=dojo.global;try{dojo.global=globalObject;return dojo.withDoc.call(null,globalObject.document,callback,thisObject,cbArguments)}finally{dojo.global=oldGlob}};dojo.withDoc=function(documentObject,callback,thisObject,cbArguments){var oldDoc=dojo.doc,oldLtr=dojo._bodyLtr,oldQ=dojo.isQuirks;try{dojo.doc=documentObject;delete dojo._bodyLtr;dojo.isQuirks=dojo.doc.compatMode=="BackCompat";if(thisObject&&typeof callback=="string"){callback=thisObject[callback]}return callback.apply(thisObject,cbArguments||[])}finally{dojo.doc=oldDoc;delete dojo._bodyLtr;if(oldLtr!==undefined){dojo._bodyLtr=oldLtr}dojo.isQuirks=oldQ}}}if(!dojo._hasResource["dojo._base.event"]){dojo._hasResource["dojo._base.event"]=true;dojo.provide("dojo._base.event");(function(){var del=(dojo._event_listener={add:function(node,name,fp){if(!node){return}name=del._normalizeEventName(name);fp=del._fixCallback(name,fp);var oname=name;if(!dojo.isIE&&(name=="mouseenter"||name=="mouseleave")){var ofp=fp;name=(name=="mouseenter")?"mouseover":"mouseout";fp=function(e){if(!dojo.isDescendant(e.relatedTarget,node)){return ofp.call(this,e)}}}node.addEventListener(name,fp,false);return fp},remove:function(node,event,handle){if(node){event=del._normalizeEventName(event);if(!dojo.isIE&&(event=="mouseenter"||event=="mouseleave")){event=(event=="mouseenter")?"mouseover":"mouseout"}node.removeEventListener(event,handle,false)}},_normalizeEventName:function(name){return name.slice(0,2)=="on"?name.slice(2):name},_fixCallback:function(name,fp){return name!="keypress"?fp:function(e){return fp.call(this,del._fixEvent(e,this))}},_fixEvent:function(evt,sender){switch(evt.type){case"keypress":del._setKeyChar(evt);break}return evt},_setKeyChar:function(evt){evt.keyChar=evt.charCode?String.fromCharCode(evt.charCode):"";evt.charOrCode=evt.keyChar||evt.keyCode},_punctMap:{106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39}});dojo.fixEvent=function(evt,sender){return del._fixEvent(evt,sender)};dojo.stopEvent=function(evt){evt.preventDefault();evt.stopPropagation()};var node_listener=dojo._listener;dojo._connect=function(obj,event,context,method,dontFix){var isNode=obj&&(obj.nodeType||obj.attachEvent||obj.addEventListener);var lid=isNode?(dontFix?2:1):0,l=[dojo._listener,del,node_listener][lid];var h=l.add(obj,event,dojo.hitch(context,method));return[obj,event,h,lid]};dojo._disconnect=function(obj,event,handle,listener){([dojo._listener,del,node_listener][listener]).remove(obj,event,handle)};dojo.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:dojo.isSafari?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,copyKey:dojo.isMac&&!dojo.isAIR?(dojo.isSafari?91:224):17};var evtCopyKey=dojo.isMac?"metaKey":"ctrlKey";dojo.isCopyKey=function(e){return e[evtCopyKey]};if(dojo.isIE){dojo.mouseButtons={LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,button){return e.button&button},isLeft:function(e){return e.button&1},isMiddle:function(e){return e.button&4},isRight:function(e){return e.button&2}}}else{dojo.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,button){return e.button==button},isLeft:function(e){return e.button==0},isMiddle:function(e){return e.button==1},isRight:function(e){return e.button==2}}}if(dojo.isIE){var _trySetKeyCode=function(e,code){try{return(e.keyCode=code)}catch(e){return 0}};var iel=dojo._listener;var listenersName=(dojo._ieListenersName="_"+dojo._scopeName+"_listeners");if(!dojo.config._allow_leaks){node_listener=iel=dojo._ie_listener={handlers:[],add:function(source,method,listener){source=source||dojo.global;var f=source[method];if(!f||!f[listenersName]){var d=dojo._getIeDispatcher();d.target=f&&(ieh.push(f)-1);d[listenersName]=[];f=source[method]=d}return f[listenersName].push(ieh.push(listener)-1)},remove:function(source,method,handle){var f=(source||dojo.global)[method],l=f&&f[listenersName];if(f&&l&&handle--){delete ieh[l[handle]];delete l[handle]}}};var ieh=iel.handlers}dojo.mixin(del,{add:function(node,event,fp){if(!node){return}event=del._normalizeEventName(event);if(event=="onkeypress"){var kd=node.onkeydown;if(!kd||!kd[listenersName]||!kd._stealthKeydownHandle){var h=del.add(node,"onkeydown",del._stealthKeyDown);kd=node.onkeydown;kd._stealthKeydownHandle=h;kd._stealthKeydownRefs=1}else{kd._stealthKeydownRefs++}}return iel.add(node,event,del._fixCallback(fp))},remove:function(node,event,handle){event=del._normalizeEventName(event);iel.remove(node,event,handle);if(event=="onkeypress"){var kd=node.onkeydown;if(--kd._stealthKeydownRefs<=0){iel.remove(node,"onkeydown",kd._stealthKeydownHandle);delete kd._stealthKeydownHandle}}},_normalizeEventName:function(eventName){return eventName.slice(0,2)!="on"?"on"+eventName:eventName},_nop:function(){},_fixEvent:function(evt,sender){if(!evt){var w=sender&&(sender.ownerDocument||sender.document||sender).parentWindow||window;evt=w.event}if(!evt){return(evt)}evt.target=evt.srcElement;evt.currentTarget=(sender||evt.srcElement);evt.layerX=evt.offsetX;evt.layerY=evt.offsetY;var se=evt.srcElement,doc=(se&&se.ownerDocument)||document;var docBody=((dojo.isIE<6)||(doc.compatMode=="BackCompat"))?doc.body:doc.documentElement;var offset=dojo._getIeDocumentElementOffset();evt.pageX=evt.clientX+dojo._fixIeBiDiScrollLeft(docBody.scrollLeft||0)-offset.x;evt.pageY=evt.clientY+(docBody.scrollTop||0)-offset.y;if(evt.type=="mouseover"){evt.relatedTarget=evt.fromElement}if(evt.type=="mouseout"){evt.relatedTarget=evt.toElement}evt.stopPropagation=del._stopPropagation;evt.preventDefault=del._preventDefault;return del._fixKeys(evt)},_fixKeys:function(evt){switch(evt.type){case"keypress":var c=("charCode" in evt?evt.charCode:evt.keyCode);if(c==10){c=0;evt.keyCode=13}else{if(c==13||c==27){c=0}else{if(c==3){c=99}}}evt.charCode=c;del._setKeyChar(evt);break}return evt},_stealthKeyDown:function(evt){var kp=evt.currentTarget.onkeypress;if(!kp||!kp[listenersName]){return}var k=evt.keyCode;var unprintable=k!=13&&k!=32&&k!=27&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222);if(unprintable||evt.ctrlKey){var c=unprintable?0:k;if(evt.ctrlKey){if(k==3||k==13){return}else{if(c>95&&c<106){c-=48}else{if((!evt.shiftKey)&&(c>=65&&c<=90)){c+=32}else{c=del._punctMap[c]||c}}}}var faux=del._synthesizeEvent(evt,{type:"keypress",faux:true,charCode:c});kp.call(evt.currentTarget,faux);evt.cancelBubble=faux.cancelBubble;evt.returnValue=faux.returnValue;_trySetKeyCode(evt,faux.keyCode)}},_stopPropagation:function(){this.cancelBubble=true},_preventDefault:function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey){_trySetKeyCode(this,0)}this.returnValue=false}});dojo.stopEvent=function(evt){evt=evt||window.event;del._stopPropagation.call(evt);del._preventDefault.call(evt)}}del._synthesizeEvent=function(evt,props){var faux=dojo.mixin({},evt,props);del._setKeyChar(faux);faux.preventDefault=function(){evt.preventDefault()};faux.stopPropagation=function(){evt.stopPropagation()};return faux};if(dojo.isOpera){dojo.mixin(del,{_fixEvent:function(evt,sender){switch(evt.type){case"keypress":var c=evt.which;if(c==3){c=99}c=c<41&&!evt.shiftKey?0:c;if(evt.ctrlKey&&!evt.shiftKey&&c>=65&&c<=90){c+=32}return del._synthesizeEvent(evt,{charCode:c})}return evt}})}if(dojo.isWebKit){del._add=del.add;del._remove=del.remove;dojo.mixin(del,{add:function(node,event,fp){if(!node){return}var handle=del._add(node,event,fp);if(del._normalizeEventName(event)=="keypress"){handle._stealthKeyDownHandle=del._add(node,"keydown",function(evt){var k=evt.keyCode;var unprintable=k!=13&&k!=32&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222);if(unprintable||evt.ctrlKey){var c=unprintable?0:k;if(evt.ctrlKey){if(k==3||k==13){return}else{if(c>95&&c<106){c-=48}else{if(!evt.shiftKey&&c>=65&&c<=90){c+=32}else{c=del._punctMap[c]||c}}}}var faux=del._synthesizeEvent(evt,{type:"keypress",faux:true,charCode:c});fp.call(evt.currentTarget,faux)}})}return handle},remove:function(node,event,handle){if(node){if(handle._stealthKeyDownHandle){del._remove(node,"keydown",handle._stealthKeyDownHandle)}del._remove(node,event,handle)}},_fixEvent:function(evt,sender){switch(evt.type){case"keypress":if(evt.faux){return evt}var c=evt.charCode;c=c>=32?c:0;return del._synthesizeEvent(evt,{charCode:c,faux:true})}return evt}})}})();if(dojo.isIE){dojo._ieDispatcher=function(args,sender){var ap=Array.prototype,h=dojo._ie_listener.handlers,c=args.callee,ls=c[dojo._ieListenersName],t=h[c.target];var r=t&&t.apply(sender,args);var lls=[].concat(ls);for(var i in lls){var f=h[lls[i]];if(!(i in ap)&&f){f.apply(sender,args)}}return r};dojo._getIeDispatcher=function(){return new Function(dojo._scopeName+"._ieDispatcher(arguments, this)")};dojo._event_listener._fixCallback=function(fp){var f=dojo._event_listener._fixEvent;return function(e){return fp.call(this,f(e,this))}}}}if(!dojo._hasResource["dojo._base.html"]){dojo._hasResource["dojo._base.html"]=true;dojo.provide("dojo._base.html");try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}if(dojo.isIE||dojo.isOpera){dojo.byId=function(id,doc){if(typeof id!="string"){return id}var _d=doc||dojo.doc,te=_d.getElementById(id);if(te&&(te.attributes.id.value==id||te.id==id)){return te}else{var eles=_d.all[id];if(!eles||eles.nodeName){eles=[eles]}var i=0;while((te=eles[i++])){if((te.attributes&&te.attributes.id&&te.attributes.id.value==id)||te.id==id){return te}}}}}else{dojo.byId=function(id,doc){return(typeof id=="string")?(doc||dojo.doc).getElementById(id):id}}(function(){var d=dojo;var byId=d.byId;var _destroyContainer=null,_destroyDoc;d.addOnWindowUnload(function(){_destroyContainer=null});dojo._destroyElement=dojo.destroy=function(node){node=byId(node);try{var doc=node.ownerDocument;if(!_destroyContainer||_destroyDoc!=doc){_destroyContainer=doc.createElement("div");_destroyDoc=doc}_destroyContainer.appendChild(node.parentNode?node.parentNode.removeChild(node):node);_destroyContainer.innerHTML=""}catch(e){}};dojo.isDescendant=function(node,ancestor){try{node=byId(node);ancestor=byId(ancestor);while(node){if(node==ancestor){return true}node=node.parentNode}}catch(e){}return false};dojo.setSelectable=function(node,selectable){node=byId(node);if(d.isMozilla){node.style.MozUserSelect=selectable?"":"none"}else{if(d.isKhtml||d.isWebKit){node.style.KhtmlUserSelect=selectable?"auto":"none"}else{if(d.isIE){var v=(node.unselectable=selectable?"":"on");d.query("*",node).forEach("item.unselectable = '"+v+"'")}}}};var _insertBefore=function(node,ref){var parent=ref.parentNode;if(parent){parent.insertBefore(node,ref)}};var _insertAfter=function(node,ref){var parent=ref.parentNode;if(parent){if(parent.lastChild==ref){parent.appendChild(node)}else{parent.insertBefore(node,ref.nextSibling)}}};dojo.place=function(node,refNode,position){refNode=byId(refNode);if(typeof node=="string"){node=node.charAt(0)=="<"?d._toDom(node,refNode.ownerDocument):byId(node)}if(typeof position=="number"){var cn=refNode.childNodes;if(!cn.length||cn.length<=position){refNode.appendChild(node)}else{_insertBefore(node,cn[position<0?0:position])}}else{switch(position){case"before":_insertBefore(node,refNode);break;case"after":_insertAfter(node,refNode);break;case"replace":refNode.parentNode.replaceChild(node,refNode);break;case"only":d.empty(refNode);refNode.appendChild(node);break;case"first":if(refNode.firstChild){_insertBefore(node,refNode.firstChild);break}default:refNode.appendChild(node)}}return node};dojo.boxModel="content-box";if(d.isIE){d.boxModel=document.compatMode=="BackCompat"?"border-box":"content-box"}var gcs;if(d.isWebKit){gcs=function(node){var s;if(node.nodeType==1){var dv=node.ownerDocument.defaultView;s=dv.getComputedStyle(node,null);if(!s&&node.style){node.style.display="";s=dv.getComputedStyle(node,null)}}return s||{}}}else{if(d.isIE){gcs=function(node){return node.nodeType==1?node.currentStyle:{}}}else{gcs=function(node){return node.nodeType==1?node.ownerDocument.defaultView.getComputedStyle(node,null):{}}}}dojo.getComputedStyle=gcs;if(!d.isIE){d._toPixelValue=function(element,value){return parseFloat(value)||0}}else{d._toPixelValue=function(element,avalue){if(!avalue){return 0}if(avalue=="medium"){return 4}if(avalue.slice&&avalue.slice(-2)=="px"){return parseFloat(avalue)}with(element){var sLeft=style.left;var rsLeft=runtimeStyle.left;runtimeStyle.left=currentStyle.left;try{style.left=avalue;avalue=style.pixelLeft}catch(e){avalue=0}style.left=sLeft;runtimeStyle.left=rsLeft}return avalue}}var px=d._toPixelValue;var astr="DXImageTransform.Microsoft.Alpha";var af=function(n,f){try{return n.filters.item(astr)}catch(e){return f?{}:null}};dojo._getOpacity=d.isIE?function(node){try{return af(node).Opacity/100}catch(e){return 1}}:function(node){return gcs(node).opacity};dojo._setOpacity=d.isIE?function(node,opacity){var ov=opacity*100,opaque=opacity==1;node.style.zoom=opaque?"":1;if(!af(node)){if(opaque){return opacity}node.style.filter+=" progid:"+astr+"(Opacity="+ov+")"}else{af(node,1).Opacity=ov}af(node,1).Enabled=!opaque;if(node.nodeName.toLowerCase()=="tr"){d.query("> td",node).forEach(function(i){d._setOpacity(i,opacity)})}return opacity}:function(node,opacity){return node.style.opacity=opacity};var _pixelNamesCache={left:true,top:true};var _pixelRegExp=/margin|padding|width|height|max|min|offset/;var _toStyleValue=function(node,type,value){type=type.toLowerCase();if(d.isIE){if(value=="auto"){if(type=="height"){return node.offsetHeight}if(type=="width"){return node.offsetWidth}}if(type=="fontweight"){switch(value){case 700:return"bold";case 400:default:return"normal"}}}if(!(type in _pixelNamesCache)){_pixelNamesCache[type]=_pixelRegExp.test(type)}return _pixelNamesCache[type]?px(node,value):value};var _floatStyle=d.isIE?"styleFloat":"cssFloat",_floatAliases={cssFloat:_floatStyle,styleFloat:_floatStyle,"float":_floatStyle};dojo.style=function(node,style,value){var n=byId(node),args=arguments.length,op=(style=="opacity");style=_floatAliases[style]||style;if(args==3){return op?d._setOpacity(n,value):n.style[style]=value}if(args==2&&op){return d._getOpacity(n)}var s=gcs(n);if(args==2&&typeof style!="string"){for(var x in style){d.style(node,x,style[x])}return s}return(args==1)?s:_toStyleValue(n,style,s[style]||n.style[style])};dojo._getPadExtents=function(n,computedStyle){var s=computedStyle||gcs(n),l=px(n,s.paddingLeft),t=px(n,s.paddingTop);return{l:l,t:t,w:l+px(n,s.paddingRight),h:t+px(n,s.paddingBottom)}};dojo._getBorderExtents=function(n,computedStyle){var ne="none",s=computedStyle||gcs(n),bl=(s.borderLeftStyle!=ne?px(n,s.borderLeftWidth):0),bt=(s.borderTopStyle!=ne?px(n,s.borderTopWidth):0);return{l:bl,t:bt,w:bl+(s.borderRightStyle!=ne?px(n,s.borderRightWidth):0),h:bt+(s.borderBottomStyle!=ne?px(n,s.borderBottomWidth):0)}};dojo._getPadBorderExtents=function(n,computedStyle){var s=computedStyle||gcs(n),p=d._getPadExtents(n,s),b=d._getBorderExtents(n,s);return{l:p.l+b.l,t:p.t+b.t,w:p.w+b.w,h:p.h+b.h}};dojo._getMarginExtents=function(n,computedStyle){var s=computedStyle||gcs(n),l=px(n,s.marginLeft),t=px(n,s.marginTop),r=px(n,s.marginRight),b=px(n,s.marginBottom);if(d.isWebKit&&(s.position!="absolute")){r=l}return{l:l,t:t,w:l+r,h:t+b}};dojo._getMarginBox=function(node,computedStyle){var s=computedStyle||gcs(node),me=d._getMarginExtents(node,s);var l=node.offsetLeft-me.l,t=node.offsetTop-me.t,p=node.parentNode;if(d.isMoz){var sl=parseFloat(s.left),st=parseFloat(s.top);if(!isNaN(sl)&&!isNaN(st)){l=sl,t=st}else{if(p&&p.style){var pcs=gcs(p);if(pcs.overflow!="visible"){var be=d._getBorderExtents(p,pcs);l+=be.l,t+=be.t}}}}else{if(d.isOpera||(d.isIE>7&&!d.isQuirks)){if(p){be=d._getBorderExtents(p);l-=be.l;t-=be.t}}}return{l:l,t:t,w:node.offsetWidth+me.w,h:node.offsetHeight+me.h}};dojo._getContentBox=function(node,computedStyle){var s=computedStyle||gcs(node),pe=d._getPadExtents(node,s),be=d._getBorderExtents(node,s),w=node.clientWidth,h;if(!w){w=node.offsetWidth,h=node.offsetHeight}else{h=node.clientHeight,be.w=be.h=0}if(d.isOpera){pe.l+=be.l;pe.t+=be.t}return{l:pe.l,t:pe.t,w:w-pe.w-be.w,h:h-pe.h-be.h}};dojo._getBorderBox=function(node,computedStyle){var s=computedStyle||gcs(node),pe=d._getPadExtents(node,s),cb=d._getContentBox(node,s);return{l:cb.l-pe.l,t:cb.t-pe.t,w:cb.w+pe.w,h:cb.h+pe.h}};dojo._setBox=function(node,l,t,w,h,u){u=u||"px";var s=node.style;if(!isNaN(l)){s.left=l+u}if(!isNaN(t)){s.top=t+u}if(w>=0){s.width=w+u}if(h>=0){s.height=h+u}};dojo._isButtonTag=function(node){return node.tagName=="BUTTON"||node.tagName=="INPUT"&&(node.getAttribute("type")||"").toUpperCase()=="BUTTON"};dojo._usesBorderBox=function(node){var n=node.tagName;return d.boxModel=="border-box"||n=="TABLE"||d._isButtonTag(node)};dojo._setContentSize=function(node,widthPx,heightPx,computedStyle){if(d._usesBorderBox(node)){var pb=d._getPadBorderExtents(node,computedStyle);if(widthPx>=0){widthPx+=pb.w}if(heightPx>=0){heightPx+=pb.h}}d._setBox(node,NaN,NaN,widthPx,heightPx)};dojo._setMarginBox=function(node,leftPx,topPx,widthPx,heightPx,computedStyle){var s=computedStyle||gcs(node),bb=d._usesBorderBox(node),pb=bb?_nilExtents:d._getPadBorderExtents(node,s);if(d.isWebKit){if(d._isButtonTag(node)){var ns=node.style;if(widthPx>=0&&!ns.width){ns.width="4px"}if(heightPx>=0&&!ns.height){ns.height="4px"}}}var mb=d._getMarginExtents(node,s);if(widthPx>=0){widthPx=Math.max(widthPx-pb.w-mb.w,0)}if(heightPx>=0){heightPx=Math.max(heightPx-pb.h-mb.h,0)}d._setBox(node,leftPx,topPx,widthPx,heightPx)};var _nilExtents={l:0,t:0,w:0,h:0};dojo.marginBox=function(node,box){var n=byId(node),s=gcs(n),b=box;return !b?d._getMarginBox(n,s):d._setMarginBox(n,b.l,b.t,b.w,b.h,s)};dojo.contentBox=function(node,box){var n=byId(node),s=gcs(n),b=box;return !b?d._getContentBox(n,s):d._setContentSize(n,b.w,b.h,s)};var _sumAncestorProperties=function(node,prop){if(!(node=(node||0).parentNode)){return 0}var val,retVal=0,_b=d.body();while(node&&node.style){if(gcs(node).position=="fixed"){return 0}val=node[prop];if(val){retVal+=val-0;if(node==_b){break}}node=node.parentNode}return retVal};dojo._docScroll=function(){var n=d.global;return"pageXOffset" in n?{x:n.pageXOffset,y:n.pageYOffset}:(n=d.doc.documentElement,n.clientHeight?{x:d._fixIeBiDiScrollLeft(n.scrollLeft),y:n.scrollTop}:(n=d.body(),{x:n.scrollLeft||0,y:n.scrollTop||0}))};dojo._isBodyLtr=function(){return"_bodyLtr" in d?d._bodyLtr:d._bodyLtr=(d.body().dir||d.doc.documentElement.dir||"ltr").toLowerCase()=="ltr"};dojo._getIeDocumentElementOffset=function(){var de=d.doc.documentElement;if(d.isIE<8){var r=de.getBoundingClientRect();var l=r.left,t=r.top;if(d.isIE<7){l+=de.clientLeft;t+=de.clientTop}return{x:l<0?0:l,y:t<0?0:t}}else{return{x:0,y:0}}};dojo._fixIeBiDiScrollLeft=function(scrollLeft){var dd=d.doc;if(d.isIE<8&&!d._isBodyLtr()){var de=d.isQuirks?dd.body:dd.documentElement;return scrollLeft+de.clientWidth-de.scrollWidth}return scrollLeft};dojo._abs=dojo.position=function(node,includeScroll){var db=d.body(),dh=db.parentNode,ret;node=byId(node);if(node.getBoundingClientRect){ret=node.getBoundingClientRect();ret={x:ret.left,y:ret.top,w:ret.right-ret.left,h:ret.bottom-ret.top};if(d.isIE){var offset=d._getIeDocumentElementOffset();ret.x-=offset.x+(d.isQuirks?db.clientLeft+db.offsetLeft:0);ret.y-=offset.y+(d.isQuirks?db.clientTop+db.offsetTop:0)}else{if(d.isFF==3){var cs=gcs(dh);ret.x-=px(dh,cs.marginLeft)+px(dh,cs.borderLeftWidth);ret.y-=px(dh,cs.marginTop)+px(dh,cs.borderTopWidth)}}}else{ret={x:0,y:0,w:node.offsetWidth,h:node.offsetHeight};if(node.offsetParent){ret.x-=_sumAncestorProperties(node,"scrollLeft");ret.y-=_sumAncestorProperties(node,"scrollTop");var curnode=node;do{var n=curnode.offsetLeft,t=curnode.offsetTop;ret.x+=isNaN(n)?0:n;ret.y+=isNaN(t)?0:t;cs=gcs(curnode);if(curnode!=node){if(d.isMoz){ret.x+=2*px(curnode,cs.borderLeftWidth);ret.y+=2*px(curnode,cs.borderTopWidth)}else{ret.x+=px(curnode,cs.borderLeftWidth);ret.y+=px(curnode,cs.borderTopWidth)}}if(d.isMoz&&cs.position=="static"){var parent=curnode.parentNode;while(parent!=curnode.offsetParent){var pcs=gcs(parent);if(pcs.position=="static"){ret.x+=px(curnode,pcs.borderLeftWidth);ret.y+=px(curnode,pcs.borderTopWidth)}parent=parent.parentNode}}curnode=curnode.offsetParent}while((curnode!=dh)&&curnode)}else{if(node.x&&node.y){ret.x+=isNaN(node.x)?0:node.x;ret.y+=isNaN(node.y)?0:node.y}}}if(includeScroll){var scroll=d._docScroll();ret.x+=scroll.x;ret.y+=scroll.y}return ret};dojo.coords=function(node,includeScroll){var n=byId(node),s=gcs(n),mb=d._getMarginBox(n,s);var abs=d.position(n,includeScroll);mb.x=abs.x;mb.y=abs.y;return mb};var _propNames={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},_attrNames={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"},_forcePropNames={innerHTML:1,className:1,htmlFor:d.isIE,value:1};var _fixAttrName=function(name){return _attrNames[name.toLowerCase()]||name};var _hasAttr=function(node,name){var attr=node.getAttributeNode&&node.getAttributeNode(name);return attr&&attr.specified};dojo.hasAttr=function(node,name){var lc=name.toLowerCase();return _forcePropNames[_propNames[lc]||name]||_hasAttr(byId(node),_attrNames[lc]||name)};var _evtHdlrMap={},_ctr=0,_attrId=dojo._scopeName+"attrid",_roInnerHtml={col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1};dojo.attr=function(node,name,value){node=byId(node);var args=arguments.length,prop;if(args==2&&typeof name!="string"){for(var x in name){d.attr(node,x,name[x])}return node}var lc=name.toLowerCase(),propName=_propNames[lc]||name,forceProp=_forcePropNames[propName],attrName=_attrNames[lc]||name;if(args==3){do{if(propName=="style"&&typeof value!="string"){d.style(node,value);break}if(propName=="innerHTML"){if(d.isIE&&node.tagName.toLowerCase() in _roInnerHtml){d.empty(node);node.appendChild(d._toDom(value,node.ownerDocument))}else{node[propName]=value}break}if(d.isFunction(value)){var attrId=d.attr(node,_attrId);if(!attrId){attrId=_ctr++;d.attr(node,_attrId,attrId)}if(!_evtHdlrMap[attrId]){_evtHdlrMap[attrId]={}}var h=_evtHdlrMap[attrId][propName];if(h){d.disconnect(h)}else{try{delete node[propName]}catch(e){}}_evtHdlrMap[attrId][propName]=d.connect(node,propName,value);break}if(forceProp||typeof value=="boolean"){node[propName]=value;break}node.setAttribute(attrName,value)}while(false);return node}value=node[propName];if(forceProp&&typeof value!="undefined"){return value}if(propName!="href"&&(typeof value=="boolean"||d.isFunction(value))){return value}return _hasAttr(node,attrName)?node.getAttribute(attrName):null};dojo.removeAttr=function(node,name){byId(node).removeAttribute(_fixAttrName(name))};dojo.getNodeProp=function(node,name){node=byId(node);var lc=name.toLowerCase(),propName=_propNames[lc]||name;if((propName in node)&&propName!="href"){return node[propName]}var attrName=_attrNames[lc]||name;return _hasAttr(node,attrName)?node.getAttribute(attrName):null};dojo.create=function(tag,attrs,refNode,pos){var doc=d.doc;if(refNode){refNode=byId(refNode);doc=refNode.ownerDocument}if(typeof tag=="string"){tag=doc.createElement(tag)}if(attrs){d.attr(tag,attrs)}if(refNode){d.place(tag,refNode,pos)}return tag};d.empty=d.isIE?function(node){node=byId(node);for(var c;c=node.lastChild;){d.destroy(c)}}:function(node){byId(node).innerHTML=""};var tagWrap={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},reTag=/<\s*([\w\:]+)/,masterNode={},masterNum=0,masterName="__"+d._scopeName+"ToDomId";for(var param in tagWrap){var tw=tagWrap[param];tw.pre=param=="option"?'<select multiple="multiple">':"<"+tw.join("><")+">";tw.post="</"+tw.reverse().join("></")+">"}d._toDom=function(frag,doc){doc=doc||d.doc;var masterId=doc[masterName];if(!masterId){doc[masterName]=masterId=++masterNum+"";masterNode[masterId]=doc.createElement("div")}frag+="";var match=frag.match(reTag),tag=match?match[1].toLowerCase():"",master=masterNode[masterId],wrap,i,fc,df;if(match&&tagWrap[tag]){wrap=tagWrap[tag];master.innerHTML=wrap.pre+frag+wrap.post;for(i=wrap.length;i;--i){master=master.firstChild}}else{master.innerHTML=frag}if(master.childNodes.length==1){return master.removeChild(master.firstChild)}df=doc.createDocumentFragment();while(fc=master.firstChild){df.appendChild(fc)}return df};var _className="className";dojo.hasClass=function(node,classStr){return((" "+byId(node)[_className]+" ").indexOf(" "+classStr+" ")>=0)};var spaces=/\s+/,a1=[""],str2array=function(s){if(typeof s=="string"||s instanceof String){if(s.indexOf(" ")<0){a1[0]=s;return a1}else{return s.split(spaces)}}return s||""};dojo.addClass=function(node,classStr){node=byId(node);classStr=str2array(classStr);var cls=node[_className],oldLen;cls=cls?" "+cls+" ":" ";oldLen=cls.length;for(var i=0,len=classStr.length,c;i<len;++i){c=classStr[i];if(c&&cls.indexOf(" "+c+" ")<0){cls+=c+" "}}if(oldLen<cls.length){node[_className]=cls.substr(1,cls.length-2)}};dojo.removeClass=function(node,classStr){node=byId(node);var cls;if(classStr!==undefined){classStr=str2array(classStr);cls=" "+node[_className]+" ";for(var i=0,len=classStr.length;i<len;++i){cls=cls.replace(" "+classStr[i]+" "," ")}cls=d.trim(cls)}else{cls=""}if(node[_className]!=cls){node[_className]=cls}};dojo.toggleClass=function(node,classStr,condition){if(condition===undefined){condition=!d.hasClass(node,classStr)}d[condition?"addClass":"removeClass"](node,classStr)}})()}if(!dojo._hasResource["dojo._base.NodeList"]){dojo._hasResource["dojo._base.NodeList"]=true;dojo.provide("dojo._base.NodeList");(function(){var d=dojo;var ap=Array.prototype,aps=ap.slice,apc=ap.concat;var tnl=function(a,parent,NodeListCtor){if(!a.sort){a=aps.call(a,0)}var ctor=NodeListCtor||this._NodeListCtor||d._NodeListCtor;a.constructor=ctor;dojo._mixin(a,ctor.prototype);a._NodeListCtor=ctor;return parent?a._stash(parent):a};var loopBody=function(f,a,o){a=[0].concat(aps.call(a,0));o=o||d.global;return function(node){a[0]=node;return f.apply(o,a)}};var adaptAsForEach=function(f,o){return function(){this.forEach(loopBody(f,arguments,o));return this}};var adaptAsMap=function(f,o){return function(){return this.map(loopBody(f,arguments,o))}};var adaptAsFilter=function(f,o){return function(){return this.filter(loopBody(f,arguments,o))}};var adaptWithCondition=function(f,g,o){return function(){var a=arguments,body=loopBody(f,a,o);if(g.call(o||d.global,a)){return this.map(body)}this.forEach(body);return this}};var magicGuard=function(a){return a.length==1&&(typeof a[0]=="string")};var orphan=function(node){var p=node.parentNode;if(p){p.removeChild(node)}};dojo.NodeList=function(){return tnl(Array.apply(null,arguments))};d._NodeListCtor=d.NodeList;var nl=d.NodeList,nlp=nl.prototype;nl._wrap=nlp._wrap=tnl;nl._adaptAsMap=adaptAsMap;nl._adaptAsForEach=adaptAsForEach;nl._adaptAsFilter=adaptAsFilter;nl._adaptWithCondition=adaptWithCondition;d.forEach(["slice","splice"],function(name){var f=ap[name];nlp[name]=function(){return this._wrap(f.apply(this,arguments),name=="slice"?this:null)}});d.forEach(["indexOf","lastIndexOf","every","some"],function(name){var f=d[name];nlp[name]=function(){return f.apply(d,[this].concat(aps.call(arguments,0)))}});d.forEach(["attr","style"],function(name){nlp[name]=adaptWithCondition(d[name],magicGuard)});d.forEach(["connect","addClass","removeClass","toggleClass","empty","removeAttr"],function(name){nlp[name]=adaptAsForEach(d[name])});dojo.extend(dojo.NodeList,{_normalize:function(content,refNode){var parse=content.parse===true?true:false;if(typeof content.template=="string"){var templateFunc=content.templateFunc||(dojo.string&&dojo.string.substitute);content=templateFunc?templateFunc(content.template,content):content}var type=(typeof content);if(type=="string"||type=="number"){content=dojo._toDom(content,(refNode&&refNode.ownerDocument));if(content.nodeType==11){content=dojo._toArray(content.childNodes)}else{content=[content]}}else{if(!dojo.isArrayLike(content)){content=[content]}else{if(!dojo.isArray(content)){content=dojo._toArray(content)}}}if(parse){content._runParse=true}return content},_cloneNode:function(node){return node.cloneNode(true)},_place:function(ary,refNode,position,useClone){if(refNode.nodeType!=1&&position=="only"){return}var rNode=refNode,tempNode;var length=ary.length;for(var i=length-1;i>=0;i--){var node=(useClone?this._cloneNode(ary[i]):ary[i]);if(ary._runParse&&dojo.parser&&dojo.parser.parse){if(!tempNode){tempNode=rNode.ownerDocument.createElement("div")}tempNode.appendChild(node);dojo.parser.parse(tempNode);node=tempNode.firstChild;while(tempNode.firstChild){tempNode.removeChild(tempNode.firstChild)}}if(i==length-1){dojo.place(node,rNode,position)}else{rNode.parentNode.insertBefore(node,rNode)}rNode=node}},_stash:function(parent){this._parent=parent;return this},end:function(){if(this._parent){return this._parent}else{return new this._NodeListCtor()}},concat:function(item){var t=d.isArray(this)?this:aps.call(this,0),m=d.map(arguments,function(a){return a&&!d.isArray(a)&&(typeof NodeList!="undefined"&&a.constructor===NodeList||a.constructor===this._NodeListCtor)?aps.call(a,0):a});return this._wrap(apc.apply(t,m),this)},map:function(func,obj){return this._wrap(d.map(this,func,obj),this)},forEach:function(callback,thisObj){d.forEach(this,callback,thisObj);return this},coords:adaptAsMap(d.coords),position:adaptAsMap(d.position),place:function(queryOrNode,position){var item=d.query(queryOrNode)[0];return this.forEach(function(node){d.place(node,item,position)})},orphan:function(simpleFilter){return(simpleFilter?d._filterQueryResult(this,simpleFilter):this).forEach(orphan)},adopt:function(queryOrListOrNode,position){return d.query(queryOrListOrNode).place(this[0],position)._stash(this)},query:function(queryStr){if(!queryStr){return this}var ret=this.map(function(node){return d.query(queryStr,node).filter(function(subNode){return subNode!==undefined})});return this._wrap(apc.apply([],ret),this)},filter:function(simpleFilter){var a=arguments,items=this,start=0;if(typeof simpleFilter=="string"){items=d._filterQueryResult(this,a[0]);if(a.length==1){return items._stash(this)}start=1}return this._wrap(d.filter(items,a[start],a[start+1]),this)},addContent:function(content,position){content=this._normalize(content,this[0]);for(var i=0,node;node=this[i];i++){this._place(content,node,position,i>0)}return this},instantiate:function(declaredClass,properties){var c=d.isFunction(declaredClass)?declaredClass:d.getObject(declaredClass);properties=properties||{};return this.forEach(function(node){new c(properties,node)})},at:function(){var t=new this._NodeListCtor();d.forEach(arguments,function(i){if(i<0){i=this.length+i}if(this[i]){t.push(this[i])}},this);return t._stash(this)}});nl.events=["blur","focus","change","click","error","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","submit"];d.forEach(nl.events,function(evt){var _oe="on"+evt;nlp[_oe]=function(a,b){return this.connect(_oe,a,b)}})})()}if(!dojo._hasResource["dojo._base.query"]){dojo._hasResource["dojo._base.query"]=true;if(typeof dojo!="undefined"){dojo.provide("dojo._base.query")}(function(d){var trim=d.trim;var each=d.forEach;var qlc=d._NodeListCtor=d.NodeList;var getDoc=function(){return d.doc};var cssCaseBug=((d.isWebKit||d.isMozilla)&&((getDoc().compatMode)=="BackCompat"));var childNodesName=!!getDoc().firstChild.children?"children":"childNodes";var specials=">~+";var caseSensitive=false;var yesman=function(){return true};var getQueryParts=function(query){if(specials.indexOf(query.slice(-1))>=0){query+=" * "}else{query+=" "}var ts=function(s,e){return trim(query.slice(s,e))};var queryParts=[];var inBrackets=-1,inParens=-1,inMatchFor=-1,inPseudo=-1,inClass=-1,inId=-1,inTag=-1,lc="",cc="",pStart;var x=0,ql=query.length,currentPart=null,_cp=null;var endTag=function(){if(inTag>=0){var tv=(inTag==x)?null:ts(inTag,x);currentPart[(specials.indexOf(tv)<0)?"tag":"oper"]=tv;inTag=-1}};var endId=function(){if(inId>=0){currentPart.id=ts(inId,x).replace(/\\/g,"");inId=-1}};var endClass=function(){if(inClass>=0){currentPart.classes.push(ts(inClass+1,x).replace(/\\/g,""));inClass=-1}};var endAll=function(){endId();endTag();endClass()};var endPart=function(){endAll();if(inPseudo>=0){currentPart.pseudos.push({name:ts(inPseudo+1,x)})}currentPart.loops=(currentPart.pseudos.length||currentPart.attrs.length||currentPart.classes.length);currentPart.oquery=currentPart.query=ts(pStart,x);currentPart.otag=currentPart.tag=(currentPart.oper)?null:(currentPart.tag||"*");if(currentPart.tag){currentPart.tag=currentPart.tag.toUpperCase()}if(queryParts.length&&(queryParts[queryParts.length-1].oper)){currentPart.infixOper=queryParts.pop();currentPart.query=currentPart.infixOper.query+" "+currentPart.query}queryParts.push(currentPart);currentPart=null};for(;lc=cc,cc=query.charAt(x),x<ql;x++){if(lc=="\\"){continue}if(!currentPart){pStart=x;currentPart={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return(caseSensitive)?this.otag:this.tag}};inTag=x}if(inBrackets>=0){if(cc=="]"){if(!_cp.attr){_cp.attr=ts(inBrackets+1,x)}else{_cp.matchFor=ts((inMatchFor||inBrackets+1),x)}var cmf=_cp.matchFor;if(cmf){if((cmf.charAt(0)=='"')||(cmf.charAt(0)=="'")){_cp.matchFor=cmf.slice(1,-1)}}currentPart.attrs.push(_cp);_cp=null;inBrackets=inMatchFor=-1}else{if(cc=="="){var addToCc=("|~^$*".indexOf(lc)>=0)?lc:"";_cp.type=addToCc+cc;_cp.attr=ts(inBrackets+1,x-addToCc.length);inMatchFor=x+1}}}else{if(inParens>=0){if(cc==")"){if(inPseudo>=0){_cp.value=ts(inParens+1,x)}inPseudo=inParens=-1}}else{if(cc=="#"){endAll();inId=x+1}else{if(cc=="."){endAll();inClass=x}else{if(cc==":"){endAll();inPseudo=x}else{if(cc=="["){endAll();inBrackets=x;_cp={}}else{if(cc=="("){if(inPseudo>=0){_cp={name:ts(inPseudo+1,x),value:null};currentPart.pseudos.push(_cp)}inParens=x}else{if((cc==" ")&&(lc!=cc)){endPart()}}}}}}}}}return queryParts};var agree=function(first,second){if(!first){return second}if(!second){return first}return function(){return first.apply(window,arguments)&&second.apply(window,arguments)}};var getArr=function(i,arr){var r=arr||[];if(i){r.push(i)}return r};var _isElement=function(n){return(1==n.nodeType)};var blank="";var _getAttr=function(elem,attr){if(!elem){return blank}if(attr=="class"){return elem.className||blank}if(attr=="for"){return elem.htmlFor||blank}if(attr=="style"){return elem.style.cssText||blank}return(caseSensitive?elem.getAttribute(attr):elem.getAttribute(attr,2))||blank};var attrs={"*=":function(attr,value){return function(elem){return(_getAttr(elem,attr).indexOf(value)>=0)}},"^=":function(attr,value){return function(elem){return(_getAttr(elem,attr).indexOf(value)==0)}},"$=":function(attr,value){var tval=" "+value;return function(elem){var ea=" "+_getAttr(elem,attr);return(ea.lastIndexOf(value)==(ea.length-value.length))}},"~=":function(attr,value){var tval=" "+value+" ";return function(elem){var ea=" "+_getAttr(elem,attr)+" ";return(ea.indexOf(tval)>=0)}},"|=":function(attr,value){var valueDash=" "+value+"-";return function(elem){var ea=" "+_getAttr(elem,attr);return((ea==value)||(ea.indexOf(valueDash)==0))}},"=":function(attr,value){return function(elem){return(_getAttr(elem,attr)==value)}}};var _noNES=(typeof getDoc().firstChild.nextElementSibling=="undefined");var _ns=!_noNES?"nextElementSibling":"nextSibling";var _ps=!_noNES?"previousElementSibling":"previousSibling";var _simpleNodeTest=(_noNES?_isElement:yesman);var _lookLeft=function(node){while(node=node[_ps]){if(_simpleNodeTest(node)){return false}}return true};var _lookRight=function(node){while(node=node[_ns]){if(_simpleNodeTest(node)){return false}}return true};var getNodeIndex=function(node){var root=node.parentNode;var i=0,tret=root[childNodesName],ci=(node._i||-1),cl=(root._l||-1);if(!tret){return -1}var l=tret.length;if(cl==l&&ci>=0&&cl>=0){return ci}root._l=l;ci=-1;for(var te=root.firstElementChild||root.firstChild;te;te=te[_ns]){if(_simpleNodeTest(te)){te._i=++i;if(node===te){ci=i}}}return ci};var isEven=function(elem){return !((getNodeIndex(elem))%2)};var isOdd=function(elem){return((getNodeIndex(elem))%2)};var pseudos={checked:function(name,condition){return function(elem){return !!("checked" in elem?elem.checked:elem.selected)}},"first-child":function(){return _lookLeft},"last-child":function(){return _lookRight},"only-child":function(name,condition){return function(node){if(!_lookLeft(node)){return false}if(!_lookRight(node)){return false}return true}},empty:function(name,condition){return function(elem){var cn=elem.childNodes;var cnl=elem.childNodes.length;for(var x=cnl-1;x>=0;x--){var nt=cn[x].nodeType;if((nt===1)||(nt==3)){return false}}return true}},contains:function(name,condition){var cz=condition.charAt(0);if(cz=='"'||cz=="'"){condition=condition.slice(1,-1)}return function(elem){return(elem.innerHTML.indexOf(condition)>=0)}},not:function(name,condition){var p=getQueryParts(condition)[0];var ignores={el:1};if(p.tag!="*"){ignores.tag=1}if(!p.classes.length){ignores.classes=1}var ntf=getSimpleFilterFunc(p,ignores);return function(elem){return(!ntf(elem))}},"nth-child":function(name,condition){var pi=parseInt;if(condition=="odd"){return isOdd}else{if(condition=="even"){return isEven}}if(condition.indexOf("n")!=-1){var tparts=condition.split("n",2);var pred=tparts[0]?((tparts[0]=="-")?-1:pi(tparts[0])):1;var idx=tparts[1]?pi(tparts[1]):0;var lb=0,ub=-1;if(pred>0){if(idx<0){idx=(idx%pred)&&(pred+(idx%pred))}else{if(idx>0){if(idx>=pred){lb=idx-idx%pred}idx=idx%pred}}}else{if(pred<0){pred*=-1;if(idx>0){ub=idx;idx=idx%pred}}}if(pred>0){return function(elem){var i=getNodeIndex(elem);return(i>=lb)&&(ub<0||i<=ub)&&((i%pred)==idx)}}else{condition=idx}}var ncount=pi(condition);return function(elem){return(getNodeIndex(elem)==ncount)}}};var defaultGetter=(d.isIE)?function(cond){var clc=cond.toLowerCase();if(clc=="class"){cond="className"}return function(elem){return(caseSensitive?elem.getAttribute(cond):elem[cond]||elem[clc])}}:function(cond){return function(elem){return(elem&&elem.getAttribute&&elem.hasAttribute(cond))}};var getSimpleFilterFunc=function(query,ignores){if(!query){return yesman}ignores=ignores||{};var ff=null;if(!("el" in ignores)){ff=agree(ff,_isElement)}if(!("tag" in ignores)){if(query.tag!="*"){ff=agree(ff,function(elem){return(elem&&(elem.tagName==query.getTag()))})}}if(!("classes" in ignores)){each(query.classes,function(cname,idx,arr){var re=new RegExp("(?:^|\\s)"+cname+"(?:\\s|$)");ff=agree(ff,function(elem){return re.test(elem.className)});ff.count=idx})}if(!("pseudos" in ignores)){each(query.pseudos,function(pseudo){var pn=pseudo.name;if(pseudos[pn]){ff=agree(ff,pseudos[pn](pn,pseudo.value))}})}if(!("attrs" in ignores)){each(query.attrs,function(attr){var matcher;var a=attr.attr;if(attr.type&&attrs[attr.type]){matcher=attrs[attr.type](a,attr.matchFor)}else{if(a.length){matcher=defaultGetter(a)}}if(matcher){ff=agree(ff,matcher)}})}if(!("id" in ignores)){if(query.id){ff=agree(ff,function(elem){return(!!elem&&(elem.id==query.id))})}}if(!ff){if(!("default" in ignores)){ff=yesman}}return ff};var _nextSibling=function(filterFunc){return function(node,ret,bag){while(node=node[_ns]){if(_noNES&&(!_isElement(node))){continue}if((!bag||_isUnique(node,bag))&&filterFunc(node)){ret.push(node)}break}return ret}};var _nextSiblings=function(filterFunc){return function(root,ret,bag){var te=root[_ns];while(te){if(_simpleNodeTest(te)){if(bag&&!_isUnique(te,bag)){break}if(filterFunc(te)){ret.push(te)}}te=te[_ns]}return ret}};var _childElements=function(filterFunc){filterFunc=filterFunc||yesman;return function(root,ret,bag){var te,x=0,tret=root[childNodesName];while(te=tret[x++]){if(_simpleNodeTest(te)&&(!bag||_isUnique(te,bag))&&(filterFunc(te,x))){ret.push(te)}}return ret}};var _isDescendant=function(node,root){var pn=node.parentNode;while(pn){if(pn==root){break}pn=pn.parentNode}return !!pn};var _getElementsFuncCache={};var getElementsFunc=function(query){var retFunc=_getElementsFuncCache[query.query];if(retFunc){return retFunc}var io=query.infixOper;var oper=(io?io.oper:"");var filterFunc=getSimpleFilterFunc(query,{el:1});var qt=query.tag;var wildcardTag=("*"==qt);var ecs=getDoc()["getElementsByClassName"];if(!oper){if(query.id){filterFunc=(!query.loops&&wildcardTag)?yesman:getSimpleFilterFunc(query,{el:1,id:1});retFunc=function(root,arr){var te=d.byId(query.id,(root.ownerDocument||root));if(!te||!filterFunc(te)){return}if(9==root.nodeType){return getArr(te,arr)}else{if(_isDescendant(te,root)){return getArr(te,arr)}}}}else{if(ecs&&/\{\s*\[native code\]\s*\}/.test(String(ecs))&&query.classes.length&&!cssCaseBug){filterFunc=getSimpleFilterFunc(query,{el:1,classes:1,id:1});var classesString=query.classes.join(" ");retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0;var tret=root.getElementsByClassName(classesString);while((te=tret[x++])){if(filterFunc(te,root)&&_isUnique(te,bag)){ret.push(te)}}return ret}}else{if(!wildcardTag&&!query.loops){retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0;var tret=root.getElementsByTagName(query.getTag());while((te=tret[x++])){if(_isUnique(te,bag)){ret.push(te)}}return ret}}else{filterFunc=getSimpleFilterFunc(query,{el:1,tag:1,id:1});retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0;var tret=root.getElementsByTagName(query.getTag());while((te=tret[x++])){if(filterFunc(te,root)&&_isUnique(te,bag)){ret.push(te)}}return ret}}}}}else{var skipFilters={el:1};if(wildcardTag){skipFilters.tag=1}filterFunc=getSimpleFilterFunc(query,skipFilters);if("+"==oper){retFunc=_nextSibling(filterFunc)}else{if("~"==oper){retFunc=_nextSiblings(filterFunc)}else{if(">"==oper){retFunc=_childElements(filterFunc)}}}}return _getElementsFuncCache[query.query]=retFunc};var filterDown=function(root,queryParts){var candidates=getArr(root),qp,x,te,qpl=queryParts.length,bag,ret;for(var i=0;i<qpl;i++){ret=[];qp=queryParts[i];x=candidates.length-1;if(x>0){bag={};ret.nozip=true}var gef=getElementsFunc(qp);for(var j=0;(te=candidates[j]);j++){gef(te,ret,bag)}if(!ret.length){break}candidates=ret}return ret};var _queryFuncCacheDOM={},_queryFuncCacheQSA={};var getStepQueryFunc=function(query){var qparts=getQueryParts(trim(query));if(qparts.length==1){var tef=getElementsFunc(qparts[0]);return function(root){var r=tef(root,new qlc());if(r){r.nozip=true}return r}}return function(root){return filterDown(root,qparts)}};var nua=navigator.userAgent;var wk="WebKit/";var is525=(d.isWebKit&&(nua.indexOf(wk)>0)&&(parseFloat(nua.split(wk)[1])>528));var noZip=d.isIE?"commentStrip":"nozip";var qsa="querySelectorAll";var qsaAvail=(!!getDoc()[qsa]&&(!d.isSafari||(d.isSafari>3.1)||is525));var infixSpaceRe=/n\+\d|([^ ])?([>~+])([^ =])?/g;var infixSpaceFunc=function(match,pre,ch,post){return ch?(pre?pre+" ":"")+ch+(post?" "+post:""):match};var getQueryFunc=function(query,forceDOM){query=query.replace(infixSpaceRe,infixSpaceFunc);if(qsaAvail){var qsaCached=_queryFuncCacheQSA[query];if(qsaCached&&!forceDOM){return qsaCached}}var domCached=_queryFuncCacheDOM[query];if(domCached){return domCached}var qcz=query.charAt(0);var nospace=(-1==query.indexOf(" "));if((query.indexOf("#")>=0)&&(nospace)){forceDOM=true}var useQSA=(qsaAvail&&(!forceDOM)&&(specials.indexOf(qcz)==-1)&&(!d.isIE||(query.indexOf(":")==-1))&&(!(cssCaseBug&&(query.indexOf(".")>=0)))&&(query.indexOf(":contains")==-1)&&(query.indexOf(":checked")==-1)&&(query.indexOf("|=")==-1));if(useQSA){var tq=(specials.indexOf(query.charAt(query.length-1))>=0)?(query+" *"):query;return _queryFuncCacheQSA[query]=function(root){try{if(!((9==root.nodeType)||nospace)){throw""}var r=root[qsa](tq);r[noZip]=true;return r}catch(e){return getQueryFunc(query,true)(root)}}}else{var parts=query.split(/\s*,\s*/);return _queryFuncCacheDOM[query]=((parts.length<2)?getStepQueryFunc(query):function(root){var pindex=0,ret=[],tp;while((tp=parts[pindex++])){ret=ret.concat(getStepQueryFunc(tp)(root))}return ret})}};var _zipIdx=0;var _nodeUID=d.isIE?function(node){if(caseSensitive){return(node.getAttribute("_uid")||node.setAttribute("_uid",++_zipIdx)||_zipIdx)}else{return node.uniqueID}}:function(node){return(node._uid||(node._uid=++_zipIdx))};var _isUnique=function(node,bag){if(!bag){return 1}var id=_nodeUID(node);if(!bag[id]){return bag[id]=1}return 0};var _zipIdxName="_zipIdx";var _zip=function(arr){if(arr&&arr.nozip){return(qlc._wrap)?qlc._wrap(arr):arr}var ret=new qlc();if(!arr||!arr.length){return ret}if(arr[0]){ret.push(arr[0])}if(arr.length<2){return ret}_zipIdx++;if(d.isIE&&caseSensitive){var szidx=_zipIdx+"";arr[0].setAttribute(_zipIdxName,szidx);for(var x=1,te;te=arr[x];x++){if(arr[x].getAttribute(_zipIdxName)!=szidx){ret.push(te)}te.setAttribute(_zipIdxName,szidx)}}else{if(d.isIE&&arr.commentStrip){try{for(var x=1,te;te=arr[x];x++){if(_isElement(te)){ret.push(te)}}}catch(e){}}else{if(arr[0]){arr[0][_zipIdxName]=_zipIdx}for(var x=1,te;te=arr[x];x++){if(arr[x][_zipIdxName]!=_zipIdx){ret.push(te)}te[_zipIdxName]=_zipIdx}}}return ret};d.query=function(query,root){qlc=d._NodeListCtor;if(!query){return new qlc()}if(query.constructor==qlc){return query}if(typeof query!="string"){return new qlc(query)}if(typeof root=="string"){root=d.byId(root);if(!root){return new qlc()}}root=root||getDoc();var od=root.ownerDocument||root.documentElement;caseSensitive=(root.contentType&&root.contentType=="application/xml")||(d.isOpera&&(root.doctype||od.toString()=="[object XMLDocument]"))||(!!od)&&(d.isIE?od.xml:(root.xmlVersion||od.xmlVersion));var r=getQueryFunc(query)(root);if(r&&r.nozip&&!qlc._wrap){return r}return _zip(r)};d.query.pseudos=pseudos;d._filterQueryResult=function(nodeList,simpleFilter){var tmpNodeList=new d._NodeListCtor();var filterFunc=getSimpleFilterFunc(getQueryParts(simpleFilter)[0]);for(var x=0,te;te=nodeList[x];x++){if(filterFunc(te)){tmpNodeList.push(te)}}return tmpNodeList}})(this["queryPortability"]||this["acme"]||dojo)}if(!dojo._hasResource["dojo._base.xhr"]){dojo._hasResource["dojo._base.xhr"]=true;dojo.provide("dojo._base.xhr");(function(){var _d=dojo,cfg=_d.config;function setValue(obj,name,value){if(value===null){return}var val=obj[name];if(typeof val=="string"){obj[name]=[val,value]}else{if(_d.isArray(val)){val.push(value)}else{obj[name]=value}}}dojo.fieldToObject=function(inputNode){var ret=null;var item=_d.byId(inputNode);if(item){var _in=item.name;var type=(item.type||"").toLowerCase();if(_in&&type&&!item.disabled){if(type=="radio"||type=="checkbox"){if(item.checked){ret=item.value}}else{if(item.multiple){ret=[];_d.query("option",item).forEach(function(opt){if(opt.selected){ret.push(opt.value)}})}else{ret=item.value}}}}return ret};dojo.formToObject=function(formNode){var ret={};var exclude="file|submit|image|reset|button|";_d.forEach(dojo.byId(formNode).elements,function(item){var _in=item.name;var type=(item.type||"").toLowerCase();if(_in&&type&&exclude.indexOf(type)==-1&&!item.disabled){setValue(ret,_in,_d.fieldToObject(item));if(type=="image"){ret[_in+".x"]=ret[_in+".y"]=ret[_in].x=ret[_in].y=0}}});return ret};dojo.objectToQuery=function(map){var enc=encodeURIComponent;var pairs=[];var backstop={};for(var name in map){var value=map[name];if(value!=backstop[name]){var assign=enc(name)+"=";if(_d.isArray(value)){for(var i=0;i<value.length;i++){pairs.push(assign+enc(value[i]))}}else{pairs.push(assign+enc(value))}}}return pairs.join("&")};dojo.formToQuery=function(formNode){return _d.objectToQuery(_d.formToObject(formNode))};dojo.formToJson=function(formNode,prettyPrint){return _d.toJson(_d.formToObject(formNode),prettyPrint)};dojo.queryToObject=function(str){var ret={};var qp=str.split("&");var dec=decodeURIComponent;_d.forEach(qp,function(item){if(item.length){var parts=item.split("=");var name=dec(parts.shift());var val=dec(parts.join("="));if(typeof ret[name]=="string"){ret[name]=[ret[name]]}if(_d.isArray(ret[name])){ret[name].push(val)}else{ret[name]=val}}});return ret};dojo._blockAsync=false;var handlers=_d._contentHandlers=dojo.contentHandlers={text:function(xhr){return xhr.responseText},json:function(xhr){return _d.fromJson(xhr.responseText||null)},"json-comment-filtered":function(xhr){if(!dojo.config.useCommentedJson){console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.")}var value=xhr.responseText;var cStartIdx=value.indexOf("/*");var cEndIdx=value.lastIndexOf("*/");if(cStartIdx==-1||cEndIdx==-1){throw new Error("JSON was not comment filtered")}return _d.fromJson(value.substring(cStartIdx+2,cEndIdx))},javascript:function(xhr){return _d.eval(xhr.responseText)},xml:function(xhr){var result=xhr.responseXML;if(_d.isIE&&(!result||!result.documentElement)){var ms=function(n){return"MSXML"+n+".DOMDocument"};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];_d.some(dp,function(p){try{var dom=new ActiveXObject(p);dom.async=false;dom.loadXML(xhr.responseText);result=dom}catch(e){return false}return true})}return result},"json-comment-optional":function(xhr){if(xhr.responseText&&/^[^{\[]*\/\*/.test(xhr.responseText)){return handlers["json-comment-filtered"](xhr)}else{return handlers.json(xhr)}}};dojo._ioSetArgs=function(args,canceller,okHandler,errHandler){var ioArgs={args:args,url:args.url};var formObject=null;if(args.form){var form=_d.byId(args.form);var actnNode=form.getAttributeNode("action");ioArgs.url=ioArgs.url||(actnNode?actnNode.value:null);formObject=_d.formToObject(form)}var miArgs=[{}];if(formObject){miArgs.push(formObject)}if(args.content){miArgs.push(args.content)}if(args.preventCache){miArgs.push({"dojo.preventCache":new Date().valueOf()})}ioArgs.query=_d.objectToQuery(_d.mixin.apply(null,miArgs));ioArgs.handleAs=args.handleAs||"text";var d=new _d.Deferred(canceller);d.addCallbacks(okHandler,function(error){return errHandler(error,d)});var ld=args.load;if(ld&&_d.isFunction(ld)){d.addCallback(function(value){return ld.call(args,value,ioArgs)})}var err=args.error;if(err&&_d.isFunction(err)){d.addErrback(function(value){return err.call(args,value,ioArgs)})}var handle=args.handle;if(handle&&_d.isFunction(handle)){d.addBoth(function(value){return handle.call(args,value,ioArgs)})}if(cfg.ioPublish&&_d.publish&&ioArgs.args.ioPublish!==false){d.addCallbacks(function(res){_d.publish("/dojo/io/load",[d,res]);return res},function(res){_d.publish("/dojo/io/error",[d,res]);return res});d.addBoth(function(res){_d.publish("/dojo/io/done",[d,res]);return res})}d.ioArgs=ioArgs;return d};var _deferredCancel=function(dfd){dfd.canceled=true;var xhr=dfd.ioArgs.xhr;var _at=typeof xhr.abort;if(_at=="function"||_at=="object"||_at=="unknown"){xhr.abort()}var err=dfd.ioArgs.error;if(!err){err=new Error("xhr cancelled");err.dojoType="cancel"}return err};var _deferredOk=function(dfd){var ret=handlers[dfd.ioArgs.handleAs](dfd.ioArgs.xhr);return ret===undefined?null:ret};var _deferError=function(error,dfd){if(!dfd.ioArgs.args.failOk){console.error(error)}return error};var _inFlightIntvl=null;var _inFlight=[];var _pubCount=0;var _checkPubCount=function(dfd){if(_pubCount<=0){_pubCount=0;if(cfg.ioPublish&&_d.publish&&(!dfd||dfd&&dfd.ioArgs.args.ioPublish!==false)){_d.publish("/dojo/io/stop")}}};var _watchInFlight=function(){var now=(new Date()).getTime();if(!_d._blockAsync){for(var i=0,tif;i<_inFlight.length&&(tif=_inFlight[i]);i++){var dfd=tif.dfd;var func=function(){if(!dfd||dfd.canceled||!tif.validCheck(dfd)){_inFlight.splice(i--,1);_pubCount-=1}else{if(tif.ioCheck(dfd)){_inFlight.splice(i--,1);tif.resHandle(dfd);_pubCount-=1}else{if(dfd.startTime){if(dfd.startTime+(dfd.ioArgs.args.timeout||0)<now){_inFlight.splice(i--,1);var err=new Error("timeout exceeded");err.dojoType="timeout";dfd.errback(err);dfd.cancel();_pubCount-=1}}}}};if(dojo.config.debugAtAllCosts){func.call(this)}else{try{func.call(this)}catch(e){dfd.errback(e)}}}}_checkPubCount(dfd);if(!_inFlight.length){clearInterval(_inFlightIntvl);_inFlightIntvl=null;return}};dojo._ioCancelAll=function(){try{_d.forEach(_inFlight,function(i){try{i.dfd.cancel()}catch(e){}})}catch(e){}};if(_d.isIE){_d.addOnWindowUnload(_d._ioCancelAll)}_d._ioNotifyStart=function(dfd){if(cfg.ioPublish&&_d.publish&&dfd.ioArgs.args.ioPublish!==false){if(!_pubCount){_d.publish("/dojo/io/start")}_pubCount+=1;_d.publish("/dojo/io/send",[dfd])}};_d._ioWatch=function(dfd,validCheck,ioCheck,resHandle){var args=dfd.ioArgs.args;if(args.timeout){dfd.startTime=(new Date()).getTime()}_inFlight.push({dfd:dfd,validCheck:validCheck,ioCheck:ioCheck,resHandle:resHandle});if(!_inFlightIntvl){_inFlightIntvl=setInterval(_watchInFlight,50)}if(args.sync){_watchInFlight()}};var _defaultContentType="application/x-www-form-urlencoded";var _validCheck=function(dfd){return dfd.ioArgs.xhr.readyState};var _ioCheck=function(dfd){return 4==dfd.ioArgs.xhr.readyState};var _resHandle=function(dfd){var xhr=dfd.ioArgs.xhr;if(_d._isDocumentOk(xhr)){dfd.callback(dfd)}else{var err=new Error("Unable to load "+dfd.ioArgs.url+" status:"+xhr.status);err.status=xhr.status;err.responseText=xhr.responseText;dfd.errback(err)}};dojo._ioAddQueryToUrl=function(ioArgs){if(ioArgs.query.length){ioArgs.url+=(ioArgs.url.indexOf("?")==-1?"?":"&")+ioArgs.query;ioArgs.query=null}};dojo.xhr=function(method,args,hasBody){var dfd=_d._ioSetArgs(args,_deferredCancel,_deferredOk,_deferError);var ioArgs=dfd.ioArgs;var xhr=ioArgs.xhr=_d._xhrObj(ioArgs.args);if(!xhr){dfd.cancel();return dfd}if("postData" in args){ioArgs.query=args.postData}else{if("putData" in args){ioArgs.query=args.putData}else{if("rawBody" in args){ioArgs.query=args.rawBody}else{if((arguments.length>2&&!hasBody)||"POST|PUT".indexOf(method.toUpperCase())==-1){_d._ioAddQueryToUrl(ioArgs)}}}}xhr.open(method,ioArgs.url,args.sync!==true,args.user||undefined,args.password||undefined);if(args.headers){for(var hdr in args.headers){if(hdr.toLowerCase()==="content-type"&&!args.contentType){args.contentType=args.headers[hdr]}else{if(args.headers[hdr]){xhr.setRequestHeader(hdr,args.headers[hdr])}}}}xhr.setRequestHeader("Content-Type",args.contentType||_defaultContentType);if(!args.headers||!("X-Requested-With" in args.headers)){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest")}_d._ioNotifyStart(dfd);if(dojo.config.debugAtAllCosts){xhr.send(ioArgs.query)}else{try{xhr.send(ioArgs.query)}catch(e){ioArgs.error=e;dfd.cancel()}}_d._ioWatch(dfd,_validCheck,_ioCheck,_resHandle);xhr=null;return dfd};dojo.xhrGet=function(args){return _d.xhr("GET",args)};dojo.rawXhrPost=dojo.xhrPost=function(args){return _d.xhr("POST",args,true)};dojo.rawXhrPut=dojo.xhrPut=function(args){return _d.xhr("PUT",args,true)};dojo.xhrDelete=function(args){return _d.xhr("DELETE",args)}})()}if(!dojo._hasResource["dojo._base.fx"]){dojo._hasResource["dojo._base.fx"]=true;dojo.provide("dojo._base.fx");(function(){var d=dojo;var _mixin=d._mixin;dojo._Line=function(start,end){this.start=start;this.end=end};dojo._Line.prototype.getValue=function(n){return((this.end-this.start)*n)+this.start};dojo.Animation=function(args){_mixin(this,args);if(d.isArray(this.curve)){this.curve=new d._Line(this.curve[0],this.curve[1])}};d._Animation=d.Animation;d.extend(dojo.Animation,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var _p=this._percent,_e=this.easing;return _e?_e(_p):_p},_fire:function(evt,args){var a=args||[];if(this[evt]){if(d.config.debugAtAllCosts){this[evt].apply(this,a)}else{try{this[evt].apply(this,a)}catch(e){console.error("exception in animation handler for:",evt);console.error(e)}}}return this},play:function(delay,gotoStart){var _t=this;if(_t._delayTimer){_t._clearTimer()}if(gotoStart){_t._stopTimer();_t._active=_t._paused=false;_t._percent=0}else{if(_t._active&&!_t._paused){return _t}}_t._fire("beforeBegin",[_t.node]);var de=delay||_t.delay,_p=dojo.hitch(_t,"_play",gotoStart);if(de>0){_t._delayTimer=setTimeout(_p,de);return _t}_p();return _t},_play:function(gotoStart){var _t=this;if(_t._delayTimer){_t._clearTimer()}_t._startTime=new Date().valueOf();if(_t._paused){_t._startTime-=_t.duration*_t._percent}_t._active=true;_t._paused=false;var value=_t.curve.getValue(_t._getStep());if(!_t._percent){if(!_t._startRepeatCount){_t._startRepeatCount=_t.repeat}_t._fire("onBegin",[value])}_t._fire("onPlay",[value]);_t._cycle();return _t},pause:function(){var _t=this;if(_t._delayTimer){_t._clearTimer()}_t._stopTimer();if(!_t._active){return _t}_t._paused=true;_t._fire("onPause",[_t.curve.getValue(_t._getStep())]);return _t},gotoPercent:function(percent,andPlay){var _t=this;_t._stopTimer();_t._active=_t._paused=true;_t._percent=percent;if(andPlay){_t.play()}return _t},stop:function(gotoEnd){var _t=this;if(_t._delayTimer){_t._clearTimer()}if(!_t._timer){return _t}_t._stopTimer();if(gotoEnd){_t._percent=1}_t._fire("onStop",[_t.curve.getValue(_t._getStep())]);_t._active=_t._paused=false;return _t},status:function(){if(this._active){return this._paused?"paused":"playing"}return"stopped"},_cycle:function(){var _t=this;if(_t._active){var curr=new Date().valueOf();var step=(curr-_t._startTime)/(_t.duration);if(step>=1){step=1}_t._percent=step;if(_t.easing){step=_t.easing(step)}_t._fire("onAnimate",[_t.curve.getValue(step)]);if(_t._percent<1){_t._startTimer()}else{_t._active=false;if(_t.repeat>0){_t.repeat--;_t.play(null,true)}else{if(_t.repeat==-1){_t.play(null,true)}else{if(_t._startRepeatCount){_t.repeat=_t._startRepeatCount;_t._startRepeatCount=0}}}_t._percent=0;_t._fire("onEnd",[_t.node]);!_t.repeat&&_t._stopTimer()}}return _t},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var ctr=0,timer=null,runner={run:function(){}};d.extend(d.Animation,{_startTimer:function(){if(!this._timer){this._timer=d.connect(runner,"run",this,"_cycle");ctr++}if(!timer){timer=setInterval(d.hitch(runner,"run"),this.rate)}},_stopTimer:function(){if(this._timer){d.disconnect(this._timer);this._timer=null;ctr--}if(ctr<=0){clearInterval(timer);timer=null;ctr=0}}});var _makeFadeable=d.isIE?function(node){var ns=node.style;if(!ns.width.length&&d.style(node,"width")=="auto"){ns.width="auto"}}:function(){};dojo._fade=function(args){args.node=d.byId(args.node);var fArgs=_mixin({properties:{}},args),props=(fArgs.properties.opacity={});props.start=!("start" in fArgs)?function(){return +d.style(fArgs.node,"opacity")||0}:fArgs.start;props.end=fArgs.end;var anim=d.animateProperty(fArgs);d.connect(anim,"beforeBegin",d.partial(_makeFadeable,fArgs.node));return anim};dojo.fadeIn=function(args){return d._fade(_mixin({end:1},args))};dojo.fadeOut=function(args){return d._fade(_mixin({end:0},args))};dojo._defaultEasing=function(n){return 0.5+((Math.sin((n+1.5)*Math.PI))/2)};var PropLine=function(properties){this._properties=properties;for(var p in properties){var prop=properties[p];if(prop.start instanceof d.Color){prop.tempColor=new d.Color()}}};PropLine.prototype.getValue=function(r){var ret={};for(var p in this._properties){var prop=this._properties[p],start=prop.start;if(start instanceof d.Color){ret[p]=d.blendColors(start,prop.end,r,prop.tempColor).toCss()}else{if(!d.isArray(start)){ret[p]=((prop.end-start)*r)+start+(p!="opacity"?prop.units||"px":0)}}}return ret};dojo.animateProperty=function(args){var n=args.node=d.byId(args.node);if(!args.easing){args.easing=d._defaultEasing}var anim=new d.Animation(args);d.connect(anim,"beforeBegin",anim,function(){var pm={};for(var p in this.properties){if(p=="width"||p=="height"){this.node.display="block"}var prop=this.properties[p];if(d.isFunction(prop)){prop=prop(n)}prop=pm[p]=_mixin({},(d.isObject(prop)?prop:{end:prop}));if(d.isFunction(prop.start)){prop.start=prop.start(n)}if(d.isFunction(prop.end)){prop.end=prop.end(n)}var isColor=(p.toLowerCase().indexOf("color")>=0);function getStyle(node,p){var v={height:node.offsetHeight,width:node.offsetWidth}[p];if(v!==undefined){return v}v=d.style(node,p);return(p=="opacity")?+v:(isColor?v:parseFloat(v))}if(!("end" in prop)){prop.end=getStyle(n,p)}else{if(!("start" in prop)){prop.start=getStyle(n,p)}}if(isColor){prop.start=new d.Color(prop.start);prop.end=new d.Color(prop.end)}else{prop.start=(p=="opacity")?+prop.start:parseFloat(prop.start)}}this.curve=new PropLine(pm)});d.connect(anim,"onAnimate",d.hitch(d,"style",anim.node));return anim};dojo.anim=function(node,properties,duration,easing,onEnd,delay){return d.animateProperty({node:node,duration:duration||d.Animation.prototype.duration,properties:properties,easing:easing,onEnd:onEnd}).play(delay||0)}})()}if(!dojo._hasResource["dojo._base.browser"]){dojo._hasResource["dojo._base.browser"]=true;dojo.provide("dojo._base.browser");dojo.forEach(dojo.config.require,function(i){dojo.require(i)})}if(!dojo._hasResource["dojox.io.windowName"]){dojo._hasResource["dojox.io.windowName"]=true;dojo.provide("dojox.io.windowName");dojox.io.windowName={send:function(method,args){args.url+=(args.url.match(/\?/)?"&":"?")+"windowname="+(args.authElement?"auth":true);var authElement=args.authElement;var cleanup=function(result){try{var innerDoc=dfd.ioArgs.frame.contentWindow.document;innerDoc.write(" ");innerDoc.close()}catch(e){}(authElement||dojo.body()).removeChild(dfd.ioArgs.outerFrame);return result};var dfd=dojo._ioSetArgs(args,cleanup,cleanup,cleanup);if(args.timeout){setTimeout(function(){if(dfd.fired==-1){dfd.callback(new Error("Timeout"))}},args.timeout)}var self=dojox.io.windowName;if(dojo.body()){self._send(dfd,method,authElement,args.onAuthLoad)}else{dojo.addOnLoad(function(){self._send(dfd,method,authElement,args.onAuthLoad)})}return dfd},_send:function(dfd,method,authTarget,onAuthLoad){var ioArgs=dfd.ioArgs;var frameNum=dojox.io.windowName._frameNum++;var sameDomainUrl=(dojo.config.dojoBlankHtmlUrl||dojo.config.dojoCallbackUrl||dojo.moduleUrl("dojo","resources/blank.html"))+"#"+frameNum;var frameName=new dojo._Url(window.location,sameDomainUrl);var doc=dojo.doc;var frameContainer=authTarget||dojo.body();function styleFrame(frame){frame.style.width="100%";frame.style.height="100%";frame.style.border="0px"}if(dojo.isMoz&&![].reduce){var outerFrame=doc.createElement("iframe");styleFrame(outerFrame);if(!authTarget){outerFrame.style.display="none"}frameContainer.appendChild(outerFrame);var firstWindow=outerFrame.contentWindow;doc=firstWindow.document;doc.write("<html><body margin='0px'><iframe style='width:100%;height:100%;border:0px' name='protectedFrame'></iframe></body></html>");doc.close();var secondWindow=firstWindow[0];firstWindow.__defineGetter__(0,function(){});firstWindow.__defineGetter__("protectedFrame",function(){});doc=secondWindow.document;doc.write("<html><body margin='0px'></body></html>");doc.close();frameContainer=doc.body}var frame=ioArgs.frame=frame=doc.createElement(dojo.isIE<9?'<iframe src="init_src.html" name="'+frameName+'" onload="'+dojox._scopeName+".io.windowName["+frameNum+']()">':"iframe");styleFrame(frame);ioArgs.outerFrame=outerFrame=outerFrame||frame;if(!authTarget){outerFrame.style.display="none"}var state=0;function getData(){var data=frame.contentWindow.name;if(typeof data=="string"){if(data!=frameName){state=2;dfd.ioArgs.hash=frame.contentWindow.location.hash;dfd.callback(data)}}}dojox.io.windowName[frameNum]=frame.onload=function(){try{if(frame.contentWindow.location=="about:blank"){return}}catch(e){}if(!state){state=1;if(authTarget){if(onAuthLoad){onAuthLoad()}}else{frame.contentWindow.location=sameDomainUrl}}try{if(state<2){getData()}}catch(e){}};frame.name=frameName;if(method.match(/GET/i)){dojo._ioAddQueryToUrl(ioArgs);frame.src=ioArgs.url;frameContainer.appendChild(frame)}else{if(method.match(/POST/i)){frameContainer.appendChild(frame);var form=dojo.doc.createElement("form");dojo.body().appendChild(form);var query=dojo.queryToObject(ioArgs.query);for(var i in query){var values=query[i];values=values instanceof Array?values:[values];for(var j=0;j<values.length;j++){var input=doc.createElement("input");input.type="hidden";input.name=i;input.value=values[j];form.appendChild(input)}}form.method="POST";form.action=ioArgs.url;form.target=frameName;form.submit();form.parentNode.removeChild(form)}else{throw new Error("Method "+method+" not supported with the windowName transport")}}if(frame.contentWindow){frame.contentWindow.name=frameName}},_frameNum:0}}if(!dojo._hasResource["dojox.secure.capability"]){dojo._hasResource["dojox.secure.capability"]=true;dojo.provide("dojox.secure.capability");dojox.secure.badProps=/^__|^(apply|call|callee|caller|constructor|eval|prototype|this|unwatch|valueOf|watch)$|__$/;dojox.secure.capability={keywords:["break","case","catch","const","continue","debugger","default","delete","do","else","enum","false","finally","for","function","if","in","instanceof","new","null","yield","return","switch","throw","true","try","typeof","var","void","while"],validate:function(script,safeLibraries,safeGlobals){var keywords=this.keywords;for(var i=0;i<keywords.length;i++){safeGlobals[keywords[i]]=true}var badThis="|this| keyword in object literal without a Class call";var blocks=[];if(script.match(/[\u200c-\u200f\u202a-\u202e\u206a-\u206f\uff00-\uffff]/)){throw new Error("Illegal unicode characters detected")}if(script.match(/\/\*@cc_on/)){throw new Error("Conditional compilation token is not allowed")}script=script.replace(/\\["'\\\/bfnrtu]/g,"@").replace(/\/\/.*|\/\*[\w\W]*?\*\/|\/(\\[\/\\]|[^*\/])(\\.|[^\/\n\\])*\/[gim]*|("[^"]*")|('[^']*')/g,function(t){return t.match(/^\/\/|^\/\*/)?" ":"0"}).replace(/\.\s*([a-z\$_A-Z][\w\$_]*)|([;,{])\s*([a-z\$_A-Z][\w\$_]*\s*):/g,function(t,prop,prefix,key){prop=prop||key;if(/^__|^(apply|call|callee|caller|constructor|eval|prototype|this|unwatch|valueOf|watch)$|__$/.test(prop)){throw new Error("Illegal property name "+prop)}return(prefix&&(prefix+"0:"))||"~"});script.replace(/([^\[][\]\}]\s*=)|((\Wreturn|\S)\s*\[\s*\+?)|([^=!][=!]=[^=])/g,function(oper){if(!oper.match(/((\Wreturn|[=\&\|\:\?\,])\s*\[)|\[\s*\+$/)){throw new Error("Illegal operator "+oper.substring(1))}});script=script.replace(new RegExp("("+safeLibraries.join("|")+")[\\s~]*\\(","g"),function(call){return"new("});function findOuterRefs(block,func){var outerRefs={};block.replace(/#\d+/g,function(b){var refs=blocks[b.substring(1)];for(var i in refs){if(i==badThis){throw i}if(i=="this"&&refs[":method"]&&refs["this"]==1){i=badThis}if(i!=":method"){outerRefs[i]=2}}});block.replace(/(\W|^)([a-z_\$A-Z][\w_\$]*)/g,function(t,a,identifier){if(identifier.charAt(0)=="_"){throw new Error("Names may not start with _")}outerRefs[identifier]=1});return outerRefs}var newScript,outerRefs;function parseBlock(t,func,a,b,params,block){block.replace(/(^|,)0:\s*function#(\d+)/g,function(t,a,b){var refs=blocks[b];refs[":method"]=1});block=block.replace(/(^|[^_\w\$])Class\s*\(\s*([_\w\$]+\s*,\s*)*#(\d+)/g,function(t,p,a,b){var refs=blocks[b];delete refs[badThis];return(p||"")+(a||"")+"#"+b});outerRefs=findOuterRefs(block,func);function parseVars(t,a,b,decl){decl.replace(/,?([a-z\$A-Z][_\w\$]*)/g,function(t,identifier){if(identifier=="Class"){throw new Error("Class is reserved")}delete outerRefs[identifier]})}if(func){parseVars(t,a,a,params)}block.replace(/(\W|^)(var) ([ \t,_\w\$]+)/g,parseVars);return(a||"")+(b||"")+"#"+(blocks.push(outerRefs)-1)}do{newScript=script.replace(/((function|catch)(\s+[_\w\$]+)?\s*\(([^\)]*)\)\s*)?{([^{}]*)}/g,parseBlock)}while(newScript!=script&&(script=newScript));parseBlock(0,0,0,0,0,script);for(i in outerRefs){if(!(i in safeGlobals)){throw new Error("Illegal reference to "+i)}}}}}if(dojo.isBrowser&&(document.readyState==="complete"||dojo.config.afterOnLoad)){window.setTimeout(dojo._loadInit,100)}})();(function(){var e=this,a=Object.prototype,g=a.toString,b=true,d={toString:1},c;if(typeof Ext==="undefined"){e.Ext={}}Ext.global=e;for(c in d){b=null}if(b){b=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]}Ext.enumerables=b;Ext.apply=function(p,n,r){if(r){Ext.apply(p,r)}if(p&&n&&typeof n==="object"){var q,m,h;for(q in n){p[q]=n[q]}if(b){for(m=b.length;m--;){h=b[m];if(n.hasOwnProperty(h)){p[h]=n[h]}}}}return p};Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-",scopeResetCSS:false},Ext.buildSettings||{});Ext.apply(Ext,{emptyFn:function(){},baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,applyIf:function(j,h){var k;if(j){for(k in h){if(j[k]===undefined){j[k]=h[k]}}}return j},iterate:function(h,k,j){if(Ext.isEmpty(h)){return}if(j===undefined){j=h}if(Ext.isIterable(h)){Ext.Array.each.call(Ext.Array,h,k,j)}else{Ext.Object.each.call(Ext.Object,h,k,j)}}});Ext.apply(Ext,{extend:function(){var h=a.constructor,j=function(n){for(var k in n){if(!n.hasOwnProperty(k)){continue}this[k]=n[k]}};return function(k,r,p){if(Ext.isObject(r)){p=r;r=k;k=p.constructor!==h?p.constructor:function(){r.apply(this,arguments)}}var n=function(){},m,q=r.prototype;n.prototype=q;m=k.prototype=new n();m.constructor=k;k.superclass=q;if(q.constructor===h){q.constructor=r}k.override=function(t){Ext.override(k,t)};m.override=j;m.proto=m;k.override(p);k.extend=function(t){return Ext.extend(k,t)};return k}}(),override:function(h,j){if(h.prototype.$className){return h.override(j)}else{Ext.apply(h.prototype,j)}}});Ext.apply(Ext,{valueFrom:function(k,h,j){return Ext.isEmpty(k,j)?h:k},typeOf:function(j){if(j===null){return"null"}var h=typeof j;if(h==="undefined"||h==="string"||h==="number"||h==="boolean"){return h}var k=g.call(j);switch(k){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}if(h==="function"){return"function"}if(h==="object"){if(j.nodeType!==undefined){if(j.nodeType===3){return(/\S/).test(j.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}},isEmpty:function(h,j){return(h===null)||(h===undefined)||(!j?h==="":false)||(Ext.isArray(h)&&h.length===0)},isArray:("isArray" in Array)?Array.isArray:function(h){return g.call(h)==="[object Array]"},isDate:function(h){return g.call(h)==="[object Date]"},isObject:(g.call(null)==="[object Object]")?function(h){return h!==null&&h!==undefined&&g.call(h)==="[object Object]"&&h.ownerDocument===undefined}:function(h){return g.call(h)==="[object Object]"},isPrimitive:function(j){var h=typeof j;return h==="string"||h==="number"||h==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(h){return g.call(h)==="[object Function]"}:function(h){return typeof h==="function"},isNumber:function(h){return typeof h==="number"&&isFinite(h)},isNumeric:function(h){return !isNaN(parseFloat(h))&&isFinite(h)},isString:function(h){return typeof h==="string"},isBoolean:function(h){return typeof h==="boolean"},isElement:function(h){return h?h.nodeType===1:false},isTextNode:function(h){return h?h.nodeName==="#text":false},isDefined:function(h){return typeof h!=="undefined"},isIterable:function(h){return(h&&typeof h!=="string")?h.length!==undefined:false}});Ext.apply(Ext,{clone:function(r){if(r===null||r===undefined){return r}if(r.nodeType&&r.cloneNode){return r.cloneNode(true)}var q=g.call(r);if(q==="[object Date]"){return new Date(r.getTime())}var p,m,h,t,n;if(q==="[object Array]"){p=r.length;t=[];while(p--){t[p]=Ext.clone(r[p])}}else{if(q==="[object Object]"&&r.constructor===Object){t={};for(n in r){t[n]=Ext.clone(r[n])}if(b){for(m=b.length;m--;){h=b[m];t[h]=r[h]}}}}return t||r},getUniqueGlobalNamespace:function(){var j=this.uniqueGlobalNamespace;if(j===undefined){var h=0;do{j="ExtBox"+(++h)}while(Ext.global[j]!==undefined);Ext.global[j]=Ext;this.uniqueGlobalNamespace=j}return j},functionFactory:function(){var h=Array.prototype.slice.call(arguments);if(h.length>0){h[h.length-1]="var Ext=window."+this.getUniqueGlobalNamespace()+";"+h[h.length-1]}return Function.prototype.constructor.apply(Function.prototype,h)}});Ext.type=Ext.typeOf})();(function(){var a="4.0.7",b;Ext.Version=b=Ext.extend(Object,{constructor:function(c){var e,d;if(c instanceof b){return c}this.version=this.shortVersion=String(c).toLowerCase().replace(/_/g,".").replace(/[\-+]/g,"");d=this.version.search(/([^\d\.])/);if(d!==-1){this.release=this.version.substr(d,c.length);this.shortVersion=this.version.substr(0,d)}this.shortVersion=this.shortVersion.replace(/[^\d]/g,"");e=this.version.split(".");this.major=parseInt(e.shift()||0,10);this.minor=parseInt(e.shift()||0,10);this.patch=parseInt(e.shift()||0,10);this.build=parseInt(e.shift()||0,10);return this},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major||0},getMinor:function(){return this.minor||0},getPatch:function(){return this.patch||0},getBuild:function(){return this.build||0},getRelease:function(){return this.release||""},isGreaterThan:function(c){return b.compare(this.version,c)===1},isLessThan:function(c){return b.compare(this.version,c)===-1},equals:function(c){return b.compare(this.version,c)===0},match:function(c){c=String(c);return this.version.substr(0,c.length)===c},toArray:function(){return[this.getMajor(),this.getMinor(),this.getPatch(),this.getBuild(),this.getRelease()]},getShortVersion:function(){return this.shortVersion}});Ext.apply(b,{releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(c){return !c?0:(isNaN(c)?this.releaseValueMap[c]||c:parseInt(c,10))},compare:function(h,g){var d,e,c;h=new b(h).toArray();g=new b(g).toArray();for(c=0;c<Math.max(h.length,g.length);c++){d=this.getComponentValue(h[c]);e=this.getComponentValue(g[c]);if(d<e){return -1}else{if(d>e){return 1}}}return 0}});Ext.apply(Ext,{versions:{},lastRegisteredVersion:null,setVersion:function(d,c){Ext.versions[d]=new b(c);Ext.lastRegisteredVersion=Ext.versions[d];return this},getVersion:function(c){if(c===undefined){return Ext.lastRegisteredVersion}return Ext.versions[c]},deprecate:function(c,e,g,d){if(b.compare(Ext.getVersion(c),e)<1){g.call(d)}}});Ext.setVersion("core",a)})();Ext.String={trimRegex:/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,escapeRe:/('|\\)/g,formatRe:/\{(\d+)\}/g,escapeRegexRe:/([-.*+?^${}()|[\]\/\\])/g,htmlEncode:(function(){var d={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"},b=[],c,a;for(c in d){b.push(c)}a=new RegExp("("+b.join("|")+")","g");return function(e){return(!e)?e:String(e).replace(a,function(h,g){return d[g]})}})(),htmlDecode:(function(){var d={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'},b=[],c,a;for(c in d){b.push(c)}a=new RegExp("("+b.join("|")+"|&#[0-9]{1,5};)","g");return function(e){return(!e)?e:String(e).replace(a,function(h,g){if(g in d){return d[g]}else{return String.fromCharCode(parseInt(g.substr(2),10))}})}})(),urlAppend:function(b,a){if(!Ext.isEmpty(a)){return b+(b.indexOf("?")===-1?"?":"&")+a}return b},trim:function(a){return a.replace(Ext.String.trimRegex,"")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},ellipsis:function(c,a,d){if(c&&c.length>a){if(d){var e=c.substr(0,a-2),b=Math.max(e.lastIndexOf(" "),e.lastIndexOf("."),e.lastIndexOf("!"),e.lastIndexOf("?"));if(b!==-1&&b>=(a-15)){return e.substr(0,b)+"..."}}return c.substr(0,a-3)+"..."}return c},escapeRegex:function(a){return a.replace(Ext.String.escapeRegexRe,"\\$1")},escape:function(a){return a.replace(Ext.String.escapeRe,"\\$1")},toggle:function(b,c,a){return b===c?a:c},leftPad:function(b,c,d){var a=String(b);d=d||" ";while(a.length<c){a=d+a}return a},format:function(b){var a=Ext.Array.toArray(arguments,1);return b.replace(Ext.String.formatRe,function(c,d){return a[d]})},repeat:function(e,d,b){for(var a=[],c=d;c--;){a.push(e)}return a.join(b||"")}};(function(){var a=(0.9).toFixed()!=="1";Ext.Number={constrain:function(d,c,b){d=parseFloat(d);if(!isNaN(c)){d=Math.max(d,c)}if(!isNaN(b)){d=Math.min(d,b)}return d},snap:function(e,c,d,h){var g=e,b;if(!(c&&e)){return e}b=e%c;if(b!==0){g-=b;if(b*2>=c){g+=c}else{if(b*2<-c){g-=c}}}return Ext.Number.constrain(g,d,h)},toFixed:function(d,b){if(a){b=b||0;var c=Math.pow(10,b);return(Math.round(d*c)/c).toFixed(b)}return d.toFixed(b)},from:function(c,b){if(isFinite(c)){c=parseFloat(c)}return !isNaN(c)?c:b}}})();Ext.num=function(){return Ext.Number.from.apply(this,arguments)};(function(){var g=Array.prototype,r=g.slice,u=function(){var E=[],e,D=20;if(!E.splice){return false}while(D--){E.push("A")}E.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");e=E.length;E.splice(13,0,"XXX");if(e+1!=E.length){return false}return true}(),k="forEach" in g,y="map" in g,t="indexOf" in g,C="every" in g,c="some" in g,d="filter" in g,q=function(){var e=[1,2,3,4,5].sort(function(){return 0});return e[0]===1&&e[1]===2&&e[2]===3&&e[3]===4&&e[4]===5}(),m=true,a;try{if(typeof document!=="undefined"){r.call(document.getElementsByTagName("body"))}}catch(w){m=false}function p(D,e){return(e<0)?Math.max(0,D.length+e):Math.min(D.length,e)}function B(K,J,D,N){var O=N?N.length:0,F=K.length,L=p(K,J);if(L===F){if(O){K.push.apply(K,N)}}else{var I=Math.min(D,F-L),M=L+I,E=M+O-I,e=F-M,G=F-I,H;if(E<M){for(H=0;H<e;++H){K[E+H]=K[M+H]}}else{if(E>M){for(H=e;H--;){K[E+H]=K[M+H]}}}if(O&&L===G){K.length=G;K.push.apply(K,N)}else{K.length=G+O;for(H=0;H<O;++H){K[L+H]=N[H]}}}return K}function j(F,e,E,D){if(D&&D.length){if(e<F.length){F.splice.apply(F,[e,E].concat(D))}else{F.push.apply(F,D)}}else{F.splice(e,E)}return F}function b(E,e,D){return B(E,e,D)}function v(E,e,D){E.splice(e,D);return E}function n(G,e,E){var F=p(G,e),D=G.slice(e,p(G,F+E));if(arguments.length<4){B(G,F,E)}else{B(G,F,E,r.call(arguments,3))}return D}function h(e){return e.splice.apply(e,r.call(arguments,1))}var A=u?v:b,x=u?j:B,z=u?h:n;a=Ext.Array={each:function(H,F,E,e){H=a.from(H);var D,G=H.length;if(e!==true){for(D=0;D<G;D++){if(F.call(E||H[D],H[D],D,H)===false){return D}}}else{for(D=G-1;D>-1;D--){if(F.call(E||H[D],H[D],D,H)===false){return D}}}return true},forEach:function(G,E,D){if(k){return G.forEach(E,D)}var e=0,F=G.length;for(;e<F;e++){E.call(D,G[e],e,G)}},indexOf:function(G,E,F){if(t){return G.indexOf(E,F)}var e,D=G.length;for(e=(F<0)?Math.max(0,D+F):F||0;e<D;e++){if(G[e]===E){return e}}return -1},contains:function(F,E){if(t){return F.indexOf(E)!==-1}var e,D;for(e=0,D=F.length;e<D;e++){if(F[e]===E){return true}}return false},toArray:function(E,G,e){if(!E||!E.length){return[]}if(typeof E==="string"){E=E.split("")}if(m){return r.call(E,G||0,e||E.length)}var F=[],D;G=G||0;e=e?((e<0)?E.length+e:e):E.length;for(D=G;D<e;D++){F.push(E[D])}return F},pluck:function(H,e){var D=[],E,G,F;for(E=0,G=H.length;E<G;E++){F=H[E];D.push(F[e])}return D},map:function(H,G,F){if(y){return H.map(G,F)}var E=[],D=0,e=H.length;for(;D<e;D++){E[D]=G.call(F,H[D],D,H)}return E},every:function(G,E,D){if(C){return G.every(E,D)}var e=0,F=G.length;for(;e<F;++e){if(!E.call(D,G[e],e,G)){return false}}return true},some:function(G,E,D){if(c){return G.some(E,D)}var e=0,F=G.length;for(;e<F;++e){if(E.call(D,G[e],e,G)){return true}}return false},clean:function(G){var D=[],e=0,F=G.length,E;for(;e<F;e++){E=G[e];if(!Ext.isEmpty(E)){D.push(E)}}return D},unique:function(G){var F=[],e=0,E=G.length,D;for(;e<E;e++){D=G[e];if(a.indexOf(F,D)===-1){F.push(D)}}return F},filter:function(H,F,E){if(d){return H.filter(F,E)}var D=[],e=0,G=H.length;for(;e<G;e++){if(F.call(E,H[e],e,H)){D.push(H[e])}}return D},from:function(D,e){if(D===undefined||D===null){return[]}if(Ext.isArray(D)){return(e)?r.call(D):D}if(D&&D.length!==undefined&&typeof D!=="string"){return Ext.toArray(D)}return[D]},remove:function(E,D){var e=a.indexOf(E,D);if(e!==-1){A(E,e,1)}return E},include:function(D,e){if(!a.contains(D,e)){D.push(e)}},clone:function(e){return r.call(e)},merge:function(){var e=r.call(arguments),F=[],D,E;for(D=0,E=e.length;D<E;D++){F=F.concat(e[D])}return a.unique(F)},intersect:function(){var E=[],e=r.call(arguments),I,G,F,K,L,O,N,M,D,H;if(!e.length){return E}for(I=O=0,M=e.length;I<M,L=e[I];I++){if(!K||L.length<K.length){K=L;O=I}}K=a.unique(K);A(e,O,1);for(I=0,M=K.length;I<M,O=K[I];I++){var J=0;for(G=0,D=e.length;G<D,L=e[G];G++){for(F=0,H=L.length;F<H,N=L[F];F++){if(O===N){J++;break}}}if(J===D){E.push(O)}}return E},difference:function(D,e){var I=r.call(D),G=I.length,F,E,H;for(F=0,H=e.length;F<H;F++){for(E=0;E<G;E++){if(I[E]===e[F]){A(I,E,1);E--;G--}}}return I},slice:([1,2].slice(1,undefined).length?function(E,D,e){return r.call(E,D,e)}:function(E,D,e){if(typeof D==="undefined"){return r.call(E)}if(typeof e==="undefined"){return r.call(E,D)}return r.call(E,D,e)}),sort:function(J,I){if(q){if(I){return J.sort(I)}else{return J.sort()}}var G=J.length,F=0,H,e,E,D;for(;F<G;F++){E=F;for(e=F+1;e<G;e++){if(I){H=I(J[e],J[E]);if(H<0){E=e}}else{if(J[e]<J[E]){E=e}}}if(E!==F){D=J[F];J[F]=J[E];J[E]=D}}return J},flatten:function(E){var D=[];function e(F){var H,I,G;for(H=0,I=F.length;H<I;H++){G=F[H];if(Ext.isArray(G)){e(G)}else{D.push(G)}}return D}return e(E)},min:function(H,G){var D=H[0],e,F,E;for(e=0,F=H.length;e<F;e++){E=H[e];if(G){if(G(D,E)===1){D=E}}else{if(E<D){D=E}}}return D},max:function(H,G){var e=H[0],D,F,E;for(D=0,F=H.length;D<F;D++){E=H[D];if(G){if(G(e,E)===-1){e=E}}else{if(E>e){e=E}}}return e},mean:function(e){return e.length>0?a.sum(e)/e.length:undefined},sum:function(G){var D=0,e,F,E;for(e=0,F=G.length;e<F;e++){E=G[e];D+=E}return D},erase:A,insert:function(E,D,e){return x(E,D,0,e)},replace:x,splice:z};Ext.each=a.each;a.union=a.merge;Ext.min=a.min;Ext.max=a.max;Ext.sum=a.sum;Ext.mean=a.mean;Ext.flatten=a.flatten;Ext.clean=a.clean;Ext.unique=a.unique;Ext.pluck=a.pluck;Ext.toArray=function(){return a.toArray.apply(a,arguments)}})();Ext.Function={flexSetter:function(a){return function(d,c){var e,g;if(d===null){return this}if(typeof d!=="string"){for(e in d){if(d.hasOwnProperty(e)){a.call(this,e,d[e])}}if(Ext.enumerables){for(g=Ext.enumerables.length;g--;){e=Ext.enumerables[g];if(d.hasOwnProperty(e)){a.call(this,e,d[e])}}}}else{a.call(this,d,c)}return this}},bind:function(d,c,b,a){if(arguments.length===2){return function(){return d.apply(c,arguments)}}var g=d,e=Array.prototype.slice;return function(){var h=b||arguments;if(a===true){h=e.call(arguments,0);h=h.concat(b)}else{if(typeof a=="number"){h=e.call(arguments,0);Ext.Array.insert(h,a,b)}}return g.apply(c||window,h)}},pass:function(c,a,b){if(a){a=Ext.Array.from(a)}return function(){return c.apply(b,a.concat(Ext.Array.toArray(arguments)))}},alias:function(b,a){return function(){return b[a].apply(b,arguments)}},createInterceptor:function(d,c,b,a){var e=d;if(!Ext.isFunction(c)){return d}else{return function(){var h=this,g=arguments;c.target=h;c.method=d;return(c.apply(b||h||window,g)!==false)?d.apply(h||window,g):a||null}}},createDelayed:function(e,c,d,b,a){if(d||b){e=Ext.Function.bind(e,d,b,a)}return function(){var g=this;setTimeout(function(){e.apply(g,arguments)},c)}},defer:function(d,c,e,b,a){d=Ext.Function.bind(d,e,b,a);if(c>0){return setTimeout(d,c)}d();return 0},createSequence:function(c,b,a){if(!Ext.isFunction(b)){return c}else{return function(){var d=c.apply(this||window,arguments);b.apply(a||this||window,arguments);return d}}},createBuffered:function(d,a,c,b){return function(){var e;return function(){var g=this;if(e){clearTimeout(e);e=null}e=setTimeout(function(){d.apply(c||g,b||arguments)},a)}}()},createThrottled:function(e,b,d){var g,a,c,j,h=function(){e.apply(d||this,c);g=new Date().getTime()};return function(){a=new Date().getTime()-g;c=arguments;clearTimeout(j);if(!g||(a>=b)){h()}else{j=setTimeout(h,b-a)}}},interceptBefore:function(b,a,c){var d=b[a]||Ext.emptyFn;return b[a]=function(){var e=c.apply(this,arguments);d.apply(this,arguments);return e}},interceptAfter:function(b,a,c){var d=b[a]||Ext.emptyFn;return b[a]=function(){d.apply(this,arguments);return c.apply(this,arguments)}}};Ext.defer=Ext.Function.alias(Ext.Function,"defer");Ext.pass=Ext.Function.alias(Ext.Function,"pass");Ext.bind=Ext.Function.alias(Ext.Function,"bind");(function(){var a=Ext.Object={toQueryObjects:function(d,j,c){var b=a.toQueryObjects,h=[],e,g;if(Ext.isArray(j)){for(e=0,g=j.length;e<g;e++){if(c){h=h.concat(b(d+"["+e+"]",j[e],true))}else{h.push({name:d,value:j[e]})}}}else{if(Ext.isObject(j)){for(e in j){if(j.hasOwnProperty(e)){if(c){h=h.concat(b(d+"["+e+"]",j[e],true))}else{h.push({name:d,value:j[e]})}}}}else{h.push({name:d,value:j})}}return h},toQueryString:function(e,c){var g=[],d=[],k,h,m,b,n;for(k in e){if(e.hasOwnProperty(k)){g=g.concat(a.toQueryObjects(k,e[k],c))}}for(h=0,m=g.length;h<m;h++){b=g[h];n=b.value;if(Ext.isEmpty(n)){n=""}else{if(Ext.isDate(n)){n=Ext.Date.toString(n)}}d.push(encodeURIComponent(b.name)+"="+encodeURIComponent(String(n)))}return d.join("&")},fromQueryString:function(c,t){var m=c.replace(/^\?/,"").split("&"),w={},u,h,y,n,r,e,p,q,b,g,v,k,x,d;for(r=0,e=m.length;r<e;r++){p=m[r];if(p.length>0){h=p.split("=");y=decodeURIComponent(h[0]);n=(h[1]!==undefined)?decodeURIComponent(h[1]):"";if(!t){if(w.hasOwnProperty(y)){if(!Ext.isArray(w[y])){w[y]=[w[y]]}w[y].push(n)}else{w[y]=n}}else{g=y.match(/(\[):?([^\]]*)\]/g);v=y.match(/^([^\[]+)/);y=v[0];k=[];if(g===null){w[y]=n;continue}for(q=0,b=g.length;q<b;q++){x=g[q];x=(x.length===2)?"":x.substring(1,x.length-1);k.push(x)}k.unshift(y);u=w;for(q=0,b=k.length;q<b;q++){x=k[q];if(q===b-1){if(Ext.isArray(u)&&x===""){u.push(n)}else{u[x]=n}}else{if(u[x]===undefined||typeof u[x]==="string"){d=k[q+1];u[x]=(Ext.isNumeric(d)||d==="")?[]:{}}u=u[x]}}}}}return w},each:function(b,d,c){for(var e in b){if(b.hasOwnProperty(e)){if(d.call(c||b,e,b[e],b)===false){return}}}},merge:function(j,d,h){if(typeof d==="string"){if(h&&h.constructor===Object){if(j[d]&&j[d].constructor===Object){a.merge(j[d],h)}else{j[d]=Ext.clone(h)}}else{j[d]=h}return j}var c=1,e=arguments.length,b,g;for(;c<e;c++){b=arguments[c];for(g in b){if(b.hasOwnProperty(g)){a.merge(j,g,b[g])}}}return j},getKey:function(b,d){for(var c in b){if(b.hasOwnProperty(c)&&b[c]===d){return c}}return null},getValues:function(c){var b=[],d;for(d in c){if(c.hasOwnProperty(d)){b.push(c[d])}}return b},getKeys:("keys" in Object.prototype)?Object.keys:function(b){var c=[],d;for(d in b){if(b.hasOwnProperty(d)){c.push(d)}}return c},getSize:function(b){var c=0,d;for(d in b){if(b.hasOwnProperty(d)){c++}}return c}};Ext.merge=Ext.Object.merge;Ext.urlEncode=function(){var b=Ext.Array.from(arguments),c="";if((typeof b[1]==="string")){c=b[1]+"&";b[1]=false}return c+Ext.Object.toQueryString.apply(Ext.Object,b)};Ext.urlDecode=function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)}})();(function(){function b(d){var c=Array.prototype.slice.call(arguments,1);return d.replace(/\{(\d+)\}/g,function(e,g){return c[g]})}Ext.Date={now:Date.now||function(){return +new Date()},toString:function(c){var d=Ext.String.leftPad;return c.getFullYear()+"-"+d(c.getMonth()+1,2,"0")+"-"+d(c.getDate(),2,"0")+"T"+d(c.getHours(),2,"0")+":"+d(c.getMinutes(),2,"0")+":"+d(c.getSeconds(),2,"0")},getElapsed:function(d,c){return Math.abs(d-(c||new Date()))},useStrict:false,formatCodeToRegex:function(d,c){var e=a.parseCodes[d];if(e){e=typeof e=="function"?e():e;a.parseCodes[d]=e}return e?Ext.applyIf({c:e.c?b(e.c,c||"{0}"):e.c},e):{g:0,c:null,s:Ext.String.escapeRegex(d)}},parseFunctions:{MS:function(d,c){var e=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/");var g=(d||"").match(e);return g?new Date(((g[1]||"")+g[2])*1):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(c){return a.monthNames[c].substring(0,3)},getShortDayName:function(c){return a.dayNames[c].substring(0,3)},getMonthNumber:function(c){return a.monthNumbers[c.substring(0,1).toUpperCase()+c.substring(1,3).toLowerCase()]},formatContainsHourInfo:(function(){var d=/(\\.)/g,c=/([gGhHisucUOPZ]|MS)/;return function(e){return c.test(e.replace(d,""))}})(),formatContainsDateInfo:(function(){var d=/(\\.)/g,c=/([djzmnYycU]|MS)/;return function(e){return c.test(e.replace(d,""))}})(),formatCodes:{d:"Ext.String.leftPad(this.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Ext.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Ext.Date.getSuffix(this)",w:"this.getDay()",z:"Ext.Date.getDayOfYear(this)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')",F:"Ext.Date.monthNames[this.getMonth()]",m:"Ext.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(this)",L:"(Ext.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(this.getHours(), 2, '0')",i:"Ext.String.leftPad(this.getMinutes(), 2, '0')",s:"Ext.String.leftPad(this.getSeconds(), 2, '0')",u:"Ext.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(this)",P:"Ext.Date.getGMTOffset(this, true)",T:"Ext.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var k="Y-m-dTH:i:sP",h=[],g=0,d=k.length;g<d;++g){var j=k.charAt(g);h.push(j=="T"?"'T'":a.getFormatCode(j))}return h.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(q,c,p,k,g,j,e){k=k||0;g=g||0;j=j||0;e=e||0;var n=a.add(new Date(q<100?100:q,c-1,p,k,g,j,e),a.YEAR,q<100?q-100:0);return q==n.getFullYear()&&c==n.getMonth()+1&&p==n.getDate()&&k==n.getHours()&&g==n.getMinutes()&&j==n.getSeconds()&&e==n.getMilliseconds()},parse:function(d,g,c){var e=a.parseFunctions;if(e[g]==null){a.createParser(g)}return e[g](d,Ext.isDefined(c)?c:a.useStrict)},parseDate:function(d,e,c){return a.parse(d,e,c)},getFormatCode:function(d){var c=a.formatCodes[d];if(c){c=typeof c=="function"?c():c;a.formatCodes[d]=c}return c||("'"+Ext.String.escape(d)+"'")},createFormat:function(h){var g=[],c=false,e="";for(var d=0;d<h.length;++d){e=h.charAt(d);if(!c&&e=="\\"){c=true}else{if(c){c=false;g.push("'"+Ext.String.escape(e)+"'")}else{g.push(a.getFormatCode(e))}}}a.formatFunctions[h]=Ext.functionFactory("return "+g.join("+"))},createParser:(function(){var c=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Ext.Date.defaults,","results = String(input).match(Ext.Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = Ext.Date.clearTime(new Date);","y = Ext.Number.from(y, Ext.Number.from(def.y, dt.getFullYear()));","m = Ext.Number.from(m, Ext.Number.from(def.m - 1, dt.getMonth()));","d = Ext.Number.from(d, Ext.Number.from(def.d, dt.getDate()));","h  = Ext.Number.from(h, Ext.Number.from(def.h, dt.getHours()));","i  = Ext.Number.from(i, Ext.Number.from(def.i, dt.getMinutes()));","s  = Ext.Number.from(s, Ext.Number.from(def.s, dt.getSeconds()));","ms = Ext.Number.from(ms, Ext.Number.from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = Ext.Date.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (Ext.Date.isLeapYear(v) && z <= 365))? Ext.Date.add(v, Ext.Date.DAY, z) : null);","}else if(strict === true && !Ext.Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = Ext.Date.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = Ext.Date.add(v, Ext.Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = Ext.Date.add(v, Ext.Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(n){var e=a.parseRegexes.length,p=1,g=[],m=[],k=false,d="";for(var j=0;j<n.length;++j){d=n.charAt(j);if(!k&&d=="\\"){k=true}else{if(k){k=false;m.push(Ext.String.escape(d))}else{var h=a.formatCodeToRegex(d,p);p+=h.g;m.push(h.s);if(h.g&&h.c){g.push(h.c)}}}}a.parseRegexes[e]=new RegExp("^"+m.join("")+"$","i");a.parseFunctions[n]=Ext.functionFactory("input","strict",b(c,e,g.join("")))}})(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var c=[],d=0;d<7;c.push(a.getShortDayName(d)),++d){}return{g:0,c:null,s:"(?:"+c.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+a.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Ext.Date.getMonthNumber(results[{0}]), 10);\n",s:"("+a.monthNames.join("|")+")"}},M:function(){for(var c=[],d=0;d<12;c.push(a.getShortMonthName(d)),++d){}return Ext.applyIf({s:"("+c.join("|")+")"},a.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return a.formatCodeToRegex("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Ext.Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)"},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return a.formatCodeToRegex("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return a.formatCodeToRegex("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var e=[],c=[a.formatCodeToRegex("Y",1),a.formatCodeToRegex("m",2),a.formatCodeToRegex("d",3),a.formatCodeToRegex("h",4),a.formatCodeToRegex("i",5),a.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",a.formatCodeToRegex("P",8).c,"}else{",a.formatCodeToRegex("O",8).c,"}","}"].join("\n")}];for(var g=0,d=c.length;g<d;++g){e.push(c[g].c)}return{g:1,c:e.join(""),s:[c[0].s,"(?:","-",c[1].s,"(?:","-",c[2].s,"(?:","(?:T| )?",c[3].s,":",c[4].s,"(?::",c[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(c,d){return a.format(c,d)},format:function(d,e){if(a.formatFunctions[e]==null){a.createFormat(e)}var c=a.formatFunctions[e].call(d);return c+""},getTimezone:function(c){return c.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(c,d){var e=c.getTimezoneOffset();return(e>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(e)/60),2,"0")+(d?":":"")+Ext.String.leftPad(Math.abs(e%60),2,"0")},getDayOfYear:function(g){var e=0,j=Ext.Date.clone(g),c=g.getMonth(),h;for(h=0,j.setDate(1),j.setMonth(0);h<c;j.setMonth(++h)){e+=a.getDaysInMonth(j)}return e+g.getDate()-1},getWeekOfYear:(function(){var c=86400000,d=7*c;return function(g){var h=Date.UTC(g.getFullYear(),g.getMonth(),g.getDate()+3)/c,e=Math.floor(h/7),j=new Date(e*d).getUTCFullYear();return e-Math.floor(Date.UTC(j,0,7)/d)+1}})(),isLeapYear:function(c){var d=c.getFullYear();return !!((d&3)==0&&(d%100||(d%400==0&&d)))},getFirstDayOfMonth:function(d){var c=(d.getDay()-(d.getDate()-1))%7;return(c<0)?(c+7):c},getLastDayOfMonth:function(c){return a.getLastDateOfMonth(c).getDay()},getFirstDateOfMonth:function(c){return new Date(c.getFullYear(),c.getMonth(),1)},getLastDateOfMonth:function(c){return new Date(c.getFullYear(),c.getMonth(),a.getDaysInMonth(c))},getDaysInMonth:(function(){var c=[31,28,31,30,31,30,31,31,30,31,30,31];return function(e){var d=e.getMonth();return d==1&&a.isLeapYear(e)?29:c[d]}})(),getSuffix:function(c){switch(c.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(c){return new Date(c.getTime())},isDST:function(c){return new Date(c.getFullYear(),0,1).getTimezoneOffset()!=c.getTimezoneOffset()},clearTime:function(e,k){if(k){return Ext.Date.clearTime(Ext.Date.clone(e))}var h=e.getDate();e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);if(e.getDate()!=h){for(var g=1,j=a.add(e,Ext.Date.HOUR,g);j.getDate()!=h;g++,j=a.add(e,Ext.Date.HOUR,g)){}e.setDate(h);e.setHours(j.getHours())}return e},add:function(h,g,j){var k=Ext.Date.clone(h),c=Ext.Date;if(!g||j===0){return k}switch(g.toLowerCase()){case Ext.Date.MILLI:k.setMilliseconds(k.getMilliseconds()+j);break;case Ext.Date.SECOND:k.setSeconds(k.getSeconds()+j);break;case Ext.Date.MINUTE:k.setMinutes(k.getMinutes()+j);break;case Ext.Date.HOUR:k.setHours(k.getHours()+j);break;case Ext.Date.DAY:k.setDate(k.getDate()+j);break;case Ext.Date.MONTH:var e=h.getDate();if(e>28){e=Math.min(e,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(h),"mo",j)).getDate())}k.setDate(e);k.setMonth(h.getMonth()+j);break;case Ext.Date.YEAR:k.setFullYear(h.getFullYear()+j);break}return k},between:function(d,g,c){var e=d.getTime();return g.getTime()<=e&&e<=c.getTime()},compat:function(){var g=window.Date,e,c,h=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],d=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"];Ext.Array.forEach(h,function(j){g[j]=a[j]});Ext.Array.forEach(d,function(j){g.prototype[j]=function(){var k=Array.prototype.slice.call(arguments);k.unshift(this);return a[j].apply(a,k)}})}};var a=Ext.Date})();(function(a){var b=Ext.Base=function(){};b.prototype={$className:"Ext.Base",$class:b,self:b,constructor:function(){return this},initConfig:function(c){if(!this.$configInited){this.config=Ext.Object.merge({},this.config||{},c||{});this.applyConfig(this.config);this.$configInited=true}return this},setConfig:function(c){this.applyConfig(c||{});return this},applyConfig:a(function(c,d){var e="set"+Ext.String.capitalize(c);if(typeof this[e]==="function"){this[e].call(this,d)}return this}),callParent:function(d){var g=this.callParent.caller,e,c;if(!g.$owner){g=g.caller}e=g.$owner.superclass;c=g.$name;return e[c].apply(this,d||[])},statics:function(){var d=this.statics.caller,c=this.self;if(!d){return c}return d.$owner},callOverridden:function(c){var d=this.callOverridden.caller;return d.$previous.apply(this,c||[])},destroy:function(){}};Ext.apply(Ext.Base,{create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},own:function(c,d){if(typeof d=="function"){this.ownMethod(c,d)}else{this.prototype[c]=d}},ownMethod:function(c,d){var e;if(typeof d.$owner!=="undefined"&&d!==Ext.emptyFn){e=d;d=function(){return e.apply(this,arguments)}}d.$owner=this;d.$name=c;this.prototype[c]=d},addStatics:function(c){for(var d in c){if(c.hasOwnProperty(d)){this[d]=c[d]}}return this},addInheritableStatics:function(d){var h,c,g=this.prototype,e,j;h=g.$inheritableStatics;c=g.$hasInheritableStatics;if(!h){h=g.$inheritableStatics=[];c=g.$hasInheritableStatics={}}for(e in d){if(d.hasOwnProperty(e)){j=d[e];this[e]=j;if(!c[e]){c[e]=true;h.push(e)}}}return this},implement:function(d){var g=this.prototype,c=Ext.enumerables,e,h,j;for(e in d){if(d.hasOwnProperty(e)){j=d[e];if(typeof j==="function"){j.$owner=this;j.$name=e}g[e]=j}}if(c){for(h=c.length;h--;){e=c[h];if(d.hasOwnProperty(e)){j=d[e];j.$owner=this;j.$name=e;g[e]=j}}}},borrow:function(h,d){var c=h.prototype,e,g,j;d=Ext.Array.from(d);for(e=0,g=d.length;e<g;e++){j=d[e];this.own(j,c[j])}return this},override:function(d){var g=this.prototype,c=Ext.enumerables,e,h,k,j;if(arguments.length===2){e=d;k=arguments[1];if(typeof k=="function"){if(typeof g[e]=="function"){j=g[e];k.$previous=j}this.ownMethod(e,k)}else{g[e]=k}return this}for(e in d){if(d.hasOwnProperty(e)){k=d[e];if(typeof k==="function"){if(typeof g[e]==="function"){j=g[e];k.$previous=j}this.ownMethod(e,k)}else{g[e]=k}}}if(c){for(h=c.length;h--;){e=c[h];if(d.hasOwnProperty(e)){if(typeof g[e]!=="undefined"){j=g[e];d[e].$previous=j}this.ownMethod(e,d[e])}}}return this},mixin:function(e,c){var d=c.prototype,j=this.prototype,g,h;for(g in d){if(d.hasOwnProperty(g)){if(typeof j[g]==="undefined"&&g!=="mixins"&&g!=="mixinId"){if(typeof d[g]==="function"){h=d[g];if(typeof h.$owner==="undefined"){this.ownMethod(g,h)}else{j[g]=h}}else{j[g]=d[g]}}else{if(g==="config"&&j.config&&d.config){Ext.Object.merge(j.config,d.config)}}}}if(typeof d.onClassMixedIn!=="undefined"){d.onClassMixedIn.call(c,this)}if(!j.hasOwnProperty("mixins")){if("mixins" in j){j.mixins=Ext.Object.merge({},j.mixins)}else{j.mixins={}}}j.mixins[e]=d},getName:function(){return Ext.getClassName(this)},createAlias:a(function(d,c){this.prototype[d]=function(){return this[c].apply(this,arguments)}})})})(Ext.Function.flexSetter);(function(){var c,d=Ext.Base,b=[],a;for(a in d){if(d.hasOwnProperty(a)){b.push(a)}}Ext.Class=c=function(n,v,t){if(typeof n!="function"){t=v;v=n;n=function(){return this.constructor.apply(this,arguments)}}if(!v){v={}}var g=v.preprocessors||c.getDefaultPreprocessors(),p=c.getPreprocessors(),m=0,r=[],w,u,e,k,h,q;for(k=0,q=b.length;k<q;k++){u=b[k];n[u]=d[u]}delete v.preprocessors;for(h=0,q=g.length;h<q;h++){w=g[h];if(typeof w=="string"){w=p[w];if(!w.always){if(v.hasOwnProperty(w.name)){r.push(w.fn)}}else{r.push(w.fn)}}else{r.push(w)}}v.onClassCreated=t||Ext.emptyFn;v.onBeforeClassCreated=function(j,x){t=x.onClassCreated;delete x.onBeforeClassCreated;delete x.onClassCreated;j.implement(x);t.call(j,j)};e=function(j,x){w=r[m++];if(!w){x.onBeforeClassCreated.apply(this,arguments);return}if(w.call(this,j,x,e)!==false){e.apply(this,arguments)}};e.call(c,n,v);return n};Ext.apply(c,{preprocessors:{},registerPreprocessor:function(g,h,e){this.preprocessors[g]={name:g,always:e||false,fn:h};return this},getPreprocessor:function(e){return this.preprocessors[e]},getPreprocessors:function(){return this.preprocessors},getDefaultPreprocessors:function(){return this.defaultPreprocessors||[]},setDefaultPreprocessors:function(e){this.defaultPreprocessors=Ext.Array.from(e);return this},setDefaultPreprocessorPosition:function(h,k,j){var e=this.defaultPreprocessors,g;if(typeof k=="string"){if(k==="first"){e.unshift(h);return this}else{if(k==="last"){e.push(h);return this}}k=(k==="after")?1:-1}g=Ext.Array.indexOf(e,j);if(g!==-1){Ext.Array.splice(e,Math.max(0,g+k),0,h)}return this}});c.registerPreprocessor("extend",function(x,j){var r=j.extend,e=Ext.Base,p=e.prototype,u=function(){},v,m,h,q,w,g,t,n;if(r&&r!==Object){v=r}else{v=e}t=v.prototype;u.prototype=t;n=x.prototype=new u();if(!("$class" in v)){for(m in p){if(!t[m]){t[m]=p[m]}}}n.self=x;x.superclass=n.superclass=t;delete j.extend;g=t.$inheritableStatics;if(g){for(h=0,q=g.length;h<q;h++){w=g[h];if(!x.hasOwnProperty(w)){x[w]=v[w]}}}if(t.config){n.config=Ext.Object.merge({},t.config)}else{n.config={}}if(n.$onExtended){n.$onExtended.call(x,x,j)}if(j.onClassExtended){n.$onExtended=j.onClassExtended;delete j.onClassExtended}},true);c.registerPreprocessor("statics",function(e,g){e.addStatics(g.statics);delete g.statics});c.registerPreprocessor("inheritableStatics",function(e,g){e.addInheritableStatics(g.inheritableStatics);delete g.inheritableStatics});c.registerPreprocessor("config",function(e,h){var g=e.prototype;Ext.Object.each(h.config,function(p){var k=p.charAt(0).toUpperCase()+p.substr(1),m=p,n="apply"+k,q="set"+k,j="get"+k;if(!(n in g)&&!h.hasOwnProperty(n)){h[n]=function(r){return r}}if(!(q in g)&&!h.hasOwnProperty(q)){h[q]=function(t){var r=this[n].call(this,t,this[m]);if(typeof r!="undefined"){this[m]=r}return this}}if(!(j in g)&&!h.hasOwnProperty(j)){h[j]=function(){return this[m]}}});Ext.Object.merge(g.config,h.config);delete h.config});c.registerPreprocessor("mixins",function(g,n){var e=n.mixins,j,h,k,m;delete n.mixins;Ext.Function.interceptBefore(n,"onClassCreated",function(p){if(e instanceof Array){for(k=0,m=e.length;k<m;k++){h=e[k];j=h.prototype.mixinId||h.$className;p.mixin(j,h)}}else{for(j in e){if(e.hasOwnProperty(j)){p.mixin(j,e[j])}}}})});c.setDefaultPreprocessors(["extend","statics","inheritableStatics","config","mixins"]);Ext.extend=function(g,j,h){if(arguments.length===2&&Ext.isObject(j)){h=j;j=g;g=null}var e;if(!j){Ext.Error.raise("Attempting to extend from a class which has not been loaded on the page.")}h.extend=j;h.preprocessors=["extend","statics","inheritableStatics","mixins","config"];if(g){e=new c(g,h)}else{e=new c(h)}e.prototype.override=function(n){for(var k in n){if(n.hasOwnProperty(k)){this[k]=n[k]}}};return e}})();(function(b,c){var e=Array.prototype.slice;var a=Ext.ClassManager={classes:{},existCache:{},namespaceRewrites:[{from:"Ext.",to:Ext}],maps:{alternateToName:{},aliasToName:{},nameToAliases:{}},enableNamespaceParseCache:true,namespaceParseCache:{},instantiators:[],isCreated:function(k){var j,m,h,g,n;if(this.classes.hasOwnProperty(k)||this.existCache.hasOwnProperty(k)){return true}g=Ext.global;n=this.parseNamespace(k);for(j=0,m=n.length;j<m;j++){h=n[j];if(typeof h!=="string"){g=h}else{if(!g||!g[h]){return false}g=g[h]}}Ext.Loader.historyPush(k);this.existCache[k]=true;return true},parseNamespace:function(h){var g=this.namespaceParseCache;if(this.enableNamespaceParseCache){if(g.hasOwnProperty(h)){return g[h]}}var j=[],m=this.namespaceRewrites,t,q,r,k,n,p=Ext.global;for(k=0,n=m.length;k<n;k++){t=m[k];q=t.from;r=t.to;if(h===q||h.substring(0,q.length)===q){h=h.substring(q.length);if(typeof r!=="string"){p=r}else{j=j.concat(r.split("."))}break}}j.push(p);j=j.concat(h.split("."));if(this.enableNamespaceParseCache){g[h]=j}return j},setNamespace:function(k,p){var h=Ext.global,q=this.parseNamespace(k),n=q.length-1,g=q[n],m,j;for(m=0;m<n;m++){j=q[m];if(typeof j!=="string"){h=j}else{if(!h[j]){h[j]={}}h=h[j]}}h[g]=p;return h[g]},createNamespaces:function(){var g=Ext.global,p,k,m,h,n,q;for(m=0,n=arguments.length;m<n;m++){p=this.parseNamespace(arguments[m]);for(h=0,q=p.length;h<q;h++){k=p[h];if(typeof k!=="string"){g=k}else{if(!g[k]){g[k]={}}g=g[k]}}}return g},set:function(g,j){var h=this.getName(j);this.classes[g]=this.setNamespace(g,j);if(h&&h!==g){this.maps.alternateToName[g]=h}return this},get:function(j){if(this.classes.hasOwnProperty(j)){return this.classes[j]}var g=Ext.global,n=this.parseNamespace(j),h,k,m;for(k=0,m=n.length;k<m;k++){h=n[k];if(typeof h!=="string"){g=h}else{if(!g||!g[h]){return null}g=g[h]}}return g},setAlias:function(g,h){var k=this.maps.aliasToName,m=this.maps.nameToAliases,j;if(typeof g==="string"){j=g}else{j=this.getName(g)}if(h&&k[h]!==j){k[h]=j}if(!m[j]){m[j]=[]}if(h){Ext.Array.include(m[j],h)}return this},getByAlias:function(g){return this.get(this.getNameByAlias(g))},getNameByAlias:function(g){return this.maps.aliasToName[g]||""},getNameByAlternate:function(g){return this.maps.alternateToName[g]||""},getAliasesByName:function(g){return this.maps.nameToAliases[g]||[]},getName:function(g){return g&&g.$className||""},getClass:function(g){return g&&g.self||null},create:function(j,k,g){var h=this;k.$className=j;return new b(k,function(){var v=k.postprocessors||h.defaultPostprocessors,u=h.postprocessors,p=0,n=[],m,t,q,r;delete k.postprocessors;for(q=0,r=v.length;q<r;q++){m=v[q];if(typeof m==="string"){m=u[m];if(!m.always){if(k[m.name]!==undefined){n.push(m.fn)}}else{n.push(m.fn)}}else{n.push(m)}}t=function(x,w,y){m=n[p++];if(!m){h.set(j,w);Ext.Loader.historyPush(j);if(g){g.call(w,w)}return}if(m.call(this,x,w,y,t)!==false){t.apply(this,arguments)}};t.call(h,j,this,k)})},instantiateByAlias:function(){var h=arguments[0],g=e.call(arguments),j=this.getNameByAlias(h);if(!j){j=this.maps.aliasToName[h];Ext.syncRequire(j)}g[0]=j;return this.instantiate.apply(this,g)},instantiate:function(){var j=arguments[0],h=e.call(arguments,1),k=j,m,g;if(typeof j!=="function"){g=this.get(j)}else{g=j}if(!g){m=this.getNameByAlias(j);if(m){j=m;g=this.get(j)}}if(!g){m=this.getNameByAlternate(j);if(m){j=m;g=this.get(j)}}if(!g){Ext.syncRequire(j);g=this.get(j)}return this.getInstantiator(h.length)(g,h)},dynInstantiate:function(h,g){g=Ext.Array.from(g,true);g.unshift(h);return this.instantiate.apply(this,g)},getInstantiator:function(j){if(!this.instantiators[j]){var h=j,g=[];for(h=0;h<j;h++){g.push("a["+h+"]")}this.instantiators[j]=new Function("c","a","return new c("+g.join(",")+")")}return this.instantiators[j]},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(h,j,g){this.postprocessors[h]={name:h,always:g||false,fn:j};return this},setDefaultPostprocessors:function(g){this.defaultPostprocessors=Ext.Array.from(g);return this},setDefaultPostprocessorPosition:function(h,m,k){var j=this.defaultPostprocessors,g;if(typeof m==="string"){if(m==="first"){j.unshift(h);return this}else{if(m==="last"){j.push(h);return this}}m=(m==="after")?1:-1}g=Ext.Array.indexOf(j,k);if(g!==-1){Ext.Array.splice(j,Math.max(0,g+m),0,h)}return this},getNamesByExpression:function(q){var n=this.maps.nameToAliases,r=[],g,m,j,h,t,k,p;if(q.indexOf("*")!==-1){q=q.replace(/\*/g,"(.*?)");t=new RegExp("^"+q+"$");for(g in n){if(n.hasOwnProperty(g)){j=n[g];if(g.search(t)!==-1){r.push(g)}else{for(k=0,p=j.length;k<p;k++){m=j[k];if(m.search(t)!==-1){r.push(g);break}}}}}}else{h=this.getNameByAlias(q);if(h){r.push(h)}else{h=this.getNameByAlternate(q);if(h){r.push(h)}else{r.push(q)}}}return r}};var d=a.defaultPostprocessors;a.registerPostprocessor("alias",function(j,h,n){var g=n.alias,k,m;delete n.alias;for(k=0,m=g.length;k<m;k++){c=g[k];this.setAlias(h,c)}});a.registerPostprocessor("singleton",function(h,g,k,j){j.call(this,h,new g(),k);return false});a.registerPostprocessor("alternateClassName",function(h,g,n){var k=n.alternateClassName,j,m,p;if(!(k instanceof Array)){k=[k]}for(j=0,m=k.length;j<m;j++){p=k[j];this.set(p,g)}});a.setDefaultPostprocessors(["alias","singleton","alternateClassName"]);Ext.apply(Ext,{create:c(a,"instantiate"),factory:function(p,m){if(p instanceof Array){var k,n;for(k=0,n=p.length;k<n;k++){p[k]=Ext.factory(p[k],m)}return p}var g=(typeof p==="string");if(g||(p instanceof Object&&p.constructor===Object)){var j,h={};if(g){j=p}else{j=p.className;h=p;delete h.className}if(m!==undefined&&j.indexOf(m)===-1){j=m+"."+Ext.String.capitalize(j)}return Ext.create(j,h)}if(typeof p==="function"){return Ext.create(p)}return p},widget:function(h){var g=e.call(arguments);g[0]="widget."+h;return a.instantiateByAlias.apply(a,g)},createByAlias:c(a,"instantiateByAlias"),define:function(m,n,j){if(!n.override){return a.create.apply(a,arguments)}var k=n.requires,h=n.uses,g=m;m=n.override;n=Ext.apply({},n);delete n.requires;delete n.uses;delete n.override;if(typeof k=="string"){k=[m,k]}else{if(k){k=k.slice(0);k.unshift(m)}else{k=[m]}}return a.create(g,{requires:k,uses:h,isPartial:true,constructor:function(){}},function(){var p=a.get(m);if(p.override){p.override(n)}else{p.self.override(n)}if(j){j.call(p)}})},getClassName:c(a,"getName"),getDisplayName:function(g){if(g.displayName){return g.displayName}if(g.$name&&g.$class){return Ext.getClassName(g.$class)+"#"+g.$name}if(g.$className){return g.$className}return"Anonymous"},getClass:c(a,"getClass"),namespace:c(a,"createNamespaces")});Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;b.registerPreprocessor("className",function(g,h){if(h.$className){g.$className=h.$className}},true);b.setDefaultPreprocessorPosition("className","first");b.registerPreprocessor("xtype",function(h,p){var n=Ext.Array.from(p.xtype),j="widget.",g=Ext.Array.from(p.alias),k,m,q;p.xtype=n[0];p.xtypes=n;g=p.alias=Ext.Array.from(p.alias);for(k=0,m=n.length;k<m;k++){q=n[k];g.push(j+q)}p.alias=g});b.setDefaultPreprocessorPosition("xtype","last");b.registerPreprocessor("alias",function(r,k){var g=Ext.Array.from(k.alias),j=Ext.Array.from(k.xtypes),t="widget.",q=t.length,m,p,n,h;for(m=0,p=g.length;m<p;m++){n=g[m];if(n.substring(0,q)===t){h=n.substring(q);Ext.Array.include(j,h);if(!r.xtype){r.xtype=k.xtype=h}}}k.alias=g;k.xtypes=j});b.setDefaultPreprocessorPosition("alias","last")})(Ext.Class,Ext.Function.alias);(function(c,b,a,e){var d=["extend","mixins","requires"],g;g=Ext.Loader={documentHead:typeof document!=="undefined"&&(document.head||document.getElementsByTagName("head")[0]),isLoading:false,queue:[],isFileLoaded:{},readyListeners:[],optionalRequires:[],requiresMap:{},numPendingFiles:0,numLoadedFiles:0,hasFileLoadError:false,classNameToFilePathMap:{},history:[],config:{enabled:false,disableCaching:true,disableCachingParam:"_dc",paths:{Ext:"."}},setConfig:function(h,j){if(Ext.isObject(h)&&arguments.length===1){Ext.Object.merge(this.config,h)}else{this.config[h]=(Ext.isObject(j))?Ext.Object.merge(this.config[h],j):j}return this},getConfig:function(h){if(h){return this.config[h]}return this.config},setPath:a(function(h,j){this.config.paths[h]=j;return this}),getPath:function(h){var k="",m=this.config.paths,j=this.getPrefix(h);if(j.length>0){if(j===h){return m[j]}k=m[j];h=h.substring(j.length+1)}if(k.length>0){k+="/"}return k.replace(/\/\.\//g,"/")+h.replace(/\./g,"/")+".js"},getPrefix:function(j){var m=this.config.paths,k,h="";if(m.hasOwnProperty(j)){return j}for(k in m){if(m.hasOwnProperty(k)&&k+"."===j.substring(0,k.length+1)){if(k.length>h.length){h=k}}}return h},refreshQueue:function(){var p=this.queue.length,k,n,h,m;if(p===0){this.triggerReady();return}for(k=0;k<p;k++){n=this.queue[k];if(n){m=n.requires;if(m.length>this.numLoadedFiles){continue}h=0;do{if(c.isCreated(m[h])){Ext.Array.erase(m,h,1)}else{h++}}while(h<m.length);if(n.requires.length===0){Ext.Array.erase(this.queue,k,1);n.callback.call(n.scope);this.refreshQueue();break}}}return this},injectScriptElement:function(k,n,q,m){var j=document.createElement("script"),p=this,h=function(){p.cleanupScriptElement(j);n.call(m)},r=function(){p.cleanupScriptElement(j);q.call(m)};j.type="text/javascript";j.src=k;j.onload=h;j.onerror=r;j.onreadystatechange=function(){if(this.readyState==="loaded"||this.readyState==="complete"){h()}};this.documentHead.appendChild(j);return j},cleanupScriptElement:function(h){h.onload=null;h.onreadystatechange=null;h.onerror=null;return this},loadScriptFile:function(j,t,p,w,h){var r=this,x=j+(this.getConfig("disableCaching")?("?"+this.getConfig("disableCachingParam")+"="+Ext.Date.now()):""),n=j.split("/").pop(),k=false,v,m,u;w=w||this;this.isLoading=true;if(!h){u=function(){p.call(w,"Failed loading '"+j+"', please verify that the file exists",h)};if(!Ext.isReady&&Ext.onDocumentReady){Ext.onDocumentReady(function(){r.injectScriptElement(x,t,u,w)})}else{this.injectScriptElement(x,t,u,w)}}else{if(typeof XMLHttpRequest!=="undefined"){v=new XMLHttpRequest()}else{v=new ActiveXObject("Microsoft.XMLHTTP")}try{v.open("GET",x,false);v.send(null)}catch(q){k=true}m=(v.status===1223)?204:v.status;if(!k){k=(m===0)}if(k){p.call(this,"Failed loading synchronously via XHR: '"+j+"'; It's likely that the file is either being loaded from a different domain or from the local file system whereby cross origin requests are not allowed due to security reasons. Use asynchronous loading with Ext.require instead.",h)}else{if(m>=200&&m<300){new Function(v.responseText+"\n//@ sourceURL="+n)();t.call(w)}else{p.call(this,"Failed loading synchronously via XHR: '"+j+"'; please verify that the file exists. XHR status code: "+m,h)}}v=null}},exclude:function(j){var h=this;return{require:function(n,m,k){return h.require(n,m,k,j)},syncRequire:function(n,m,k){return h.syncRequire(n,m,k,j)}}},syncRequire:function(){this.syncModeEnabled=true;this.require.apply(this,arguments);this.refreshQueue();this.syncModeEnabled=false},require:function(u,A,C,B){var p,y,k,z,w={},m=[],n=[],t,h=[],r,q,x,v;u=Ext.Array.from(u);B=Ext.Array.from(B);A=A||Ext.emptyFn;C=C||Ext.global;for(r=0,x=B.length;r<x;r++){k=B[r];if(typeof k==="string"&&k.length>0){m=c.getNamesByExpression(k);for(q=0,v=m.length;q<v;q++){w[m[q]]=true}}}for(r=0,x=u.length;r<x;r++){y=u[r];if(typeof y==="string"&&y.length>0){n=c.getNamesByExpression(y);for(q=0,v=n.length;q<v;q++){t=n[q];if(!w.hasOwnProperty(t)&&!c.isCreated(t)){Ext.Array.include(h,t)}}}}if(!this.config.enabled){if(h.length>0){Ext.Error.raise({sourceClass:"Ext.Loader",sourceMethod:"require",msg:"Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((h.length>1)?"es":"")+": "+h.join(", ")})}}if(h.length===0){A.call(C);return this}this.queue.push({requires:h,callback:A,scope:C});h=h.slice();for(r=0,x=h.length;r<x;r++){z=h[r];if(!this.isFileLoaded.hasOwnProperty(z)){this.isFileLoaded[z]=false;p=this.getPath(z);this.classNameToFilePathMap[z]=p;this.numPendingFiles++;this.loadScriptFile(p,Ext.Function.pass(this.onFileLoaded,[z,p],this),Ext.Function.pass(this.onFileLoadError,[z,p]),this,this.syncModeEnabled)}}return this},onFileLoaded:function(j,h){this.numLoadedFiles++;this.isFileLoaded[j]=true;this.numPendingFiles--;if(this.numPendingFiles===0){this.refreshQueue()}},onFileLoadError:function(k,j,h,m){this.numPendingFiles--;this.hasFileLoadError=true},addOptionalRequires:function(k){var n=this.optionalRequires,j,m,h;k=Ext.Array.from(k);for(j=0,m=k.length;j<m;j++){h=k[j];Ext.Array.include(n,h)}return this},triggerReady:function(j){var m=this.readyListeners,k,h;if(this.isLoading||j){this.isLoading=false;if(this.optionalRequires.length){k=Ext.Array.clone(this.optionalRequires);this.optionalRequires.length=0;this.require(k,Ext.Function.pass(this.triggerReady,[true],this),this);return this}while(m.length){h=m.shift();h.fn.call(h.scope);if(this.isLoading){return this}}}return this},onReady:function(m,k,n,h){var j;if(n!==false&&Ext.onDocumentReady){j=m;m=function(){Ext.onDocumentReady(j,k,h)}}if(!this.isLoading){m.call(k)}else{this.readyListeners.push({fn:m,scope:k})}},historyPush:function(h){if(h&&this.isFileLoaded.hasOwnProperty(h)){Ext.Array.include(this.history,h)}return this}};Ext.require=e(g,"require");Ext.syncRequire=e(g,"syncRequire");Ext.exclude=e(g,"exclude");Ext.onReady=function(k,j,h){g.onReady(k,j,true,h)};b.registerPreprocessor("loader",function(y,m,x){var v=this,t=[],u=c.getName(y),n,k,r,q,w,p,h;for(n=0,r=d.length;n<r;n++){p=d[n];if(m.hasOwnProperty(p)){h=m[p];if(typeof h==="string"){t.push(h)}else{if(h instanceof Array){for(k=0,q=h.length;k<q;k++){w=h[k];if(typeof w==="string"){t.push(w)}}}else{if(typeof h!="function"){for(k in h){if(h.hasOwnProperty(k)){w=h[k];if(typeof w==="string"){t.push(w)}}}}}}}}if(t.length===0){return}g.require(t,function(){for(n=0,r=d.length;n<r;n++){p=d[n];if(m.hasOwnProperty(p)){h=m[p];if(typeof h==="string"){m[p]=c.get(h)}else{if(h instanceof Array){for(k=0,q=h.length;k<q;k++){w=h[k];if(typeof w==="string"){m[p][k]=c.get(w)}}}else{if(typeof h!="function"){for(var j in h){if(h.hasOwnProperty(j)){w=h[j];if(typeof w==="string"){m[p][j]=c.get(w)}}}}}}}}x.call(v,y,m)});return false},true);b.setDefaultPreprocessorPosition("loader","after","className");c.registerPostprocessor("uses",function(m,j,r){var h=Ext.Array.from(r.uses),k=[],n,q,p;for(n=0,q=h.length;n<q;n++){p=h[n];if(typeof p==="string"){k.push(p)}}g.addOptionalRequires(k)});c.setDefaultPostprocessorPosition("uses","last")})(Ext.ClassManager,Ext.Class,Ext.Function.flexSetter,Ext.Function.alias);Ext.Error=Ext.extend(Error,{statics:{ignore:false,raise:function(a){a=a||{};if(Ext.isString(a)){a={msg:a}}var c=this.raise.caller;if(c){if(c.$name){a.sourceMethod=c.$name}if(c.$owner){a.sourceClass=c.$owner.$className}}if(Ext.Error.handle(a)!==true){var b=Ext.Error.prototype.toString.call(a);Ext.log({msg:b,level:"error",dump:a,stack:true});throw new Ext.Error(a)}},handle:function(){return Ext.Error.ignore}},name:"Ext.Error",constructor:function(a){if(Ext.isString(a)){a={msg:a}}var b=this;Ext.apply(b,a);b.message=b.message||b.msg},toString:function(){var c=this,b=c.className?c.className:"",a=c.methodName?"."+c.methodName+"(): ":"",d=c.msg||"(No description provided)";return b+a+d}});Ext.JSON=new (function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var useNative=null;return function(){if(useNative===null){useNative=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"}return useNative}}(),pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o){if(!Ext.isDefined(o)||o===null){return"null"}else{if(Ext.isArray(o)){return encodeArray(o)}else{if(Ext.isDate(o)){return Ext.JSON.encodeDate(o)}else{if(Ext.isString(o)){return encodeString(o)}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(Ext.isObject(o)){return encodeObject(o)}else{if(typeof o==="function"){return"null"}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\x0b":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeArray=function(o){var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(doEncode(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o){var a=["{",""],i;for(i in o){if(!useHasOwn||o.hasOwnProperty(i)){a.push(doEncode(i),":",doEncode(o[i]),",")}}a[a.length-1]="}";return a.join("")};this.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};this.encode=function(){var ec;return function(o){if(!ec){ec=isNative()?JSON.stringify:doEncode}return ec(o)}}();this.decode=function(){var dc;return function(json,safe){if(!dc){dc=isNative()?JSON.parse:doDecode}try{return dc(json)}catch(e){if(safe===true){return null}Ext.Error.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}}}()})();Ext.encode=Ext.JSON.encode;Ext.decode=Ext.JSON.decode;Ext.apply(Ext,{userAgent:navigator.userAgent.toLowerCase(),cache:{},idSeed:1000,windowId:"ext-window",documentId:"ext-document",isReady:false,enableGarbageCollector:true,enableListenerCollection:true,id:function(a,c){var b=this,d="";a=Ext.getDom(a,true)||{};if(a===document){a.id=b.documentId}else{if(a===window){a.id=b.windowId}}if(!a.id){if(b.isSandboxed){if(!b.uniqueGlobalNamespace){b.getUniqueGlobalNamespace()}d=b.uniqueGlobalNamespace+"-"}a.id=d+(c||"ext-gen")+(++Ext.idSeed)}return a.id},getBody:function(){return Ext.get(document.body||false)},getHead:function(){var a;return function(){if(a==undefined){a=Ext.get(document.getElementsByTagName("head")[0])}return a}}(),getDoc:function(){return Ext.get(document)},getCmp:function(a){return Ext.ComponentManager.get(a)},getOrientation:function(){return window.innerHeight>window.innerWidth?"portrait":"landscape"},destroy:function(){var c=arguments.length,b,a;for(b=0;b<c;b++){a=arguments[b];if(a){if(Ext.isArray(a)){this.destroy.apply(this,a)}else{if(Ext.isFunction(a.destroy)){a.destroy()}else{if(a.dom){a.remove()}}}}}},callback:function(d,c,b,a){if(Ext.isFunction(d)){b=b||[];c=c||window;if(a){Ext.defer(d,a,c,b)}else{d.apply(c,b)}}},htmlEncode:function(a){return Ext.String.htmlEncode(a)},htmlDecode:function(a){return Ext.String.htmlDecode(a)},urlAppend:function(a,b){if(!Ext.isEmpty(b)){return a+(a.indexOf("?")===-1?"?":"&")+b}return a}});Ext.ns=Ext.namespace;window.undefined=window.undefined;(function(){var p=function(e){return e.test(Ext.userAgent)},u=document.compatMode=="CSS1Compat",G=function(S,R){var e;return(S&&(e=R.exec(Ext.userAgent)))?parseFloat(e[1]):0},q=document.documentMode,a=p(/opera/),w=a&&p(/version\/10\.5/),L=p(/\bchrome\b/),A=p(/webkit/),c=!L&&p(/safari/),J=c&&p(/applewebkit\/4/),H=c&&p(/version\/3/),E=c&&p(/version\/4/),D=c&&p(/version\/5/),j=!a&&p(/msie/),K=j&&(p(/msie 7/)||q==7),I=j&&(p(/msie 8/)&&q!=7&&q!=9||q==8),F=j&&(p(/msie 9/)&&q!=7&&q!=8||q==9),N=j&&p(/msie 6/),b=!A&&p(/gecko/),Q=b&&p(/rv:1\.9/),P=b&&p(/rv:2\.0/),O=b&&p(/rv:5\./),z=Q&&p(/rv:1\.9\.0/),x=Q&&p(/rv:1\.9\.1/),v=Q&&p(/rv:1\.9\.2/),g=p(/windows|win32/),C=p(/macintosh|mac os x/),y=p(/linux/),k=null,m=G(true,/\bchrome\/(\d+\.\d+)/),h=G(true,/\bfirefox\/(\d+\.\d+)/),n=G(j,/msie (\d+\.\d+)/),t=G(a,/version\/(\d+\.\d+)/),d=G(c,/version\/(\d+\.\d+)/),B=G(A,/webkit\/(\d+\.\d+)/),r=/^https/i.test(window.location.protocol);try{document.execCommand("BackgroundImageCache",false,true)}catch(M){}Ext.setVersion("extjs","4.0.7");Ext.apply(Ext,{SSL_SECURE_URL:r&&j?'javascript:""':"about:blank",scopeResetCSS:Ext.buildSettings.scopeResetCSS,enableNestedListenerRemoval:false,USE_NATIVE_JSON:false,getDom:function(S,R){if(!S||!document){return null}if(S.dom){return S.dom}else{if(typeof S=="string"){var T=document.getElementById(S);if(T&&j&&R){if(S==T.getAttribute("id")){return T}else{return null}}return T}else{return S}}},removeNode:N||K?function(){var e;return function(R){if(R&&R.tagName!="BODY"){(Ext.enableNestedListenerRemoval)?Ext.EventManager.purgeElement(R):Ext.EventManager.removeAll(R);e=e||document.createElement("div");e.appendChild(R);e.innerHTML="";delete Ext.cache[R.id]}}}():function(e){if(e&&e.parentNode&&e.tagName!="BODY"){(Ext.enableNestedListenerRemoval)?Ext.EventManager.purgeElement(e):Ext.EventManager.removeAll(e);e.parentNode.removeChild(e);delete Ext.cache[e.id]}},isStrict:u,isIEQuirks:j&&!u,isOpera:a,isOpera10_5:w,isWebKit:A,isChrome:L,isSafari:c,isSafari3:H,isSafari4:E,isSafari5:D,isSafari2:J,isIE:j,isIE6:N,isIE7:K,isIE8:I,isIE9:F,isGecko:b,isGecko3:Q,isGecko4:P,isGecko5:O,isFF3_0:z,isFF3_5:x,isFF3_6:v,isFF4:4<=h&&h<5,isFF5:5<=h&&h<6,isLinux:y,isWindows:g,isMac:C,chromeVersion:m,firefoxVersion:h,ieVersion:n,operaVersion:t,safariVersion:d,webKitVersion:B,isSecure:r,BLANK_IMAGE_URL:(N||K)?"//www.sencha.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",value:function(S,e,R){return Ext.isEmpty(S,R)?e:S},escapeRe:function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},addBehaviors:function(U){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(U)})}else{var R={},T,e,S;for(e in U){if((T=e.split("@"))[1]){S=T[0];if(!R[S]){R[S]=Ext.select(S)}R[S].on(T[1],U[e])}}R=null}},getScrollbarSize:function(U){if(!Ext.isReady){return 0}if(U===true||k===null){var S=Ext.isIE9?"":Ext.baseCSSPrefix+"hide-offsets",W=Ext.getBody().createChild('<div class="'+S+'" style="width:100px;height:50px;overflow:hidden;"><div style="height:200px;"></div></div>'),V=W.child("div",true),R=V.offsetWidth;W.setStyle("overflow",(Ext.isWebKit||Ext.isGecko)?"auto":"scroll");var e=V.offsetWidth,T=R-e;W.remove();k={width:T,height:T}}return k},getScrollBarWidth:function(R){var e=Ext.getScrollbarSize(R);return e.width+2},copyTo:function(e,R,T,S){if(typeof T=="string"){T=T.split(/[,;\s]/)}Ext.each(T,function(U){if(S||R.hasOwnProperty(U)){e[U]=R[U]}},this);return e},destroyMembers:function(T){for(var S=1,R=arguments,e=R.length;S<e;S++){Ext.destroy(T[R[S]]);delete T[R[S]]}},log:Ext.emptyFn,partition:function(e,R){var S=[[],[]];Ext.each(e,function(U,V,T){S[(R&&R(U,V,T))||(!R&&U)?0:1].push(U)});return S},invoke:function(e,R){var T=[],S=Array.prototype.slice.call(arguments,2);Ext.each(e,function(U,V){if(U&&typeof U[R]=="function"){T.push(U[R].apply(U,S))}else{T.push(undefined)}});return T},zip:function(){var X=Ext.partition(arguments,function(Y){return typeof Y!="function"}),U=X[0],W=X[1][0],e=Ext.max(Ext.pluck(U,"length")),T=[];for(var V=0;V<e;V++){T[V]=[];if(W){T[V]=W.apply(W,Ext.pluck(U,V))}else{for(var S=0,R=U.length;S<R;S++){T[V].push(U[S][V])}}}return T},toSentence:function(R,e){var U=R.length;if(U<=1){return R[0]}else{var T=R.slice(0,U-1),S=R[U-1];return Ext.util.Format.format("{0} {1} {2}",T.join(", "),e||"and",S)}},useShims:N})})();Ext.application=function(a){Ext.require("Ext.app.Application");Ext.onReady(function(){Ext.create("Ext.app.Application",a)})};(function(){Ext.ns("Ext.util");Ext.util.Format={};var g=Ext.util.Format,e=/<\/?[^>]+>/gi,c=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,b=/\r?\n/g,d=/[^\d\.]/g,a;Ext.apply(g,{thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",currencyAtEnd:false,undef:function(h){return h!==undefined?h:""},defaultValue:function(j,h){return j!==undefined&&j!==""?j:h},substr:function(j,k,h){return String(j).substr(k,h)},lowercase:function(h){return String(h).toLowerCase()},uppercase:function(h){return String(h).toUpperCase()},usMoney:function(h){return g.currency(h,"$",2)},currency:function(k,n,j,h){var q="",p=",0",m=0;k=k-0;if(k<0){k=-k;q="-"}j=j||g.currencyPrecision;p+=p+(j>0?".":"");for(;m<j;m++){p+="0"}k=g.number(k,p);if((h||g.currencyAtEnd)===true){return Ext.String.format("{0}{1}{2}",q,k,n||g.currencySign)}else{return Ext.String.format("{0}{1}{2}",q,n||g.currencySign,k)}},date:function(h,j){if(!h){return""}if(!Ext.isDate(h)){h=new Date(Date.parse(h))}return Ext.Date.dateFormat(h,j||Ext.Date.defaultFormat)},dateRenderer:function(h){return function(j){return g.date(j,h)}},stripTags:function(h){return !h?h:String(h).replace(e,"")},stripScripts:function(h){return !h?h:String(h).replace(c,"")},fileSize:function(h){if(h<1024){return h+" bytes"}else{if(h<1048576){return(Math.round(((h*10)/1024))/10)+" KB"}else{return(Math.round(((h*10)/1048576))/10)+" MB"}}},math:function(){var h={};return function(k,j){if(!h[j]){h[j]=Ext.functionFactory("v","return v "+j+";")}return h[j](k)}}(),round:function(k,j){var h=Number(k);if(typeof j=="number"){j=Math.pow(10,j);h=Math.round(k*j)/j}return h},number:function(B,w){if(!w){return B}B=Ext.Number.from(B,NaN);if(isNaN(B)){return""}var D=g.thousandSeparator,t=g.decimalSeparator,C=false,u=B<0,k,h;B=Math.abs(B);if(w.substr(w.length-2)=="/i"){if(!a){a=new RegExp("[^\\d\\"+g.decimalSeparator+"]","g")}w=w.substr(0,w.length-2);C=true;k=w.indexOf(D)!=-1;h=w.replace(a,"").split(t)}else{k=w.indexOf(",")!=-1;h=w.replace(d,"").split(".")}if(1<h.length){B=B.toFixed(h[1].length)}else{if(2<h.length){}else{B=B.toFixed(0)}}var A=B.toString();h=A.split(".");if(k){var z=h[0],r=[],x=z.length,q=Math.floor(x/3),p=z.length%3||3,y;for(y=0;y<x;y+=p){if(y!==0){p=3}r[r.length]=z.substr(y,p);q-=1}A=r.join(D);if(h[1]){A+=t+h[1]}}else{if(h[1]){A=h[0]+t+h[1]}}if(u){u=A.replace(/[^1-9]/g,"")!==""}return(u?"-":"")+w.replace(/[\d,?\.?]+/,A)},numberRenderer:function(h){return function(j){return g.number(j,h)}},plural:function(h,j,k){return h+" "+(h==1?j:(k?k:j+"s"))},nl2br:function(h){return Ext.isEmpty(h)?"":h.replace(b,"<br/>")},capitalize:Ext.String.capitalize,ellipsis:Ext.String.ellipsis,format:Ext.String.format,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,trim:Ext.String.trim,parseBox:function(j){if(Ext.isNumber(j)){j=j.toString()}var k=j.split(" "),h=k.length;if(h==1){k[1]=k[2]=k[3]=k[0]}else{if(h==2){k[2]=k[0];k[3]=k[1]}else{if(h==3){k[3]=k[1]}}}return{top:parseInt(k[0],10)||0,right:parseInt(k[1],10)||0,bottom:parseInt(k[2],10)||0,left:parseInt(k[3],10)||0}},escapeRegex:function(h){return h.replace(/([\-.*+?\^${}()|\[\]\/\\])/g,"\\$1")}})})();Ext.ns("Ext.util");Ext.util.TaskRunner=function(e){e=e||10;var g=[],a=[],b=0,h=false,d=function(){h=false;clearInterval(b);b=0},j=function(){if(!h){h=true;b=setInterval(k,e)}},c=function(m){a.push(m);if(m.onStop){m.onStop.apply(m.scope||m)}},k=function(){var p=a.length,r=new Date().getTime(),v;if(p>0){for(v=0;v<p;v++){Ext.Array.remove(g,a[v])}a=[];if(g.length<1){d();return}}v=0;var u,n,q,m=g.length;for(;v<m;++v){u=g[v];n=r-u.taskRunTime;if(u.interval<=n){q=u.run.apply(u.scope||u,u.args||[++u.taskRunCount]);u.taskRunTime=r;if(q===false||u.taskRunCount===u.repeat){c(u);return}}if(u.duration&&u.duration<=(r-u.taskStartTime)){c(u)}}};this.start=function(m){g.push(m);m.taskStartTime=new Date().getTime();m.taskRunTime=0;m.taskRunCount=0;j();return m};this.stop=function(m){c(m);return m};this.stopAll=function(){d();for(var n=0,m=g.length;n<m;n++){if(g[n].onStop){g[n].onStop()}}g=[];a=[]}};Ext.TaskManager=Ext.create("Ext.util.TaskRunner");Ext.is={init:function(b){var c=this.platforms,e=c.length,d,a;b=b||window.navigator;for(d=0;d<e;d++){a=c[d];this[a.identity]=a.regex.test(b[a.property])}this.Desktop=this.Mac||this.Windows||(this.Linux&&!this.Android);this.Tablet=this.iPad;this.Phone=!this.Desktop&&!this.Tablet;this.iOS=this.iPhone||this.iPad||this.iPod;this.Standalone=!!window.navigator.standalone},platforms:[{property:"platform",regex:/iPhone/i,identity:"iPhone"},{property:"platform",regex:/iPod/i,identity:"iPod"},{property:"userAgent",regex:/iPad/i,identity:"iPad"},{property:"userAgent",regex:/Blackberry/i,identity:"Blackberry"},{property:"userAgent",regex:/Android/i,identity:"Android"},{property:"platform",regex:/Mac/i,identity:"Mac"},{property:"platform",regex:/Win/i,identity:"Windows"},{property:"platform",regex:/Linux/i,identity:"Linux"}]};Ext.is.init();Ext.supports={init:function(){var d=document,g=d.createElement("div"),b=this.tests,c=b.length,a,e;g.innerHTML=['<div style="height:30px;width:50px;">','<div style="height:20px;width:20px;"></div>',"</div>",'<div style="width: 200px; height: 200px; position: relative; padding: 5px;">','<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>',"</div>",'<div style="float:left; background-color:transparent;"></div>'].join("");d.body.appendChild(g);for(a=0;a<c;a++){e=b[a];this[e.identity]=e.fn.call(this,d,g)}d.body.removeChild(g)},CSS3BoxShadow:Ext.isDefined(document.documentElement.style.boxShadow),ClassList:!!document.documentElement.classList,OrientationChange:((typeof window.orientation!="undefined")&&("onorientationchange" in window)),DeviceMotion:("ondevicemotion" in window),Touch:("ontouchstart" in window)&&(!Ext.is.Desktop),tests:[{identity:"Transitions",fn:function(g,j){var e=["webkit","Moz","o","ms","khtml"],h="TransitionEnd",a=[e[0]+h,"transitionend",e[2]+h,e[3]+h,e[4]+h],d=e.length,c=0,b=false;j=Ext.get(j);for(;c<d;c++){if(j.getStyle(e[c]+"TransitionProperty")){Ext.supports.CSS3Prefix=e[c];Ext.supports.CSS3TransitionEnd=a[c];b=true;break}}return b}},{identity:"RightMargin",fn:function(b,c){var a=b.defaultView;return !(a&&a.getComputedStyle(c.firstChild.firstChild,null).marginRight!="0px")}},{identity:"DisplayChangeInputSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{identity:"DisplayChangeTextAreaSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{identity:"TransparentColor",fn:function(b,c,a){a=b.defaultView;return !(a&&a.getComputedStyle(c.lastChild,null).backgroundColor!="transparent")}},{identity:"ComputedStyle",fn:function(b,c,a){a=b.defaultView;return a&&a.getComputedStyle}},{identity:"Svg",fn:function(a){return !!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}},{identity:"Canvas",fn:function(a){return !!a.createElement("canvas").getContext}},{identity:"Vml",fn:function(a){var b=a.createElement("div");b.innerHTML="<!--[if vml]><br><br><![endif]-->";return(b.childNodes.length==2)}},{identity:"Float",fn:function(a,b){return !!b.lastChild.style.cssFloat}},{identity:"AudioTag",fn:function(a){return !!a.createElement("audio").canPlayType}},{identity:"History",fn:function(){return !!(window.history&&history.pushState)}},{identity:"CSS3DTransform",fn:function(){return(typeof WebKitCSSMatrix!="undefined"&&new WebKitCSSMatrix().hasOwnProperty("m41"))}},{identity:"CSS3LinearGradient",fn:function(e,h){var d="background-image:",b="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",g="linear-gradient(left top, black, white)",c="-moz-"+g,a=[d+b,d+g,d+c];h.style.cssText=a.join(";");return(""+h.style.backgroundImage).indexOf("gradient")!==-1}},{identity:"CSS3BorderRadius",fn:function(d,e){var b=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],c=false,a;for(a=0;a<b.length;a++){if(document.body.style[b[a]]!==undefined){return true}}return c}},{identity:"GeoLocation",fn:function(){return(typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined")||(typeof google!="undefined"&&typeof google.gears!="undefined")}},{identity:"MouseEnterLeave",fn:function(a,b){return("onmouseenter" in b&&"onmouseleave" in b)}},{identity:"MouseWheel",fn:function(a,b){return("onmousewheel" in b)}},{identity:"Opacity",fn:function(a,b){if(Ext.isIE6||Ext.isIE7||Ext.isIE8){return false}b.firstChild.style.cssText="opacity:0.73";return b.firstChild.style.opacity=="0.73"}},{identity:"Placeholder",fn:function(a){return"placeholder" in a.createElement("input")}},{identity:"Direct2DBug",fn:function(){return Ext.isString(document.body.style.msTransformOrigin)}},{identity:"BoundingClientRect",fn:function(a,b){return Ext.isFunction(b.getBoundingClientRect)}},{identity:"IncludePaddingInWidthCalculation",fn:function(b,c){var a=Ext.get(c.childNodes[1].firstChild);return a.getWidth()==210}},{identity:"IncludePaddingInHeightCalculation",fn:function(b,c){var a=Ext.get(c.childNodes[1].firstChild);return a.getHeight()==210}},{identity:"ArraySort",fn:function(){var b=[1,2,3,4,5].sort(function(){return 0});return b[0]===1&&b[1]===2&&b[2]===3&&b[3]===4&&b[4]===5}},{identity:"Range",fn:function(){return !!document.createRange}},{identity:"CreateContextualFragment",fn:function(){var a=Ext.supports.Range?document.createRange():false;return a&&!!a.createContextualFragment}},{identity:"WindowOnError",fn:function(){return Ext.isIE||Ext.isGecko||Ext.webKitVersion>=534.16}}]};Ext.ns("Ext.core");Ext.core.DomHelper=Ext.DomHelper=function(){var B=null,m=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,p=/^table|tbody|tr|td$/i,d=/tag|children|cn|html$/i,x=/td|tr|tbody/i,z=/end/i,v,r="afterbegin",t="afterend",c="beforebegin",u="beforeend",a="<table>",j="</table>",b=a+"<tbody>",k="</tbody>"+j,n=b+"<tr>",A="</tr>"+k;function h(F,H,G,I,E,C){F=Ext.getDom(F);var D;if(v.useDom){D=q(H,null);if(C){F.appendChild(D)}else{(E=="firstChild"?F:F.parentNode).insertBefore(D,F[E]||F)}}else{D=Ext.DomHelper.insertHtml(I,F,Ext.DomHelper.createHtml(H))}return G?Ext.get(D,true):D}function q(C,I){var D,L=document,G,J,E,K;if(Ext.isArray(C)){D=L.createDocumentFragment();for(var H=0,F=C.length;H<F;H++){q(C[H],D)}}else{if(typeof C=="string"){D=L.createTextNode(C)}else{D=L.createElement(C.tag||"div");G=!!D.setAttribute;for(J in C){if(!d.test(J)){E=C[J];if(J=="cls"){D.className=E}else{if(G){D.setAttribute(J,E)}else{D[J]=E}}}}Ext.DomHelper.applyStyles(D,C.style);if((K=C.children||C.cn)){q(K,D)}else{if(C.html){D.innerHTML=C.html}}}}if(I){I.appendChild(D)}return D}function y(H){var D="",C,G,F,I,E;if(typeof H=="string"){D=H}else{if(Ext.isArray(H)){for(E=0;E<H.length;E++){if(H[E]){D+=y(H[E])}}}else{D+="<"+(H.tag=H.tag||"div");for(C in H){G=H[C];if(!d.test(C)){if(typeof G=="object"){D+=" "+C+'="';for(F in G){D+=F+":"+G[F]+";"}D+='"'}else{D+=" "+({cls:"class",htmlFor:"for"}[C]||C)+'="'+G+'"'}}}if(m.test(H.tag)){D+="/>"}else{D+=">";if((I=H.children||H.cn)){D+=y(I)}else{if(H.html){D+=H.html}}D+="</"+H.tag+">"}}}return D}function g(J,G,F,H){B.innerHTML=[G,F,H].join("");var C=-1,E=B,D;while(++C<J){E=E.firstChild}D=E.nextSibling;if(D){var I=document.createDocumentFragment();while(E){D=E.nextSibling;I.appendChild(E);E=D}E=I}return E}function e(C,D,F,E){var G,H;B=B||document.createElement("div");if(C=="td"&&(D==r||D==u)||!x.test(C)&&(D==c||D==t)){return null}H=D==c?F:D==t?F.nextSibling:D==r?F.firstChild:null;if(D==c||D==t){F=F.parentNode}if(C=="td"||(C=="tr"&&(D==u||D==r))){G=g(4,n,E,A)}else{if((C=="tbody"&&(D==u||D==r))||(C=="tr"&&(D==c||D==t))){G=g(3,b,E,k)}else{G=g(2,a,E,j)}}F.insertBefore(G,H);return G}function w(E){var H=document.createElement("div"),C=document.createDocumentFragment(),D=0,F,G;H.innerHTML=E;G=H.childNodes;F=G.length;for(;D<F;D++){C.appendChild(G[D].cloneNode(true))}return C}v={markup:function(C){return y(C)},applyStyles:function(C,D){if(D){C=Ext.fly(C);if(typeof D=="function"){D=D.call()}if(typeof D=="string"){D=Ext.Element.parseStyles(D)}if(typeof D=="object"){C.setStyle(D)}}},insertHtml:function(H,C,I){var F={},E,J,G,K,L,D;H=H.toLowerCase();F[c]=["BeforeBegin","previousSibling"];F[t]=["AfterEnd","nextSibling"];if(C.insertAdjacentHTML){if(p.test(C.tagName)&&(D=e(C.tagName.toLowerCase(),H,C,I))){return D}F[r]=["AfterBegin","firstChild"];F[u]=["BeforeEnd","lastChild"];if((E=F[H])){C.insertAdjacentHTML(E[0],I);return C[E[1]]}}else{if(Ext.isTextNode(C)){H=H==="afterbegin"?"beforebegin":H;H=H==="beforeend"?"afterend":H}J=Ext.supports.CreateContextualFragment?C.ownerDocument.createRange():undefined;K="setStart"+(z.test(H)?"After":"Before");if(F[H]){if(J){J[K](C);L=J.createContextualFragment(I)}else{L=w(I)}C.parentNode.insertBefore(L,H==c?C:C.nextSibling);return C[(H==c?"previous":"next")+"Sibling"]}else{G=(H==r?"first":"last")+"Child";if(C.firstChild){if(J){J[K](C[G]);L=J.createContextualFragment(I)}else{L=w(I)}if(H==r){C.insertBefore(L,C.firstChild)}else{C.appendChild(L)}}else{C.innerHTML=I}return C[G]}}},insertBefore:function(C,E,D){return h(C,E,D,c)},insertAfter:function(C,E,D){return h(C,E,D,t,"nextSibling")},insertFirst:function(C,E,D){return h(C,E,D,r,"firstChild")},append:function(C,E,D){return h(C,E,D,u,"",true)},overwrite:function(C,E,D){C=Ext.getDom(C);C.innerHTML=y(E);return D?Ext.get(C.firstChild):C.firstChild},createHtml:y,createDom:q,useDom:false,createTemplate:function(D){var C=Ext.DomHelper.createHtml(D);return Ext.create("Ext.Template",C)}};return v}();Ext.ns("Ext.core");Ext.core.DomQuery=Ext.DomQuery=function(){var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,startIdRe=/^\s*\#/,isIE=window.ActiveXObject?true:false,key=30803;eval("var batch = 30803;");function child(parent,index){var i=0,n=parent.firstChild;while(n){if(n.nodeType==1){if(++i==index){return n}}n=n.nextSibling}return null}function next(n){while((n=n.nextSibling)&&n.nodeType!=1){}return n}function prev(n){while((n=n.previousSibling)&&n.nodeType!=1){}return n}function children(parent){var n=parent.firstChild,nodeIndex=-1,nextNode;while(n){nextNode=n.nextSibling;if(n.nodeType==3&&!nonSpace.test(n.nodeValue)){parent.removeChild(n)}else{n.nodeIndex=++nodeIndex}n=nextNode}return this}function byClassName(nodeSet,cls){if(!cls){return nodeSet}var result=[],ri=-1;for(var i=0,ci;ci=nodeSet[i];i++){if((" "+ci.className+" ").indexOf(cls)!=-1){result[++ri]=ci}}return result}function attrValue(n,attr){if(!n.tagName&&typeof n.length!="undefined"){n=n[0]}if(!n){return null}if(attr=="for"){return n.htmlFor}if(attr=="class"||attr=="className"){return n.className}return n.getAttribute(attr)||n[attr]}function getNodes(ns,mode,tagName){var result=[],ri=-1,cs;if(!ns){return result}tagName=tagName||"*";if(typeof ns.getElementsByTagName!="undefined"){ns=[ns]}if(!mode){for(var i=0,ni;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(var j=0,ci;ci=cs[j];j++){result[++ri]=ci}}}else{if(mode=="/"||mode==">"){var utag=tagName.toUpperCase();for(var i=0,ni,cn;ni=ns[i];i++){cn=ni.childNodes;for(var j=0,cj;cj=cn[j];j++){if(cj.nodeName==utag||cj.nodeName==tagName||tagName=="*"){result[++ri]=cj}}}}else{if(mode=="+"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(n&&(n.nodeName==utag||n.nodeName==tagName||tagName=="*")){result[++ri]=n}}}else{if(mode=="~"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)){if(n.nodeName==utag||n.nodeName==tagName||tagName=="*"){result[++ri]=n}}}}}}}return result}function concat(a,b){if(b.slice){return a.concat(b)}for(var i=0,l=b.length;i<l;i++){a[a.length]=b[i]}return a}function byTag(cs,tagName){if(cs.tagName||cs==document){cs=[cs]}if(!tagName){return cs}var result=[],ri=-1;tagName=tagName.toLowerCase();for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType==1&&ci.tagName.toLowerCase()==tagName){result[++ri]=ci}}return result}function byId(cs,id){if(cs.tagName||cs==document){cs=[cs]}if(!id){return cs}var result=[],ri=-1;for(var i=0,ci;ci=cs[i];i++){if(ci&&ci.id==id){result[++ri]=ci;return result}}return result}function byAttribute(cs,attr,value,op,custom){var result=[],ri=-1,useGetStyle=custom=="{",fn=Ext.DomQuery.operators[op],a,xml,hasXml;for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType!=1){continue}if(!hasXml){xml=Ext.DomQuery.isXml(ci);hasXml=true}if(!xml){if(useGetStyle){a=Ext.DomQuery.getStyle(ci,attr)}else{if(attr=="class"||attr=="className"){a=ci.className}else{if(attr=="for"){a=ci.htmlFor}else{if(attr=="href"){a=ci.getAttribute("href",2)}else{a=ci.getAttribute(attr)}}}}}else{a=ci.getAttribute(attr)}if((fn&&fn(a,value))||(!fn&&a)){result[++ri]=ci}}return result}function byPseudo(cs,name,value){return Ext.DomQuery.pseudos[name](cs,value)}function nodupIEXml(cs){var d=++key,r;cs[0].setAttribute("_nodup",d);r=[cs[0]];for(var i=1,len=cs.length;i<len;i++){var c=cs[i];if(!c.getAttribute("_nodup")!=d){c.setAttribute("_nodup",d);r[r.length]=c}}for(var i=0,len=cs.length;i<len;i++){cs[i].removeAttribute("_nodup")}return r}function nodup(cs){if(!cs){return[]}var len=cs.length,c,i,r=cs,cj,ri=-1;if(!len||typeof cs.nodeType!="undefined"||len==1){return cs}if(isIE&&typeof cs[0].selectSingleNode!="undefined"){return nodupIEXml(cs)}var d=++key;cs[0]._nodup=d;for(i=1;c=cs[i];i++){if(c._nodup!=d){c._nodup=d}else{r=[];for(var j=0;j<i;j++){r[++ri]=cs[j]}for(j=i+1;cj=cs[j];j++){if(cj._nodup!=d){cj._nodup=d;r[++ri]=cj}}return r}}return r}function quickDiffIEXml(c1,c2){var d=++key,r=[];for(var i=0,len=c1.length;i<len;i++){c1[i].setAttribute("_qdiff",d)}for(var i=0,len=c2.length;i<len;i++){if(c2[i].getAttribute("_qdiff")!=d){r[r.length]=c2[i]}}for(var i=0,len=c1.length;i<len;i++){c1[i].removeAttribute("_qdiff")}return r}function quickDiff(c1,c2){var len1=c1.length,d=++key,r=[];if(!len1){return c2}if(isIE&&typeof c1[0].selectSingleNode!="undefined"){return quickDiffIEXml(c1,c2)}for(var i=0;i<len1;i++){c1[i]._qdiff=d}for(var i=0,len=c2.length;i<len;i++){if(c2[i]._qdiff!=d){r[r.length]=c2[i]}}return r}function quickId(ns,mode,root,id){if(ns==root){var d=root.ownerDocument||root;return d.getElementById(id)}ns=getNodes(ns,mode,"*");return byId(ns,id)}return{getStyle:function(el,name){return Ext.fly(el).getStyle(name)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";';path=path.replace(lmode[1],"")}while(path.substr(0,1)=="/"){path=path.substr(1)}while(path&&lastPath!=path){lastPath=path;var tokenMatch=path.match(tagTokenRe);if(type=="select"){if(tokenMatch){if(tokenMatch[1]=="#"){fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");'}else{fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],"")}else{if(path.substr(0,1)!="@"){fn[fn.length]='n = getNodes(n, mode, "*");'}}}else{if(tokenMatch){if(tokenMatch[1]=="#"){fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");'}else{fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],"")}}while(!(modeMatch=path.match(modeRe))){var matched=false;for(var j=0;j<matchersLn;j++){var t=matchers[j];var m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i]});path=path.replace(m[0],"");matched=true;break}}if(!matched){}}if(modeMatch[1]){fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";';path=path.replace(modeMatch[1],"")}}fn[fn.length]="return nodup(n);\n}";eval(fn.join(""));return f},jsSelect:function(path,root,type){root=root||document;if(typeof root=="string"){root=document.getElementById(root)}var paths=path.split(","),results=[];for(var i=0,len=paths.length;i<len;i++){var subPath=paths[i].replace(trimRe,"");if(!cache[subPath]){cache[subPath]=Ext.DomQuery.compile(subPath);if(!cache[subPath]){}}var result=cache[subPath](root);if(result&&result!=document){results=results.concat(result)}}if(paths.length>1){return nodup(results)}return results},isXml:function(el){var docEl=(el?el.ownerDocument||el:0).documentElement;return docEl?docEl.nodeName!=="HTML":false},select:document.querySelectorAll?function(path,root,type){root=root||document;if(!Ext.DomQuery.isXml(root)&&!(Ext.isSafari3&&!Ext.isStrict)){try{var isDocumentRoot=root.nodeType===9,_path=path,_root=root;if(!isDocumentRoot&&path.indexOf(",")===-1&&!startIdRe.test(path)){_path="#"+Ext.id(root)+" "+path;_root=root.parentNode}return Ext.Array.toArray(_root.querySelectorAll(_path))}catch(e){}}return Ext.DomQuery.jsSelect.call(this,path,root,type)}:function(path,root,type){return Ext.DomQuery.jsSelect.call(this,path,root,type)},selectNode:function(path,root){return Ext.DomQuery.select(path,root)[0]},selectValue:function(path,root,defaultValue){path=path.replace(trimRe,"");if(!valueCache[path]){valueCache[path]=Ext.DomQuery.compile(path,"select")}var n=valueCache[path](root),v;n=n[0]?n[0]:n;if(typeof n.normalize=="function"){n.normalize()}v=(n&&n.firstChild?n.firstChild.nodeValue:null);return((v===null||v===undefined||v==="")?defaultValue:v)},selectNumber:function(path,root,defaultValue){var v=Ext.DomQuery.selectValue(path,root,defaultValue||0);return parseFloat(v)},is:function(el,ss){if(typeof el=="string"){el=document.getElementById(el)}var isArray=Ext.isArray(el),result=Ext.DomQuery.filter(isArray?el:[el],ss);return isArray?(result.length==el.length):(result.length>0)},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,"");if(!simpleCache[ss]){simpleCache[ss]=Ext.DomQuery.compile(ss,"simple")}var result=simpleCache[ss](els);return nonMatches?quickDiff(result,els):result},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,v){return a==v},"!=":function(a,v){return a!=v},"^=":function(a,v){return a&&a.substr(0,v.length)==v},"$=":function(a,v){return a&&a.substr(a.length-v.length)==v},"*=":function(a,v){return a&&a.indexOf(v)!==-1},"%=":function(a,v){return(a%v)==0},"|=":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+"-")},"~=":function(a,v){return a&&(" "+a+" ").indexOf(" "+v+" ")!=-1}},pseudos:{"first-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.previousSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"last-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"nth-child":function(c,a){var r=[],ri=-1,m=nthRe.exec(a=="even"&&"2n"||a=="odd"&&"2n+1"||!nthRe2.test(a)&&"n+"+a||a),f=(m[1]||1)-0,l=m[2]-0;for(var i=0,n;n=c[i];i++){var pn=n.parentNode;if(batch!=pn._batch){var j=0;for(var cn=pn.firstChild;cn;cn=cn.nextSibling){if(cn.nodeType==1){cn.nodeIndex=++j}}pn._batch=batch}if(f==1){if(l==0||n.nodeIndex==l){r[++ri]=n}}else{if((n.nodeIndex+l)%f==0){r[++ri]=n}}}return r},"only-child":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(!prev(ci)&&!next(ci)){r[++ri]=ci}}return r},empty:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var cns=ci.childNodes,j=0,cn,empty=true;while(cn=cns[j]){++j;if(cn.nodeType==1||cn.nodeType==3){empty=false;break}}if(empty){r[++ri]=ci}}return r},contains:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if((ci.textContent||ci.innerText||"").indexOf(v)!=-1){r[++ri]=ci}}return r},nodeValue:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.firstChild&&ci.firstChild.nodeValue==v){r[++ri]=ci}}return r},checked:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.checked==true){r[++ri]=ci}}return r},not:function(c,ss){return Ext.DomQuery.filter(c,ss,true)},any:function(c,selectors){var ss=selectors.split("|"),r=[],ri=-1,s;for(var i=0,ci;ci=c[i];i++){for(var j=0;s=ss[j];j++){if(Ext.DomQuery.is(ci,s)){r[++ri]=ci;break}}}return r},odd:function(c){return this["nth-child"](c,"odd")},even:function(c){return this["nth-child"](c,"even")},nth:function(c,a){return c[a-1]||[]},first:function(c){return c[0]||[]},last:function(c){return c[c.length-1]||[]},has:function(c,ss){var s=Ext.DomQuery.select,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(s(ss,ci).length>0){r[++ri]=ci}}return r},next:function(c,ss){var is=Ext.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=next(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},prev:function(c,ss){var is=Ext.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=prev(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r}}}}();Ext.query=Ext.DomQuery.select;(function(){var h=document,a=Ext.cache;Ext.Element=Ext.core.Element=function(n,p){var q=typeof n=="string"?h.getElementById(n):n,r;if(!q){return null}r=q.id;if(!p&&r&&a[r]){return a[r].el}this.dom=q;this.id=r||Ext.id(q)};var d=Ext.DomHelper,e=Ext.Element;e.prototype={set:function(t,p){var q=this.dom,n,r;p=(p!==false)&&!!q.setAttribute;for(n in t){if(t.hasOwnProperty(n)){r=t[n];if(n=="style"){d.applyStyles(q,r)}else{if(n=="cls"){q.className=r}else{if(p){q.setAttribute(n,r)}else{q[n]=r}}}}}return this},defaultUnit:"px",is:function(n){return Ext.DomQuery.is(this.dom,n)},focus:function(r,q){var n=this;q=q||n.dom;try{if(Number(r)){Ext.defer(n.focus,r,null,[null,q])}else{q.focus()}}catch(p){}return n},blur:function(){try{this.dom.blur()}catch(n){}return this},getValue:function(n){var p=this.dom.value;return n?parseInt(p,10):p},addListener:function(n,r,q,p){Ext.EventManager.on(this.dom,n,r,q||this,p);return this},removeListener:function(n,q,p){Ext.EventManager.un(this.dom,n,q,p||this);return this},removeAllListeners:function(){Ext.EventManager.removeAll(this.dom);return this},purgeAllListeners:function(){Ext.EventManager.purgeElement(this);return this},addUnits:function(p,n){if(Ext.isNumber(p)){return p+(n||this.defaultUnit||"px")}if(p===""||p=="auto"||p==null){return p||""}if(!j.test(p)){return p||""}return p},isBorderBox:function(){return Ext.isBorderBox||g[(this.dom.tagName||"").toLowerCase()]},remove:function(){var n=this,p=n.dom;if(p){delete n.dom;Ext.removeNode(p)}},hover:function(p,n,r,q){var t=this;t.on("mouseenter",p,r||t.dom,q);t.on("mouseleave",n,r||t.dom,q);return t},contains:function(n){return !n?false:Ext.Element.isAncestor(this.dom,n.dom?n.dom:n)},getAttributeNS:function(p,n){return this.getAttribute(n,p)},getAttribute:(Ext.isIE&&!(Ext.isIE9&&document.documentMode===9))?function(n,q){var r=this.dom,p;if(q){p=typeof r[q+":"+n];if(p!="undefined"&&p!="unknown"){return r[q+":"+n]||null}return null}if(n==="for"){n="htmlFor"}return r[n]||null}:function(n,p){var q=this.dom;if(p){return q.getAttributeNS(p,n)||q.getAttribute(p+":"+n)}return q.getAttribute(n)||q[n]||null},update:function(n){if(this.dom){this.dom.innerHTML=n}return this}};var m=e.prototype;e.addMethods=function(n){Ext.apply(m,n)};m.on=m.addListener;m.un=m.removeListener;m.clearListeners=m.removeAllListeners;m.destroy=m.remove;m.autoBoxAdjust=true;var j=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,c;e.get=function(p){var n,t,r;if(!p){return null}if(typeof p=="string"){if(!(t=h.getElementById(p))){return null}if(a[p]&&a[p].el){n=a[p].el;n.dom=t}else{n=e.addToCache(new e(t))}return n}else{if(p.tagName){if(!(r=p.id)){r=Ext.id(p)}if(a[r]&&a[r].el){n=a[r].el;n.dom=p}else{n=e.addToCache(new e(p))}return n}else{if(p instanceof e){if(p!=c){if(Ext.isIE&&(p.id==undefined||p.id=="")){p.dom=p.dom}else{p.dom=h.getElementById(p.id)||p.dom}}return p}else{if(p.isComposite){return p}else{if(Ext.isArray(p)){return e.select(p)}else{if(p==h){if(!c){var q=function(){};q.prototype=e.prototype;c=new q();c.dom=h}return c}}}}}}return null};m.getById=(!Ext.isIE6&&!Ext.isIE7&&!Ext.isIE8)?e.get:function(t){var r=this.dom,q,p,n;if(r){p=r.all[t];if(p){q=a[t];if(q&&q.el){n=q.el;n.dom=p}else{n=e.addToCache(new e(p))}return n}}return e.get(t)};e.addToCache=function(n,p){if(n){p=p||n.id;a[p]={el:n,data:{},events:{}}}return n};e.data=function(p,n,q){p=e.get(p);if(!p){return null}var r=a[p.id].data;if(arguments.length==2){return r[n]}else{return(r[n]=q)}};function k(){if(!Ext.enableGarbageCollector){clearInterval(e.collectorThreadId)}else{var n,q,u,r;for(n in a){if(!a.hasOwnProperty(n)){continue}r=a[n];if(r.skipGarbageCollection){continue}q=r.el;u=q.dom;if(!u||!u.parentNode||(!u.offsetParent&&!h.getElementById(n))){if(u&&Ext.enableListenerCollection){Ext.EventManager.removeAll(u)}delete a[n]}}if(Ext.isIE){var p={};for(n in a){if(!a.hasOwnProperty(n)){continue}p[n]=a[n]}a=Ext.cache=p}}}e.collectorThreadId=setInterval(k,30000);var b=function(){};b.prototype=e.prototype;e.Flyweight=function(n){this.dom=n};e.Flyweight.prototype=new b();e.Flyweight.prototype.isFlyweight=true;e._flyweights={};e.fly=function(q,n){var p=null;n=n||"_global";q=Ext.getDom(q);if(q){(e._flyweights[n]=e._flyweights[n]||new e.Flyweight()).dom=q;p=e._flyweights[n]}return p};Ext.get=e.get;Ext.fly=e.fly;var g=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko){g.button=1}})();Ext.Element.addMethods({findParent:function(j,h,c){var e=this.dom,a=document.body,g=0,d;h=h||50;if(isNaN(h)){d=Ext.getDom(h);h=Number.MAX_VALUE}while(e&&e.nodeType==1&&g<h&&e!=a&&e!=d){if(Ext.DomQuery.is(e,j)){return c?Ext.get(e):e}g++;e=e.parentNode}return null},findParentNode:function(d,c,a){var b=Ext.fly(this.dom.parentNode,"_internal");return b?b.findParent(d,c,a):null},up:function(b,a){return this.findParentNode(b,a,true)},select:function(a){return Ext.Element.select(a,false,this.dom)},query:function(a){return Ext.DomQuery.select(a,this.dom)},down:function(a,b){var c=Ext.DomQuery.selectNode(a,this.dom);return b?c:Ext.get(c)},child:function(a,b){var d,c=this,e;e=Ext.get(c).id;e=e.replace(/[\.:]/g,"\\$0");d=Ext.DomQuery.selectNode("#"+e+" > "+a,c.dom);return b?d:Ext.get(d)},parent:function(a,b){return this.matchNode("parentNode","parentNode",a,b)},next:function(a,b){return this.matchNode("nextSibling","nextSibling",a,b)},prev:function(a,b){return this.matchNode("previousSibling","previousSibling",a,b)},first:function(a,b){return this.matchNode("nextSibling","firstChild",a,b)},last:function(a,b){return this.matchNode("previousSibling","lastChild",a,b)},matchNode:function(b,e,a,c){if(!this.dom){return null}var d=this.dom[e];while(d){if(d.nodeType==1&&(!a||Ext.DomQuery.is(d,a))){return !c?Ext.get(d):d}d=d[b]}return null}});Ext.Element.addMethods({appendChild:function(a){return Ext.get(a).appendTo(this)},appendTo:function(a){Ext.getDom(a).appendChild(this.dom);return this},insertBefore:function(a){a=Ext.getDom(a);a.parentNode.insertBefore(this.dom,a);return this},insertAfter:function(a){a=Ext.getDom(a);a.parentNode.insertBefore(this.dom,a.nextSibling);return this},insertFirst:function(b,a){b=b||{};if(b.nodeType||b.dom||typeof b=="string"){b=Ext.getDom(b);this.dom.insertBefore(b,this.dom.firstChild);return !a?Ext.get(b):b}else{return this.createChild(b,this.dom.firstChild,a)}},insertSibling:function(e,c,d){var g=this,b,a=(c||"before").toLowerCase()=="after",h;if(Ext.isArray(e)){h=g;Ext.each(e,function(j){b=Ext.fly(h,"_internal").insertSibling(j,c,d);if(a){h=b}});return b}e=e||{};if(e.nodeType||e.dom){b=g.dom.parentNode.insertBefore(Ext.getDom(e),a?g.dom.nextSibling:g.dom);if(!d){b=Ext.get(b)}}else{if(a&&!g.dom.nextSibling){b=Ext.DomHelper.append(g.dom.parentNode,e,!d)}else{b=Ext.DomHelper[a?"insertAfter":"insertBefore"](g.dom,e,!d)}}return b},replace:function(a){a=Ext.get(a);this.insertBefore(a);a.remove();return this},replaceWith:function(a){var b=this;if(a.nodeType||a.dom||typeof a=="string"){a=Ext.get(a);b.dom.parentNode.insertBefore(a,b.dom)}else{a=Ext.DomHelper.insertBefore(b.dom,a)}delete Ext.cache[b.id];Ext.removeNode(b.dom);b.id=Ext.id(b.dom=a);Ext.Element.addToCache(b.isFlyweight?new Ext.Element(b.dom):b);return b},createChild:function(b,a,c){b=b||{tag:"div"};if(a){return Ext.DomHelper.insertBefore(a,b,c!==true)}else{return Ext.DomHelper[!this.dom.firstChild?"insertFirst":"append"](this.dom,b,c!==true)}},wrap:function(a,b){var e=Ext.DomHelper.insertBefore(this.dom,a||{tag:"div"},!b),c=e.dom||e;c.appendChild(this.dom);return e},insertHtml:function(b,c,a){var d=Ext.DomHelper.insertHtml(b,this.dom,c);return a?Ext.get(d):d}});(function(){var A=Ext.Element,D=Ext.supports,v=document.defaultView,F=/alpha\(opacity=(.*)\)/i,n=/^\s+|\s+$/g,x=/\s+/,b=/\w/g,y=/table-row|table-.*-group/,c="_internal",e="padding",d="margin",B="border",w="-left",t="-right",z="-top",r="-bottom",k="-width",u=Math,C="hidden",g="isClipped",m="overflow",q="overflow-x",p="overflow-y",E="originalClip",j={l:B+w+k,r:B+t+k,t:B+z+k,b:B+r+k},h={l:e+w,r:e+t,t:e+z,b:e+r},a={l:d+w,r:d+t,t:d+z,b:d+r},G=A.data;A.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>';A.inheritedProps={fontSize:1,fontStyle:1,opacity:1};Ext.override(A,{adjustWidth:function(H){var I=this,J=(typeof H=="number");if(J&&I.autoBoxAdjust&&!I.isBorderBox()){H-=(I.getBorderWidth("lr")+I.getPadding("lr"))}return(J&&H<0)?0:H},adjustHeight:function(H){var I=this,J=(typeof H=="number");if(J&&I.autoBoxAdjust&&!I.isBorderBox()){H-=(I.getBorderWidth("tb")+I.getPadding("tb"))}return(J&&H<0)?0:H},addCls:function(L){var M=this,I=[],N=((M.dom.className.replace(n,"")=="")?"":" "),K,H,J;if(L===undefined){return M}if(Object.prototype.toString.call(L)!=="[object Array]"){if(typeof L==="string"){L=L.replace(n,"").split(x);if(L.length===1){L=L[0];if(!M.hasCls(L)){M.dom.className+=N+L}}else{this.addCls(L)}}}else{for(K=0,H=L.length;K<H;K++){J=L[K];if(typeof J=="string"&&(" "+M.dom.className+" ").indexOf(" "+J+" ")==-1){I.push(J)}}if(I.length){M.dom.className+=N+I.join(" ")}}return M},removeCls:function(M){var N=this,L,I,H,K,J;if(M===undefined){return N}if(Object.prototype.toString.call(M)!=="[object Array]"){M=M.replace(n,"").split(x)}if(N.dom&&N.dom.className){J=N.dom.className.replace(n,"").split(x);for(L=0,H=M.length;L<H;L++){K=M[L];if(typeof K=="string"){K=K.replace(n,"");I=Ext.Array.indexOf(J,K);if(I!=-1){Ext.Array.erase(J,I,1)}}}N.dom.className=J.join(" ")}return N},radioCls:function(K){var L=this.dom.parentNode.childNodes,I,J,H;K=Ext.isArray(K)?K:[K];for(J=0,H=L.length;J<H;J++){I=L[J];if(I&&I.nodeType==1){Ext.fly(I,"_internal").removeCls(K)}}return this.addCls(K)},toggleCls:Ext.supports.ClassList?function(H){this.dom.classList.toggle(Ext.String.trim(H));return this}:function(H){return this.hasCls(H)?this.removeCls(H):this.addCls(H)},hasCls:Ext.supports.ClassList?function(I){if(!I){return false}I=I.split(x);var J=I.length,H=0;for(;H<J;H++){if(I[H]&&this.dom.classList.contains(I[H])){return true}}return false}:function(H){return H&&(" "+this.dom.className+" ").indexOf(" "+H+" ")!=-1},replaceCls:function(I,H){return this.removeCls(I).addCls(H)},isStyle:function(H,I){return this.getStyle(H)==I},getStyle:function(){return v&&v.getComputedStyle?function(N){var L=this.dom,H,K,I,M,J;if(L==document){return null}N=A.normalize(N);I=(H=L.style[N])?H:(K=v.getComputedStyle(L,""))?K[N]:null;if(N=="marginRight"&&I!="0px"&&!D.RightMargin){J=A.getRightMarginFixCleaner(L);M=this.getStyle("display");L.style.display="inline-block";I=v.getComputedStyle(L,"").marginRight;L.style.display=M;J()}if(N=="backgroundColor"&&I=="rgba(0, 0, 0, 0)"&&!D.TransparentColor){I="transparent"}return I}:function(M){var J=this.dom,H,I;if(J==document){return null}M=A.normalize(M);do{if(M=="opacity"){if(J.style.filter.match){H=J.style.filter.match(F);if(H){var L=parseFloat(H[1]);if(!isNaN(L)){return L?L/100:0}}}return 1}if(!Ext.isIE6){return J.style[M]||((I=J.currentStyle)?I[M]:null)}try{return J.style[M]||((I=J.currentStyle)?I[M]:null)}catch(K){}if(!A.inheritedProps[M]){break}J=J.parentNode}while(J);return null}}(),getColor:function(H,I,M){var K=this.getStyle(H),J=M||M===""?M:"#",L;if(!K||(/transparent|inherit/.test(K))){return I}if(/^r/.test(K)){Ext.each(K.slice(4,K.length-1).split(","),function(N){L=parseInt(N,10);J+=(L<16?"0":"")+L.toString(16)})}else{K=K.replace("#","");J+=K.length==3?K.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):K}return(J.length>5?J.toLowerCase():I)},setStyle:function(L,K){var J=this,H,I;if(!J.dom){return J}if(typeof L==="string"){H={};H[L]=K;L=H}for(I in L){if(L.hasOwnProperty(I)){K=Ext.value(L[I],"");if(I=="opacity"){J.setOpacity(K)}else{J.dom.style[A.normalize(I)]=K}}}return J},setOpacity:function(I,H){var K=this,M=K.dom,L,J;if(!K.dom){return K}J=K.dom.style;if(!H||!K.anim){if(!Ext.supports.Opacity){I=I<1?"alpha(opacity="+I*100+")":"";L=J.filter.replace(F,"").replace(n,"");J.zoom=1;J.filter=L+(L.length>0?" ":"")+I}else{J.opacity=I}}else{if(!Ext.isObject(H)){H={duration:350,easing:"ease-in"}}K.animate(Ext.applyIf({to:{opacity:I}},H))}return K},clearOpacity:function(){var H=this.dom.style;if(!Ext.supports.Opacity){if(!Ext.isEmpty(H.filter)){H.filter=H.filter.replace(F,"").replace(n,"")}}else{H.opacity=H["-moz-opacity"]=H["-khtml-opacity"]=""}return this},adjustDirect2DDimension:function(L){var J=this,M=J.dom,K=J.getStyle("display"),I=M.style.display,H=M.style.position,O=L==="width"?0:1,N;if(K==="inline"){M.style.display="inline-block"}M.style.position=K.match(y)?"absolute":"static";N=(parseFloat(J.getStyle(L))||parseFloat(M.currentStyle.msTransformOrigin.split(" ")[O])*2)%1;M.style.position=H;if(K==="inline"){M.style.display=I}return N},getHeight:function(O,J){var N=this,K=N.dom,L=Ext.isIE&&N.isStyle("display","none"),P,I,H,M;if(Ext.isIEQuirks){H=K.style;I=H.overflow;N.setStyle({overflow:"hidden"})}P=K.offsetHeight;P=u.max(P,L?0:K.clientHeight)||0;if(!L&&Ext.supports.Direct2DBug){M=N.adjustDirect2DDimension("height");if(J){P+=M}else{if(M>0&&M<0.5){P++}}}if(O){P-=(N.getBorderWidth("tb")+N.getPadding("tb"))}if(Ext.isIEQuirks){N.setStyle({overflow:I})}if(P<0){P=0}return P},getWidth:function(H,R){var O=this,L=O.dom,M=Ext.isIE&&O.isStyle("display","none"),P,J,K,I,N,Q;if(Ext.isIEQuirks){I=L.style;K=I.overflow;O.setStyle({overflow:"hidden"})}if(Ext.isOpera10_5){if(L.parentNode.currentStyle.position==="relative"){Q=L.parentNode.style.position;L.parentNode.style.position="static";J=L.offsetWidth;L.parentNode.style.position=Q}J=Math.max(J||0,L.offsetWidth)}else{if(Ext.supports.BoundingClientRect){P=L.getBoundingClientRect();J=P.right-P.left;J=R?J:Math.ceil(J)}else{J=L.offsetWidth}}J=u.max(J,M?0:L.clientWidth)||0;if(!M&&Ext.supports.Direct2DBug){N=O.adjustDirect2DDimension("width");if(R){J+=N}else{if(N>0&&N<0.5){J++}}}if(H){J-=(O.getBorderWidth("lr")+O.getPadding("lr"))}if(Ext.isIEQuirks){O.setStyle({overflow:K})}if(J<0){J=0}return J},setWidth:function(I,H){var J=this;I=J.adjustWidth(I);if(!H||!J.anim){J.dom.style.width=J.addUnits(I)}else{if(!Ext.isObject(H)){H={}}J.animate(Ext.applyIf({to:{width:I}},H))}return J},setHeight:function(H,I){var J=this;H=J.adjustHeight(H);if(!I||!J.anim){J.dom.style.height=J.addUnits(H)}else{if(!Ext.isObject(I)){I={}}J.animate(Ext.applyIf({to:{height:H}},I))}return J},getBorderWidth:function(H){return this.addStyles(H,j)},getPadding:function(H){return this.addStyles(H,h)},clip:function(){var H=this,I=H.dom;if(!G(I,g)){G(I,g,true);G(I,E,{o:H.getStyle(m),x:H.getStyle(q),y:H.getStyle(p)});H.setStyle(m,C);H.setStyle(q,C);H.setStyle(p,C)}return H},unclip:function(){var I=this,J=I.dom,H;if(G(J,g)){G(J,g,false);H=G(J,E);if(H.o){I.setStyle(m,H.o)}if(H.x){I.setStyle(q,H.x)}if(H.y){I.setStyle(p,H.y)}}return I},addStyles:function(O,N){var I=0,M=O.match(b),L=0,H=M.length,K,J;for(;L<H;L++){K=M[L];J=K&&parseInt(this.getStyle(N[K]),10);if(J){I+=u.abs(J)}}return I},margins:a,applyStyles:function(H){Ext.DomHelper.applyStyles(this.dom,H);return this},getStyles:function(){var K={},H=arguments.length,I=0,J;for(;I<H;++I){J=arguments[I];K[J]=this.getStyle(J)}return K},boxWrap:function(H){H=H||Ext.baseCSSPrefix+"box";var I=Ext.get(this.insertHtml("beforeBegin","<div class='"+H+"'>"+Ext.String.format(A.boxMarkup,H)+"</div>"));Ext.DomQuery.selectNode("."+H+"-mc",I.dom).appendChild(this.dom);return I},setSize:function(J,H,I){var K=this;if(Ext.isObject(J)){I=H;H=J.height;J=J.width}J=K.adjustWidth(J);H=K.adjustHeight(H);if(!I||!K.anim){if(!Ext.isIEQuirks&&(Ext.isIE6||Ext.isIE7)){K.dom.offsetTop}K.dom.style.width=K.addUnits(J);K.dom.style.height=K.addUnits(H)}else{if(I===true){I={}}K.animate(Ext.applyIf({to:{width:J,height:H}},I))}return K},getComputedHeight:function(){var I=this,H=Math.max(I.dom.offsetHeight,I.dom.clientHeight);if(!H){H=parseFloat(I.getStyle("height"))||0;if(!I.isBorderBox()){H+=I.getFrameWidth("tb")}}return H},getComputedWidth:function(){var I=this,H=Math.max(I.dom.offsetWidth,I.dom.clientWidth);if(!H){H=parseFloat(I.getStyle("width"))||0;if(!I.isBorderBox()){H+=I.getFrameWidth("lr")}}return H},getFrameWidth:function(I,H){return H&&this.isBorderBox()?0:(this.getPadding(I)+this.getBorderWidth(I))},addClsOnOver:function(H){var I=this.dom;this.hover(function(){Ext.fly(I,c).addCls(H)},function(){Ext.fly(I,c).removeCls(H)});return this},addClsOnFocus:function(H){var I=this,J=I.dom;I.on("focus",function(){Ext.fly(J,c).addCls(H)});I.on("blur",function(){Ext.fly(J,c).removeCls(H)});return I},addClsOnClick:function(H){var I=this.dom;this.on("mousedown",function(){Ext.fly(I,c).addCls(H);var K=Ext.getDoc(),J=function(){Ext.fly(I,c).removeCls(H);K.removeListener("mouseup",J)};K.on("mouseup",J)});return this},getViewSize:function(){var K=this,L=K.dom,I=(L==Ext.getDoc().dom||L==Ext.getBody().dom),J,M,H;if(I){H={width:A.getViewWidth(),height:A.getViewHeight()}}else{if(Ext.isIE6||Ext.isIEQuirks){J=L.style;M=J.overflow;K.setStyle({overflow:"hidden"})}H={width:L.clientWidth,height:L.clientHeight};if(Ext.isIE6||Ext.isIEQuirks){K.setStyle({overflow:M})}}return H},getStyleSize:function(){var L=this,M=document,N=this.dom,I=(N==M||N==M.body),K=N.style,H,J;if(I){return{width:A.getViewWidth(),height:A.getViewHeight()}}if(K.width&&K.width!="auto"){H=parseFloat(K.width);if(L.isBorderBox()){H-=L.getFrameWidth("lr")}}if(K.height&&K.height!="auto"){J=parseFloat(K.height);if(L.isBorderBox()){J-=L.getFrameWidth("tb")}}return{width:H||L.getWidth(true),height:J||L.getHeight(true)}},getSize:function(H){return{width:this.getWidth(H),height:this.getHeight(H)}},repaint:function(){var H=this.dom;this.addCls(Ext.baseCSSPrefix+"repaint");setTimeout(function(){Ext.fly(H).removeCls(Ext.baseCSSPrefix+"repaint")},1);return this},selectable:function(){var H=this;H.dom.unselectable="off";H.on("selectstart",function(I){I.stopPropagation();return true});H.applyStyles("-moz-user-select: text; -khtml-user-select: text;");H.removeCls(Ext.baseCSSPrefix+"unselectable");return H},unselectable:function(){var H=this;H.dom.unselectable="on";H.swallowEvent("selectstart",true);H.applyStyles("-moz-user-select:-moz-none;-khtml-user-select:none;");H.addCls(Ext.baseCSSPrefix+"unselectable");return H},getMargin:function(I){var J=this,K={t:"top",l:"left",r:"right",b:"bottom"},L={},H;if(!I){for(H in J.margins){L[K[H]]=parseFloat(J.getStyle(J.margins[H]))||0}return L}else{return J.addStyles.call(J,I,J.margins)}}})})();Ext.Element.VISIBILITY=1;Ext.Element.DISPLAY=2;Ext.Element.OFFSETS=3;Ext.Element.ASCLASS=4;Ext.Element.visibilityCls=Ext.baseCSSPrefix+"hide-nosize";Ext.Element.addMethods(function(){var e=Ext.Element,t="opacity",k="visibility",g="display",d="hidden",q="offsets",m="asclass",p="none",a="nosize",b="originalDisplay",c="visibilityMode",h="isVisible",j=e.data,n=function(v){var u=j(v,b);if(u===undefined){j(v,b,u="")}return u},r=function(v){var u=j(v,c);if(u===undefined){j(v,c,u=1)}return u};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(u){j(this.dom,c,u);return this},isVisible:function(){var u=this,w=u.dom,v=j(w,h);if(typeof v=="boolean"){return v}v=!u.isStyle(k,d)&&!u.isStyle(g,p)&&!((r(w)==e.ASCLASS)&&u.hasCls(u.visibilityCls||e.visibilityCls));j(w,h,v);return v},setVisible:function(x,u){var A=this,v,C,B,z,y=A.dom,w=r(y);if(typeof u=="string"){switch(u){case g:w=e.DISPLAY;break;case k:w=e.VISIBILITY;break;case q:w=e.OFFSETS;break;case a:case m:w=e.ASCLASS;break}A.setVisibilityMode(w);u=false}if(!u||!A.anim){if(w==e.ASCLASS){A[x?"removeCls":"addCls"](A.visibilityCls||e.visibilityCls)}else{if(w==e.DISPLAY){return A.setDisplayed(x)}else{if(w==e.OFFSETS){if(!x){if(!A.hideModeStyles){A.hideModeStyles={position:A.getStyle("position"),top:A.getStyle("top"),left:A.getStyle("left")}}A.applyStyles({position:"absolute",top:"-10000px",left:"-10000px"})}else{if(A.hideModeStyles){A.applyStyles(A.hideModeStyles||{position:"",top:"",left:""});delete A.hideModeStyles}}}else{A.fixDisplay();y.style.visibility=x?"":d}}}}else{if(x){A.setOpacity(0.01);A.setVisible(true)}if(!Ext.isObject(u)){u={duration:350,easing:"ease-in"}}A.animate(Ext.applyIf({callback:function(){x||A.setVisible(false).setOpacity(1)},to:{opacity:(x)?1:0}},u))}j(y,h,x);return A},hasMetrics:function(){var u=this.dom;return this.isVisible()||(r(u)==e.OFFSETS)||(r(u)==e.VISIBILITY)},toggle:function(u){var v=this;v.setVisible(!v.isVisible(),v.anim(u));return v},setDisplayed:function(u){if(typeof u=="boolean"){u=u?n(this.dom):p}this.setStyle(g,u);return this},fixDisplay:function(){var u=this;if(u.isStyle(g,p)){u.setStyle(k,d);u.setStyle(g,n(this.dom));if(u.isStyle(g,p)){u.setStyle(g,"block")}}},hide:function(u){if(typeof u=="string"){this.setVisible(false,u);return this}this.setVisible(false,this.anim(u));return this},show:function(u){if(typeof u=="string"){this.setVisible(true,u);return this}this.setVisible(true,this.anim(u));return this}}}());Ext.applyIf(Ext.Element.prototype,{animate:function(a){var b=this;if(!b.id){b=Ext.get(b.dom)}if(Ext.fx.Manager.hasFxBlock(b.id)){return b}Ext.fx.Manager.queueFx(Ext.create("Ext.fx.Anim",b.anim(a)));return this},anim:function(a){if(!Ext.isObject(a)){return(a)?{}:false}var b=this,c=a.duration||Ext.fx.Anim.prototype.duration,e=a.easing||"ease",d;if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));Ext.fx.Manager.setFxDefaults(b.id,{delay:0});d={target:b,remove:a.remove,alternate:a.alternate||false,duration:c,easing:e,callback:a.callback,listeners:a.listeners,iterations:a.iterations||1,scope:a.scope,block:a.block,concurrent:a.concurrent,delay:a.delay||0,paused:true,keyframes:a.keyframes,from:a.from||{},to:Ext.apply({},a)};Ext.apply(d.to,a.to);delete d.to.to;delete d.to.from;delete d.to.remove;delete d.to.alternate;delete d.to.keyframes;delete d.to.iterations;delete d.to.listeners;delete d.to.target;delete d.to.paused;delete d.to.callback;delete d.to.scope;delete d.to.duration;delete d.to.easing;delete d.to.concurrent;delete d.to.block;delete d.to.stopAnimation;delete d.to.delay;return d},slideIn:function(b,h,e){var g=this,d=g.dom.style,c,a;b=b||"t";h=h||{};c=function(){var p=this,n=h.listeners,q,j,m,k,r;if(!e){g.fixDisplay()}q=g.getBox();if((b=="t"||b=="b")&&q.height===0){q.height=g.dom.scrollHeight}else{if((b=="l"||b=="r")&&q.width===0){q.width=g.dom.scrollWidth}}j=g.getPositioning();g.setSize(q.width,q.height);k=g.wrap({style:{visibility:e?"visible":"hidden"}});k.setPositioning(j);if(k.isStyle("position","static")){k.position("relative")}g.clearPositioning("auto");k.clip();g.setStyle({visibility:"",position:"absolute"});if(e){k.setSize(q.width,q.height)}switch(b){case"t":r={from:{width:q.width+"px",height:"0px"},to:{width:q.width+"px",height:q.height+"px"}};d.bottom="0px";break;case"l":r={from:{width:"0px",height:q.height+"px"},to:{width:q.width+"px",height:q.height+"px"}};d.right="0px";break;case"r":r={from:{x:q.x+q.width,width:"0px",height:q.height+"px"},to:{x:q.x,width:q.width+"px",height:q.height+"px"}};break;case"b":r={from:{y:q.y+q.height,width:q.width+"px",height:"0px"},to:{y:q.y,width:q.width+"px",height:q.height+"px"}};break;case"tl":r={from:{x:q.x,y:q.y,width:"0px",height:"0px"},to:{width:q.width+"px",height:q.height+"px"}};d.bottom="0px";d.right="0px";break;case"bl":r={from:{x:q.x+q.width,width:"0px",height:"0px"},to:{x:q.x,width:q.width+"px",height:q.height+"px"}};d.right="0px";break;case"br":r={from:{x:q.x+q.width,y:q.y+q.height,width:"0px",height:"0px"},to:{x:q.x,y:q.y,width:q.width+"px",height:q.height+"px"}};break;case"tr":r={from:{y:q.y+q.height,width:"0px",height:"0px"},to:{y:q.y,width:q.width+"px",height:q.height+"px"}};d.bottom="0px";break}k.show();a=Ext.apply({},h);delete a.listeners;a=Ext.create("Ext.fx.Anim",Ext.applyIf(a,{target:k,duration:500,easing:"ease-out",from:e?r.to:r.from,to:e?r.from:r.to}));a.on("afteranimate",function(){if(e){g.setPositioning(j);if(h.useDisplay){g.setDisplayed(false)}else{g.hide()}}else{g.clearPositioning();g.setPositioning(j)}if(k.dom){k.dom.parentNode.insertBefore(g.dom,k.dom);k.remove()}g.setSize(q.width,q.height);p.end()});if(n){a.on(n)}};g.animate({duration:h.duration?h.duration*2:1000,listeners:{beforeanimate:{fn:c},afteranimate:{fn:function(){if(a&&a.running){a.end()}}}}});return g},slideOut:function(a,b){return this.slideIn(a,b,true)},puff:function(c){var b=this,a;c=Ext.applyIf(c||{},{easing:"ease-out",duration:500,useDisplay:false});a=function(){b.clearOpacity();b.show();var e=b.getBox(),g=b.getStyle("fontSize"),d=b.getPositioning();this.to={width:e.width*2,height:e.height*2,x:e.x-(e.width/2),y:e.y-(e.height/2),opacity:0,fontSize:"200%"};this.on("afteranimate",function(){if(b.dom){if(c.useDisplay){b.setDisplayed(false)}else{b.hide()}b.clearOpacity();b.setPositioning(d);b.setStyle({fontSize:g})}})};b.animate({duration:c.duration,easing:c.easing,listeners:{beforeanimate:{fn:a}}});return b},switchOff:function(c){var b=this,a;c=Ext.applyIf(c||{},{easing:"ease-in",duration:500,remove:false,useDisplay:false});a=function(){var h=this,g=b.getSize(),j=b.getXY(),e,d;b.clearOpacity();b.clip();d=b.getPositioning();e=Ext.create("Ext.fx.Animator",{target:b,duration:c.duration,easing:c.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:j[1]+g.height/2},100:{width:1,x:j[0]+g.width/2}}});e.on("afteranimate",function(){if(c.useDisplay){b.setDisplayed(false)}else{b.hide()}b.clearOpacity();b.setPositioning(d);b.setSize(g);h.end()})};b.animate({duration:(c.duration*2),listeners:{beforeanimate:{fn:a}}});return b},frame:function(a,d,e){var c=this,b;a=a||"#C3DAF9";d=d||1;e=e||{};b=function(){c.show();var j=this,k=c.getBox(),h=Ext.getBody().createChild({style:{position:"absolute","pointer-events":"none","z-index":35000,border:"0px solid "+a}}),g;g=Ext.create("Ext.fx.Anim",{target:h,duration:e.duration||1000,iterations:d,from:{top:k.y,left:k.x,borderWidth:0,opacity:1,height:k.height,width:k.width},to:{top:k.y-20,left:k.x-20,borderWidth:10,opacity:0,height:k.height+40,width:k.width+40}});g.on("afteranimate",function(){h.remove();j.end()})};c.animate({duration:(e.duration*2)||2000,listeners:{beforeanimate:{fn:b}}});return c},ghost:function(a,d){var c=this,b;a=a||"b";b=function(){var h=c.getWidth(),g=c.getHeight(),j=c.getXY(),e=c.getPositioning(),k={opacity:0};switch(a){case"t":k.y=j[1]-g;break;case"l":k.x=j[0]-h;break;case"r":k.x=j[0]+h;break;case"b":k.y=j[1]+g;break;case"tl":k.x=j[0]-h;k.y=j[1]-g;break;case"bl":k.x=j[0]-h;k.y=j[1]+g;break;case"br":k.x=j[0]+h;k.y=j[1]+g;break;case"tr":k.x=j[0]+h;k.y=j[1]-g;break}this.to=k;this.on("afteranimate",function(){if(c.dom){c.hide();c.clearOpacity();c.setPositioning(e)}})};c.animate(Ext.applyIf(d||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:{fn:b}}}));return c},highlight:function(d,b){var j=this,e=j.dom,m={},h,n,g,c,a,k;b=b||{};c=b.listeners||{};g=b.attr||"backgroundColor";m[g]=d||"ffff9c";if(!b.to){n={};n[g]=b.endColor||j.getColor(g,"ffffff","")}else{n=b.to}b.listeners=Ext.apply(Ext.apply({},c),{beforeanimate:function(){h=e.style[g];j.clearOpacity();j.show();a=c.beforeanimate;if(a){k=a.fn||a;return k.apply(a.scope||c.scope||window,arguments)}},afteranimate:function(){if(e){e.style[g]=h}a=c.afteranimate;if(a){k=a.fn||a;k.apply(a.scope||c.scope||window,arguments)}}});j.animate(Ext.apply({},b,{duration:1000,easing:"ease-in",from:m,to:n}));return j},pause:function(a){var b=this;Ext.fx.Manager.setFxDefaults(b.id,{delay:a});return b},fadeIn:function(a){this.animate(Ext.apply({},a,{opacity:1}));return this},fadeOut:function(a){this.animate(Ext.apply({},a,{opacity:0}));return this},scale:function(a,b,c){this.animate(Ext.apply({},c,{width:a,height:b}));return this},shift:function(a){this.animate(a);return this}});Ext.applyIf(Ext.Element,{unitRe:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,camelRe:/(-[a-z])/gi,opacityRe:/alpha\(opacity=(.*)\)/i,cssRe:/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,propertyCache:{},defaultUnit:"px",borders:{l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},paddings:{l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},margins:{l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"},addUnits:Ext.Element.prototype.addUnits,parseBox:function(b){if(Ext.isObject(b)){return{top:b.top||0,right:b.right||0,bottom:b.bottom||0,left:b.left||0}}else{if(typeof b!="string"){b=b.toString()}var c=b.split(" "),a=c.length;if(a==1){c[1]=c[2]=c[3]=c[0]}else{if(a==2){c[2]=c[0];c[3]=c[1]}else{if(a==3){c[3]=c[1]}}}return{top:parseFloat(c[0])||0,right:parseFloat(c[1])||0,bottom:parseFloat(c[2])||0,left:parseFloat(c[3])||0}}},unitizeBox:function(c,b){var a=this.addUnits,d=this.parseBox(c);return a(d.top,b)+" "+a(d.right,b)+" "+a(d.bottom,b)+" "+a(d.left,b)},camelReplaceFn:function(b,c){return c.charAt(1).toUpperCase()},normalize:function(a){if(a=="float"){a=Ext.supports.Float?"cssFloat":"styleFloat"}return this.propertyCache[a]||(this.propertyCache[a]=a.replace(this.camelRe,this.camelReplaceFn))},getDocumentHeight:function(){return Math.max(!Ext.isStrict?document.body.scrollHeight:document.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?document.body.scrollWidth:document.documentElement.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return window.innerHeight},getViewportWidth:function(){return window.innerWidth},getViewSize:function(){return{width:window.innerWidth,height:window.innerHeight}},getOrientation:function(){if(Ext.supports.OrientationChange){return(window.orientation==0)?"portrait":"landscape"}return(window.innerHeight>window.innerWidth)?"portrait":"landscape"},fromPoint:function(a,b){return Ext.get(document.elementFromPoint(a,b))},parseStyles:function(c){var a={},b=this.cssRe,d;if(c){b.lastIndex=0;while((d=b.exec(c))){a[d[1]]=d[2]}}return a}});Ext.CompositeElementLite=function(b,a){this.elements=[];this.add(b,a);this.el=new Ext.Element.Flyweight()};Ext.CompositeElementLite.prototype={isComposite:true,getElement:function(a){var b=this.el;b.dom=a;b.id=a.id;return b},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(d,b){var e=this,g=e.elements;if(!d){return this}if(typeof d=="string"){d=Ext.Element.selectorFunction(d,b)}else{if(d.isComposite){d=d.elements}else{if(!Ext.isIterable(d)){d=[d]}}}for(var c=0,a=d.length;c<a;++c){g.push(e.transformElement(d[c]))}return e},invoke:function(g,b){var h=this,d=h.elements,a=d.length,j,c;for(c=0;c<a;c++){j=d[c];if(j){Ext.Element.prototype[g].apply(h.getElement(j),b)}}return h},item:function(b){var d=this,c=d.elements[b],a=null;if(c){a=d.getElement(c)}return a},addListener:function(b,j,h,g){var d=this.elements,a=d.length,c,k;for(c=0;c<a;c++){k=d[c];if(k){Ext.EventManager.on(k,b,j,h||k,g)}}return this},each:function(g,d){var h=this,c=h.elements,a=c.length,b,j;for(b=0;b<a;b++){j=c[b];if(j){j=this.getElement(j);if(g.call(d||j,j,h,b)===false){break}}}return h},fill:function(a){var b=this;b.elements=[];b.add(a);return b},filter:function(a){var b=[],d=this,c=Ext.isFunction(a)?a:function(e){return e.is(a)};d.each(function(h,e,g){if(c(h,g)!==false){b[b.length]=d.transformElement(h)}});d.elements=b;return d},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(e,c,a){var b=!isNaN(e)?e:this.indexOf(e),g;if(b>-1){c=Ext.getDom(c);if(a){g=this.elements[b];g.parentNode.insertBefore(c,g);Ext.removeNode(g)}Ext.Array.splice(this.elements,b,1,c)}return this},clear:function(){this.elements=[]}};Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;Ext.CompositeElementLite.importElementMethods=function(){var c,b=Ext.Element.prototype,a=Ext.CompositeElementLite.prototype;for(c in b){if(typeof b[c]=="function"){(function(d){a[d]=a[d]||function(){return this.invoke(d,arguments)}}).call(a,c)}}};Ext.CompositeElementLite.importElementMethods();if(Ext.DomQuery){Ext.Element.selectorFunction=Ext.DomQuery.select}Ext.Element.select=function(a,b){var c;if(typeof a=="string"){c=Ext.Element.selectorFunction(a,b)}else{if(a.length!==undefined){c=a}else{}}return new Ext.CompositeElementLite(c)};Ext.select=Ext.Element.select;Ext.util.DelayedTask=function(d,c,a){var e=this,g,b=function(){clearInterval(g);g=null;d.apply(c,a||[])};this.delay=function(j,m,k,h){e.cancel();d=m||d;c=k||c;a=h||a;g=setInterval(b,j)};this.cancel=function(){if(g){clearInterval(g);g=null}}};Ext.require("Ext.util.DelayedTask",function(){Ext.util.Event=Ext.extend(Object,(function(){function b(e,g,h,d){g.task=new Ext.util.DelayedTask();return function(){g.task.delay(h.buffer,e,d,Ext.Array.toArray(arguments))}}function a(e,g,h,d){return function(){var j=new Ext.util.DelayedTask();if(!g.tasks){g.tasks=[]}g.tasks.push(j);j.delay(h.delay||10,e,d,Ext.Array.toArray(arguments))}}function c(e,g,h,d){return function(){g.ev.removeListener(g.fn,d);return e.apply(d,arguments)}}return{isEvent:true,constructor:function(e,d){this.name=d;this.observable=e;this.listeners=[]},addListener:function(g,e,d){var h=this,j;e=e||h.observable;if(!h.isListening(g,e)){j=h.createListener(g,e,d);if(h.firing){h.listeners=h.listeners.slice(0)}h.listeners.push(j)}},createListener:function(g,e,j){j=j||{};e=e||this.observable;var h={fn:g,scope:e,o:j,ev:this},d=g;if(j.single){d=c(d,h,j,e)}if(j.delay){d=a(d,h,j,e)}if(j.buffer){d=b(d,h,j,e)}h.fireFn=d;return h},findListener:function(j,h){var g=this.listeners,d=g.length,k,e;while(d--){k=g[d];if(k){e=k.scope;if(k.fn==j&&(e==h||e==this.observable)){return d}}}return -1},isListening:function(e,d){return this.findListener(e,d)!==-1},removeListener:function(h,g){var j=this,e,m,d;e=j.findListener(h,g);if(e!=-1){m=j.listeners[e];if(j.firing){j.listeners=j.listeners.slice(0)}if(m.task){m.task.cancel();delete m.task}d=m.tasks&&m.tasks.length;if(d){while(d--){m.tasks[d].cancel()}delete m.tasks}Ext.Array.erase(j.listeners,e,1);return true}return false},clearListeners:function(){var e=this.listeners,d=e.length;while(d--){this.removeListener(e[d].fn,e[d].scope)}},fire:function(){var j=this,g=j.listeners,h=g.length,e,d,k;if(h>0){j.firing=true;for(e=0;e<h;e++){k=g[e];d=arguments.length?Array.prototype.slice.call(arguments,0):[];if(k.o){d.push(k.o)}if(k&&k.fireFn.apply(k.scope||j.observable,d)===false){return(j.firing=false)}}}j.firing=false;return true}}})())});Ext.EventManager={hasBoundOnReady:false,hasFiredReady:false,readyTimeout:null,hasOnReadyStateChange:false,readyEvent:new Ext.util.Event(),checkReadyState:function(){var a=Ext.EventManager;if(window.attachEvent){if(window!=top){return false}try{document.documentElement.doScroll("left")}catch(b){return false}a.fireDocReady();return true}if(document.readyState=="complete"){a.fireDocReady();return true}a.readyTimeout=setTimeout(arguments.callee,2);return false},bindReadyEvent:function(){var a=Ext.EventManager;if(a.hasBoundOnReady){return}if(document.addEventListener){document.addEventListener("DOMContentLoaded",a.fireDocReady,false);window.addEventListener("load",a.fireDocReady,false)}else{if(!a.checkReadyState()){document.attachEvent("onreadystatechange",a.checkReadyState);a.hasOnReadyStateChange=true}window.attachEvent("onload",a.fireDocReady,false)}a.hasBoundOnReady=true},fireDocReady:function(){var a=Ext.EventManager;if(!a.hasFiredReady){a.hasFiredReady=true;if(document.addEventListener){document.removeEventListener("DOMContentLoaded",a.fireDocReady,false);window.removeEventListener("load",a.fireDocReady,false)}else{if(a.readyTimeout!==null){clearTimeout(a.readyTimeout)}if(a.hasOnReadyStateChange){document.detachEvent("onreadystatechange",a.checkReadyState)}window.detachEvent("onload",a.fireDocReady)}Ext.supports.init()}if(!Ext.isReady){Ext.isReady=true;a.onWindowUnload();a.readyEvent.fire()}},onDocumentReady:function(c,b,a){a=a||{};var d=Ext.EventManager,e=d.readyEvent;a.single=true;if(Ext.isReady){e.addListener(c,b,a);e.fire()}else{a.delay=a.delay||1;e.addListener(c,b,a);d.bindReadyEvent()}},stoppedMouseDownEvent:new Ext.util.Event(),propRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|freezeEvent)$/,getId:function(a){var b=false,c;a=Ext.getDom(a);if(a===document||a===window){c=a===document?Ext.documentId:Ext.windowId}else{c=Ext.id(a)}if(a&&(a.getElementById||a.navigator)){b=true}if(!Ext.cache[c]){Ext.Element.addToCache(new Ext.Element(a),c);if(b){Ext.cache[c].skipGarbageCollection=true}}return c},prepareListenerConfig:function(d,b,h){var e=this,j=e.propRe,c,g,a;for(c in b){if(b.hasOwnProperty(c)){if(!j.test(c)){g=b[c];if(Ext.isFunction(g)){a=[d,c,g,b.scope,b]}else{a=[d,c,g.fn,g.scope,g]}if(h===true){e.removeListener.apply(this,a)}else{e.addListener.apply(e,a)}}}}},normalizeEvent:function(a,b){if(/mouseenter|mouseleave/.test(a)&&!Ext.supports.MouseEnterLeave){if(b){b=Ext.Function.createInterceptor(b,this.contains,this)}a=a=="mouseenter"?"mouseover":"mouseout"}else{if(a=="mousewheel"&&!Ext.supports.MouseWheel&&!Ext.isOpera){a="DOMMouseScroll"}}return{eventName:a,fn:b}},contains:function(b){var a=b.browserEvent.currentTarget,c=this.getRelatedTarget(b);if(a&&a.firstChild){while(c){if(c===a){return false}c=c.parentNode;if(c&&(c.nodeType!=1)){c=null}}}return true},addListener:function(c,a,g,e,b){if(typeof a!=="string"){this.prepareListenerConfig(c,a);return}var h=Ext.getDom(c),j,d;b=b||{};j=this.normalizeEvent(a,g);d=this.createListenerWrap(h,a,j.fn,e,b);if(h.attachEvent){h.attachEvent("on"+j.eventName,d)}else{h.addEventListener(j.eventName,d,b.capture||false)}if(h==document&&a=="mousedown"){this.stoppedMouseDownEvent.addListener(d)}this.getEventListenerCache(h,a).push({fn:g,wrap:d,scope:e})},removeListener:function(h,m,n,q){if(typeof m!=="string"){this.prepareListenerConfig(h,m,true);return}var g=Ext.getDom(h),a=this.getEventListenerCache(g,m),p=this.normalizeEvent(m).eventName,k=a.length,e,c,b,d;while(k--){c=a[k];if(c&&(!n||c.fn==n)&&(!q||c.scope===q)){b=c.wrap;if(b.task){clearTimeout(b.task);delete b.task}e=b.tasks&&b.tasks.length;if(e){while(e--){clearTimeout(b.tasks[e])}delete b.tasks}if(g.detachEvent){g.detachEvent("on"+p,b)}else{g.removeEventListener(p,b,false)}if(b&&g==document&&m=="mousedown"){this.stoppedMouseDownEvent.removeListener(b)}Ext.Array.erase(a,k,1)}}},removeAll:function(b){var d=Ext.getDom(b),a,c;if(!d){return}a=this.getElementEventCache(d);for(c in a){if(a.hasOwnProperty(c)){this.removeListener(d,c)}}Ext.cache[d.id].events={}},purgeElement:function(d,b){var e=Ext.getDom(d),c=0,a;if(b){this.removeListener(e,b)}else{this.removeAll(e)}if(e&&e.childNodes){for(a=d.childNodes.length;c<a;c++){this.purgeElement(d.childNodes[c],b)}}},createListenerWrap:function(j,b,e,d,a){a=a||{};var g,h;return function c(m,k){if(!h){g=["if(!Ext) {return;}"];if(a.buffer||a.delay||a.freezeEvent){g.push("e = new Ext.EventObjectImpl(e, "+(a.freezeEvent?"true":"false")+");")}else{g.push("e = Ext.EventObject.setEvent(e);")}if(a.delegate){g.push('var t = e.getTarget("'+a.delegate+'", this);');g.push("if(!t) {return;}")}else{g.push("var t = e.target;")}if(a.target){g.push("if(e.target !== options.target) {return;}")}if(a.stopEvent){g.push("e.stopEvent();")}else{if(a.preventDefault){g.push("e.preventDefault();")}if(a.stopPropagation){g.push("e.stopPropagation();")}}if(a.normalized===false){g.push("e = e.browserEvent;")}if(a.buffer){g.push("(wrap.task && clearTimeout(wrap.task));");g.push("wrap.task = setTimeout(function(){")}if(a.delay){g.push("wrap.tasks = wrap.tasks || [];");g.push("wrap.tasks.push(setTimeout(function(){")}g.push("fn.call(scope || dom, e, t, options);");if(a.single){g.push("Ext.EventManager.removeListener(dom, ename, fn, scope);")}if(a.delay){g.push("}, "+a.delay+"));")}if(a.buffer){g.push("}, "+a.buffer+");")}h=Ext.functionFactory("e","options","fn","scope","ename","dom","wrap","args",g.join("\n"))}h.call(j,m,a,e,d,b,j,c,k)}},getEventListenerCache:function(c,a){if(!c){return[]}var b=this.getElementEventCache(c);return b[a]||(b[a]=[])},getElementEventCache:function(b){if(!b){return{}}var a=Ext.cache[this.getId(b)];return a.events||(a.events={})},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,stopEvent:function(a){this.stopPropagation(a);this.preventDefault(a)},stopPropagation:function(a){a=a.browserEvent||a;if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}},preventDefault:function(a){a=a.browserEvent||a;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false;try{if(a.ctrlKey||a.keyCode>111&&a.keyCode<124){a.keyCode=-1}}catch(b){}}},getRelatedTarget:function(a){a=a.browserEvent||a;var b=a.relatedTarget;if(!b){if(this.mouseLeaveRe.test(a.type)){b=a.toElement}else{if(this.mouseEnterRe.test(a.type)){b=a.fromElement}}}return this.resolveTextNode(b)},getPageX:function(a){return this.getXY(a)[0]},getPageY:function(a){return this.getXY(a)[1]},getPageXY:function(c){c=c.browserEvent||c;var b=c.pageX,e=c.pageY,d=document.documentElement,a=document.body;if(!b&&b!==0){b=c.clientX+(d&&d.scrollLeft||a&&a.scrollLeft||0)-(d&&d.clientLeft||a&&a.clientLeft||0);e=c.clientY+(d&&d.scrollTop||a&&a.scrollTop||0)-(d&&d.clientTop||a&&a.clientTop||0)}return[b,e]},getTarget:function(a){a=a.browserEvent||a;return this.resolveTextNode(a.target||a.srcElement)},resolveTextNode:Ext.isGecko?function(b){if(!b){return}var a=HTMLElement.prototype.toString.call(b);if(a=="[xpconnect wrapped native prototype]"||a=="[object XULElement]"){return}return b.nodeType==3?b.parentNode:b}:function(a){return a&&a.nodeType==3?a.parentNode:a},curWidth:0,curHeight:0,onWindowResize:function(d,c,b){var a=this.resizeEvent;if(!a){this.resizeEvent=a=new Ext.util.Event();this.on(window,"resize",this.fireResize,this,{buffer:100})}a.addListener(d,c,b)},fireResize:function(){var c=this,a=Ext.Element.getViewWidth(),b=Ext.Element.getViewHeight();if(c.curHeight!=b||c.curWidth!=a){c.curHeight=b;c.curWidth=a;c.resizeEvent.fire(a,b)}},removeResizeListener:function(b,a){if(this.resizeEvent){this.resizeEvent.removeListener(b,a)}},onWindowUnload:function(){var a=this.unloadEvent;if(!a){this.unloadEvent=a=new Ext.util.Event();this.addListener(window,"unload",this.fireUnload,this)}},fireUnload:function(){try{this.removeUnloadListener();if(Ext.isGecko3){var h=Ext.ComponentQuery.query("gridview"),b=0,d=h.length;for(;b<d;b++){h[b].scrollToTop()}}var c,a=Ext.cache;for(c in a){if(a.hasOwnProperty(c)){Ext.EventManager.removeAll(c)}}}catch(g){}},removeUnloadListener:function(){if(this.unloadEvent){this.removeListener(window,"unload",this.fireUnload)}},useKeyDown:Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||Ext.isOpera),getKeyEvent:function(){return this.useKeyDown?"keydown":"keypress"}};Ext.onReady=function(c,b,a){Ext.Loader.onReady(c,b,true,a)};Ext.onDocumentReady=Ext.EventManager.onDocumentReady;Ext.EventManager.on=Ext.EventManager.addListener;Ext.EventManager.un=Ext.EventManager.removeListener;(function(){var a=function(){var g=document.body||document.getElementsByTagName("body")[0],e=Ext.baseCSSPrefix,c=[e+"body"],b=[],d;if(!g){return false}d=g.parentNode;function h(j){c.push(e+j)}if(Ext.isIE){h("ie");if(Ext.isIE6){h("ie6")}else{h("ie7p");if(Ext.isIE7){h("ie7")}else{h("ie8p");if(Ext.isIE8){h("ie8")}else{h("ie9p");if(Ext.isIE9){h("ie9")}}}}if(Ext.isIE6||Ext.isIE7){h("ie7m")}if(Ext.isIE6||Ext.isIE7||Ext.isIE8){h("ie8m")}if(Ext.isIE7||Ext.isIE8){h("ie78")}}if(Ext.isGecko){h("gecko");if(Ext.isGecko3){h("gecko3")}if(Ext.isGecko4){h("gecko4")}if(Ext.isGecko5){h("gecko5")}}if(Ext.isOpera){h("opera")}if(Ext.isWebKit){h("webkit")}if(Ext.isSafari){h("safari");if(Ext.isSafari2){h("safari2")}if(Ext.isSafari3){h("safari3")}if(Ext.isSafari4){h("safari4")}if(Ext.isSafari5){h("safari5")}}if(Ext.isChrome){h("chrome")}if(Ext.isMac){h("mac")}if(Ext.isLinux){h("linux")}if(!Ext.supports.CSS3BorderRadius){h("nbr")}if(!Ext.supports.CSS3LinearGradient){h("nlg")}if(!Ext.scopeResetCSS){h("reset")}if(d){if(Ext.isStrict&&(Ext.isIE6||Ext.isIE7)){Ext.isBorderBox=false}else{Ext.isBorderBox=true}b.push(e+(Ext.isBorderBox?"border-box":"strict"));if(!Ext.isStrict){b.push(e+"quirks")}Ext.fly(d,"_internal").addCls(b)}Ext.fly(g,"_internal").addCls(c);return true};Ext.onReady(a)})();Ext.define("Ext.EventObjectImpl",{uses:["Ext.util.Point"],BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(function(){var a;if(Ext.isGecko){a=3}else{if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){a=120}else{a=12}a*=3}else{a=120}}return a})(),clickRe:/(dbl)?click/,safariKeys:{3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},btnMap:Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2},constructor:function(a,b){if(a){this.setEvent(a.browserEvent||a,b)}},setEvent:function(d,e){var c=this,b,a;if(d==c||(d&&d.browserEvent)){return d}c.browserEvent=d;if(d){b=d.button?c.btnMap[d.button]:(d.which?d.which-1:-1);if(c.clickRe.test(d.type)&&b==-1){b=0}a={type:d.type,button:b,shiftKey:d.shiftKey,ctrlKey:d.ctrlKey||d.metaKey||false,altKey:d.altKey,keyCode:d.keyCode,charCode:d.charCode,target:Ext.EventManager.getTarget(d),relatedTarget:Ext.EventManager.getRelatedTarget(d),currentTarget:d.currentTarget,xy:(e?c.getXY():null)}}else{a={button:-1,shiftKey:false,ctrlKey:false,altKey:false,keyCode:0,charCode:0,target:null,xy:[0,0]}}Ext.apply(c,a);return c},stopEvent:function(){this.stopPropagation();this.preventDefault()},preventDefault:function(){if(this.browserEvent){Ext.EventManager.preventDefault(this.browserEvent)}},stopPropagation:function(){var a=this.browserEvent;if(a){if(a.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(this)}Ext.EventManager.stopPropagation(a)}},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(a){return Ext.isWebKit?(this.safariKeys[a]||a):a},getPageX:function(){return this.getX()},getPageY:function(){return this.getY()},getX:function(){return this.getXY()[0]},getY:function(){return this.getXY()[1]},getXY:function(){if(!this.xy){this.xy=Ext.EventManager.getPageXY(this.browserEvent)}return this.xy},getTarget:function(b,c,a){if(b){return Ext.fly(this.target).findParent(b,c,a)}return a?Ext.get(this.target):this.target},getRelatedTarget:function(b,c,a){if(b){return Ext.fly(this.relatedTarget).findParent(b,c,a)}return a?Ext.get(this.relatedTarget):this.relatedTarget},correctWheelDelta:function(c){var b=this.WHEEL_SCALE,a=Math.round(c/b);if(!a&&c){a=(c<0)?-1:1}return a},getWheelDeltas:function(){var d=this,c=d.browserEvent,b=0,a=0;if(Ext.isDefined(c.wheelDeltaX)){b=c.wheelDeltaX;a=c.wheelDeltaY}else{if(c.wheelDelta){a=c.wheelDelta}else{if(c.detail){a=-c.detail;if(a>100){a=3}else{if(a<-100){a=-3}}if(Ext.isDefined(c.axis)&&c.axis===c.HORIZONTAL_AXIS){b=a;a=0}}}}return{x:d.correctWheelDelta(b),y:d.correctWheelDelta(a)}},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},within:function(d,e,b){if(d){var c=e?this.getRelatedTarget():this.getTarget(),a;if(c){a=Ext.fly(d).contains(c);if(!a&&b){a=c==Ext.getDom(d)}return a}}return false},isNavKeyPress:function(){var b=this,a=this.normalizeKey(b.keyCode);return(a>=33&&a<=40)||a==b.RETURN||a==b.TAB||a==b.ESC},isSpecialKey:function(){var a=this.normalizeKey(this.keyCode);return(this.type=="keypress"&&this.ctrlKey)||this.isNavKeyPress()||(a==this.BACKSPACE)||(a>=16&&a<=20)||(a>=44&&a<=46)},getPoint:function(){var a=this.getXY();return Ext.create("Ext.util.Point",a[0],a[1])},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey||this.metaKey},injectEvent:function(){var d,e={};if(!Ext.isIE&&document.createEvent){d={createHtmlEvent:function(m,j,h,g){var k=m.createEvent("HTMLEvents");k.initEvent(j,h,g);return k},createMouseEvent:function(y,w,p,n,r,m,j,k,g,v,u,q,t){var h=y.createEvent("MouseEvents"),x=y.defaultView||window;if(h.initMouseEvent){h.initMouseEvent(w,p,n,x,r,m,j,m,j,k,g,v,u,q,t)}else{h=y.createEvent("UIEvents");h.initEvent(w,p,n);h.view=x;h.detail=r;h.screenX=m;h.screenY=j;h.clientX=m;h.clientY=j;h.ctrlKey=k;h.altKey=g;h.metaKey=u;h.shiftKey=v;h.button=q;h.relatedTarget=t}return h},createUIEvent:function(p,m,j,h,k){var n=p.createEvent("UIEvents"),g=p.defaultView||window;n.initUIEvent(m,j,h,g,k);return n},fireEvent:function(j,g,h){j.dispatchEvent(h)},fixTarget:function(g){if(g==window&&!g.dispatchEvent){return document}return g}}}else{if(document.createEventObject){var c={0:1,1:4,2:2};d={createHtmlEvent:function(m,j,h,g){var k=m.createEventObject();k.bubbles=h;k.cancelable=g;return k},createMouseEvent:function(x,w,p,n,r,m,j,k,g,v,u,q,t){var h=x.createEventObject();h.bubbles=p;h.cancelable=n;h.detail=r;h.screenX=m;h.screenY=j;h.clientX=m;h.clientY=j;h.ctrlKey=k;h.altKey=g;h.shiftKey=v;h.metaKey=u;h.button=c[q]||q;h.relatedTarget=t;return h},createUIEvent:function(n,k,h,g,j){var m=n.createEventObject();m.bubbles=h;m.cancelable=g;return m},fireEvent:function(j,g,h){j.fireEvent("on"+g,h)},fixTarget:function(g){if(g==document){return document.documentElement}return g}}}}Ext.Object.each({load:[false,false],unload:[false,false],select:[true,false],change:[true,false],submit:[true,true],reset:[true,false],resize:[true,false],scroll:[true,false]},function(j,k){var h=k[0],g=k[1];e[j]=function(p,m){var n=d.createHtmlEvent(j,h,g);d.fireEvent(p,j,n)}});function b(j,h){var g=(j!="mousemove");return function(p,k){var n=k.getXY(),m=d.createMouseEvent(p.ownerDocument,j,true,g,h,n[0],n[1],k.ctrlKey,k.altKey,k.shiftKey,k.metaKey,k.button,k.relatedTarget);d.fireEvent(p,j,m)}}Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(g){e[g]=b(g,1)});Ext.Object.each({focusin:[true,false],focusout:[true,false],activate:[true,true],focus:[false,false],blur:[false,false]},function(j,k){var h=k[0],g=k[1];e[j]=function(p,m){var n=d.createUIEvent(p.ownerDocument,j,h,g,1);d.fireEvent(p,j,n)}});if(!d){e={};d={fixTarget:function(g){return g}}}function a(h,g){}return function(k){var j=this,h=e[j.type]||a,g=k?(k.dom||k):j.getTarget();g=d.fixTarget(g);h(g,j)}}()},function(){Ext.EventObject=new Ext.EventObjectImpl()});(function(){var e=document,d=null,b=e.compatMode=="CSS1Compat",h=Ext.Element,a=function(j){if(!c){c=new Ext.Element.Flyweight()}c.dom=j;return c},c;if(!("activeElement" in e)&&e.addEventListener){e.addEventListener("focus",function(j){if(j&&j.target){d=(j.target==e)?null:j.target}},true)}function g(k,m,j){return function(){k.selectionStart=m;k.selectionEnd=j}}Ext.apply(h,{isAncestor:function(k,m){var j=false;k=Ext.getDom(k);m=Ext.getDom(m);if(k&&m){if(k.contains){return k.contains(m)}else{if(k.compareDocumentPosition){return !!(k.compareDocumentPosition(m)&16)}else{while((m=m.parentNode)){j=m==k||j}}}}return j},getActiveElement:function(){return e.activeElement||d},getRightMarginFixCleaner:function(q){var m=Ext.supports,n=m.DisplayChangeInputSelectionBug,p=m.DisplayChangeTextAreaSelectionBug;if(n||p){var r=e.activeElement||d,j=r&&r.tagName,t,k;if((p&&j=="TEXTAREA")||(n&&j=="INPUT"&&r.type=="text")){if(h.isAncestor(q,r)){t=r.selectionStart;k=r.selectionEnd;if(Ext.isNumber(t)&&Ext.isNumber(k)){return g(r,t,k)}}}}return Ext.emptyFn},getViewWidth:function(j){return j?h.getDocumentWidth():h.getViewportWidth()},getViewHeight:function(j){return j?h.getDocumentHeight():h.getViewportHeight()},getDocumentHeight:function(){return Math.max(!b?e.body.scrollHeight:e.documentElement.scrollHeight,h.getViewportHeight())},getDocumentWidth:function(){return Math.max(!b?e.body.scrollWidth:e.documentElement.scrollWidth,h.getViewportWidth())},getViewportHeight:function(){return Ext.isIE?(Ext.isStrict?e.documentElement.clientHeight:e.body.clientHeight):self.innerHeight},getViewportWidth:function(){return(!Ext.isStrict&&!Ext.isOpera)?e.body.clientWidth:Ext.isIE?e.documentElement.clientWidth:self.innerWidth},getY:function(j){return h.getXY(j)[1]},getX:function(j){return h.getXY(j)[0]},getOffsetParent:function(k){k=Ext.getDom(k);try{return k.offsetParent}catch(m){var j=document.body;return(k==j)?null:j}},getXY:function(m){var k,v,z,C,n,q,B=0,w=0,A,j,r=(e.body||e.documentElement),u;m=Ext.getDom(m);if(m!=r){j=a(m).isStyle("position","absolute");if(m.getBoundingClientRect){try{z=m.getBoundingClientRect();A=a(document).getScroll();u=[Math.round(z.left+A.left),Math.round(z.top+A.top)]}catch(t){}}if(!u){for(k=m;k;k=h.getOffsetParent(k)){v=a(k);B+=k.offsetLeft;w+=k.offsetTop;j=j||v.isStyle("position","absolute");if(Ext.isGecko){w+=C=parseInt(v.getStyle("borderTopWidth"),10)||0;B+=n=parseInt(v.getStyle("borderLeftWidth"),10)||0;if(k!=m&&!v.isStyle("overflow","visible")){B+=n;w+=C}}}if(Ext.isSafari&&j){B-=r.offsetLeft;w-=r.offsetTop}if(Ext.isGecko&&!j){q=a(r);B+=parseInt(q.getStyle("borderLeftWidth"),10)||0;w+=parseInt(q.getStyle("borderTopWidth"),10)||0}k=m.parentNode;while(k&&k!=r){if(!Ext.isOpera||(k.tagName!="TR"&&!a(k).isStyle("display","inline"))){B-=k.scrollLeft;w-=k.scrollTop}k=k.parentNode}u=[B,w]}}return u||[0,0]},setXY:function(k,m){(k=Ext.fly(k,"_setXY")).position();var n=k.translatePoints(m),j=k.dom.style,p;for(p in n){if(!isNaN(n[p])){j[p]=n[p]+"px"}}},setX:function(k,j){h.setXY(k,[j,false])},setY:function(j,k){h.setXY(j,[false,k])},serializeForm:function(r){var q=r.elements||(document.forms[r]||Ext.getDom(r)).elements,j=false,p=encodeURIComponent,k,t="",n,m;Ext.each(q,function(u){k=u.name;n=u.type;if(!u.disabled&&k){if(/select-(one|multiple)/i.test(n)){Ext.each(u.options,function(v){if(v.selected){m=v.hasAttribute?v.hasAttribute("value"):v.getAttributeNode("value").specified;t+=Ext.String.format("{0}={1}&",p(k),p(m?v.value:v.text))}})}else{if(!(/file|undefined|reset|button/i.test(n))){if(!(/radio|checkbox/i.test(n)&&!u.checked)&&!(n=="submit"&&j)){t+=p(k)+"="+p(u.value)+"&";j=/submit/i.test(n)}}}}});return t.substr(0,t.length-1)}})})();Ext.Element.addMethods((function(){var focusRe=/button|input|textarea|select|object/;return{monitorMouseLeave:function(delay,handler,scope){var me=this,timer,listeners={mouseleave:function(e){timer=setTimeout(Ext.Function.bind(handler,scope||me,[e]),delay)},mouseenter:function(){clearTimeout(timer)},freezeEvent:true};me.on(listeners);return listeners},swallowEvent:function(eventName,preventDefault){var me=this;function fn(e){e.stopPropagation();if(preventDefault){e.preventDefault()}}if(Ext.isArray(eventName)){Ext.each(eventName,function(e){me.on(e,fn)});return me}me.on(eventName,fn);return me},relayEvent:function(eventName,observable){this.on(eventName,function(e){observable.fireEvent(eventName,e)})},clean:function(forceReclean){var me=this,dom=me.dom,n=dom.firstChild,nx,ni=-1;if(Ext.Element.data(dom,"isCleaned")&&forceReclean!==true){return me}while(n){nx=n.nextSibling;if(n.nodeType==3){if(!(/\S/.test(n.nodeValue))){dom.removeChild(n)}else{if(nx&&nx.nodeType==3){n.appendData(Ext.String.trim(nx.data));dom.removeChild(nx);nx=n.nextSibling;n.nodeIndex=++ni}}}else{Ext.fly(n).clean();n.nodeIndex=++ni}n=nx}Ext.Element.data(dom,"isCleaned",true);return me},load:function(options){this.getLoader().load(options);return this},getLoader:function(){var dom=this.dom,data=Ext.Element.data,loader=data(dom,"loader");if(!loader){loader=Ext.create("Ext.ElementLoader",{target:this});data(dom,"loader",loader)}return loader},update:function(html,loadScripts,callback){var me=this,id,dom,interval;if(!me.dom){return me}html=html||"";dom=me.dom;if(loadScripts!==true){dom.innerHTML=html;Ext.callback(callback,me);return me}id=Ext.id();html+='<span id="'+id+'"></span>';interval=setInterval(function(){if(!document.getElementById(id)){return false}clearInterval(interval);var DOC=document,hd=DOC.getElementsByTagName("head")[0],re=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,srcRe=/\ssrc=([\'\"])(.*?)\1/i,typeRe=/\stype=([\'\"])(.*?)\1/i,match,attrs,srcMatch,typeMatch,el,s;while((match=re.exec(html))){attrs=match[1];srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){s=DOC.createElement("script");s.src=srcMatch[2];typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(window.execScript){window.execScript(match[2])}else{window.eval(match[2])}}}}el=DOC.getElementById(id);if(el){Ext.removeNode(el)}Ext.callback(callback,me)},20);dom.innerHTML=html.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,"");return me},removeAllListeners:function(){this.removeAnchor();Ext.EventManager.removeAll(this.dom);return this},getScopeParent:function(){var parent=this.dom.parentNode;return Ext.scopeResetCSS?parent.parentNode:parent},createProxy:function(config,renderTo,matchBox){config=(typeof config=="object")?config:{tag:"div",cls:config};var me=this,proxy=renderTo?Ext.DomHelper.append(renderTo,config,true):Ext.DomHelper.insertBefore(me.dom,config,true);proxy.setVisibilityMode(Ext.Element.DISPLAY);proxy.hide();if(matchBox&&me.setBox&&me.getBox){proxy.setBox(me.getBox())}return proxy},focusable:function(){var dom=this.dom,nodeName=dom.nodeName.toLowerCase(),canFocus=false,hasTabIndex=!isNaN(dom.tabIndex);if(!dom.disabled){if(focusRe.test(nodeName)){canFocus=true}else{canFocus=nodeName=="a"?dom.href||hasTabIndex:hasTabIndex}}return canFocus&&this.isVisible(true)}}})());Ext.Element.prototype.clearListeners=Ext.Element.prototype.removeAllListeners;Ext.Element.addMethods({getAnchorXY:function(e,n,u){e=(e||"tl").toLowerCase();u=u||{};var m=this,b=m.dom==document.body||m.dom==document,q=u.width||b?Ext.Element.getViewWidth():m.getWidth(),j=u.height||b?Ext.Element.getViewHeight():m.getHeight(),t,a=Math.round,c=m.getXY(),p=m.getScroll(),k=b?p.left:!n?c[0]:0,g=b?p.top:!n?c[1]:0,d={c:[a(q*0.5),a(j*0.5)],t:[a(q*0.5),0],l:[0,a(j*0.5)],r:[q,a(j*0.5)],b:[a(q*0.5),j],tl:[0,0],bl:[0,j],br:[q,j],tr:[q,0]};t=d[e];return[t[0]+k,t[1]+g]},anchorTo:function(b,h,c,a,m,n){var j=this,e=j.dom,k=!Ext.isEmpty(m),d=function(){Ext.fly(e).alignTo(b,h,c,a);Ext.callback(n,Ext.fly(e))},g=this.getAnchor();this.removeAnchor();Ext.apply(g,{fn:d,scroll:k});Ext.EventManager.onWindowResize(d,null);if(k){Ext.EventManager.on(window,"scroll",d,null,{buffer:!isNaN(m)?m:50})}d.call(j);return j},removeAnchor:function(){var b=this,a=this.getAnchor();if(a&&a.fn){Ext.EventManager.removeResizeListener(a.fn);if(a.scroll){Ext.EventManager.un(window,"scroll",a.fn)}delete a.fn}return b},getAnchor:function(){var b=Ext.Element.data,c=this.dom;if(!c){return}var a=b(c,"_anchor");if(!a){a=b(c,"_anchor",{})}return a},getAlignVector:function(c,a,h){var d=this,b={t:"top",l:"left",r:"right",b:"bottom"},e=d.getRegion(),g;c=Ext.get(c);if(!c||!c.dom){}g=c.getRegion()},getAlignToXY:function(g,D,E){g=Ext.get(g);if(!g||!g.dom){}E=E||[0,0];D=(!D||D=="?"?"tl-bl?":(!(/-/).test(D)&&D!==""?"tl-"+D:D||"tl-bl")).toLowerCase();var N=this,K=N.dom,P,O,t,q,v,I,B,z=Ext.Element.getViewWidth()-10,J=Ext.Element.getViewHeight()-10,b,j,k,n,A,C,Q=document,M=Q.documentElement,u=Q.body,H=(M.scrollLeft||u.scrollLeft||0)+5,G=(M.scrollTop||u.scrollTop||0)+5,L=false,e="",a="",F=D.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!F){}e=F[1];a=F[2];L=!!F[3];P=N.getAnchorXY(e,true);O=g.getAnchorXY(a,false);t=O[0]-P[0]+E[0];q=O[1]-P[1]+E[1];if(L){v=N.getWidth();I=N.getHeight();B=g.getRegion();b=e.charAt(0);j=e.charAt(e.length-1);k=a.charAt(0);n=a.charAt(a.length-1);A=((b=="t"&&k=="b")||(b=="b"&&k=="t"));C=((j=="r"&&n=="l")||(j=="l"&&n=="r"));if(t+v>z+H){t=C?B.left-v:z+H-v}if(t<H){t=C?B.right:H}if(q+I>J+G){q=A?B.top-I:J+G-I}if(q<G){q=A?B.bottom:G}}return[t,q]},alignTo:function(c,a,e,b){var d=this;return d.setXY(d.getAlignToXY(c,a,e),d.anim&&!!b?d.anim(b):false)},adjustForConstraints:function(c,b){var a=this.getConstrainVector(b,c);if(a){c[0]+=a[0];c[1]+=a[1]}return c},getConstrainVector:function(d,b){if(!(d instanceof Ext.util.Region)){d=Ext.get(d).getViewRegion()}var g=this.getRegion(),a=[0,0],e=this.shadow&&this.shadow.offset,c=false;if(b){g.translateBy(b[0]-g.x,b[1]-g.y)}if(e){d.adjust(0,-e,-e,e)}if(g.right>d.right){c=true;a[0]=(d.right-g.right)}if(g.left+a[0]<d.left){c=true;a[0]=(d.left-g.left)}if(g.bottom>d.bottom){c=true;a[1]=(d.bottom-g.bottom)}if(g.top+a[1]<d.top){c=true;a[1]=(d.top-g.top)}return c?a:false},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(a){return this.alignTo(a||document,"c-c")}});(function(){var j=Ext.Element,a="left",e="right",c="top",h="bottom",g="position",b="static",d="relative",k="auto",m="z-index";Ext.override(Ext.Element,{getX:function(){return j.getX(this.dom)},getY:function(){return j.getY(this.dom)},getXY:function(){return j.getXY(this.dom)},getOffsetsTo:function(n){var q=this.getXY(),p=Ext.fly(n,"_internal").getXY();return[q[0]-p[0],q[1]-p[1]]},setX:function(n,p){return this.setXY([n,this.getY()],p)},setY:function(p,n){return this.setXY([this.getX(),p],n)},setLeft:function(n){this.setStyle(a,this.addUnits(n));return this},setTop:function(n){this.setStyle(c,this.addUnits(n));return this},setRight:function(n){this.setStyle(e,this.addUnits(n));return this},setBottom:function(n){this.setStyle(h,this.addUnits(n));return this},setXY:function(q,n){var p=this;if(!n||!p.anim){j.setXY(p.dom,q)}else{if(!Ext.isObject(n)){n={}}p.animate(Ext.applyIf({to:{x:q[0],y:q[1]}},n))}return p},setLocation:function(n,q,p){return this.setXY([n,q],p)},moveTo:function(n,q,p){return this.setXY([n,q],p)},getLeft:function(n){return !n?this.getX():parseInt(this.getStyle(a),10)||0},getRight:function(n){var p=this;return !n?p.getX()+p.getWidth():(p.getLeft(true)+p.getWidth())||0},getTop:function(n){return !n?this.getY():parseInt(this.getStyle(c),10)||0},getBottom:function(n){var p=this;return !n?p.getY()+p.getHeight():(p.getTop(true)+p.getHeight())||0},position:function(t,r,n,q){var p=this;if(!t&&p.isStyle(g,b)){p.setStyle(g,d)}else{if(t){p.setStyle(g,t)}}if(r){p.setStyle(m,r)}if(n||q){p.setXY([n||false,q||false])}},clearPositioning:function(n){n=n||"";this.setStyle({left:n,right:n,top:n,bottom:n,"z-index":"",position:b});return this},getPositioning:function(){var n=this.getStyle(a);var p=this.getStyle(c);return{position:this.getStyle(g),left:n,right:n?"":this.getStyle(e),top:p,bottom:p?"":this.getStyle(h),"z-index":this.getStyle(m)}},setPositioning:function(n){var q=this,p=q.dom.style;q.setStyle(n);if(n.right==k){p.right=""}if(n.bottom==k){p.bottom=""}return q},translatePoints:function(n,v){if(Ext.isArray(n)){v=n[1];n=n[0]}var p=this,q=p.isStyle(g,d),u=p.getXY(),t=parseInt(p.getStyle(a),10),r=parseInt(p.getStyle(c),10);if(!Ext.isNumber(t)){t=q?0:p.dom.offsetLeft}if(!Ext.isNumber(r)){r=q?0:p.dom.offsetTop}t=(Ext.isNumber(n))?n-u[0]+t:undefined;r=(Ext.isNumber(v))?v-u[1]+r:undefined;return{left:t,top:r}},setBox:function(t,u,p){var r=this,n=t.width,q=t.height;if((u&&!r.autoBoxAdjust)&&!r.isBorderBox()){n-=(r.getBorderWidth("lr")+r.getPadding("lr"));q-=(r.getBorderWidth("tb")+r.getPadding("tb"))}r.setBounds(t.x,t.y,n,q,p);return r},getBox:function(x,C){var z=this,G,q,B,p=z.getBorderWidth,D=z.getPadding,u,n,F,A,E,v,y;if(!C){G=z.getXY()}else{q=parseInt(z.getStyle("left"),10)||0;B=parseInt(z.getStyle("top"),10)||0;G=[q,B]}E=z.getWidth();v=z.getHeight();if(!x){y={x:G[0],y:G[1],0:G[0],1:G[1],width:E,height:v}}else{u=p.call(z,"l")+D.call(z,"l");n=p.call(z,"r")+D.call(z,"r");F=p.call(z,"t")+D.call(z,"t");A=p.call(z,"b")+D.call(z,"b");y={x:G[0]+u,y:G[1]+F,0:G[0]+u,1:G[1]+F,width:E-(u+n),height:v-(F+A)}}y.right=y.x+y.width;y.bottom=y.y+y.height;return y},move:function(z,p,q){var u=this,C=u.getXY(),A=C[0],w=C[1],r=[A-p,w],B=[A+p,w],v=[A,w-p],n=[A,w+p],t={l:r,left:r,r:B,right:B,t:v,top:v,up:v,b:n,bottom:n,down:n};z=z.toLowerCase();u.moveTo(t[z][0],t[z][1],q)},setLeftTop:function(r,q){var p=this,n=p.dom.style;n.left=p.addUnits(r);n.top=p.addUnits(q);return p},getRegion:function(){return this.getPageBox(true)},getViewRegion:function(){var t=this,q=t.dom===document.body,p,w,v,u,r,n;if(q){p=t.getScroll();u=p.left;v=p.top;r=Ext.Element.getViewportWidth();n=Ext.Element.getViewportHeight()}else{w=t.getXY();u=w[0]+t.getBorderWidth("l")+t.getPadding("l");v=w[1]+t.getBorderWidth("t")+t.getPadding("t");r=t.getWidth(true);n=t.getHeight(true)}return Ext.create("Ext.util.Region",v,u+r,v+n,u)},getPageBox:function(u){var x=this,p=x.dom,z=p===document.body,A=z?Ext.Element.getViewWidth():p.offsetWidth,v=z?Ext.Element.getViewHeight():p.offsetHeight,C=x.getXY(),B=C[1],n=C[0]+A,y=C[1]+v,q=C[0];if(u){return Ext.create("Ext.util.Region",B,n,y,q)}else{return{left:q,top:B,width:A,height:v,right:n,bottom:y}}},setBounds:function(p,u,r,n,q){var t=this;if(!q||!t.anim){t.setSize(r,n);t.setLocation(p,u)}else{if(!Ext.isObject(q)){q={}}t.animate(Ext.applyIf({to:{x:p,y:u,width:t.adjustWidth(r),height:t.adjustHeight(n)}},q))}return t},setRegion:function(p,n){return this.setBounds(p.left,p.top,p.right-p.left,p.bottom-p.top,n)}})})();Ext.override(Ext.Element,{isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},getScroll:function(){var j=this.dom,h=document,a=h.body,c=h.documentElement,b,g,e;if(j==h||j==a){if(Ext.isIE&&Ext.isStrict){b=c.scrollLeft;g=c.scrollTop}else{b=window.pageXOffset;g=window.pageYOffset}e={left:b||(a?a.scrollLeft:0),top:g||(a?a.scrollTop:0)}}else{e={left:j.scrollLeft,top:j.scrollTop}}return e},scrollTo:function(b,d,a){var g=/top/i.test(b),c=this,h=c.dom,e={},j;if(!a||!c.anim){j="scroll"+(g?"Top":"Left");h[j]=d}else{if(!Ext.isObject(a)){a={}}e["scroll"+(g?"Top":"Left")]=d;c.animate(Ext.applyIf({to:e},a))}return c},scrollIntoView:function(b,e){b=Ext.getDom(b)||Ext.getBody().dom;var c=this.dom,h=this.getOffsetsTo(b),g=h[0]+b.scrollLeft,k=h[1]+b.scrollTop,a=k+c.offsetHeight,m=g+c.offsetWidth,q=b.clientHeight,p=parseInt(b.scrollTop,10),d=parseInt(b.scrollLeft,10),j=p+q,n=d+b.clientWidth;if(c.offsetHeight>q||k<p){b.scrollTop=k}else{if(a>j){b.scrollTop=a-q}}b.scrollTop=b.scrollTop;if(e!==false){if(c.offsetWidth>b.clientWidth||g<d){b.scrollLeft=g}else{if(m>n){b.scrollLeft=m-b.clientWidth}}b.scrollLeft=b.scrollLeft}return this},scrollChildIntoView:function(b,a){Ext.fly(b,"_scrollChildIntoView").scrollIntoView(this,a)},scroll:function(n,b,d){if(!this.isScrollable()){return false}var e=this.dom,g=e.scrollLeft,r=e.scrollTop,p=e.scrollWidth,m=e.scrollHeight,j=e.clientWidth,a=e.clientHeight,c=false,q,k={l:Math.min(g+b,p-j),r:q=Math.max(g-b,0),t:Math.max(r-b,0),b:Math.min(r+b,m-a)};k.d=k.b;k.u=k.t;n=n.substr(0,1);if((q=k[n])>-1){c=true;this.scrollTo(n=="l"||n=="r"?"left":"top",q,this.anim(d))}return c}});Ext.Element.addMethods(function(){var d="visibility",b="display",a="hidden",h="none",c=Ext.baseCSSPrefix+"masked",g=Ext.baseCSSPrefix+"masked-relative",e=Ext.Element.data;return{isVisible:function(j){var k=!this.isStyle(d,a)&&!this.isStyle(b,h),m=this.dom.parentNode;if(j!==true||!k){return k}while(m&&!(/^body/i.test(m.tagName))){if(!Ext.fly(m,"_isVisible").isVisible()){return false}m=m.parentNode}return true},isDisplayed:function(){return !this.isStyle(b,h)},enableDisplayMode:function(j){this.setVisibilityMode(Ext.Element.DISPLAY);if(!Ext.isEmpty(j)){e(this.dom,"originalDisplay",j)}return this},mask:function(k,r){var u=this,n=u.dom,p=n.style.setExpression,t=Ext.DomHelper,q=Ext.baseCSSPrefix+"mask-msg",j,v;if(!(/^body/i.test(n.tagName)&&u.getStyle("position")=="static")){u.addCls(g)}j=e(n,"maskMsg");if(j){j.remove()}j=e(n,"mask");if(j){j.remove()}v=t.append(n,{cls:Ext.baseCSSPrefix+"mask"},true);e(n,"mask",v);u.addCls(c);v.setDisplayed(true);if(typeof k=="string"){var m=t.append(n,{cls:q,cn:{tag:"div"}},true);e(n,"maskMsg",m);m.dom.className=r?q+" "+r:q;m.dom.firstChild.innerHTML=k;m.setDisplayed(true);m.center(u)}if(!Ext.supports.IncludePaddingInWidthCalculation&&p){v.dom.style.setExpression("width",'this.parentNode.offsetWidth + "px"')}if(!Ext.supports.IncludePaddingInHeightCalculation&&p){v.dom.style.setExpression("height",'this.parentNode.offsetHeight + "px"')}else{if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&u.getStyle("height")=="auto"){v.setSize(undefined,u.getHeight())}}return v},unmask:function(){var m=this,n=m.dom,j=e(n,"mask"),k=e(n,"maskMsg");if(j){if(j.dom.style.clearExpression){j.dom.style.clearExpression("width");j.dom.style.clearExpression("height")}if(k){k.remove();e(n,"maskMsg",undefined)}j.remove();e(n,"mask",undefined);m.removeCls([c,g])}},isMasked:function(){var m=this,j=e(m.dom,"mask"),k=e(m.dom,"maskMsg");if(j&&j.isVisible()){if(k){k.center(m)}return true}return false},createShim:function(){var j=document.createElement("iframe"),k;j.frameBorder="0";j.className=Ext.baseCSSPrefix+"shim";j.src=Ext.SSL_SECURE_URL;k=Ext.get(this.dom.parentNode.insertBefore(j,this.dom));k.autoBoxAdjust=false;return k}}}());Ext.Element.addMethods({addKeyListener:function(b,d,c){var a;if(typeof b!="object"||Ext.isArray(b)){a={key:b,fn:d,scope:c}}else{a={key:b.key,shift:b.shift,ctrl:b.ctrl,alt:b.alt,fn:d,scope:c}}return Ext.create("Ext.util.KeyMap",this,a)},addKeyMap:function(a){return Ext.create("Ext.util.KeyMap",this,a)}});Ext.CompositeElementLite.importElementMethods();Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(c,a){if(!c){return this}if(typeof c=="string"){c=Ext.Element.selectorFunction(c,a)}var b=this.elements;Ext.each(c,function(d){b.push(Ext.get(d))});return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(d,e){var c=this,a=this.elements,b;Ext.each(d,function(g){if((b=(a[g]||a[g=c.indexOf(g)]))){if(e){if(b.dom){b.remove()}else{Ext.removeNode(b)}}Ext.Array.erase(a,g,1)}});return this}});Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(b,a){this.elements=[];this.add(b,a)},getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}});Ext.Element.select=function(a,d,b){var c;if(typeof a=="string"){c=Ext.Element.selectorFunction(a,b)}else{if(a.length!==undefined){c=a}else{}}return(d===true)?new Ext.CompositeElement(c):new Ext.CompositeElementLite(c)};Ext.select=Ext.Element.select;Ext.define("Ext.util.Observable",{requires:["Ext.util.Event"],statics:{releaseCapture:function(a){a.fireEvent=this.prototype.fireEvent},capture:function(c,b,a){c.fireEvent=Ext.Function.createInterceptor(c.fireEvent,b,a)},observe:function(a,b){if(a){if(!a.isObservable){Ext.applyIf(a,new this());this.capture(a.prototype,a.fireEvent,a)}if(Ext.isObject(b)){a.on(b)}return a}}},isObservable:true,constructor:function(a){var b=this;Ext.apply(b,a);if(b.listeners){b.on(b.listeners);delete b.listeners}b.events=b.events||{};if(b.bubbleEvents){b.enableBubble(b.bubbleEvents)}},eventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|vertical|horizontal|freezeEvent)$/,addManagedListener:function(j,d,g,e,c){var h=this,a=h.managedListeners=h.managedListeners||[],b;if(typeof d!=="string"){c=d;for(d in c){if(c.hasOwnProperty(d)){b=c[d];if(!h.eventOptionsRe.test(d)){h.addManagedListener(j,d,b.fn||b,b.scope||c.scope,b.fn?b:c)}}}}else{a.push({item:j,ename:d,fn:g,scope:e,options:c});j.on(d,g,e,c)}},removeManagedListener:function(j,c,g,k){var e=this,m,b,h,a,d;if(typeof c!=="string"){m=c;for(c in m){if(m.hasOwnProperty(c)){b=m[c];if(!e.eventOptionsRe.test(c)){e.removeManagedListener(j,c,b.fn||b,b.scope||m.scope)}}}}h=e.managedListeners?e.managedListeners.slice():[];for(d=0,a=h.length;d<a;d++){e.removeManagedListenerItem(false,h[d],j,c,g,k)}},fireEvent:function(b){var c=b.toLowerCase(),d=this.events,e=d&&d[c],a=e&&e.bubble;return this.continueFireEvent(c,Ext.Array.slice(arguments,1),a)},continueFireEvent:function(c,e,b){var h=this,a,g,d=true;do{if(h.eventsSuspended===true){if((a=h.eventQueue)){a.push([c,e,b])}return d}else{g=h.events[c];if(g&&g!=true){if((d=g.fire.apply(g,e))===false){break}}}}while(b&&(h=h.getBubbleParent()));return d},getBubbleParent:function(){var b=this,a=b.getBubbleTarget&&b.getBubbleTarget();if(a&&a.isObservable){return a}return null},addListener:function(c,e,d,b){var h=this,a,g;if(typeof c!=="string"){b=c;for(c in b){if(b.hasOwnProperty(c)){a=b[c];if(!h.eventOptionsRe.test(c)){h.addListener(c,a.fn||a,a.scope||b.scope,a.fn?a:b)}}}}else{c=c.toLowerCase();h.events[c]=h.events[c]||true;g=h.events[c]||true;if(Ext.isBoolean(g)){h.events[c]=g=new Ext.util.Event(h,c)}g.addListener(e,d,Ext.isObject(b)?b:{})}},removeListener:function(c,e,d){var h=this,b,g,a;if(typeof c!=="string"){a=c;for(c in a){if(a.hasOwnProperty(c)){b=a[c];if(!h.eventOptionsRe.test(c)){h.removeListener(c,b.fn||b,b.scope||a.scope)}}}}else{c=c.toLowerCase();g=h.events[c];if(g&&g.isEvent){g.removeListener(e,d)}}},clearListeners:function(){var b=this.events,c,a;for(a in b){if(b.hasOwnProperty(a)){c=b[a];if(c.isEvent){c.clearListeners()}}}this.clearManagedListeners()},clearManagedListeners:function(){var b=this.managedListeners||[],c=0,a=b.length;for(;c<a;c++){this.removeManagedListenerItem(true,b[c])}this.managedListeners=[]},removeManagedListenerItem:function(b,a,g,c,e,d){if(b||(a.item===g&&a.ename===c&&(!e||a.fn===e)&&(!d||a.scope===d))){a.item.un(a.ename,a.fn,a.scope);if(!b){Ext.Array.remove(this.managedListeners,a)}}},addEvents:function(e){var d=this,b,a,c;d.events=d.events||{};if(Ext.isString(e)){b=arguments;c=b.length;while(c--){d.events[b[c]]=d.events[b[c]]||true}}else{Ext.applyIf(d.events,e)}},hasListener:function(a){var b=this.events[a.toLowerCase()];return b&&b.isEvent===true&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=true;if(a&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var a=this,b=a.eventQueue;a.eventsSuspended=false;delete a.eventQueue;if(b){Ext.each(b,function(c){a.continueFireEvent.apply(a,c)})}},relayEvents:function(c,e,j){j=j||"";var h=this,a=e.length,d=0,g,b;for(;d<a;d++){g=e[d].substr(j.length);b=j+g;h.events[b]=h.events[b]||true;c.on(g,h.createRelayer(b))}},createRelayer:function(a){var b=this;return function(){return b.fireEvent.apply(b,[a].concat(Array.prototype.slice.call(arguments,0,-1)))}},enableBubble:function(a){var b=this;if(!Ext.isEmpty(a)){a=Ext.isArray(a)?a:Ext.Array.toArray(arguments);Ext.each(a,function(c){c=c.toLowerCase();var d=b.events[c]||true;if(Ext.isBoolean(d)){d=new Ext.util.Event(b,c);b.events[c]=d}d.bubble=true})}}},function(){this.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener"});this.observeClass=this.observe;Ext.apply(Ext.util.Observable.prototype,function(){function a(k){var j=(this.methodEvents=this.methodEvents||{})[k],d,c,g,h=this;if(!j){this.methodEvents[k]=j={};j.originalFn=this[k];j.methodName=k;j.before=[];j.after=[];var b=function(n,m,e){if((c=n.apply(m||h,e))!==undefined){if(typeof c=="object"){if(c.returnValue!==undefined){d=c.returnValue}else{d=c}g=!!c.cancel}else{if(c===false){g=true}else{d=c}}}};this[k]=function(){var n=Array.prototype.slice.call(arguments,0),m,p,e;d=c=undefined;g=false;for(p=0,e=j.before.length;p<e;p++){m=j.before[p];b(m.fn,m.scope,n);if(g){return d}}if((c=j.originalFn.apply(h,n))!==undefined){d=c}for(p=0,e=j.after.length;p<e;p++){m=j.after[p];b(m.fn,m.scope,n);if(g){return d}}return d}}return j}return{beforeMethod:function(d,c,b){a.call(this,d).before.push({fn:c,scope:b})},afterMethod:function(d,c,b){a.call(this,d).after.push({fn:c,scope:b})},removeMethodListener:function(j,g,d){var h=this.getMethodEvent(j),c,b;for(c=0,b=h.before.length;c<b;c++){if(h.before[c].fn==g&&h.before[c].scope==d){Ext.Array.erase(h.before,c,1);return}}for(c=0,b=h.after.length;c<b;c++){if(h.after[c].fn==g&&h.after[c].scope==d){Ext.Array.erase(h.after,c,1);return}}},toggleEventLogging:function(b){Ext.util.Observable[b?"capture":"releaseCapture"](this,function(c){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(c,arguments)}})}}}())});Ext.define("Ext.util.Animate",{uses:["Ext.fx.Manager","Ext.fx.Anim"],animate:function(a){var b=this;if(Ext.fx.Manager.hasFxBlock(b.id)){return b}Ext.fx.Manager.queueFx(Ext.create("Ext.fx.Anim",b.anim(a)));return this},anim:function(a){if(!Ext.isObject(a)){return(a)?{}:false}var b=this;if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:true},a)},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},function(){Ext.applyIf(Ext.Element.prototype,this.prototype);Ext.CompositeElementLite.importElementMethods()});Ext.define("Ext.state.Provider",{mixins:{observable:"Ext.util.Observable"},prefix:"ext-",constructor:function(a){a=a||{};var b=this;Ext.apply(b,a);b.addEvents("statechange");b.state={};b.mixins.observable.constructor.call(b)},get:function(b,a){return typeof this.state[b]=="undefined"?a:this.state[b]},clear:function(a){var b=this;delete b.state[a];b.fireEvent("statechange",b,a,null)},set:function(a,c){var b=this;b.state[a]=c;b.fireEvent("statechange",b,a,c)},decodeValue:function(g){var d=this,c=/^(a|n|d|b|s|o|e)\:(.*)$/,e=c.exec(unescape(g)),b,a,g,h;if(!e||!e[1]){return}a=e[1];g=e[2];switch(a){case"e":return null;case"n":return parseFloat(g);case"d":return new Date(Date.parse(g));case"b":return(g=="1");case"a":b=[];if(g!=""){Ext.each(g.split("^"),function(j){b.push(d.decodeValue(j))},d)}return b;case"o":b={};if(g!=""){Ext.each(g.split("^"),function(j){h=j.split("=");b[h[0]]=d.decodeValue(h[1])},d)}return b;default:return g}},encodeValue:function(e){var g="",d=0,b,a,c;if(e==null){return"e:1"}else{if(typeof e=="number"){b="n:"+e}else{if(typeof e=="boolean"){b="b:"+(e?"1":"0")}else{if(Ext.isDate(e)){b="d:"+e.toGMTString()}else{if(Ext.isArray(e)){for(a=e.length;d<a;d++){g+=this.encodeValue(e[d]);if(d!=a-1){g+="^"}}b="a:"+g}else{if(typeof e=="object"){for(c in e){if(typeof e[c]!="function"&&e[c]!==undefined){g+=c+"="+this.encodeValue(e[c])+"^"}}b="o:"+g.substring(0,g.length-1)}else{b="s:"+e}}}}}}return escape(b)}});Ext.define("Ext.ComponentQuery",{singleton:true,uses:["Ext.ComponentManager"]},function(){var h=this,m=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),e=function(t,r){return r.method.apply(this,[t].concat(r.args))},a=function(u,y){var r=[],v=0,x=u.length,w,t=y!==">";for(;v<x;v++){w=u[v];if(w.getRefItems){r=r.concat(w.getRefItems(t))}}return r},g=function(t){var r=[],u=0,w=t.length,v;for(;u<w;u++){v=t[u];while(!!(v=(v.ownerCt||v.floatParent))){r.push(v)}}return r},p=function(t,y,x){if(y==="*"){return t.slice()}else{var r=[],u=0,w=t.length,v;for(;u<w;u++){v=t[u];if(v.isXType(y,x)){r.push(v)}}return r}},k=function(t,w){var y=Ext.Array,r=[],u=0,x=t.length,v;for(;u<x;u++){v=t[u];if(v.el?v.el.hasCls(w):y.contains(v.initCls(),w)){r.push(v)}}return r},q=function(u,z,t,y){var r=[],v=0,x=u.length,w;for(;v<x;v++){w=u[v];if(!y?!!w[z]:(String(w[z])===y)){r.push(w)}}return r},d=function(t,x){var r=[],u=0,w=t.length,v;for(;u<w;u++){v=t[u];if(v.getItemId()===x){r.push(v)}}return r},n=function(r,t,u){return h.pseudos[t](r,u)},j=/^(\s?([>\^])\s?|\s|$)/,c=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,b=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:p},{re:/^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,method:q},{re:/^#([\w\-]+)/,method:d},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:n},{re:/^(?:\{([^\}]+)\})/,method:m}];h.Query=Ext.extend(Object,{constructor:function(r){r=r||{};Ext.apply(this,r)},execute:function(t){var v=this.operations,w=0,x=v.length,u,r;if(!t){r=Ext.ComponentManager.all.getArray()}else{if(Ext.isArray(t)){r=t}}for(;w<x;w++){u=v[w];if(u.mode==="^"){r=g(r||[t])}else{if(u.mode){r=a(r||[t],u.mode)}else{r=e(r||a([t]),u)}}if(w===x-1){return r}}return[]},is:function(u){var t=this.operations,x=Ext.isArray(u)?u:[u],r=x.length,y=t[t.length-1],w,v;x=e(x,y);if(x.length===r){if(t.length>1){for(v=0,w=x.length;v<w;v++){if(Ext.Array.indexOf(this.execute(),x[v])===-1){return false}}}return true}return false}});Ext.apply(this,{cache:{},pseudos:{not:function(y,r){var z=Ext.ComponentQuery,w=0,x=y.length,v=[],u=-1,t;for(;w<x;++w){t=y[w];if(!z.is(t,r)){v[++u]=t}}return v},last:function(r){return r[r.length-1]}},query:function(t,A){var B=t.split(","),r=B.length,u=0,v=[],C=[],z={},x,w,y;for(;u<r;u++){t=Ext.String.trim(B[u]);x=this.cache[t];if(!x){this.cache[t]=x=this.parse(t)}v=v.concat(x.execute(A))}if(r>1){w=v.length;for(u=0;u<w;u++){y=v[u];if(!z[y.id]){C.push(y);z[y.id]=true}}v=C}return v},is:function(t,r){if(!r){return true}var u=this.cache[r];if(!u){this.cache[r]=u=this.parse(r)}return u.is(t)},parse:function(v){var t=[],u=b.length,z,w,A,B,C,x,y,r;while(v&&z!==v){z=v;w=v.match(c);if(w){A=w[1];if(A==="#"){t.push({method:d,args:[Ext.String.trim(w[2])]})}else{if(A==="."){t.push({method:k,args:[Ext.String.trim(w[2])]})}else{t.push({method:p,args:[Ext.String.trim(w[2]),Boolean(w[3])]})}}v=v.replace(w[0],"")}while(!(B=v.match(j))){for(x=0;v&&x<u;x++){y=b[x];C=v.match(y.re);r=y.method;if(C){t.push({method:Ext.isString(y.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[r].concat(C.slice(1)))):y.method,args:C.slice(1)});v=v.replace(C[0],"");break}}}if(B[1]){t.push({mode:B[2]||B[1]});v=v.replace(B[0],"")}}return new h.Query({operations:t})}})});Ext.define("Ext.util.HashMap",{mixins:{observable:"Ext.util.Observable"},constructor:function(a){a=a||{};var c=this,b=a.keyFn;c.addEvents("add","clear","remove","replace");c.mixins.observable.constructor.call(c,a);c.clear(true);if(b){c.getKey=b}},getCount:function(){return this.length},getData:function(a,b){if(b===undefined){b=a;a=this.getKey(b)}return[a,b]},getKey:function(a){return a.id},add:function(a,d){var b=this,c;if(arguments.length===1){d=a;a=b.getKey(d)}if(b.containsKey(a)){return b.replace(a,d)}c=b.getData(a,d);a=c[0];d=c[1];b.map[a]=d;++b.length;b.fireEvent("add",b,a,d);return d},replace:function(b,d){var c=this,e=c.map,a;if(!c.containsKey(b)){c.add(b,d)}a=e[b];e[b]=d;c.fireEvent("replace",c,b,d,a);return d},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return false},removeAtKey:function(a){var b=this,c;if(b.containsKey(a)){c=b.map[a];delete b.map[a];--b.length;b.fireEvent("remove",b,a,c);return true}return false},get:function(a){return this.map[a]},clear:function(a){var b=this;b.map={};b.length=0;if(a!==true){b.fireEvent("clear",b)}return b},containsKey:function(a){return this.map[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(d){var a=[],b,c=this.map;for(b in c){if(c.hasOwnProperty(b)){a.push(d?b:c[b])}}return a},each:function(d,c){var a=Ext.apply({},this.map),b,e=this.length;c=c||this;for(b in a){if(a.hasOwnProperty(b)){if(d.call(c,b,a[b],e)===false){break}}}return this},clone:function(){var c=new this.self(),b=this.map,a;c.suspendEvents();for(a in b){if(b.hasOwnProperty(a)){c.add(a,b[a])}}c.resumeEvents();return c},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a]===b){return a}}return undefined}});Ext.define("Ext.state.Manager",{singleton:true,requires:["Ext.state.Provider"],constructor:function(){this.provider=Ext.create("Ext.state.Provider")},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(a,b){this.provider.set(a,b)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}});Ext.define("Ext.state.Stateful",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.state.Manager"],stateful:true,saveDelay:100,autoGenIdRe:/^((\w+-)|(ext-comp-))\d{4,}$/i,constructor:function(a){var b=this;a=a||{};if(Ext.isDefined(a.stateful)){b.stateful=a.stateful}if(Ext.isDefined(a.saveDelay)){b.saveDelay=a.saveDelay}b.stateId=b.stateId||a.stateId;if(!b.stateEvents){b.stateEvents=[]}if(a.stateEvents){b.stateEvents.concat(a.stateEvents)}this.addEvents("beforestaterestore","staterestore","beforestatesave","statesave");b.mixins.observable.constructor.call(b);if(b.stateful!==false){b.initStateEvents();b.initState()}},initStateEvents:function(){this.addStateEvents(this.stateEvents)},addStateEvents:function(c){if(!Ext.isArray(c)){c=[c]}var d=this,b=0,a=c.length;for(;b<a;++b){d.on(c[b],d.onStateChange,d)}},onStateChange:function(){var b=this,a=b.saveDelay;if(a>0){if(!b.stateTask){b.stateTask=Ext.create("Ext.util.DelayedTask",b.saveState,b)}b.stateTask.delay(b.saveDelay)}else{b.saveState()}},saveState:function(){var a=this,c,b;if(a.stateful!==false){c=a.getStateId();if(c){b=a.getState();if(a.fireEvent("beforestatesave",a,b)!==false){Ext.state.Manager.set(c,b);a.fireEvent("statesave",a,b)}}}},getState:function(){return null},applyState:function(a){if(a){Ext.apply(this,a)}},getStateId:function(){var a=this,b=a.stateId;if(!b){b=a.autoGenIdRe.test(String(a.id))?null:a.id}return b},initState:function(){var a=this,c=a.getStateId(),b;if(a.stateful!==false){if(c){b=Ext.state.Manager.get(c);if(b){b=Ext.apply({},b);if(a.fireEvent("beforestaterestore",a,b)!==false){a.applyState(b);a.fireEvent("staterestore",a,b)}}}}},savePropToState:function(g,e,d){var b=this,c=b[g],a=b.initialConfig;if(b.hasOwnProperty(g)){if(!a||a[g]!==c){if(e){e[d||g]=c}return true}}return false},savePropsToState:function(c,b){var a=this;Ext.each(c,function(d){a.savePropToState(d,b)});return b},destroy:function(){var a=this.stateTask;if(a){a.cancel()}this.clearListeners()}});Ext.define("Ext.AbstractManager",{requires:["Ext.util.HashMap"],typeName:"type",constructor:function(a){Ext.apply(this,a||{});this.all=Ext.create("Ext.util.HashMap");this.types={}},get:function(a){return this.all.get(a)},register:function(a){this.all.add(a)},unregister:function(a){this.all.remove(a)},registerType:function(b,a){this.types[b]=a;a[this.typeName]=b},isRegistered:function(a){return this.types[a]!==undefined},create:function(a,d){var b=a[this.typeName]||a.type||d,c=this.types[b];return new c(a)},onAvailable:function(e,c,b){var a=this.all,d;if(a.containsKey(e)){d=a.get(e);c.call(b||d,d)}else{a.on("add",function(j,g,h){if(g==e){c.call(b||h,h);a.un("add",c,b)}})}},each:function(b,a){this.all.each(b,a||this)},getCount:function(){return this.all.getCount()}});Ext.define("Ext.ComponentManager",{extend:"Ext.AbstractManager",alternateClassName:"Ext.ComponentMgr",singleton:true,typeName:"xtype",create:function(b,d){if(b instanceof Ext.AbstractComponent){return b}else{if(Ext.isString(b)){return Ext.createByAlias("widget."+b)}else{var c=b.xtype||d,a=b;return Ext.createByAlias("widget."+c,a)}}},registerType:function(b,a){this.types[b]=a;a[this.typeName]=b;a.prototype[this.typeName]=b}});Ext.define("Ext.AbstractComponent",{requires:["Ext.ComponentQuery","Ext.ComponentManager"],mixins:{observable:"Ext.util.Observable",animate:"Ext.util.Animate",state:"Ext.state.Stateful"},uses:["Ext.PluginManager","Ext.ComponentManager","Ext.Element","Ext.DomHelper","Ext.XTemplate","Ext.ComponentQuery","Ext.ComponentLoader","Ext.EventManager","Ext.layout.Layout","Ext.layout.component.Auto","Ext.LoadMask","Ext.ZIndexManager"],statics:{AUTO_ID:1000},isComponent:true,getAutoId:function(){return ++Ext.AbstractComponent.AUTO_ID},renderTpl:null,tplWriteMode:"overwrite",baseCls:Ext.baseCSSPrefix+"component",disabledCls:Ext.baseCSSPrefix+"item-disabled",ui:"default",uiCls:[],hidden:false,disabled:false,draggable:false,floating:false,hideMode:"display",styleHtmlContent:false,styleHtmlCls:Ext.baseCSSPrefix+"html",autoShow:false,autoRender:false,needsLayout:false,allowDomMove:true,rendered:false,componentLayoutCounter:0,weight:0,trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,maskOnDisable:true,constructor:function(b){var d=this,c,a;b=b||{};d.initialConfig=b;Ext.apply(d,b);d.addEvents("beforeactivate","activate","beforedeactivate","deactivate","added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","resize","move");d.getId();d.mons=[];d.additionalCls=[];d.renderData=d.renderData||{};d.renderSelectors=d.renderSelectors||{};if(d.plugins){d.plugins=[].concat(d.plugins);d.constructPlugins()}d.initComponent();Ext.ComponentManager.register(d);d.mixins.observable.constructor.call(d);d.mixins.state.constructor.call(d,b);this.addStateEvents("resize");if(d.plugins){d.plugins=[].concat(d.plugins);for(c=0,a=d.plugins.length;c<a;c++){d.plugins[c]=d.initPlugin(d.plugins[c])}}d.loader=d.getLoader();if(d.renderTo){d.render(d.renderTo)}if(d.autoShow){d.show()}},initComponent:function(){this.constructPlugins()},getState:function(){var g=this,e=g.ownerCt?(g.shadowOwnerCt||g.ownerCt).getLayout():null,h={collapsed:g.collapsed},c=g.width,b=g.height,a=g.collapseMemento,d;if(g.collapsed&&a){if(Ext.isDefined(a.data.width)){c=a.width}if(Ext.isDefined(a.data.height)){b=a.height}}if(e&&g.flex){h.flex=g.flex;if(e.perpendicularPrefix){h[e.perpendicularPrefix]=g["get"+e.perpendicularPrefixCap]()}else{}}else{if(e&&g.anchor){h.anchor=g.anchor;d=g.anchor.split(" ").concat(null);if(!d[0]){if(g.width){h.width=c}}if(!d[1]){if(g.height){h.height=b}}}else{if(g.width){h.width=c}if(g.height){h.height=b}}}if(h.width==g.initialConfig.width){delete h.width}if(h.height==g.initialConfig.height){delete h.height}if(e&&e.align&&(e.align.indexOf("stretch")!==-1)){delete h[e.perpendicularPrefix]}return h},show:Ext.emptyFn,animate:function(b){var g=this,m;b=b||{};m=b.to||{};if(Ext.fx.Manager.hasFxBlock(g.id)){return g}if(!b.dynamic&&(m.height||m.width)){var e=g.getWidth(),n=e,d=g.getHeight(),c=d,a=false;if(m.height&&m.height>d){c=m.height;a=true}if(m.width&&m.width>e){n=m.width;a=true}if(a){var k=!Ext.isNumber(g.width),j=!Ext.isNumber(g.height);g.componentLayout.childrenChanged=true;g.setSize(n,c,g.ownerCt);g.el.setSize(e,d);if(k){delete g.width}if(j){delete g.height}}}return g.mixins.animate.animate.apply(g,arguments)},findLayoutController:function(){return this.findParentBy(function(a){return !a.ownerCt||(a.layout.layoutBusy&&!a.ownerCt.layout.layoutBusy)})},onShow:function(){var a=this.needsLayout;if(Ext.isObject(a)){this.doComponentLayout(a.width,a.height,a.isSetSize,a.ownerCt)}},constructPlugin:function(a){if(a.ptype&&typeof a.init!="function"){a.cmp=this;a=Ext.PluginManager.create(a)}else{if(typeof a=="string"){a=Ext.PluginManager.create({ptype:a,cmp:this})}}return a},constructPlugins:function(){var d=this,b=d.plugins,c,a;if(b){for(c=0,a=b.length;c<a;c++){b[c]=d.constructPlugin(b[c])}}},initPlugin:function(a){a.init(this);return a},doAutoRender:function(){var a=this;if(a.floating){a.render(document.body)}else{a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}},render:function(b,a){var c=this;if(!c.rendered&&c.fireEvent("beforerender",c)!==false){c.rendering=true;if(c.el){c.el=Ext.get(c.el)}if(c.floating){c.onFloatRender()}b=c.initContainer(b);c.onRender(b,a);c.el.setVisibilityMode(Ext.Element[c.hideMode.toUpperCase()]);if(c.overCls){c.el.hover(c.addOverCls,c.removeOverCls,c)}c.fireEvent("render",c);c.initContent();c.afterRender(b);c.fireEvent("afterrender",c);c.initEvents();if(c.hidden){c.el.hide()}if(c.disabled){c.disable(true)}delete c.rendering}return c},onRender:function(b,a){var g=this,d=g.el,e=g.initStyles(),j,h,c;a=g.getInsertPosition(a);if(!d){if(a){d=Ext.DomHelper.insertBefore(a,g.getElConfig(),true)}else{d=Ext.DomHelper.append(b,g.getElConfig(),true)}}else{if(g.allowDomMove!==false){if(a){b.dom.insertBefore(d.dom,a)}else{b.dom.appendChild(d.dom)}}}if(Ext.scopeResetCSS&&!g.ownerCt){if(d.dom==Ext.getBody().dom){d.parent().addCls(Ext.baseCSSPrefix+"reset")}else{g.resetEl=d.wrap({cls:Ext.baseCSSPrefix+"reset"})}}g.setUI(g.ui);d.addCls(g.initCls());d.setStyle(e);g.el=d;g.initFrame();j=g.initRenderTpl();if(j){h=g.initRenderData();j.append(g.getTargetEl(),h)}g.applyRenderSelectors();g.rendered=true},afterRender:function(){var a=this,c,b;a.getComponentLayout();if(a.collapsed||(!a.ownerCt||(a.height||a.width))){a.setSize(a.width,a.height)}else{a.renderChildren()}if(a.floating&&(a.x===undefined||a.y===undefined)){if(a.floatParent){b=a.el.getAlignToXY(a.floatParent.getTargetEl(),"c-c");c=a.floatParent.getTargetEl().translatePoints(b[0],b[1])}else{b=a.el.getAlignToXY(a.container,"c-c");c=a.container.translatePoints(b[0],b[1])}a.x=a.x===undefined?c.left:a.x;a.y=a.y===undefined?c.top:a.y}if(Ext.isDefined(a.x)||Ext.isDefined(a.y)){a.setPosition(a.x,a.y)}if(a.styleHtmlContent){a.getTargetEl().addCls(a.styleHtmlCls)}},registerFloatingItem:function(b){var a=this;if(!a.floatingItems){a.floatingItems=Ext.create("Ext.ZIndexManager",a)}a.floatingItems.register(b)},renderChildren:function(){var b=this,a=b.getComponentLayout();b.suspendLayout=true;a.renderChildren();delete b.suspendLayout},frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[-]frame\d+[TMB][LCR]$/,frameElementCls:{tl:[],tc:[],tr:[],ml:[],mc:[],mr:[],bl:[],bc:[],br:[]},frameTpl:['<tpl if="top">','<tpl if="left"><div id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl></tpl>" style="background-position: {tl}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl></tpl>" style="background-position: {tr}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl></tpl>" style="background-position: {tc}; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl></tpl>" style="background-position: {ml}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl></tpl>" style="background-position: {mr}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl></tpl>" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl></tpl>" style="background-position: {bl}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl></tpl>" style="background-position: {br}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl></tpl>" style="background-position: {bc}; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>"],frameTableTpl:["<table><tbody>",'<tpl if="top">',"<tr>",'<tpl if="left"><td id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl></tpl>" style="background-position: {tl}; padding-left:{frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl></tpl>" style="background-position: {tc}; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl></tpl>" style="background-position: {tr}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","<tr>",'<tpl if="left"><td id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl></tpl>" style="background-position: {ml}; padding-left: {frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl></tpl>" style="background-position: 0 0;" role="presentation"></td>','<tpl if="right"><td id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl></tpl>" style="background-position: {mr}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">',"<tr>",'<tpl if="left"><td id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl></tpl>" style="background-position: {bl}; padding-left: {frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl></tpl>" style="background-position: {bc}; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl></tpl>" style="background-position: {br}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","</tbody></table>"],initFrame:function(){if(Ext.supports.CSS3BorderRadius){return false}var e=this,d=e.getFrameInfo(),b=d.width,a=e.getFrameTpl(d.table),c;if(e.frame){e.frameGenId=c=(e.frameGenId||0)+1;c=e.id+"-frame"+c;a.insertFirst(e.el,Ext.apply({},{fgid:c,ui:e.ui,uiCls:e.uiCls,frameCls:e.frameCls,baseCls:e.baseCls,frameWidth:b,top:!!d.top,left:!!d.left,right:!!d.right,bottom:!!d.bottom},e.getFramePositions(d)));e.frameBody=e.el.down("."+e.frameCls+"-mc");e.removeChildEls(function(g){return g.id&&e.frameIdRegex.test(g.id)});Ext.each(["TL","TC","TR","ML","MC","MR","BL","BC","BR"],function(g){e.childEls.push({name:"frame"+g,id:c+g})})}},updateFrame:function(){if(Ext.supports.CSS3BorderRadius){return false}var e=this,h=this.frameSize&&this.frameSize.table,g=this.frameTL,d=this.frameBL,c=this.frameML,a=this.frameMC,b;this.initFrame();if(a){if(e.frame){delete e.frameTL;delete e.frameTC;delete e.frameTR;delete e.frameML;delete e.frameMC;delete e.frameMR;delete e.frameBL;delete e.frameBC;delete e.frameBR;this.applyRenderSelectors();b=this.frameMC.dom.className;a.insertAfter(this.frameMC);this.frameMC.remove();this.frameBody=this.frameMC=a;a.dom.className=b;if(h){e.el.query("> table")[1].remove()}else{if(g){g.remove()}if(d){d.remove()}c.remove()}}else{}}else{if(e.frame){this.applyRenderSelectors()}}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius){return false}var c=this,g=c.el.getStyle("background-position-x"),e=c.el.getStyle("background-position-y"),d,b=false,a;if(!g&&!e){d=c.el.getStyle("background-position").split(" ");g=d[0];e=d[1]}if(parseInt(g,10)>=1000000&&parseInt(e,10)>=1000000){a=Math.max;b={table:g.substr(0,3)=="110",vertical:e.substr(0,3)=="110",top:a(g.substr(3,2),g.substr(5,2)),right:a(g.substr(5,2),e.substr(3,2)),bottom:a(e.substr(3,2),e.substr(5,2)),left:a(e.substr(5,2),g.substr(3,2))};b.width=a(b.top,b.right,b.bottom,b.left);c.el.setStyle("background-image","none")}if(c.frame===true&&!b){}c.frame=c.frame||!!b;c.frameSize=b||false;return b},getFramePositions:function(e){var h=this,j=e.width,k=h.dock,d,b,g,c,a;if(e.vertical){b="0 -"+(j*0)+"px";g="0 -"+(j*1)+"px";if(k&&k=="right"){b="right -"+(j*0)+"px";g="right -"+(j*1)+"px"}d={tl:"0 -"+(j*0)+"px",tr:"0 -"+(j*1)+"px",bl:"0 -"+(j*2)+"px",br:"0 -"+(j*3)+"px",ml:"-"+(j*1)+"px 0",mr:"right 0",tc:b,bc:g}}else{c="-"+(j*0)+"px 0";a="right 0";if(k&&k=="bottom"){c="left bottom";a="right bottom"}d={tl:"0 -"+(j*2)+"px",tr:"right -"+(j*3)+"px",bl:"0 -"+(j*4)+"px",br:"right -"+(j*5)+"px",ml:c,mr:a,tc:"0 -"+(j*0)+"px",bc:"0 -"+(j*1)+"px"}}return d},getFrameTpl:function(a){return a?this.getTpl("frameTableTpl"):this.getTpl("frameTpl")},initCls:function(){var b=this,a=[];a.push(b.baseCls);if(Ext.isDefined(b.cmpCls)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.Component: cmpCls has been deprecated. Please use componentCls.")}b.componentCls=b.cmpCls;delete b.cmpCls}if(b.componentCls){a.push(b.componentCls)}else{b.componentCls=b.baseCls}if(b.cls){a.push(b.cls);delete b.cls}return a.concat(b.additionalCls)},setUI:function(g){var e=this,b=Ext.Array.clone(e.uiCls),h=[],d=[],a,c;for(c=0;c<b.length;c++){a=b[c];d=d.concat(e.removeClsWithUI(a,true));h.push(a)}if(d.length){e.removeCls(d)}e.removeUIFromElement();e.ui=g;e.addUIToElement();d=[];for(c=0;c<h.length;c++){a=h[c];d=d.concat(e.addClsWithUI(a,true))}if(d.length){e.addCls(d)}},addClsWithUI:function(a,e){var d=this,c=[],b;if(!Ext.isArray(a)){a=[a]}for(b=0;b<a.length;b++){if(a[b]&&!d.hasUICls(a[b])){d.uiCls=Ext.Array.clone(d.uiCls);d.uiCls.push(a[b]);c=c.concat(d.addUIClsToElement(a[b]))}}if(e!==true){d.addCls(c)}return c},removeClsWithUI:function(a,e){var d=this,c=[],b;if(!Ext.isArray(a)){a=[a]}for(b=0;b<a.length;b++){if(a[b]&&d.hasUICls(a[b])){d.uiCls=Ext.Array.remove(d.uiCls,a[b]);c=c.concat(d.removeUIClsFromElement(a[b]))}}if(e!==true){d.removeCls(c)}return c},hasUICls:function(a){var b=this,c=b.uiCls||[];return Ext.Array.contains(c,a)},addUIClsToElement:function(m,a){var h=this,n=[],k=h.frameElementCls;n.push(Ext.baseCSSPrefix+m);n.push(h.baseCls+"-"+m);n.push(h.baseCls+"-"+h.ui+"-"+m);if(!a&&h.frame&&!Ext.supports.CSS3BorderRadius){var e=["tl","tc","tr","ml","mc","mr","bl","bc","br"],c,g,d,b;for(g=0;g<e.length;g++){b=h["frame"+e[g].toUpperCase()];c=[h.baseCls+"-"+h.ui+"-"+e[g],h.baseCls+"-"+h.ui+"-"+m+"-"+e[g]];if(b&&b.dom){b.addCls(c)}else{for(d=0;d<c.length;d++){if(Ext.Array.indexOf(k[e[g]],c[d])==-1){k[e[g]].push(c[d])}}}}}h.frameElementCls=k;return n},removeUIClsFromElement:function(b,j){var h=this,a=[],g=h.frameElementCls;a.push(Ext.baseCSSPrefix+b);a.push(h.baseCls+"-"+b);a.push(h.baseCls+"-"+h.ui+"-"+b);if(!j&&h.frame&&!Ext.supports.CSS3BorderRadius){var d=["tl","tc","tr","ml","mc","mr","bl","bc","br"],c,e;b=h.baseCls+"-"+h.ui+"-"+b+"-"+d[c];for(c=0;c<d.length;c++){e=h["frame"+d[c].toUpperCase()];if(e&&e.dom){e.removeCls(b)}else{Ext.Array.remove(g[d[c]],b)}}}h.frameElementCls=g;return a},addUIToElement:function(h){var g=this,e=g.frameElementCls;g.addCls(g.baseCls+"-"+g.ui);if(g.frame&&!Ext.supports.CSS3BorderRadius){var c=["tl","tc","tr","ml","mc","mr","bl","bc","br"],b,d,a;for(b=0;b<c.length;b++){d=g["frame"+c[b].toUpperCase()];a=g.baseCls+"-"+g.ui+"-"+c[b];if(d){d.addCls(a)}else{if(!Ext.Array.contains(e[c[b]],a)){e[c[b]].push(a)}}}}},removeUIFromElement:function(){var h=this,g=h.frameElementCls;h.removeCls(h.baseCls+"-"+h.ui);if(h.frame&&!Ext.supports.CSS3BorderRadius){var d=["tl","tc","tr","ml","mc","mr","bl","bc","br"],c,b,e,a;for(c=0;c<d.length;c++){e=h["frame"+d[c].toUpperCase()];a=h.baseCls+"-"+h.ui+"-"+d[c];if(e){e.removeCls(a)}else{Ext.Array.remove(g[d[c]],a)}}}},getElConfig:function(){if(Ext.isString(this.autoEl)){this.autoEl={tag:this.autoEl}}var a=this.autoEl||{tag:"div"};a.id=this.id;return a},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}return a},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=false}b.container=Ext.get(a);if(b.ctCls){b.container.addCls(b.ctCls)}return b.container},initRenderData:function(){var a=this;return Ext.applyIf(a.renderData,{id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame})},getTpl:function(c){var e=this,b=e.self.prototype,d,a;if(e.hasOwnProperty(c)){a=e[c];if(a&&!(a instanceof Ext.XTemplate)){e[c]=Ext.ClassManager.dynInstantiate("Ext.XTemplate",a)}return e[c]}if(!(b[c] instanceof Ext.XTemplate)){d=b;do{if(d.hasOwnProperty(c)){a=d[c];if(a&&!(a instanceof Ext.XTemplate)){d[c]=Ext.ClassManager.dynInstantiate("Ext.XTemplate",a);break}}d=d.superclass}while(d)}return b[c]},initRenderTpl:function(){return this.getTpl("renderTpl")},initStyles:function(){var b={},c=this,a=Ext.Element;if(Ext.isString(c.style)){b=a.parseStyles(c.style)}else{b=Ext.apply({},c.style)}if(c.padding!==undefined){b.padding=a.unitizeBox((c.padding===true)?5:c.padding)}if(c.margin!==undefined){b.margin=a.unitizeBox((c.margin===true)?5:c.margin)}delete c.style;return b},initContent:function(){var b=this,d=b.getTargetEl(),a,c;if(b.html){d.update(Ext.DomHelper.markup(b.html));delete b.html}if(b.contentEl){a=Ext.get(b.contentEl);c=Ext.baseCSSPrefix;a.removeCls([c+"hidden",c+"hide-display",c+"hide-offsets",c+"hide-nosize"]);d.appendChild(a.dom)}if(b.tpl){if(!b.tpl.isTemplate){b.tpl=Ext.create("Ext.XTemplate",b.tpl)}if(b.data){b.tpl[b.tplWriteMode](d,b.data);delete b.data}}},initEvents:function(){var c=this,e=c.afterRenderEvents,b,d,a=function(g){c.mon(b,g)};if(e){for(d in e){if(e.hasOwnProperty(d)){b=c[d];if(b&&b.on){Ext.each(e[d],a)}}}}},addChildEls:function(){var b=this,a=b.childEls||(b.childEls=[]);a.push.apply(a,arguments)},removeChildEls:function(g){var e=this,a=e.childEls,d=(e.childEls=[]),h,b,c;for(b=0,h=a.length;b<h;++b){c=a[b];if(!g(c)){d.push(c)}}},applyRenderSelectors:function(){var g=this,h=g.childEls,j=g.renderSelectors,a=g.el,d=a.dom,k,m,c,e,b;if(h){k=g.id+"-";for(e=h.length;e--;){m=c=h[e];if(typeof(m)!="string"){c=m.id||(k+m.itemId);m=m.name}else{c=k+c}g[m]=a.getById(c)}}if(j){for(b in j){if(j.hasOwnProperty(b)&&j[b]){g[b]=Ext.get(Ext.DomQuery.selectNode(j[b],d))}}}},is:function(a){return Ext.ComponentQuery.is(this,a)},up:function(b){var a=this.ownerCt;if(b){for(;a;a=a.ownerCt){if(Ext.ComponentQuery.is(a,b)){return a}}}return a},nextSibling:function(b){var g=this.ownerCt,d,e,a,h;if(g){d=g.items;a=d.indexOf(this)+1;if(a){if(b){for(e=d.getCount();a<e;a++){if((h=d.getAt(a)).is(b)){return h}}}else{if(a<d.getCount()){return d.getAt(a)}}}}return null},previousSibling:function(b){var e=this.ownerCt,d,a,g;if(e){d=e.items;a=d.indexOf(this);if(a!=-1){if(b){for(--a;a>=0;a--){if((g=d.getAt(a)).is(b)){return g}}}else{if(a){return d.getAt(--a)}}}}return null},previousNode:function(c,d){var h=this,b,g,a,e;if(d&&h.is(c)){return h}b=this.prev(c);if(b){return b}if(h.ownerCt){for(g=h.ownerCt.items.items,e=Ext.Array.indexOf(g,h)-1;e>-1;e--){if(g[e].query){b=g[e].query(c);b=b[b.length-1];if(b){return b}}}return h.ownerCt.previousNode(c,true)}},nextNode:function(c,d){var h=this,b,g,a,e;if(d&&h.is(c)){return h}b=this.next(c);if(b){return b}if(h.ownerCt){for(g=h.ownerCt.items,e=g.indexOf(h)+1,g=g.items,a=g.length;e<a;e++){if(g[e].down){b=g[e].down(c);if(b){return b}}}return h.ownerCt.nextNode(c)}},getId:function(){return this.id||(this.id="ext-comp-"+(this.getAutoId()))},getItemId:function(){return this.itemId||this.id},getEl:function(){return this.el},getTargetEl:function(){return this.frameBody||this.el},isXType:function(b,a){if(Ext.isFunction(b)){b=b.xtype}else{if(Ext.isObject(b)){b=b.statics().xtype}}return !a?("/"+this.getXTypes()+"/").indexOf("/"+b+"/")!=-1:this.self.xtype==b},getXTypes:function(){var c=this.self,d,b,a;if(!c.xtypes){d=[];b=this;while(b){a=b.xtypes;if(a!==undefined){d.unshift.apply(d,a)}b=b.superclass}c.xtypeChain=d;c.xtypes=d.join("/")}return c.xtypes},update:function(b,c,a){var d=this;if(d.tpl&&!Ext.isString(b)){d.data=b;if(d.rendered){d.tpl[d.tplWriteMode](d.getTargetEl(),b||{})}}else{d.html=Ext.isObject(b)?Ext.DomHelper.markup(b):b;if(d.rendered){d.getTargetEl().update(d.html,c,a)}}if(d.rendered){d.doComponentLayout()}},setVisible:function(a){return this[a?"show":"hide"]()},isVisible:function(a){var c=this,e=c,d=!c.hidden,b=c.ownerCt;c.hiddenAncestor=false;if(c.destroyed){return false}if(a&&d&&c.rendered&&b){while(b){if(b.hidden||(b.collapsed&&!(b.getDockedItems&&Ext.Array.contains(b.getDockedItems(),e)))){c.hiddenAncestor=b;d=false;break}e=b;b=b.ownerCt}}return d},enable:function(a){var b=this;if(b.rendered){b.el.removeCls(b.disabledCls);b.el.dom.disabled=false;b.onEnable()}b.disabled=false;if(a!==true){b.fireEvent("enable",b)}return b},disable:function(a){var b=this;if(b.rendered){b.el.addCls(b.disabledCls);b.el.dom.disabled=true;b.onDisable()}b.disabled=true;if(a!==true){b.fireEvent("disable",b)}return b},onEnable:function(){if(this.maskOnDisable){this.el.unmask()}},onDisable:function(){if(this.maskOnDisable){this.el.mask()}},isDisabled:function(){return this.disabled},setDisabled:function(a){return this[a?"disable":"enable"]()},isHidden:function(){return this.hidden},addCls:function(a){var b=this;if(!a){return b}if(!Ext.isArray(a)){a=a.replace(b.trimRe,"").split(b.spacesRe)}if(b.rendered){b.el.addCls(a)}else{b.additionalCls=Ext.Array.unique(b.additionalCls.concat(a))}return b},addClass:function(){return this.addCls.apply(this,arguments)},removeCls:function(a){var b=this;if(!a){return b}if(!Ext.isArray(a)){a=a.replace(b.trimRe,"").split(b.spacesRe)}if(b.rendered){b.el.removeCls(a)}else{if(b.additionalCls.length){Ext.each(a,function(c){Ext.Array.remove(b.additionalCls,c)})}}return b},addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},removeOverCls:function(){this.el.removeCls(this.overCls)},addListener:function(b,g,e,a){var h=this,d,c;if(Ext.isString(b)&&(Ext.isObject(g)||a&&a.element)){if(a.element){d=g;g={};g[b]=d;b=a.element;if(e){g.scope=e}for(c in a){if(a.hasOwnProperty(c)){if(h.eventOptionsRe.test(c)){g[c]=a[c]}}}}if(h[b]&&h[b].on){h.mon(h[b],g)}else{h.afterRenderEvents=h.afterRenderEvents||{};if(!h.afterRenderEvents[b]){h.afterRenderEvents[b]=[]}h.afterRenderEvents[b].push(g)}}return h.mixins.observable.addListener.apply(h,arguments)},removeManagedListenerItem:function(b,a,j,d,g,e){var h=this,c=a.options?a.options.element:null;if(c){c=h[c];if(c&&c.un){if(b||(a.item===j&&a.ename===d&&(!g||a.fn===g)&&(!e||a.scope===e))){c.un(a.ename,a.fn,a.scope);if(!b){Ext.Array.remove(h.managedListeners,a)}}}}else{return h.mixins.observable.removeManagedListenerItem.apply(h,arguments)}},getBubbleTarget:function(){return this.ownerCt},isFloating:function(){return this.floating},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},onAdded:function(a,b){this.ownerCt=a;this.fireEvent("added",this,a,b)},onRemoved:function(){var a=this;a.fireEvent("removed",a,a.ownerCt);delete a.ownerCt},beforeDestroy:Ext.emptyFn,onResize:Ext.emptyFn,setSize:function(b,a){var c=this,d;if(Ext.isObject(b)){a=b.height;b=b.width}if(Ext.isNumber(b)){b=Ext.Number.constrain(b,c.minWidth,c.maxWidth)}if(Ext.isNumber(a)){a=Ext.Number.constrain(a,c.minHeight,c.maxHeight)}if(!c.rendered||!c.isVisible()){if(c.hiddenAncestor){d=c.hiddenAncestor.layoutOnShow;d.remove(c);d.add(c)}c.needsLayout={width:b,height:a,isSetSize:true};if(!c.rendered){c.width=(b!==undefined)?b:c.width;c.height=(a!==undefined)?a:c.height}return c}c.doComponentLayout(b,a,true);return c},isFixedWidth:function(){var b=this,a=b.layoutManagedWidth;if(Ext.isDefined(b.width)||a==1){return true}if(a==2){return false}return(b.ownerCt&&b.ownerCt.isFixedWidth())},isFixedHeight:function(){var a=this,b=a.layoutManagedHeight;if(Ext.isDefined(a.height)||b==1){return true}if(b==2){return false}return(a.ownerCt&&a.ownerCt.isFixedHeight())},setCalculatedSize:function(b,a,e){var c=this,d;if(Ext.isObject(b)){e=b.ownerCt;a=b.height;b=b.width}if(Ext.isNumber(b)){b=Ext.Number.constrain(b,c.minWidth,c.maxWidth)}if(Ext.isNumber(a)){a=Ext.Number.constrain(a,c.minHeight,c.maxHeight)}if(!c.rendered||!c.isVisible()){if(c.hiddenAncestor){d=c.hiddenAncestor.layoutOnShow;d.remove(c);d.add(c)}c.needsLayout={width:b,height:a,isSetSize:false,ownerCt:e};return c}c.doComponentLayout(b,a,false,e);return c},doComponentLayout:function(e,b,c,h){var g=this,d=g.getComponentLayout(),a=d.lastComponentSize||{width:undefined,height:undefined};if(g.rendered&&d){if(!Ext.isDefined(e)){if(g.isFixedWidth()){e=Ext.isDefined(g.width)?g.width:a.width}}if(!Ext.isDefined(b)){if(g.isFixedHeight()){b=Ext.isDefined(g.height)?g.height:a.height}}if(c){g.width=e;g.height=b}d.layout(e,b,c,h)}return g},forceComponentLayout:function(){this.doComponentLayout()},setComponentLayout:function(b){var a=this.componentLayout;if(a&&a.isLayout&&a!=b){a.setOwner(null)}this.componentLayout=b;b.setOwner(this)},getComponentLayout:function(){var a=this;if(!a.componentLayout||!a.componentLayout.isLayout){a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,"autocomponent"))}return a.componentLayout},afterComponentLayout:function(c,a,b,h){var g=this,e=g.componentLayout,d=g.preLayoutSize;++g.componentLayoutCounter;if(!d||((c!==d.width)||(a!==d.height))){g.fireEvent("resize",g,c,a)}},beforeComponentLayout:function(c,a,b,d){this.preLayoutSize=this.componentLayout.lastComponentSize;return true},setPosition:function(a,c){var b=this;if(Ext.isObject(a)){c=a.y;a=a.x}if(!b.rendered){return b}if(a!==undefined||c!==undefined){b.el.setBox(a,c);b.onPosition(a,c);b.fireEvent("move",b,a,c)}return b},onPosition:Ext.emptyFn,setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return this.el.getSize()},getWidth:function(){return this.el.getWidth()},getHeight:function(){return this.el.getHeight()},getLoader:function(){var c=this,b=c.autoLoad?(Ext.isObject(c.autoLoad)?c.autoLoad:{url:c.autoLoad}):null,a=c.loader||b;if(a){if(!a.isLoader){c.loader=Ext.create("Ext.ComponentLoader",Ext.apply({target:c,autoLoad:b},a))}else{a.setTarget(c)}return c.loader}return null},setLoading:function(c,d){var b=this,a;if(b.rendered){if(c!==false&&!b.collapsed){if(Ext.isObject(c)){a=c}else{if(Ext.isString(c)){a={msg:c}}else{a={}}}b.loadMask=b.loadMask||Ext.create("Ext.LoadMask",d?b.getTargetEl():b.el,a);b.loadMask.show()}else{if(b.loadMask){Ext.destroy(b.loadMask);b.loadMask=null}}}return b.loadMask},setDocked:function(b,c){var a=this;a.dock=b;if(c&&a.ownerCt&&a.rendered){a.ownerCt.doComponentLayout()}return a},onDestroy:function(){var a=this;if(a.monitorResize&&Ext.EventManager.resizeEvent){Ext.EventManager.resizeEvent.removeListener(a.setSize,a)}Ext.destroy(a.componentLayout,a.loadMask,a.floatingItems)},cleanElementRefs:function(){var h=this,e=0,g=h.childEls,d=h.renderSelectors,b,c,a;if(h.rendered){if(g){for(a=g.length;e<a;++e){c=g[e];if(typeof(c)!="string"){c=c.name}delete h[c]}}if(d){for(b in d){if(d.hasOwnProperty(b)){delete h[b]}}}}delete h.rendered;delete h.el;delete h.frameBody},destroy:function(){var a=this;if(!a.isDestroyed){if(a.fireEvent("beforedestroy",a)!==false){a.destroying=true;a.beforeDestroy();if(a.floating){delete a.floatParent;if(a.zIndexManager){a.zIndexManager.unregister(a)}}else{if(a.ownerCt&&a.ownerCt.remove){a.ownerCt.remove(a,false)}}a.onDestroy();Ext.destroy(a.plugins);if(a.rendered){a.el.remove()}a.fireEvent("destroy",a);Ext.ComponentManager.unregister(a);a.mixins.state.destroy.call(a);a.clearListeners();a.cleanElementRefs();a.destroying=false;a.isDestroyed=true}}},getPlugin:function(b){var c=0,a=this.plugins,d=a.length;for(;c<d;c++){if(a[c].pluginId===b){return a[c]}}},isDescendantOf:function(a){return !!this.findParentBy(function(b){return b===a})}},function(){this.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"})});Ext.define("Ext.AbstractPlugin",{disabled:false,constructor:function(a){Ext.apply(this,a)},getCmp:function(){return this.cmp},init:Ext.emptyFn,destroy:Ext.emptyFn,enable:function(){this.disabled=false},disable:function(){this.disabled=true}});Ext.define("Ext.data.Connection",{mixins:{observable:"Ext.util.Observable"},statics:{requestId:0},url:null,async:true,method:null,username:"",password:"",disableCaching:true,withCredentials:false,cors:false,disableCachingParam:"_dc",timeout:30000,useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",constructor:function(a){a=a||{};Ext.apply(this,a);this.addEvents("beforerequest","requestcomplete","requestexception");this.requests={};this.mixins.observable.constructor.call(this)},request:function(m){m=m||{};var g=this,k=m.scope||window,e=m.username||g.username,h=m.password||g.password||"",b,c,d,a,j;if(g.fireEvent("beforerequest",g,m)!==false){c=g.setOptions(m,k);if(this.isFormUpload(m)===true){this.upload(m.form,c.url,c.data,m);return null}if(m.autoAbort===true||g.autoAbort){g.abort()}if((m.cors===true||g.cors===true)&&Ext.isIe&&Ext.ieVersion>=8){j=new XDomainRequest()}else{j=this.getXhrInstance()}b=m.async!==false?(m.async||g.async):false;if(e){j.open(c.method,c.url,b,e,h)}else{j.open(c.method,c.url,b)}if(m.withCredentials===true||g.withCredentials===true){j.withCredentials=true}a=g.setupHeaders(j,m,c.data,c.params);d={id:++Ext.data.Connection.requestId,xhr:j,headers:a,options:m,async:b,timeout:setTimeout(function(){d.timedout=true;g.abort(d)},m.timeout||g.timeout)};g.requests[d.id]=d;g.latestId=d.id;if(b){j.onreadystatechange=Ext.Function.bind(g.onStateChange,g,[d])}j.send(c.data);if(!b){return this.onComplete(d)}return d}else{Ext.callback(m.callback,m.scope,[m,undefined,undefined]);return null}},upload:function(d,b,j,m){d=Ext.getDom(d);m=m||{};var c=Ext.id(),g=document.createElement("iframe"),k=[],h="multipart/form-data",e={target:d.target,method:d.method,encoding:d.encoding,enctype:d.enctype,action:d.action},a;Ext.fly(g).set({id:c,name:c,cls:Ext.baseCSSPrefix+"hide-display",src:Ext.SSL_SECURE_URL});document.body.appendChild(g);if(document.frames){document.frames[c].name=c}Ext.fly(d).set({target:c,method:"POST",enctype:h,encoding:h,action:b||e.action});if(j){Ext.iterate(Ext.Object.fromQueryString(j),function(n,p){a=document.createElement("input");Ext.fly(a).set({type:"hidden",value:p,name:n});d.appendChild(a);k.push(a)})}Ext.fly(g).on("load",Ext.Function.bind(this.onUploadComplete,this,[g,m]),null,{single:true});d.submit();Ext.fly(d).set(e);Ext.each(k,function(n){Ext.removeNode(n)})},onUploadComplete:function(j,b){var c=this,a={responseText:"",responseXML:null},h,g;try{h=j.contentWindow.document||j.contentDocument||window.frames[j.id].document;if(h){if(h.body){if(/textarea/i.test((g=h.body.firstChild||{}).tagName)){a.responseText=g.value}else{a.responseText=h.body.innerHTML}}a.responseXML=h.XMLDocument||h}}catch(d){}c.fireEvent("requestcomplete",c,a,b);Ext.callback(b.success,b.scope,[a,b]);Ext.callback(b.callback,b.scope,[b,true,a]);setTimeout(function(){Ext.removeNode(j)},100)},isFormUpload:function(a){var b=this.getForm(a);if(b){return(a.isUpload||(/multipart\/form-data/i).test(b.getAttribute("enctype")))}return false},getForm:function(a){return Ext.getDom(a.form)||null},setOptions:function(n,m){var j=this,e=n.params||{},h=j.extraParams,d=n.urlParams,c=n.url||j.url,k=n.jsonData,b,a,g;if(Ext.isFunction(e)){e=e.call(m,n)}if(Ext.isFunction(c)){c=c.call(m,n)}c=this.setupUrl(n,c);g=n.rawData||n.xmlData||k||null;if(k&&!Ext.isPrimitive(k)){g=Ext.encode(g)}if(Ext.isObject(e)){e=Ext.Object.toQueryString(e)}if(Ext.isObject(h)){h=Ext.Object.toQueryString(h)}e=e+((h)?((e)?"&":"")+h:"");d=Ext.isObject(d)?Ext.Object.toQueryString(d):d;e=this.setupParams(n,e);b=(n.method||j.method||((e||g)?"POST":"GET")).toUpperCase();this.setupMethod(n,b);a=n.disableCaching!==false?(n.disableCaching||j.disableCaching):false;if(b==="GET"&&a){c=Ext.urlAppend(c,(n.disableCachingParam||j.disableCachingParam)+"="+(new Date().getTime()))}if((b=="GET"||g)&&e){c=Ext.urlAppend(c,e);e=null}if(d){c=Ext.urlAppend(c,d)}return{url:c,method:b,data:g||e||null}},setupUrl:function(b,a){var c=this.getForm(b);if(c){a=a||c.action}return a},setupParams:function(a,d){var c=this.getForm(a),b;if(c&&!this.isFormUpload(a)){b=Ext.Element.serializeForm(c);d=d?(d+"&"+b):b}return d},setupMethod:function(a,b){if(this.isFormUpload(a)){return"POST"}return b},setupHeaders:function(p,q,d,c){var j=this,b=Ext.apply({},q.headers||{},j.defaultHeaders||{}),n=j.defaultPostHeader,k=q.jsonData,a=q.xmlData,m,g;if(!b["Content-Type"]&&(d||c)){if(d){if(q.rawData){n="text/plain"}else{if(a&&Ext.isDefined(a)){n="text/xml"}else{if(k&&Ext.isDefined(k)){n="application/json"}}}}b["Content-Type"]=n}if(j.useDefaultXhrHeader&&!b["X-Requested-With"]){b["X-Requested-With"]=j.defaultXhrHeader}try{for(m in b){if(b.hasOwnProperty(m)){g=b[m];p.setRequestHeader(m,g)}}}catch(h){j.fireEvent("exception",m,g)}return b},getXhrInstance:(function(){var b=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0,a=b.length,g;for(;c<a;++c){try{g=b[c];g();break}catch(d){}}return g})(),isLoading:function(a){if(!a){a=this.getLatest()}if(!(a&&a.xhr)){return false}var b=a.xhr.readyState;return !(b===0||b==4)},abort:function(b){var a=this;if(!b){b=a.getLatest()}if(b&&a.isLoading(b)){b.xhr.onreadystatechange=null;b.xhr.abort();a.clearTimeout(b);if(!b.timedout){b.aborted=true}a.onComplete(b);a.cleanup(b)}},abortAll:function(){var b=this.requests,a;for(a in b){if(b.hasOwnProperty(a)){this.abort(b[a])}}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},onStateChange:function(a){if(a.xhr.readyState==4){this.clearTimeout(a);this.onComplete(a);this.cleanup(a)}},clearTimeout:function(a){clearTimeout(a.timeout);delete a.timeout},cleanup:function(a){a.xhr=null;delete a.xhr},onComplete:function(g){var d=this,c=g.options,a,j,b;try{a=d.parseStatus(g.xhr.status)}catch(h){a={success:false,isException:false}}j=a.success;if(j){b=d.createResponse(g);d.fireEvent("requestcomplete",d,b,c);Ext.callback(c.success,c.scope,[b,c])}else{if(a.isException||g.aborted||g.timedout){b=d.createException(g)}else{b=d.createResponse(g)}d.fireEvent("requestexception",d,b,c);Ext.callback(c.failure,c.scope,[b,c])}Ext.callback(c.callback,c.scope,[c,j,b]);delete d.requests[g.id];return b},parseStatus:function(a){a=a==1223?204:a;var c=(a>=200&&a<300)||a==304,b=false;if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=true;break}}return{success:c,isException:b}},createResponse:function(c){var j=c.xhr,a={},k=j.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),d=k.length,m,e,h,g,b;while(d--){m=k[d];e=m.indexOf(":");if(e>=0){h=m.substr(0,e).toLowerCase();if(m.charAt(e+1)==" "){++e}a[h]=m.substr(e+1)}}c.xhr=null;delete c.xhr;b={request:c,requestId:c.id,status:j.status,statusText:j.statusText,getResponseHeader:function(n){return a[n.toLowerCase()]},getAllResponseHeaders:function(){return a},responseText:j.responseText,responseXML:j.responseXML};j=null;return b},createException:function(a){return{request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?"transaction aborted":"communication failure",aborted:a.aborted,timedout:a.timedout}}});Ext.define("Ext.Ajax",{extend:"Ext.data.Connection",singleton:true,autoAbort:false});Ext.define("Ext.ElementLoader",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.data.Connection","Ext.Ajax"],statics:{Renderer:{Html:function(a,b,c){a.getTarget().update(b.responseText,c.scripts===true);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(b){var c=this,a;b=b||{};Ext.apply(c,b);c.setTarget(c.target);c.addEvents("beforeload","exception","load");c.mixins.observable.constructor.call(c);if(c.autoLoad){a=c.autoLoad;if(a===true){a={}}c.load(a)}},setTarget:function(b){var a=this;b=Ext.get(b);if(a.target&&a.target!=b){a.abort()}a.target=b},getTarget:function(){return this.target||null},abort:function(){var a=this.active;if(a!==undefined){Ext.Ajax.abort(a.request);if(a.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===true?null:a)},load:function(j){j=Ext.apply({},j);var e=this,d=e.target,k=Ext.isDefined(j.loadMask)?j.loadMask:e.loadMask,b=Ext.apply({},j.params),a=Ext.apply({},j.ajaxOptions),g=j.callback||e.callback,h=j.scope||e.scope||e,c;Ext.applyIf(a,e.ajaxOptions);Ext.applyIf(j,a);Ext.applyIf(b,e.params);Ext.apply(b,e.baseParams);Ext.applyIf(j,{url:e.url});Ext.apply(j,{scope:e,params:b,callback:e.onComplete});if(e.fireEvent("beforeload",e,j)===false){return}if(k){e.addMask(k)}c=Ext.Ajax.request(j);e.active={request:c,options:j,mask:k,scope:h,callback:g,success:j.success||e.success,failure:j.failure||e.failure,renderer:j.renderer||e.renderer,scripts:Ext.isDefined(j.scripts)?j.scripts:e.scripts};e.setOptions(e.active,j)},setOptions:Ext.emptyFn,onComplete:function(b,h,a){var d=this,g=d.active,c=g.scope,e=d.getRenderer(g.renderer);if(h){h=e.call(d,d,a,g)}if(h){Ext.callback(g.success,c,[d,a,b]);d.fireEvent("load",d,a,b)}else{Ext.callback(g.failure,c,[d,a,b]);d.fireEvent("exception",d,a,b)}Ext.callback(g.callback,c,[d,h,a,b]);if(g.mask){d.removeMask()}delete d.active},getRenderer:function(a){if(Ext.isFunction(a)){return a}return this.statics().Renderer.Html},startAutoRefresh:function(a,b){var c=this;c.stopAutoRefresh();c.autoRefresh=setInterval(function(){c.load(b)},a)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh();delete a.target;a.abort();a.clearListeners()}});Ext.define("Ext.ComponentLoader",{extend:"Ext.ElementLoader",statics:{Renderer:{Data:function(a,b,d){var g=true;try{a.getTarget().update(Ext.decode(b.responseText))}catch(c){g=false}return g},Component:function(a,c,h){var j=true,g=a.getTarget(),b=[];try{b=Ext.decode(c.responseText)}catch(d){j=false}if(j){if(h.removeAll){g.removeAll()}g.add(b)}return j}}},target:null,loadMask:false,renderer:"html",setTarget:function(b){var a=this;if(Ext.isString(b)){b=Ext.getCmp(b)}if(a.target&&a.target!=b){a.abort()}a.target=b},removeMask:function(){this.target.setLoading(false)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll},getRenderer:function(b){if(Ext.isFunction(b)){return b}var a=this.statics().Renderer;switch(b){case"component":return a.Component;case"data":return a.Data;default:return Ext.ElementLoader.Renderer.Html}}});Ext.define("Ext.data.Association",{primaryKey:"id",defaultReaderType:"json",statics:{create:function(a){if(!a.isAssociation){if(Ext.isString(a)){a={type:a}}switch(a.type){case"belongsTo":return Ext.create("Ext.data.BelongsToAssociation",a);case"hasMany":return Ext.create("Ext.data.HasManyAssociation",a);default:}}return a}},constructor:function(b){Ext.apply(this,b);var c=Ext.ModelManager.types,d=b.ownerModel,g=b.associatedModel,e=c[d],h=c[g],a;this.ownerModel=e;this.associatedModel=h;Ext.applyIf(this,{ownerName:d,associatedName:g})},getReader:function(){var c=this,a=c.reader,b=c.associatedModel;if(a){if(Ext.isString(a)){a={type:a}}if(a.isReader){a.setModel(b)}else{Ext.applyIf(a,{model:b,type:c.defaultReaderType})}c.reader=Ext.createByAlias("reader."+a.type,a)}return c.reader||null}});Ext.define("Ext.ModelManager",{extend:"Ext.AbstractManager",alternateClassName:"Ext.ModelMgr",requires:["Ext.data.Association"],singleton:true,typeName:"mtype",associationStack:[],registerType:function(c,b){var d=b.prototype,a;if(d&&d.isModel){a=b}else{if(!b.extend){b.extend="Ext.data.Model"}a=Ext.define(c,b)}this.types[c]=a;return a},onModelDefined:function(c){var a=this.associationStack,g=a.length,e=[],b,d,h;for(d=0;d<g;d++){b=a[d];if(b.associatedModel==c.modelName){e.push(b)}}for(d=0,g=e.length;d<g;d++){h=e[d];this.types[h.ownerModel].prototype.associations.add(Ext.data.Association.create(h));Ext.Array.remove(a,h)}},registerDeferredAssociation:function(a){this.associationStack.push(a)},getModel:function(b){var a=b;if(typeof a=="string"){a=this.types[a]}return a},create:function(c,b,d){var a=typeof b=="function"?b:this.types[b||c.name];return new a(c,d)}},function(){Ext.regModel=function(){return this.ModelManager.registerType.apply(this.ModelManager,arguments)}});Ext.define("Ext.PluginManager",{extend:"Ext.AbstractManager",alternateClassName:"Ext.PluginMgr",singleton:true,typeName:"ptype",create:function(a,b){if(a.init){return a}else{return Ext.createByAlias("plugin."+(a.ptype||b),a)}},findByType:function(c,g){var e=[],b=this.types;for(var a in b){if(!b.hasOwnProperty(a)){continue}var d=b[a];if(d.type==c&&(!g||(g===true&&d.isDefault))){e.push(d)}}return e}},function(){Ext.preg=function(){return Ext.PluginManager.registerType.apply(Ext.PluginManager,arguments)}});Ext.define("Ext.Template",{requires:["Ext.DomHelper","Ext.util.Format"],inheritableStatics:{from:function(b,a){b=Ext.getDom(b);return new this(b.value||b.innerHTML,a||"")}},constructor:function(d){var g=this,b=arguments,a=[],c=0,e=b.length,h;g.initialConfig={};if(e>1){for(;c<e;c++){h=b[c];if(typeof h=="object"){Ext.apply(g.initialConfig,h);Ext.apply(g,h)}else{a.push(h)}}d=a.join("")}else{if(Ext.isArray(d)){a.push(d.join(""))}else{a.push(d)}}g.html=a.join("");if(g.compiled){g.compile()}},isTemplate:true,disableFormats:false,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,applyTemplate:function(a){var g=this,c=g.disableFormats!==true,e=Ext.util.Format,b=g;if(g.compiled){return g.compiled(a)}function d(h,k,n,j){if(n&&c){if(j){j=[a[k]].concat(Ext.functionFactory("return ["+j+"];")())}else{j=[a[k]]}if(n.substr(0,5)=="this."){return b[n.substr(5)].apply(b,j)}else{return e[n].apply(e,j)}}else{return a[k]!==undefined?a[k]:""}}return g.html.replace(g.re,d)},set:function(a,c){var b=this;b.html=a;b.compiled=null;return c?b.compile():b},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var me=this,fm=Ext.util.Format,useFormat=me.disableFormats!==true,body,bodyReturn;function fn(m,name,format,args){if(format&&useFormat){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format="this."+format.substr(5)+"("}}else{args="";format="(values['"+name+"'] == undefined ? '' : "}return"',"+format+"values['"+name+"']"+args+") ,'"}bodyReturn=me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn);body="this.compiled = function(values){ return ['"+bodyReturn+"'].join('');};";eval(body);return me},insertFirst:function(b,a,c){return this.doInsert("afterBegin",b,a,c)},insertBefore:function(b,a,c){return this.doInsert("beforeBegin",b,a,c)},insertAfter:function(b,a,c){return this.doInsert("afterEnd",b,a,c)},append:function(b,a,c){return this.doInsert("beforeEnd",b,a,c)},doInsert:function(c,e,b,a){e=Ext.getDom(e);var d=Ext.DomHelper.insertHtml(c,e,this.applyTemplate(b));return a?Ext.get(d,true):d},overwrite:function(b,a,c){b=Ext.getDom(b);b.innerHTML=this.applyTemplate(a);return c?Ext.get(b.firstChild,true):b.firstChild}},function(){this.createAlias("apply","applyTemplate")});Ext.define("Ext.XTemplate",{extend:"Ext.Template",argsRe:/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,nameRe:/^<tpl\b[^>]*?for="(.*?)"/,ifRe:/^<tpl\b[^>]*?if="(.*?)"/,execRe:/^<tpl\b[^>]*?exec="(.*?)"/,constructor:function(){this.callParent(arguments);var B=this,j=B.html,y=B.argsRe,c=B.nameRe,w=B.ifRe,A=B.execRe,r=0,k=[],q="values",z="parent",n="xindex",p="xcount",d="return ",b="with(values){ ",t,g,x,a,e,h,u,C,v;j=["<tpl>",j,"</tpl>"].join("");while((t=j.match(y))){e=null;h=null;u=null;g=t[0].match(c);x=t[0].match(w);a=t[0].match(A);e=x?x[1]:null;if(e){h=Ext.functionFactory(q,z,n,p,b+"try{"+d+Ext.String.htmlDecode(e)+";}catch(e){return;}}")}e=a?a[1]:null;if(e){u=Ext.functionFactory(q,z,n,p,b+Ext.String.htmlDecode(e)+";}")}C=g?g[1]:null;if(C){if(C==="."){C=q}else{if(C===".."){C=z}}C=Ext.functionFactory(q,z,"try{"+b+d+C+";}}catch(e){return;}")}k.push({id:r,target:C,exec:u,test:h,body:t[1]||""});j=j.replace(t[0],"{xtpl"+r+"}");r=r+1}for(v=k.length-1;v>=0;--v){B.compileTpl(k[v])}B.master=k[k.length-1];B.tpls=k},applySubTemplate:function(h,a,c,e,g){var d=this,b=d.tpls[h];return b.compiled.call(d,a,c,e,g)},codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?\}/g,compileTpl:function(tpl){var fm=Ext.util.Format,me=this,useFormat=me.disableFormats!==true,body,bodyReturn,evaluatedFn;function fn(m,name,format,args,math){var v;if(name.substr(0,4)=="xtpl"){return"',this.applySubTemplate("+name.substr(4)+", values, parent, xindex, xcount),'"}if(name=="."){v='Ext.Array.indexOf(["string", "number", "boolean"], typeof values) > -1 || Ext.isDate(values) ? values : ""'}else{if(name=="#"){v="xindex"}else{if(name.substr(0,7)=="parent."){v=name}else{if(name.indexOf(".")!=-1){v="values."+name}else{v="values['"+name+"']"}}}}if(math){v="("+v+math+")"}if(format&&useFormat){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format="this."+format.substr(5)+"("}}else{args="";format="("+v+" === undefined ? '' : "}return"',"+format+v+args+"),'"}function codeFn(m,code){return"',("+code.replace(me.compileARe,"'")+"),'"}bodyReturn=tpl.body.replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn).replace(me.codeRe,codeFn);body="evaluatedFn = function(values, parent, xindex, xcount){return ['"+bodyReturn+"'].join('');};";eval(body);tpl.compiled=function(values,parent,xindex,xcount){var vs,length,buffer,i;if(tpl.test&&!tpl.test.call(me,values,parent,xindex,xcount)){return""}vs=tpl.target?tpl.target.call(me,values,parent):values;if(!vs){return""}parent=tpl.target?values:parent;if(tpl.target&&Ext.isArray(vs)){buffer=[];length=vs.length;if(tpl.exec){for(i=0;i<length;i++){buffer[buffer.length]=evaluatedFn.call(me,vs[i],parent,i+1,length);tpl.exec.call(me,vs[i],parent,i+1,length)}}else{for(i=0;i<length;i++){buffer[buffer.length]=evaluatedFn.call(me,vs[i],parent,i+1,length)}}return buffer.join("")}if(tpl.exec){tpl.exec.call(me,vs,parent,xindex,xcount)}return evaluatedFn.call(me,vs,parent,xindex,xcount)};return this},applyTemplate:function(a){return this.master.compiled.call(this,a,{},1,1)},compile:function(){return this}},function(){this.createAlias("apply","applyTemplate")});Ext.define("Ext.app.Controller",{mixins:{observable:"Ext.util.Observable"},onClassExtended:function(j,c){var h=Ext.getClassName(j),d=h.match(/^(.*)\.controller\./);if(d!==null){var a=Ext.Loader.getPrefix(h)||d[1],g=c.onBeforeClassCreated,k=[],b=["model","view","store"],e;c.onBeforeClassCreated=function(w,p){var q,t,m,u,n,r,v;for(q=0,t=b.length;q<t;q++){m=b[q];u=Ext.Array.from(p[m+"s"]);for(n=0,r=u.length;n<r;n++){v=u[n];e=Ext.Loader.getPrefix(v);if(e===""||e===v){k.push(a+"."+m+"."+v)}else{k.push(v)}}}Ext.require(k,Ext.Function.pass(g,arguments,this))}}},constructor:function(a){this.mixins.observable.constructor.call(this,a);Ext.apply(this,a||{});this.createGetters("model",this.models);this.createGetters("store",this.stores);this.createGetters("view",this.views);if(this.refs){this.ref(this.refs)}},init:function(a){},onLaunch:function(a){},createGetters:function(b,a){b=Ext.String.capitalize(b);Ext.Array.each(a,function(d){var c="get",e=d.split(".");Ext.Array.each(e,function(g){c+=Ext.String.capitalize(g)});c+=b;if(!this[c]){this[c]=Ext.Function.pass(this["get"+b],[d],this)}this[c](d)},this)},ref:function(a){var b=this;a=Ext.Array.from(a);Ext.Array.each(a,function(e){var d=e.ref,c="get"+Ext.String.capitalize(d);if(!b[c]){b[c]=Ext.Function.pass(b.getRef,[d,e],b)}})},getRef:function(e,g,b){this.refCache=this.refCache||{};g=g||{};b=b||{};Ext.apply(g,b);if(g.forceCreate){return Ext.ComponentManager.create(g,"component")}var d=this,a=g.selector,c=d.refCache[e];if(!c){d.refCache[e]=c=Ext.ComponentQuery.query(g.selector)[0];if(!c&&g.autoCreate){d.refCache[e]=c=Ext.ComponentManager.create(g,"component")}if(c){c.on("beforedestroy",function(){d.refCache[e]=null})}}return c},control:function(a,b){this.application.control(a,b,this)},getController:function(a){return this.application.getController(a)},getStore:function(a){return this.application.getStore(a)},getModel:function(a){return this.application.getModel(a)},getView:function(a){return this.application.getView(a)}});Ext.define("Ext.data.IdGenerator",{isGenerator:true,constructor:function(a){var b=this;Ext.apply(b,a);if(b.id){Ext.data.IdGenerator.all[b.id]=b}},getRecId:function(a){return a.modelName+"-"+a.internalId},statics:{all:{},get:function(a){var c,d,b;if(typeof a=="string"){d=b=a;a=null}else{if(a.isGenerator){return a}else{d=a.id||a.type;b=a.type}}c=this.all[d];if(!c){c=Ext.create("idgen."+b,a)}return c}}});Ext.define("Ext.data.SortTypes",{singleton:true,none:function(a){return a},stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,"")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,""),10);return isNaN(b)?0:b}});Ext.define("Ext.util.Filter",{anyMatch:false,exactMatch:false,caseSensitive:false,constructor:function(a){var b=this;Ext.apply(b,a);b.filter=b.filter||b.filterFn;if(b.filter===undefined){if(b.property===undefined||b.value===undefined){}else{b.filter=b.createFilterFn()}b.filterFn=b.filter}},createFilterFn:function(){var a=this,c=a.createValueMatcher(),b=a.property;return function(d){var e=a.getRoot.call(a,d)[b];return c===null?e===null:c.test(e)}},getRoot:function(b){var a=this.root;return a===undefined?b:b[a]},createValueMatcher:function(){var d=this,e=d.value,g=d.anyMatch,c=d.exactMatch,a=d.caseSensitive,b=Ext.String.escapeRegex;if(e===null){return e}if(!e.exec){e=String(e);if(g===true){e=b(e)}else{e="^"+b(e);if(c===true){e+="$"}}e=new RegExp(e,a?"":"i")}return e}});Ext.define("Ext.util.Sorter",{direction:"ASC",constructor:function(a){var b=this;Ext.apply(b,a);b.updateSortFunction()},createSortFunction:function(b){var c=this,d=c.property,e=c.direction||"ASC",a=e.toUpperCase()=="DESC"?-1:1;return function(h,g){return a*b.call(c,h,g)}},defaultSorterFn:function(d,c){var b=this,a=b.transform,g=b.getRoot(d)[b.property],e=b.getRoot(c)[b.property];if(a){g=a(g);e=a(e)}return g>e?1:(g<e?-1:0)},getRoot:function(a){return this.root===undefined?a:a[this.root]},setDirection:function(b){var a=this;a.direction=b;a.updateSortFunction()},toggle:function(){var a=this;a.direction=Ext.String.toggle(a.direction,"ASC","DESC");a.updateSortFunction()},updateSortFunction:function(a){var b=this;a=a||b.sorterFn||b.defaultSorterFn;b.sort=b.createSortFunction(a)}});Ext.define("Ext.data.Operation",{synchronous:true,action:undefined,filters:undefined,sorters:undefined,group:undefined,start:undefined,limit:undefined,batch:undefined,callback:undefined,scope:undefined,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,actionCommitRecordsRe:/^(?:create|update)$/i,actionSkipSyncRe:/^destroy$/i,constructor:function(a){Ext.apply(this,a||{})},commitRecords:function(b){var g=this,h,c,d,e,a;if(!g.actionSkipSyncRe.test(g.action)){d=g.records;if(d&&d.length){h=Ext.create("Ext.util.MixedCollection",true,function(j){return j.getId()});h.addAll(d);for(c=b?b.length:0;c--;){e=b[c];a=h.get(e.getId());if(a){a.beginEdit();a.set(e.data);a.endEdit(true)}}if(g.actionCommitRecordsRe.test(g.action)){for(c=d.length;c--;){d[c].commit()}}}}},setStarted:function(){this.started=true;this.running=true},setCompleted:function(){this.complete=true;this.running=false},setSuccessful:function(){this.success=true},setException:function(a){this.exception=true;this.success=false;this.running=false;this.error=a},hasException:function(){return this.exception===true},getError:function(){return this.error},getRecords:function(){var a=this.getResultSet();return(a===undefined?this.records:a.records)},getResultSet:function(){return this.resultSet},isStarted:function(){return this.started===true},isRunning:function(){return this.running===true},isComplete:function(){return this.complete===true},wasSuccessful:function(){return this.isComplete()&&this.success===true},setBatch:function(a){this.batch=a},allowWrite:function(){return this.action!="read"}});Ext.define("Ext.data.validations",{singleton:true,presenceMessage:"must be present",lengthMessage:"is the wrong length",formatMessage:"is the wrong format",inclusionMessage:"is not included in the list of acceptable values",exclusionMessage:"is not an acceptable value",emailMessage:"is not a valid email address",emailRe:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,presence:function(a,b){if(b===undefined){b=a}return !!b||b===0},length:function(b,e){if(e===undefined||e===null){return false}var d=e.length,c=b.min,a=b.max;if((c&&d<c)||(a&&d>a)){return false}else{return true}},email:function(b,a){return Ext.data.validations.emailRe.test(a)},format:function(a,b){return !!(a.matcher&&a.matcher.test(b))},inclusion:function(a,b){return a.list&&Ext.Array.indexOf(a.list,b)!=-1},exclusion:function(a,b){return a.list&&Ext.Array.indexOf(a.list,b)==-1}});Ext.define("Ext.data.ResultSet",{loaded:true,count:0,total:0,success:false,constructor:function(a){Ext.apply(this,a);this.totalRecords=this.total;if(a.count===undefined){this.count=this.records.length}}});Ext.define("Ext.data.writer.Writer",{alias:"writer.base",alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],writeAllFields:true,nameProperty:"name",constructor:function(a){Ext.apply(this,a)},write:function(e){var c=e.operation,b=c.records||[],a=b.length,d=0,g=[];for(;d<a;d++){g.push(this.getRecordData(b[d]))}return this.writeRecords(e,g)},getRecordData:function(e){var k=e.phantom===true,b=this.writeAllFields||k,c=this.nameProperty,g=e.fields,d={},j,a,h,m;if(b){g.each(function(n){if(n.persist){a=n[c]||n.name;d[a]=e.get(n.name)}})}else{j=e.getChanges();for(m in j){if(j.hasOwnProperty(m)){h=g.get(m);a=h[c]||h.name;d[a]=j[m]}}if(!k){d[e.idProperty]=e.getId()}}return d}});Ext.define("Ext.util.Floating",{uses:["Ext.Layer","Ext.window.Window"],focusOnToFront:true,shadow:"sides",constructor:function(a){var b=this;b.floating=true;b.el=Ext.create("Ext.Layer",Ext.apply({},a,{hideMode:b.hideMode,hidden:b.hidden,shadow:Ext.isDefined(b.shadow)?b.shadow:"sides",shadowOffset:b.shadowOffset,constrain:false,shim:b.shim===false?false:undefined}),b.el)},onFloatRender:function(){var a=this;a.zIndexParent=a.getZIndexParent();a.setFloatParent(a.ownerCt);delete a.ownerCt;if(a.zIndexParent){a.zIndexParent.registerFloatingItem(a)}else{Ext.WindowManager.register(a)}},setFloatParent:function(b){var a=this;if(a.floatParent){a.mun(a.floatParent,{hide:a.onFloatParentHide,show:a.onFloatParentShow,scope:a})}a.floatParent=b;if(b){a.mon(a.floatParent,{hide:a.onFloatParentHide,show:a.onFloatParentShow,scope:a})}if((a.constrain||a.constrainHeader)&&!a.constrainTo){a.constrainTo=b?b.getTargetEl():a.container}},onFloatParentHide:function(){var a=this;if(a.hideOnParentHide!==false){a.showOnParentShow=a.isVisible();a.hide()}},onFloatParentShow:function(){if(this.showOnParentShow){delete this.showOnParentShow;this.show()}},getZIndexParent:function(){var a=this.ownerCt,b;if(a){while(a){b=a;a=a.ownerCt}if(b.floating){return b}}},setZIndex:function(a){var b=this;b.el.setZIndex(a);a+=10;if(b.floatingItems){a=Math.floor(b.floatingItems.setBase(a)/100)*100+10000}return a},doConstrain:function(b){var c=this,a=c.getConstrainVector(b||c.el.getScopeParent()),d;if(a){d=c.getPosition();d[0]+=a[0];d[1]+=a[1];c.setPosition(d)}},getConstrainVector:function(b){var c=this,a;if(c.constrain||c.constrainHeader){a=c.constrainHeader?c.header.el:c.el;b=b||(c.floatParent&&c.floatParent.getTargetEl())||c.container;return a.getConstrainVector(b)}},alignTo:function(b,a,c){if(b.isComponent){b=b.getEl()}var d=this.el.getAlignToXY(b,a,c);this.setPagePosition(d);return this},toFront:function(b){var a=this;if(a.zIndexParent){a.zIndexParent.toFront(true)}if(a.zIndexManager.bringToFront(a)){if(!Ext.isDefined(b)){b=!a.focusOnToFront}if(!b){a.focus(false,true)}}return a},setActive:function(b,c){var a=this;if(b){if(a.el.shadow&&!a.maximized){a.el.enableShadow(true)}a.fireEvent("activate",a)}else{if((a instanceof Ext.window.Window)&&(c instanceof Ext.window.Window)){a.el.disableShadow()}a.fireEvent("deactivate",a)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a=this,b=a.el.getAlignToXY(a.container,"c-c");a.setPagePosition(b);return a},syncShadow:function(){if(this.floating){this.el.sync(true)}},fitContainer:function(){var c=this.floatParent,a=c?c.getTargetEl():this.container,b=a.getViewSize(false);this.setSize(b)}});Ext.define("Ext.layout.Layout",{isLayout:true,initialized:false,statics:{create:function(b,c){var a;if(b instanceof Ext.layout.Layout){return Ext.createByAlias("layout."+b)}else{if(!b||typeof b==="string"){a=b||c;b={}}else{a=b.type||c}return Ext.createByAlias("layout."+a,b||{})}}},constructor:function(a){this.id=Ext.id(null,this.type+"-");Ext.apply(this,a)},layout:function(){var a=this;a.layoutBusy=true;a.initLayout();if(a.beforeLayout.apply(a,arguments)!==false){a.layoutCancelled=false;a.onLayout.apply(a,arguments);a.childrenChanged=false;a.owner.needsLayout=false;a.layoutBusy=false;a.afterLayout.apply(a,arguments)}else{a.layoutCancelled=true}a.layoutBusy=false;a.doOwnerCtLayouts()},beforeLayout:function(){this.renderChildren();return true},renderChildren:function(){this.renderItems(this.getLayoutItems(),this.getRenderTarget())},renderItems:function(a,g){var e=this,d=a.length,b=0,c;for(;b<d;b++){c=a[b];if(c&&!c.rendered){e.renderItem(c,g,b)}else{if(!e.isValidParent(c,g,b)){e.moveItem(c,g,b)}else{e.configureItem(c)}}}},isValidParent:function(b,c,a){var d=b.el?b.el.dom:Ext.getDom(b);if(d&&c&&c.dom){if(Ext.isNumber(a)&&d!==c.dom.childNodes[a]){return false}return(d.parentNode==(c.dom||c))}return false},renderItem:function(c,d,a){var b=this;if(!c.rendered){if(b.itemCls){c.addCls(b.itemCls)}if(b.owner.itemCls){c.addCls(b.owner.itemCls)}c.render(d,a);b.configureItem(c);b.childrenChanged=true}},moveItem:function(b,c,a){c=c.dom||c;if(typeof a=="number"){a=c.childNodes[a]}c.insertBefore(b.el.dom,a||null);b.container=Ext.get(c);this.configureItem(b);this.childrenChanged=true},initLayout:function(){var a=this,b=a.targetCls;if(!a.initialized&&!Ext.isEmpty(b)){a.getTarget().addCls(b)}a.initialized=true},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},configureItem:Ext.emptyFn,onLayout:Ext.emptyFn,afterLayout:Ext.emptyFn,onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,doOwnerCtLayouts:Ext.emptyFn,afterRemove:function(c){var b=c.el,a=this.owner,e=this.itemCls,d=a.itemCls;if(c.rendered&&!c.isDestroyed){if(e){b.removeCls(e)}if(d){b.removeCls(d)}}delete c.layoutManagedWidth;delete c.layoutManagedHeight},destroy:function(){var b=this.targetCls,a;if(!Ext.isEmpty(b)){a=this.getTarget();if(a){a.removeCls(b)}}this.onDestroy()}});Ext.define("Ext.ZIndexManager",{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000},constructor:function(a){var b=this;b.list={};b.zIndexStack=[];b.front=null;if(a){if(a.isContainer){a.on("resize",b._onContainerResize,b);b.zseed=Ext.Number.from(a.getEl().getStyle("zIndex"),b.getNextZSeed());b.targetEl=a.getTargetEl();b.container=a}else{Ext.EventManager.onWindowResize(b._onContainerResize,b);b.zseed=b.getNextZSeed();b.targetEl=Ext.get(a)}}else{Ext.EventManager.onWindowResize(b._onContainerResize,b);b.zseed=b.getNextZSeed();Ext.onDocumentReady(function(){b.targetEl=Ext.getBody()})}},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(a){this.zseed=a;return this.assignZIndices()},assignZIndices:function(){var c=this.zIndexStack,b=c.length,e=0,g=this.zseed,d;for(;e<b;e++){d=c[e];if(d&&!d.hidden){g=d.setZIndex(g)}}this._activateLast();return g},_setActiveChild:function(a){if(a!==this.front){if(this.front){this.front.setActive(false,a)}this.front=a;if(a){a.setActive(true);if(a.modal){this._showModalMask(a)}}}},_activateLast:function(a){var b,d=false,c;for(c=this.zIndexStack.length-1;c>=0;--c){b=this.zIndexStack[c];if(!b.hidden){if(!d){this._setActiveChild(b);d=true}if(b.modal){this._showModalMask(b);return}}}this._hideModalMask();if(!d){this._setActiveChild(null)}},_showModalMask:function(a){var d=a.el.getStyle("zIndex")-4,b=a.floatParent?a.floatParent.getTargetEl():Ext.get(a.getEl().dom.parentNode),c;if(!b){return}c=b.getBox();if(!this.mask){this.mask=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"mask"});this.mask.setVisibilityMode(Ext.Element.DISPLAY);this.mask.on("click",this._onMaskClick,this)}if(b.dom===document.body){c.height=Ext.Element.getViewHeight()}b.addCls(Ext.baseCSSPrefix+"body-masked");this.mask.setBox(c);this.mask.setStyle("zIndex",d);this.mask.show()},_hideModalMask:function(){if(this.mask&&this.mask.dom.parentNode){Ext.get(this.mask.dom.parentNode).removeCls(Ext.baseCSSPrefix+"body-masked");this.mask.hide()}},_onMaskClick:function(){if(this.front){this.front.focus()}},_onContainerResize:function(){if(this.mask&&this.mask.isVisible()){this.mask.setSize(Ext.get(this.mask.dom.parentNode).getViewSize(true))}},register:function(a){if(a.zIndexManager){a.zIndexManager.unregister(a)}a.zIndexManager=this;this.list[a.id]=a;this.zIndexStack.push(a);a.on("hide",this._activateLast,this)},unregister:function(a){delete a.zIndexManager;if(this.list&&this.list[a.id]){delete this.list[a.id];a.un("hide",this._activateLast);Ext.Array.remove(this.zIndexStack,a);this._activateLast(a)}},get:function(a){return typeof a=="object"?a:this.list[a]},bringToFront:function(a){a=this.get(a);if(a!==this.front){Ext.Array.remove(this.zIndexStack,a);this.zIndexStack.push(a);this.assignZIndices();return true}if(a.modal){this._showModalMask(a)}return false},sendToBack:function(a){a=this.get(a);Ext.Array.remove(this.zIndexStack,a);this.zIndexStack.unshift(a);this.assignZIndices();return a},hideAll:function(){for(var a in this.list){if(this.list[a].isComponent&&this.list[a].isVisible()){this.list[a].hide()}}},hide:function(){var b=0,c=this.zIndexStack.length,a;this.tempHidden=[];for(;b<c;b++){a=this.zIndexStack[b];if(a.isVisible()){this.tempHidden.push(a);a.hide()}}},show:function(){var c=0,d=this.tempHidden.length,b,a,e;for(;c<d;c++){b=this.tempHidden[c];a=b.x;e=b.y;b.show();b.setPosition(a,e)}delete this.tempHidden},getActive:function(){return this.front},getBy:function(e,d){var g=[],c=0,a=this.zIndexStack.length,b;for(;c<a;c++){b=this.zIndexStack[c];if(e.call(d||b,b)!==false){g.push(b)}}return g},each:function(c,b){var a;for(var d in this.list){a=this.list[d];if(a.isComponent&&c.call(b||a,a)===false){return}}},eachBottomUp:function(e,d){var b,a=this.zIndexStack,c,g;for(c=0,g=a.length;c<g;c++){b=a[c];if(b.isComponent&&e.call(d||b,b)===false){return}}},eachTopDown:function(e,d){var b,a=this.zIndexStack,c;for(c=a.length;c-->0;){b=a[c];if(b.isComponent&&e.call(d||b,b)===false){return}}},destroy:function(){this.each(function(a){a.destroy()});delete this.zIndexStack;delete this.list;delete this.container;delete this.targetEl}},function(){Ext.WindowManager=Ext.WindowMgr=new this()});Ext.define("Ext.layout.container.boxOverflow.None",{alternateClassName:"Ext.layout.boxOverflow.None",constructor:function(b,a){this.layout=b;Ext.apply(this,a||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},onRemove:Ext.emptyFn});Ext.define("Ext.util.KeyMap",{alternateClassName:"Ext.KeyMap",constructor:function(b,d,a){var c=this;Ext.apply(c,{el:Ext.get(b),eventName:a||c.eventName,bindings:[]});if(d){c.addBinding(d)}c.enable()},eventName:"keydown",addBinding:function(h){if(Ext.isArray(h)){Ext.each(h,this.addBinding,this);return}var g=h.key,j=false,d,e,b,c,a;if(Ext.isString(g)){e=[];b=g.toUpperCase();for(c=0,a=b.length;c<a;++c){e.push(b.charCodeAt(c))}g=e;j=true}if(!Ext.isArray(g)){g=[g]}if(!j){for(c=0,a=g.length;c<a;++c){d=g[c];if(Ext.isString(d)){g[c]=d.toUpperCase().charCodeAt(0)}}}this.bindings.push(Ext.apply({keyCode:g},h))},handleKeyDown:function(c){if(this.enabled){var d=this.bindings,b=0,a=d.length;c=this.processEvent(c);for(;b<a;++b){this.processBinding(d[b],c)}}},processEvent:function(a){return a},processBinding:function(g,a){if(this.checkModifiers(g,a)){var h=a.getKey(),k=g.fn||g.handler,m=g.scope||this,j=g.keyCode,b=g.defaultEventAction,c,e,d=new Ext.EventObjectImpl(a);for(c=0,e=j.length;c<e;++c){if(h===j[c]){if(k.call(m,h,a)!==true&&b){d[b]()}break}}}},checkModifiers:function(j,g){var d=["shift","ctrl","alt"],c=0,a=d.length,h,b;for(;c<a;++c){b=d[c];h=j[b];if(!(h===undefined||(h===g[b+"Key"]))){return false}}return true},on:function(b,d,c){var h,a,e,g;if(Ext.isObject(b)&&!Ext.isArray(b)){h=b.key;a=b.shift;e=b.ctrl;g=b.alt}else{h=b}this.addBinding({key:h,shift:a,ctrl:e,alt:g,fn:d,scope:c})},isEnabled:function(){return this.enabled},enable:function(){var a=this;if(!a.enabled){a.el.on(a.eventName,a.handleKeyDown,a);a.enabled=true}},disable:function(){var a=this;if(a.enabled){a.el.removeListener(a.eventName,a.handleKeyDown,a);a.enabled=false}},setDisabled:function(a){if(a){this.disable()}else{this.enable()}},destroy:function(b){var a=this;a.bindings=[];a.disable();if(b===true){a.el.remove()}delete a.el}});Ext.define("Ext.util.ClickRepeater",{extend:"Ext.util.Observable",constructor:function(b,a){this.el=Ext.get(b);this.el.unselectable();Ext.apply(this,a);this.addEvents("mousedown","click","mouseup");if(!this.disabled){this.disabled=true;this.enable()}if(this.handler){this.on("click",this.handler,this.scope||this)}this.callParent()},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.clearListeners()},handleDblClick:function(a){clearTimeout(this.timer);this.el.blur();this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer);this.el.blur();if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a);if(this.accelerate){this.delay=400}a=new Ext.EventObjectImpl(a);this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a])},click:function(a){this.fireEvent("click",this,a);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(e,a,h,g){return(e==g)?a+h:h*(-Math.pow(2,-10*e/g)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click()},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,a)}});Ext.define("Ext.layout.component.Component",{extend:"Ext.layout.Layout",type:"component",monitorChildren:true,initLayout:function(){var c=this,a=c.owner,b=a.el;if(!c.initialized){if(a.frameSize){c.frameSize=a.frameSize}else{a.frameSize=c.frameSize={top:0,left:0,bottom:0,right:0}}}c.callParent(arguments)},beforeLayout:function(b,m,n,j){this.callParent(arguments);var h=this,c=h.owner,d=c.ownerCt,g=c.layout,e=c.isVisible(true),a=c.el.child,k;h.previousComponentSize=h.lastComponentSize;if(!n&&((!Ext.isNumber(b)&&c.isFixedWidth())||(!Ext.isNumber(m)&&c.isFixedHeight()))&&j&&j!==d){h.doContainerLayout();return false}if(!e&&(c.hiddenAncestor||c.floating)){if(c.hiddenAncestor){k=c.hiddenAncestor.layoutOnShow;k.remove(c);k.add(c)}c.needsLayout={width:b,height:m,isSetSize:false}}if(e&&this.needsLayout(b,m)){return c.beforeComponentLayout(b,m,n,j)}else{return false}},needsLayout:function(d,a){var e=this,c,b;e.lastComponentSize=e.lastComponentSize||{width:-Infinity,height:-Infinity};c=!Ext.isDefined(d)||e.lastComponentSize.width!==d;b=!Ext.isDefined(a)||e.lastComponentSize.height!==a;return !e.isSizing&&(e.childrenChanged||c||b)},setElementSize:function(c,b,a){if(b!==undefined&&a!==undefined){c.setSize(b,a)}else{if(a!==undefined){c.setHeight(a)}else{if(b!==undefined){c.setWidth(b)}}}},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},setTargetSize:function(d,a){var e=this;e.setElementSize(e.owner.el,d,a);if(e.owner.frameBody){var h=e.getTargetInfo(),g=h.padding,c=h.border,b=e.frameSize;e.setElementSize(e.owner.frameBody,Ext.isNumber(d)?(d-b.left-b.right-g.left-g.right-c.left-c.right):d,Ext.isNumber(a)?(a-b.top-b.bottom-g.top-g.bottom-c.top-c.bottom):a)}e.autoSized={width:!Ext.isNumber(d),height:!Ext.isNumber(a)};e.lastComponentSize={width:d,height:a}},getTargetInfo:function(){if(!this.targetInfo){var b=this.getTarget(),a=this.owner.getTargetEl();this.targetInfo={padding:{top:b.getPadding("t"),right:b.getPadding("r"),bottom:b.getPadding("b"),left:b.getPadding("l")},border:{top:b.getBorderWidth("t"),right:b.getBorderWidth("r"),bottom:b.getBorderWidth("b"),left:b.getBorderWidth("l")},bodyMargin:{top:a.getMargin("t"),right:a.getMargin("r"),bottom:a.getMargin("b"),left:a.getMargin("l")}}}return this.targetInfo},doOwnerCtLayouts:function(){var b=this.owner,e=b.ownerCt,c,j,d=this.lastComponentSize,h=this.previousComponentSize,a=(h&&d&&Ext.isNumber(d.width))?d.width!==h.width:true,g=(h&&d&&Ext.isNumber(d.height))?d.height!==h.height:true;if(!e||(!a&&!g)){return}c=e.componentLayout;j=e.layout;if(!b.floating&&c&&c.monitorChildren&&!c.layoutBusy){if(!e.suspendLayout&&j&&!j.layoutBusy){if(((a&&!e.isFixedWidth())||(g&&!e.isFixedHeight()))){this.isSizing=true;e.doComponentLayout();this.isSizing=false}else{if(j.bindToOwnerCtContainer===true){j.layout()}}}}},doContainerLayout:function(){var e=this,a=e.owner,c=a.ownerCt,d=a.layout,b;if(!a.suspendLayout&&d&&d.isLayout&&!d.layoutBusy&&!d.isAutoDock){d.layout()}if(c&&c.componentLayout){b=c.componentLayout;if(!a.floating&&b.monitorChildren&&!b.layoutBusy){b.childrenChanged=true}}},afterLayout:function(c,a,b,d){this.doContainerLayout();this.owner.afterComponentLayout(c,a,b,d)}});Ext.define("Ext.util.TextMetrics",{statics:{shared:null,measure:function(a,d,e){var b=this,c=b.shared;if(!c){c=b.shared=new b(a,e)}c.bind(a);c.setFixedWidth(e||"auto");return c.getSize(d)},destroy:function(){var a=this;Ext.destroy(a.shared);a.shared=null}},constructor:function(a,c){var b=this.measure=Ext.getBody().createChild({cls:"x-textmetrics"});this.el=Ext.get(a);b.position("absolute");b.setLeftTop(-1000,-1000);b.hide();if(c){b.setWidth(c)}},getSize:function(c){var b=this.measure,a;b.update(c);a=b.getSize();b.update("");return a},bind:function(a){var b=this;b.el=Ext.get(a);b.measure.setStyle(b.el.getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){this.measure.dom.style.width="auto";return this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.measure.remove();delete a.el;delete a.measure}},function(){Ext.Element.addMethods({getTextWidth:function(c,b,a){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.value(c,this.dom.innerHTML,true)).width,b||0,a||1000000)}})});Ext.define("Ext.layout.container.boxOverflow.Scroller",{extend:"Ext.layout.container.boxOverflow.None",requires:["Ext.util.ClickRepeater","Ext.Element"],alternateClassName:"Ext.layout.boxOverflow.Scroller",mixins:{observable:"Ext.util.Observable"},animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",constructor:function(b,a){this.layout=b;Ext.apply(this,a||{});this.addEvents("scroll")},initCSSClasses:function(){var b=this,a=b.layout;if(!b.CSSinitialized){b.beforeCtCls=b.beforeCtCls||Ext.baseCSSPrefix+"box-scroller-"+a.parallelBefore;b.afterCtCls=b.afterCtCls||Ext.baseCSSPrefix+"box-scroller-"+a.parallelAfter;b.beforeScrollerCls=b.beforeScrollerCls||Ext.baseCSSPrefix+a.owner.getXType()+"-scroll-"+a.parallelBefore;b.afterScrollerCls=b.afterScrollerCls||Ext.baseCSSPrefix+a.owner.getXType()+"-scroll-"+a.parallelAfter;b.CSSinitializes=true}},handleOverflow:function(a,g){var e=this,d=e.layout,c="get"+d.parallelPrefixCap,b={};e.initCSSClasses();e.callParent(arguments);this.createInnerElements();this.showScrollers();b[d.perpendicularPrefix]=g[d.perpendicularPrefix];b[d.parallelPrefix]=g[d.parallelPrefix]-(e.beforeCt[c]()+e.afterCt[c]());return{targetSize:b}},createInnerElements:function(){var a=this,b=a.layout.getRenderTarget();if(!a.beforeCt){b.addCls(Ext.baseCSSPrefix+a.layout.direction+"-box-overflow-body");a.beforeCt=b.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+a.beforeCtCls},"before");a.afterCt=b.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+a.afterCtCls},"after");a.createWheelListener()}},createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(a){a.stopEvent();this.scrollBy(a.getWheelDelta()*this.wheelIncrement*-1,false)}})},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers();this.beforeScroller.show();this.afterScroller.show();this.updateScrollButtons();this.layout.owner.addClsWithUI("scroller")},hideScrollers:function(){if(this.beforeScroller!=undefined){this.beforeScroller.hide();this.afterScroller.hide();this.layout.owner.removeClsWithUI("scroller")}},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var a=this.beforeCt.createChild({cls:Ext.String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)});var b=this.afterCt.createChild({cls:Ext.String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)});a.addClsOnOver(this.beforeScrollerCls+"-hover");b.addClsOnOver(this.afterScrollerCls+"-hover");a.setVisibilityMode(Ext.Element.DISPLAY);b.setVisibilityMode(Ext.Element.DISPLAY);this.beforeRepeater=Ext.create("Ext.util.ClickRepeater",a,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this});this.afterRepeater=Ext.create("Ext.util.ClickRepeater",b,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this});this.beforeScroller=a;this.afterScroller=b}},destroy:function(){Ext.destroy(this.beforeRepeater,this.afterRepeater,this.beforeScroller,this.afterScroller,this.beforeCt,this.afterCt)},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller==undefined||this.afterScroller==undefined){return}var d=this.atExtremeBefore()?"addCls":"removeCls",c=this.atExtremeAfter()?"addCls":"removeCls",a=this.beforeScrollerCls+"-disabled",b=this.afterScrollerCls+"-disabled";this.beforeScroller[d](a);this.afterScroller[c](b);this.scrolling=false},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var a=this.layout;return parseInt(a.innerCt.dom["scroll"+a.parallelBeforeCap],10)||0},getMaxScrollPosition:function(){var a=this.layout;return a.innerCt.dom["scroll"+a.parallelPrefixCap]-this.layout.innerCt["get"+a.parallelPrefixCap]()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},scrollTo:function(a,b){var g=this,e=g.layout,d=g.getScrollPosition(),c=Ext.Number.constrain(a,0,g.getMaxScrollPosition());if(c!=d&&!g.scrolling){if(b==undefined){b=g.animateScroll}e.innerCt.scrollTo(e.parallelBefore,c,b?g.getScrollAnim():false);if(b){g.scrolling=true}else{g.scrolling=false;g.updateScrollButtons()}g.fireEvent("scroll",g,c,b?g.getScrollAnim():false)}},scrollToItem:function(h,b){var g=this,e=g.layout,a,d,c;h=g.getItem(h);if(h!=undefined){a=this.getItemVisibility(h);if(!a.fullyVisible){d=h.getBox(true,true);c=d[e.parallelPosition];if(a.hiddenEnd){c-=(this.layout.innerCt["get"+e.parallelPrefixCap]()-d[e.parallelPrefix])}this.scrollTo(c,b)}}},getItemVisibility:function(g){var e=this,d=e.getItem(g).getBox(true,true),c=e.layout,b=d[c.parallelPosition],h=b+d[c.parallelPrefix],j=e.getScrollPosition(),a=j+c.innerCt["get"+c.parallelPrefixCap]();return{hiddenStart:b<j,hiddenEnd:h>a,fullyVisible:b>j&&h<a}}});Ext.define("Ext.util.Offset",{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){this.x=(a!=null&&!isNaN(a))?a:0;this.y=(b!=null&&!isNaN(b))?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){return(this.x==a.x&&this.y==a.y)},round:function(b){if(!isNaN(b)){var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}});Ext.define("Ext.util.KeyNav",{alternateClassName:"Ext.KeyNav",requires:["Ext.util.KeyMap"],statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(b,a){this.setConfig(b,a||{})},setConfig:function(d,a){if(this.map){this.map.destroy()}var g=Ext.create("Ext.util.KeyMap",d,null,this.getKeyEvent("forceKeyDown" in a?a.forceKeyDown:this.forceKeyDown)),e=Ext.util.KeyNav.keyOptions,c=a.scope||this,b;this.map=g;for(b in e){if(e.hasOwnProperty(b)){if(a[b]){g.addBinding({scope:c,key:e[b],handler:Ext.Function.bind(this.handleEvent,c,[a[b]],true),defaultEventAction:a.defaultEventAction||this.defaultEventAction})}}}g.disable();if(!a.disabled){g.enable()}},handleEvent:function(c,b,a){return a.call(this,b)},disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,destroy:function(a){this.map.destroy(a);delete this.map},enable:function(){this.map.enable();this.disabled=false},disable:function(){this.map.disable();this.disabled=true},setDisabled:function(a){this.map.setDisabled(a);this.disabled=a},getKeyEvent:function(a){return(a||Ext.EventManager.useKeyDown)?"keydown":"keypress"}});Ext.define("Ext.fx.Queue",{requires:["Ext.util.HashMap"],constructor:function(){this.targets=Ext.create("Ext.util.HashMap");this.fxQueue={}},getFxDefaults:function(a){var b=this.targets.get(a);if(b){return b.fxDefaults}return{}},setFxDefaults:function(a,c){var b=this.targets.get(a);if(b){b.fxDefaults=Ext.apply(b.fxDefaults||{},c)}},stopAnimation:function(b){var d=this,a=d.getFxQueue(b),c=a.length;while(c){a[c-1].end();c--}},getActiveAnimation:function(b){var a=this.getFxQueue(b);return(a&&!!a.length)?a[0]:false},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(b){if(!b){return false}var c=this,a=c.fxQueue[b],d=c.targets.get(b);if(!d){return false}if(!a){c.fxQueue[b]=[];if(d.type!="element"){d.target.on("destroy",function(){c.fxQueue[b]=[]})}}return c.fxQueue[b]},queueFx:function(d){var c=this,e=d.target,a,b;if(!e){return}a=c.getFxQueue(e.getId());b=a.length;if(b){if(d.concurrent){d.paused=false}else{a[b-1].on("afteranimate",function(){d.paused=false})}}else{d.paused=false}d.on("afteranimate",function(){Ext.Array.remove(a,d);if(d.remove){if(e.type=="element"){var g=Ext.get(e.id);if(g){g.remove()}}}},this);a.push(d)}});Ext.define("Ext.fx.target.Target",{isAnimTarget:true,constructor:function(a){this.target=a;this.id=this.getId()},getId:function(){return this.target.id}});Ext.define("Ext.fx.target.Sprite",{extend:"Ext.fx.target.Target",type:"draw",getFromPrim:function(b,a){var c;if(a=="translate"){c={x:b.attr.translation.x||0,y:b.attr.translation.y||0}}else{if(a=="rotate"){c={degrees:b.attr.rotation.degrees||0,x:b.attr.rotation.x,y:b.attr.rotation.y}}else{c=b.attr[a]}}return c},getAttr:function(a,b){return[[this.target,b!=undefined?b:this.getFromPrim(this.target,a)]]},setAttr:function(p){var h=p.length,m=[],u,g,t,e,b,r,q,d,c,n,k,a;for(d=0;d<h;d++){u=p[d].attrs;for(g in u){t=u[g];a=t.length;for(c=0;c<a;c++){b=t[c][0];e=t[c][1];if(g==="translate"){q={x:e.x,y:e.y}}else{if(g==="rotate"){n=e.x;if(isNaN(n)){n=null}k=e.y;if(isNaN(k)){k=null}q={degrees:e.degrees,x:n,y:k}}else{if(g==="width"||g==="height"||g==="x"||g==="y"){q=parseFloat(e)}else{q=e}}}r=Ext.Array.indexOf(m,b);if(r==-1){m.push([b,{}]);r=m.length-1}m[r][1][g]=q}}}h=m.length;for(d=0;d<h;d++){b=m[d];b[0].setAttributes(b[1])}this.target.redraw()}});Ext.define("Ext.fx.target.CompositeSprite",{extend:"Ext.fx.target.Sprite",getAttr:function(a,d){var b=[],c=this.target;c.each(function(e){b.push([e,d!=undefined?d:this.getFromPrim(e,a)])},this);return b}});Ext.define("Ext.fx.target.Component",{extend:"Ext.fx.target.Target",type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},compMethod:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getPropMethod[a].call(this.target)]]},setAttr:function(v,e,b){var t=this,n=t.target,r=v.length,y,p,a,g,d,q,m,c,u,x,k;for(g=0;g<r;g++){y=v[g].attrs;for(p in y){m=y[p].length;q={setPosition:{},setPagePosition:{},setSize:{},setOpacity:{}};for(d=0;d<m;d++){a=y[p][d];q[t.compMethod[p]].target=a[0];q[t.compMethod[p]][p]=a[1]}if(q.setPosition.target){a=q.setPosition;c=(a.left===undefined)?undefined:parseInt(a.left,10);u=(a.top===undefined)?undefined:parseInt(a.top,10);a.target.setPosition(c,u)}if(q.setPagePosition.target){a=q.setPagePosition;a.target.setPagePosition(a.x,a.y)}if(q.setSize.target&&q.setSize.target.el){a=q.setSize;x=(a.width===undefined)?a.target.getWidth():parseInt(a.width,10);k=(a.height===undefined)?a.target.getHeight():parseInt(a.height,10);if(b||t.dynamic){a.target.componentLayout.childrenChanged=true;if(t.layoutAnimation){a.target.setCalculatedSize(x,k)}else{a.target.setSize(x,k)}}else{a.target.el.setSize(x,k)}}if(q.setOpacity.target){a=q.setOpacity;a.target.el.setStyle("opacity",a.opacity)}}}}});Ext.define("Ext.fx.CubicBezier",{singleton:true,cubicBezierAtTime:function(r,d,b,q,p,j){var k=3*d,n=3*(q-d)-k,a=1-k-n,h=3*b,m=3*(p-b)-h,u=1-h-m;function g(v){return((a*v+n)*v+k)*v}function c(v,y){var w=e(v,y);return((u*w+m)*w+h)*w}function e(t,C){var B,A,y,v,z,w;for(y=t,w=0;w<8;w++){v=g(y)-t;if(Math.abs(v)<C){return y}z=(3*a*y+2*n)*y+k;if(Math.abs(z)<0.000001){break}y=y-v/z}B=0;A=1;y=t;if(y<B){return B}if(y>A){return A}while(B<A){v=g(y);if(Math.abs(v-t)<C){return y}if(t>v){B=y}else{A=y}y=(A-B)/2+B}return y}return c(r,1/(200*j))},cubicBezier:function(b,e,a,c){var d=function(g){return Ext.fx.CubicBezier.cubicBezierAtTime(g,b,e,a,c,1)};d.toCSS3=function(){return"cubic-bezier("+[b,e,a,c].join(",")+")"};d.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-a,1-c,1-b,1-e)};return d}});Ext.define("Ext.draw.Color",{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:0.2,constructor:function(d,c,a){var b=this,e=Ext.Number.constrain;b.r=e(d,0,255);b.g=e(c,0,255);b.b=e(a,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var a=this;return[a.r,a.g,a.b]},getHSL:function(){var k=this,a=k.r/255,j=k.g/255,m=k.b/255,n=Math.max(a,j,m),d=Math.min(a,j,m),p=n-d,e,q=0,c=0.5*(n+d);if(d!=n){q=(c<0.5)?p/(n+d):p/(2-n-d);if(a==n){e=60*(j-m)/p}else{if(j==n){e=120+60*(m-a)/p}else{e=240+60*(a-j)/p}}if(e<0){e+=360}if(e>=360){e-=360}}return[e,q,c]},getLighter:function(b){var a=this.getHSL();b=b||this.lightnessFactor;a[2]=Ext.Number.constrain(a[2]+b,0,1);return this.fromHSL(a[0],a[1],a[2])},getDarker:function(a){a=a||this.lightnessFactor;return this.getLighter(-a)},toString:function(){var h=this,c=Math.round,e=c(h.r).toString(16),d=c(h.g).toString(16),a=c(h.b).toString(16);e=(e.length==1)?"0"+e:e;d=(d.length==1)?"0"+d:d;a=(a.length==1)?"0"+a:a;return["#",e,d,a].join("")},toHex:function(b){if(Ext.isArray(b)){b=b[0]}if(!Ext.isString(b)){return""}if(b.substr(0,1)==="#"){return b}var e=this.colorToHexRe.exec(b);if(Ext.isArray(e)){var g=parseInt(e[2],10),d=parseInt(e[3],10),a=parseInt(e[4],10),c=a|(d<<8)|(g<<16);return e[1]+"#"+("000000"+c.toString(16)).slice(-6)}else{return""}},fromString:function(j){var c,e,d,a,h=parseInt;if((j.length==4||j.length==7)&&j.substr(0,1)==="#"){c=j.match(this.hexRe);if(c){e=h(c[1],16)>>0;d=h(c[2],16)>>0;a=h(c[3],16)>>0;if(j.length==4){e+=(e*16);d+=(d*16);a+=(a*16)}}}else{c=j.match(this.rgbRe);if(c){e=c[1];d=c[2];a=c[3]}}return(typeof e=="undefined")?undefined:Ext.create("Ext.draw.Color",e,d,a)},getGrayscale:function(){return this.r*0.3+this.g*0.59+this.b*0.11},fromHSL:function(g,p,d){var a,b,c,e,k=[],n=Math.abs,j=Math.floor;if(p==0||g==null){k=[d,d,d]}else{g/=60;a=p*(1-n(2*d-1));b=a*(1-n(g-2*j(g/2)-1));c=d-a/2;switch(j(g)){case 0:k=[a,b,0];break;case 1:k=[b,a,0];break;case 2:k=[0,a,b];break;case 3:k=[0,b,a];break;case 4:k=[b,0,a];break;case 5:k=[a,0,b];break}k=[k[0]+c,k[1]+c,k[2]+c]}return Ext.create("Ext.draw.Color",k[0]*255,k[1]*255,k[2]*255)}},function(){var a=this.prototype;this.addStatics({fromHSL:function(){return a.fromHSL.apply(a,arguments)},fromString:function(){return a.fromString.apply(a,arguments)},toHex:function(){return a.toHex.apply(a,arguments)}})});Ext.define("Ext.dd.StatusProxy",{animRepair:false,constructor:function(a){Ext.apply(this,a);this.id=this.id||Ext.id();this.proxy=Ext.createWidget("component",{floating:true,stateful:false,id:this.id,html:'<div class="'+Ext.baseCSSPrefix+'dd-drop-icon"></div><div class="'+Ext.baseCSSPrefix+'dd-drag-ghost"></div>',cls:Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,shadow:!a||a.shadow!==false,renderTo:document.body});this.el=this.proxy.el;this.el.show();this.el.setVisibilityMode(Ext.Element.VISIBILITY);this.el.hide();this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!=a){this.el.replaceCls(this.dropStatus,a);this.dropStatus=a}},reset:function(a){this.el.dom.className=Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(a){this.ghost.update("")}},update:function(a){if(typeof a=="string"){this.ghost.update(a)}else{this.ghost.update("");a.style.margin="0";this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle("float","none")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(a){this.proxy.hide();if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.proxy.show();this.proxy.toFront()},sync:function(){this.proxy.el.sync()},repair:function(b,c,a){this.callback=c;this.scope=a;if(b&&this.animRepair!==false){this.el.addCls(Ext.baseCSSPrefix+"dd-drag-repair");this.el.hideUnders(true);this.anim=this.el.animate({duration:this.repairDuration||500,easing:"ease-out",to:{x:b[0],y:b[1]},stopAnimation:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback=="function"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.proxy,this.el)}});Ext.define("Ext.panel.Proxy",{alternateClassName:"Ext.dd.PanelProxy",constructor:function(a,b){this.panel=a;this.id=this.panel.id+"-ddproxy";Ext.apply(this,b)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.unghost(null,false);delete this.ghost}},show:function(){if(!this.ghost){var a=this.panel.getSize();this.panel.el.setVisibilityMode(Ext.Element.DISPLAY);this.ghost=this.panel.ghost();if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:Ext.baseCSSPrefix+"panel-dd-spacer"});this.proxy.setSize(a)}}},repair:function(b,c,a){this.hide();if(typeof c=="function"){c.call(a||this)}},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}});Ext.define("Ext.layout.component.AbstractDock",{extend:"Ext.layout.component.Component",type:"dock",autoSizing:true,beforeLayout:function(){var a=this.callParent(arguments);if(a!==false&&(!this.initializedBorders||this.childrenChanged)&&(!this.owner.border||this.owner.manageBodyBorders)){this.handleItemBorders();this.initializedBorders=true}return a},handleItemBorders:function(){var a=this.owner,e=a.body,n=this.getLayoutItems(),h={top:[],right:[],bottom:[],left:[]},b=this.borders,d={top:"bottom",right:"left",bottom:"top",left:"right"},c,j,m,k,g;for(c=0,j=n.length;c<j;c++){m=n[c];k=m.dock;if(m.ignoreBorderManagement){continue}if(!h[k].satisfied){h[k].push(m);h[k].satisfied=true}if(!h.top.satisfied&&d[k]!=="top"){h.top.push(m)}if(!h.right.satisfied&&d[k]!=="right"){h.right.push(m)}if(!h.bottom.satisfied&&d[k]!=="bottom"){h.bottom.push(m)}if(!h.left.satisfied&&d[k]!=="left"){h.left.push(m)}}if(b){for(g in b){if(b.hasOwnProperty(g)){j=b[g].length;if(!a.manageBodyBorders){for(c=0;c<j;c++){b[g][c].removeCls(Ext.baseCSSPrefix+"docked-noborder-"+g)}if(!b[g].satisfied&&!a.bodyBorder){e.removeCls(Ext.baseCSSPrefix+"docked-noborder-"+g)}}else{if(b[g].satisfied){e.setStyle("border-"+g+"-width","")}}}}}for(g in h){if(h.hasOwnProperty(g)){j=h[g].length;if(!a.manageBodyBorders){for(c=0;c<j;c++){h[g][c].addCls(Ext.baseCSSPrefix+"docked-noborder-"+g)}if((!h[g].satisfied&&!a.bodyBorder)||a.bodyBorder===false){e.addCls(Ext.baseCSSPrefix+"docked-noborder-"+g)}}else{if(h[g].satisfied){e.setStyle("border-"+g+"-width","1px")}}}}this.borders=h},onLayout:function(a,q){if(this.onLayout_running){return}this.onLayout_running=true;var k=this,b=k.owner,h=b.body,g=b.layout,j=k.getTarget(),n=false,p=false,m,e,d;var c=k.info={boxes:[],size:{width:a,height:q},bodyBox:{}};delete g.isAutoDock;Ext.applyIf(c,k.getTargetInfo());if(b&&b.ownerCt&&b.ownerCt.layout&&b.ownerCt.layout.isLayout){if(!Ext.isNumber(b.height)||!Ext.isNumber(b.width)){b.ownerCt.layout.bindToOwnerCtComponent=true}else{b.ownerCt.layout.bindToOwnerCtComponent=false}}if(q==null||a==null){m=c.padding;e=c.border;d=k.frameSize;if((q==null)&&(a==null)){p=true;n=true;k.setTargetSize(null);k.setBodyBox({width:null,height:null})}else{if(q==null){p=true;k.setTargetSize(a);k.setBodyBox({width:a-m.left-e.left-m.right-e.right-d.left-d.right,height:null})}else{n=true;k.setTargetSize(null,q);k.setBodyBox({width:null,height:q-m.top-m.bottom-e.top-e.bottom-d.top-d.bottom})}}if(g&&g.isLayout){g.bindToOwnerCtComponent=true;g.isAutoDock=g.autoSize!==true;g.layout();c.autoSizedCtLayout=g.autoSize===true;c.autoHeight=p;c.autoWidth=n}k.dockItems();k.setTargetSize(c.size.width,c.size.height)}else{k.setTargetSize(a,q);k.dockItems()}k.callParent(arguments);this.onLayout_running=false},dockItems:function(){this.calculateDockBoxes();var h=this.info,j=h.autoWidth,a=h.autoHeight,c=h.boxes,g=c.length,e,b,d;for(b=0;b<g;b++){e=c[b];d=e.item;d.setPosition(e.x,e.y);if((j||a)&&d.layout&&d.layout.isLayout){d.layout.bindToOwnerCtComponent=true}}if(!h.autoSizedCtLayout){if(j){h.bodyBox.width=null}if(a){h.bodyBox.height=null}}this.setBodyBox(h.bodyBox)},calculateDockBoxes:function(){if(this.calculateDockBoxes_running){return}this.calculateDockBoxes_running=true;var m=this,h=m.getTarget(),k=m.getLayoutItems(),a=m.owner,u=a.body,b=m.info,q=b.autoWidth,r=b.autoHeight,v=b.size,j=k.length,p=b.padding,d=b.border,c=m.frameSize,t,e,g,n;if(r){v.height=u.getHeight()+p.top+d.top+p.bottom+d.bottom+c.top+c.bottom}else{v.height=h.getHeight()}if(q){v.width=u.getWidth()+p.left+d.left+p.right+d.right+c.left+c.right}else{v.width=h.getWidth()}b.bodyBox={x:p.left+c.left,y:p.top+c.top,width:v.width-p.left-d.left-p.right-d.right-c.left-c.right,height:v.height-d.top-p.top-d.bottom-p.bottom-c.top-c.bottom};for(e=0;e<j;e++){t=k[e];g=m.initBox(t);if(r===true){g=m.adjustAutoBox(g,e)}else{g=m.adjustSizedBox(g,e)}b.boxes.push(g)}this.calculateDockBoxes_running=false},adjustSizedBox:function(e,d){var a=this.info.bodyBox,b=this.frameSize,h=this.info,g=h.padding,j=e.type,c=h.border;switch(j){case"top":e.y=a.y;break;case"left":e.x=a.x;break;case"bottom":e.y=(a.y+a.height)-e.height;break;case"right":e.x=(a.x+a.width)-e.width;break}if(e.ignoreFrame){if(j=="bottom"){e.y+=(b.bottom+g.bottom+c.bottom)}else{e.y-=(b.top+g.top+c.top)}if(j=="right"){e.x+=(b.right+g.right+c.right)}else{e.x-=(b.left+g.left+c.left)}}if(!e.overlay){switch(j){case"top":a.y+=e.height;a.height-=e.height;break;case"left":a.x+=e.width;a.width-=e.width;break;case"bottom":a.height-=e.height;break;case"right":a.width-=e.width;break}}return e},adjustAutoBox:function(j,n){var b=this.info,a=this.owner,p=b.bodyBox,u=b.size,k=b.boxes,g=k.length,r=j.type,e=this.frameSize,t=b.padding,d=b.border,c=b.autoSizedCtLayout,q=(g<n)?g:n,h,m;if(r=="top"||r=="bottom"){for(h=0;h<q;h++){m=k[h];if(m.stretched&&m.type=="left"||m.type=="right"){m.height+=j.height}else{if(m.type=="bottom"){m.y+=j.height}}}}switch(r){case"top":j.y=p.y;if(!j.overlay){p.y+=j.height;if(b.autoHeight){u.height+=j.height}else{p.height-=j.height}}break;case"bottom":if(!j.overlay){if(b.autoHeight){u.height+=j.height}else{p.height-=j.height}}j.y=(p.y+p.height);break;case"left":j.x=p.x;if(!j.overlay){p.x+=j.width;if(b.autoWidth){u.width+=j.width}else{p.width-=j.width}}break;case"right":if(!j.overlay){if(b.autoWidth){u.width+=j.width}else{p.width-=j.width}}j.x=(p.x+p.width);break}if(j.ignoreFrame){if(r=="bottom"){j.y+=(e.bottom+t.bottom+d.bottom)}else{j.y-=(e.top+t.top+d.top)}if(r=="right"){j.x+=(e.right+t.right+d.right)}else{j.x-=(e.left+t.left+d.left)}}return j},initBox:function(m){var j=this,h=j.info.bodyBox,a=(m.dock=="top"||m.dock=="bottom"),b=j.owner,e=j.frameSize,c=j.info,k=c.padding,d=c.border,g={item:m,overlay:m.overlay,type:m.dock,offsets:Ext.Element.parseBox(m.offsets||{}),ignoreFrame:m.ignoreParentFrame};if(m.stretch!==false){g.stretched=true;if(a){g.x=h.x+g.offsets.left;g.width=h.width-(g.offsets.left+g.offsets.right);if(g.ignoreFrame){g.width+=(e.left+e.right+d.left+d.right+k.left+k.right)}m.setCalculatedSize(g.width-m.el.getMargin("lr"),undefined,b)}else{g.y=h.y+g.offsets.top;g.height=h.height-(g.offsets.bottom+g.offsets.top);if(g.ignoreFrame){g.height+=(e.top+e.bottom+d.top+d.bottom+k.top+k.bottom)}m.setCalculatedSize(undefined,g.height-m.el.getMargin("tb"),b);if(!Ext.supports.ComputedStyle){m.el.repaint()}}}else{m.doComponentLayout();g.width=m.getWidth()-(g.offsets.left+g.offsets.right);g.height=m.getHeight()-(g.offsets.bottom+g.offsets.top);g.y+=g.offsets.top;if(a){g.x=(m.align=="right")?h.width-g.width:h.x;g.x+=g.offsets.left}}if(g.width===undefined){g.width=m.getWidth()+m.el.getMargin("lr")}if(g.height===undefined){g.height=m.getHeight()+m.el.getMargin("tb")}return g},getLayoutItems:function(){var c=this.owner.getDockedItems(),d=c.length,b=0,a=[];for(;b<d;b++){if(c[b].isVisible(true)){a.push(c[b])}}return a},renderItems:function(h,e){var a=e.dom.childNodes,d=a.length,g=h.length,m=0,c,b,k,n;for(c=0;c<d;c++){k=Ext.get(a[c]);for(b=0;b<g;b++){n=h[b];if(n.rendered&&(k.id==n.el.id||k.contains(n.el.id))){break}}if(b===g){m++}}for(c=0,b=0;c<g;c++,b++){n=h[c];if(c===b&&(n.dock==="right"||n.dock==="bottom")){b+=m}if(n&&!n.rendered){this.renderItem(n,e,b)}else{if(!this.isValidParent(n,e,b)){this.moveItem(n,e,b)}}}},setBodyBox:function(g){var j=this,a=j.owner,h=a.body,b=j.info,e=b.bodyMargin,k=b.padding,d=b.border,c=j.frameSize;if(a.collapsed){return}if(Ext.isNumber(g.width)){g.width-=e.left+e.right}if(Ext.isNumber(g.height)){g.height-=e.top+e.bottom}j.setElementSize(h,g.width,g.height);if(Ext.isNumber(g.x)){h.setLeft(g.x-k.left-c.left)}if(Ext.isNumber(g.y)){h.setTop(g.y-k.top-c.top)}},configureItem:function(a,b){this.callParent(arguments);if(a.dock=="top"||a.dock=="bottom"){a.layoutManagedWidth=1;a.layoutManagedHeight=2}else{a.layoutManagedWidth=2;a.layoutManagedHeight=1}a.addCls(Ext.baseCSSPrefix+"docked");a.addClsWithUI("docked-"+a.dock)},afterRemove:function(a){this.callParent(arguments);if(this.itemCls){a.el.removeCls(this.itemCls+"-"+a.dock)}var b=a.el.dom;if(!a.destroying&&b){b.parentNode.removeChild(b)}this.childrenChanged=true}});Ext.define("Ext.util.Memento",function(){function d(h,g,j){h[j]=g[j]}function c(h,g,j){delete h[j]}function e(j,h,k){var g=j[k];if(g||j.hasOwnProperty(k)){a(h,k,g)}}function a(h,j,g){if(Ext.isDefined(g)){h[j]=g}else{delete h[j]}}function b(g,k,j,h){if(k){if(Ext.isArray(h)){Ext.each(h,function(m){g(k,j,m)})}else{g(k,j,h)}}}return{data:null,target:null,constructor:function(h,g){if(h){this.target=h;if(g){this.capture(g)}}},capture:function(g,h){b(d,this.data||(this.data={}),h||this.target,g)},remove:function(g){b(c,this.data,null,g)},restore:function(h,g,j){b(e,this.data,j||this.target,h);if(g!==false){this.remove(h)}},restoreAll:function(g,k){var j=this,h=k||this.target;Ext.Object.each(j.data,function(n,m){a(h,n,m)});if(g!==false){delete j.data}}}}());Ext.define("Ext.app.EventBus",{requires:["Ext.util.Event"],mixins:{observable:"Ext.util.Observable"},constructor:function(){this.mixins.observable.constructor.call(this);this.bus={};var a=this;Ext.override(Ext.Component,{fireEvent:function(b){if(Ext.util.Observable.prototype.fireEvent.apply(this,arguments)!==false){return a.dispatch.call(a,b,this,arguments)}return false}})},dispatch:function(m,g,k){var h=this.bus,n=h[m],d,c,b,p,a,e,j;if(n){for(d in n){if(g.is(d)){c=n[d];for(b in c){p=c[b];for(e=0,j=p.length;e<j;e++){a=p[e];if(a.fire.apply(a,Array.prototype.slice.call(k,1))===false){return false}}}}}}},control:function(d,g,c){var b=this.bus,a,e;if(Ext.isString(d)){a=d;d={};d[a]=g;this.control(d,null,c);return}Ext.Object.each(d,function(h,j){Ext.Object.each(j,function(p,q){var k={},m=c,n=Ext.create("Ext.util.Event",c,p);if(Ext.isObject(q)){k=q;q=k.fn;m=k.scope||c;delete k.fn;delete k.scope}n.addListener(q,m,k);b[p]=b[p]||{};b[p][h]=b[p][h]||{};b[p][h][c.id]=b[p][h][c.id]||[];b[p][h][c.id].push(n)})})}});Ext.define("Ext.data.Types",{singleton:true,requires:["Ext.data.SortTypes"]},function(){var a=Ext.data.SortTypes;Ext.apply(Ext.data.Types,{stripRe:/[\$,%]/g,AUTO:{convert:function(b){return b},sortType:a.none,type:"auto"},STRING:{convert:function(c){var b=this.useNull?null:"";return(c===undefined||c===null)?b:String(c)},sortType:a.asUCString,type:"string"},INT:{convert:function(b){return b!==undefined&&b!==null&&b!==""?parseInt(String(b).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:a.none,type:"int"},FLOAT:{convert:function(b){return b!==undefined&&b!==null&&b!==""?parseFloat(String(b).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:a.none,type:"float"},BOOL:{convert:function(b){if(this.useNull&&(b===undefined||b===null||b==="")){return null}return b===true||b==="true"||b==1},sortType:a.none,type:"bool"},DATE:{convert:function(c){var d=this.dateFormat,b;if(!c){return null}if(Ext.isDate(c)){return c}if(d){if(d=="timestamp"){return new Date(c*1000)}if(d=="time"){return new Date(parseInt(c,10))}return Ext.Date.parse(c,d)}b=Date.parse(c);return b?new Date(b):null},sortType:a.asDate,type:"date"}});Ext.apply(Ext.data.Types,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})});Ext.define("Ext.data.Field",{requires:["Ext.data.Types","Ext.data.SortTypes"],alias:"data.field",constructor:function(b){if(Ext.isString(b)){b={name:b}}Ext.apply(this,b);var d=Ext.data.Types,a=this.sortType,c;if(this.type){if(Ext.isString(this.type)){this.type=d[this.type.toUpperCase()]||d.AUTO}}else{this.type=d.AUTO}if(Ext.isString(a)){this.sortType=Ext.data.SortTypes[a]}else{if(Ext.isEmpty(a)){this.sortType=this.type.sortType}}if(!this.convert){this.convert=this.type.convert}},dateFormat:null,useNull:false,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:true,persist:true});Ext.define("Ext.util.AbstractMixedCollection",{requires:["Ext.util.Filter"],mixins:{observable:"Ext.util.Observable"},constructor:function(b,a){var c=this;c.items=[];c.map={};c.keys=[];c.length=0;c.addEvents("clear","add","replace","remove");c.allowFunctions=b===true;if(a){c.getKey=a}c.mixins.observable.constructor.call(c)},allowFunctions:false,add:function(b,e){var d=this,g=e,c=b,a;if(arguments.length==1){g=c;c=d.getKey(g)}if(typeof c!="undefined"&&c!==null){a=d.map[c];if(typeof a!="undefined"){return d.replace(c,g)}d.map[c]=g}d.length++;d.items.push(g);d.keys.push(c);d.fireEvent("add",d.length-1,g,c);return g},getKey:function(a){return a.id},replace:function(c,e){var d=this,a,b;if(arguments.length==1){e=arguments[0];c=d.getKey(e)}a=d.map[c];if(typeof c=="undefined"||c===null||typeof a=="undefined"){return d.add(c,e)}b=d.indexOfKey(c);d.items[b]=e;d.map[c]=e;d.fireEvent("replace",c,a,e);return e},addAll:function(g){var e=this,d=0,b,a,c;if(arguments.length>1||Ext.isArray(g)){b=arguments.length>1?arguments:g;for(a=b.length;d<a;d++){e.add(b[d])}}else{for(c in g){if(g.hasOwnProperty(c)){if(e.allowFunctions||typeof g[c]!="function"){e.add(c,g[c])}}}}},each:function(e,d){var b=[].concat(this.items),c=0,a=b.length,g;for(;c<a;c++){g=b[c];if(e.call(d||g,g,c,a)===false){break}}},eachKey:function(e,d){var g=this.keys,b=this.items,c=0,a=g.length;for(;c<a;c++){e.call(d||window,g[c],b[c],c,a)}},findBy:function(e,d){var g=this.keys,b=this.items,c=0,a=b.length;for(;c<a;c++){if(e.call(d||window,b[c],g[c])){return b[c]}}return null},find:function(){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.util.MixedCollection: find has been deprecated. Use findBy instead.")}return this.findBy.apply(this,arguments)},insert:function(a,b,e){var d=this,c=b,g=e;if(arguments.length==2){g=c;c=d.getKey(g)}if(d.containsKey(c)){d.suspendEvents();d.removeAtKey(c);d.resumeEvents()}if(a>=d.length){return d.add(c,g)}d.length++;Ext.Array.splice(d.items,a,0,g);if(typeof c!="undefined"&&c!==null){d.map[c]=g}Ext.Array.splice(d.keys,a,0,c);d.fireEvent("add",a,g,c);return g},remove:function(a){return this.removeAt(this.indexOf(a))},removeAll:function(a){Ext.each(a||[],function(b){this.remove(b)},this);return this},removeAt:function(a){var c=this,d,b;if(a<c.length&&a>=0){c.length--;d=c.items[a];Ext.Array.erase(c.items,a,1);b=c.keys[a];if(typeof b!="undefined"){delete c.map[b]}Ext.Array.erase(c.keys,a,1);c.fireEvent("remove",d,b);return d}return false},removeAtKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:function(a){return Ext.Array.indexOf(this.items,a)},indexOfKey:function(a){return Ext.Array.indexOf(this.keys,a)},get:function(b){var d=this,a=d.map[b],c=a!==undefined?a:(typeof b=="number")?d.items[b]:undefined;return typeof c!="function"||d.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(a){return Ext.Array.contains(this.items,a)},containsKey:function(a){return typeof this.map[a]!="undefined"},clear:function(){var a=this;a.length=0;a.items=[];a.keys=[];a.map={};a.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(h,b,j,a){var c=this.extractValues(h,b),g=c.length,e=0,d;j=j||0;a=(a||a===0)?a:g-1;for(d=j;d<=a;d++){e+=c[d]}return e},collect:function(k,e,h){var m=this.extractValues(k,e),a=m.length,b={},c=[],j,g,d;for(d=0;d<a;d++){j=m[d];g=String(j);if((h||!Ext.isEmpty(j))&&!b[g]){b[g]=true;c.push(j)}}return c},extractValues:function(c,a){var b=this.items;if(a){b=Ext.Array.pluck(b,a)}return Ext.Array.pluck(b,c)},getRange:function(g,a){var e=this,c=e.items,b=[],d;if(c.length<1){return b}g=g||0;a=Math.min(typeof a=="undefined"?e.length-1:a,e.length-1);if(g<=a){for(d=g;d<=a;d++){b[b.length]=c[d]}}else{for(d=g;d>=a;d--){b[b.length]=c[d]}}return b},filter:function(d,c,g,a){var b=[],e;if(Ext.isString(d)){b.push(Ext.create("Ext.util.Filter",{property:d,value:c,anyMatch:g,caseSensitive:a}))}else{if(Ext.isArray(d)||d instanceof Ext.util.Filter){b=b.concat(d)}}e=function(h){var p=true,q=b.length,j;for(j=0;j<q;j++){var n=b[j],m=n.filterFn,k=n.scope;p=p&&m.call(k,h)}return p};return this.filterBy(e)},filterBy:function(e,d){var j=this,a=new this.self(),h=j.keys,b=j.items,g=b.length,c;a.getKey=j.getKey;for(c=0;c<g;c++){if(e.call(d||j,b[c],h[c])){a.add(h[c],b[c])}}return a},findIndex:function(c,b,e,d,a){if(Ext.isEmpty(b,false)){return -1}b=this.createValueMatcher(b,d,a);return this.findIndexBy(function(g){return g&&b.test(g[c])},null,e)},findIndexBy:function(e,d,j){var h=this,g=h.keys,b=h.items,c=j||0,a=b.length;for(;c<a;c++){if(e.call(d||h,b[c],g[c])){return c}}return -1},createValueMatcher:function(c,e,a,b){if(!c.exec){var d=Ext.String.escapeRegex;c=String(c);if(e===true){c=d(c)}else{c="^"+d(c);if(b===true){c+="$"}}c=new RegExp(c,a?"":"i")}return c},clone:function(){var e=this,g=new this.self(),d=e.keys,b=e.items,c=0,a=b.length;for(;c<a;c++){g.add(d[c],b[c])}g.getKey=e.getKey;return g}});Ext.define("Ext.util.Sortable",{isSortable:true,defaultSortDirection:"ASC",requires:["Ext.util.Sorter"],initSortable:function(){var a=this,b=a.sorters;a.sorters=Ext.create("Ext.util.AbstractMixedCollection",false,function(c){return c.id||c.property});if(b){a.sorters.addAll(a.decodeSorters(b))}},sort:function(h,g,c,e){var d=this,j,b,a;if(Ext.isArray(h)){e=c;c=g;a=h}else{if(Ext.isObject(h)){e=c;c=g;a=[h]}else{if(Ext.isString(h)){j=d.sorters.get(h);if(!j){j={property:h,direction:g};a=[j]}else{if(g===undefined){j.toggle()}else{j.setDirection(g)}}}}}if(a&&a.length){a=d.decodeSorters(a);if(Ext.isString(c)){if(c==="prepend"){h=d.sorters.clone().items;d.sorters.clear();d.sorters.addAll(a);d.sorters.addAll(h)}else{d.sorters.addAll(a)}}else{d.sorters.clear();d.sorters.addAll(a)}}if(e!==false){d.onBeforeSort(a);h=d.sorters.items;if(h.length){b=function(n,m){var k=h[0].sort(n,m),q=h.length,p;for(p=1;p<q;p++){k=k||h[p].sort.call(this,n,m)}return k};d.doSort(b)}}return h},onBeforeSort:Ext.emptyFn,decodeSorters:function(g){if(!Ext.isArray(g)){if(g===undefined){g=[]}else{g=[g]}}var d=g.length,h=Ext.util.Sorter,a=this.model?this.model.prototype.fields:null,e,b,c;for(c=0;c<d;c++){b=g[c];if(!(b instanceof h)){if(Ext.isString(b)){b={property:b}}Ext.applyIf(b,{root:this.sortRoot,direction:"ASC"});if(b.fn){b.sorterFn=b.fn}if(typeof b=="function"){b={sorterFn:b}}if(a&&!b.transform){e=a.get(b.property);b.transform=e?e.sortType:undefined}g[c]=Ext.create("Ext.util.Sorter",b)}}return g},getSorters:function(){return this.sorters.items}});Ext.define("Ext.util.MixedCollection",{extend:"Ext.util.AbstractMixedCollection",mixins:{sortable:"Ext.util.Sortable"},constructor:function(){var a=this;a.callParent(arguments);a.addEvents("sort");a.mixins.sortable.initSortable.call(a)},doSort:function(a){this.sortBy(a)},_sort:function(m,a,k){var j=this,d,e,b=String(a).toUpperCase()=="DESC"?-1:1,h=[],n=j.keys,g=j.items;k=k||function(p,c){return p-c};for(d=0,e=g.length;d<e;d++){h[h.length]={key:n[d],value:g[d],index:d}}Ext.Array.sort(h,function(p,c){var q=k(p[m],c[m])*b;if(q===0){q=(p.index<c.index?-1:1)}return q});for(d=0,e=h.length;d<e;d++){g[d]=h[d].value;n[d]=h[d].key}j.fireEvent("sort",j)},sortBy:function(c){var h=this,b=h.items,g=h.keys,e=b.length,a=[],d;for(d=0;d<e;d++){a[d]={key:g[d],value:b[d],index:d}}Ext.Array.sort(a,function(k,j){var m=c(k.value,j.value);if(m===0){m=(k.index<j.index?-1:1)}return m});for(d=0;d<e;d++){b[d]=a[d].value;g[d]=a[d].key}h.fireEvent("sort",h,b,g)},reorder:function(d){var h=this,b=h.items,c=0,g=b.length,a=[],e=[],j;h.suspendEvents();for(j in d){a[d[j]]=b[j]}for(c=0;c<g;c++){if(d[c]==undefined){e.push(b[c])}}for(c=0;c<g;c++){if(a[c]==undefined){a[c]=e.shift()}}h.clear();h.addAll(a);h.resumeEvents();h.fireEvent("sort",h)},sortByKey:function(a,b){this._sort("key",a,b||function(d,c){var g=String(d).toUpperCase(),e=String(c).toUpperCase();return g>e?1:(g<e?-1:0)})}});Ext.define("Ext.data.Errors",{extend:"Ext.util.MixedCollection",isValid:function(){return this.length===0},getByField:function(e){var d=[],a,c,b;for(b=0;b<this.length;b++){a=this.items[b];if(a.field==e){d.push(a)}}return d}});Ext.define("Ext.data.reader.Reader",{requires:["Ext.data.ResultSet"],alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],totalProperty:"total",successProperty:"success",root:"",implicitIncludes:true,isReader:true,constructor:function(a){var b=this;Ext.apply(b,a||{});b.fieldCount=0;b.model=Ext.ModelManager.getModel(a.model);if(b.model){b.buildExtractors()}},setModel:function(a,c){var b=this;b.model=Ext.ModelManager.getModel(a);b.buildExtractors(true);if(c&&b.proxy){b.proxy.setModel(b.model,true)}},read:function(a){var b=a;if(a&&a.responseText){b=this.getResponseData(a)}if(b){return this.readRecords(b)}else{return this.nullResultSet}},readRecords:function(c){var d=this;if(d.fieldCount!==d.getFields().length){d.buildExtractors(true)}d.rawData=c;c=d.getData(c);var g=Ext.isArray(c)?c:d.getRoot(c),j=true,b=0,e,h,a,k;if(g){e=g.length}if(d.totalProperty){h=parseInt(d.getTotal(c),10);if(!isNaN(h)){e=h}}if(d.successProperty){h=d.getSuccess(c);if(h===false||h==="false"){j=false}}if(d.messageProperty){k=d.getMessage(c)}if(g){a=d.extractData(g);b=a.length}else{b=0;a=[]}return Ext.create("Ext.data.ResultSet",{total:e||b,count:b,records:a,success:j,message:k})},extractData:function(k){var j=this,m=[],e=[],d=j.model,g=0,b=k.length,n=j.getIdProperty(),c,a,h;if(!k.length&&Ext.isObject(k)){k=[k];b=1}for(;g<b;g++){c=k[g];m=j.extractValues(c);a=j.getId(c);h=new d(m,a,c);e.push(h);if(j.implicitIncludes){j.readAssociated(h,c)}}return e},readAssociated:function(h,e){var d=h.associations.items,g=0,a=d.length,c,b,k,j;for(;g<a;g++){c=d[g];b=this.getAssociatedDataRoot(e,c.associationKey||c.name);if(b){j=c.getReader();if(!j){k=c.associatedModel.proxy;if(k){j=k.getReader()}else{j=new this.constructor({model:c.associatedName})}}c.read(h,j,b)}}},getAssociatedDataRoot:function(b,a){return b[a]},getFields:function(){return this.model.prototype.fields.items},extractValues:function(g){var a=this.getFields(),c=0,d=a.length,b={},h,e;for(;c<d;c++){h=a[c];e=this.extractorFunctions[c](g);b[h.name]=e}return b},getData:function(a){return a},getRoot:function(a){return a},getResponseData:function(a){},onMetaChange:function(c){var a=c.fields,b;Ext.apply(this,c);if(a){b=Ext.define("Ext.data.reader.Json-Model"+Ext.id(),{extend:"Ext.data.Model",fields:a});this.setModel(b,true)}else{this.buildExtractors(true)}},getIdProperty:function(){var a=this.idProperty;if(Ext.isEmpty(a)){a=this.model.prototype.idProperty}return a},buildExtractors:function(e){var c=this,h=c.getIdProperty(),d=c.totalProperty,b=c.successProperty,g=c.messageProperty,a;if(e===true){delete c.extractorFunctions}if(c.extractorFunctions){return}if(d){c.getTotal=c.createAccessor(d)}if(b){c.getSuccess=c.createAccessor(b)}if(g){c.getMessage=c.createAccessor(g)}if(h){a=c.createAccessor(h);c.getId=function(j){var k=a.call(c,j);return(k===undefined||k==="")?null:k}}else{c.getId=function(){return null}}c.buildFieldExtractors()},buildFieldExtractors:function(){var d=this,a=d.getFields(),c=a.length,b=0,h=[],g,e;for(;b<c;b++){g=a[b];e=(g.mapping!==undefined&&g.mapping!==null)?g.mapping:g.name;h.push(d.createAccessor(e))}d.fieldCount=c;d.extractorFunctions=h}},function(){Ext.apply(this,{nullResultSet:Ext.create("Ext.data.ResultSet",{total:0,count:0,records:[],success:true})})});Ext.define("Ext.data.reader.Json",{extend:"Ext.data.reader.Reader",alternateClassName:"Ext.data.JsonReader",alias:"reader.json",root:"",useSimpleAccessors:false,readRecords:function(a){if(a.metaData){this.onMetaChange(a.metaData)}this.jsonData=a;return this.callParent([a])},getResponseData:function(a){var c;try{c=Ext.decode(a.responseText)}catch(b){Ext.Error.raise({response:a,json:a.responseText,parseError:b,msg:"Unable to parse the JSON returned by the server: "+b.toString()})}return c},buildExtractors:function(){var a=this;a.callParent(arguments);if(a.root){a.getRoot=a.createAccessor(a.root)}else{a.getRoot=function(b){return b}}},extractData:function(a){var e=this.record,d=[],c,b;if(e){c=a.length;if(!c&&Ext.isObject(a)){c=1;a=[a]}for(b=0;b<c;b++){d[b]=a[b][e]}}else{d=a}return this.callParent([d])},createAccessor:function(){var a=/[\[\.]/;return function(c){if(Ext.isEmpty(c)){return Ext.emptyFn}if(Ext.isFunction(c)){return c}if(this.useSimpleAccessors!==true){var b=String(c).search(a);if(b>=0){return Ext.functionFactory("obj","return obj"+(b>0?".":"")+c)}}return function(d){return d[c]}}}()});Ext.define("Ext.data.writer.Json",{extend:"Ext.data.writer.Writer",alternateClassName:"Ext.data.JsonWriter",alias:"writer.json",root:undefined,encode:false,allowSingle:true,writeRecords:function(b,c){var a=this.root;if(this.allowSingle&&c.length==1){c=c[0]}if(this.encode){if(a){b.params[a]=Ext.encode(c)}else{}}else{b.jsonData=b.jsonData||{};if(a){b.jsonData[a]=c}else{b.jsonData=c}}return b}});Ext.define("Ext.data.proxy.Proxy",{alias:"proxy.proxy",alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],requires:["Ext.data.reader.Json","Ext.data.writer.Json"],uses:["Ext.data.Batch","Ext.data.Operation","Ext.data.Model"],mixins:{observable:"Ext.util.Observable"},batchOrder:"create,update,destroy",batchActions:true,defaultReaderType:"json",defaultWriterType:"json",isProxy:true,constructor:function(a){a=a||{};if(a.model===undefined){delete a.model}this.mixins.observable.constructor.call(this,a);if(this.model!==undefined&&!(this.model instanceof Ext.data.Model)){this.setModel(this.model)}},setModel:function(b,c){this.model=Ext.ModelManager.getModel(b);var a=this.reader,d=this.writer;this.setReader(a);this.setWriter(d);if(c&&this.store){this.store.setModel(this.model)}},getModel:function(){return this.model},setReader:function(a){var b=this;if(a===undefined||typeof a=="string"){a={type:a}}if(a.isReader){a.setModel(b.model)}else{Ext.applyIf(a,{proxy:b,model:b.model,type:b.defaultReaderType});a=Ext.createByAlias("reader."+a.type,a)}b.reader=a;return b.reader},getReader:function(){return this.reader},setWriter:function(a){if(a===undefined||typeof a=="string"){a={type:a}}if(!(a instanceof Ext.data.writer.Writer)){Ext.applyIf(a,{model:this.model,type:this.defaultWriterType});a=Ext.createByAlias("writer."+a.type,a)}this.writer=a;return this.writer},getWriter:function(){return this.writer},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,destroy:Ext.emptyFn,batch:function(d,e){var g=this,c=Ext.create("Ext.data.Batch",{proxy:g,listeners:e||{}}),b=g.batchActions,a;Ext.each(g.batchOrder.split(","),function(h){a=d[h];if(a){if(b){c.add(Ext.create("Ext.data.Operation",{action:h,records:a}))}else{Ext.each(a,function(j){c.add(Ext.create("Ext.data.Operation",{action:h,records:[j]}))})}}},g);c.start();return c}},function(){Ext.data.DataProxy=this});Ext.define("Ext.data.proxy.Server",{extend:"Ext.data.proxy.Proxy",alias:"proxy.server",alternateClassName:"Ext.data.ServerProxy",uses:["Ext.data.Request"],pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",sortParam:"sort",filterParam:"filter",directionParam:"dir",simpleSortMode:false,noCache:true,cacheString:"_dc",timeout:30000,constructor:function(a){var b=this;a=a||{};this.addEvents("exception");b.callParent([a]);b.extraParams=a.extraParams||{};b.api=a.api||{};b.nocache=b.noCache},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},destroy:function(){return this.doRequest.apply(this,arguments)},buildRequest:function(a){var c=Ext.applyIf(a.params||{},this.extraParams||{}),b;c=Ext.applyIf(c,this.getParams(a));if(a.id&&!c.id){c.id=a.id}b=Ext.create("Ext.data.Request",{params:c,action:a.action,records:a.records,operation:a,url:a.url});b.url=this.buildUrl(b);a.request=b;return b},processResponse:function(h,a,c,b,g,j){var e=this,d,k;if(h===true){d=e.getReader();k=d.read(e.extractResponseData(b));if(k.success!==false){Ext.apply(a,{response:b,resultSet:k});a.commitRecords(k.records);a.setCompleted();a.setSuccessful()}else{a.setException(k.message);e.fireEvent("exception",this,b,a)}}else{e.setException(a,b);e.fireEvent("exception",this,b,a)}if(typeof g=="function"){g.call(j||e,a)}e.afterRequest(c,h)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText})},extractResponseData:function(a){return a},applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(d){var b=[],c=d.length,a=0;for(;a<c;a++){b[a]={property:d[a].property,direction:d[a].direction}}return this.applyEncoding(b)},encodeFilters:function(d){var b=[],c=d.length,a=0;for(;a<c;a++){b[a]={property:d[a].property,value:d[a].value}}return this.applyEncoding(b)},getParams:function(n){var w=this,v={},r=Ext.isDefined,t=n.groupers,a=n.sorters,k=n.filters,h=n.page,g=n.start,u=n.limit,j=w.simpleSortMode,q=w.pageParam,d=w.startParam,b=w.limitParam,c=w.groupParam,e=w.sortParam,p=w.filterParam,m=w.directionParam;if(q&&r(h)){v[q]=h}if(d&&r(g)){v[d]=g}if(b&&r(u)){v[b]=u}if(c&&t&&t.length>0){v[c]=w.encodeSorters(t)}if(e&&a&&a.length>0){if(j){v[e]=a[0].property;v[m]=a[0].direction}else{v[e]=w.encodeSorters(a)}}if(p&&k&&k.length>0){v[p]=w.encodeFilters(k)}return v},buildUrl:function(c){var b=this,a=b.getUrl(c);if(b.noCache){a=Ext.urlAppend(a,Ext.String.format("{0}={1}",b.cacheString,Ext.Date.now()))}return a},getUrl:function(a){return a.url||this.api[a.action]||this.url},doRequest:function(a,c,b){},afterRequest:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.reader,this.writer)}});Ext.define("Ext.data.proxy.Ajax",{requires:["Ext.util.MixedCollection","Ext.Ajax"],extend:"Ext.data.proxy.Server",alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},doRequest:function(a,e,b){var d=this.getWriter(),c=this.buildRequest(a,e,b);if(a.allowWrite()){c=d.write(c)}Ext.apply(c,{headers:this.headers,timeout:this.timeout,scope:this,callback:this.createRequestCallback(c,a,e,b),method:this.getMethod(c),disableCaching:false});Ext.Ajax.request(c);return c},getMethod:function(a){return this.actionMethods[a.action]},createRequestCallback:function(d,a,e,b){var c=this;return function(h,j,g){c.processResponse(j,a,d,g,e,b)}}},function(){Ext.data.HttpProxy=this});Ext.define("Ext.data.Model",{alternateClassName:"Ext.data.Record",mixins:{observable:"Ext.util.Observable"},requires:["Ext.ModelManager","Ext.data.IdGenerator","Ext.data.Field","Ext.data.Errors","Ext.data.Operation","Ext.data.validations","Ext.data.proxy.Ajax","Ext.util.MixedCollection"],onClassExtended:function(a,b){var c=b.onBeforeClassCreated;b.onBeforeClassCreated=function(d,B){var A=this,C=Ext.getClassName(d),n=d.prototype,u=d.prototype.superclass,e=B.validations||[],q=B.fields||[],w=B.associations||[],v=B.belongsTo,p=B.hasMany,r=B.idgen,y=new Ext.util.MixedCollection(false,function(D){return D.name}),x=new Ext.util.MixedCollection(false,function(D){return D.name}),m=u.validations,z=u.fields,h=u.associations,g,t,j,k=[];d.modelName=C;n.modelName=C;if(m){e=m.concat(e)}B.validations=e;if(z){q=z.items.concat(q)}for(t=0,j=q.length;t<j;++t){y.add(new Ext.data.Field(q[t]))}B.fields=y;if(r){B.idgen=Ext.data.IdGenerator.get(r)}if(v){v=Ext.Array.from(v);for(t=0,j=v.length;t<j;++t){g=v[t];if(!Ext.isObject(g)){g={model:g}}g.type="belongsTo";w.push(g)}delete B.belongsTo}if(p){p=Ext.Array.from(p);for(t=0,j=p.length;t<j;++t){g=p[t];if(!Ext.isObject(g)){g={model:g}}g.type="hasMany";w.push(g)}delete B.hasMany}if(h){w=h.items.concat(w)}for(t=0,j=w.length;t<j;++t){k.push("association."+w[t].type.toLowerCase())}if(B.proxy){if(typeof B.proxy==="string"){k.push("proxy."+B.proxy)}else{if(typeof B.proxy.type==="string"){k.push("proxy."+B.proxy.type)}}}Ext.require(k,function(){Ext.ModelManager.registerType(C,d);for(t=0,j=w.length;t<j;++t){g=w[t];Ext.apply(g,{ownerModel:C,associatedModel:g.model});if(Ext.ModelManager.getModel(g.model)===undefined){Ext.ModelManager.registerDeferredAssociation(g)}else{x.add(Ext.data.Association.create(g))}}B.associations=x;c.call(A,d,B);d.setProxy(d.prototype.proxy||d.prototype.defaultProxyType);Ext.ModelManager.onModelDefined(d)})}},inheritableStatics:{setProxy:function(a){if(!a.isProxy){if(typeof a=="string"){a={type:a}}a=Ext.createByAlias("proxy."+a.type,a)}a.setModel(this);this.proxy=this.prototype.proxy=a;return a},getProxy:function(){return this.proxy},load:function(g,c){c=Ext.apply({},c);c=Ext.applyIf(c,{action:"read",id:g});var b=Ext.create("Ext.data.Operation",c),d=c.scope||this,a=null,e;e=function(h){if(h.wasSuccessful()){a=h.getRecords()[0];Ext.callback(c.success,d,[a,h])}else{Ext.callback(c.failure,d,[a,h])}Ext.callback(c.callback,d,[a,h])};this.proxy.read(b,e,this)}},statics:{PREFIX:"ext-record",AUTO_ID:1,EDIT:"edit",REJECT:"reject",COMMIT:"commit",id:function(a){var b=[this.PREFIX,"-",this.AUTO_ID++].join("");a.phantom=true;a.internalId=b;return b}},idgen:{isGenerator:true,type:"default",generate:function(){return null},getRecId:function(a){return a.modelName+"-"+a.internalId}},editing:false,dirty:false,persistenceProperty:"data",evented:false,isModel:true,phantom:false,idProperty:"id",defaultProxyType:"ajax",constructor:function(g,b,n){g=g||{};var k=this,j,c,m,a,e,d,h=Ext.isArray(g),p=h?{}:null;k.internalId=(b||b===0)?b:Ext.data.Model.id(k);k.raw=n;Ext.applyIf(k,{data:{}});k.modified={};if(k.persistanceProperty){k.persistenceProperty=k.persistanceProperty}k[k.persistenceProperty]={};k.mixins.observable.constructor.call(k);j=k.fields.items;c=j.length;for(e=0;e<c;e++){m=j[e];a=m.name;if(h){p[a]=g[e]}else{if(g[a]===undefined){g[a]=m.defaultValue}}}k.set(p||g);if(k.getId()){k.phantom=false}else{if(k.phantom){d=k.idgen.generate();if(d!==null){k.setId(d)}}}k.dirty=false;k.modified={};if(typeof k.init=="function"){k.init()}k.id=k.idgen.getRecId(k)},get:function(a){return this[this.persistenceProperty][a]},set:function(q,k){var h=this,e=h.fields,p=h.modified,d=[],j,n,c,m,b,g,a;if(arguments.length==1&&Ext.isObject(q)){b=!h.editing;g=0;for(n in q){if(q.hasOwnProperty(n)){j=e.get(n);if(j&&j.convert!==j.type.convert){d.push(n);continue}if(!g&&b){h.beginEdit()}++g;h.set(n,q[n])}}a=d.length;if(a){if(!g&&b){h.beginEdit()}g+=a;for(c=0;c<a;c++){j=d[c];h.set(j,q[j])}}if(b&&g){h.endEdit()}}else{if(e){j=e.get(q);if(j&&j.convert){k=j.convert(k,h)}}m=h.get(q);h[h.persistenceProperty][q]=k;if(j&&j.persist&&!h.isEqual(m,k)){if(h.isModified(q)){if(h.isEqual(p[q],k)){delete p[q];h.dirty=false;for(n in p){if(p.hasOwnProperty(n)){h.dirty=true;break}}}}else{h.dirty=true;p[q]=m}}if(!h.editing){h.afterEdit()}}},isEqual:function(d,c){if(Ext.isDate(d)&&Ext.isDate(c)){return d.getTime()===c.getTime()}return d===c},beginEdit:function(){var a=this;if(!a.editing){a.editing=true;a.dirtySave=a.dirty;a.dataSave=Ext.apply({},a[a.persistenceProperty]);a.modifiedSave=Ext.apply({},a.modified)}},cancelEdit:function(){var a=this;if(a.editing){a.editing=false;a.modified=a.modifiedSave;a[a.persistenceProperty]=a.dataSave;a.dirty=a.dirtySave;delete a.modifiedSave;delete a.dataSave;delete a.dirtySave}},endEdit:function(a){var b=this,c;if(b.editing){b.editing=false;c=b.dirty||b.changedWhileEditing();delete b.modifiedSave;delete b.dataSave;delete b.dirtySave;if(a!==true&&c){b.afterEdit()}}},changedWhileEditing:function(){var c=this,b=c.dataSave,d=c[c.persistenceProperty],a;for(a in d){if(d.hasOwnProperty(a)){if(!c.isEqual(d[a],b[a])){return true}}}return false},getChanges:function(){var a=this.modified,b={},c;for(c in a){if(a.hasOwnProperty(c)){b[c]=this.get(c)}}return b},isModified:function(a){return this.modified.hasOwnProperty(a)},setDirty:function(){var b=this,a;b.dirty=true;b.fields.each(function(c){if(c.persist){a=c.name;b.modified[a]=b.get(a)}},b)},reject:function(a){var c=this,b=c.modified,d;for(d in b){if(b.hasOwnProperty(d)){if(typeof b[d]!="function"){c[c.persistenceProperty][d]=b[d]}}}c.dirty=false;c.editing=false;c.modified={};if(a!==true){c.afterReject()}},commit:function(a){var b=this;b.phantom=b.dirty=b.editing=false;b.modified={};if(a!==true){b.afterCommit()}},copy:function(a){var b=this;return new b.self(Ext.apply({},b[b.persistenceProperty]),a||b.internalId)},setProxy:function(a){if(!a.isProxy){if(typeof a==="string"){a={type:a}}a=Ext.createByAlias("proxy."+a.type,a)}a.setModel(this.self);this.proxy=a;return a},getProxy:function(){return this.proxy},validate:function(){var k=Ext.create("Ext.data.Errors"),c=this.validations,e=Ext.data.validations,b,d,j,a,h,g;if(c){b=c.length;for(g=0;g<b;g++){d=c[g];j=d.field||d.name;h=d.type;a=e[h](d,this.get(j));if(!a){k.add({field:j,message:d.message||e[h+"Message"]})}}}return k},isValid:function(){return this.validate().isValid()},save:function(c){c=Ext.apply({},c);var e=this,g=e.phantom?"create":"update",a=null,d=c.scope||e,b,h;Ext.apply(c,{records:[e],action:g});b=Ext.create("Ext.data.Operation",c);h=function(j){if(j.wasSuccessful()){a=j.getRecords()[0];e.set(a.data);a.dirty=false;Ext.callback(c.success,d,[a,j])}else{Ext.callback(c.failure,d,[a,j])}Ext.callback(c.callback,d,[a,j])};e.getProxy()[g](b,h,e);return e},destroy:function(c){c=Ext.apply({},c);var e=this,a=null,d=c.scope||e,b,g;Ext.apply(c,{records:[e],action:"destroy"});b=Ext.create("Ext.data.Operation",c);g=function(h){if(h.wasSuccessful()){Ext.callback(c.success,d,[a,h])}else{Ext.callback(c.failure,d,[a,h])}Ext.callback(c.callback,d,[a,h])};e.getProxy().destroy(b,g,e);return e},getId:function(){return this.get(this.idProperty)},setId:function(a){this.set(this.idProperty,a)},join:function(a){this.store=a},unjoin:function(a){delete this.store},afterEdit:function(){this.callStore("afterEdit")},afterReject:function(){this.callStore("afterReject")},afterCommit:function(){this.callStore("afterCommit")},callStore:function(b){var a=this.store;if(a!==undefined&&typeof a[b]=="function"){a[b](this)}},getAssociatedData:function(){return this.prepareAssociatedData(this,[],null)},prepareAssociatedData:function(t,b,r){var m=t.associations.items,p=m.length,g={},h,a,k,v,w,e,d,q,n,u,c;for(q=0;q<p;q++){e=m[q];u=e.type;c=true;if(r){c=u==r}if(c&&u=="hasMany"){h=t[e.storeName];g[e.name]=[];if(h&&h.data.length>0){k=h.data.items;w=k.length;for(n=0;n<w;n++){v=k[n];d=v.id;if(Ext.Array.indexOf(b,d)==-1){b.push(d);g[e.name][n]=v.data;Ext.apply(g[e.name][n],this.prepareAssociatedData(v,b,u))}}}}else{if(c&&u=="belongsTo"){v=t[e.instanceName];if(v!==undefined){d=v.id;if(Ext.Array.indexOf(b,d)==-1){b.push(d);g[e.name]=v.data;Ext.apply(g[e.name],this.prepareAssociatedData(v,b,u))}}}}}return g}});Ext.define("Ext.data.StoreManager",{extend:"Ext.util.MixedCollection",alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,uses:["Ext.data.ArrayStore"],register:function(){for(var a=0,b;(b=arguments[a]);a++){this.add(b)}},unregister:function(){for(var a=0,b;(b=arguments[a]);a++){this.remove(this.lookup(b))}},lookup:function(c){if(Ext.isArray(c)){var b=["field1"],e=!Ext.isArray(c[0]),g=c,d,a;if(e){g=[];for(d=0,a=c.length;d<a;++d){g.push([c[d]])}}else{for(d=2,a=c[0].length;d<=a;++d){b.push("field"+d)}}return Ext.create("Ext.data.ArrayStore",{data:g,fields:b,autoDestroy:true,autoCreated:true,expanded:e})}if(Ext.isString(c)){return this.get(c)}else{return Ext.data.AbstractStore.create(c)}},getKey:function(a){return a.storeId}},function(){Ext.regStore=function(c,b){var a;if(Ext.isObject(c)){b=c}else{b.storeId=c}if(b instanceof Ext.data.Store){a=b}else{a=Ext.create("Ext.data.Store",b)}return Ext.data.StoreManager.register(a)};Ext.getStore=function(a){return Ext.data.StoreManager.lookup(a)}});Ext.define("Ext.Component",{alias:["widget.component","widget.box"],extend:"Ext.AbstractComponent",requires:["Ext.util.DelayedTask"],uses:["Ext.Layer","Ext.resizer.Resizer","Ext.util.ComponentDragger"],mixins:{floating:"Ext.util.Floating"},statics:{DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g},resizeHandles:"all",floating:false,toFrontOnShow:true,hideMode:"display",hideParent:false,ariaRole:"presentation",bubbleEvents:[],actionMode:"el",monPropRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,constructor:function(a){var b=this;a=a||{};if(a.initialConfig){if(a.isAction){b.baseAction=a}a=a.initialConfig}else{if(a.tagName||a.dom||Ext.isString(a)){a={applyTo:a,id:a.id||a}}}b.callParent([a]);if(b.baseAction){b.baseAction.addComponent(b)}},initComponent:function(){var a=this;a.callParent();if(a.listeners){a.on(a.listeners);delete a.listeners}a.enableBubble(a.bubbleEvents);a.mons=[]},afterRender:function(){var b=this,a=b.resizable;if(b.floating){b.makeFloating(b.floating)}else{b.el.setVisibilityMode(Ext.Element[b.hideMode.toUpperCase()])}if(Ext.isDefined(b.autoScroll)){b.setAutoScroll(b.autoScroll)}b.callParent();if(!(b.x&&b.y)&&(b.pageX||b.pageY)){b.setPagePosition(b.pageX,b.pageY)}if(a){b.initResizable(a)}if(b.draggable){b.initDraggable()}b.initAria()},initAria:function(){var a=this.getActionEl(),b=this.ariaRole;if(b){a.dom.setAttribute("role",b)}},setAutoScroll:function(a){var b=this,c;a=!!a;if(b.rendered){c=b.getTargetEl();c.setStyle("overflow",a?"auto":"");if(a&&(Ext.isIE6||Ext.isIE7)){c.position()}}b.autoScroll=a;return b},makeFloating:function(a){this.mixins.floating.constructor.call(this,a)},initResizable:function(a){var b=this;a=Ext.apply({target:b,dynamic:false,constrainTo:b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.el.getScopeParent()),handles:b.resizeHandles},a);a.target=b;b.resizer=Ext.create("Ext.resizer.Resizer",a)},getDragEl:function(){return this.el},initDraggable:function(){var b=this,a=Ext.applyIf({el:b.getDragEl(),constrainTo:b.constrain?(b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.el.getScopeParent())):undefined},b.draggable);if(b.constrain||b.constrainDelegate){a.constrain=b.constrain;a.constrainDelegate=b.constrainDelegate}b.dd=Ext.create("Ext.util.ComponentDragger",b,a)},setPosition:function(m,j,a){var g=this,b=g.el,n={},h,k,e,d,c;if(Ext.isArray(m)){a=j;j=m[1];m=m[0]}g.x=m;g.y=j;if(!g.rendered){return g}h=g.adjustPosition(m,j);k=h.x;e=h.y;d=Ext.isNumber(k);c=Ext.isNumber(e);if(d||c){if(a){if(d){n.left=k}if(c){n.top=e}g.stopAnimation();g.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(g.afterSetPosition,g,[k,e])},to:n},a))}else{if(!d){b.setTop(e)}else{if(!c){b.setLeft(k)}else{b.setLeftTop(k,e)}}g.afterSetPosition(k,e)}}return g},afterSetPosition:function(b,a){this.onPosition(b,a);this.fireEvent("move",this,b,a)},showAt:function(a,d,b){var c=this;if(c.floating){c.setPosition(a,d,b)}else{c.setPagePosition(a,d,b)}c.show()},setPagePosition:function(a,e,b){var c=this,d;if(Ext.isArray(a)){e=a[1];a=a[0]}c.pageX=a;c.pageY=e;if(c.floating&&c.floatParent){d=c.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(a)&&Ext.isNumber(d.left)){a-=d.left}if(Ext.isNumber(e)&&Ext.isNumber(d.top)){e-=d.top}c.setPosition(a,e,b)}else{d=c.el.translatePoints(a,e);c.setPosition(d.left,d.top,b)}return c},getBox:function(b){var c=this.getPosition(b),a=this.getSize();a.x=c[0];a.y=c[1];return a},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},getOuterSize:function(){var a=this.el;return{width:a.getWidth()+a.getMargin("lr"),height:a.getHeight()+a.getMargin("tb")}},adjustPosition:function(a,c){if(this.floating&&this.floatParent){var b=this.floatParent.getTargetEl().getViewRegion();a+=b.left;c+=b.top}return{x:a,y:c}},getPosition:function(a){var c=this,b=c.el,d,e;if((a===true)||(c.floating&&!c.floatParent)){return[b.getLeft(true),b.getTop(true)]}d=c.xy||b.getXY();if(c.floating){e=c.floatParent.getTargetEl().getViewRegion();d[0]-=e.left;d[1]-=e.top}return d},getId:function(){var a=this,b;if(!a.id){b=a.getXType();b=b?b.replace(Ext.Component.INVALID_ID_CHARS_Re,"-"):"ext-comp";a.id=b+"-"+a.getAutoId()}return a.id},onEnable:function(){var a=this.getActionEl();a.dom.removeAttribute("aria-disabled");a.dom.disabled=false;this.callParent()},onDisable:function(){var a=this.getActionEl();a.dom.setAttribute("aria-disabled",true);a.dom.disabled=true;this.callParent()},show:function(d,a,b){var c=this;if(c.rendered&&c.isVisible()){if(c.toFrontOnShow&&c.floating){c.toFront()}}else{if(c.fireEvent("beforeshow",c)!==false){c.hidden=false;if(!c.rendered&&(c.autoRender||c.floating)){c.doAutoRender()}if(c.rendered){c.beforeShow();c.onShow.apply(c,arguments);if(c.ownerCt&&!c.floating&&!(c.ownerCt.suspendLayout||c.ownerCt.layout.layoutBusy)){c.ownerCt.doLayout()}c.afterShow.apply(c,arguments)}}}return c},beforeShow:Ext.emptyFn,onShow:function(){var a=this;a.el.show();a.callParent(arguments);if(a.floating&&a.constrain){a.doConstrain()}},afterShow:function(h,b,e){var g=this,a,c,d;h=h||g.animateTarget;if(!g.ghost){h=null}if(h){h=h.el?h.el:Ext.get(h);c=g.el.getBox();a=h.getBox();g.el.addCls(Ext.baseCSSPrefix+"hide-offsets");d=g.ghost();d.el.stopAnimation();d.el.setX(-10000);d.el.animate({from:a,to:c,listeners:{afteranimate:function(){delete d.componentLayout.lastComponentSize;g.unghost();g.el.removeCls(Ext.baseCSSPrefix+"hide-offsets");g.onShowComplete(b,e)}}})}else{g.onShowComplete(b,e)}},onShowComplete:function(a,b){var c=this;if(c.floating){c.toFront()}Ext.callback(a,b||c);c.fireEvent("show",c)},hide:function(){var a=this;a.showOnParentShow=false;if(!(a.rendered&&!a.isVisible())&&a.fireEvent("beforehide",a)!==false){a.hidden=true;if(a.rendered){a.onHide.apply(a,arguments);if(a.ownerCt&&!a.floating&&!(a.ownerCt.suspendLayout||a.ownerCt.layout.layoutBusy)){a.ownerCt.doLayout()}}}return a},onHide:function(g,a,d){var e=this,c,b;g=g||e.animateTarget;if(!e.ghost){g=null}if(g){g=g.el?g.el:Ext.get(g);c=e.ghost();c.el.stopAnimation();b=g.getBox();b.width+="px";b.height+="px";c.el.animate({to:b,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize;c.el.hide();e.afterHide(a,d)}}})}e.el.hide();if(!g){e.afterHide(a,d)}},afterHide:function(a,b){Ext.callback(a,b||this);this.fireEvent("hide",this)},onDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.proxy,a.proxyWrap,a.resizer);if(a.actionMode=="container"||a.removeMode=="container"){a.container.remove()}}delete a.focusTask;a.callParent()},deleteMembers:function(){var b=arguments,a=b.length,c=0;for(;c<a;++c){delete this[b[c]]}},focus:function(d,b){var c=this,a;if(b){if(!c.focusTask){c.focusTask=Ext.create("Ext.util.DelayedTask",c.focus)}c.focusTask.delay(Ext.isNumber(b)?b:10,null,c,[d,false]);return c}if(c.rendered&&!c.isDestroyed){a=c.getFocusEl();a.focus();if(a.dom&&d===true){a.dom.select()}if(c.floating){c.toFront(true)}}return c},getFocusEl:function(){return this.el},blur:function(){if(this.rendered){this.getFocusEl().blur()}return this},getEl:function(){return this.el},getResizeEl:function(){return this.el},getPositionEl:function(){return this.el},getActionEl:function(){return this.el},getVisibilityEl:function(){return this.el},onResize:Ext.emptyFn,getBubbleTarget:function(){return this.ownerCt},getContentTarget:function(){return this.el},cloneConfig:function(c){c=c||{};var d=c.id||Ext.id(),a=Ext.applyIf(c,this.initialConfig),b;a.id=d;b=Ext.getClass(this);return new b(a)},getXType:function(){return this.self.xtype},findParentBy:function(a){var b;for(b=this.ownerCt;b&&!a(b,this);b=b.ownerCt){}return b||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.ownerCt}return this},getProxy:function(){var a=this,b;if(!a.proxy){b=Ext.getBody();if(Ext.scopeResetCSS){a.proxyWrap=b=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"reset"})}a.proxy=a.el.createProxy(Ext.baseCSSPrefix+"proxy-el",b,true)}return a.proxy}});Ext.define("Ext.layout.container.AbstractContainer",{extend:"Ext.layout.Layout",type:"container",bindToOwnerCtComponent:false,bindToOwnerCtContainer:false,setItemSize:function(c,b,a){if(Ext.isObject(b)){a=b.height;b=b.width}c.setCalculatedSize(b,a,this.owner)},getLayoutItems:function(){return this.owner&&this.owner.items&&this.owner.items.items||[]},beforeLayout:function(){return !this.owner.collapsed&&this.callParent(arguments)},afterLayout:function(){this.owner.afterLayout(this)},getTarget:function(){return this.owner.getTargetEl()},getRenderTarget:function(){return this.owner.getTargetEl()}});Ext.define("Ext.layout.container.Container",{extend:"Ext.layout.container.AbstractContainer",alternateClassName:"Ext.layout.ContainerLayout",layoutItem:function(b,a){if(a){b.doComponentLayout(a.width,a.height)}else{b.doComponentLayout()}},getLayoutTargetSize:function(){var b=this.getTarget(),a;if(b){a=b.getViewSize();if(Ext.isIE&&a.width==0){a=b.getStyleSize()}a.width-=b.getPadding("lr");a.height-=b.getPadding("tb")}return a},beforeLayout:function(){if(this.owner.beforeLayout(arguments)!==false){return this.callParent(arguments)}else{return false}},getRenderedItems:function(){var e=this,h=e.getTarget(),a=e.getLayoutItems(),d=a.length,g=[],b,c;for(b=0;b<d;b++){c=a[b];if(c.rendered&&e.isValidParent(c,h,b)){g.push(c)}}return g},getVisibleItems:function(){var g=this.getTarget(),b=this.getLayoutItems(),e=b.length,a=[],c,d;for(c=0;c<e;c++){d=b[c];if(d.rendered&&this.isValidParent(d,g,c)&&d.hidden!==true){a.push(d)}}return a}});Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:"Ext.layout.container.Container",type:"autocontainer",bindToOwnerCtComponent:true,onLayout:function(a,g){var e=this,b=e.getLayoutItems(),d=b.length,c;if(d){if(!e.clearEl){e.clearEl=e.getRenderTarget().createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})}for(c=0;c<d;c++){e.setItemSize(b[c])}}},configureItem:function(a){this.callParent(arguments);a.layoutManagedHeight=2;a.layoutManagedWidth=2}});Ext.define("Ext.container.AbstractContainer",{extend:"Ext.Component",requires:["Ext.util.MixedCollection","Ext.layout.container.Auto","Ext.ZIndexManager"],suspendLayout:false,autoDestroy:true,defaultType:"panel",isContainer:true,layoutCounter:0,baseCls:Ext.baseCSSPrefix+"container",bubbleEvents:["add","remove"],initComponent:function(){var a=this;a.addEvents("afterlayout","beforeadd","beforeremove","add","remove");a.layoutOnShow=Ext.create("Ext.util.MixedCollection");a.callParent();a.initItems()},initItems:function(){var b=this,a=b.items;b.items=Ext.create("Ext.util.MixedCollection",false,b.getComponentId);if(a){if(!Ext.isArray(a)){a=[a]}b.add(a)}},afterRender:function(){this.getLayout();this.callParent()},renderChildren:function(){var b=this,a=b.getLayout();b.callParent();if(a){b.suspendLayout=true;a.renderChildren();delete b.suspendLayout}},setLayout:function(b){var a=this.layout;if(a&&a.isLayout&&a!=b){a.setOwner(null)}this.layout=b;b.setOwner(this)},getLayout:function(){var a=this;if(!a.layout||!a.layout.isLayout){a.setLayout(Ext.layout.Layout.create(a.layout,"autocontainer"))}return a.layout},doLayout:function(){var b=this,a=b.getLayout();if(b.rendered&&a&&!b.suspendLayout){if(!b.isFixedWidth()||!b.isFixedHeight()){if(b.componentLayout.layoutBusy!==true){b.doComponentLayout();if(b.componentLayout.layoutCancelled===true){a.layout()}}}else{if(a.layoutBusy!==true){a.layout()}}}return b},afterLayout:function(a){++this.layoutCounter;this.fireEvent("afterlayout",this,a)},prepareItems:function(b,d){if(!Ext.isArray(b)){b=[b]}var c=0,a=b.length,e;for(;c<a;c++){e=b[c];if(d){e=this.applyDefaults(e)}b[c]=this.lookupComponent(e)}return b},applyDefaults:function(a){var b=this.defaults;if(b){if(Ext.isFunction(b)){b=b.call(this,a)}if(Ext.isString(a)){a=Ext.ComponentManager.get(a)}Ext.applyIf(a,b)}return a},lookupComponent:function(a){return Ext.isString(a)?Ext.ComponentManager.get(a):this.createComponent(a)},createComponent:function(a,b){return Ext.ComponentManager.create(a,b||this.defaultType)},getComponentId:function(a){return a.getItemId()},add:function(){var j=this,g=Array.prototype.slice.call(arguments),a,h,b=[],c,e,m,d=-1,k;if(typeof g[0]=="number"){d=g.shift()}a=g.length>1;if(a||Ext.isArray(g[0])){h=a?g:g[0];j.suspendLayout=true;for(c=0,e=h.length;c<e;c++){m=h[c];if(d!=-1){m=j.add(d+c,m)}else{m=j.add(m)}b.push(m)}j.suspendLayout=false;j.doLayout();return b}k=j.prepareItems(g[0],true)[0];if(k.floating){k.onAdded(j,d)}else{d=(d!==-1)?d:j.items.length;if(j.fireEvent("beforeadd",j,k,d)!==false&&j.onBeforeAdd(k)!==false){j.items.insert(d,k);k.onAdded(j,d);j.onAdd(k,d);j.fireEvent("add",j,k,d)}j.doLayout()}return k},onAdd:Ext.emptyFn,onRemove:Ext.emptyFn,insert:function(b,a){return this.add(b,a)},move:function(b,d){var a=this.items,c;c=a.removeAt(b);if(c===false){return false}a.insert(d,c);this.doLayout();return c},onBeforeAdd:function(b){var a=this;if(b.ownerCt){b.ownerCt.remove(b,false)}if(a.border===false||a.border===0){b.border=(b.border===true)}},remove:function(a,b){var d=this,e=d.getComponent(a);if(e&&d.fireEvent("beforeremove",d,e)!==false){d.doRemove(e,b);d.fireEvent("remove",d,e)}return e},doRemove:function(c,b){var e=this,d=e.layout,a=d&&e.rendered;e.items.remove(c);c.onRemoved();if(a){d.onRemove(c)}e.onRemove(c,b);if(b===true||(b!==false&&e.autoDestroy)){c.destroy()}if(a&&!b){d.afterRemove(c)}if(!e.destroying){e.doLayout()}},removeAll:function(c){var h=this,e=h.items.items.slice(),b=[],d=0,a=e.length,g;h.suspendLayout=true;for(;d<a;d++){g=e[d];h.remove(g,c);if(g.ownerCt!==h){b.push(g)}}h.suspendLayout=false;if(a){h.doLayout()}return b},getRefItems:function(c){var h=this,d=h.items.items,b=d.length,e=0,g,a=[];for(;e<b;e++){g=d[e];a.push(g);if(c&&g.getRefItems){a.push.apply(a,g.getRefItems(true))}}if(h.floatingItems&&h.floatingItems.accessList){a.push.apply(a,h.floatingItems.accessList)}return a},cascade:function(m,n,a){var k=this,e=k.items?k.items.items:[],g=e.length,d=0,j,h=a?a.concat(k):[k],b=h.length-1;if(m.apply(n||k,h)!==false){for(;d<g;d++){j=e[d];if(j.cascade){j.cascade(m,n,a)}else{h[b]=j;m.apply(n||e,h)}}}return this},getComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.items.get(a)},query:function(a){a=a||"*";return Ext.ComponentQuery.query(a,this)},child:function(a){a=a||"";return this.query("> "+a)[0]||null},down:function(a){return this.query(a)[0]||null},show:function(){this.callParent(arguments);this.performDeferredLayouts();return this},performDeferredLayouts:function(){var e=this.layoutOnShow,d=e.getCount(),b=0,a,c;for(;b<d;b++){c=e.get(b);a=c.needsLayout;if(Ext.isObject(a)){c.doComponentLayout(a.width,a.height,a.isSetSize,a.ownerCt)}}e.clear()},onEnable:function(){Ext.Array.each(this.query("[isFormField]"),function(a){if(a.resetDisable){a.enable();delete a.resetDisable}});this.callParent()},onDisable:function(){Ext.Array.each(this.query("[isFormField]"),function(a){if(a.resetDisable!==false&&!a.disabled){a.disable();a.resetDisable=true}});this.callParent()},beforeLayout:function(){return true},beforeDestroy:function(){var b=this,a=b.items,d;if(a){while((d=a.first())){b.doRemove(d,true)}}Ext.destroy(b.layout);b.callParent()}});Ext.define("Ext.container.Container",{extend:"Ext.container.AbstractContainer",alias:"widget.container",alternateClassName:"Ext.Container",getChildByElement:function(d){var g,b,a=0,c=this.items.items,e=c.length;d=Ext.getDom(d);for(;a<e;a++){g=c[a];b=g.getEl();if((b.dom===d)||b.contains(d)){return g}}return null}});Ext.define("Ext.toolbar.Fill",{extend:"Ext.Component",alias:"widget.tbfill",alternateClassName:"Ext.Toolbar.Fill",isFill:true,flex:1});Ext.define("Ext.toolbar.Item",{extend:"Ext.Component",alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.define("Ext.toolbar.Separator",{extend:"Ext.toolbar.Item",alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",baseCls:Ext.baseCSSPrefix+"toolbar-separator",focusable:false});Ext.define("Ext.menu.Manager",{singleton:true,requires:["Ext.util.MixedCollection","Ext.util.KeyMap"],alternateClassName:"Ext.menu.MenuMgr",uses:["Ext.menu.Menu"],menus:{},groups:{},attached:false,lastShow:new Date(),init:function(){var a=this;a.active=Ext.create("Ext.util.MixedCollection");Ext.getDoc().addKeyListener(27,function(){if(a.active.length>0){a.hideAll()}},a)},hideAll:function(){var a=this.active,b;if(a&&a.length>0){b=a.clone();b.each(function(c){c.hide()});return true}return false},onHide:function(a){var b=this,c=b.active;c.remove(a);if(c.length<1){Ext.getDoc().un("mousedown",b.onMouseDown,b);b.attached=false}},onShow:function(a){var e=this,g=e.active,d=g.last(),c=e.attached,b=a.getEl(),h;e.lastShow=new Date();g.add(a);if(!c){Ext.getDoc().on("mousedown",e.onMouseDown,e);e.attached=true}a.toFront()},onBeforeHide:function(a){if(a.activeChild){a.activeChild.hide()}if(a.autoHideTimer){clearTimeout(a.autoHideTimer);delete a.autoHideTimer}},onBeforeShow:function(a){var c=this.active,b=a.parentMenu;c.remove(a);if(!b&&!a.allowOtherMenus){this.hideAll()}else{if(b&&b.activeChild&&a!=b.activeChild){b.activeChild.hide()}}},onMouseDown:function(g){var b=this,d=b.active,a=b.lastShow,c=g.target;if(Ext.Date.getElapsed(a)>50&&d.length>0&&!g.getTarget("."+Ext.baseCSSPrefix+"menu")){b.hideAll();if(Ext.isIE&&Ext.fly(c).focusable()){c.focus()}}},register:function(b){var a=this;if(!a.active){a.init()}if(b.floating){a.menus[b.id]=b;b.on({beforehide:a.onBeforeHide,hide:a.onHide,beforeshow:a.onBeforeShow,show:a.onShow,scope:a})}},get:function(b){var a=this.menus;if(typeof b=="string"){if(!a){return null}return a[b]}else{if(b.isMenu){return b}else{if(Ext.isArray(b)){return Ext.create("Ext.menu.Menu",{items:b})}else{return Ext.ComponentManager.create(b,"menu")}}}},unregister:function(d){var a=this,b=a.menus,c=a.active;delete b[d.id];c.remove(d);d.un({beforehide:a.onBeforeHide,hide:a.onHide,beforeshow:a.onBeforeShow,show:a.onShow,scope:a})},registerCheckable:function(c){var a=this.groups,b=c.group;if(b){if(!a[b]){a[b]=[]}a[b].push(c)}},unregisterCheckable:function(c){var a=this.groups,b=c.group;if(b){Ext.Array.remove(a[b],c)}},onCheckChange:function(d,g){var a=this.groups,c=d.group,b=0,j,e,h;if(c&&g){j=a[c];e=j.length;for(;b<e;b++){h=j[b];if(h!=d){h.setChecked(false)}}}}});Ext.define("Ext.layout.component.Button",{alias:["layout.button"],extend:"Ext.layout.component.Component",type:"button",cellClsRE:/-btn-(tl|br)\b/,htmlRE:/<.*>/,beforeLayout:function(){return this.callParent(arguments)||this.lastText!==this.owner.text},onLayout:function(c,r){var n=this,h=Ext.isNumber,d=n.owner,q=d.el,j=d.btnEl,e=d.btnInnerEl,g=d.btnIconEl,k=(d.icon||d.iconCls)&&(d.iconAlign=="top"||d.iconAlign=="bottom"),b=d.minWidth,p=d.maxWidth,a,t,m;n.getTargetInfo();n.callParent(arguments);e.unclip();n.setTargetSize(c,r);if(!h(c)){if(d.text&&(Ext.isIE6||Ext.isIE7)&&Ext.isStrict&&j&&j.getWidth()>20){t=n.btnFrameWidth;m=Ext.util.TextMetrics.measure(e,d.text);q.setWidth(m.width+t+n.adjWidth);j.setWidth(m.width+t);e.setWidth(m.width+t);if(k){g.setWidth(m.width+t)}}else{q.setWidth(null);j.setWidth(null);e.setWidth(null);g.setWidth(null)}if(b||p){a=q.getWidth();if(b&&(a<b)){n.setTargetSize(b,r)}else{if(p&&(a>p)){e.clip();n.setTargetSize(p,r)}}}}this.lastText=d.text},setTargetSize:function(a,n){var h=this,b=h.owner,e=Ext.isNumber,d=b.btnInnerEl,k=(e(a)?a-h.adjWidth:a),g=(e(n)?n-h.adjHeight:n),c=h.btnFrameHeight,m=b.getText(),j;h.callParent(arguments);h.setElementSize(b.btnEl,k,g);h.setElementSize(d,k,g);if(g>=0){d.setStyle("line-height",g-c+"px")}if(m&&this.htmlRE.test(m)){d.setStyle("line-height","normal");j=Ext.util.TextMetrics.measure(d,m).height;d.setStyle("padding-top",h.btnFrameTop+Math.max(d.getHeight()-c-j,0)/2+"px");h.setElementSize(d,k,g)}},getTargetInfo:function(){var e=this,a=e.owner,d=a.el,c=e.frameSize,h=a.frameBody,b=a.btnWrap,g=a.btnInnerEl;if(!("adjWidth" in e)){Ext.apply(e,{adjWidth:c.left+c.right+d.getBorderWidth("lr")+d.getPadding("lr")+b.getPadding("lr")+(h?h.getFrameWidth("lr"):0),adjHeight:c.top+c.bottom+d.getBorderWidth("tb")+d.getPadding("tb")+b.getPadding("tb")+(h?h.getFrameWidth("tb"):0),btnFrameWidth:g.getFrameWidth("lr"),btnFrameHeight:g.getFrameWidth("tb"),btnFrameTop:g.getFrameWidth("t")})}return e.callParent()}});Ext.define("Ext.button.Button",{alias:"widget.button",extend:"Ext.Component",requires:["Ext.menu.Manager","Ext.util.ClickRepeater","Ext.layout.component.Button","Ext.util.TextMetrics","Ext.util.KeyMap"],alternateClassName:"Ext.Button",isButton:true,componentLayout:"button",hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:"tl-bl?",textAlign:"center",type:"button",clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"btn",pressedCls:"pressed",overCls:"over",focusCls:"focus",menuActiveCls:"menu-active",ariaRole:"button",renderTpl:'<em id="{id}-btnWrap" class="{splitCls}"><tpl if="href"><a id="{id}-btnEl" href="{href}" target="{target}"<tpl if="tabIndex"> tabIndex="{tabIndex}"</tpl> role="link"><span id="{id}-btnInnerEl" class="{baseCls}-inner">{text}</span><span id="{id}-btnIconEl" class="{baseCls}-icon"></span></a></tpl><tpl if="!href"><button id="{id}-btnEl" type="{type}" hidefocus="true"<tpl if="tabIndex"> tabIndex="{tabIndex}"</tpl> role="button" autocomplete="off"><span id="{id}-btnInnerEl" class="{baseCls}-inner" style="{innerSpanStyle}">{text}</span><span id="{id}-btnIconEl" class="{baseCls}-icon {iconCls}">&#160;</span></button></tpl></em>',scale:"small",allowedScales:["small","medium","large"],iconAlign:"left",arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,initComponent:function(){var a=this;a.callParent(arguments);a.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");if(a.menu){a.split=true;a.menu=Ext.menu.Manager.get(a.menu);a.menu.ownerCt=a}if(a.url){a.href=a.url}if(a.href&&!a.hasOwnProperty("preventDefault")){a.preventDefault=false}if(Ext.isString(a.toggleGroup)){a.enableToggle=true}},initAria:function(){this.callParent();var a=this.getActionEl();if(this.menu){a.dom.setAttribute("aria-haspopup",true)}},getActionEl:function(){return this.btnEl},getFocusEl:function(){return this.btnEl},setButtonCls:function(){var d=this,b=[],a=d.btnIconEl,c="x-hide-display";if(d.useSetClass){if(!Ext.isEmpty(d.oldCls)){d.removeClsWithUI(d.oldCls);d.removeClsWithUI(d.pressedCls)}if(d.iconCls||d.icon){if(d.text){b.push("icon-text-"+d.iconAlign)}else{b.push("icon")}if(a){a.removeCls(c)}}else{if(d.text){b.push("noicon")}if(a){a.addCls(c)}}d.oldCls=b;d.addClsWithUI(b);d.addClsWithUI(d.pressed?d.pressedCls:null)}},onRender:function(d,a){var e=this,c,b;Ext.applyIf(e.renderData,e.getTemplateArgs());e.addChildEls("btnEl","btnWrap","btnInnerEl","btnIconEl");if(e.scale){e.ui=e.ui+"-"+e.scale}e.callParent(arguments);if(e.split&&e.arrowTooltip){e.arrowEl.dom.setAttribute(e.getTipAttr(),e.arrowTooltip)}e.mon(e.btnEl,{scope:e,focus:e.onFocus,blur:e.onBlur});b=e.el;if(e.icon){e.setIcon(e.icon)}if(e.iconCls){e.setIconCls(e.iconCls)}if(e.tooltip){e.setTooltip(e.tooltip,true)}if(e.textAlign){e.setTextAlign(e.textAlign)}if(e.handleMouseEvents){e.mon(b,{scope:e,mouseover:e.onMouseOver,mouseout:e.onMouseOut,mousedown:e.onMouseDown});if(e.split){e.mon(b,{mousemove:e.onMouseMove,scope:e})}}if(e.menu){e.mon(e.menu,{scope:e,show:e.onMenuShow,hide:e.onMenuHide});e.keyMap=Ext.create("Ext.util.KeyMap",e.el,{key:Ext.EventObject.DOWN,handler:e.onDownKey,scope:e})}if(e.repeat){c=Ext.create("Ext.util.ClickRepeater",b,Ext.isObject(e.repeat)?e.repeat:{});e.mon(c,"click",e.onRepeatClick,e)}else{e.mon(b,e.clickEvent,e.onClick,e)}Ext.ButtonToggleManager.register(e)},getTemplateArgs:function(){var c=this,b=c.getPersistentBtnPadding(),a="";if(Math.max.apply(Math,b)>0){a="margin:"+Ext.Array.map(b,function(d){return -d+"px"}).join(" ")}return{href:c.getHref(),target:c.target||"_blank",type:c.type,splitCls:c.getSplitCls(),cls:c.cls,iconCls:c.iconCls||"",text:c.text||"&#160;",tabIndex:c.tabIndex,innerSpanStyle:a}},getHref:function(){var a=this,b=Ext.apply({},a.baseParams);b=Ext.apply(b,a.params);return a.href?Ext.urlAppend(a.href,Ext.Object.toQueryString(b)):false},setParams:function(a){this.params=a;this.btnEl.dom.href=this.getHref()},getSplitCls:function(){var a=this;return a.split?(a.baseCls+"-"+a.arrowCls)+" "+(a.baseCls+"-"+a.arrowCls+"-"+a.arrowAlign):""},afterRender:function(){var a=this;a.useSetClass=true;a.setButtonCls();a.doc=Ext.getDoc();this.callParent(arguments)},setIconCls:function(b){var d=this,a=d.btnIconEl,c=d.iconCls;d.iconCls=b;if(a){a.removeCls(c);a.addCls(b||"");d.setButtonCls()}return d},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a){b.clearTip()}if(Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.btnEl.id},c));b.tooltip=c}else{b.btnEl.dom.setAttribute(b.getTipAttr(),c)}}else{b.tooltip=c}return b},setTextAlign:function(c){var b=this,a=b.btnEl;if(a){a.removeCls(b.baseCls+"-"+b.textAlign);a.addCls(b.baseCls+"-"+c)}b.textAlign=c;return b},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},clearTip:function(){if(Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.btnEl)}},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}if(a.menu&&a.destroyMenu!==false){Ext.destroy(a.menu)}Ext.destroy(a.btnInnerEl,a.repeater);a.callParent()},onDestroy:function(){var a=this;if(a.rendered){a.doc.un("mouseover",a.monitorMouseOver,a);a.doc.un("mouseup",a.onMouseUp,a);delete a.doc;Ext.ButtonToggleManager.unregister(a);Ext.destroy(a.keyMap);delete a.keyMap}a.callParent()},setHandler:function(b,a){this.handler=b;this.scope=a;return this},setText:function(b){var a=this;a.text=b;if(a.el){a.btnInnerEl.update(b||"&#160;");a.setButtonCls()}a.doComponentLayout();return a},setIcon:function(b){var c=this,a=c.btnIconEl;c.icon=b;if(a){a.setStyle("background-image",b?"url("+b+")":"");c.setButtonCls()}return c},getText:function(){return this.text},toggle:function(c,a){var b=this;c=c===undefined?!b.pressed:!!c;if(c!==b.pressed){if(b.rendered){b[c?"addClsWithUI":"removeClsWithUI"](b.pressedCls)}b.btnEl.dom.setAttribute("aria-pressed",c);b.pressed=c;if(!a){b.fireEvent("toggle",b,c);Ext.callback(b.toggleHandler,b.scope||b,[b,c])}}return b},maybeShowMenu:function(){var a=this;if(a.menu&&!a.hasVisibleMenu()&&!a.ignoreNextClick){a.showMenu()}},showMenu:function(){var a=this;if(a.rendered&&a.menu){if(a.tooltip&&a.getTipAttr()!="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.btnEl)}if(a.menu.isVisible()){a.menu.hide()}a.menu.showBy(a.el,a.menuAlign)}return a},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onClick:function(b){var a=this;if(a.preventDefault||(a.disabled&&a.getHref())&&b){b.preventDefault()}if(b.button!==0){return}if(!a.disabled){a.doToggle();a.maybeShowMenu();a.fireHandler(b)}},fireHandler:function(c){var b=this,a=b.handler;b.fireEvent("click",b,c);if(a){a.call(b.scope||b,b,c)}b.onBlur()},doToggle:function(){var a=this;if(a.enableToggle&&(a.allowDepress!==false||!a.pressed)){a.toggle()}},onMouseOver:function(b){var a=this;if(!a.disabled&&!b.within(a.el,true,true)){a.onMouseEnter(b)}},onMouseOut:function(b){var a=this;if(!b.within(a.el,true,true)){if(a.overMenuTrigger){a.onMenuTriggerOut(b)}a.onMouseLeave(b)}},onMouseMove:function(h){var d=this,c=d.el,g=d.overMenuTrigger,b,a;if(d.split){if(d.arrowAlign==="right"){b=h.getX()-c.getX();a=c.getWidth()}else{b=h.getY()-c.getY();a=c.getHeight()}if(b>(a-d.getTriggerSize())){if(!g){d.onMenuTriggerOver(h)}}else{if(g){d.onMenuTriggerOut(h)}}}},getTriggerSize:function(){var e=this,c=e.triggerSize,b,a,d;if(c===d){b=e.arrowAlign;a=b.charAt(0);c=e.triggerSize=e.el.getFrameWidth(a)+e.btnWrap.getFrameWidth(a)+(e.frameSize&&e.frameSize[b]||0)}return c},onMouseEnter:function(b){var a=this;a.addClsWithUI(a.overCls);a.fireEvent("mouseover",a,b)},onMouseLeave:function(b){var a=this;a.removeClsWithUI(a.overCls);a.fireEvent("mouseout",a,b)},onMenuTriggerOver:function(b){var a=this;a.overMenuTrigger=true;a.fireEvent("menutriggerover",a,a.menu,b)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger;a.fireEvent("menutriggerout",a,a.menu,b)},enable:function(a){var b=this;b.callParent(arguments);b.removeClsWithUI("disabled");return b},disable:function(a){var b=this;b.callParent(arguments);b.addClsWithUI("disabled");b.removeClsWithUI(b.overCls);return b},setScale:function(c){var a=this,b=a.ui.replace("-"+a.scale,"");if(!Ext.Array.contains(a.allowedScales,c)){throw ("#setScale: scale must be an allowed scale ("+a.allowedScales.join(", ")+")")}a.scale=c;a.setUI(b)},setUI:function(b){var a=this;if(a.scale&&!b.match(a.scale)){b=b+"-"+a.scale}a.callParent([b])},onFocus:function(b){var a=this;if(!a.disabled){a.addClsWithUI(a.focusCls)}},onBlur:function(b){var a=this;a.removeClsWithUI(a.focusCls)},onMouseDown:function(b){var a=this;if(!a.disabled&&b.button===0){a.addClsWithUI(a.pressedCls);a.doc.on("mouseup",a.onMouseUp,a)}},onMouseUp:function(b){var a=this;if(b.button===0){if(!a.pressed){a.removeClsWithUI(a.pressedCls)}a.doc.un("mouseup",a.onMouseUp,a)}},onMenuShow:function(b){var a=this;a.ignoreNextClick=0;a.addClsWithUI(a.menuActiveCls);a.fireEvent("menushow",a,a.menu)},onMenuHide:function(b){var a=this;a.removeClsWithUI(a.menuActiveCls);a.ignoreNextClick=Ext.defer(a.restoreClick,250,a);a.fireEvent("menuhide",a,a.menu)},restoreClick:function(){this.ignoreNextClick=0},onDownKey:function(){var a=this;if(!a.disabled){if(a.menu){a.showMenu()}}},getPersistentBtnPadding:function(){var a=Ext.button.Button,e=a.persistentPadding,c,b,d,g;if(!e){e=a.persistentPadding=[0,0,0,0];if(!Ext.isIE){c=Ext.create("Ext.button.Button",{renderTo:Ext.getBody(),text:"test",style:"position:absolute;top:-999px;"});d=c.btnEl;g=c.btnInnerEl;d.setSize(null,null);b=g.getOffsetsTo(d);e[0]=b[1];e[1]=d.getWidth()-g.getWidth()-b[0];e[2]=d.getHeight()-g.getHeight()-b[1];e[3]=b[0];c.destroy()}}return e}},function(){var a={};function b(e,j){var h,d,c;if(j){h=a[e.toggleGroup];for(d=0,c=h.length;d<c;d++){if(h[d]!==e){h[d].toggle(false)}}}}Ext.ButtonToggleManager={register:function(c){if(!c.toggleGroup){return}var d=a[c.toggleGroup];if(!d){d=a[c.toggleGroup]=[]}d.push(c);c.on("toggle",b)},unregister:function(c){if(!c.toggleGroup){return}var d=a[c.toggleGroup];if(d){Ext.Array.remove(d,c);c.un("toggle",b)}},getPressed:function(h){var e=a[h],d=0,c;if(e){for(c=e.length;d<c;d++){if(e[d].pressed===true){return e[d]}}}return null}}});Ext.define("Ext.layout.container.boxOverflow.Menu",{extend:"Ext.layout.container.boxOverflow.None",requires:["Ext.toolbar.Separator","Ext.button.Button"],alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="'+Ext.baseCSSPrefix+'toolbar-no-items">(None)</div>',constructor:function(b){var a=this;a.callParent(arguments);b.beforeLayout=Ext.Function.createInterceptor(b.beforeLayout,this.clearOverflow,this);a.afterCtCls=a.afterCtCls||Ext.baseCSSPrefix+"box-menu-"+b.parallelAfter;a.menuItems=[]},onRemove:function(a){Ext.Array.remove(this.menuItems,a)},handleOverflow:function(a,h){var g=this,e=g.layout,c="get"+e.parallelPrefixCap,b={},d=[null,null];g.callParent(arguments);this.createMenu(a,h);b[e.perpendicularPrefix]=h[e.perpendicularPrefix];b[e.parallelPrefix]=h[e.parallelPrefix]-g.afterCt[c]();d[e.perpendicularSizeIndex]=(a.meta.maxSize-g.menuTrigger["get"+e.perpendicularPrefixCap]())/2;g.menuTrigger.setPosition.apply(g.menuTrigger,d);return{targetSize:b}},clearOverflow:function(a,j){var h=this,g=j?j.width+(h.afterCt?h.afterCt.getWidth():0):0,b=h.menuItems,c=0,e=b.length,d;h.hideTrigger();for(;c<e;c++){b[c].show()}b.length=0;return j?{targetSize:{height:j.height,width:g}}:null},showTrigger:function(){this.menuTrigger.show()},hideTrigger:function(){if(this.menuTrigger!==undefined){this.menuTrigger.hide()}},beforeMenuShow:function(j){var h=this,b=h.menuItems,d=0,a=b.length,g,e;var c=function(m,k){return m.isXType("buttongroup")&&!(k instanceof Ext.toolbar.Separator)};h.clearMenu();j.removeAll();for(;d<a;d++){g=b[d];if(!d&&(g instanceof Ext.toolbar.Separator)){continue}if(e&&(c(g,e)||c(e,g))){j.add("-")}h.addComponentToMenu(j,g);e=g}if(j.items.length<1){j.add(h.noItemsMenuText)}},createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),d=c.toggleGroup;Ext.copyTo(b,c,["iconCls","icon","itemId","disabled","handler","scope","menu"]);Ext.apply(b,{text:c.overflowText||c.text,hideOnClick:a,destroyMenu:false});if(d||c.enableToggle){Ext.apply(b,{group:d,checked:c.pressed,listeners:{checkchange:function(g,e){c.toggle(e)}}})}delete b.ownerCt;delete b.xtype;delete b.id;return b},addComponentToMenu:function(c,a){var b=this;if(a instanceof Ext.toolbar.Separator){c.add("-")}else{if(a.isComponent){if(a.isXType("splitbutton")){c.add(b.createMenuConfig(a,true))}else{if(a.isXType("button")){c.add(b.createMenuConfig(a,!a.menu))}else{if(a.isXType("buttongroup")){a.items.each(function(d){b.addComponentToMenu(c,d)})}else{c.add(Ext.create(Ext.getClassName(a),b.createMenuConfig(a)))}}}}}},clearMenu:function(){var a=this.moreMenu;if(a&&a.items){a.items.each(function(b){if(b.menu){delete b.menu}})}},createMenu:function(a,c){var m=this,j=m.layout,n=j.parallelBefore,e=j.parallelPrefix,b=c[e],h=a.boxes,d=0,k=h.length,g;if(!m.menuTrigger){m.createInnerElements();m.menu=Ext.create("Ext.menu.Menu",{listeners:{scope:m,beforeshow:m.beforeMenuShow}});m.menuTrigger=Ext.create("Ext.button.Button",{ownerCt:m.layout.owner,iconCls:m.layout.owner.menuTriggerCls,ui:j.owner instanceof Ext.toolbar.Toolbar?"default-toolbar":"default",menu:m.menu,getSplitCls:function(){return""},renderTo:m.afterCt})}m.showTrigger();b-=m.afterCt.getWidth();m.menuItems.length=0;for(;d<k;d++){g=h[d];if(g[n]+g[e]>b){m.menuItems.push(g.component);g.component.hide()}}},createInnerElements:function(){var a=this,b=a.layout.getRenderTarget();if(!this.afterCt){b.addCls(Ext.baseCSSPrefix+a.layout.direction+"-box-overflow-body");this.afterCt=b.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+this.afterCtCls},"before")}},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}});Ext.define("Ext.util.Region",{requires:["Ext.util.Offset"],statics:{getRegion:function(a){return Ext.fly(a).getPageBox(true)},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(d,g,a,c){var e=this;e.y=e.top=e[1]=d;e.right=g;e.bottom=a;e.x=e.left=e[0]=c},contains:function(b){var a=this;return(b.x>=a.x&&b.right<=a.right&&b.y>=a.y&&b.bottom<=a.bottom)},intersect:function(h){var g=this,d=Math.max(g.y,h.y),e=Math.min(g.right,h.right),a=Math.min(g.bottom,h.bottom),c=Math.max(g.x,h.x);if(a>d&&e>c){return new this.self(d,e,a,c)}else{return false}},union:function(h){var g=this,d=Math.min(g.y,h.y),e=Math.max(g.right,h.right),a=Math.max(g.bottom,h.bottom),c=Math.min(g.x,h.x);return new this.self(d,e,a,c)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;a.top=a.y=c(a.top,b.y,b.bottom);a.bottom=c(a.bottom,b.y,b.bottom);a.left=a.x=c(a.left,b.x,b.right);a.right=c(a.right,b.x,b.right);return a},adjust:function(d,g,a,c){var e=this;e.top=e.y+=d;e.left=e.x+=c;e.right+=g;e.bottom+=a;return e},getOutOfBoundOffset:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.getOutOfBoundOffsetX(b)}else{return this.getOutOfBoundOffsetY(b)}}else{b=a;var c=Ext.create("Ext.util.Offset");c.x=this.getOutOfBoundOffsetX(b.x);c.y=this.getOutOfBoundOffsetY(b.y);return c}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else{if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else{if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.isOutOfBoundX(b)}else{return this.isOutOfBoundY(b)}}else{b=a;return(this.isOutOfBoundX(b.x)||this.isOutOfBoundY(b.y))}},isOutOfBoundX:function(a){return(a<this.x||a>this.right)},isOutOfBoundY:function(a){return(a<this.y||a>this.bottom)},restrict:function(b,d,a){if(Ext.isObject(b)){var c;a=d;d=b;if(d.copy){c=d.copy()}else{c={x:d.x,y:d.y}}c.x=this.restrictX(d.x,a);c.y=this.restrictY(d.y,a);return c}else{if(b=="x"){return this.restrictX(d,a)}else{return this.restrictY(d,a)}}},restrictX:function(b,a){if(!a){a=1}if(b<=this.x){b-=(b-this.x)*a}else{if(b>=this.right){b-=(b-this.right)*a}}return b},restrictY:function(b,a){if(!a){a=1}if(b<=this.y){b-=(b-this.y)*a}else{if(b>=this.bottom){b-=(b-this.bottom)*a}}return b},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(a,c){if(arguments.length==1){c=a.y;a=a.x}var b=this;b.top=b.y+=c;b.right+=a;b.bottom+=c;b.left=b.x+=a;return b},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return(this.top==a.top&&this.right==a.right&&this.bottom==a.bottom&&this.left==a.left)}});Ext.define("Ext.dd.DragDropManager",{singleton:true,requires:["Ext.util.Region"],uses:["Ext.tip.QuickTipManager"],alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(c,b){for(var d in this.ids){for(var a in this.ids[d]){var e=this.ids[d][a];if(!this.isTypeOfDD(e)){continue}e[c].apply(e,b)}}},_onLoad:function(){this.init();var a=Ext.EventManager;a.on(document,"mouseup",this.handleMouseUp,this,true);a.on(document,"mousemove",this.handleMouseMove,this,true);a.on(window,"unload",this._onUnload,this,true);a.on(window,"resize",this._onResize,this,true)},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][b.id]=b},removeDDFromGroup:function(c,a){if(!this.ids[a]){this.ids[a]={}}var b=this.ids[a];if(b&&b[c.id]){delete b[c.id]}},_remove:function(b){for(var a in b.groups){if(a&&this.ids[a]&&this.ids[a][b.id]){delete this.ids[a][b.id]}}delete this.handleIds[b.id]},regHandle:function(b,a){if(!this.handleIds[b]){this.handleIds[b]={}}this.handleIds[b][a]=a},isDragDrop:function(a){return(this.getDDById(a))?true:false},getRelated:function(g,b){var e=[];for(var d in g.groups){for(var c in this.ids[d]){var a=this.ids[d][c];if(!this.isTypeOfDD(a)){continue}if(!b||a.isTarget){e[e.length]=a}}}return e},isLegalTarget:function(e,d){var b=this.getRelated(e,true);for(var c=0,a=b.length;c<a;++c){if(b[c].id==d.id){return true}}return false},isTypeOfDD:function(a){return(a&&a.__ygDragDrop)},isHandle:function(b,a){return(this.handleIds[b]&&this.handleIds[b][a])},getDDById:function(b){for(var a in this.ids){if(this.ids[a][b]){return this.ids[a][b]}}return null},handleMouseDown:function(c,b){if(Ext.tip.QuickTipManager){Ext.tip.QuickTipManager.ddDisable()}if(this.dragCurrent){this.handleMouseUp(c)}this.currentTarget=c.getTarget();this.dragCurrent=b;var a=b.getEl();this.startX=c.getPageX();this.startY=c.getPageY();this.deltaX=this.startX-a.offsetLeft;this.deltaY=this.startY-a.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var d=Ext.dd.DragDropManager;d.startDrag(d.startX,d.startY)},this.clickTimeThresh)},startDrag:function(a,b){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(a,b);this.dragCurrent.startDrag(a,b)}this.dragThreshMet=true},handleMouseUp:function(a){if(Ext.tip&&Ext.tip.QuickTipManager){Ext.tip.QuickTipManager.ddEnable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(a,true)}else{}this.stopDrag(a);this.stopEvent(a)},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault){a.preventDefault()}},stopDrag:function(a){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(a);this.dragCurrent.endDrag(a)}this.dragCurrent.onMouseUp(a)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(c){if(!this.dragCurrent){return true}if(Ext.isIE&&(c.button!==0&&c.button!==1&&c.button!==2)){this.stopEvent(c);return this.handleMouseUp(c)}if(!this.dragThreshMet){var b=Math.abs(this.startX-c.getPageX());var a=Math.abs(this.startY-c.getPageY());if(b>this.clickPixelThresh||a>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(c);this.dragCurrent.onDrag(c);if(!this.dragCurrent.moveOnly){this.fireEvents(c,false)}}this.stopEvent(c);return true},fireEvents:function(n,p){var r=this.dragCurrent;if(!r||r.isLocked()){return}var t=n.getPoint();var a=[];var d=[];var k=[];var h=[];var c=[];for(var g in this.dragOvers){var b=this.dragOvers[g];if(!this.isTypeOfDD(b)){continue}if(!this.isOverTarget(t,b,this.mode)){d.push(b)}a[g]=true;delete this.dragOvers[g]}for(var q in r.groups){if("string"!=typeof q){continue}for(g in this.ids[q]){var j=this.ids[q][g];if(!this.isTypeOfDD(j)){continue}if(j.isTarget&&!j.isLocked()&&((j!=r)||(r.ignoreSelf===false))){if(this.isOverTarget(t,j,this.mode)){if(p){h.push(j)}else{if(!a[j.id]){c.push(j)}else{k.push(j)}this.dragOvers[j.id]=j}}}}}if(this.mode){if(d.length){r.b4DragOut(n,d);r.onDragOut(n,d)}if(c.length){r.onDragEnter(n,c)}if(k.length){r.b4DragOver(n,k);r.onDragOver(n,k)}if(h.length){r.b4DragDrop(n,h);r.onDragDrop(n,h)}}else{var m=0;for(g=0,m=d.length;g<m;++g){r.b4DragOut(n,d[g].id);r.onDragOut(n,d[g].id)}for(g=0,m=c.length;g<m;++g){r.onDragEnter(n,c[g].id)}for(g=0,m=k.length;g<m;++g){r.b4DragOver(n,k[g].id);r.onDragOver(n,k[g].id)}for(g=0,m=h.length;g<m;++g){r.b4DragDrop(n,h[g].id);r.onDragDrop(n,h[g].id)}}if(p&&!h.length){r.onInvalidDrop(n)}},getBestMatch:function(c){var e=null;var b=c.length;if(b==1){e=c[0]}else{for(var d=0;d<b;++d){var a=c[d];if(a.cursorIsOver){e=a;break}else{if(!e||e.overlap.getArea()<a.overlap.getArea()){e=a}}}}return e},refreshCache:function(b){for(var a in b){if("string"!=typeof a){continue}for(var c in this.ids[a]){var d=this.ids[a][c];if(this.isTypeOfDD(d)){var e=this.getLocation(d);if(e){this.locationCache[d.id]=e}else{delete this.locationCache[d.id]}}}}},verifyEl:function(b){if(b){var a;if(Ext.isIE){try{a=b.offsetParent}catch(c){}}else{a=b.offsetParent}if(a){return true}}return false},getLocation:function(j){if(!this.isTypeOfDD(j)){return null}if(j.getRegion){return j.getRegion()}var g=j.getEl(),n,d,c,q,p,u,a,m,h;try{n=Ext.Element.getXY(g)}catch(k){}if(!n){return null}d=n[0];c=d+g.offsetWidth;q=n[1];p=q+g.offsetHeight;u=q-j.padding[0];a=c+j.padding[1];m=p+j.padding[2];h=d-j.padding[3];return Ext.create("Ext.util.Region",u,a,m,h)},isOverTarget:function(k,a,c){var e=this.locationCache[a.id];if(!e||!this.useCache){e=this.getLocation(a);this.locationCache[a.id]=e}if(!e){return false}a.cursorIsOver=e.contains(k);var j=this.dragCurrent;if(!j||!j.getTargetCoord||(!c&&!j.constrainX&&!j.constrainY)){return a.cursorIsOver}a.overlap=null;var g=j.getTargetCoord(k.x,k.y);var b=j.getDragEl();var d=Ext.create("Ext.util.Region",g.y,g.x+b.offsetWidth,g.y+b.offsetHeight,g.x);var h=d.intersect(e);if(h){a.overlap=h;return(c)?true:a.cursorIsOver}else{return false}},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);for(var a in this.elementCache){delete this.elementCache[a]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];if(!a||!a.el){a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return(a)?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.Element.getX(a)},getPosY:function(a){return Ext.Element.getY(a)},swapNode:function(c,a){if(c.swapNode){c.swapNode(a)}else{var d=a.parentNode;var b=a.nextSibling;if(b==c){d.insertBefore(c,a)}else{if(a==c.nextSibling){d.insertBefore(a,c)}else{c.parentNode.replaceChild(a,c);d.insertBefore(c,b)}}}},getScroll:function(){var d=window.document,e=d.documentElement,a=d.body,c=0,b=0;if(Ext.isGecko4){c=window.scrollYOffset;b=window.scrollXOffset}else{if(e&&(e.scrollTop||e.scrollLeft)){c=e.scrollTop;b=e.scrollLeft}else{if(a){c=a.scrollTop;b=a.scrollLeft}}}return{top:c,left:b}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,c){var b=Ext.Element.getXY(c);Ext.Element.setXY(a,b)},numericSort:function(d,c){return(d-c)},_timeoutCount:0,_addListeners:function(){if(document){this._onLoad()}else{if(this._timeoutCount>2000){}else{setTimeout(this._addListeners,10);if(document&&document.body){this._timeoutCount+=1}}}},handleWasClicked:function(a,c){if(this.isHandle(c,a.id)){return true}else{var b=a.parentNode;while(b){if(this.isHandle(c,b.id)){return true}else{b=b.parentNode}}}return false}},function(){this._addListeners()});Ext.define("Ext.layout.container.Box",{alias:["layout.box"],extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.BoxLayout",requires:["Ext.layout.container.boxOverflow.None","Ext.layout.container.boxOverflow.Menu","Ext.layout.container.boxOverflow.Scroller","Ext.util.Format","Ext.dd.DragDropManager"],defaultMargins:{top:0,right:0,bottom:0,left:0},padding:"0",pack:"start",type:"box",scrollOffset:0,itemCls:Ext.baseCSSPrefix+"box-item",targetCls:Ext.baseCSSPrefix+"box-layout-ct",innerCls:Ext.baseCSSPrefix+"box-inner",bindToOwnerCtContainer:true,availableSpaceOffset:0,reserveOffset:true,shrinkToFit:true,clearInnerCtOnLayout:false,flexSortFn:function(d,c){var e="max"+this.parallelPrefixCap,g=Infinity;d=d.component[e]||g;c=c.component[e]||g;if(!isFinite(d)&&!isFinite(c)){return false}return d-c},minSizeSortFn:function(d,c){return c.available-d.available},constructor:function(a){var b=this;b.callParent(arguments);b.flexSortFn=Ext.Function.bind(b.flexSortFn,b);b.initOverflowHandler()},getChildBox:function(b){b=b.el||this.owner.getComponent(b).el;var a=b.getBox(false,true);return{left:a.left,top:a.top,width:a.width,height:a.height}},calculateChildBox:function(e){var d=this,b=d.calculateChildBoxes(d.getVisibleItems(),d.getLayoutTargetSize()).boxes,c=b.length,a=0;e=d.owner.getComponent(e);for(;a<c;a++){if(b[a].component===e){return b[a]}}},calculateChildBoxes:function(t,b){var B=this,N=Math,n=N.max,r=Infinity,z,w=B.parallelPrefix,q=B.parallelPrefixCap,Q=B.perpendicularPrefix,x=B.perpendicularPrefixCap,G="min"+q,J="min"+x,ao="max"+x,c=b[w]-B.scrollOffset,ad=b[Q],ai=B.padding,v=ai[B.parallelBefore],y=v+ai[B.parallelAfter],T=ai[B.perpendicularLeftTop],O=T+ai[B.perpendicularRightBottom],al=n(0,ad-O),an=B.innerCt.getBorderWidth(B.perpendicularLT+B.perpendicularRB),af=B.pack=="start",ar=B.pack=="center",I=B.pack=="end",ah=Ext.Number.constrain,R=t.length,d=0,am=0,ap=0,A=0,K=0,U=[],P=[],ak,aj,j,ae,E,F,aq,ac,aa,ab,p,e,D,M,C,S,k,V,ag,g,H,X,a,u,m,L,W,Z,h,Y;for(aj=0;aj<R;aj++){j=t[aj];E=j[Q];if(!j.flex||!(B.align=="stretch"||B.align=="stretchmax")){if(j.componentLayout.initialized!==true){B.layoutItem(j)}}F=j.margins;L=F[B.parallelBefore]+F[B.parallelAfter];aa={component:j,margins:F};if(j.flex){am+=j.flex;ae=z}else{if(!(j[w]&&E)){aq=j.getSize()}ae=j[w]||aq[w];E=E||aq[Q]}d+=L+(ae||0);ap+=L+(j.flex?j[G]||0:ae);A+=L+(j[G]||ae||0);if(typeof E!="number"){E=j["get"+x]()}K=n(K,n(E,j[J]||0)+F[B.perpendicularLeftTop]+F[B.perpendicularRightBottom]);aa[w]=ae||z;aa.dirtySize=j.componentLayout.lastComponentSize?(aa[w]!==j.componentLayout.lastComponentSize[w]):false;aa[Q]=E||z;U.push(aa)}if(!B.autoSize){ab=ap-c;p=A>c}e=n(0,c-d-y-(B.reserveOffset?B.availableSpaceOffset:0));if(p){for(aj=0;aj<R;aj++){k=U[aj];D=t[aj][G]||t[aj][w]||k[w];k.dirtySize=k.dirtySize||k[w]!=D;k[w]=D}}else{if(ab>0){for(aj=0;aj<R;aj++){M=t[aj];D=M[G]||0;if(M.flex){k=U[aj];k.dirtySize=k.dirtySize||k[w]!=D;k[w]=D}else{if(B.shrinkToFit){P.push({minSize:D,available:U[aj][w]-D,index:aj})}}}Ext.Array.sort(P,B.minSizeSortFn);for(aj=0,C=P.length;aj<C;aj++){S=P[aj].index;if(S==z){continue}M=t[S];D=P[aj].minSize;k=U[S];V=k[w];ag=n(D,V-N.ceil(ab/(C-aj)));g=V-ag;k.dirtySize=k.dirtySize||k[w]!=ag;k[w]=ag;ab-=g}p=(ab>0)}else{a=e;u=am;X=[];for(aj=0;aj<R;aj++){j=t[aj];if(af&&j.flex){X.push(U[Ext.Array.indexOf(t,j)])}}Ext.Array.sort(X,B.flexSortFn);for(aj=0;aj<X.length;aj++){W=X[aj];j=W.component;F=W.margins;m=N.ceil((j.flex/u)*a);m=Math.max(j["min"+q]||0,N.min(j["max"+q]||r,m));a-=m;u-=j.flex;W.dirtySize=W.dirtySize||W[w]!=m;W[w]=m}}}if(ar){v+=e/2}else{if(I){v+=e}}if(B.owner.dock&&(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks)&&!B.owner.width&&B.direction=="vertical"){ak=K+B.owner.el.getPadding("lr")+B.owner.el.getBorderWidth("lr");if(B.owner.frameSize){ak+=B.owner.frameSize.left+B.owner.frameSize.right}al=Math.min(al,b.width=K+ai.left+ai.right)}for(aj=0;aj<R;aj++){j=t[aj];W=U[aj];F=W.margins;h=F[B.perpendicularLeftTop]+F[B.perpendicularRightBottom];v+=F[B.parallelBefore];W[B.parallelBefore]=v;W[B.perpendicularLeftTop]=T+F[B.perpendicularLeftTop];if(B.align=="stretch"){Y=ah(al-h,j[J]||0,j[ao]||r);W.dirtySize=W.dirtySize||W[Q]!=Y;W[Q]=Y}else{if(B.align=="stretchmax"){Y=ah(K-h,j[J]||0,j[ao]||r);W.dirtySize=W.dirtySize||W[Q]!=Y;W[Q]=Y}else{if(B.align==B.alignCenteringString){H=n(al,K)-an-W[Q];if(H>0){W[B.perpendicularLeftTop]=T+Math.round(H/2)}}}}v+=(W[w]||0)+F[B.parallelAfter]}return{boxes:U,meta:{calculatedWidth:ak,maxSize:K,nonFlexSize:d,desiredSize:ap,minimumSize:A,shortfall:ab,tooNarrow:p}}},onRemove:function(a){this.callParent(arguments);if(this.overflowHandler){this.overflowHandler.onRemove(a)}},initOverflowHandler:function(){var c=this.overflowHandler;if(typeof c=="string"){c={type:c}}var b="None";if(c&&c.type!==undefined){b=c.type}var a=Ext.layout.container.boxOverflow[b];if(a[this.type]){a=a[this.type]}this.overflowHandler=Ext.create("Ext.layout.container.boxOverflow."+b,this,c)},onLayout:function(){this.callParent();if(this.clearInnerCtOnLayout===true&&this.adjustmentPass!==true){this.innerCt.setSize(null,null)}var h=this,c=h.getLayoutTargetSize(),g=h.getVisibleItems(),b=h.calculateChildBoxes(g,c),e=b.boxes,j=b.meta,k,a,d;if(h.autoSize&&b.meta.desiredSize){c[h.parallelPrefix]=b.meta.desiredSize}if(j.shortfall>0){k=h.overflowHandler;a=j.tooNarrow?"handleOverflow":"clearOverflow";d=k[a](b,c);if(d){if(d.targetSize){c=d.targetSize}if(d.recalculate){g=h.getVisibleItems();b=h.calculateChildBoxes(g,c);e=b.boxes}}}else{h.overflowHandler.clearOverflow()}h.layoutTargetLastSize=c;h.childBoxCache=b;h.updateInnerCtSize(c,b);h.updateChildBoxes(e);h.handleTargetOverflow(c)},animCallback:Ext.emptyFn,updateChildBoxes:function(h){var n=this,e=0,c=h.length,r=[],q=Ext.dd.DDM.getDDById(n.innerCt.id),a,g,d,j,k,b;for(;e<c;e++){g=h[e];j=g.component;if(q&&(q.getDragEl()===j.el.dom)){continue}d=false;a=n.getChildBox(j);if(n.animate){b=n.animate.callback||n.animate;k={layoutAnimation:true,target:j,from:{},to:{},listeners:{}};if(!isNaN(g.width)&&(g.width!=a.width)){d=true;k.to.width=g.width}if(!isNaN(g.height)&&(g.height!=a.height)){d=true;k.to.height=g.height}if(!isNaN(g.left)&&(g.left!=a.left)){d=true;k.to.left=g.left}if(!isNaN(g.top)&&(g.top!=a.top)){d=true;k.to.top=g.top}if(d){r.push(k)}}else{if(g.dirtySize){if(g.width!==a.width||g.height!==a.height){n.setItemSize(j,g.width,g.height)}}if(isNaN(g.left)||isNaN(g.top)){continue}j.setPosition(g.left,g.top)}}c=r.length;if(c){var p=function(t){c-=1;if(!c){n.animCallback(t);n.layoutBusy=false;if(Ext.isFunction(b)){b()}}};var m=function(){n.layoutBusy=true};for(e=0,c=r.length;e<c;e++){k=r[e];k.listeners.afteranimate=p;if(!e){k.listeners.beforeanimate=m}if(n.animate.duration){k.duration=n.animate.duration}j=k.target;delete k.target;j.stopAnimation();j.animate(k)}}},updateInnerCtSize:function(c,a){var h=this,e=Math.max,g=h.align,j=h.padding,b=c.width,m=c.height,n=a.meta,d,k;if(h.direction=="horizontal"){d=b;k=n.maxSize+j.top+j.bottom+h.innerCt.getBorderWidth("tb");if(g=="stretch"){k=m}else{if(g=="middle"){k=e(m,k)}}}else{k=m;d=n.maxSize+j.left+j.right+h.innerCt.getBorderWidth("lr");if(g=="stretch"){d=b}else{if(g=="center"){d=e(b,d)}}}h.getRenderTarget().setSize(d||undefined,k||undefined);if(n.calculatedWidth&&h.owner.el.getWidth()>n.calculatedWidth){h.owner.el.setWidth(n.calculatedWidth)}if(h.innerCt.dom.scrollTop){h.innerCt.dom.scrollTop=0}},handleTargetOverflow:function(c){var b=this.getTarget(),d=b.getStyle("overflow"),a;if(d&&d!="hidden"&&!this.adjustmentPass){a=this.getLayoutTargetSize();if(a.width!=c.width||a.height!=c.height){this.adjustmentPass=true;this.onLayout();return true}}delete this.adjustmentPass},isValidParent:function(c,d,a){var b=c.el?c.el.dom:Ext.getDom(c);return(b&&this.innerCt&&b.parentNode===this.innerCt.dom)||false},getRenderTarget:function(){if(!this.innerCt){this.innerCt=this.getTarget().createChild({cls:this.innerCls,role:"presentation"});this.padding=Ext.util.Format.parseBox(this.padding)}return this.innerCt},renderItem:function(d,g){this.callParent(arguments);var c=this,a=d.getEl(),b=a.dom.style,e=d.margins||d.margin;if(e){if(Ext.isString(e)||Ext.isNumber(e)){e=Ext.util.Format.parseBox(e)}else{Ext.applyIf(e,{top:0,right:0,bottom:0,left:0})}}else{e=Ext.apply({},c.defaultMargins)}e.top+=a.getMargin("t");e.right+=a.getMargin("r");e.bottom+=a.getMargin("b");e.left+=a.getMargin("l");e.height=e.top+e.bottom;e.width=e.left+e.right;b.marginTop=b.marginRight=b.marginBottom=b.marginLeft="0";d.margins=e},destroy:function(){Ext.destroy(this.innerCt,this.overflowHandler);this.callParent(arguments)}});Ext.define("Ext.layout.container.HBox",{alias:["layout.hbox"],extend:"Ext.layout.container.Box",alternateClassName:"Ext.layout.HBoxLayout",align:"top",alignCenteringString:"middle",type:"hbox",direction:"horizontal",parallelSizeIndex:0,perpendicularSizeIndex:1,parallelPrefix:"width",parallelPrefixCap:"Width",parallelLT:"l",parallelRB:"r",parallelBefore:"left",parallelBeforeCap:"Left",parallelAfter:"right",parallelPosition:"x",perpendicularPrefix:"height",perpendicularPrefixCap:"Height",perpendicularLT:"t",perpendicularRB:"b",perpendicularLeftTop:"top",perpendicularRightBottom:"bottom",perpendicularPosition:"y",configureItem:function(a){if(a.flex){a.layoutManagedWidth=1}else{a.layoutManagedWidth=2}if(this.align==="stretch"||this.align==="stretchmax"){a.layoutManagedHeight=1}else{a.layoutManagedHeight=2}this.callParent(arguments)}});Ext.define("Ext.layout.container.VBox",{alias:["layout.vbox"],extend:"Ext.layout.container.Box",alternateClassName:"Ext.layout.VBoxLayout",align:"left",alignCenteringString:"center",type:"vbox",direction:"vertical",parallelSizeIndex:1,perpendicularSizeIndex:0,parallelPrefix:"height",parallelPrefixCap:"Height",parallelLT:"t",parallelRB:"b",parallelBefore:"top",parallelBeforeCap:"Top",parallelAfter:"bottom",parallelPosition:"y",perpendicularPrefix:"width",perpendicularPrefixCap:"Width",perpendicularLT:"l",perpendicularRB:"r",perpendicularLeftTop:"left",perpendicularRightBottom:"right",perpendicularPosition:"x",configureItem:function(a){if(a.flex){a.layoutManagedHeight=1}else{a.layoutManagedHeight=2}if(this.align==="stretch"||this.align==="stretchmax"){a.layoutManagedWidth=1}else{a.layoutManagedWidth=2}this.callParent(arguments)}});Ext.define("Ext.FocusManager",{singleton:true,alternateClassName:"Ext.FocusMgr",mixins:{observable:"Ext.util.Observable"},requires:["Ext.ComponentManager","Ext.ComponentQuery","Ext.util.HashMap","Ext.util.KeyNav"],enabled:false,focusElementCls:Ext.baseCSSPrefix+"focus-element",focusFrameCls:Ext.baseCSSPrefix+"focus-frame",whitelist:["textfield"],tabIndexWhitelist:["a","button","embed","frame","iframe","img","input","object","select","textarea"],constructor:function(){var a=this,b=Ext.ComponentQuery;a.addEvents("beforecomponentfocus","componentfocus","disable","enable");a.keyNav=Ext.create("Ext.util.KeyNav",Ext.getDoc(),{disabled:true,scope:a,backspace:a.focusLast,enter:a.navigateIn,esc:a.navigateOut,tab:a.navigateSiblings});a.focusData={};a.subscribers=Ext.create("Ext.util.HashMap");a.focusChain={};Ext.apply(b.pseudos,{focusable:function(g){var d=g.length,j=[],h=0,k,e=function(c){return c&&c.focusable!==false&&b.is(c,"[rendered]:not([destroying]):not([isDestroyed]):not([disabled]){isVisible(true)}{el && c.el.dom && c.el.isVisible()}")};for(;h<d;h++){k=g[h];if(e(k)){j.push(k)}}return j},nextFocus:function(g,e,j){j=j||1;e=parseInt(e,10);var d=g.length,h=e+j,k;for(;h!=e;h+=j){if(h>=d){h=0}else{if(h<0){h=d-1}}k=g[h];if(b.is(k,":focusable")){return[k]}else{if(k.placeholder&&b.is(k.placeholder,":focusable")){return[k.placeholder]}}}return[]},prevFocus:function(d,c){return this.nextFocus(d,c,-1)},root:function(e){var d=e.length,h=[],g=0,j;for(;g<d;g++){j=e[g];if(!j.ownerCt){h.push(j)}}return h}})},addXTypeToWhitelist:function(b){var a=this;if(Ext.isArray(b)){Ext.Array.forEach(b,a.addXTypeToWhitelist,a);return}if(!Ext.Array.contains(a.whitelist,b)){a.whitelist.push(b)}},clearComponent:function(a){clearTimeout(this.cmpFocusDelay);if(!a.isDestroyed){a.blur()}},disable:function(){var a=this;if(!a.enabled){return}delete a.options;a.enabled=false;Ext.ComponentManager.all.un("add",a.onComponentCreated,a);a.removeDOM();a.keyNav.disable();a.setFocusAll(false);a.fireEvent("disable",a)},enable:function(a){var b=this;if(a===true){a={focusFrame:true}}b.options=a=a||{};if(b.enabled){return}Ext.ComponentManager.all.on("add",b.onComponentCreated,b);b.initDOM(a);b.keyNav.enable();b.setFocusAll(true,a);b.focusEl.focus();delete b.focusedCmp;b.enabled=true;b.fireEvent("enable",b)},focusLast:function(b){var a=this;if(a.isWhitelisted(a.focusedCmp)){return true}if(a.previousFocusedCmp){a.previousFocusedCmp.focus()}},getRootComponents:function(){var a=this,c=Ext.ComponentQuery,b=c.query(":focusable:root:not([floating])"),d=c.query(":focusable:root[floating]");d.sort(function(g,e){return g.el.getZIndex()>e.el.getZIndex()});return d.concat(b)},initDOM:function(b){var c=this,d="&#160",a=c.focusFrameCls;if(!Ext.isReady){Ext.onReady(c.initDOM,c);return}if(!c.focusEl){c.focusEl=Ext.getBody().createChild({tabIndex:"-1",cls:c.focusElementCls,html:d})}if(!c.focusFrame&&b.focusFrame){c.focusFrame=Ext.getBody().createChild({cls:a,children:[{cls:a+"-top"},{cls:a+"-bottom"},{cls:a+"-left"},{cls:a+"-right"}],style:"top: -100px; left: -100px;"});c.focusFrame.setVisibilityMode(Ext.Element.DISPLAY);c.focusFrameWidth=2;c.focusFrame.hide().setLeftTop(0,0)}},isWhitelisted:function(a){return a&&Ext.Array.some(this.whitelist,function(b){return a.isXType(b)})},navigateIn:function(d){var b=this,a=b.focusedCmp,g,c;if(!a){g=b.getRootComponents();if(g.length){g[0].focus()}}else{c=Ext.ComponentQuery.query(">:focusable",a)[0];if(c){c.focus()}else{if(Ext.isFunction(a.onClick)){d.button=0;a.onClick(d);a.focus()}}}},navigateOut:function(c){var b=this,a;if(!b.focusedCmp||!(a=b.focusedCmp.up(":focusable"))){b.focusEl.focus()}else{a.focus()}return true},navigateSiblings:function(j,b,q){var k=this,a=b||k,r=j.getKey(),g=Ext.EventObject,m=j.shiftKey||r==g.LEFT||r==g.UP,c=r==g.LEFT||r==g.RIGHT||r==g.UP||r==g.DOWN,h=m?"prev":"next",p,d,n;n=(a.focusedCmp&&a.focusedCmp.comp)||a.focusedCmp;if(!n&&!q){return}if(c&&k.isWhitelisted(n)){return true}q=q||n.up();if(q){p=n?Ext.Array.indexOf(q.getRefItems(),n):-1;d=Ext.ComponentQuery.query(">:"+h+"Focus("+p+")",q)[0];if(d&&n!==d){d.focus();return d}}},onComponentBlur:function(b,c){var a=this;if(a.focusedCmp===b){a.previousFocusedCmp=b;delete a.focusedCmp}if(a.focusFrame){a.focusFrame.hide()}},onComponentCreated:function(b,c,a){this.setFocus(a,true,this.options)},onComponentDestroy:function(a){this.setFocus(a,false)},onComponentFocus:function(r,n){var p=this,a=p.focusChain;if(!Ext.ComponentQuery.is(r,":focusable")){p.clearComponent(r);if(a[r.id]){return}var u=r.up();if(u){a[r.id]=true;u.focus()}return}p.focusChain={};clearTimeout(p.cmpFocusDelay);if(arguments.length!==2){p.cmpFocusDelay=Ext.defer(p.onComponentFocus,90,p,[r,n]);return}if(p.fireEvent("beforecomponentfocus",p,r,p.previousFocusedCmp)===false){p.clearComponent(r);return}p.focusedCmp=r;if(p.shouldShowFocusFrame(r)){var w="."+p.focusFrameCls+"-",b=p.focusFrame,g=p.focusFrameWidth,k=r.el.getPageBox(),v=k.top,c=k.left,q=k.width,h=k.height,j=b.child(w+"top"),d=b.child(w+"bottom"),t=b.child(w+"left"),m=b.child(w+"right");j.setWidth(q).setLeftTop(c,v);d.setWidth(q).setLeftTop(c,v+h-g);t.setHeight(h-g-g).setLeftTop(c,v+g);m.setHeight(h-g-g).setLeftTop(c+q-g,v+g);b.show()}p.fireEvent("componentfocus",p,r,p.previousFocusedCmp)},onComponentHide:function(e){var d=this,g=Ext.ComponentQuery,b=false,a,c;if(d.focusedCmp){a=g.query("[id="+d.focusedCmp.id+"]",e)[0];b=d.focusedCmp.id===e.id||a;if(a){d.clearComponent(a)}}d.clearComponent(e);if(b){c=g.query("^:focusable",e)[0];if(c){c.focus()}}},removeDOM:function(){var a=this;if(a.enabled||a.subscribers.length){return}Ext.destroy(a.focusEl,a.focusFrame);delete a.focusEl;delete a.focusFrame;delete a.focusFrameWidth},removeXTypeFromWhitelist:function(b){var a=this;if(Ext.isArray(b)){Ext.Array.forEach(b,a.removeXTypeFromWhitelist,a);return}Ext.Array.remove(a.whitelist,b)},setFocus:function(e,j,b){var d=this,c,h,g,a=function(k){return !Ext.Array.contains(d.tabIndexWhitelist,k.tagName.toLowerCase())&&k.tabIndex<=0};b=b||{};if(!e.rendered){e.on("afterrender",Ext.pass(d.setFocus,arguments,d),d,{single:true});return}c=e.getFocusEl();h=c.dom;if((j&&!d.focusData[e.id])||(!j&&d.focusData[e.id])){if(j){g={focusFrame:b.focusFrame};if(a(h)){g.tabIndex=h.tabIndex;h.tabIndex=-1}c.on({focus:g.focusFn=Ext.bind(d.onComponentFocus,d,[e],0),blur:g.blurFn=Ext.bind(d.onComponentBlur,d,[e],0),scope:d});e.on({hide:d.onComponentHide,close:d.onComponentHide,beforedestroy:d.onComponentDestroy,scope:d});d.focusData[e.id]=g}else{g=d.focusData[e.id];if("tabIndex" in g){h.tabIndex=g.tabIndex}c.un("focus",g.focusFn,d);c.un("blur",g.blurFn,d);e.un("hide",d.onComponentHide,d);e.un("close",d.onComponentHide,d);e.un("beforedestroy",d.onComponentDestroy,d);delete d.focusData[e.id]}}},setFocusAll:function(h,c){var g=this,b=Ext.ComponentManager.all.getArray(),a=b.length,e,d=0;for(;d<a;d++){g.setFocus(b[d],h,c)}},setupSubscriberKeys:function(a,g){var e=this,d=a.getFocusEl(),c=g.scope,b={backspace:e.focusLast,enter:e.navigateIn,esc:e.navigateOut,scope:e},h=function(j){if(e.focusedCmp===a){return e.navigateSiblings(j,e,a)}else{return e.navigateSiblings(j)}};Ext.iterate(g,function(k,j){b[k]=function(n){var m=h(n);if(Ext.isFunction(j)&&j.call(c||a,n,m)===true){return true}return m}},e);return Ext.create("Ext.util.KeyNav",d,b)},shouldShowFocusFrame:function(c){var b=this,a=b.options||{};if(!b.focusFrame||!c){return false}if(a.focusFrame){return true}if(b.focusData[c.id].focusFrame){return true}return false},subscribe:function(a,c){var g=this,e=Ext.Array,h={},d=g.subscribers,b=function(j){if(j.isContainer&&!d.containsKey(j.id)){e.forEach(j.query(">"),b);g.setFocus(j,true,c);j.on("add",h.onAdd,g)}else{if(!j.isContainer){g.setFocus(j,true,c)}}};if(!a||!a.isContainer){return}if(!a.rendered){a.on("afterrender",Ext.pass(g.subscribe,arguments,g),g,{single:true});return}g.initDOM(c);h.keyNav=g.setupSubscriberKeys(a,c.keys);h.onAdd=function(k,m,j){b(m)};a.on("beforedestroy",g.unsubscribe,g);b(a);d.add(a.id,h)},unsubscribe:function(a){var e=this,d=Ext.Array,c=e.subscribers,g,b=function(h){if(h.isContainer&&!c.containsKey(h.id)){d.forEach(h.query(">"),b);e.setFocus(h,false);h.un("add",g.onAdd,e)}else{if(!h.isContainer){e.setFocus(h,false)}}};if(!a||!c.containsKey(a.id)){return}g=c.get(a.id);g.keyNav.destroy();a.un("beforedestroy",e.unsubscribe,e);c.removeAtKey(a.id);b(a);e.removeDOM()}});Ext.define("Ext.toolbar.Toolbar",{extend:"Ext.container.Container",requires:["Ext.toolbar.Fill","Ext.layout.container.HBox","Ext.layout.container.VBox","Ext.FocusManager"],uses:["Ext.toolbar.Separator"],alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",isToolbar:true,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",defaultType:"button",vertical:false,enableOverflow:false,menuTriggerCls:Ext.baseCSSPrefix+"toolbar-more-icon",trackMenus:true,itemCls:Ext.baseCSSPrefix+"toolbar-item",initComponent:function(){var b=this,a;if(!b.layout&&b.enableOverflow){b.layout={overflowHandler:"Menu"}}if(b.dock==="right"||b.dock==="left"){b.vertical=true}b.layout=Ext.applyIf(Ext.isString(b.layout)?{type:b.layout}:b.layout||{},{type:b.vertical?"vbox":"hbox",align:b.vertical?"stretchmax":"middle",clearInnerCtOnLayout:true});if(b.vertical){b.addClsWithUI("vertical")}if(b.ui==="footer"){b.ignoreBorderManagement=true}b.callParent();b.addEvents("overflowchange");a=b.vertical?["up","down"]:["left","right"];Ext.FocusManager.subscribe(b,{keys:a})},getRefItems:function(a){var e=this,b=e.callParent(arguments),d=e.layout,c;if(a&&e.enableOverflow){c=d.overflowHandler;if(c&&c.menu){b=b.concat(c.menu.getRefItems(a))}}return b},lookupComponent:function(b){if(Ext.isString(b)){var a=Ext.toolbar.Toolbar.shortcuts[b];if(a){b={xtype:a}}else{b={xtype:"tbtext",text:b}}this.applyDefaults(b)}return this.callParent(arguments)},applyDefaults:function(b){if(!Ext.isString(b)){b=this.callParent(arguments);var a=this.internalDefaults;if(b.events){Ext.applyIf(b.initialConfig,a);Ext.apply(b,a)}else{Ext.applyIf(b,a)}}return b},trackMenu:function(c,a){if(this.trackMenus&&c.menu){var d=a?"mun":"mon",b=this;b[d](c,"mouseover",b.onButtonOver,b);b[d](c,"menushow",b.onButtonMenuShow,b);b[d](c,"menuhide",b.onButtonMenuHide,b)}},constructButton:function(a){return a.events?a:this.createComponent(a,a.split?"splitbutton":this.defaultType)},onBeforeAdd:function(a){if(a.is("field")||(a.is("button")&&this.ui!="footer")){a.ui=a.ui+"-toolbar"}if(a instanceof Ext.toolbar.Separator){a.setUI((this.vertical)?"vertical":"horizontal")}this.callParent(arguments)},onAdd:function(a){this.callParent(arguments);this.trackMenu(a);if(this.disabled){a.disable()}},onRemove:function(a){this.callParent(arguments);this.trackMenu(a,true)},onButtonOver:function(a){if(this.activeMenuBtn&&this.activeMenuBtn!=a){this.activeMenuBtn.hideMenu();a.showMenu();this.activeMenuBtn=a}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){delete this.activeMenuBtn}},function(){this.shortcuts={"-":"tbseparator"," ":"tbspacer","->":"tbfill"}});Ext.define("Ext.panel.AbstractPanel",{extend:"Ext.container.Container",requires:["Ext.util.MixedCollection","Ext.Element","Ext.toolbar.Toolbar"],baseCls:Ext.baseCSSPrefix+"panel",isPanel:true,componentLayout:"dock",defaultDockWeights:{top:1,left:3,right:5,bottom:7},renderTpl:['<div id="{id}-body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"</div>"],border:true,initComponent:function(){var a=this;a.addEvents("bodyresize");a.addChildEls("body");if(a.frame&&a.border&&a.bodyBorder===undefined){a.bodyBorder=false}if(a.frame&&a.border&&(a.bodyBorder===false||a.bodyBorder===0)){a.manageBodyBorders=true}a.callParent()},initItems:function(){var b=this,a=b.dockedItems;b.callParent();b.dockedItems=Ext.create("Ext.util.MixedCollection",false,b.getComponentId);if(a){b.addDocked(a)}},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.dockedItems.get(a)},getComponent:function(a){var b=this.callParent(arguments);if(b===undefined&&!Ext.isNumber(a)){b=this.getDockedComponent(a)}return b},initBodyStyles:function(){var d=this,a=d.bodyStyle,c=[],b=Ext.Element,e;if(Ext.isFunction(a)){a=a()}if(Ext.isString(a)){c=a.split(";")}else{for(e in a){if(a.hasOwnProperty(e)){c.push(e+":"+a[e])}}}if(d.bodyPadding!==undefined){c.push("padding: "+b.unitizeBox((d.bodyPadding===true)?5:d.bodyPadding))}if(d.frame&&d.bodyBorder){if(!Ext.isNumber(d.bodyBorder)){d.bodyBorder=1}c.push("border-width: "+b.unitizeBox(d.bodyBorder))}delete d.bodyStyle;return c.length?c.join(";"):undefined},initBodyCls:function(){var b=this,a="",c=b.bodyCls;if(c){Ext.each(c,function(d){a+=" "+d});delete b.bodyCls}return a.length>0?a:undefined},initRenderData:function(){return Ext.applyIf(this.callParent(),{bodyStyle:this.initBodyStyles(),bodyCls:this.initBodyCls()})},addDocked:function(a,g){var e=this,b=0,d,c;a=e.prepareItems(a);c=a.length;for(;b<c;b++){d=a[b];d.dock=d.dock||"top";if(e.border===false){}if(g!==undefined){e.dockedItems.insert(g+b,d)}else{e.dockedItems.add(d)}d.onAdded(e,b);e.onDockedAdd(d)}e.componentLayout.childrenChanged=true;if(e.rendered&&!e.suspendLayout){e.doComponentLayout()}return a},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,insertDocked:function(b,a){this.addDocked(a,b)},removeDocked:function(e,b){var d=this,c,a;if(!d.dockedItems.contains(e)){return e}c=d.componentLayout;a=c&&d.rendered;if(a){c.onRemove(e)}d.dockedItems.remove(e);e.onRemoved();d.onDockedRemove(e);if(b===true||(b!==false&&d.autoDestroy)){e.destroy()}else{if(a){c.afterRemove(e)}}d.componentLayout.childrenChanged=true;if(!d.destroying&&!d.suspendLayout){d.doComponentLayout()}return e},getDockedItems:function(c){var d=this,b=d.defaultDockWeights,a;if(d.dockedItems&&d.dockedItems.items.length){if(c){a=Ext.ComponentQuery.query(c,d.dockedItems.items)}else{a=d.dockedItems.items.slice()}Ext.Array.sort(a,function(g,e){var h=g.weight||b[g.dock],j=e.weight||b[e.dock];if(Ext.isNumber(h)&&Ext.isNumber(j)){return h-j}return 0});return a}return[]},addUIClsToElement:function(b,g){var e=this,a=e.callParent(arguments),d=[Ext.baseCSSPrefix+b,e.baseCls+"-body-"+b,e.baseCls+"-body-"+e.ui+"-"+b],h,c;if(!g&&e.rendered){if(e.bodyCls){e.body.addCls(e.bodyCls)}else{e.body.addCls(d)}}else{if(e.bodyCls){h=e.bodyCls.split(" ");for(c=0;c<d.length;c++){if(!Ext.Array.contains(h,d[c])){h.push(d[c])}}e.bodyCls=h.join(" ")}else{e.bodyCls=d.join(" ")}}return a},removeUIClsFromElement:function(b,g){var e=this,a=e.callParent(arguments),d=[Ext.baseCSSPrefix+b,e.baseCls+"-body-"+b,e.baseCls+"-body-"+e.ui+"-"+b],h,c;if(!g&&e.rendered){if(e.bodyCls){e.body.removeCls(e.bodyCls)}else{e.body.removeCls(d)}}else{if(e.bodyCls){h=e.bodyCls.split(" ");for(c=0;c<d.length;c++){Ext.Array.remove(h,d[c])}e.bodyCls=h.join(" ")}}return a},addUIToElement:function(c){var b=this,a=b.baseCls+"-body-"+b.ui,d;b.callParent(arguments);if(!c&&b.rendered){if(b.bodyCls){b.body.addCls(b.bodyCls)}else{b.body.addCls(a)}}else{if(b.bodyCls){d=b.bodyCls.split(" ");if(!Ext.Array.contains(d,a)){d.push(a)}b.bodyCls=d.join(" ")}else{b.bodyCls=a}}},removeUIFromElement:function(){var b=this,a=b.baseCls+"-body-"+b.ui,c;b.callParent(arguments);if(b.rendered){if(b.bodyCls){b.body.removeCls(b.bodyCls)}else{b.body.removeCls(a)}}else{if(b.bodyCls){c=b.bodyCls.split(" ");Ext.Array.remove(c,a);b.bodyCls=c.join(" ")}else{b.bodyCls=a}}},getTargetEl:function(){return this.body},getRefItems:function(a){var b=this.callParent(arguments),d=this.getDockedItems(a?"*,* *":undefined),g=d.length,c=0,e;for(;c<g;c++){e=d[c];if(e.dock==="right"||e.dock==="bottom"){break}}return Ext.Array.splice(d,0,c).concat(b).concat(d)},beforeDestroy:function(){var b=this.dockedItems,a;if(b){while((a=b.first())){this.removeDocked(a,true)}}this.callParent()},setBorder:function(a){var b=this;b.border=(a!==undefined)?a:true;if(b.rendered){b.doComponentLayout()}}});Ext.define("Ext.panel.Header",{extend:"Ext.container.Container",uses:["Ext.panel.Tool","Ext.draw.Component","Ext.util.CSS"],alias:"widget.header",isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,renderTpl:['<div id="{id}-body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>','<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>'],initComponent:function(){var c=this,g,e,b,a,d;c.indicateDragCls=c.baseCls+"-draggable";c.title=c.title||"&#160;";c.tools=c.tools||[];c.items=c.items||[];c.orientation=c.orientation||"horizontal";c.dock=(c.dock)?c.dock:(c.orientation=="horizontal")?"top":"left";c.addClsWithUI(c.orientation);c.addClsWithUI(c.dock);c.addChildEls("body");if(!Ext.isEmpty(c.iconCls)){c.initIconCmp();c.items.push(c.iconCmp)}if(c.orientation=="vertical"){if(Ext.isIE6||Ext.isIE7){c.width=this.width||24}else{if(Ext.isIEQuirks){c.width=this.width||25}}c.layout={type:"vbox",align:"center",clearInnerCtOnLayout:true,bindToOwnerCtContainer:false};c.textConfig={cls:c.baseCls+"-text",type:"text",text:c.title,rotate:{degrees:90}};d=c.ui;if(Ext.isArray(d)){d=d[0]}g="."+c.baseCls+"-text-"+d;if(Ext.scopeResetCSS){g="."+Ext.baseCSSPrefix+"reset "+g}e=Ext.util.CSS.getRule(g);if(e){b=e.style}if(b){Ext.apply(c.textConfig,{"font-family":b.fontFamily,"font-weight":b.fontWeight,"font-size":b.fontSize,fill:b.color})}c.titleCmp=Ext.create("Ext.draw.Component",{ariaRole:"heading",focusable:false,viewBox:false,flex:1,autoSize:true,margins:"5 0 0 0",items:[c.textConfig],renderSelectors:{textEl:"."+c.baseCls+"-text"}})}else{c.layout={type:"hbox",align:"middle",clearInnerCtOnLayout:true,bindToOwnerCtContainer:false};c.titleCmp=Ext.create("Ext.Component",{xtype:"component",ariaRole:"heading",focusable:false,flex:1,cls:c.baseCls+"-text-container",renderTpl:['<span id="{id}-textEl" class="{cls}-text {cls}-text-{ui}">{title}</span>'],renderData:{title:c.title,cls:c.baseCls,ui:c.ui},childEls:["textEl"]})}c.items.push(c.titleCmp);c.items=c.items.concat(c.tools);this.callParent()},initIconCmp:function(){this.iconCmp=Ext.create("Ext.Component",{focusable:false,renderTpl:['<img id="{id}-iconEl" alt="" src="{blank}" class="{cls}-icon {iconCls}"/>'],renderData:{blank:Ext.BLANK_IMAGE_URL,cls:this.baseCls,iconCls:this.iconCls,orientation:this.orientation},childEls:["iconEl"],iconCls:this.iconCls})},afterRender:function(){var a=this;a.el.unselectable();if(a.indicateDrag){a.el.addCls(a.indicateDragCls)}a.mon(a.el,{click:a.onClick,scope:a});a.callParent()},afterLayout:function(){var a=this;a.callParent(arguments);if(Ext.isIE7){a.el.repaint()}},addUIClsToElement:function(b,g){var e=this,a=e.callParent(arguments),d=[e.baseCls+"-body-"+b,e.baseCls+"-body-"+e.ui+"-"+b],h,c;if(!g&&e.rendered){if(e.bodyCls){e.body.addCls(e.bodyCls)}else{e.body.addCls(d)}}else{if(e.bodyCls){h=e.bodyCls.split(" ");for(c=0;c<d.length;c++){if(!Ext.Array.contains(h,d[c])){h.push(d[c])}}e.bodyCls=h.join(" ")}else{e.bodyCls=d.join(" ")}}return a},removeUIClsFromElement:function(b,g){var e=this,a=e.callParent(arguments),d=[e.baseCls+"-body-"+b,e.baseCls+"-body-"+e.ui+"-"+b],h,c;if(!g&&e.rendered){if(e.bodyCls){e.body.removeCls(e.bodyCls)}else{e.body.removeCls(d)}}else{if(e.bodyCls){h=e.bodyCls.split(" ");for(c=0;c<d.length;c++){Ext.Array.remove(h,d[c])}e.bodyCls=h.join(" ")}}return a},addUIToElement:function(c){var b=this,d,a;b.callParent(arguments);a=b.baseCls+"-body-"+b.ui;if(!c&&b.rendered){if(b.bodyCls){b.body.addCls(b.bodyCls)}else{b.body.addCls(a)}}else{if(b.bodyCls){d=b.bodyCls.split(" ");if(!Ext.Array.contains(d,a)){d.push(a)}b.bodyCls=d.join(" ")}else{b.bodyCls=a}}if(!c&&b.titleCmp&&b.titleCmp.rendered&&b.titleCmp.textEl){b.titleCmp.textEl.addCls(b.baseCls+"-text-"+b.ui)}},removeUIFromElement:function(){var b=this,c,a;b.callParent(arguments);a=b.baseCls+"-body-"+b.ui;if(b.rendered){if(b.bodyCls){b.body.removeCls(b.bodyCls)}else{b.body.removeCls(a)}}else{if(b.bodyCls){c=b.bodyCls.split(" ");Ext.Array.remove(c,a);b.bodyCls=c.join(" ")}else{b.bodyCls=a}}if(b.titleCmp&&b.titleCmp.rendered&&b.titleCmp.textEl){b.titleCmp.textEl.removeCls(b.baseCls+"-text-"+b.ui)}},onClick:function(a){if(!a.getTarget(Ext.baseCSSPrefix+"tool")){this.fireEvent("click",a)}},getTargetEl:function(){return this.body||this.frameBody||this.el},setTitle:function(d){var c=this;if(c.rendered){if(c.titleCmp.rendered){if(c.titleCmp.surface){c.title=d||"";var b=c.titleCmp.surface.items.items[0],a=c.titleCmp.surface;a.remove(b);c.textConfig.type="text";c.textConfig.text=d;b=a.add(c.textConfig);b.setAttributes({rotate:{degrees:90}},true);c.titleCmp.autoSizeSurface()}else{c.title=d||"&#160;";c.titleCmp.textEl.update(c.title)}}else{c.titleCmp.on({render:function(){c.setTitle(d)},single:true})}}else{c.on({render:function(){c.layout.layout();c.setTitle(d)},single:true})}},setIconCls:function(a){var c=this,e=!a||!a.length,d=c.iconCmp,b;c.iconCls=a;if(!c.iconCmp&&!e){c.initIconCmp();c.insert(0,c.iconCmp)}else{if(d){if(e){c.iconCmp.destroy()}else{b=d.iconEl;b.removeCls(d.iconCls);b.addCls(a);d.iconCls=a}}}},addTool:function(a){this.tools.push(this.add(a))},onAdd:function(b,a){this.callParent([arguments]);if(b instanceof Ext.panel.Tool){b.bindTo(this.ownerCt);this.tools[b.type]=b}}});Ext.define("Ext.fx.target.Element",{extend:"Ext.fx.target.Target",type:"element",getElVal:function(b,a,c){if(c==undefined){if(a==="x"){c=b.getX()}else{if(a==="y"){c=b.getY()}else{if(a==="scrollTop"){c=b.getScroll().top}else{if(a==="scrollLeft"){c=b.getScroll().left}else{if(a==="height"){c=b.getHeight()}else{if(a==="width"){c=b.getWidth()}else{c=b.getStyle(a)}}}}}}}return c},getAttr:function(a,c){var b=this.target;return[[b,this.getElVal(b,a,c)]]},setAttr:function(m){var g=this.target,k=m.length,p,h,b,e,c,a,d,n;for(e=0;e<k;e++){p=m[e].attrs;for(h in p){if(p.hasOwnProperty(h)){a=p[h].length;for(c=0;c<a;c++){b=p[h][c];d=b[0];n=b[1];if(h==="x"){d.setX(n)}else{if(h==="y"){d.setY(n)}else{if(h==="scrollTop"){d.scrollTo("top",n)}else{if(h==="scrollLeft"){d.scrollTo("left",n)}else{d.setStyle(h,n)}}}}}}}}}});Ext.define("Ext.fx.target.CompositeElement",{extend:"Ext.fx.target.Element",isComposite:true,constructor:function(a){a.id=a.id||Ext.id(null,"ext-composite-");this.callParent([a])},getAttr:function(a,d){var b=[],c=this.target;c.each(function(e){b.push([e,this.getElVal(e,a,d)])},this);return b}});Ext.define("Ext.fx.Manager",{singleton:true,requires:["Ext.util.MixedCollection","Ext.fx.target.Element","Ext.fx.target.CompositeElement","Ext.fx.target.Sprite","Ext.fx.target.CompositeSprite","Ext.fx.target.Component"],mixins:{queue:"Ext.fx.Queue"},constructor:function(){this.items=Ext.create("Ext.util.MixedCollection");this.mixins.queue.constructor.call(this)},interval:16,forceJS:true,createTarget:function(d){var b=this,c=!b.forceJS&&Ext.supports.Transitions,a;b.useCSS3=c;if(Ext.isString(d)){d=Ext.get(d)}if(d&&d.tagName){d=Ext.get(d);a=Ext.create("Ext.fx.target.Element"+(c?"CSS":""),d);b.targets.add(a);return a}if(Ext.isObject(d)){if(d.dom){a=Ext.create("Ext.fx.target.Element"+(c?"CSS":""),d)}else{if(d.isComposite){a=Ext.create("Ext.fx.target.CompositeElement"+(c?"CSS":""),d)}else{if(d.isSprite){a=Ext.create("Ext.fx.target.Sprite",d)}else{if(d.isCompositeSprite){a=Ext.create("Ext.fx.target.CompositeSprite",d)}else{if(d.isComponent){a=Ext.create("Ext.fx.target.Component",d)}else{if(d.isAnimTarget){return d}else{return null}}}}}}b.targets.add(a);return a}else{return null}},addAnim:function(c){var b=this.items,a=this.task;b.add(c);if(!a&&b.length){a=this.task={run:this.runner,interval:this.interval,scope:this};Ext.TaskManager.start(a)}},removeAnim:function(c){var b=this.items,a=this.task;b.remove(c);if(a&&!b.length){Ext.TaskManager.stop(a);delete this.task}},startingFilter:function(a){return a.paused===false&&a.running===false&&a.iterations>0},runningFilter:function(a){return a.paused===false&&a.running===true&&a.isAnimator!==true},runner:function(){var b=this,a=b.items;b.targetData={};b.targetArr={};b.timestamp=new Date();a.filterBy(b.startingFilter).each(b.startAnim,b);a.filterBy(b.runningFilter).each(b.runAnim,b);b.applyPendingAttrs()},startAnim:function(a){a.start(this.timestamp)},runAnim:function(d){if(!d){return}var c=this,b=d.target.getId(),g=c.useCSS3&&d.target.type=="element",a=c.timestamp-d.startTime,e,h;this.collectTargetData(d,a,g);if(g){d.target.setAttr(c.targetData[b],true);c.targetData[b]=[];c.collectTargetData(d,d.duration,g);d.paused=true;e=d.target.target;if(d.target.isComposite){e=d.target.target.last()}h={};h[Ext.supports.CSS3TransitionEnd]=d.lastFrame;h.scope=d;h.single=true;e.on(h)}else{if(a>=d.duration){c.applyPendingAttrs(true);delete c.targetData[b];delete c.targetArr[b];d.lastFrame()}}},collectTargetData:function(d,a,e){var b=d.target.getId(),g=this.targetData[b],c;if(!g){g=this.targetData[b]=[];this.targetArr[b]=d.target}c={duration:d.duration,easing:(e&&d.reverse)?d.easingFn.reverse().toCSS3():d.easing,attrs:{}};Ext.apply(c.attrs,d.runAnim(a));g.push(c)},applyPendingAttrs:function(d){var c=this.targetData,b=this.targetArr,a;for(a in c){if(c.hasOwnProperty(a)){b[a].setAttr(c[a],false,d)}}}});Ext.define("Ext.fx.Animator",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager"],isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(a){var b=this;a=Ext.apply(b,a||{});b.config=a;b.id=Ext.id(null,"ext-animator-");b.addEvents("beforeanimate","keyframe","afteranimate");b.mixins.observable.constructor.call(b,a);b.timeline=[];b.createTimeline(b.keyframes);if(b.target){b.applyAnimator(b.target);Ext.fx.Manager.addAnim(b)}},sorter:function(d,c){return d.pct-c.pct},createTimeline:function(g){var k=this,p=[],m=k.to||{},c=k.duration,q,a,e,j,n,b,d,h;for(n in g){if(g.hasOwnProperty(n)&&k.animKeyFramesRE.test(n)){h={attrs:Ext.apply(g[n],m)};if(n=="from"){n=0}else{if(n=="to"){n=100}}h.pct=parseInt(n,10);p.push(h)}}Ext.Array.sort(p,k.sorter);j=p.length;for(e=0;e<j;e++){q=(p[e-1])?c*(p[e-1].pct/100):0;a=c*(p[e].pct/100);k.timeline.push({duration:a-q,attrs:p[e].attrs})}},applyAnimator:function(e){var k=this,m=[],q=k.timeline,g=k.reverse,j=q.length,b,h,a,d,p,n,c;if(k.fireEvent("beforeanimate",k)!==false){for(c=0;c<j;c++){b=q[c];p=b.attrs;h=p.easing||k.easing;a=p.damper||k.damper;delete p.easing;delete p.damper;b=Ext.create("Ext.fx.Anim",{target:e,easing:h,damper:a,duration:b.duration,paused:true,to:p});m.push(b)}k.animations=m;k.target=b.target;for(c=0;c<j-1;c++){b=m[c];b.nextAnim=m[c+1];b.on("afteranimate",function(){this.nextAnim.paused=false});b.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},k)}m[j-1].on("afteranimate",function(){this.lastFrame()},k)}},start:function(d){var e=this,c=e.delay,b=e.delayStart,a;if(c){if(!b){e.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(e.fireEvent("beforeanimate",e)!==false){e.startTime=d;e.running=true;e.animations[e.keyframeStep].paused=false}},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){c.startTime=new Date();c.currentIteration=b;c.keyframeStep=0;c.applyAnimator(c.target);c.animations[c.keyframeStep].paused=false}else{c.currentIteration=0;c.end()}},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date()-a.startTime)}});Ext.ns("Ext.fx");Ext.require("Ext.fx.CubicBezier",function(){var e=Math,h=e.PI,d=e.pow,b=e.sin,g=e.sqrt,a=e.abs,c=1.70158;Ext.fx.Easing={};Ext.apply(Ext.fx.Easing,{linear:function(j){return j},ease:function(p){var j=0.07813-p/2,r=-0.25,u=g(0.0066+j*j),w=u-j,m=d(a(w),1/3)*(w<0?-1:1),v=-u-j,k=d(a(v),1/3)*(v<0?-1:1),z=m+k+0.25;return d(1-z,2)*3*z*0.1+(1-z)*3*z*z+z*z*z},easeIn:function(j){return d(j,1.7)},easeOut:function(j){return d(j,0.48)},easeInOut:function(w){var p=0.48-w/1.04,m=g(0.1734+p*p),j=m-p,v=d(a(j),1/3)*(j<0?-1:1),u=-m-p,r=d(a(u),1/3)*(u<0?-1:1),k=v+r+0.5;return(1-k)*3*k*k+k*k*k},backIn:function(j){return j*j*((c+1)*j-c)},backOut:function(j){j=j-1;return j*j*((c+1)*j+c)+1},elasticIn:function(m){if(m===0||m===1){return m}var k=0.3,j=k/4;return d(2,-10*m)*b((m-j)*(2*h)/k)+1},elasticOut:function(j){return 1-Ext.fx.Easing.elasticIn(1-j)},bounceIn:function(j){return 1-Ext.fx.Easing.bounceOut(1-j)},bounceOut:function(q){var k=7.5625,m=2.75,j;if(q<(1/m)){j=k*q*q}else{if(q<(2/m)){q-=(1.5/m);j=k*q*q+0.75}else{if(q<(2.5/m)){q-=(2.25/m);j=k*q*q+0.9375}else{q-=(2.625/m);j=k*q*q+0.984375}}}return j}});Ext.apply(Ext.fx.Easing,{"back-in":Ext.fx.Easing.backIn,"back-out":Ext.fx.Easing.backOut,"ease-in":Ext.fx.Easing.easeIn,"ease-out":Ext.fx.Easing.easeOut,"elastic-in":Ext.fx.Easing.elasticIn,"elastic-out":Ext.fx.Easing.elasticIn,"bounce-in":Ext.fx.Easing.bounceIn,"bounce-out":Ext.fx.Easing.bounceOut,"ease-in-out":Ext.fx.Easing.easeInOut})});Ext.define("Ext.draw.Draw",{singleton:true,requires:["Ext.draw.Color"],pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,availableAnimAttrs:{along:"along",blur:null,"clip-rect":"csv",cx:null,cy:null,fill:"color","fill-opacity":null,"font-size":null,height:null,opacity:null,path:"path",r:null,rotation:"csv",rx:null,ry:null,scale:"csv",stroke:"color","stroke-opacity":null,"stroke-width":null,translation:"csv",width:null,x:null,y:null},is:function(b,a){a=String(a).toLowerCase();return(a=="object"&&b===Object(b))||(a=="undefined"&&typeof b==a)||(a=="null"&&b===null)||(a=="array"&&Array.isArray&&Array.isArray(b))||(Object.prototype.toString.call(b).toLowerCase().slice(8,-1))==a},ellipsePath:function(b){var a=b.attr;return Ext.String.format("M{0},{1}A{2},{3},0,1,1,{0},{4}A{2},{3},0,1,1,{0},{1}z",a.x,a.y-a.ry,a.rx,a.ry,a.y+a.ry)},rectPath:function(b){var a=b.attr;if(a.radius){return Ext.String.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",a.x+a.radius,a.y,a.width-a.radius*2,a.radius,-a.radius,a.height-a.radius*2,a.radius*2-a.width,a.radius*2-a.height)}else{return Ext.String.format("M{0},{1}l{2},0,0,{3},{4},0z",a.x,a.y,a.width,a.height,-a.width)}},path2string:function(){return this.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},pathToString:function(a){return a.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},parsePathString:function(a){if(!a){return null}var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[],b=this;if(b.is(a,"array")&&b.is(a[0],"array")){c=b.pathClone(a)}if(!c.length){String(a).replace(b.pathCommandRE,function(g,e,k){var j=[],h=e.toLowerCase();k.replace(b.pathValuesRE,function(n,m){m&&j.push(+m)});if(h=="m"&&j.length>2){c.push([e].concat(Ext.Array.splice(j,0,2)));h="l";e=(e=="m")?"l":"L"}while(j.length>=d[h]){c.push([e].concat(Ext.Array.splice(j,0,d[h])));if(!d[h]){break}}})}c.toString=b.path2string;return c},mapPath:function(m,g){if(!g){return m}var h,e,c,k,a,d,b;m=this.path2curve(m);for(c=0,k=m.length;c<k;c++){b=m[c];for(a=1,d=b.length;a<d-1;a+=2){h=g.x(b[a],b[a+1]);e=g.y(b[a],b[a+1]);b[a]=h;b[a+1]=e}}return m},pathClone:function(g){var c=[],a,e,b,d;if(!this.is(g,"array")||!this.is(g&&g[0],"array")){g=this.parsePathString(g)}for(b=0,d=g.length;b<d;b++){c[b]=[];for(a=0,e=g[b].length;a<e;a++){c[b][a]=g[b][a]}}c.toString=this.path2string;return c},pathToAbsolute:function(c){if(!this.is(c,"array")||!this.is(c&&c[0],"array")){c=this.parsePathString(c)}var k=[],n=0,m=0,q=0,p=0,g=0,h=c.length,b,d,e,a;if(h&&c[0][0]=="M"){n=+c[0][1];m=+c[0][2];q=n;p=m;g++;k[0]=["M",n,m]}for(;g<h;g++){b=k[g]=[];d=c[g];if(d[0]!=d[0].toUpperCase()){b[0]=d[0].toUpperCase();switch(b[0]){case"A":b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=+(d[6]+n);b[7]=+(d[7]+m);break;case"V":b[1]=+d[1]+m;break;case"H":b[1]=+d[1]+n;break;case"M":q=+d[1]+n;p=+d[2]+m;default:e=1;a=d.length;for(;e<a;e++){b[e]=+d[e]+((e%2)?n:m)}}}else{e=0;a=d.length;for(;e<a;e++){k[g][e]=d[e]}}switch(b[0]){case"Z":n=q;m=p;break;case"H":n=b[1];break;case"V":m=b[1];break;case"M":d=k[g];a=d.length;q=d[a-2];p=d[a-1];default:d=k[g];a=d.length;n=d[a-2];m=d[a-1]}}k.toString=this.path2string;return k},pathToRelative:function(d){if(!this.is(d,"array")||!this.is(d&&d[0],"array")){d=this.parsePathString(d)}var p=[],t=0,q=0,w=0,v=0,c=0;if(d[0][0]=="M"){t=d[0][1];q=d[0][2];w=t;v=q;c++;p.push(["M",t,q])}for(var h=c,z=d.length;h<z;h++){var a=p[h]=[],u=d[h];if(u[0]!=u[0].toLowerCase()){a[0]=u[0].toLowerCase();switch(a[0]){case"a":a[1]=u[1];a[2]=u[2];a[3]=u[3];a[4]=u[4];a[5]=u[5];a[6]=+(u[6]-t).toFixed(3);a[7]=+(u[7]-q).toFixed(3);break;case"v":a[1]=+(u[1]-q).toFixed(3);break;case"m":w=u[1];v=u[2];default:for(var g=1,m=u.length;g<m;g++){a[g]=+(u[g]-((g%2)?t:q)).toFixed(3)}}}else{a=p[h]=[];if(u[0]=="m"){w=u[1]+t;v=u[2]+q}for(var e=0,b=u.length;e<b;e++){p[h][e]=u[e]}}var n=p[h].length;switch(p[h][0]){case"z":t=w;q=v;break;case"h":t+=+p[h][n-1];break;case"v":q+=+p[h][n-1];break;default:t+=+p[h][n-2];q+=+p[h][n-1]}}p.toString=this.path2string;return p},path2curve:function(k){var d=this,h=d.pathToAbsolute(k),c=h.length,j={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b,a,g,e;for(b=0;b<c;b++){h[b]=d.command2curve(h[b],j);if(h[b].length>7){h[b].shift();e=h[b];while(e.length){Ext.Array.splice(h,b++,0,["C"].concat(Ext.Array.splice(e,0,6)))}Ext.Array.erase(h,b,1);c=h.length}a=h[b];g=a.length;j.x=a[g-2];j.y=a[g-1];j.bx=parseFloat(a[g-4])||j.x;j.by=parseFloat(a[g-3])||j.y}return h},interpolatePaths:function(u,m){var j=this,d=j.pathToAbsolute(u),n=j.pathToAbsolute(m),q={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b=function(p,v){if(p[v].length>7){p[v].shift();var w=p[v];while(w.length){Ext.Array.splice(p,v++,0,["C"].concat(Ext.Array.splice(w,0,6)))}Ext.Array.erase(p,v,1);r=Math.max(d.length,n.length||0)}},c=function(y,x,v,p,w){if(y&&x&&y[w][0]=="M"&&x[w][0]!="M"){Ext.Array.splice(x,w,0,["M",p.x,p.y]);v.bx=0;v.by=0;v.x=y[w][1];v.y=y[w][2];r=Math.max(d.length,n.length||0)}};for(var h=0,r=Math.max(d.length,n.length||0);h<r;h++){d[h]=j.command2curve(d[h],q);b(d,h);(n[h]=j.command2curve(n[h],a));b(n,h);c(d,n,q,a,h);c(n,d,a,q,h);var g=d[h],t=n[h],e=g.length,k=t.length;q.x=g[e-2];q.y=g[e-1];q.bx=parseFloat(g[e-4])||q.x;q.by=parseFloat(g[e-3])||q.y;a.bx=(parseFloat(t[k-4])||a.x);a.by=(parseFloat(t[k-3])||a.y);a.x=t[k-2];a.y=t[k-1]}return[d,n]},command2curve:function(c,b){var a=this;if(!c){return["C",b.x,b.y,b.x,b.y,b.x,b.y]}if(c[0]!="T"&&c[0]!="Q"){b.qx=b.qy=null}switch(c[0]){case"M":b.X=c[1];b.Y=c[2];break;case"A":c=["C"].concat(a.arc2curve.apply(a,[b.x,b.y].concat(c.slice(1))));break;case"S":c=["C",b.x+(b.x-(b.bx||b.x)),b.y+(b.y-(b.by||b.y))].concat(c.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));c=["C"].concat(a.quadratic2curve(b.x,b.y,b.qx,b.qy,c[1],c[2]));break;case"Q":b.qx=c[1];b.qy=c[2];c=["C"].concat(a.quadratic2curve(b.x,b.y,c[1],c[2],c[3],c[4]));break;case"L":c=["C"].concat(b.x,b.y,c[1],c[2],c[1],c[2]);break;case"H":c=["C"].concat(b.x,b.y,c[1],b.y,c[1],b.y);break;case"V":c=["C"].concat(b.x,b.y,b.x,c[1],b.x,c[1]);break;case"Z":c=["C"].concat(b.x,b.y,b.X,b.Y,b.X,b.Y);break}return c},quadratic2curve:function(b,d,h,e,a,c){var g=1/3,j=2/3;return[g*b+j*h,g*d+j*e,g*a+j*h,g*c+j*e,a,c]},rotate:function(b,h,a){var d=Math.cos(a),c=Math.sin(a),g=b*d-h*c,e=b*c+h*d;return{x:g,y:e}},arc2curve:function(A,ak,M,K,E,q,j,z,aj,F){var C=this,e=Math.PI,D=C.radian,J=e*120/180,b=D*(+E||0),R=[],O=Math,Y=O.cos,a=O.sin,aa=O.sqrt,B=O.abs,r=O.asin,N,c,v,T,S,af,d,W,Z,H,G,p,n,w,m,ai,g,ah,U,X,V,ag,ae,ad,ab,Q,ac,P,I,L,u;if(!F){N=C.rotate(A,ak,-b);A=N.x;ak=N.y;N=C.rotate(z,aj,-b);z=N.x;aj=N.y;c=Y(D*E);v=a(D*E);T=(A-z)/2;S=(ak-aj)/2;af=(T*T)/(M*M)+(S*S)/(K*K);if(af>1){af=aa(af);M=af*M;K=af*K}d=M*M;W=K*K;Z=(q==j?-1:1)*aa(B((d*W-d*S*S-W*T*T)/(d*S*S+W*T*T)));H=Z*M*S/K+(A+z)/2;G=Z*-K*T/M+(ak+aj)/2;p=r(((ak-G)/K).toFixed(7));n=r(((aj-G)/K).toFixed(7));p=A<H?e-p:p;n=z<H?e-n:n;if(p<0){p=e*2+p}if(n<0){n=e*2+n}if(j&&p>n){p=p-e*2}if(!j&&n>p){n=n-e*2}}else{p=F[0];n=F[1];H=F[2];G=F[3]}w=n-p;if(B(w)>J){I=n;L=z;u=aj;n=p+J*(j&&n>p?1:-1);z=H+M*Y(n);aj=G+K*a(n);R=C.arc2curve(z,aj,M,K,E,0,j,L,u,[n,I,H,G])}w=n-p;m=Y(p);ai=a(p);g=Y(n);ah=a(n);U=O.tan(w/4);X=4/3*M*U;V=4/3*K*U;ag=[A,ak];ae=[A+X*ai,ak-V*m];ad=[z+X*ah,aj-V*g];ab=[z,aj];ae[0]=2*ag[0]-ae[0];ae[1]=2*ag[1]-ae[1];if(F){return[ae,ad,ab].concat(R)}else{R=[ae,ad,ab].concat(R).join().split(",");Q=[];P=R.length;for(ac=0;ac<P;ac++){Q[ac]=ac%2?C.rotate(R[ac-1],R[ac],b).y:C.rotate(R[ac],R[ac+1],b).x}return Q}},rotateAndTranslatePath:function(k){var c=k.rotation.degrees,d=k.rotation.x,b=k.rotation.y,r=k.translation.x,m=k.translation.y,q,g,a,n,e,h=[];if(!c&&!r&&!m){return this.pathToAbsolute(k.attr.path)}r=r||0;m=m||0;q=this.pathToAbsolute(k.attr.path);for(g=q.length;g--;){a=h[g]=q[g].slice();if(a[0]=="A"){n=this.rotatePoint(a[6],a[7],c,d,b);a[6]=n.x+r;a[7]=n.y+m}else{e=1;while(a[e+1]!=null){n=this.rotatePoint(a[e],a[e+1],c,d,b);a[e]=n.x+r;a[e+1]=n.y+m;e+=2}}}return h},rotatePoint:function(b,h,e,a,g){if(!e){return{x:b,y:h}}a=a||0;g=g||0;b=b-a;h=h-g;e=e*this.radian;var d=Math.cos(e),c=Math.sin(e);return{x:b*d-h*c+a,y:b*c+h*d+g}},pathDimensions:function(n){if(!n||!(n+"")){return{x:0,y:0,width:0,height:0}}n=this.path2curve(n);var k=0,j=0,d=[],b=[],e=0,h=n.length,c,a,m,g;for(;e<h;e++){c=n[e];if(c[0]=="M"){k=c[1];j=c[2];d.push(k);b.push(j)}else{g=this.curveDim(k,j,c[1],c[2],c[3],c[4],c[5],c[6]);d=d.concat(g.min.x,g.max.x);b=b.concat(g.min.y,g.max.y);k=c[5];j=c[6]}}a=Math.min.apply(0,d);m=Math.min.apply(0,b);return{x:a,y:m,path:n,width:Math.max.apply(0,d)-a,height:Math.max.apply(0,b)-m}},intersectInside:function(b,c,a){return(a[0]-c[0])*(b[1]-c[1])>(a[1]-c[1])*(b[0]-c[0])},intersectIntersection:function(r,q,g,d){var c=[],b=g[0]-d[0],a=g[1]-d[1],m=r[0]-q[0],j=r[1]-q[1],n=g[0]*d[1]-g[1]*d[0],k=r[0]*q[1]-r[1]*q[0],h=1/(b*j-a*m);c[0]=(n*m-k*b)*h;c[1]=(n*j-k*a)*h;return c},intersect:function(q,c){var p=this,k=0,n=c.length,h=c[n-1],t=q,g,u,m,r,a,b,d;for(;k<n;++k){g=c[k];b=t;t=[];u=b[b.length-1];d=0;a=b.length;for(;d<a;d++){m=b[d];if(p.intersectInside(m,h,g)){if(!p.intersectInside(u,h,g)){t.push(p.intersectIntersection(u,m,h,g))}t.push(m)}else{if(p.intersectInside(u,h,g)){t.push(p.intersectIntersection(u,m,h,g))}}u=m}h=g}return t},curveDim:function(g,d,j,h,z,w,t,p){var v=(z-2*j+g)-(t-2*z+j),r=2*(j-g)-2*(z-j),n=g-j,m=(-r+Math.sqrt(r*r-4*v*n))/2/v,k=(-r-Math.sqrt(r*r-4*v*n))/2/v,q=[d,p],u=[g,t],e;if(Math.abs(m)>1000000000000){m=0.5}if(Math.abs(k)>1000000000000){k=0.5}if(m>0&&m<1){e=this.findDotAtSegment(g,d,j,h,z,w,t,p,m);u.push(e.x);q.push(e.y)}if(k>0&&k<1){e=this.findDotAtSegment(g,d,j,h,z,w,t,p,k);u.push(e.x);q.push(e.y)}v=(w-2*h+d)-(p-2*w+h);r=2*(h-d)-2*(w-h);n=d-h;m=(-r+Math.sqrt(r*r-4*v*n))/2/v;k=(-r-Math.sqrt(r*r-4*v*n))/2/v;if(Math.abs(m)>1000000000000){m=0.5}if(Math.abs(k)>1000000000000){k=0.5}if(m>0&&m<1){e=this.findDotAtSegment(g,d,j,h,z,w,t,p,m);u.push(e.x);q.push(e.y)}if(k>0&&k<1){e=this.findDotAtSegment(g,d,j,h,z,w,t,p,k);u.push(e.x);q.push(e.y)}return{min:{x:Math.min.apply(0,u),y:Math.min.apply(0,q)},max:{x:Math.max.apply(0,u),y:Math.max.apply(0,q)}}},getAnchors:function(e,d,m,k,z,y,u){u=u||4;var j=Math,t=j.PI,v=t/2,p=j.abs,a=j.sin,b=j.cos,g=j.atan,x,w,h,n,r,q,B,A,c;x=(m-e)/u;w=(z-m)/u;if((k>=d&&k>=y)||(k<=d&&k<=y)){h=n=v}else{h=g((m-e)/p(k-d));if(d<k){h=t-h}n=g((z-m)/p(k-y));if(y<k){n=t-n}}c=v-((h+n)%(t*2))/2;if(c>v){c-=t}h+=c;n+=c;r=m-x*a(h);q=k+x*b(h);B=m+w*a(n);A=k+w*b(n);if((k>d&&q<d)||(k<d&&q>d)){r+=p(d-q)*(r-m)/(q-k);q=d}if((k>y&&A<y)||(k<y&&A>y)){B-=p(y-A)*(B-m)/(A-k);A=y}return{x1:r,y1:q,x2:B,y2:A}},smooth:function(a,u){var t=this.path2curve(a),e=[t[0]],k=t[0][1],h=t[0][2],v,z,A=1,m=t.length,g=1,p=k,n=h,c=0,b=0;for(;A<m;A++){var D=t[A],C=D.length,B=t[A-1],q=B.length,w=t[A+1],r=w&&w.length;if(D[0]=="M"){p=D[1];n=D[2];v=A+1;while(t[v][0]!="C"){v++}c=t[v][5];b=t[v][6];e.push(["M",p,n]);g=e.length;k=p;h=n;continue}if(D[C-2]==p&&D[C-1]==n&&(!w||w[0]=="M")){var d=e[g].length;z=this.getAnchors(B[q-2],B[q-1],p,n,e[g][d-2],e[g][d-1],u);e[g][1]=z.x2;e[g][2]=z.y2}else{if(!w||w[0]=="M"){z={x1:D[C-2],y1:D[C-1]}}else{z=this.getAnchors(B[q-2],B[q-1],D[C-2],D[C-1],w[r-2],w[r-1],u)}}e.push(["C",k,h,z.x1,z.y1,D[C-2],D[C-1]]);k=z.x2;h=z.y2}return e},findDotAtSegment:function(b,a,d,c,k,j,h,g,m){var e=1-m;return{x:Math.pow(e,3)*b+Math.pow(e,2)*3*m*d+e*3*m*m*k+Math.pow(m,3)*h,y:Math.pow(e,3)*a+Math.pow(e,2)*3*m*c+e*3*m*m*j+Math.pow(m,3)*g}},snapEnds:function(t,u,d){if(Ext.isDate(t)){return this.snapEndsByDate(t,u,d)}var c=(u-t)/d,a=Math.floor(Math.log(c)/Math.LN10)+1,e=Math.pow(10,a),v,q=Math.round((c%e)*Math.pow(10,2-a)),b=[[0,15],[20,4],[30,2],[40,4],[50,9],[60,4],[70,2],[80,4],[100,15]],h=0,r,k,j,g,n=1000000000,p=b.length;v=t=Math.floor(t/e)*e;for(j=0;j<p;j++){r=b[j][0];k=(r-q)<0?1000000:(r-q)/b[j][1];if(k<n){g=r;n=k}}c=Math.floor(c*Math.pow(10,-a))*Math.pow(10,a)+g*Math.pow(10,a-2);while(v<u){v+=c;h++}u=+v.toFixed(10);return{from:t,to:u,power:a,step:c,steps:h}},snapEndsByDate:function(k,h,b,a){var d=false,g=[[Ext.Date.MILLI,[1,2,3,5,10,20,30,50,100,200,300,500]],[Ext.Date.SECOND,[1,2,3,5,10,15,30]],[Ext.Date.MINUTE,[1,2,3,5,10,20,30]],[Ext.Date.HOUR,[1,2,3,4,6,12]],[Ext.Date.DAY,[1,2,3,7,14]],[Ext.Date.MONTH,[1,2,3,4,6]]],c,e;Ext.each(g,function(m,j){for(c=0;c<m[1].length;c++){if(h<Ext.Date.add(k,m[0],m[1][c]*b)){d=[m[0],m[1][c]];return false}}});if(!d){e=this.snapEnds(k.getFullYear(),h.getFullYear()+1,b,a);d=[Date.YEAR,Math.round(e.step)]}return this.snapEndsByDateAndStep(k,h,d,a)},snapEndsByDateAndStep:function(j,h,e,a){var d=[j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),j.getMilliseconds()],b=0,g,c;if(a){g=j}else{switch(e[0]){case Ext.Date.MILLI:g=new Date(d[0],d[1],d[2],d[3],d[4],d[5],Math.floor(d[6]/e[1])*e[1]);break;case Ext.Date.SECOND:g=new Date(d[0],d[1],d[2],d[3],d[4],Math.floor(d[5]/e[1])*e[1],0);break;case Ext.Date.MINUTE:g=new Date(d[0],d[1],d[2],d[3],Math.floor(d[4]/e[1])*e[1],0,0);break;case Ext.Date.HOUR:g=new Date(d[0],d[1],d[2],Math.floor(d[3]/e[1])*e[1],0,0,0);break;case Ext.Date.DAY:g=new Date(d[0],d[1],Math.floor(d[2]-1/e[1])*e[1]+1,0,0,0,0);break;case Ext.Date.MONTH:g=new Date(d[0],Math.floor(d[1]/e[1])*e[1],1,0,0,0,0);break;default:g=new Date(Math.floor(d[0]/e[1])*e[1],0,1,0,0,0,0);break}}c=g;while(c<h){c=Ext.Date.add(c,e[0],e[1]);b++}if(a){c=h}return{from:+g,to:+c,step:(c-g)/b,steps:b}},sorter:function(d,c){return d.offset-c.offset},rad:function(a){return a%360*Math.PI/180},degrees:function(a){return a*180/Math.PI%360},withinBox:function(a,c,b){b=b||{};return(a>=b.x&&a<=(b.x+b.width)&&c>=b.y&&c<=(b.y+b.height))},parseGradient:function(m){var e=this,g=m.type||"linear",c=m.angle||0,j=e.radian,n=m.stops,a=[],k,b,h,d;if(g=="linear"){b=[0,0,Math.cos(c*j),Math.sin(c*j)];h=1/(Math.max(Math.abs(b[2]),Math.abs(b[3]))||1);b[2]*=h;b[3]*=h;if(b[2]<0){b[0]=-b[2];b[2]=0}if(b[3]<0){b[1]=-b[3];b[3]=0}}for(k in n){if(n.hasOwnProperty(k)&&e.stopsRE.test(k)){d={offset:parseInt(k,10),color:Ext.draw.Color.toHex(n[k].color)||"#ffffff",opacity:n[k].opacity||1};a.push(d)}}Ext.Array.sort(a,e.sorter);if(g=="linear"){return{id:m.id,type:g,vector:b,stops:a}}else{return{id:m.id,type:g,centerX:m.centerX,centerY:m.centerY,focalX:m.focalX,focalY:m.focalY,radius:m.radius,vector:b,stops:a}}}});Ext.define("Ext.fx.PropertyHandler",{requires:["Ext.draw.Draw"],statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(k,c,a,g,j){a=(typeof a=="number")?a:1;var h=this.unitRE,d=h.exec(k),b,e;if(d){k=d[1];e=d[2];if(!this.scrollRE.test(j)&&!e&&this.pixelDefaultsRE.test(j)){e="px"}}k=+k||0;d=h.exec(c);if(d){c=d[1];e=d[2]||e}c=+c||0;b=(g!=null)?g:k;return{from:k,delta:(c-b)*a,units:e}},get:function(q,b,a,p,k){var n=q.length,d=[],e,h,m,c,g;for(e=0;e<n;e++){if(p){h=p[e][1].from}if(Ext.isArray(q[e][1])&&Ext.isArray(b)){m=[];c=0;g=q[e][1].length;for(;c<g;c++){m.push(this.computeDelta(q[e][1][c],b[c],a,h,k))}d.push([q[e][0],m])}else{d.push([q[e][0],this.computeDelta(q[e][1],b,a,h,k)])}}return d},set:function(m,g){var h=m.length,c=[],d,a,k,e,b;for(d=0;d<h;d++){a=m[d][1];if(Ext.isArray(a)){k=[];b=0;e=a.length;for(;b<e;b++){k.push(a[b].from+(a[b].delta*g)+(a[b].units||0))}c.push([m[d][0],k])}else{c.push([m[d][0],a.from+(a.delta*g)+(a.units||0)])}}return c}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(a,d){d=(typeof d=="number")?d:1;var e,c=false,b;Ext.each([this.hexRE,this.rgbRE,this.hex3RE],function(h,g){e=(g%2==0)?16:10;b=h.exec(a);if(b&&b.length==4){if(g==2){b[1]+=b[1];b[2]+=b[2];b[3]+=b[3]}c={red:parseInt(b[1],e),green:parseInt(b[2],e),blue:parseInt(b[3],e)};return false}});return c||a},computeDelta:function(h,a,e,c){h=this.parseColor(h);a=this.parseColor(a,e);var g=c?c:h,b=typeof g,d=typeof a;if(b=="string"||b=="undefined"||d=="string"||d=="undefined"){return a||g}return{from:h,delta:{red:Math.round((a.red-g.red)*e),green:Math.round((a.green-g.green)*e),blue:Math.round((a.blue-g.blue)*e)}}},get:function(j,a,g,d){var h=j.length,c=[],e,b;for(e=0;e<h;e++){if(d){b=d[e][1].from}c.push([j[e][0],this.computeDelta(j[e][1],a,g,b)])}return c},set:function(k,e){var g=k.length,c=[],d,b,a,h,j;for(d=0;d<g;d++){b=k[d][1];if(b){h=b.from;j=b.delta;b=(typeof b=="object"&&"red" in b)?"rgb("+b.red+", "+b.green+", "+b.blue+")":b;b=(typeof b=="object"&&b.length)?b[0]:b;if(typeof b=="undefined"){return[]}a=typeof b=="string"?b:"rgb("+[(h.red+Math.round(j.red*e))%256,(h.green+Math.round(j.green*e))%256,(h.blue+Math.round(j.blue*e))%256].join(",")+")";c.push([k[d][0],a])}}return c}},object:{interpolate:function(d,b){b=(typeof b=="number")?b:1;var a={},c;for(c in d){a[c]=parseInt(d[c],10)*b}return a},computeDelta:function(h,a,c,b){h=this.interpolate(h);a=this.interpolate(a,c);var g=b?b:h,e={},d;for(d in a){e[d]=a[d]-g[d]}return{from:h,delta:e}},get:function(j,a,g,d){var h=j.length,c=[],e,b;for(e=0;e<h;e++){if(d){b=d[e][1].from}c.push([j[e][0],this.computeDelta(j[e][1],a,g,b)])}return c},set:function(m,g){var h=m.length,c=[],e={},d,j,k,b,a;for(d=0;d<h;d++){b=m[d][1];j=b.from;k=b.delta;for(a in j){e[a]=Math.round(j[a]+k[a]*g)}c.push([m[d][0],e])}return c}},path:{computeDelta:function(e,a,c,b){c=(typeof c=="number")?c:1;var d;e=+e||0;a=+a||0;d=(b!=null)?b:e;return{from:e,delta:(a-d)*c}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.draw.Draw.parsePathString(a)}return a},get:function(b,m,a,t){var c=this.forcePath(m),p=[],v=b.length,d,h,q,g,r,n,e,w,u;for(q=0;q<v;q++){u=this.forcePath(b[q][1]);g=Ext.draw.Draw.interpolatePaths(u,c);u=g[0];c=g[1];d=u.length;w=[];for(n=0;n<d;n++){g=[u[n][0]];h=u[n].length;for(e=1;e<h;e++){r=t&&t[0][1][n][e].from;g.push(this.computeDelta(u[n][e],c[n][e],a,r))}w.push(g)}p.push([b[q][0],w])}return p},set:function(r,p){var q=r.length,e=[],h,g,d,m,n,c,a,b;for(h=0;h<q;h++){c=r[h][1];m=[];a=c.length;for(g=0;g<a;g++){n=[c[g][0]];b=c[g].length;for(d=1;d<b;d++){n.push(c[g][d].from+c[g][d].delta*p)}m.push(n.join(","))}e.push([r[h][0],m.join(",")])}return e}}}},function(){Ext.each(["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],function(a){this[a]=this.color},this)});Ext.define("Ext.fx.Anim",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager","Ext.fx.Animator","Ext.fx.Easing","Ext.fx.CubicBezier","Ext.fx.PropertyHandler"],isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,alternate:false,currentIteration:0,startTime:0,constructor:function(a){var b=this,c;a=a||{};if(a.keyframes){return Ext.create("Ext.fx.Animator",a)}a=Ext.apply(b,a);if(b.from===undefined){b.from={}}b.propHandlers={};b.config=a;b.target=Ext.fx.Manager.createTarget(b.target);b.easingFn=Ext.fx.Easing[b.easing];b.target.dynamic=b.dynamic;if(!b.easingFn){b.easingFn=String(b.easing).match(b.bezierRE);if(b.easingFn&&b.easingFn.length==5){c=b.easingFn;b.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4])}}b.id=Ext.id(null,"ext-anim-");Ext.fx.Manager.addAnim(b);b.addEvents("beforeanimate","afteranimate","lastframe");b.mixins.observable.constructor.call(b,a);if(a.callback){b.on("afteranimate",a.callback,a.scope)}return b},setAttr:function(a,b){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,a,b)},initAttrs:function(){var e=this,h=e.from,j=e.to,g=e.initialFrom||{},c={},a,b,k,d;for(d in j){if(j.hasOwnProperty(d)){a=e.target.getAttr(d,h[d]);b=j[d];if(!Ext.fx.PropertyHandler[d]){if(Ext.isObject(b)){k=e.propHandlers[d]=Ext.fx.PropertyHandler.object}else{k=e.propHandlers[d]=Ext.fx.PropertyHandler.defaultHandler}}else{k=e.propHandlers[d]=Ext.fx.PropertyHandler[d]}c[d]=k.get(a,b,e.damper,g[d],d)}}e.currentAttrs=c},start:function(d){var e=this,c=e.delay,b=e.delayStart,a;if(c){if(!b){e.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(e.fireEvent("beforeanimate",e)!==false){e.startTime=d;if(!e.paused&&!e.currentAttrs){e.initAttrs()}e.running=true}},runAnim:function(n){var j=this,m=j.currentAttrs,d=j.duration,c=j.easingFn,b=j.propHandlers,g={},h,k,e,a;if(n>=d){n=d;a=true}if(j.reverse){n=d-n}for(e in m){if(m.hasOwnProperty(e)){k=m[e];h=a?1:c(n/d);g[e]=b[e].set(k,h)}}return g},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){if(c.alternate){c.reverse=!c.reverse}c.startTime=new Date();c.currentIteration=b;c.paused=false}else{c.currentIteration=0;c.end();c.fireEvent("lastframe",c,c.startTime)}},end:function(){var a=this;a.startTime=0;a.paused=false;a.running=false;Ext.fx.Manager.removeAnim(a);a.fireEvent("afteranimate",a,a.startTime)}});Ext.enableFx=true;Ext.define("Ext.dd.DragDrop",{requires:["Ext.dd.DragDropManager"],constructor:function(c,a,b){if(c){this.init(c,a,b)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(a,b){},b4DragOver:function(a){},onDragOver:function(a,b){},b4DragOut:function(a){},onDragOut:function(a,b){},b4DragDrop:function(a){},onDragDrop:function(a,b){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(j,g,q){if(Ext.isNumber(g)){g={left:g,right:g,top:g,bottom:g}}g=g||this.defaultPadding;var m=Ext.get(this.getEl()).getBox(),a=Ext.get(j),p=a.getScroll(),k,d=a.dom;if(d==document.body){k={x:p.left,y:p.top,width:Ext.Element.getViewWidth(),height:Ext.Element.getViewHeight()}}else{var n=a.getXY();k={x:n[0],y:n[1],width:d.clientWidth,height:d.clientHeight}}var h=m.y-k.y,e=m.x-k.x;this.resetConstraints();this.setXConstraint(e-(g.left||0),k.width-e-m.width-(g.right||0),this.xTickSize);this.setYConstraint(h-(g.top||0),k.height-h-m.height-(g.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(c,a,b){this.initTarget(c,a,b);Ext.EventManager.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(c,a,b){this.config=b||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof c!=="string"){c=Ext.id(c)}this.id=c;this.addToGroup((a)?a:"default");this.handleElId=c;this.setDragElId(c);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(c,a,d,b){if(!a&&0!==a){this.padding=[c,c,c,c]}else{if(!d&&0!==d){this.padding=[c,a,c,a]}else{this.padding=[c,a,d,b]}}},setInitPosition:function(d,c){var e=this.getEl();if(!this.DDMInstance.verifyEl(e)){return}var b=d||0;var a=c||0;var g=Ext.Element.getXY(e);this.initPageX=g[0]-b;this.initPageY=g[1]-a;this.lastPageX=g[0];this.lastPageY=g[1];this.setStartPosition(g)},setStartPosition:function(b){var a=b||Ext.Element.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=a[0];this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=true;this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.handleElId=a;this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}Ext.EventManager.on(a,"mousedown",this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=true},unreg:function(){Ext.EventManager.un(this.id,"mousedown",this.handleMouseDown,this);this._domRef=null;this.DDMInstance._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(c,b){if(this.primaryButtonOnly&&c.button!=0){return}if(this.isLocked()){return}this.DDMInstance.refreshCache(this.groups);var a=c.getPoint();if(!this.hasOuterHandles&&!this.DDMInstance.isOverTarget(a,this)){}else{if(this.clickValidator(c)){this.setStartPosition();this.b4MouseDown(c);this.onMouseDown(c);this.DDMInstance.handleMouseDown(c,this);this.DDMInstance.stopEvent(c)}else{}}},clickValidator:function(b){var a=b.getTarget();return(this.isValidHandleChild(a)&&(this.id==this.handleElId||this.DDMInstance.handleWasClicked(a,this.id)))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(b){for(var c=0,a=this.invalidHandleClasses.length;c<a;++c){if(this.invalidHandleClasses[c]==b){delete this.invalidHandleClasses[c]}}},isValidHandleChild:function(d){var c=true;var h;try{h=d.nodeName.toUpperCase()}catch(g){h=d.nodeName}c=c&&!this.invalidHandleTypes[h];c=c&&!this.invalidHandleIds[d.id];for(var b=0,a=this.invalidHandleClasses.length;c&&b<a;++b){c=!Ext.fly(d).hasCls(this.invalidHandleClasses[b])}return c},setXTicks:function(d,a){this.xTicks=[];this.xTickSize=a;var c={};for(var b=this.initPageX;b>=this.minX;b=b-a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}for(b=this.initPageX;b<=this.maxX;b=b+a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(d,a){this.yTicks=[];this.yTickSize=a;var c={};for(var b=this.initPageY;b>=this.minY;b=b-a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}for(b=this.initPageY;b<=this.maxY;b=b+a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=this.initPageX-c;this.maxX=this.initPageX+b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(a,c,b){this.topConstraint=a;this.bottomConstraint=c;this.minY=this.initPageY-a;this.maxY=this.initPageY+c;if(b){this.setYTicks(this.initPageY,b)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var b=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var a=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(b,a)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(h,d){if(!d){return h}else{if(d[0]>=h){return d[0]}else{for(var b=0,a=d.length;b<a;++b){var c=b+1;if(d[c]&&d[c]>=h){var g=h-d[b];var e=d[c]-h;return(e>g)?d[b]:d[c]}}return d[d.length-1]}}},toString:function(){return("DragDrop "+this.id)}});Ext.define("Ext.dd.DD",{extend:"Ext.dd.DragDrop",requires:["Ext.dd.DragDropManager"],constructor:function(c,a,b){if(c){this.init(c,a,b)}},scroll:true,autoOffset:function(c,b){var a=c-this.startPageX;var d=b-this.startPageY;this.setDelta(a,d)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(c,b){var a=this.getDragEl();this.alignElWithMouse(a,c,b)},alignElWithMouse:function(b,e,c){var g=this.getTargetCoord(e,c),d=b.dom?b:Ext.fly(b,"_dd"),n=d.getSize(),j=Ext.Element,k;if(!this.deltaSetXY){k=this.cachedViewportSize={width:j.getDocumentWidth(),height:j.getDocumentHeight()};var a=[Math.max(0,Math.min(g.x,k.width-n.width)),Math.max(0,Math.min(g.y,k.height-n.height))];d.setXY(a);var m=d.getLeft(true);var h=d.getTop(true);this.deltaSetXY=[m-g.x,h-g.y]}else{k=this.cachedViewportSize;d.setLeftTop(Math.max(0,Math.min(g.x+this.deltaSetXY[0],k.width-n.width)),Math.max(0,Math.min(g.y+this.deltaSetXY[1],k.height-n.height)))}this.cachePosition(g.x,g.y);this.autoScroll(g.x,g.y,b.offsetHeight,b.offsetWidth);return g},cachePosition:function(b,a){if(b){this.lastPageX=b;this.lastPageY=a}else{var c=Ext.Element.getXY(this.getEl());this.lastPageX=c[0];this.lastPageY=c[1]}},autoScroll:function(n,m,e,p){if(this.scroll){var q=Ext.Element.getViewHeight();var b=Ext.Element.getViewWidth();var t=this.DDMInstance.getScrollTop();var d=this.DDMInstance.getScrollLeft();var k=e+m;var r=p+n;var j=(q+t-m-this.deltaY);var g=(b+d-n-this.deltaX);var c=40;var a=(document.all)?80:30;if(k>q&&j<c){window.scrollTo(d,t+a)}if(m<t&&t>0&&m-t<c){window.scrollTo(d,t-a)}if(r>b&&g<c){window.scrollTo(d+a,t)}if(n<d&&d>0&&n-d<c){window.scrollTo(d-a,t)}}},getTargetCoord:function(c,b){var a=c-this.deltaX;var d=b-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(d<this.minY){d=this.minY}if(d>this.maxY){d=this.maxY}}a=this.getTick(a,this.xTicks);d=this.getTick(d,this.yTicks);return{x:a,y:d}},applyConfig:function(){this.callParent();this.scroll=(this.config.scroll!==false)},b4MouseDown:function(a){this.autoOffset(a.getPageX(),a.getPageY())},b4Drag:function(a){this.setDragElPos(a.getPageX(),a.getPageY())},toString:function(){return("DD "+this.id)}});Ext.define("Ext.dd.DDProxy",{extend:"Ext.dd.DD",statics:{dragElId:"ygddfdiv"},constructor:function(c,a,b){if(c){this.init(c,a,b);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var b=this;var a=document.body;if(!a||!a.firstChild){setTimeout(function(){b.createFrame()},50);return}var d=this.getDragEl();if(!d){d=document.createElement("div");d.id=this.dragElId;var c=d.style;c.position="absolute";c.visibility="hidden";c.cursor="move";c.border="2px solid #aaa";c.zIndex=999;a.insertBefore(d,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){this.callParent();this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(e,d){var c=this.getEl();var a=this.getDragEl();var b=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(b.width,10)/2),Math.round(parseInt(b.height,10)/2))}this.setDragElPos(e,d);Ext.fly(a).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(b){var a=b.getPageX();var c=b.getPageY();this.autoOffset(a,c);this.setDragElPos(a,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl();var a=this.getDragEl();a.style.visibility="";this.beforeMove();b.style.visibility="hidden";Ext.dd.DDM.moveToEl(b,a);a.style.visibility="hidden";b.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}});Ext.define("Ext.dd.DragSource",{extend:"Ext.dd.DDProxy",requires:["Ext.dd.StatusProxy","Ext.dd.DragDropManager"],dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=Ext.create("Ext.dd.StatusProxy",{animRepair:this.animRepair})}this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true}]);this.dragging=false},getDragData:function(a){return this.dragData},onDragEnter:function(c,d){var b=Ext.dd.DragDropManager.getDDById(d);this.cachedTarget=b;if(this.beforeDragEnter(b,c,d)!==false){if(b.isNotifyTarget){var a=b.notifyEnter(this,c,this.dragData);this.proxy.setStatus(a)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(b,c,d)}}},beforeDragEnter:function(b,a,c){return true},alignElWithMouse:function(){this.callParent(arguments);this.proxy.sync()},onDragOver:function(c,d){var b=this.cachedTarget||Ext.dd.DragDropManager.getDDById(d);if(this.beforeDragOver(b,c,d)!==false){if(b.isNotifyTarget){var a=b.notifyOver(this,c,this.dragData);this.proxy.setStatus(a)}if(this.afterDragOver){this.afterDragOver(b,c,d)}}},beforeDragOver:function(b,a,c){return true},onDragOut:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragOut(a,b,c)!==false){if(a.isNotifyTarget){a.notifyOut(this,b,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,b,c)}}this.cachedTarget=null},beforeDragOut:function(b,a,c){return true},onDragDrop:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragDrop(a,b,c)!==false){if(a.isNotifyTarget){if(a.notifyDrop(this,b,this.dragData)!==false){this.onValidDrop(a,b,c)}else{this.onInvalidDrop(a,b,c)}}else{this.onValidDrop(a,b,c)}if(this.afterDragDrop){this.afterDragDrop(a,b,c)}}delete this.cachedTarget},beforeDragDrop:function(b,a,c){return true},onValidDrop:function(b,a,c){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(b,a,c)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(b,a,c){this.beforeInvalidDrop(b,a,c);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,a,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(a,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(a,c)}},afterRepair:function(){var a=this;if(Ext.enableFx){a.el.highlight(a.repairHighlightColor)}a.dragging=false},beforeInvalidDrop:function(b,a,c){return true},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==false){this.dragData=a;this.proxy.stop();this.callParent(arguments)}},onBeforeDrag:function(a,b){return true},onStartDrag:Ext.emptyFn,startDrag:function(a,b){this.proxy.reset();this.dragging=true;this.proxy.update("");this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(a,c){var b=this.el.dom.cloneNode(true);b.id=Ext.id();this.proxy.update(b);this.onStartDrag(a,c);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){this.callParent();Ext.destroy(this.proxy)}});Ext.define("Ext.panel.DD",{extend:"Ext.dd.DragSource",requires:["Ext.panel.Proxy"],constructor:function(b,a){this.panel=b;this.dragData={panel:b};this.proxy=Ext.create("Ext.panel.Proxy",b,a);this.callParent([b.el,a]);Ext.defer(function(){var d=b.header,c=b.body;if(d){this.setHandleElId(d.id);c=d.el}c.setStyle("cursor","move");this.scroll=false},200,this)},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.proxy.show()},b4MouseDown:function(b){var a=b.getPageX(),c=b.getPageY();this.autoOffset(a,c)},onInitDrag:function(a,b){this.onStartDrag(a,b);return true},createFrame:Ext.emptyFn,getDragEl:function(a){return this.proxy.ghost.el.dom},endDrag:function(a){this.proxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)}});Ext.define("Ext.layout.component.Dock",{alias:["layout.dock"],extend:"Ext.layout.component.AbstractDock"});Ext.define("Ext.panel.Panel",{extend:"Ext.panel.AbstractPanel",requires:["Ext.panel.Header","Ext.fx.Anim","Ext.util.KeyMap","Ext.panel.DD","Ext.XTemplate","Ext.layout.component.Dock","Ext.util.Memento"],alias:"widget.panel",alternateClassName:"Ext.Panel",collapsedCls:"collapsed",animCollapse:Ext.enableFx,minButtonWidth:75,collapsed:false,collapseFirst:true,hideCollapseTool:false,titleCollapse:false,floatable:true,collapsible:false,closable:false,closeAction:"destroy",preventHeader:false,headerPosition:"top",frame:false,frameHeader:true,initComponent:function(){var b=this,a;b.addEvents("beforeclose","beforeexpand","beforecollapse","expand","collapse","titlechange","iconchange");this.addStateEvents("expand","collapse");if(b.unstyled){b.setUI("plain")}if(b.frame){b.setUI(b.ui+"-framed")}b.bridgeToolbars();b.callParent();b.collapseDirection=b.collapseDirection||b.headerPosition||Ext.Component.DIRECTION_TOP},setBorder:function(a){this.callParent(arguments)},beforeDestroy:function(){Ext.destroy(this.ghostPanel,this.dd);this.callParent()},initAria:function(){this.callParent();this.initHeaderAria()},initHeaderAria:function(){var b=this,a=b.el,c=b.header;if(a&&c){a.dom.setAttribute("aria-labelledby",c.titleCmp.id)}},getHeader:function(){return this.header},setTitle:function(c){var b=this,a=this.title;b.title=c;if(b.header){b.header.setTitle(c)}else{b.updateHeader()}if(b.reExpander){b.reExpander.setTitle(c)}b.fireEvent("titlechange",b,c,a)},setIconCls:function(a){var c=this,b=c.iconCls;c.iconCls=a;var d=c.header;if(d){d.setIconCls(a)}c.fireEvent("iconchange",c,a,b)},bridgeToolbars:function(){var a=this,g=[],c,b,e=a.minButtonWidth;function d(h,k,j){if(Ext.isArray(h)){h={xtype:"toolbar",items:h}}else{if(!h.xtype){h.xtype="toolbar"}}h.dock=k;if(k=="left"||k=="right"){h.vertical=true}if(j){h.layout=Ext.applyIf(h.layout||{},{pack:{left:"start",center:"center"}[a.buttonAlign]||"end"})}return h}if(a.tbar){g.push(d(a.tbar,"top"));a.tbar=null}if(a.bbar){g.push(d(a.bbar,"bottom"));a.bbar=null}if(a.buttons){a.fbar=a.buttons;a.buttons=null}if(a.fbar){c=d(a.fbar,"bottom",true);c.ui="footer";if(e){b=c.defaults;c.defaults=function(h){var j=b||{};if((!h.xtype||h.xtype==="button"||(h.isComponent&&h.isXType("button")))&&!("minWidth" in j)){j=Ext.apply({minWidth:e},j)}return j}}g.push(c);a.fbar=null}if(a.lbar){g.push(d(a.lbar,"left"));a.lbar=null}if(a.rbar){g.push(d(a.rbar,"right"));a.rbar=null}if(a.dockedItems){if(!Ext.isArray(a.dockedItems)){a.dockedItems=[a.dockedItems]}a.dockedItems=a.dockedItems.concat(g)}else{a.dockedItems=g}},initTools:function(){var a=this;a.tools=a.tools?Ext.Array.clone(a.tools):[];if(a.collapsible&&!(a.hideCollapseTool||a.header===false)){a.collapseDirection=a.collapseDirection||a.headerPosition||"top";a.collapseTool=a.expandTool=a.createComponent({xtype:"tool",type:"collapse-"+a.collapseDirection,expandType:a.getOppositeDirection(a.collapseDirection),handler:a.toggleCollapse,scope:a});if(a.collapseFirst){a.tools.unshift(a.collapseTool)}}a.addTools();if(a.closable){a.addClsWithUI("closable");a.addTool({type:"close",handler:Ext.Function.bind(a.close,this,[])})}if(a.collapseTool&&!a.collapseFirst){a.tools.push(a.collapseTool)}},addTools:Ext.emptyFn,close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},onRender:function(b,a){var d=this,c;d.initTools();d.updateHeader();d.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments);if(a.collapsed){a.collapsed=false;a.collapse(null,false,true)}},updateHeader:function(b){var a=this,e=a.header,d=a.title,c=a.tools;if(!a.preventHeader&&(b||d||(c&&c.length))){if(!e){e=a.header=Ext.create("Ext.panel.Header",{title:d,orientation:(a.headerPosition=="left"||a.headerPosition=="right")?"vertical":"horizontal",dock:a.headerPosition||"top",textCls:a.headerTextCls,iconCls:a.iconCls,baseCls:a.baseCls+"-header",tools:c,ui:a.ui,indicateDrag:a.draggable,border:a.border,frame:a.frame&&a.frameHeader,ignoreParentFrame:a.frame||a.overlapHeader,ignoreBorderManagement:a.frame||a.ignoreHeaderBorderManagement,listeners:a.collapsible&&a.titleCollapse?{click:a.toggleCollapse,scope:a}:null});a.addDocked(e,0);a.tools=e.tools}e.show();a.initHeaderAria()}else{if(e){e.hide()}}},setUI:function(b){var a=this;a.callParent(arguments);if(a.header){a.header.setUI(b)}},getContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},isVisible:function(a){var b=this;if(b.collapsed&&b.placeholder){return b.placeholder.isVisible(a)}return b.callParent(arguments)},onHide:function(){var a=this;if(a.collapsed&&a.placeholder){a.placeholder.hide()}else{a.callParent(arguments)}},onShow:function(){var a=this;if(a.collapsed&&a.placeholder){a.hidden=true;a.placeholder.show()}else{a.callParent(arguments)}},addTool:function(a){var b=this,c=b.header;if(Ext.isArray(a)){Ext.each(a,b.addTool,b);return}b.tools.push(a);if(c){c.addTool(a)}b.updateHeader()},getOppositeDirection:function(a){var b=Ext.Component;switch(a){case b.DIRECTION_TOP:return b.DIRECTION_BOTTOM;case b.DIRECTION_RIGHT:return b.DIRECTION_LEFT;case b.DIRECTION_BOTTOM:return b.DIRECTION_TOP;case b.DIRECTION_LEFT:return b.DIRECTION_RIGHT}},collapse:function(x,g,j){var y=this,w=Ext.Component,k=y.getHeight(),m=y.getWidth(),z,a=0,t=y.dockedItems.items,u=t.length,r=0,v,h,q={from:{height:k,width:m},to:{height:k,width:m},listeners:{afteranimate:y.afterCollapse,scope:y},duration:Ext.Number.from(g,Ext.fx.Anim.prototype.duration)},e,d,n,b,p;if(!x){x=y.collapseDirection}if(j){g=false}else{if(y.collapsed||y.fireEvent("beforecollapse",y,x,g)===false){return false}}n=x;y.expandDirection=y.getOppositeDirection(x);y.hiddenDocked=[];switch(x){case w.DIRECTION_TOP:case w.DIRECTION_BOTTOM:d="horizontal";p="height";b="getHeight";for(;r<u;r++){v=t[r];if(v.isVisible()){if(v.isXType("header",true)&&(!v.dock||v.dock=="top"||v.dock=="bottom")){e=v}else{y.hiddenDocked.push(v)}}else{if(v===y.reExpander){e=v}}}if(x==Ext.Component.DIRECTION_BOTTOM){h=y.getPosition()[1]-Ext.fly(y.el.dom.offsetParent).getRegion().top;q.from.top=h}break;case w.DIRECTION_LEFT:case w.DIRECTION_RIGHT:d="vertical";p="width";b="getWidth";for(;r<u;r++){v=t[r];if(v.isVisible()){if(v.isHeader&&(v.dock=="left"||v.dock=="right")){e=v}else{y.hiddenDocked.push(v)}}else{if(v===y.reExpander){e=v}}}if(x==Ext.Component.DIRECTION_RIGHT){h=y.getPosition()[0]-Ext.fly(y.el.dom.offsetParent).getRegion().left;q.from.left=h}break;default:throw ("Panel collapse must be passed a valid Component collapse direction")}if(g&&y.collapseTool){y.collapseTool.disable()}y.addClsWithUI(y.collapsedCls);if(e&&e.rendered){e.addClsWithUI(y.collapsedCls);e.addClsWithUI(y.collapsedCls+"-"+e.dock);if(y.border&&(!y.frame||(y.frame&&Ext.supports.CSS3BorderRadius))){e.addClsWithUI(y.collapsedCls+"-border-"+e.dock)}z=e.getFrameInfo();a=e[b]()+(z?z[x]:0);e.removeClsWithUI(y.collapsedCls);e.removeClsWithUI(y.collapsedCls+"-"+e.dock);if(y.border&&(!y.frame||(y.frame&&Ext.supports.CSS3BorderRadius))){e.removeClsWithUI(y.collapsedCls+"-border-"+e.dock)}}else{e={hideMode:"offsets",temporary:true,title:y.title,orientation:d,dock:n,textCls:y.headerTextCls,iconCls:y.iconCls,baseCls:y.baseCls+"-header",ui:y.ui,frame:y.frame&&y.frameHeader,ignoreParentFrame:y.frame||y.overlapHeader,indicateDrag:y.draggable,cls:y.baseCls+"-collapsed-placeholder  "+Ext.baseCSSPrefix+"docked "+y.baseCls+"-"+y.ui+"-collapsed",renderTo:y.el};if(!y.hideCollapseTool){e[(e.orientation=="horizontal")?"tools":"items"]=[{xtype:"tool",type:"expand-"+y.expandDirection,handler:y.toggleCollapse,scope:y}]}e=y.reExpander=Ext.create("Ext.panel.Header",e);a=e[b]()+((e.frame)?e.frameSize[x]:0);e.hide();y.insertDocked(0,e)}y.reExpander=e;y.reExpander.addClsWithUI(y.collapsedCls);y.reExpander.addClsWithUI(y.collapsedCls+"-"+e.dock);if(y.border&&(!y.frame||(y.frame&&Ext.supports.CSS3BorderRadius))){y.reExpander.addClsWithUI(y.collapsedCls+"-border-"+y.reExpander.dock)}if(x==Ext.Component.DIRECTION_RIGHT){q.to.left=h+(m-a)}else{if(x==Ext.Component.DIRECTION_BOTTOM){q.to.top=h+(k-a)}}q.to[p]=a;if(!y.collapseMemento){y.collapseMemento=new Ext.util.Memento(y)}y.collapseMemento.capture(["width","height","minWidth","minHeight","layoutManagedHeight","layoutManagedWidth"]);y.savedFlex=y.flex;y.minWidth=0;y.minHeight=0;delete y.flex;y.suspendLayout=true;if(g){y.animate(q)}else{y.setSize(q.to.width,q.to.height);if(Ext.isDefined(q.to.left)||Ext.isDefined(q.to.top)){y.setPosition(q.to.left,q.to.top)}y.afterCollapse(false,j)}return y},afterCollapse:function(e,b){var d=this,c=0,a=d.hiddenDocked.length;d.collapseMemento.restore(["minWidth","minHeight"]);if(Ext.Component.VERTICAL_DIRECTION_Re.test(d.expandDirection)){d.layoutManagedHeight=2;d.collapseMemento.restore("width",false)}else{d.layoutManagedWidth=2;d.collapseMemento.restore("height",false)}d.saveScrollTop=d.body.dom.scrollTop;d.body.setStyle("display","none");for(;c<a;c++){d.hiddenDocked[c].hide()}if(d.reExpander){d.reExpander.updateFrame();d.reExpander.show()}d.collapsed=true;d.suspendLayout=false;if(!b){if(d.ownerCt){if(e){d.ownerCt.layout.layout()}}else{if(d.reExpander.temporary){d.doComponentLayout()}}}if(d.resizer){d.resizer.disable()}if(d.collapseTool){d.collapseTool.setType("expand-"+d.expandDirection)}if(!b){d.fireEvent("collapse",d)}if(e&&d.collapseTool){d.collapseTool.enable()}},expand:function(b){var g=this;if(!g.collapsed||g.fireEvent("beforeexpand",g,b)===false){return false}var e=0,c=g.hiddenDocked.length,j=g.expandDirection,k=g.getHeight(),a=g.getWidth(),h,d;if(b&&g.collapseTool){g.collapseTool.disable()}for(;e<c;e++){g.hiddenDocked[e].hidden=false;g.hiddenDocked[e].el.show()}if(g.reExpander){if(g.reExpander.temporary){g.reExpander.hide()}else{g.reExpander.removeClsWithUI(g.collapsedCls);g.reExpander.removeClsWithUI(g.collapsedCls+"-"+g.reExpander.dock);if(g.border&&(!g.frame||(g.frame&&Ext.supports.CSS3BorderRadius))){g.reExpander.removeClsWithUI(g.collapsedCls+"-border-"+g.reExpander.dock)}g.reExpander.updateFrame()}}if(g.collapseTool){g.collapseTool.setType("collapse-"+g.collapseDirection)}g.body.setStyle("display","");g.body.dom.scrollTop=g.saveScrollTop;g.collapsed=false;g.removeClsWithUI(g.collapsedCls);d={to:{},from:{height:k,width:a},listeners:{afteranimate:g.afterExpand,scope:g}};if((j==Ext.Component.DIRECTION_TOP)||(j==Ext.Component.DIRECTION_BOTTOM)){g.collapseMemento.restore("height",false);if(g.height===undefined){g.setCalculatedSize(g.width,null);d.to.height=g.getHeight();g.setCalculatedSize(g.width,d.from.height)}else{if(g.savedFlex){g.flex=g.savedFlex;d.to.height=g.ownerCt.layout.calculateChildBox(g).height;delete g.flex}else{d.to.height=g.height}}if(j==Ext.Component.DIRECTION_TOP){h=g.getPosition()[1]-Ext.fly(g.el.dom.offsetParent).getRegion().top;d.from.top=h;d.to.top=h-(d.to.height-k)}}else{if((j==Ext.Component.DIRECTION_LEFT)||(j==Ext.Component.DIRECTION_RIGHT)){g.collapseMemento.restore("width",false);if(g.width===undefined){g.setCalculatedSize(null,g.height);d.to.width=g.getWidth();g.setCalculatedSize(d.from.width,g.height)}else{if(g.savedFlex){g.flex=g.savedFlex;d.to.width=g.ownerCt.layout.calculateChildBox(g).width;delete g.flex}else{d.to.width=g.width}}if(j==Ext.Component.DIRECTION_LEFT){h=g.getPosition()[0]-Ext.fly(g.el.dom.offsetParent).getRegion().left;d.from.left=h;d.to.left=h-(d.to.width-a)}}}if(b){g.animate(d)}else{g.setCalculatedSize(d.to.width,d.to.height);if(d.to.x){g.setLeft(d.to.x)}if(d.to.y){g.setTop(d.to.y)}g.afterExpand(false)}return g},afterExpand:function(b){var a=this;if(a.savedFlex){a.flex=a.savedFlex;delete a.savedFlex;delete a.width;delete a.height}if(a.collapseMemento){a.collapseMemento.restoreAll()}if(b&&a.ownerCt){Ext.defer(a.ownerCt.doLayout,Ext.isIE6?1:0,a)}if(a.resizer){a.resizer.enable()}a.fireEvent("expand",a);if(b&&a.collapseTool){a.collapseTool.enable()}},toggleCollapse:function(){if(this.collapsed){this.expand(this.animCollapse)}else{this.collapse(this.collapseDirection,this.animCollapse)}return this},getKeyMap:function(){if(!this.keyMap){this.keyMap=Ext.create("Ext.util.KeyMap",this.el,this.keys)}return this.keyMap},initDraggable:function(){this.dd=Ext.create("Ext.panel.DD",this,Ext.isBoolean(this.draggable)?null:this.draggable)},ghostTools:function(){var b=[],a=this.header.query("tool[hidden=false]");if(a.length){Ext.each(a,function(c){b.push({type:c.type})})}else{b=[{type:"placeholder"}]}return b},ghost:function(a){var d=this,b=d.ghostPanel,c=d.getBox(),e;if(!b){b=Ext.create("Ext.panel.Panel",{renderTo:d.floating?d.el.dom.parentNode:document.body,floating:{shadow:false},frame:Ext.supports.CSS3BorderRadius?d.frame:false,overlapHeader:d.overlapHeader,headerPosition:d.headerPosition,baseCls:d.baseCls,cls:d.baseCls+"-ghost "+(a||"")});d.ghostPanel=b}b.floatParent=d.floatParent;if(d.floating){b.setZIndex(Ext.Number.from(d.el.getStyle("zIndex"),0))}else{b.toFront()}e=b.header;if(e){e.suspendLayout=true;Ext.Array.forEach(e.query("tool"),function(g){e.remove(g)});e.suspendLayout=false}b.addTool(d.ghostTools());b.setTitle(d.title);b.setIconCls(d.iconCls);b.el.show();b.setPosition(c.x,c.y);b.setSize(c.width,c.height);d.el.hide();if(d.floatingItems){d.floatingItems.hide()}return b},unghost:function(b,a){var c=this;if(!c.ghostPanel){return}if(b!==false){c.el.show();if(a!==false){c.setPosition(c.ghostPanel.getPosition())}if(c.floatingItems){c.floatingItems.show()}Ext.defer(c.focus,10,c)}c.ghostPanel.el.hide()},initResizable:function(a){if(this.collapsed){a.disabled=true}this.callParent([a])}},function(){this.prototype.animCollapse=Ext.enableFx});Ext.define("Ext.layout.component.Tip",{alias:["layout.tip"],extend:"Ext.layout.component.Dock",type:"tip",onLayout:function(b,k){var h=this,c=h.owner,d=c.el,a,j,g,e,m=d.getXY();d.setXY([-9999,-9999]);this.callParent(arguments);if(!Ext.isNumber(b)){a=c.minWidth;j=c.maxWidth;if(Ext.isStrict&&(Ext.isIE6||Ext.isIE7)){e=h.doAutoWidth()}else{g=d.getWidth()}if(g<a){e=a}else{if(g>j){e=j}}if(e){this.callParent([e,k])}}d.setXY(m)},doAutoWidth:function(){var d=this,b=d.owner,a=b.body,c=a.getTextWidth();if(b.header){c=Math.max(c,b.header.getWidth())}if(!Ext.isDefined(d.frameWidth)){d.frameWidth=b.el.getWidth()-a.getWidth()}c+=d.frameWidth+a.getPadding("lr");return c}});Ext.define("Ext.tip.Tip",{extend:"Ext.panel.Panel",requires:["Ext.layout.component.Tip"],alternateClassName:"Ext.Tip",minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,frame:false,autoRender:true,hidden:true,baseCls:Ext.baseCSSPrefix+"tip",floating:{shadow:true,shim:true,constrain:true},focusOnToFront:false,componentLayout:"tip",closeAction:"hide",ariaRole:"tooltip",initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow},a.self.prototype.floating);a.callParent(arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;this.callParent(arguments);if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}},showBy:function(a,b){this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign))},initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.getScopeParent()};Ext.Component.prototype.initDraggable.call(a)},ghost:undefined,unghost:undefined});Ext.define("Ext.tip.ToolTip",{extend:"Ext.tip.Tip",alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,initComponent:function(){var a=this;a.callParent(arguments);a.lastActive=new Date();a.setTarget(a.target);a.origAnchor=a.anchor},onRender:function(b,a){var c=this;c.callParent(arguments);c.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+c.getAnchorPosition();c.anchorEl=c.el.createChild({cls:Ext.baseCSSPrefix+"tip-anchor "+c.anchorCls})},afterRender:function(){var a=this,b;a.callParent(arguments);b=parseInt(a.el.getZIndex(),10)||0;a.anchorEl.setStyle("z-index",b+1).setVisibilityMode(Ext.Element.DISPLAY)},setTarget:function(d){var b=this,a=Ext.get(d),c;if(b.target){c=Ext.get(b.target);b.mun(c,"mouseover",b.onTargetOver,b);b.mun(c,"mouseout",b.onTargetOut,b);b.mun(c,"mousemove",b.onMouseMove,b)}b.target=a;if(a){b.mon(a,{freezeEvent:true,mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}if(b.anchor){b.anchorTarget=b.target}},onMouseMove:function(d){var b=this,a=b.delegate?d.getTarget(b.delegate):b.triggerElement=true,c;if(a){b.targetXY=d.getXY();if(a===b.triggerElement){if(!b.hidden&&b.trackMouse){c=b.getTargetXY();if(b.constrainPosition){c=b.el.adjustForConstraints(c,b.el.getScopeParent())}b.setPagePosition(c)}}else{b.hide();b.lastActive=new Date(0);b.onTargetOver(d)}}else{if((!b.closable&&b.isVisible())&&b.autoHide!==false){b.hide()}}},getTargetXY:function(){var k=this,d;if(k.delegate){k.anchorTarget=k.triggerElement}if(k.anchor){k.targetCounter++;var c=k.getOffsets(),q=(k.anchorToTarget&&!k.trackMouse)?k.el.getAlignToXY(k.anchorTarget,k.getAnchorAlign()):k.targetXY,a=Ext.Element.getViewWidth()-5,j=Ext.Element.getViewHeight()-5,n=document.documentElement,e=document.body,p=(n.scrollLeft||e.scrollLeft||0)+5,m=(n.scrollTop||e.scrollTop||0)+5,b=[q[0]+c[0],q[1]+c[1]],h=k.getSize(),g=k.constrainPosition;k.anchorEl.removeCls(k.anchorCls);if(k.targetCounter<2&&g){if(b[0]<p){if(k.anchorToTarget){k.defaultAlign="l-r";if(k.mouseOffset){k.mouseOffset[0]*=-1}}k.anchor="left";return k.getTargetXY()}if(b[0]+h.width>a){if(k.anchorToTarget){k.defaultAlign="r-l";if(k.mouseOffset){k.mouseOffset[0]*=-1}}k.anchor="right";return k.getTargetXY()}if(b[1]<m){if(k.anchorToTarget){k.defaultAlign="t-b";if(k.mouseOffset){k.mouseOffset[1]*=-1}}k.anchor="top";return k.getTargetXY()}if(b[1]+h.height>j){if(k.anchorToTarget){k.defaultAlign="b-t";if(k.mouseOffset){k.mouseOffset[1]*=-1}}k.anchor="bottom";return k.getTargetXY()}}k.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+k.getAnchorPosition();k.anchorEl.addCls(k.anchorCls);k.targetCounter=0;return b}else{d=k.getMouseOffset();return(k.targetXY)?[k.targetXY[0]+d[0],k.targetXY[1]+d[1]]:d}},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];if(a.mouseOffset){b[0]+=a.mouseOffset[0];b[1]+=a.mouseOffset[1]}return b},getAnchorPosition:function(){var b=this,a;if(b.anchor){b.tipAnchor=b.anchor.charAt(0)}else{a=b.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);b.tipAnchor=a[1].charAt(0)}switch(b.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var c=this,d,b,a=c.getAnchorPosition().charAt(0);if(c.anchorToTarget&&!c.trackMouse){switch(a){case"t":b=[0,9];break;case"b":b=[0,-13];break;case"r":b=[-13,0];break;default:b=[9,0];break}}else{switch(a){case"t":b=[-15-c.anchorOffset,30];break;case"b":b=[-19-c.anchorOffset,-13-c.el.dom.offsetHeight];break;case"r":b=[-15-c.el.dom.offsetWidth,-13-c.anchorOffset];break;default:b=[25,-13-c.anchorOffset];break}}d=c.getMouseOffset();b[0]+=d[0];b[1]+=d[1];return b},onTargetOver:function(c){var b=this,a;if(b.disabled||c.within(b.target.dom,true)){return}a=c.getTarget(b.delegate);if(a){b.triggerElement=a;b.clearTimer("hide");b.targetXY=c.getXY();b.delayShow()}},delayShow:function(){var a=this;if(a.hidden&&!a.showTimer){if(Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval){a.show()}else{a.showTimer=Ext.defer(a.show,a.showDelay,a)}}else{if(!a.hidden&&a.autoHide!==false){a.show()}}},onTargetOut:function(b){var a=this;if(a.disabled||b.within(a.target.dom,true)){return}a.clearTimer("show");if(a.autoHide!==false){a.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.hideTimer=Ext.defer(a.hide,a.hideDelay,a)}},hide:function(){var a=this;a.clearTimer("dismiss");a.lastActive=new Date();if(a.anchorEl){a.anchorEl.hide()}a.callParent(arguments);delete a.triggerElement},show:function(){var a=this;this.callParent();if(this.hidden===false){a.setPagePosition(-10000,-10000);if(a.anchor){a.anchor=a.origAnchor}a.showAt(a.getTargetXY());if(a.anchor){a.syncAnchor();a.anchorEl.show()}else{a.anchorEl.hide()}}},showAt:function(b){var a=this;a.lastActive=new Date();a.clearTimers();if(!a.isVisible()){this.callParent(arguments)}if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}if(a.dismissDelay&&a.autoHide!==false){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}if(a.anchor){a.syncAnchor();if(!a.anchorEl.isVisible()){a.anchorEl.show()}}else{a.anchorEl.hide()}},syncAnchor:function(){var c=this,a,b,d;switch(c.tipAnchor.charAt(0)){case"t":a="b";b="tl";d=[20+c.anchorOffset,1];break;case"r":a="l";b="tr";d=[-1,12+c.anchorOffset];break;case"b":a="t";b="bl";d=[20+c.anchorOffset,-1];break;default:a="r";b="tl";d=[1,12+c.anchorOffset];break}c.anchorEl.alignTo(c.el,a+"-"+b,d)},setPagePosition:function(a,c){var b=this;b.callParent(arguments);if(b.anchor){b.syncAnchor()}},clearTimer:function(a){a=a+"Timer";clearTimeout(this[a]);delete this[a]},clearTimers:function(){var a=this;a.clearTimer("show");a.clearTimer("dismiss");a.clearTimer("hide")},onShow:function(){var a=this;a.callParent();a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;a.callParent();a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;if(a.autoHide!==true&&!a.closable&&!b.within(a.el.dom)){a.disable();Ext.defer(a.doEnable,100,a)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.callParent();this.clearTimers();this.hide()},beforeDestroy:function(){var a=this;a.clearTimers();Ext.destroy(a.anchorEl);delete a.anchorEl;delete a.target;delete a.anchorTarget;delete a.triggerElement;a.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);this.callParent()}});Ext.define("Ext.tip.QuickTip",{extend:"Ext.tip.ToolTip",alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){var a=this;a.target=a.target||Ext.getDoc();a.targets=a.targets||{};a.callParent()},register:function(c){var h=Ext.isArray(c)?c:arguments,d=0,a=h.length,g,b,e;for(;d<a;d++){c=h[d];g=c.target;if(g){if(Ext.isArray(g)){for(b=0,e=g.length;b<e;b++){this.targets[Ext.id(g[b])]=c}}else{this.targets[Ext.id(g)]=c}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this,c=b.activeTarget;a=Ext.get(a).dom;if(b.isVisible()){if(c&&c.el==a){b.hide()}}else{if(c&&c.el==a){b.clearTimer("show")}}},getTipCfg:function(d){var c=d.getTarget(),b=c.title,a;if(this.interceptTitles&&b&&Ext.isString(b)){c.qtip=b;c.removeAttribute("title");d.preventDefault();return{text:b}}else{a=this.tagConfig;c=d.getTarget("["+a.namespace+a.attribute+"]");if(c){return{target:c,text:c.getAttribute(a.namespace+a.attribute)}}}},onTargetOver:function(j){var g=this,h=j.getTarget(),k,c,d,b,a;if(g.disabled){return}g.targetXY=j.getXY();if(!h||h.nodeType!==1||h==document||h==document.body){return}if(g.activeTarget&&((h==g.activeTarget.el)||Ext.fly(g.activeTarget.el).contains(h))){g.clearTimer("hide");g.show();return}if(h){Ext.Object.each(g.targets,function(e,m){var n=Ext.fly(m.target);if(n&&(n.dom===h||n.contains(h))){k=n.dom;return false}});if(k){g.activeTarget=g.targets[k.id];g.activeTarget.el=h;g.anchor=g.activeTarget.anchor;if(g.anchor){g.anchorTarget=h}g.delayShow();return}}k=Ext.get(h);c=g.tagConfig;d=c.namespace;b=g.getTipCfg(j);if(b){if(b.target){h=b.target;k=Ext.get(h)}a=k.getAttribute(d+c.hide);g.activeTarget={el:h,text:b.text,width:+k.getAttribute(d+c.width)||null,autoHide:a!="user"&&a!=="false",title:k.getAttribute(d+c.title),cls:k.getAttribute(d+c.cls),align:k.getAttribute(d+c.align)};g.anchor=k.getAttribute(d+c.anchor);if(g.anchor){g.anchorTarget=h}g.delayShow()}},onTargetOut:function(b){var a=this;if(a.activeTarget&&b.within(a.activeTarget.el)&&!a.getTipCfg(b)){return}a.clearTimer("show");if(a.autoHide!==false){a.delayHide()}},showAt:function(c){var a=this,b=a.activeTarget;if(b){if(!a.rendered){a.render(Ext.getBody());a.activeTarget=b}if(b.title){a.setTitle(b.title||"");a.header.show()}else{a.header.hide()}a.body.update(b.text);a.autoHide=b.autoHide;a.dismissDelay=b.dismissDelay||a.dismissDelay;if(a.lastCls){a.el.removeCls(a.lastCls);delete a.lastCls}if(b.cls){a.el.addCls(b.cls);a.lastCls=b.cls}a.setWidth(b.width);if(a.anchor){a.constrainPosition=false}else{if(b.align){c=a.el.getAlignToXY(b.el,b.align);a.constrainPosition=false}else{a.constrainPosition=true}}}a.callParent([c])},hide:function(){delete this.activeTarget;this.callParent()}});Ext.define("Ext.tip.QuickTipManager",function(){var b,a=false;return{requires:["Ext.tip.QuickTip"],singleton:true,alternateClassName:"Ext.QuickTips",init:function(g,d){if(!b){if(!Ext.isReady){Ext.onReady(function(){Ext.tip.QuickTipManager.init(g)});return}var c=Ext.apply({disabled:a},d),e=c.className,h=c.xtype;if(e){delete c.className}else{if(h){e="widget."+h;delete c.xtype}}if(g!==false){c.renderTo=document.body}b=Ext.create(e||"Ext.tip.QuickTip",c)}},destroy:function(){if(b){var c;b.destroy();b=c}},ddDisable:function(){if(b&&!a){b.disable()}},ddEnable:function(){if(b&&!a){b.enable()}},enable:function(){if(b){b.enable()}a=false},disable:function(){if(b){b.disable()}a=true},isEnabled:function(){return b!==undefined&&!b.disabled},getQuickTip:function(){return b},register:function(){b.register.apply(b,arguments)},unregister:function(){b.unregister.apply(b,arguments)},tips:function(){b.register.apply(b,arguments)}}}());Ext.define("Ext.app.Application",{extend:"Ext.app.Controller",requires:["Ext.ModelManager","Ext.data.Model","Ext.data.StoreManager","Ext.tip.QuickTipManager","Ext.ComponentManager","Ext.app.EventBus"],scope:undefined,enableQuickTips:true,appFolder:"app",autoCreateViewport:false,constructor:function(b){b=b||{};Ext.apply(this,b);var d=b.requires||[];Ext.Loader.setPath(this.name,this.appFolder);if(this.paths){Ext.Object.each(this.paths,function(h,j){Ext.Loader.setPath(h,j)})}this.callParent(arguments);this.eventbus=Ext.create("Ext.app.EventBus");var g=Ext.Array.from(this.controllers),e=g&&g.length,c,a;this.controllers=Ext.create("Ext.util.MixedCollection");if(this.autoCreateViewport){d.push(this.getModuleClassName("Viewport","view"))}for(c=0;c<e;c++){d.push(this.getModuleClassName(g[c],"controller"))}Ext.require(d);Ext.onReady(function(){for(c=0;c<e;c++){a=this.getController(g[c]);a.init(this)}this.onBeforeLaunch.call(this)},this)},control:function(b,c,a){this.eventbus.control(b,c,a)},launch:Ext.emptyFn,onBeforeLaunch:function(){if(this.enableQuickTips){Ext.tip.QuickTipManager.init()}if(this.autoCreateViewport){this.getView("Viewport").create()}this.launch.call(this.scope||this);this.launched=true;this.fireEvent("launch",this);this.controllers.each(function(a){a.onLaunch(this)},this)},getModuleClassName:function(a,c){var b=Ext.Loader.getPrefix(a);if(b.length>0&&b!==a){return a}return this.name+"."+c+"."+a},getController:function(b){var a=this.controllers.get(b);if(!a){a=Ext.create(this.getModuleClassName(b,"controller"),{application:this,id:b});this.controllers.add(a)}return a},getStore:function(b){var a=Ext.StoreManager.get(b);if(!a){a=Ext.create(this.getModuleClassName(b,"store"),{storeId:b})}return a},getModel:function(a){a=this.getModuleClassName(a,"model");return Ext.ModelManager.getModel(a)},getView:function(a){a=this.getModuleClassName(a,"view");return Ext.ClassManager.get(a)}});Ext.define("Ext.chart.Callout",{constructor:function(a){if(a.callouts){a.callouts.styles=Ext.applyIf(a.callouts.styles||{},{color:"#000",font:"11px Helvetica, sans-serif"});this.callouts=Ext.apply(this.callouts||{},a.callouts);this.calloutsArray=[]}},renderCallouts:function(){if(!this.callouts){return}var y=this,n=y.items,a=y.chart.animate,x=y.callouts,h=x.styles,e=y.calloutsArray,b=y.chart.store,v=b.getCount(),d=n.length/v,m=[],u,c,t,q;for(u=0,c=0;u<v;u++){for(t=0;t<d;t++){var w=n[c],g=e[c],k=b.getAt(u),r;r=x.filter(k);if(!r&&!g){c++;continue}if(!g){e[c]=g=y.onCreateCallout(k,w,u,r,t,c)}for(q in g){if(g[q]&&g[q].setAttributes){g[q].setAttributes(h,true)}}if(!r){for(q in g){if(g[q]){if(g[q].setAttributes){g[q].setAttributes({hidden:true},true)}else{if(g[q].setVisible){g[q].setVisible(false)}}}}}x.renderer(g,k);y.onPlaceCallout(g,k,w,u,r,a,t,c,m);m.push(g);c++}}this.hideCallouts(c)},onCreateCallout:function(g,p,e,j){var k=this,m=k.calloutsGroup,d=k.callouts,q=d.styles,c=q.width,n=q.height,h=k.chart,b=h.surface,a={lines:false};a.lines=b.add(Ext.apply({},{type:"path",path:"M0,0",stroke:k.getLegendColor()||"#555"},q));if(d.items){a.panel=Ext.create("widget.panel",{style:"position: absolute;",width:c,height:n,items:d.items,renderTo:h.el})}return a},hideCallouts:function(b){var d=this.calloutsArray,a=d.length,e,c;while(a-->b){e=d[a];for(c in e){if(e[c]){e[c].hide(true)}}}}});Ext.define("Ext.draw.CompositeSprite",{extend:"Ext.util.MixedCollection",mixins:{animate:"Ext.util.Animate"},isCompositeSprite:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.addEvents("mousedown","mouseup","mouseover","mouseout","click");b.id=Ext.id(null,"ext-sprite-group-");b.callParent()},onClick:function(a){this.fireEvent("click",a)},onMouseUp:function(a){this.fireEvent("mouseup",a)},onMouseDown:function(a){this.fireEvent("mousedown",a)},onMouseOver:function(a){this.fireEvent("mouseover",a)},onMouseOut:function(a){this.fireEvent("mouseout",a)},attachEvents:function(b){var a=this;b.on({scope:a,mousedown:a.onMouseDown,mouseup:a.onMouseUp,mouseover:a.onMouseOver,mouseout:a.onMouseOut,click:a.onClick})},add:function(b,c){var a=this.callParent(arguments);this.attachEvents(a);return a},insert:function(a,b,c){return this.callParent(arguments)},remove:function(b){var a=this;b.un({scope:a,mousedown:a.onMouseDown,mouseup:a.onMouseUp,mouseover:a.onMouseOver,mouseout:a.onMouseOut,click:a.onClick});return a.callParent(arguments)},getBBox:function(){var e=0,p,j,k=this.items,g=this.length,h=Infinity,c=h,n=-h,b=h,m=-h,d,a;for(;e<g;e++){p=k[e];if(p.el){j=p.getBBox();c=Math.min(c,j.x);b=Math.min(b,j.y);n=Math.max(n,j.height+j.y);m=Math.max(m,j.width+j.x)}}return{x:c,y:b,height:n-b,width:m-c}},setAttributes:function(c,e){var d=0,b=this.items,a=this.length;for(;d<a;d++){b[d].setAttributes(c,e)}return this},hide:function(d){var c=0,b=this.items,a=this.length;for(;c<a;c++){b[c].hide(d)}return this},show:function(d){var c=0,b=this.items,a=this.length;for(;c<a;c++){b[c].show(d)}return this},redraw:function(){var e=this,d=0,c=e.items,b=e.getSurface(),a=e.length;if(b){for(;d<a;d++){b.renderItem(c[d])}}return e},setStyle:function(g){var c=0,b=this.items,a=this.length,e,d;for(;c<a;c++){e=b[c];d=e.el;if(d){d.setStyle(g)}}},addCls:function(e){var d=0,c=this.items,b=this.getSurface(),a=this.length;if(b){for(;d<a;d++){b.addCls(c[d],e)}}},removeCls:function(e){var d=0,c=this.items,b=this.getSurface(),a=this.length;if(b){for(;d<a;d++){b.removeCls(c[d],e)}}},getSurface:function(){var a=this.first();if(a){return a.surface}return null},destroy:function(){var c=this,a=c.getSurface(),b;if(a){while(c.getCount()>0){b=c.first();c.remove(b);a.remove(b)}}c.clearListeners()}});Ext.define("Ext.layout.component.Auto",{alias:"layout.autocomponent",extend:"Ext.layout.component.Component",type:"autocomponent",onLayout:function(b,a){this.setTargetSize(b,a)}});Ext.define("Ext.chart.theme.Theme",{requires:["Ext.draw.Color"],theme:"Base",themeAttrs:false,initTheme:function(e){var d=this,b=Ext.chart.theme,c,a;if(e){e=e.split(":");for(c in b){if(c==e[0]){a=e[1]=="gradients";d.themeAttrs=new b[c]({useGradients:a});if(a){d.gradients=d.themeAttrs.gradients}if(d.themeAttrs.background){d.background=d.themeAttrs.background}return}}}}},function(){(function(){Ext.chart.theme=function(c,b){c=c||{};var k=0,h,a,j,q,r,e,n,p,m=[],d,g;if(c.baseColor){d=Ext.draw.Color.fromString(c.baseColor);g=d.getHSL()[2];if(g<0.15){d=d.getLighter(0.3)}else{if(g<0.3){d=d.getLighter(0.15)}else{if(g>0.85){d=d.getDarker(0.3)}else{if(g>0.7){d=d.getDarker(0.15)}}}}c.colors=[d.getDarker(0.3).toString(),d.getDarker(0.15).toString(),d.toString(),d.getLighter(0.15).toString(),d.getLighter(0.3).toString()];delete c.baseColor}if(c.colors){a=c.colors.slice();r=b.markerThemes;q=b.seriesThemes;h=a.length;b.colors=a;for(;k<h;k++){j=a[k];n=r[k]||{};e=q[k]||{};n.fill=e.fill=n.stroke=e.stroke=j;r[k]=n;q[k]=e}b.markerThemes=r.slice(0,h);b.seriesThemes=q.slice(0,h)}for(p in b){if(p in c){if(Ext.isObject(c[p])&&Ext.isObject(b[p])){Ext.apply(b[p],c[p])}else{b[p]=c[p]}}}if(c.useGradients){a=b.colors||(function(){var t=[];for(k=0,q=b.seriesThemes,h=q.length;k<h;k++){t.push(q[k].fill||q[k].stroke)}return t})();for(k=0,h=a.length;k<h;k++){d=Ext.draw.Color.fromString(a[k]);if(d){j=d.getDarker(0.1).toString();d=d.toString();p="theme-"+d.substr(1)+"-"+j.substr(1);m.push({id:p,angle:45,stops:{0:{color:d.toString()},100:{color:j.toString()}}});a[k]="url(#"+p+")"}}b.gradients=m;b.colors=a}Ext.apply(this,b)}})()});Ext.define("Ext.chart.Mask",{require:["Ext.chart.MaskLayer"],constructor:function(a){var b=this;b.addEvents("select");if(a){Ext.apply(b,a)}if(b.mask){b.on("afterrender",function(){var c=Ext.create("Ext.chart.MaskLayer",{renderTo:b.el});c.el.on({mousemove:function(g){b.onMouseMove(g)},mouseup:function(g){b.resized(g)}});var d=Ext.create("Ext.resizer.Resizer",{el:c.el,handles:"all",pinned:true});d.on({resize:function(g){b.resized(g)}});c.initDraggable();b.maskType=b.mask;b.mask=c;b.maskSprite=b.surface.add({type:"path",path:["M",0,0],zIndex:1001,opacity:0.7,hidden:true,stroke:"#444"})},b,{single:true})}},resized:function(d){var g=this,n=g.bbox||g.chartBBox,k=n.x,j=n.y,a=n.width,p=n.height,c=g.mask.getBox(true),h=Math.max,b=Math.min,q=c.x-k,m=c.y-j;q=h(q,k);m=h(m,j);q=b(q,a);m=b(m,p);c.x=q;c.y=m;g.fireEvent("select",g,c)},onMouseUp:function(c){var a=this,d=a.bbox||a.chartBBox,b=a.maskSelection;a.maskMouseDown=false;a.mouseDown=false;if(a.mouseMoved){a.onMouseMove(c);a.mouseMoved=false;a.fireEvent("select",a,{x:b.x-d.x,y:b.y-d.y,width:b.width,height:b.height})}},onMouseDown:function(b){var a=this;a.mouseDown=true;a.mouseMoved=false;a.maskMouseDown={x:b.getPageX()-a.el.getX(),y:b.getPageY()-a.el.getY()}},onMouseMove:function(z){var A=this,r=A.maskType,a=A.bbox||A.chartBBox,j=a.x,h=a.y,b=Math,u=b.floor,k=b.abs,q=b.min,t=b.max,m=u(h+a.height),p=u(j+a.width),d=z.getPageX(),c=z.getPageY(),w=d-A.el.getX(),v=c-A.el.getY(),g=A.maskMouseDown,n;A.mouseMoved=A.mouseDown;w=t(w,j);v=t(v,h);w=q(w,p);v=q(v,m);if(g&&A.mouseDown){if(r=="horizontal"){v=h;g.y=m;c=A.el.getY()+a.height+A.insetPadding}else{if(r=="vertical"){w=j;g.x=p}}p=g.x-w;m=g.y-v;n=["M",w,v,"l",p,0,0,m,-p,0,"z"];A.maskSelection={x:p>0?w:w+p,y:m>0?v:v+m,width:k(p),height:k(m)};A.mask.updateBox(A.maskSelection);A.mask.show();A.maskSprite.setAttributes({hidden:true},true)}else{if(r=="horizontal"){n=["M",w,h,"L",w,m]}else{if(r=="vertical"){n=["M",j,v,"L",p,v]}else{n=["M",w,h,"L",w,m,"M",j,v,"L",p,v]}}A.maskSprite.setAttributes({path:n,fill:A.maskMouseDown?A.maskSprite.stroke:false,"stroke-width":r===true?1:3,hidden:false},true)}},onMouseLeave:function(b){var a=this;a.mouseMoved=false;a.mouseDown=false;a.maskMouseDown=false;a.mask.hide();a.maskSprite.hide(true)}});Ext.define("Ext.chart.Navigation",{constructor:function(){this.originalStore=this.store},setZoom:function(a){var c=this,g=c.axes,h=c.chartBBox,e=1/h.width,b=1/h.height,d={x:a.x*e,y:a.y*b,width:a.width*e,height:a.height*b};g.each(function(k){var j=k.calcEnds();if(k.position=="bottom"||k.position=="top"){var n=(j.to-j.from)*d.x+j.from,m=(j.to-j.from)*d.width+n;k.minimum=n;k.maximum=m}else{var m=(j.to-j.from)*(1-d.y)+j.from,n=m-(j.to-j.from)*d.height;k.minimum=n;k.maximum=m}});c.redraw(false)},restoreZoom:function(){this.store=this.substore=this.originalStore;this.redraw(true)}});Ext.define("Ext.chart.Shape",{singleton:true,circle:function(a,b){return a.add(Ext.apply({type:"circle",x:b.x,y:b.y,stroke:null,radius:b.radius},b))},line:function(a,b){return a.add(Ext.apply({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius/5},b))},square:function(a,b){return a.add(Ext.applyIf({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius,radius:null},b))},triangle:function(a,b){b.radius*=1.75;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(b.x,",",b.y,"m0-",b.radius*0.58,"l",b.radius*0.5,",",b.radius*0.87,"-",b.radius,",0z")},b))},diamond:function(a,c){var b=c.radius;b*=1.5;return a.add(Ext.apply({type:"path",stroke:null,path:["M",c.x,c.y-b,"l",b,b,-b,b,-b,-b,b,-b,"z"]},c))},cross:function(a,c){var b=c.radius;b=b/1.7;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(c.x-b,",",c.y,"l",[-b,-b,b,-b,b,b,b,-b,b,b,-b,b,b,b,-b,b,-b,-b,-b,b,-b,-b,"z"])},c))},plus:function(a,c){var b=c.radius/1.3;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(c.x-b/2,",",c.y-b/2,"l",[0,-b,b,0,0,b,b,0,0,b,-b,0,0,b,-b,0,0,-b,-b,0,0,-b,"z"])},c))},arrow:function(a,c){var b=c.radius;return a.add(Ext.apply({type:"path",path:"M".concat(c.x-b*0.7,",",c.y-b*0.4,"l",[b*0.6,0,0,-b*0.4,b,b*0.8,-b,b*0.8,0,-b*0.4,-b*0.6,0],"z")},c))},drop:function(b,a,g,e,c,d){c=c||30;d=d||0;b.add({type:"path",path:["M",a,g,"l",c,0,"A",c*0.4,c*0.4,0,1,0,a+c*0.7,g-c*0.7,"z"],fill:"#000",stroke:"none",rotate:{degrees:22.5-d,x:a,y:g}});d=(d+90)*Math.PI/180;b.add({type:"text",x:a+c*Math.sin(d)-10,y:g+c*Math.cos(d)+5,text:e,"font-size":c*12/40,stroke:"none",fill:"#fff"})}});Ext.define("Ext.draw.Surface",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.draw.CompositeSprite"],uses:["Ext.draw.engine.Svg","Ext.draw.engine.Vml"],separatorRe:/[, ]+/,statics:{create:function(b,d){d=d||["Svg","Vml"];var c=0,a=d.length,e;for(;c<a;c++){if(Ext.supports[d[c]]){return Ext.create("Ext.draw.engine."+d[c],b)}}return false}},availableAttrs:{blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,"dominant-baseline":"auto",fill:"none","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:"",height:0,hidden:false,href:"http://sencha.com/",opacity:1,path:"M0,0",radius:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank",text:"","text-anchor":"middle",title:"Ext Draw",width:0,x:0,y:0,zIndex:0},container:undefined,height:352,width:512,x:0,y:0,orderSpritesByZIndex:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.domRef=Ext.getDoc().dom;b.customAttributes={};b.addEvents("mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","click");b.mixins.observable.constructor.call(b);b.getId();b.initGradients();b.initItems();if(b.renderTo){b.render(b.renderTo);delete b.renderTo}b.initBackground(a.background)},initSurface:Ext.emptyFn,renderItem:Ext.emptyFn,renderItems:Ext.emptyFn,setViewBox:function(b,d,c,a){if(isFinite(b)&&isFinite(d)&&isFinite(c)&&isFinite(a)){this.viewBox={x:b,y:d,width:c,height:a};this.applyViewBox()}},addCls:Ext.emptyFn,removeCls:Ext.emptyFn,setStyle:Ext.emptyFn,initGradients:function(){var a=this.gradients;if(a){Ext.each(a,this.addGradient,this)}},initItems:function(){var a=this.items;this.items=Ext.create("Ext.draw.CompositeSprite");this.groups=Ext.create("Ext.draw.CompositeSprite");if(a){this.add(a)}},initBackground:function(b){var e=this,d=e.width,a=e.height,g,h,c;if(b){if(b.gradient){h=b.gradient;g=h.id;e.addGradient(h);e.background=e.add({type:"rect",x:0,y:0,width:d,height:a,fill:"url(#"+g+")"})}else{if(b.fill){e.background=e.add({type:"rect",x:0,y:0,width:d,height:a,fill:b.fill})}else{if(b.image){e.background=e.add({type:"image",x:0,y:0,width:d,height:a,src:b.image})}}}}},setSize:function(a,b){if(this.background){this.background.setAttributes({width:a,height:b,hidden:false},true)}this.applyViewBox()},scrubAttrs:function(d){var c,b={},a={},e=d.attr;for(c in e){if(this.translateAttrs.hasOwnProperty(c)){b[this.translateAttrs[c]]=e[c];a[this.translateAttrs[c]]=true}else{if(this.availableAttrs.hasOwnProperty(c)&&!a[c]){b[c]=e[c]}}}return b},onClick:function(a){this.processEvent("click",a)},onMouseUp:function(a){this.processEvent("mouseup",a)},onMouseDown:function(a){this.processEvent("mousedown",a)},onMouseOver:function(a){this.processEvent("mouseover",a)},onMouseOut:function(a){this.processEvent("mouseout",a)},onMouseMove:function(a){this.fireEvent("mousemove",a)},onMouseEnter:Ext.emptyFn,onMouseLeave:Ext.emptyFn,addGradient:Ext.emptyFn,add:function(){var g=Array.prototype.slice.call(arguments),j,d;var a=g.length>1;if(a||Ext.isArray(g[0])){var h=a?g:g[0],b=[],c,e,k;for(c=0,e=h.length;c<e;c++){k=h[c];k=this.add(k);b.push(k)}return b}j=this.prepareItems(g[0],true)[0];this.insertByZIndex(j);this.onAdd(j);return j},insertByZIndex:function(k){var g=this,d=g.items.items,c=d.length,m=Math.ceil,h=k.attr.zIndex,j=c,b=j-1,e=0,a;if(g.orderSpritesByZIndex&&c&&h<d[b].attr.zIndex){while(e<=b){j=m((e+b)/2);a=d[j].attr.zIndex;if(a>h){b=j-1}else{if(a<h){e=j+1}else{break}}}while(j<c&&d[j].attr.zIndex<=h){j++}}g.items.insert(j,k);return j},onAdd:function(d){var g=d.group,b=d.draggable,a,e,c;if(g){a=[].concat(g);e=a.length;for(c=0;c<e;c++){g=a[c];this.getGroup(g).add(d)}delete d.group}if(b){d.initDraggable()}},remove:function(a,b){if(a){this.items.remove(a);this.groups.each(function(c){c.remove(a)});a.onRemove();if(b===true){a.destroy()}}},removeAll:function(d){var a=this.items.items,c=a.length,b;for(b=c-1;b>-1;b--){this.remove(a[b],d)}},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,applyViewBox:function(){var d=this,n=d.viewBox,a=d.width,h=d.height,g,e,k,b,j,c,m;if(n&&(a||h)){g=n.x;e=n.y;k=n.width;b=n.height;j=h/b;c=a/k;if(k*j<a){g-=(a-k*j)/2/j}if(b*c<h){e-=(h-b*c)/2/c}m=1/Math.min(k,j);d.viewBoxShift={dx:-g,dy:-e,scale:m}}},transformToViewBox:function(a,d){if(this.viewBoxShift){var c=this,b=c.viewBoxShift;return[a*b.scale-b.dx,d*b.scale-b.dy]}else{return[a,d]}},applyTransformations:function(b){b.bbox.transform=0;this.transform(b);var d=this,c=false,a=b.attr;if(a.translation.x!=null||a.translation.y!=null){d.translate(b);c=true}if(a.scaling.x!=null||a.scaling.y!=null){d.scale(b);c=true}if(a.rotation.degrees!=null){d.rotate(b);c=true}if(c){b.bbox.transform=0;this.transform(b);b.transformations=[]}},rotate:function(a){var e,b=a.attr.rotation.degrees,d=a.attr.rotation.x,c=a.attr.rotation.y;if(!Ext.isNumber(d)||!Ext.isNumber(c)){e=this.getBBox(a);d=!Ext.isNumber(d)?e.x+e.width/2:d;c=!Ext.isNumber(c)?e.y+e.height/2:c}a.transformations.push({type:"rotate",degrees:b,x:d,y:c})},translate:function(b){var a=b.attr.translation.x||0,c=b.attr.translation.y||0;b.transformations.push({type:"translate",x:a,y:c})},scale:function(b){var e,a=b.attr.scaling.x||1,g=b.attr.scaling.y||1,d=b.attr.scaling.centerX,c=b.attr.scaling.centerY;if(!Ext.isNumber(d)||!Ext.isNumber(c)){e=this.getBBox(b);d=!Ext.isNumber(d)?e.x+e.width/2:d;c=!Ext.isNumber(c)?e.y+e.height/2:c}b.transformations.push({type:"scale",x:a,y:g,centerX:d,centerY:c})},rectPath:function(a,e,b,c,d){if(d){return[["M",a+d,e],["l",b-d*2,0],["a",d,d,0,0,1,d,d],["l",0,c-d*2],["a",d,d,0,0,1,-d,d],["l",d*2-b,0],["a",d,d,0,0,1,-d,-d],["l",0,d*2-c],["a",d,d,0,0,1,d,-d],["z"]]}return[["M",a,e],["l",b,0],["l",0,c],["l",-b,0],["z"]]},ellipsePath:function(a,d,c,b){if(b==null){b=c}return[["M",a,d],["m",0,-b],["a",c,b,0,1,1,0,2*b],["a",c,b,0,1,1,0,-2*b],["z"]]},getPathpath:function(a){return a.attr.path},getPathcircle:function(c){var b=c.attr;return this.ellipsePath(b.x,b.y,b.radius,b.radius)},getPathellipse:function(c){var b=c.attr;return this.ellipsePath(b.x,b.y,b.radiusX||(b.width/2)||0,b.radiusY||(b.height/2)||0)},getPathrect:function(c){var b=c.attr;return this.rectPath(b.x,b.y,b.width,b.height,b.r)},getPathimage:function(c){var b=c.attr;return this.rectPath(b.x||0,b.y||0,b.width,b.height)},getPathtext:function(a){var b=this.getBBoxText(a);return this.rectPath(b.x,b.y,b.width,b.height)},createGroup:function(b){var a=this.groups.get(b);if(!a){a=Ext.create("Ext.draw.CompositeSprite",{surface:this});a.id=b||Ext.id(null,"ext-surface-group-");this.groups.add(a)}return a},getGroup:function(b){if(typeof b=="string"){var a=this.groups.get(b);if(!a){a=this.createGroup(b)}}else{a=b}return a},prepareItems:function(a,c){a=[].concat(a);var e,b,d;for(b=0,d=a.length;b<d;b++){e=a[b];if(!(e instanceof Ext.draw.Sprite)){e.surface=this;a[b]=this.createItem(e)}else{e.surface=this}}return a},setText:Ext.emptyFn,createItem:Ext.emptyFn,getId:function(){return this.id||(this.id=Ext.id(null,"ext-surface-"))},destroy:function(){delete this.domRef;this.removeAll()}});Ext.define("Ext.layout.component.Draw",{alias:"layout.draw",extend:"Ext.layout.component.Auto",type:"draw",onLayout:function(b,a){this.owner.surface.setSize(b,a);this.callParent(arguments)}});Ext.define("Ext.draw.Component",{alias:"widget.draw",extend:"Ext.Component",requires:["Ext.draw.Surface","Ext.layout.component.Draw"],enginePriority:["Svg","Vml"],baseCls:Ext.baseCSSPrefix+"surface",componentLayout:"draw",viewBox:true,autoSize:false,initComponent:function(){this.callParent(arguments);this.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave","click")},onRender:function(){var d=this,k=d.viewBox,b=d.autoSize,h,c,a,j,g,e;d.callParent(arguments);if(d.createSurface()!==false){c=d.surface.items;if(k||b){h=c.getBBox();a=h.width;j=h.height;g=h.x;e=h.y;if(d.viewBox){d.surface.setViewBox(g,e,a,j)}else{d.autoSizeSurface()}}}},autoSizeSurface:function(){var d=this,b=d.surface.items,e=b.getBBox(),c=e.width,a=e.height;b.setAttributes({translate:{x:-e.x,y:-e.y+(+Ext.isOpera)}},true);if(d.rendered){d.setSize(c,a);d.surface.setSize(c,a)}else{d.surface.setSize(c,a)}d.el.setSize(c,a)},createSurface:function(){var a=Ext.draw.Surface.create(Ext.apply({},{width:this.width,height:this.height,renderTo:this.el},this.initialConfig));if(!a){return false}this.surface=a;function b(c){return function(d){this.fireEvent(c,d)}}a.on({scope:this,mouseup:b("mouseup"),mousedown:b("mousedown"),mousemove:b("mousemove"),mouseenter:b("mouseenter"),mouseleave:b("mouseleave"),click:b("click")})},onDestroy:function(){var a=this.surface;if(a){a.destroy()}this.callParent(arguments)}});Ext.define("Ext.chart.LegendItem",{extend:"Ext.draw.CompositeSprite",requires:["Ext.chart.Shape"],x:0,y:0,zIndex:500,constructor:function(a){this.callParent(arguments);this.createLegend(a)},createLegend:function(w){var x=this,j=w.yFieldIndex,n=x.series,a=n.type,p=x.yFieldIndex,d=x.legend,t=x.surface,u=d.x+x.x,q=d.y+x.y,c,m=x.zIndex,b,k,v,e,r=false,h=Ext.apply(n.seriesStyle,n.style);function g(y){var z=n[y];return(Ext.isArray(z)?z[p]:z)}k=x.add("label",t.add({type:"text",x:20,y:0,zIndex:m||0,font:d.labelFont,text:g("title")||g("yField")}));if(a==="line"||a==="scatter"){if(a==="line"){x.add("line",t.add({type:"path",path:"M0.5,0.5L16.5,0.5",zIndex:m,"stroke-width":n.lineWidth,"stroke-linejoin":"round","stroke-dasharray":n.dash,stroke:h.stroke||"#000",style:{cursor:"pointer"}}))}if(n.showMarkers||a==="scatter"){b=Ext.apply(n.markerStyle,n.markerConfig||{});x.add("marker",Ext.chart.Shape[b.type](t,{fill:b.fill,x:8.5,y:0.5,zIndex:m,radius:b.radius||b.size,style:{cursor:"pointer"}}))}}else{x.add("box",t.add({type:"rect",zIndex:m,x:0,y:0,width:12,height:12,fill:n.getLegendColor(j),style:{cursor:"pointer"}}))}x.setAttributes({hidden:false},true);c=x.getBBox();v=x.add("mask",t.add({type:"rect",x:c.x,y:c.y,width:c.width||20,height:c.height||20,zIndex:(m||0)+1000,fill:"#f00",opacity:0,style:{cursor:"pointer"}}));x.on("mouseover",function(){k.setStyle({"font-weight":"bold"});v.setStyle({cursor:"pointer"});n._index=j;n.highlightItem()},x);x.on("mouseout",function(){k.setStyle({"font-weight":"normal"});n._index=j;n.unHighlightItem()},x);if(!n.visibleInLegend(j)){r=true;k.setAttributes({opacity:0.5},true)}x.on("mousedown",function(){if(!r){n.hideAll();k.setAttributes({opacity:0.5},true)}else{n.showAll();k.setAttributes({opacity:1},true)}r=!r},x);x.updatePosition({x:0,y:0})},updatePosition:function(c){var g=this,a=g.items,e=a.length,b=0,d;if(!c){c=g.legend}for(;b<e;b++){d=a[b];switch(d.type){case"text":d.setAttributes({x:20+c.x+g.x,y:c.y+g.y},true);break;case"rect":d.setAttributes({translate:{x:c.x+g.x,y:c.y+g.y-6}},true);break;default:d.setAttributes({translate:{x:c.x+g.x,y:c.y+g.y}},true)}}}});Ext.define("Ext.chart.Legend",{requires:["Ext.chart.LegendItem"],visible:true,position:"bottom",x:0,y:0,labelFont:"12px Helvetica, sans-serif",boxStroke:"#000",boxStrokeWidth:1,boxFill:"#FFF",itemSpacing:10,padding:5,width:0,height:0,boxZIndex:100,constructor:function(a){var b=this;if(a){Ext.apply(b,a)}b.items=[];b.isVertical=("left|right|float".indexOf(b.position)!==-1);b.origX=b.x;b.origY=b.y},create:function(){var a=this;a.createBox();a.createItems();if(!a.created&&a.isDisplayed()){a.created=true;a.chart.series.each(function(b){b.on("titlechange",function(){a.create();a.updatePosition()})})}},isDisplayed:function(){return this.visible&&this.chart.series.findIndex("showInLegend",true)!==-1},createItems:function(){var D=this,p=D.chart,v=p.surface,r=D.items,n=D.padding,E=D.itemSpacing,j=2,A=0,u=0,e=0,C=0,b=D.isVertical,d=Math,c=d.floor,F=d.max,h=0,w=0,z=r?r.length:0,m,k,g,B,a,q,t;if(z){for(;w<z;w++){r[w].destroy()}}r.length=[];p.series.each(function(y,x){if(y.showInLegend){Ext.each([].concat(y.yField),function(H,G){B=Ext.create("Ext.chart.LegendItem",{legend:this,series:y,surface:p.surface,yFieldIndex:G});a=B.getBBox();t=a.width;q=a.height;if(x+G===0){g=b?n+q/2:n}else{g=E/(b?2:1)}B.x=c(b?n:e+g);B.y=c(b?C+g:n+q/2);e+=t+g;C+=q+g;A=F(A,t);u=F(u,q);r.push(B)},this)}},D);D.width=c((b?A:e)+n*2);if(b&&r.length===1){j=1}D.height=c((b?C-j*g:u)+(n*2));D.itemHeight=u},getBBox:function(){var a=this;return{x:Math.round(a.x)-a.boxStrokeWidth/2,y:Math.round(a.y)-a.boxStrokeWidth/2,width:a.width,height:a.height}},createBox:function(){var b=this,a;if(b.boxSprite){b.boxSprite.destroy()}a=b.boxSprite=b.chart.surface.add(Ext.apply({type:"rect",stroke:b.boxStroke,"stroke-width":b.boxStrokeWidth,fill:b.boxFill,zIndex:b.boxZIndex},b.getBBox()));a.redraw()},updatePosition:function(){var j=this,n,k,q=j.width,p=j.height,m=j.padding,h=j.chart,r=h.chartBBox,b=h.insetPadding,d=r.width-(b*2),c=r.height-(b*2),g=r.x+b,e=r.y+b,a=h.surface,t=Math.floor;if(j.isDisplayed()){switch(j.position){case"left":n=b;k=t(e+c/2-p/2);break;case"right":n=t(a.width-q)-b;k=t(e+c/2-p/2);break;case"top":n=t(g+d/2-q/2);k=b;break;case"bottom":n=t(g+d/2-q/2);k=t(a.height-p)-b;break;default:n=t(j.origX)+b;k=t(j.origY)+b}j.x=n;j.y=k;Ext.each(j.items,function(u){u.updatePosition()});j.boxSprite.setAttributes(j.getBBox(),true)}}});Ext.define("Ext.chart.Chart",{alias:"widget.chart",extend:"Ext.draw.Component",mixins:{themeManager:"Ext.chart.theme.Theme",mask:"Ext.chart.Mask",navigation:"Ext.chart.Navigation"},requires:["Ext.util.MixedCollection","Ext.data.StoreManager","Ext.chart.Legend","Ext.util.DelayedTask"],viewBox:false,animate:false,legend:false,insetPadding:10,enginePriority:["Svg","Vml"],background:false,constructor:function(b){var c=this,a;b=Ext.apply({},b);c.initTheme(b.theme||c.theme);if(c.gradients){Ext.apply(b,{gradients:c.gradients})}if(c.background){Ext.apply(b,{background:c.background})}if(b.animate){a={easing:"ease",duration:500};if(Ext.isObject(b.animate)){b.animate=Ext.applyIf(b.animate,a)}else{b.animate=a}}c.mixins.mask.constructor.call(c,b);c.mixins.navigation.constructor.call(c,b);c.callParent([b])},getChartStore:function(){return this.substore||this.store},initComponent:function(){var b=this,c,a;b.callParent();b.addEvents("itemmousedown","itemmouseup","itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh");Ext.applyIf(b,{zoom:{width:1,height:1,x:0,y:0}});b.maxGutter=[0,0];b.store=Ext.data.StoreManager.lookup(b.store);c=b.axes;b.axes=Ext.create("Ext.util.MixedCollection",false,function(d){return d.position});if(c){b.axes.addAll(c)}a=b.series;b.series=Ext.create("Ext.util.MixedCollection",false,function(d){return d.seriesId||(d.seriesId=Ext.id(null,"ext-chart-series-"))});if(a){b.series.addAll(a)}if(b.legend!==false){b.legend=Ext.create("Ext.chart.Legend",Ext.applyIf({chart:b},b.legend))}b.on({mousemove:b.onMouseMove,mouseleave:b.onMouseLeave,mousedown:b.onMouseDown,mouseup:b.onMouseUp,scope:b})},afterComponentLayout:function(b,a){var c=this;if(Ext.isNumber(b)&&Ext.isNumber(a)){c.curWidth=b;c.curHeight=a;c.redraw(true)}this.callParent(arguments)},redraw:function(a){var d=this,c=d.chartBBox={x:0,y:0,height:d.curHeight,width:d.curWidth},b=d.legend;d.surface.setSize(c.width,c.height);d.series.each(d.initializeSeries,d);d.axes.each(d.initializeAxis,d);d.axes.each(function(e){e.processView()});d.axes.each(function(e){e.drawAxis(true)});if(b!==false){b.create()}d.alignAxes();if(d.legend!==false){b.updatePosition()}d.getMaxGutter();d.resizing=!!a;d.axes.each(d.drawAxis,d);d.series.each(d.drawCharts,d);d.resizing=false},afterRender:function(){var b,a=this;this.callParent();if(a.categoryNames){a.setCategoryNames(a.categoryNames)}if(a.tipRenderer){b=a.getFunctionRef(a.tipRenderer);a.setTipRenderer(b.fn,b.scope)}a.bindStore(a.store,true);a.refresh()},getEventXY:function(d){var c=this,b=this.surface.getRegion(),h=d.getXY(),a=h[0]-b.left,g=h[1]-b.top;return[a,g]},onClick:function(d){var c=this,a=c.getEventXY(d),b;c.series.each(function(e){if(Ext.draw.Draw.withinBox(a[0],a[1],e.bbox)){if(e.getItemForPoint){b=e.getItemForPoint(a[0],a[1]);if(b){e.fireEvent("itemclick",b)}}}},c)},onMouseDown:function(d){var c=this,a=c.getEventXY(d),b;if(c.mask){c.mixins.mask.onMouseDown.call(c,d)}c.series.each(function(e){if(Ext.draw.Draw.withinBox(a[0],a[1],e.bbox)){if(e.getItemForPoint){b=e.getItemForPoint(a[0],a[1]);if(b){e.fireEvent("itemmousedown",b)}}}},c)},onMouseUp:function(d){var c=this,a=c.getEventXY(d),b;if(c.mask){c.mixins.mask.onMouseUp.call(c,d)}c.series.each(function(e){if(Ext.draw.Draw.withinBox(a[0],a[1],e.bbox)){if(e.getItemForPoint){b=e.getItemForPoint(a[0],a[1]);if(b){e.fireEvent("itemmouseup",b)}}}},c)},onMouseMove:function(j){var h=this,a=h.getEventXY(j),g,d,c,b;if(h.mask){h.mixins.mask.onMouseMove.call(h,j)}h.series.each(function(e){if(Ext.draw.Draw.withinBox(a[0],a[1],e.bbox)){if(e.getItemForPoint){g=e.getItemForPoint(a[0],a[1]);d=e._lastItemForPoint;c=e._lastStoreItem;b=e._lastStoreField;if(g!==d||g&&(g.storeItem!=c||g.storeField!=b)){if(d){e.fireEvent("itemmouseout",d);delete e._lastItemForPoint;delete e._lastStoreField;delete e._lastStoreItem}if(g){e.fireEvent("itemmouseover",g);e._lastItemForPoint=g;e._lastStoreItem=g.storeItem;e._lastStoreField=g.storeField}}}}else{d=e._lastItemForPoint;if(d){e.fireEvent("itemmouseout",d);delete e._lastItemForPoint;delete e._lastStoreField;delete e._lastStoreItem}}},h)},onMouseLeave:function(b){var a=this;if(a.mask){a.mixins.mask.onMouseLeave.call(a,b)}a.series.each(function(c){delete c._lastItemForPoint})},delayRefresh:function(){var a=this;if(!a.refreshTask){a.refreshTask=Ext.create("Ext.util.DelayedTask",a.refresh,a)}a.refreshTask.delay(a.refreshBuffer)},refresh:function(){var a=this;if(a.rendered&&a.curWidth!==undefined&&a.curHeight!==undefined){if(a.fireEvent("beforerefresh",a)!==false){a.redraw();a.fireEvent("refresh",a)}}},bindStore:function(a,b){var c=this;if(!b&&c.store){if(a!==c.store&&c.store.autoDestroy){c.store.destroyStore()}else{c.store.un("datachanged",c.refresh,c);c.store.un("add",c.delayRefresh,c);c.store.un("remove",c.delayRefresh,c);c.store.un("update",c.delayRefresh,c);c.store.un("clear",c.refresh,c)}}if(a){a=Ext.data.StoreManager.lookup(a);a.on({scope:c,datachanged:c.refresh,add:c.delayRefresh,remove:c.delayRefresh,update:c.delayRefresh,clear:c.refresh})}c.store=a;if(a&&!b){c.refresh()}},initializeAxis:function(b){var e=this,m=e.chartBBox,k=m.width,d=m.height,j=m.x,g=m.y,c=e.themeAttrs,a={chart:e};if(c){a.axisStyle=Ext.apply({},c.axis);a.axisLabelLeftStyle=Ext.apply({},c.axisLabelLeft);a.axisLabelRightStyle=Ext.apply({},c.axisLabelRight);a.axisLabelTopStyle=Ext.apply({},c.axisLabelTop);a.axisLabelBottomStyle=Ext.apply({},c.axisLabelBottom);a.axisTitleLeftStyle=Ext.apply({},c.axisTitleLeft);a.axisTitleRightStyle=Ext.apply({},c.axisTitleRight);a.axisTitleTopStyle=Ext.apply({},c.axisTitleTop);a.axisTitleBottomStyle=Ext.apply({},c.axisTitleBottom)}switch(b.position){case"top":Ext.apply(a,{length:k,width:d,x:j,y:g});break;case"bottom":Ext.apply(a,{length:k,width:d,x:j,y:d});break;case"left":Ext.apply(a,{length:d,width:k,x:j,y:d});break;case"right":Ext.apply(a,{length:d,width:k,x:k,y:d});break}if(!b.chart){Ext.apply(a,b);b=e.axes.replace(Ext.createByAlias("axis."+b.type.toLowerCase(),a))}else{Ext.apply(b,a)}},alignAxes:function(){var g=this,h=g.axes,e=g.legend,b=["top","right","bottom","left"],d,c=g.insetPadding,a={top:c,right:c,bottom:c,left:c};function j(m){var k=h.findIndex("position",m);return(k<0)?null:h.getAt(k)}Ext.each(b,function(m){var p=(m==="left"||m==="right"),k=j(m),n;if(e!==false){if(e.position===m){n=e.getBBox();a[m]+=(p?n.width:n.height)+a[m]}}if(k&&k.bbox){n=k.bbox;a[m]+=(p?n.width:n.height)}});d={x:a.left,y:a.top,width:g.curWidth-a.left-a.right,height:g.curHeight-a.top-a.bottom};g.chartBBox=d;h.each(function(k){var n=k.position,m=(n==="left"||n==="right");k.x=(n==="right"?d.x+d.width:d.x);k.y=(n==="top"?d.y:d.y+d.height);k.width=(m?d.width:d.height);k.length=(m?d.height:d.width)})},initializeSeries:function(h,k){var j=this,d=j.themeAttrs,c,e,n,q,p,m=[],g=0,b,a={chart:j,seriesId:h.seriesId};if(d){n=d.seriesThemes;p=d.markerThemes;c=Ext.apply({},d.series);e=Ext.apply({},d.marker);a.seriesStyle=Ext.apply(c,n[k%n.length]);a.seriesLabelStyle=Ext.apply({},d.seriesLabel);a.markerStyle=Ext.apply(e,p[k%p.length]);if(d.colors){a.colorArrayStyle=d.colors}else{m=[];for(b=n.length;g<b;g++){q=n[g];if(q.fill||q.stroke){m.push(q.fill||q.stroke)}}if(m.length){a.colorArrayStyle=m}}a.seriesIdx=k}if(h instanceof Ext.chart.series.Series){Ext.apply(h,a)}else{Ext.applyIf(a,h);h=j.series.replace(Ext.createByAlias("series."+h.type.toLowerCase(),a))}if(h.initialize){h.initialize()}},getMaxGutter:function(){var b=this,a=[0,0];b.series.each(function(c){var d=c.getGutters&&c.getGutters()||[0,0];a[0]=Math.max(a[0],d[0]);a[1]=Math.max(a[1],d[1])});b.maxGutter=a},drawAxis:function(a){a.drawAxis()},drawCharts:function(a){a.triggerafterrender=false;a.drawSeries();if(!this.animate){a.fireEvent("afterrender")}},destroy:function(){Ext.destroy(this.surface);this.bindStore(null);this.callParent(arguments)}});Ext.define("Ext.chart.Highlight",{requires:["Ext.fx.Anim"],highlight:false,highlightCfg:null,constructor:function(a){if(a.highlight){if(a.highlight!==true){this.highlightCfg=Ext.apply({},a.highlight)}else{this.highlightCfg={fill:"#fdd",radius:20,lineWidth:5,stroke:"#f55"}}}},highlightItem:function(m){if(!m){return}var g=this,k=m.sprite,a=g.highlightCfg,d=g.chart.surface,c=g.chart.animate,b,j,h,e;if(!g.highlight||!k||k._highlighted){return}if(k._anim){k._anim.paused=true}k._highlighted=true;if(!k._defaults){k._defaults=Ext.apply({},k.attr);j={};h={};for(b in a){if(!(b in k._defaults)){k._defaults[b]=d.availableAttrs[b]}j[b]=k._defaults[b];h[b]=a[b];if(Ext.isObject(a[b])){j[b]={};h[b]={};Ext.apply(k._defaults[b],k.attr[b]);Ext.apply(j[b],k._defaults[b]);for(e in k._defaults[b]){if(!(e in a[b])){h[b][e]=j[b][e]}else{h[b][e]=a[b][e]}}for(e in a[b]){if(!(e in h[b])){h[b][e]=a[b][e]}}}}k._from=j;k._to=h;k._endStyle=h}if(c){k._anim=Ext.create("Ext.fx.Anim",{target:k,from:k._from,to:k._to,duration:150})}else{k.setAttributes(k._to,true)}},unHighlightItem:function(){if(!this.highlight||!this.items){return}var j=this,h=j.items,g=h.length,a=j.highlightCfg,c=j.chart.animate,e=0,d,b,k;for(;e<g;e++){if(!h[e]){continue}k=h[e].sprite;if(k&&k._highlighted){if(k._anim){k._anim.paused=true}d={};for(b in a){if(Ext.isObject(k._defaults[b])){d[b]={};Ext.apply(d[b],k._defaults[b])}else{d[b]=k._defaults[b]}}if(c){k._endStyle=d;k._anim=Ext.create("Ext.fx.Anim",{target:k,to:d,duration:150})}else{k.setAttributes(d,true)}delete k._highlighted}}},cleanHighlights:function(){if(!this.highlight){return}var d=this.group,c=this.markerGroup,b=0,a;for(a=d.getCount();b<a;b++){delete d.getAt(b)._defaults}if(c){for(a=c.getCount();b<a;b++){delete c.getAt(b)._defaults}}}});Ext.define("Ext.chart.Label",{requires:["Ext.draw.Color"],colorStringRe:/url\s*\(\s*#([^\/)]+)\s*\)/,constructor:function(a){var b=this;b.label=Ext.applyIf(b.label||{},{display:"none",color:"#000",field:"name",minMargin:50,font:"11px Helvetica, sans-serif",orientation:"horizontal",renderer:function(c){return c}});if(b.label.display!=="none"){b.labelsGroup=b.chart.surface.getGroup(b.seriesId+"-labels")}},renderLabels:function(){var q=this,O=q.chart,A=O.gradients,u=q.items,K=O.animate,D=q.label,x=D.display,y=D.color,d=[].concat(D.field),t=q.labelsGroup,m=(t||0)&&t.length,b=q.chart.store,r=b.getCount(),h=(u||0)&&u.length,G=h/r,C=(A||0)&&A.length,n=Ext.draw.Color,N=[],p,M,H,c,B,L,J,e,g,w,z,I,P,v,Q,F,E,a;if(x=="none"){return}if(h==0){while(m--){N.push(m)}}else{for(M=0,H=0,c=0;M<r;M++){B=0;for(L=0;L<G;L++){z=u[H];I=t.getAt(c);P=b.getAt(M);while(this.__excludes&&this.__excludes[B]&&G>1){if(d[L]){N.push(c)}B++}if(!z&&I){I.hide(true);c++}if(z&&d[L]){if(!I){I=q.onCreateLabel(P,z,M,x,L,B)}q.onPlaceLabel(I,P,z,M,x,K,L,B);c++;if(D.contrast&&z.sprite){v=z.sprite;if(v._endStyle){a=v._endStyle.fill}else{if(v._to){a=v._to.fill}else{a=v.attr.fill}}a=a||v.attr.fill;Q=n.fromString(a);if(a&&!Q){a=a.match(q.colorStringRe)[1];for(J=0;J<C;J++){p=A[J];if(p.id==a){w=0;e=0;for(g in p.stops){w++;e+=n.fromString(p.stops[g].color).getGrayscale()}F=(e/w)/255;break}}}else{F=Q.getGrayscale()/255}if(I.isOutside){F=1}E=n.fromString(I.attr.color||I.attr.fill).getHSL();E[2]=F>0.5?0.2:0.8;I.setAttributes({fill:String(n.fromHSL.apply({},E))},true)}}H++;B++}}}q.hideLabels(N)},hideLabels:function(b){var a=this.labelsGroup,c=b.length;while(c--){a.getAt(b[c]).hide(true)}}});Ext.define("Ext.chart.MaskLayer",{extend:"Ext.Component",constructor:function(a){a=Ext.apply(a||{},{style:"position:absolute;background-color:#888;cursor:move;opacity:0.6;border:1px solid #222;"});this.callParent([a])},initComponent:function(){var a=this;a.callParent(arguments);a.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave")},initDraggable:function(){this.callParent(arguments);this.dd.onStart=function(c){var b=this,a=b.comp;this.startPosition=a.getPosition(true);if(a.ghost&&!a.liveDrag){b.proxy=a.ghost();b.dragTarget=b.proxy.header.el}if(b.constrain||b.constrainDelegate){b.constrainTo=b.calculateConstrainRegion()}}}});Ext.define("Ext.chart.TipSurface",{extend:"Ext.draw.Component",spriteArray:false,renderFirst:true,constructor:function(a){this.callParent([a]);if(a.sprites){this.spriteArray=[].concat(a.sprites);delete a.sprites}},onRender:function(){var c=this,b=0,a=0,d,e;this.callParent(arguments);e=c.spriteArray;if(c.renderFirst&&e){c.renderFirst=false;for(a=e.length;b<a;b++){d=c.surface.add(e[b]);d.setAttributes({hidden:false},true)}}}});Ext.define("Ext.chart.Tip",{requires:["Ext.tip.ToolTip","Ext.chart.TipSurface"],constructor:function(b){var c=this,a,d,e;if(b.tips){c.tipTimeout=null;c.tipConfig=Ext.apply({},b.tips,{renderer:Ext.emptyFn,constrainPosition:false});c.tooltip=Ext.create("Ext.tip.ToolTip",c.tipConfig);c.chart.surface.on("mousemove",c.tooltip.onMouseMove,c.tooltip);c.chart.surface.on("mouseleave",function(){c.hideTip()});if(c.tipConfig.surface){a=c.tipConfig.surface;d=a.sprites;e=Ext.create("Ext.chart.TipSurface",{id:"tipSurfaceComponent",sprites:d});if(a.width&&a.height){e.setSize(a.width,a.height)}c.tooltip.add(e);c.spriteTip=e}}},showTip:function(n){var e=this;if(!e.tooltip){return}clearTimeout(e.tipTimeout);var p=e.tooltip,a=e.spriteTip,c=e.tipConfig,d=p.trackMouse,m,b,k,h,j,g;if(!d){p.trackMouse=true;m=n.sprite;b=m.surface;k=Ext.get(b.getId());if(k){h=k.getXY();j=h[0]+(m.attr.x||0)+(m.attr.translation&&m.attr.translation.x||0);g=h[1]+(m.attr.y||0)+(m.attr.translation&&m.attr.translation.y||0);p.targetXY=[j,g]}}if(a){c.renderer.call(p,n.storeItem,n,a.surface)}else{c.renderer.call(p,n.storeItem,n)}p.show();p.trackMouse=d},hideTip:function(a){var b=this.tooltip;if(!b){return}clearTimeout(this.tipTimeout);this.tipTimeout=setTimeout(function(){b.hide()},0)}});Ext.define("Ext.chart.axis.Abstract",{requires:["Ext.chart.Chart"],constructor:function(a){a=a||{};var b=this,c=a.position||"left";c=c.charAt(0).toUpperCase()+c.substring(1);a.label=Ext.apply(a["axisLabel"+c+"Style"]||{},a.label||{});a.axisTitleStyle=Ext.apply(a["axisTitle"+c+"Style"]||{},a.labelTitle||{});Ext.apply(b,a);b.fields=[].concat(b.fields);this.callParent();b.labels=[];b.getId();b.labelGroup=b.chart.surface.getGroup(b.axisId+"-labels")},alignment:null,grid:false,steps:10,x:0,y:0,minValue:0,maxValue:0,getId:function(){return this.axisId||(this.axisId=Ext.id(null,"ext-axis-"))},processView:Ext.emptyFn,drawAxis:Ext.emptyFn,addDisplayAndLabels:Ext.emptyFn});Ext.define("Ext.chart.axis.Axis",{extend:"Ext.chart.axis.Abstract",alternateClassName:"Ext.chart.Axis",requires:["Ext.draw.Draw"],forceMinMax:false,dashSize:3,position:"bottom",skipFirst:false,length:0,width:0,majorTickSteps:false,applyData:Ext.emptyFn,getRange:function(){var u=this,d=u.chart.getChartStore(),k=u.fields,g=k.length,c=Math,w=c.max,t=c.min,j=false,n=isNaN(u.minimum)?Infinity:u.minimum,q=isNaN(u.maximum)?-Infinity:u.maximum,v=0,r,p,m,a,e,b=[],h=u.chart.series.items;for(r=0,p=h.length;!j&&r<p;r++){j=j||h[r].stacked;b=h[r].__excludes||b}d.each(function(x){if(j){if(!isFinite(n)){n=0}for(a=[0,0],r=0;r<g;r++){if(b[r]){continue}e=x.get(k[r]);a[+(e>0)]+=c.abs(e)}q=w(q,-a[0],+a[1]);n=t(n,-a[0],+a[1])}else{for(r=0;r<g;r++){if(b[r]){continue}m=x.get(k[r]);q=w(q,+m);n=t(n,+m)}}});if(!isFinite(q)){q=u.prevMax||0}if(!isFinite(n)){n=u.prevMin||0}if(n!=q&&(q!=Math.floor(q))){q=Math.floor(q)+1}if(!isNaN(u.minimum)){n=u.minimum}if(!isNaN(u.maximum)){q=u.maximum}return{min:n,max:q}},calcEnds:function(){var j=this,b=j.fields,c=j.getRange(),h=c.min,a=c.max,e,g,d;d=Ext.draw.Draw.snapEnds(h,a,j.majorTickSteps!==false?(j.majorTickSteps+1):j.steps);e=d.from;g=d.to;if(j.forceMinMax){if(!isNaN(a)){d.to=a}if(!isNaN(h)){d.from=h}}if(!isNaN(j.maximum)){d.to=j.maximum}if(!isNaN(j.minimum)){d.from=j.minimum}d.step=(d.to-d.from)/(g-e)*d.step;if(j.adjustMaximumByMajorUnit){d.to+=d.step}if(j.adjustMinimumByMajorUnit){d.from-=d.step}j.prevMin=h==a?0:h;j.prevMax=a;return d},drawAxis:function(z){var I=this,A,w,k=I.x,h=I.y,G=I.chart.maxGutter[0],F=I.chart.maxGutter[1],e=I.dashSize,E=I.minorTickSteps||0,D=I.minorTickSteps||0,b=I.length,J=I.position,g=[],p=false,c=I.applyData(),d=c.step,B=c.steps,v=c.from,a=c.to,C,u,t,r,q,n,m,H;if(I.hidden||isNaN(d)||(v==a)){return}I.from=c.from;I.to=c.to;if(J=="left"||J=="right"){u=Math.floor(k)+0.5;r=["M",u,h,"l",0,-b];C=b-(F*2)}else{t=Math.floor(h)+0.5;r=["M",k,t,"l",b,0];C=b-(G*2)}H=C/(B||1);n=Math.max(E+1,0);m=Math.max(D+1,0);if(I.type=="Numeric"||I.type=="Time"){p=true;I.labels=[c.from]}if(J=="right"||J=="left"){t=h-F;u=k-((J=="left")*e*2);while(t>=h-F-C){r.push("M",u,Math.floor(t)+0.5,"l",e*2+1,0);if(t!=h-F){for(A=1;A<m;A++){r.push("M",u+e,Math.floor(t+H*A/m)+0.5,"l",e+1,0)}}g.push([Math.floor(k),Math.floor(t)]);t-=H;if(p){I.labels.push(I.labels[I.labels.length-1]+d)}if(H===0){break}}if(Math.round(t+H-(h-F-C))){r.push("M",u,Math.floor(h-b+F)+0.5,"l",e*2+1,0);for(A=1;A<m;A++){r.push("M",u+e,Math.floor(h-b+F+H*A/m)+0.5,"l",e+1,0)}g.push([Math.floor(k),Math.floor(t)]);if(p){I.labels.push(I.labels[I.labels.length-1]+d)}}}else{u=k+G;t=h-((J=="top")*e*2);while(u<=k+G+C){r.push("M",Math.floor(u)+0.5,t,"l",0,e*2+1);if(u!=k+G){for(A=1;A<n;A++){r.push("M",Math.floor(u-H*A/n)+0.5,t,"l",0,e+1)}}g.push([Math.floor(u),Math.floor(h)]);u+=H;if(p){I.labels.push(I.labels[I.labels.length-1]+d)}if(H===0){break}}if(Math.round(u-H-(k+G+C))){r.push("M",Math.floor(k+b-G)+0.5,t,"l",0,e*2+1);for(A=1;A<n;A++){r.push("M",Math.floor(k+b-G-H*A/n)+0.5,t,"l",0,e+1)}g.push([Math.floor(u),Math.floor(h)]);if(p){I.labels.push(I.labels[I.labels.length-1]+d)}}}if(!I.axis){I.axis=I.chart.surface.add(Ext.apply({type:"path",path:r},I.axisStyle))}I.axis.setAttributes({path:r},true);I.inflections=g;if(!z&&I.grid){I.drawGrid()}I.axisBBox=I.axis.getBBox();I.drawLabel()},drawGrid:function(){var x=this,q=x.chart.surface,b=x.grid,d=b.odd,e=b.even,h=x.inflections,k=h.length-((d||e)?0:1),y=x.position,c=x.chart.maxGutter,p=x.width-2,v=false,r,t,u=1,n=[],g,a,j,m=[],w=[];if((c[1]!==0&&(y=="left"||y=="right"))||(c[0]!==0&&(y=="top"||y=="bottom"))){u=0;k++}for(;u<k;u++){r=h[u];t=h[u-1];if(d||e){n=(u%2)?m:w;g=((u%2)?d:e)||{};a=(g.lineWidth||g["stroke-width"]||0)/2;j=2*a;if(y=="left"){n.push("M",t[0]+1+a,t[1]+0.5-a,"L",t[0]+1+p-a,t[1]+0.5-a,"L",r[0]+1+p-a,r[1]+0.5+a,"L",r[0]+1+a,r[1]+0.5+a,"Z")}else{if(y=="right"){n.push("M",t[0]-a,t[1]+0.5-a,"L",t[0]-p+a,t[1]+0.5-a,"L",r[0]-p+a,r[1]+0.5+a,"L",r[0]-a,r[1]+0.5+a,"Z")}else{if(y=="top"){n.push("M",t[0]+0.5+a,t[1]+1+a,"L",t[0]+0.5+a,t[1]+1+p-a,"L",r[0]+0.5-a,r[1]+1+p-a,"L",r[0]+0.5-a,r[1]+1+a,"Z")}else{n.push("M",t[0]+0.5+a,t[1]-a,"L",t[0]+0.5+a,t[1]-p+a,"L",r[0]+0.5-a,r[1]-p+a,"L",r[0]+0.5-a,r[1]-a,"Z")}}}}else{if(y=="left"){n=n.concat(["M",r[0]+0.5,r[1]+0.5,"l",p,0])}else{if(y=="right"){n=n.concat(["M",r[0]-0.5,r[1]+0.5,"l",-p,0])}else{if(y=="top"){n=n.concat(["M",r[0]+0.5,r[1]+0.5,"l",0,p])}else{n=n.concat(["M",r[0]+0.5,r[1]-0.5,"l",0,-p])}}}}}if(d||e){if(m.length){if(!x.gridOdd&&m.length){x.gridOdd=q.add({type:"path",path:m})}x.gridOdd.setAttributes(Ext.apply({path:m,hidden:false},d||{}),true)}if(w.length){if(!x.gridEven){x.gridEven=q.add({type:"path",path:w})}x.gridEven.setAttributes(Ext.apply({path:w,hidden:false},e||{}),true)}}else{if(n.length){if(!x.gridLines){x.gridLines=x.chart.surface.add({type:"path",path:n,"stroke-width":x.lineWidth||1,stroke:x.gridColor||"#ccc"})}x.gridLines.setAttributes({hidden:false,path:n},true)}else{if(x.gridLines){x.gridLines.hide(true)}}}},getOrCreateLabel:function(c,g){var d=this,b=d.labelGroup,e=b.getAt(c),a=d.chart.surface;if(e){if(g!=e.attr.text){e.setAttributes(Ext.apply({text:g},d.label),true);e._bbox=e.getBBox()}}else{e=a.add(Ext.apply({group:b,type:"text",x:0,y:0,text:g},d.label));a.renderItem(e);e._bbox=e.getBBox()}if(d.label.rotation){e.setAttributes({rotation:{degrees:0}},true);e._ubbox=e.getBBox();e.setAttributes(d.label,true)}else{e._ubbox=e._bbox}return e},rect2pointArray:function(n){var b=this.chart.surface,g=b.getBBox(n,true),p=[g.x,g.y],d=p.slice(),m=[g.x+g.width,g.y],a=m.slice(),k=[g.x+g.width,g.y+g.height],e=k.slice(),j=[g.x,g.y+g.height],c=j.slice(),h=n.matrix;p[0]=h.x.apply(h,d);p[1]=h.y.apply(h,d);m[0]=h.x.apply(h,a);m[1]=h.y.apply(h,a);k[0]=h.x.apply(h,e);k[1]=h.y.apply(h,e);j[0]=h.x.apply(h,c);j[1]=h.y.apply(h,c);return[p,m,k,j]},intersect:function(c,a){var d=this.rect2pointArray(c),b=this.rect2pointArray(a);return !!Ext.draw.Draw.intersect(d,b).length},drawHorizontalLabels:function(){var I=this,c=I.label,D=Math.floor,B=Math.max,C=I.chart.axes,J=I.position,k=I.inflections,q=k.length,H=I.labels,u=I.labelGroup,v=0,g,F=I.chart.maxGutter[1],d,a,z,e,p,E=0,G,w,j,t,h,n,r,m,A,b;n=q-1;z=k[0];b=I.getOrCreateLabel(0,I.label.renderer(H[0]));g=Math.floor(Math.abs(Math.sin(c.rotate&&(c.rotate.degrees*Math.PI/180)||0)));for(A=0;A<q;A++){z=k[A];t=I.label.renderer(H[A]);G=I.getOrCreateLabel(A,t);a=G._bbox;v=B(v,a.height+I.dashSize+I.label.padding);r=D(z[0]-(g?a.height:a.width)/2);if(I.chart.maxGutter[0]==0){if(A==0&&C.findIndex("position","left")==-1){r=z[0]}else{if(A==n&&C.findIndex("position","right")==-1){r=z[0]-a.width}}}if(J=="top"){m=z[1]-(I.dashSize*2)-I.label.padding-(a.height/2)}else{m=z[1]+(I.dashSize*2)+I.label.padding+(a.height/2)}G.setAttributes({hidden:false,x:r,y:m},true);if(A!=0&&(I.intersect(G,p)||I.intersect(G,b))){G.hide(true);continue}p=G}return v},drawVerticalLabels:function(){var E=this,g=E.inflections,F=E.position,k=g.length,C=E.labels,z=0,u=Math.max,w=Math.floor,b=Math.ceil,v=E.chart.axes,A=E.chart.maxGutter[1],c,a,r,m,B=0,D,q,e,p,d,j,n,h,t;j=k;for(t=0;t<j;t++){r=g[t];p=E.label.renderer(C[t]);D=E.getOrCreateLabel(t,p);a=D._bbox;z=u(z,a.width+E.dashSize+E.label.padding);h=r[1];if(A<a.height/2){if(t==j-1&&v.findIndex("position","top")==-1){h=E.y-E.length+b(a.height/2)}else{if(t==0&&v.findIndex("position","bottom")==-1){h=E.y-w(a.height/2)}}}if(F=="left"){n=r[0]-a.width-E.dashSize-E.label.padding-2}else{n=r[0]+E.dashSize+E.label.padding+2}D.setAttributes(Ext.apply({hidden:false,x:n,y:h},E.label),true);if(t!=0&&E.intersect(D,m)){D.hide(true);continue}m=D}return z},drawLabel:function(){var h=this,a=h.position,b=h.labelGroup,j=h.inflections,g=0,e=0,d,c;if(a=="left"||a=="right"){g=h.drawVerticalLabels()}else{e=h.drawHorizontalLabels()}d=b.getCount();c=j.length;for(;c<d;c++){b.getAt(c).hide(true)}h.bbox={};Ext.apply(h.bbox,h.axisBBox);h.bbox.height=e;h.bbox.width=g;if(Ext.isString(h.title)){h.drawTitle(g,e)}},elipsis:function(d,h,c,e,b){var g,a;if(c<e){d.hide(true);return false}while(h.length>4){h=h.substr(0,h.length-4)+"...";d.setAttributes({text:h},true);g=d.getBBox();if(g.width<c){if(typeof b=="number"){d.setAttributes({x:Math.floor(b-(g.width/2))},true)}break}}return true},setTitle:function(a){this.title=a;this.drawLabel()},drawTitle:function(n,p){var h=this,g=h.position,b=h.chart.surface,c=h.displaySprite,m=h.title,e=(g=="left"||g=="right"),k=h.x,j=h.y,a,q,d;if(c){c.setAttributes({text:m},true)}else{a={type:"text",x:0,y:0,text:m};c=h.displaySprite=b.add(Ext.apply(a,h.axisTitleStyle,h.labelTitle));b.renderItem(c)}q=c.getBBox();d=h.dashSize+h.label.padding;if(e){j-=((h.length/2)-(q.height/2));if(g=="left"){k-=(n+d+(q.width/2))}else{k+=(n+d+q.width-(q.width/2))}h.bbox.width+=q.width+10}else{k+=(h.length/2)-(q.width*0.5);if(g=="top"){j-=(p+d+(q.height*0.3))}else{j+=(p+d+(q.height*0.8))}h.bbox.height+=q.height+10}c.setAttributes({translate:{x:k,y:j}},true)}});Ext.define("Ext.chart.axis.Category",{extend:"Ext.chart.axis.Axis",alternateClassName:"Ext.chart.CategoryAxis",alias:"axis.category",categoryNames:null,calculateCategoryCount:false,setLabels:function(){var b=this.chart.store,a=this.fields,d=a.length,c;this.labels=[];b.each(function(e){for(c=0;c<d;c++){this.labels.push(e.get(a[c]))}},this)},applyData:function(){this.callParent();this.setLabels();var a=this.chart.store.getCount();return{from:0,to:a,power:1,step:1,steps:a-1}}});Ext.define("Ext.chart.axis.Gauge",{extend:"Ext.chart.axis.Abstract",position:"gauge",alias:"axis.gauge",drawAxis:function(t){var j=this.chart,a=j.surface,r=j.chartBBox,d=r.x+(r.width/2),b=r.y+r.height,c=this.margin||10,n=Math.min(r.width,2*r.height)/2+c,h=[],p,m=this.steps,e,g=Math.PI,q=Math.cos,k=Math.sin;if(this.sprites&&!j.resizing){this.drawLabel();return}if(this.margin>=0){if(!this.sprites){for(e=0;e<=m;e++){p=a.add({type:"path",path:["M",d+(n-c)*q(e/m*g-g),b+(n-c)*k(e/m*g-g),"L",d+n*q(e/m*g-g),b+n*k(e/m*g-g),"Z"],stroke:"#ccc"});p.setAttributes({hidden:false},true);h.push(p)}}else{h=this.sprites;for(e=0;e<=m;e++){h[e].setAttributes({path:["M",d+(n-c)*q(e/m*g-g),b+(n-c)*k(e/m*g-g),"L",d+n*q(e/m*g-g),b+n*k(e/m*g-g),"Z"],stroke:"#ccc"},true)}}}this.sprites=h;this.drawLabel();if(this.title){this.drawTitle()}},drawTitle:function(){var e=this,d=e.chart,a=d.surface,g=d.chartBBox,c=e.titleSprite,b;if(!c){e.titleSprite=c=a.add({type:"text",zIndex:2})}c.setAttributes(Ext.apply({text:e.title},e.label||{}),true);b=c.getBBox();c.setAttributes({x:g.x+(g.width/2)-(b.width/2),y:g.y+g.height-(b.height/2)-4},true)},setTitle:function(a){this.title=a;this.drawTitle()},drawLabel:function(){var k=this.chart,q=k.surface,b=k.chartBBox,j=b.x+(b.width/2),h=b.y+b.height,m=this.margin||10,d=Math.min(b.width,2*b.height)/2+2*m,w=Math.round,n=[],g,u=this.maximum||0,t=this.steps,r=0,x,v=Math.PI,c=Math.cos,a=Math.sin,e=this.label,p=e.renderer||function(y){return y};if(!this.labelArray){for(r=0;r<=t;r++){x=(r===0||r===t)?7:0;g=q.add({type:"text",text:p(w(r/t*u)),x:j+d*c(r/t*v-v),y:h+d*a(r/t*v-v)-x,"text-anchor":"middle","stroke-width":0.2,zIndex:10,stroke:"#333"});g.setAttributes({hidden:false},true);n.push(g)}}else{n=this.labelArray;for(r=0;r<=t;r++){x=(r===0||r===t)?7:0;n[r].setAttributes({text:p(w(r/t*u)),x:j+d*c(r/t*v-v),y:h+d*a(r/t*v-v)-x},true)}}this.labelArray=n}});Ext.define("Ext.chart.axis.Numeric",{extend:"Ext.chart.axis.Axis",alternateClassName:"Ext.chart.NumericAxis",type:"numeric",alias:"axis.numeric",constructor:function(c){var d=this,a=!!(c.label&&c.label.renderer),b;d.callParent([c]);b=d.label;if(d.roundToDecimal===false){return}if(!a){b.renderer=function(e){return d.roundToDecimal(e,d.decimals)}}},roundToDecimal:function(a,c){var b=Math.pow(10,c||0);return Math.floor(a*b)/b},minimum:NaN,maximum:NaN,decimals:2,scale:"linear",position:"left",adjustMaximumByMajorUnit:false,adjustMinimumByMajorUnit:false,applyData:function(){this.callParent();return this.calcEnds()}});Ext.define("Ext.chart.axis.Radial",{extend:"Ext.chart.axis.Abstract",position:"radial",alias:"axis.radial",drawAxis:function(w){var m=this.chart,a=m.surface,v=m.chartBBox,r=m.store,b=r.getCount(),e=v.x+(v.width/2),c=v.y+(v.height/2),q=Math.min(v.width,v.height)/2,k=[],t,p=this.steps,g,d,h=Math.PI*2,u=Math.cos,n=Math.sin;if(this.sprites&&!m.resizing){this.drawLabel();return}if(!this.sprites){for(g=1;g<=p;g++){t=a.add({type:"circle",x:e,y:c,radius:Math.max(q*g/p,0),stroke:"#ccc"});t.setAttributes({hidden:false},true);k.push(t)}r.each(function(x,j){t=a.add({type:"path",path:["M",e,c,"L",e+q*u(j/b*h),c+q*n(j/b*h),"Z"],stroke:"#ccc"});t.setAttributes({hidden:false},true);k.push(t)})}else{k=this.sprites;for(g=0;g<p;g++){k[g].setAttributes({x:e,y:c,radius:Math.max(q*(g+1)/p,0),stroke:"#ccc"},true)}r.each(function(y,x){k[g+x].setAttributes({path:["M",e,c,"L",e+q*u(x/b*h),c+q*n(x/b*h),"Z"],stroke:"#ccc"},true)})}this.sprites=k;this.drawLabel()},drawLabel:function(){var u=this.chart,A=u.surface,b=u.chartBBox,h=u.store,n=b.x+(b.width/2),m=b.y+(b.height/2),e=Math.min(b.width,b.height)/2,E=Math.max,H=Math.round,v=[],k,y=[],c,z=[],g,w=!this.maximum,G=this.maximum||0,F=this.steps,D=0,C,r,q,x=Math.PI*2,d=Math.cos,a=Math.sin,B=this.label.display,p=B!=="none",t=10;if(!p){return}u.series.each(function(j){y.push(j.yField);g=j.xField});h.each(function(j,I){if(w){for(I=0,c=y.length;I<c;I++){G=E(+j.get(y[I]),G)}}z.push(j.get(g))});if(!this.labelArray){if(B!="categories"){for(D=1;D<=F;D++){k=A.add({type:"text",text:H(D/F*G),x:n,y:m-e*D/F,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"});k.setAttributes({hidden:false},true);v.push(k)}}if(B!="scale"){for(C=0,F=z.length;C<F;C++){r=d(C/F*x)*(e+t);q=a(C/F*x)*(e+t);k=A.add({type:"text",text:z[C],x:n+r,y:m+q,"text-anchor":r*r<=0.001?"middle":(r<0?"end":"start")});k.setAttributes({hidden:false},true);v.push(k)}}}else{v=this.labelArray;if(B!="categories"){for(D=0;D<F;D++){v[D].setAttributes({text:H((D+1)/F*G),x:n,y:m-e*(D+1)/F,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"},true)}}if(B!="scale"){for(C=0,F=z.length;C<F;C++){r=d(C/F*x)*(e+t);q=a(C/F*x)*(e+t);if(v[D+C]){v[D+C].setAttributes({type:"text",text:z[C],x:n+r,y:m+q,"text-anchor":r*r<=0.001?"middle":(r<0?"end":"start")},true)}}}}this.labelArray=v}});Ext.define("Ext.data.AbstractStore",{requires:["Ext.util.MixedCollection","Ext.data.Operation","Ext.util.Filter"],mixins:{observable:"Ext.util.Observable",sortable:"Ext.util.Sortable"},statics:{create:function(a){if(!a.isStore){if(!a.type){a.type="store"}a=Ext.createByAlias("store."+a.type,a)}return a}},remoteSort:false,remoteFilter:false,autoLoad:false,autoSync:false,batchUpdateMode:"operation",filterOnLoad:true,sortOnLoad:true,implicitModel:false,defaultProxyType:"memory",isDestroyed:false,isStore:true,sortRoot:"data",constructor:function(a){var c=this,b;c.addEvents("add","remove","update","datachanged","beforeload","load","write","beforesync","clear");Ext.apply(c,a);c.removed=[];c.mixins.observable.constructor.apply(c,arguments);c.model=Ext.ModelManager.getModel(c.model);Ext.applyIf(c,{modelDefaults:{}});if(!c.model&&c.fields){c.model=Ext.define("Ext.data.Store.ImplicitModel-"+(c.storeId||Ext.id()),{extend:"Ext.data.Model",fields:c.fields,proxy:c.proxy||c.defaultProxyType});delete c.fields;c.implicitModel=true}c.setProxy(c.proxy||c.model.getProxy());if(c.id&&!c.storeId){c.storeId=c.id;delete c.id}if(c.storeId){Ext.data.StoreManager.register(c)}c.mixins.sortable.initSortable.call(c);b=c.decodeFilters(c.filters);c.filters=Ext.create("Ext.util.MixedCollection");c.filters.addAll(b)},setProxy:function(a){var b=this;if(a instanceof Ext.data.proxy.Proxy){a.setModel(b.model)}else{if(Ext.isString(a)){a={type:a}}Ext.applyIf(a,{model:b.model});a=Ext.createByAlias("proxy."+a.type,a)}b.proxy=a;return b.proxy},getProxy:function(){return this.proxy},create:function(e,c){var d=this,a=Ext.ModelManager.create(Ext.applyIf(e,d.modelDefaults),d.model.modelName),b;c=c||{};Ext.applyIf(c,{action:"create",records:[a]});b=Ext.create("Ext.data.Operation",c);d.proxy.create(b,d.onProxyWrite,d);return a},read:function(){return this.load.apply(this,arguments)},onProxyRead:Ext.emptyFn,update:function(b){var c=this,a;b=b||{};Ext.applyIf(b,{action:"update",records:c.getUpdatedRecords()});a=Ext.create("Ext.data.Operation",b);return c.proxy.update(a,c.onProxyWrite,c)},onProxyWrite:function(b){var c=this,d=b.wasSuccessful(),a=b.getRecords();switch(b.action){case"create":c.onCreateRecords(a,b,d);break;case"update":c.onUpdateRecords(a,b,d);break;case"destroy":c.onDestroyRecords(a,b,d);break}if(d){c.fireEvent("write",c,b);c.fireEvent("datachanged",c)}Ext.callback(b.callback,b.scope||c,[a,b,d])},destroy:function(b){var c=this,a;b=b||{};Ext.applyIf(b,{action:"destroy",records:c.getRemovedRecords()});a=Ext.create("Ext.data.Operation",b);return c.proxy.destroy(a,c.onProxyWrite,c)},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(c,a){var g=this,b=c.operations,e=b.length,d;g.suspendEvents();for(d=0;d<e;d++){g.onProxyWrite(b[d])}g.resumeEvents();g.fireEvent("datachanged",g)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom===true&&a.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},filterUpdated:function(a){return a.dirty===true&&a.phantom!==true&&a.isValid()},getRemovedRecords:function(){return this.removed},filter:function(a,b){},decodeFilters:function(e){if(!Ext.isArray(e)){if(e===undefined){e=[]}else{e=[e]}}var d=e.length,a=Ext.util.Filter,b,c;for(c=0;c<d;c++){b=e[c];if(!(b instanceof a)){Ext.apply(b,{root:"data"});if(b.fn){b.filterFn=b.fn}if(typeof b=="function"){b={filterFn:b}}e[c]=new a(b)}}return e},clearFilter:function(a){},isFiltered:function(){},filterBy:function(b,a){},sync:function(){var d=this,b={},e=d.getNewRecords(),c=d.getUpdatedRecords(),a=d.getRemovedRecords(),g=false;if(e.length>0){b.create=e;g=true}if(c.length>0){b.update=c;g=true}if(a.length>0){b.destroy=a;g=true}if(g&&d.fireEvent("beforesync",b)!==false){d.proxy.batch(b,d.getBatchListeners())}},getBatchListeners:function(){var b=this,a={scope:b,exception:b.onBatchException};if(b.batchUpdateMode=="operation"){a.operationcomplete=b.onBatchOperationComplete}else{a.complete=b.onBatchComplete}return a},save:function(){return this.sync.apply(this,arguments)},load:function(b){var c=this,a;b=b||{};Ext.applyIf(b,{action:"read",filters:c.filters.items,sorters:c.getSorters()});a=Ext.create("Ext.data.Operation",b);if(c.fireEvent("beforeload",c,a)!==false){c.loading=true;c.proxy.read(a,c.onProxyLoad,c)}return c},afterEdit:function(a){var b=this;if(b.autoSync){b.sync()}b.fireEvent("update",b,a,Ext.data.Model.EDIT)},afterReject:function(a){this.fireEvent("update",this,a,Ext.data.Model.REJECT)},afterCommit:function(a){this.fireEvent("update",this,a,Ext.data.Model.COMMIT)},clearData:Ext.emptyFn,destroyStore:function(){var a=this;if(!a.isDestroyed){if(a.storeId){Ext.data.StoreManager.unregister(a)}a.clearData();a.data=null;a.tree=null;a.reader=a.writer=null;a.clearListeners();a.isDestroyed=true;if(a.implicitModel){Ext.destroy(a.model)}}},doSort:function(a){var b=this;if(b.remoteSort){b.load()}else{b.data.sortBy(a);b.fireEvent("datachanged",b)}},getCount:Ext.emptyFn,getById:Ext.emptyFn,removeAll:Ext.emptyFn,isLoading:function(){return !!this.loading}});Ext.define("Ext.util.Grouper",{extend:"Ext.util.Sorter",getGroupString:function(a){return a.get(this.property)}});Ext.define("Ext.data.Store",{extend:"Ext.data.AbstractStore",alias:"store.store",requires:["Ext.data.StoreManager","Ext.ModelManager","Ext.data.Model","Ext.util.Grouper"],uses:["Ext.data.proxy.Memory"],remoteSort:false,remoteFilter:false,remoteGroup:false,groupField:undefined,groupDir:"ASC",pageSize:25,currentPage:1,clearOnPageLoad:true,loading:false,sortOnFilter:true,buffered:false,purgePageCount:5,isStore:true,onClassExtended:function(a,c){var b=c.model;if(typeof b=="string"){var d=c.onBeforeClassCreated;c.onBeforeClassCreated=function(e,h){var g=this;Ext.require(b,function(){d.call(g,e,h)})}}},constructor:function(b){b=Ext.Object.merge({},b);var d=this,g=b.groupers||d.groupers,a=b.groupField||d.groupField,c,e;if(b.buffered||d.buffered){d.prefetchData=Ext.create("Ext.util.MixedCollection",false,function(h){return h.index});d.pendingRequests=[];d.pagesRequested=[];d.sortOnLoad=false;d.filterOnLoad=false}d.addEvents("beforeprefetch","groupchange","prefetch");e=b.data||d.data;d.data=Ext.create("Ext.util.MixedCollection",false,function(h){return h.internalId});if(e){d.inlineData=e;delete b.data}if(!g&&a){g=[{property:a,direction:b.groupDir||d.groupDir}]}delete b.groupers;d.groupers=Ext.create("Ext.util.MixedCollection");d.groupers.addAll(d.decodeGroupers(g));this.callParent([b]);if(d.groupers.items.length){d.sort(d.groupers.items,"prepend",false)}c=d.proxy;e=d.inlineData;if(e){if(c instanceof Ext.data.proxy.Memory){c.data=e;d.read()}else{d.add.apply(d,e)}d.sort();delete d.inlineData}else{if(d.autoLoad){Ext.defer(d.load,10,d,[typeof d.autoLoad==="object"?d.autoLoad:undefined])}}},onBeforeSort:function(){var a=this.groupers;if(a.getCount()>0){this.sort(a.items,"prepend",false)}},decodeGroupers:function(d){if(!Ext.isArray(d)){if(d===undefined){d=[]}else{d=[d]}}var c=d.length,e=Ext.util.Grouper,a,b;for(b=0;b<c;b++){a=d[b];if(!(a instanceof e)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:"data",direction:"ASC"});if(a.fn){a.sorterFn=a.fn}if(typeof a=="function"){a={sorterFn:a}}d[b]=new e(a)}}return d},group:function(e,g){var d=this,c=false,b,a;if(Ext.isArray(e)){a=e}else{if(Ext.isObject(e)){a=[e]}else{if(Ext.isString(e)){b=d.groupers.get(e);if(!b){b={property:e,direction:g};a=[b]}else{if(g===undefined){b.toggle()}else{b.setDirection(g)}}}}}if(a&&a.length){c=true;a=d.decodeGroupers(a);d.groupers.clear();d.groupers.addAll(a)}if(d.remoteGroup){d.load({scope:d,callback:d.fireGroupChange})}else{d.sort(null,null,null,c);d.fireGroupChange()}},clearGrouping:function(){var a=this;a.groupers.each(function(b){a.sorters.remove(b)});a.groupers.clear();if(a.remoteGroup){a.load({scope:a,callback:a.fireGroupChange})}else{a.sort();a.fireEvent("groupchange",a,a.groupers)}},isGrouped:function(){return this.groupers.getCount()>0},fireGroupChange:function(){this.fireEvent("groupchange",this,this.groupers)},getGroups:function(b){var d=this.data.items,a=d.length,c=[],k={},g,h,j,e;for(e=0;e<a;e++){g=d[e];h=this.getGroupString(g);j=k[h];if(j===undefined){j={name:h,children:[]};c.push(j);k[h]=j}j.children.push(g)}return b?k[b]:c},getGroupsForGrouper:function(g,b){var d=g.length,e=[],a,c,j,k,h;for(h=0;h<d;h++){j=g[h];c=b.getGroupString(j);if(c!==a){k={name:c,grouper:b,records:[]};e.push(k)}k.records.push(j);a=c}return e},getGroupsForGrouperIndex:function(c,j){var g=this,h=g.groupers,b=h.getAt(j),a=g.getGroupsForGrouper(c,b),e=a.length,d;if(j+1<h.length){for(d=0;d<e;d++){a[d].children=g.getGroupsForGrouperIndex(a[d].records,j+1)}}for(d=0;d<e;d++){a[d].depth=j}return a},getGroupData:function(a){var b=this;if(a!==false){b.sort()}return b.getGroupsForGrouperIndex(b.data.items,0)},getGroupString:function(a){var b=this.groupers.first();if(b){return a.get(b.property)}return""},insert:function(d,c){var h=this,g=false,e,b,a;c=[].concat(c);for(e=0,a=c.length;e<a;e++){b=h.createModel(c[e]);b.set(h.modelDefaults);c[e]=b;h.data.insert(d+e,b);b.join(h);g=g||b.phantom===true}if(h.snapshot){h.snapshot.addAll(c)}h.fireEvent("add",h,c,d);h.fireEvent("datachanged",h);if(h.autoSync&&g){h.sync()}},add:function(b){if(!Ext.isArray(b)){b=Array.prototype.slice.apply(arguments)}var e=this,c=0,d=b.length,a;for(;c<d;c++){a=e.createModel(b[c]);b[c]=a}e.insert(e.data.length,b);return b},createModel:function(a){if(!a.isModel){a=Ext.ModelManager.create(a,this.model)}return a},each:function(b,a){this.data.each(b,a)},remove:function(b,k){if(!Ext.isArray(b)){b=[b]}k=k===true;var g=this,h=false,c=0,a=b.length,j,e,d;for(;c<a;c++){d=b[c];e=g.data.indexOf(d);if(g.snapshot){g.snapshot.remove(d)}if(e>-1){j=d.phantom===true;if(!k&&!j){g.removed.push(d)}d.unjoin(g);g.data.remove(d);h=h||!j;g.fireEvent("remove",g,d,e)}}g.fireEvent("datachanged",g);if(!k&&g.autoSync&&h){g.sync()}},removeAt:function(b){var a=this.getAt(b);if(a){this.remove(a)}},load:function(a){var b=this;a=a||{};if(Ext.isFunction(a)){a={callback:a}}Ext.applyIf(a,{groupers:b.groupers.items,page:b.currentPage,start:(b.currentPage-1)*b.pageSize,limit:b.pageSize,addRecords:false});return b.callParent([a])},onProxyLoad:function(b){var d=this,c=b.getResultSet(),a=b.getRecords(),e=b.wasSuccessful();if(c){d.totalCount=c.total}if(e){d.loadRecords(a,b)}d.loading=false;d.fireEvent("load",d,a,e);d.fireEvent("read",d,a,b.wasSuccessful());Ext.callback(b.callback,b.scope||d,[a,b,e])},onCreateRecords:function(d,e,n){if(n){var h=0,g=this.data,a=this.snapshot,b=d.length,m=e.records,j,c,k;for(;h<b;++h){j=d[h];c=m[h];if(c){k=g.indexOf(c);if(k>-1){g.removeAt(k);g.insert(k,j)}if(a){k=a.indexOf(c);if(k>-1){a.removeAt(k);a.insert(k,j)}}j.phantom=false;j.join(this)}}}},onUpdateRecords:function(d,c,j){if(j){var e=0,g=d.length,h=this.data,b=this.snapshot,a;for(;e<g;++e){a=d[e];h.replace(a);if(b){b.replace(a)}a.join(this)}}},onDestroyRecords:function(c,d,k){if(k){var j=this,g=0,b=c.length,e=j.data,a=j.snapshot,h;for(;g<b;++g){h=c[g];h.unjoin(j);e.remove(h);if(a){a.remove(h)}}j.removed=[]}},getNewRecords:function(){return this.data.filterBy(this.filterNew).items},getUpdatedRecords:function(){return this.data.filterBy(this.filterUpdated).items},filter:function(e,g){if(Ext.isString(e)){e={property:e,value:g}}var d=this,a=d.decodeFilters(e),b=0,h=d.sortOnFilter&&!d.remoteSort,c=a.length;for(;b<c;b++){d.filters.replace(a[b])}if(d.remoteFilter){d.load()}else{if(d.filters.getCount()){d.snapshot=d.snapshot||d.data.clone();d.data=d.data.filter(d.filters.items);if(h){d.sort()}if(!h||d.sorters.length<1){d.fireEvent("datachanged",d)}}}},clearFilter:function(a){var b=this;b.filters.clear();if(b.remoteFilter){b.load()}else{if(b.isFiltered()){b.data=b.snapshot.clone();delete b.snapshot;if(a!==true){b.fireEvent("datachanged",b)}}}},isFiltered:function(){var a=this.snapshot;return !!a&&a!==this.data},filterBy:function(b,a){var c=this;c.snapshot=c.snapshot||c.data.clone();c.data=c.queryBy(b,a||c);c.fireEvent("datachanged",c)},queryBy:function(b,a){var c=this,d=c.snapshot||c.data;return d.filterBy(b,a||c)},loadData:function(h,a){var c=this.model,g=h.length,e=[],d,b;for(d=0;d<g;d++){b=h[d];if(!(b instanceof Ext.data.Model)){b=Ext.ModelManager.create(b,c)}e.push(b)}this.loadRecords(e,{addRecords:a})},loadRawData:function(e,b){var d=this,a=d.proxy.reader.read(e),c=a.records;if(a.success){d.loadRecords(c,{addRecords:b});d.fireEvent("load",d,c,true)}},loadRecords:function(a,b){var e=this,c=0,d=a.length;b=b||{};if(!b.addRecords){delete e.snapshot;e.clearData()}e.data.addAll(a);for(;c<d;c++){if(b.start!==undefined){a[c].index=b.start+c}a[c].join(e)}e.suspendEvents();if(e.filterOnLoad&&!e.remoteFilter){e.filter()}if(e.sortOnLoad&&!e.remoteSort){e.sort()}e.resumeEvents();e.fireEvent("datachanged",e,a)},loadPage:function(c,a){var b=this;a=Ext.apply({},a);b.currentPage=c;b.read(Ext.applyIf(a,{page:c,start:(c-1)*b.pageSize,limit:b.pageSize,addRecords:!b.clearOnPageLoad}))},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(){var a=this;a.data.each(function(b){b.unjoin(a)});a.data.clear()},prefetch:function(b){var c=this,a,d=c.getRequestId();b=b||{};Ext.applyIf(b,{action:"read",filters:c.filters.items,sorters:c.sorters.items,requestId:d});c.pendingRequests.push(d);a=Ext.create("Ext.data.Operation",b);if(c.fireEvent("beforeprefetch",c,a)!==false){c.loading=true;c.proxy.read(a,c.onProxyPrefetch,c)}return c},prefetchPage:function(e,c){var d=this,b=d.pageSize,g=(e-1)*d.pageSize,a=g+b;if(Ext.Array.indexOf(d.pagesRequested,e)===-1&&!d.rangeSatisfied(g,a)){c=c||{};d.pagesRequested.push(e);Ext.applyIf(c,{page:e,start:g,limit:b,callback:d.onWaitForGuarantee,scope:d});d.prefetch(c)}},getRequestId:function(){this.requestSeed=this.requestSeed||1;return this.requestSeed++},onProxyPrefetch:function(b){var d=this,c=b.getResultSet(),a=b.getRecords(),e=b.wasSuccessful();if(c){d.totalCount=c.total;d.fireEvent("totalcountchange",d.totalCount)}if(e){d.cacheRecords(a,b)}Ext.Array.remove(d.pendingRequests,b.requestId);if(b.page){Ext.Array.remove(d.pagesRequested,b.page)}d.loading=false;d.fireEvent("prefetch",d,a,e,b);if(b.blocking){d.fireEvent("load",d,a,e)}Ext.callback(b.callback,b.scope||d,[a,b,e])},cacheRecords:function(b,a){var e=this,c=0,d=b.length,g=a?a.start:0;if(!Ext.isDefined(e.totalCount)){e.totalCount=b.length;e.fireEvent("totalcountchange",e.totalCount)}for(;c<d;c++){b[c].index=g+c}e.prefetchData.addAll(b);if(e.purgePageCount){e.purgeRecords()}},purgeRecords:function(){var c=this,b=c.prefetchData.getCount(),d=c.purgePageCount*c.pageSize,e=b-d-1,a=0;for(;a<=e;a++){c.prefetchData.removeAt(0)}},rangeSatisfied:function(e,a){var c=this,b=e,d=true;for(;b<a;b++){if(!c.prefetchData.getByKey(b)){d=false;break}}return d},getPageFromRecordIndex:function(a){return Math.floor(a/this.pageSize)+1},onGuaranteedRange:function(){var g=this,c=g.getTotalCount(),h=g.requestStart,b=((c-1)<g.requestEnd)?c-1:g.requestEnd,d=[],a,e=h;b=Math.max(0,b);if(h!==g.guaranteedStart&&b!==g.guaranteedEnd){g.guaranteedStart=h;g.guaranteedEnd=b;for(;e<=b;e++){a=g.prefetchData.getByKey(e);if(a){d.push(a)}}g.fireEvent("guaranteedrange",d,h,b);if(g.cb){g.cb.call(g.scope||g,d)}}g.unmask()},mask:function(){this.masked=true;this.fireEvent("beforeload")},unmask:function(){if(this.masked){this.fireEvent("load")}},hasPendingRequests:function(){return this.pendingRequests.length},onWaitForGuarantee:function(){if(!this.hasPendingRequests()){this.onGuaranteedRange()}},guaranteeRange:function(a,c,b,p){c=(c>this.totalCount)?this.totalCount-1:c;var j=this,d=a,m=j.prefetchData,e=[],h=!!m.getByKey(a),k=!!m.getByKey(c),g=j.getPageFromRecordIndex(a),n=j.getPageFromRecordIndex(c);j.cb=b;j.scope=p;j.requestStart=a;j.requestEnd=c;if(!h||!k){if(g===n){j.mask();j.prefetchPage(g,{callback:j.onWaitForGuarantee,scope:j})}else{j.mask();j.prefetchPage(g,{callback:j.onWaitForGuarantee,scope:j});j.prefetchPage(n,{callback:j.onWaitForGuarantee,scope:j})}}else{j.onGuaranteedRange()}},sort:function(){var d=this,c=d.prefetchData,e,g,a,b;if(d.buffered){if(d.remoteSort){c.clear();d.callParent(arguments)}else{e=d.getSorters();g=d.guaranteedStart;a=d.guaranteedEnd;if(e.length){c.sort(e);b=c.getRange();c.clear();d.cacheRecords(b);delete d.guaranteedStart;delete d.guaranteedEnd;d.guaranteeRange(g,a)}d.callParent(arguments)}}else{d.callParent(arguments)}},doSort:function(b){var e=this;if(e.remoteSort){e.load()}else{e.data.sortBy(b);if(!e.buffered){var a=e.getRange(),d=a.length,c=0;for(;c<d;c++){a[c].index=c}}e.fireEvent("datachanged",e)}},find:function(e,d,h,g,a,c){var b=this.createFilterFn(e,d,g,a,c);return b?this.data.findIndexBy(b,null,h):-1},findRecord:function(){var b=this,a=b.find.apply(b,arguments);return a!==-1?b.getAt(a):null},createFilterFn:function(d,c,e,a,b){if(Ext.isEmpty(c)){return false}c=this.data.createValueMatcher(c,e,a,b);return function(g){return c.test(g.data[d])}},findExact:function(b,a,c){return this.data.findIndexBy(function(d){return d.get(b)==a},this,c)},findBy:function(b,a,c){return this.data.findIndexBy(b,a,c)},collect:function(b,a,c){var d=this,e=(c===true&&d.snapshot)?d.snapshot:d.data;return e.collect(b,"data",a)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalCount},getAt:function(a){return this.data.getAt(a)},getRange:function(b,a){return this.data.getRange(b,a)},getById:function(a){return(this.snapshot||this.data).findBy(function(b){return b.getId()===a})},indexOf:function(a){return this.data.indexOf(a)},indexOfTotal:function(a){var b=a.index;if(b||b===0){return b}return this.indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},removeAll:function(a){var b=this;b.clearData();if(b.snapshot){b.snapshot.clear()}if(a!==true){b.fireEvent("clear",b)}},first:function(a){var b=this;if(a&&b.isGrouped()){return b.aggregate(function(c){return c.length?c[0]:undefined},b,true)}else{return b.data.first()}},last:function(a){var b=this;if(a&&b.isGrouped()){return b.aggregate(function(d){var c=d.length;return c?d[c-1]:undefined},b,true)}else{return b.data.last()}},sum:function(c,a){var b=this;if(a&&b.isGrouped()){return b.aggregate(b.getSum,b,true,[c])}else{return b.getSum(b.data.items,c)}},getSum:function(b,e){var d=0,c=0,a=b.length;for(;c<a;++c){d+=b[c].get(e)}return d},count:function(a){var b=this;if(a&&b.isGrouped()){return b.aggregate(function(c){return c.length},b,true)}else{return b.getCount()}},min:function(c,a){var b=this;if(a&&b.isGrouped()){return b.aggregate(b.getMin,b,true,[c])}else{return b.getMin(b.data.items,c)}},getMin:function(b,g){var d=1,a=b.length,e,c;if(a>0){c=b[0].get(g)}for(;d<a;++d){e=b[d].get(g);if(e<c){c=e}}return c},max:function(c,a){var b=this;if(a&&b.isGrouped()){return b.aggregate(b.getMax,b,true,[c])}else{return b.getMax(b.data.items,c)}},getMax:function(c,g){var d=1,b=c.length,e,a;if(b>0){a=c[0].get(g)}for(;d<b;++d){e=c[d].get(g);if(e>a){a=e}}return a},average:function(c,a){var b=this;if(a&&b.isGrouped()){return b.aggregate(b.getAverage,b,true,[c])}else{return b.getAverage(b.data.items,c)}},getAverage:function(b,e){var c=0,a=b.length,d=0;if(b.length>0){for(;c<a;++c){d+=b[c].get(e)}return d/a}return 0},aggregate:function(h,k,e,g){g=g||[];if(e&&this.isGrouped()){var a=this.getGroups(),c=0,d=a.length,b={},j;for(;c<d;++c){j=a[c];b[j.name]=h.apply(k||this,[j.children].concat(g))}return b}else{return h.apply(k||this,[this.data.items].concat(g))}}},function(){Ext.regStore("ext-empty-store",{fields:[],proxy:"proxy"})});Ext.define("Ext.data.JsonStore",{extend:"Ext.data.Store",alias:"store.json",constructor:function(a){a=a||{};Ext.applyIf(a,{proxy:{type:"ajax",reader:"json",writer:"json"}});this.callParent([a])}});Ext.define("Ext.chart.axis.Time",{extend:"Ext.chart.axis.Numeric",alternateClassName:"Ext.chart.TimeAxis",alias:"axis.time",requires:["Ext.data.Store","Ext.data.JsonStore"],dateFormat:false,fromDate:false,toDate:false,step:[Ext.Date.DAY,1],constrain:false,roundToDecimal:false,constructor:function(b){var c=this,a,d,e;c.callParent([b]);a=c.label||{};e=this.dateFormat;if(e){if(a.renderer){d=a.renderer;a.renderer=function(g){g=d(g);return Ext.Date.format(new Date(d(g)),e)}}else{a.renderer=function(g){return Ext.Date.format(new Date(g>>0),e)}}}},doConstrain:function(){var u=this,d=u.chart.store,v=[],h=u.chart.series.items,c=Math,w=c.max,t=c.min,k=u.fields,g=k.length,j=u.getRange(),n=j.min,q=j.max,r,p,b=[],m,a,e,v=[];for(r=0,p=h.length;r<p;r++){b[r]=h[r].__excludes}d.each(function(x){for(r=0;r<g;r++){if(b[r]){continue}m=x.get(k[r]);if(+m<+n){return}if(+m>+q){return}}v.push(x)});u.chart.substore=Ext.create("Ext.data.JsonStore",{model:d.model,data:v})},processView:function(){var a=this;if(a.fromDate){a.minimum=+a.fromDate}if(a.toDate){a.maximum=+a.toDate}if(a.constrain){a.doConstrain()}},calcEnds:function(){var c=this,a,b=c.step;if(b){a=c.getRange();a=Ext.draw.Draw.snapEndsByDateAndStep(new Date(a.min),new Date(a.max),Ext.isNumber(b)?[Date.MILLI,b]:b);if(c.minimum){a.from=c.minimum}if(c.maximum){a.to=c.maximum}a.step=(a.to-a.from)/a.steps;return a}else{return c.callParent(arguments)}}});Ext.define("Ext.chart.series.Series",{mixins:{observable:"Ext.util.Observable",labels:"Ext.chart.Label",highlights:"Ext.chart.Highlight",tips:"Ext.chart.Tip",callouts:"Ext.chart.Callout"},type:null,title:null,showInLegend:true,renderer:function(e,a,c,d,b){return c},shadowAttributes:null,triggerAfterDraw:false,constructor:function(a){var b=this;if(a){Ext.apply(b,a)}b.shadowGroups=[];b.mixins.labels.constructor.call(b,a);b.mixins.highlights.constructor.call(b,a);b.mixins.tips.constructor.call(b,a);b.mixins.callouts.constructor.call(b,a);b.addEvents({scope:b,itemmouseover:true,itemmouseout:true,itemmousedown:true,itemmouseup:true,mouseleave:true,afterdraw:true,titlechange:true});b.mixins.observable.constructor.call(b,a);b.on({scope:b,itemmouseover:b.onItemMouseOver,itemmouseout:b.onItemMouseOut,mouseleave:b.onMouseLeave})},eachRecord:function(c,b){var a=this.chart;(a.substore||a.store).each(c,b)},getRecordCount:function(){var b=this.chart,a=b.substore||b.store;return a?a.getCount():0},isExcluded:function(a){var b=this.__excludes;return !!(b&&b[a])},setBBox:function(a){var e=this,c=e.chart,b=c.chartBBox,g=a?0:c.maxGutter[0],d=a?0:c.maxGutter[1],h,j;h={x:b.x,y:b.y,width:b.width,height:b.height};e.clipBox=h;j={x:(h.x+g)-(c.zoom.x*c.zoom.width),y:(h.y+d)-(c.zoom.y*c.zoom.height),width:(h.width-(g*2))*c.zoom.width,height:(h.height-(d*2))*c.zoom.height};e.bbox=j},onAnimate:function(b,a){var c=this;b.stopAnimation();if(c.triggerAfterDraw){return b.animate(Ext.applyIf(a,c.chart.animate))}else{c.triggerAfterDraw=true;return b.animate(Ext.apply(Ext.applyIf(a,c.chart.animate),{listeners:{afteranimate:function(){c.triggerAfterDraw=false;c.fireEvent("afterrender")}}}))}},getGutters:function(){return[0,0]},onItemMouseOver:function(b){var a=this;if(b.series===a){if(a.highlight){a.highlightItem(b)}if(a.tooltip){a.showTip(b)}}},onItemMouseOut:function(b){var a=this;if(b.series===a){a.unHighlightItem();if(a.tooltip){a.hideTip(b)}}},onMouseLeave:function(){var a=this;a.unHighlightItem();if(a.tooltip){a.hideTip()}},getItemForPoint:function(a,j){if(!this.items||!this.items.length||this.seriesIsHidden){return null}var g=this,b=g.items,h=g.bbox,e,c,d;if(!Ext.draw.Draw.withinBox(a,j,h)){return null}for(c=0,d=b.length;c<d;c++){if(b[c]&&this.isItemInPoint(a,j,b[c],c)){return b[c]}}return null},isItemInPoint:function(a,d,c,b){return false},hideAll:function(){var h=this,g=h.items,m,e,d,c,a,k,b;h.seriesIsHidden=true;h._prevShowMarkers=h.showMarkers;h.showMarkers=false;h.hideLabels(0);for(d=0,e=g.length;d<e;d++){m=g[d];k=m.sprite;if(k){k.setAttributes({hidden:true},true)}if(k&&k.shadows){b=k.shadows;for(c=0,a=b.length;c<a;++c){b[c].setAttributes({hidden:true},true)}}}},showAll:function(){var a=this,b=a.chart.animate;a.chart.animate=false;a.seriesIsHidden=false;a.showMarkers=a._prevShowMarkers;a.drawSeries();a.chart.animate=b},getLegendColor:function(a){var b=this,d,c;if(b.seriesStyle){d=b.seriesStyle.fill;c=b.seriesStyle.stroke;if(d&&d!="none"){return d}return c}return"#000"},visibleInLegend:function(a){var b=this.__excludes;if(b){return !b[a]}return !this.seriesIsHidden},setTitle:function(a,d){var c=this,b=c.title;if(Ext.isString(a)){d=a;a=0}if(Ext.isArray(b)){b[a]=d}else{c.title=d}c.fireEvent("titlechange",d,a)}});Ext.define("Ext.chart.series.Cartesian",{extend:"Ext.chart.series.Series",alternateClassName:["Ext.chart.CartesianSeries","Ext.chart.CartesianChart"],xField:null,yField:null,axis:"left",getLegendLabels:function(){var b=this,c=[],a=b.combinations;Ext.each([].concat(b.yField),function(e,d){var g=b.title;c.push((Ext.isArray(g)?g[d]:g)||e)});if(a){Ext.each(a,function(e){var d=c[e[0]],g=c[e[1]];c[e[1]]=d+" & "+g;c.splice(e[0],1)})}return c},eachYValue:function(a,c,b){Ext.each(this.getYValueAccessors(),function(d,e){c.call(b,d(a),e)})},getYValueCount:function(){return this.getYValueAccessors().length},combine:function(g,e){var d=this,c=d.getYValueAccessors(),b=c[g],a=c[e];c[e]=function(h){return b(h)+a(h)};c.splice(g,1);d.callParent([g,e])},clearCombinations:function(){delete this.yValueAccessors;this.callParent()},getYValueAccessors:function(){var b=this,a=b.yValueAccessors;if(!a){a=b.yValueAccessors=[];Ext.each([].concat(b.yField),function(c){a.push(function(d){return d.get(c)})})}return a},getMinMaxXValues:function(){var d=this,b,a,c=d.xField;if(d.getRecordCount()>0){b=Infinity;a=-b;d.eachRecord(function(e){var g=e.get(c);if(g>a){a=g}if(g<b){b=g}})}else{b=a=0}return[b,a]},getMinMaxYValues:function(){var j=this,g=j.stacked,e,c,d,b;function h(m,k){if(!j.isExcluded(k)){if(m<0){b+=m}else{d+=m}}}function a(m,k){if(!j.isExcluded(k)){if(m>c){c=m}if(m<e){e=m}}}if(j.getRecordCount()>0){e=Infinity;c=-e;j.eachRecord(function(k){if(g){d=0;b=0;j.eachYValue(k,h);if(d>c){c=d}if(b<e){e=b}}else{j.eachYValue(k,a)}})}else{e=c=0}return[e,c]},getAxesForXAndYFields:function(){var c=this,e=c.chart.axes,b=[].concat(c.axis),d,a;if(Ext.Array.indexOf(b,"top")>-1){d="top"}else{if(Ext.Array.indexOf(b,"bottom")>-1){d="bottom"}else{if(e.get("top")){d="top"}else{if(e.get("bottom")){d="bottom"}}}}if(Ext.Array.indexOf(b,"left")>-1){a="left"}else{if(Ext.Array.indexOf(b,"right")>-1){a="right"}else{if(e.get("left")){a="left"}else{if(e.get("right")){a="right"}}}}return{xAxis:d,yAxis:a}}});Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.Cartesian",alias:"series.area",requires:["Ext.chart.axis.Axis","Ext.draw.Color","Ext.fx.Anim"],type:"area",stacked:true,style:{},constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,d,b;Ext.apply(e,c,{__excludes:[],highlightCfg:{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"}});if(e.highlight){e.highlightSprite=a.add({type:"path",path:["M",0,0],zIndex:1000,opacity:0.3,lineWidth:5,hidden:true,stroke:"#444"})}e.group=a.getGroup(e.seriesId)},shrink:function(b,p,q){var k=b.length,n=Math.floor(k/q),h,g,d=0,m=this.areas.length,a=[],e=[],c=[];for(g=0;g<m;++g){a[g]=0}for(h=0;h<k;++h){d+=b[h];for(g=0;g<m;++g){a[g]+=p[h][g]}if(h%n==0){e.push(d/n);for(g=0;g<m;++g){a[g]/=n}c.push(a);d=0;for(g=0,a=[];g<m;++g){a[g]=0}}}return{x:e,y:c}},getBounds:function(){var z=this,n=z.chart,h=n.getChartStore(),g=[].concat(z.yField),B=g.length,q=[],d=[],A=Infinity,x=A,v=A,w=-A,u=-A,c=Math,y=c.min,E=c.max,a,D,b,p,r,C,k,j,e,m,t;z.setBBox();a=z.bbox;if(z.axis){axis=n.axes.get(z.axis);if(axis){out=axis.calcEnds();v=out.from||axis.prevMin;u=E(out.to||axis.prevMax,0)}}if(z.yField&&!Ext.isNumber(v)){axis=Ext.create("Ext.chart.axis.Axis",{chart:n,fields:[].concat(z.yField)});out=axis.calcEnds();v=out.from||axis.prevMin;u=E(out.to||axis.prevMax,0)}if(!Ext.isNumber(v)){v=0}if(!Ext.isNumber(u)){u=0}h.each(function(F,G){p=F.get(z.xField);r=[];if(typeof p!="number"){p=G}q.push(p);k=0;for(C=0;C<B;C++){t=F.get(g[C]);if(typeof t=="number"){v=y(v,t);r.push(t);k+=t}}x=y(x,p);w=E(w,p);u=E(u,k);d.push(r)},z);D=a.width/((w-x)||1);b=a.height/((u-v)||1);j=q.length;if((j>a.width)&&z.areas){e=z.shrink(q,d,a.width);q=e.x;d=e.y}return{bbox:a,minX:x,minY:v,xValues:q,yValues:d,xScale:D,yScale:b,areasLen:B}},getPaths:function(){var A=this,m=A.chart,c=m.getChartStore(),d=true,e=A.getBounds(),a=e.bbox,n=A.items=[],z=[],b,q=[],u,h,j,g,r,v,k,B,t,w,p;h=e.xValues.length;for(u=0;u<h;u++){r=e.xValues[u];v=e.yValues[u];j=a.x+(r-e.minX)*e.xScale;k=0;for(B=0;B<e.areasLen;B++){if(A.__excludes[B]){continue}if(!z[B]){z[B]=[]}w=v[B];k+=w;g=a.y+a.height-(k-e.minY)*e.yScale;if(!q[B]){q[B]=["M",j,g];z[B].push(["L",j,g])}else{q[B].push("L",j,g);z[B].push(["L",j,g])}if(!n[B]){n[B]={pointsUp:[],pointsDown:[],series:A}}n[B].pointsUp.push([j,g])}}for(B=0;B<e.areasLen;B++){if(A.__excludes[B]){continue}p=q[B];if(B==0||d){d=false;p.push("L",j,a.y+a.height,"L",a.x,a.y+a.height,"Z")}else{b=z[t];b.reverse();p.push("L",j,b[0][2]);for(u=0;u<h;u++){p.push(b[u][0],b[u][1],b[u][2]);n[B].pointsDown[h-u-1]=[b[u][1],b[u][2]]}p.push("L",a.x,p[2],"Z")}t=B}return{paths:q,areasLen:e.areasLen}},drawSeries:function(){var h=this,g=h.chart,j=g.getChartStore(),c=g.surface,b=g.animate,m=h.group,a=Ext.apply(h.seriesStyle,h.style),n=h.colorArrayStyle,r=n&&n.length||0,d,e,q,p,k;h.unHighlightItem();h.cleanHighlights();if(!j||!j.getCount()){return}q=h.getPaths();if(!h.areas){h.areas=[]}for(d=0;d<q.areasLen;d++){if(h.__excludes[d]){continue}if(!h.areas[d]){h.items[d].sprite=h.areas[d]=c.add(Ext.apply({},{type:"path",group:m,path:q.paths[d],stroke:a.stroke||n[d%r],fill:n[d%r]},a||{}))}e=h.areas[d];p=q.paths[d];if(b){k=h.renderer(e,false,{path:p,fill:n[d%r],stroke:a.stroke||n[d%r]},d,j);h.animation=h.onAnimate(e,{to:k})}else{k=h.renderer(e,false,{path:p,hidden:false,fill:n[d%r],stroke:a.stroke||n[d%r]},d,j);h.areas[d].setAttributes(k,true)}}h.renderLabels();h.renderCallouts()},onAnimate:function(b,a){b.show();return this.callParent(arguments)},onCreateLabel:function(d,k,c,e){var g=this,h=g.labelsGroup,a=g.label,j=g.bbox,b=Ext.apply(a,g.seriesLabelStyle);return g.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:h,x:k.point[0],y:j.y+j.height/2},b||{}))},onPlaceLabel:function(g,k,v,r,q,c,e){var z=this,m=z.chart,u=m.resizing,w=z.label,t=w.renderer,b=w.field,a=z.bbox,j=v.point[0],h=v.point[1],d,p,n;g.setAttributes({text:t(k.get(b[e])),hidden:true},true);d=g.getBBox();p=d.width/2;n=d.height/2;j=j-p<a.x?a.x+p:j;j=(j+p>a.x+a.width)?(j-(j+p-a.x-a.width)):j;h=h-n<a.y?a.y+n:h;h=(h+n>a.y+a.height)?(h-(h+n-a.y-a.height)):h;if(z.chart.animate&&!z.chart.resizing){g.show(true);z.onAnimate(g,{to:{x:j,y:h}})}else{g.setAttributes({x:j,y:h},true);if(u){z.animation.on("afteranimate",function(){g.show(true)})}else{g.show(true)}}},onPlaceCallout:function(n,u,M,J,I,d,k){var P=this,v=P.chart,G=v.surface,K=v.resizing,O=P.callouts,w=P.items,A=(J==0)?false:w[J-1].point,C=(J==w.length-1)?false:w[J+1].point,c=M.point,D,g,Q,N,r,t,b=n.label.getBBox(),L=30,F=10,E=3,h,e,j,B,z,H=P.clipRect,q,m;if(!A){A=c}if(!C){C=c}N=(C[1]-A[1])/(C[0]-A[0]);r=(c[1]-A[1])/(c[0]-A[0]);t=(C[1]-c[1])/(C[0]-c[0]);g=Math.sqrt(1+N*N);D=[1/g,N/g];Q=[-D[1],D[0]];if(r>0&&t<0&&Q[1]<0||r<0&&t>0&&Q[1]>0){Q[0]*=-1;Q[1]*=-1}else{if(Math.abs(r)<Math.abs(t)&&Q[0]<0||Math.abs(r)>Math.abs(t)&&Q[0]>0){Q[0]*=-1;Q[1]*=-1}}q=c[0]+Q[0]*L;m=c[1]+Q[1]*L;h=q+(Q[0]>0?0:-(b.width+2*E));e=m-b.height/2-E;j=b.width+2*E;B=b.height+2*E;if(h<H[0]||(h+j)>(H[0]+H[2])){Q[0]*=-1}if(e<H[1]||(e+B)>(H[1]+H[3])){Q[1]*=-1}q=c[0]+Q[0]*L;m=c[1]+Q[1]*L;h=q+(Q[0]>0?0:-(b.width+2*E));e=m-b.height/2-E;j=b.width+2*E;B=b.height+2*E;n.lines.setAttributes({path:["M",c[0],c[1],"L",q,m,"Z"]},true);n.box.setAttributes({x:h,y:e,width:j,height:B},true);n.label.setAttributes({x:q+(Q[0]>0?E:-(b.width+E)),y:m},true);for(z in n){n[z].show(true)}},isItemInPoint:function(j,h,m,c){var g=this,b=m.pointsUp,d=m.pointsDown,q=Math.abs,e=Infinity,a,n,k;for(a=0,n=b.length;a<n;a++){k=[b[a][0],b[a][1]];if(e>q(j-k[0])){e=q(j-k[0])}else{k=b[a-1];if(h>=k[1]&&(!d.length||h<=(d[a-1][1]))){m.storeIndex=a-1;m.storeField=g.yField[c];m.storeItem=g.chart.store.getAt(a-1);m._points=d.length?[k,d[a-1]]:[k];return true}else{break}}}return false},highlightSeries:function(){var a,c,b;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}a.__highlighted=true;a.__prevOpacity=a.__prevOpacity||a.attr.opacity||1;a.__prevFill=a.__prevFill||a.attr.fill;a.__prevLineWidth=a.__prevLineWidth||a.attr.lineWidth;b=Ext.draw.Color.fromString(a.__prevFill);c={lineWidth:(a.__prevLineWidth||0)+2};if(b){c.fill=b.getLighter(0.2).toString()}else{c.opacity=Math.max(a.__prevOpacity-0.3,0)}if(this.chart.animate){a.__highlightAnim=Ext.create("Ext.fx.Anim",Ext.apply({target:a,to:c},this.chart.animate))}else{a.setAttributes(c,true)}}},unHighlightSeries:function(){var a;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}if(a.__highlighted){a.__highlighted=false;a.__highlightAnim=Ext.create("Ext.fx.Anim",{target:a,to:{fill:a.__prevFill,opacity:a.__prevOpacity,lineWidth:a.__prevLineWidth}})}}},highlightItem:function(c){var b=this,a,d;if(!c){this.highlightSeries();return}a=c._points;d=a.length==2?["M",a[0][0],a[0][1],"L",a[1][0],a[1][1]]:["M",a[0][0],a[0][1],"L",a[0][0],b.bbox.y+b.bbox.height];b.highlightSprite.setAttributes({path:d,hidden:false},true)},unHighlightItem:function(a){if(!a){this.unHighlightSeries()}if(this.highlightSprite){this.highlightSprite.hide(true)}},hideAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=true;this.areas[this._index].hide(true);this.drawSeries()}},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.areas[this._index].show(true);this.drawSeries()}},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.Cartesian",alias:"series.area",requires:["Ext.chart.axis.Axis","Ext.draw.Color","Ext.fx.Anim"],type:"area",stacked:true,style:{},constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,d,b;Ext.apply(e,c,{__excludes:[],highlightCfg:{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"}});if(e.highlight){e.highlightSprite=a.add({type:"path",path:["M",0,0],zIndex:1000,opacity:0.3,lineWidth:5,hidden:true,stroke:"#444"})}e.group=a.getGroup(e.seriesId)},shrink:function(b,p,q){var k=b.length,n=Math.floor(k/q),h,g,d=0,m=this.areas.length,a=[],e=[],c=[];for(g=0;g<m;++g){a[g]=0}for(h=0;h<k;++h){d+=b[h];for(g=0;g<m;++g){a[g]+=p[h][g]}if(h%n==0){e.push(d/n);for(g=0;g<m;++g){a[g]/=n}c.push(a);d=0;for(g=0,a=[];g<m;++g){a[g]=0}}}return{x:e,y:c}},getBounds:function(){var z=this,n=z.chart,h=n.getChartStore(),g=[].concat(z.yField),B=g.length,q=[],d=[],A=Infinity,x=A,v=A,w=-A,u=-A,c=Math,y=c.min,E=c.max,a,D,b,p,r,C,k,j,e,m,t;z.setBBox();a=z.bbox;if(z.axis){axis=n.axes.get(z.axis);if(axis){out=axis.calcEnds();v=out.from||axis.prevMin;u=E(out.to||axis.prevMax,0)}}if(z.yField&&!Ext.isNumber(v)){axis=Ext.create("Ext.chart.axis.Axis",{chart:n,fields:[].concat(z.yField)});out=axis.calcEnds();v=out.from||axis.prevMin;u=E(out.to||axis.prevMax,0)}if(!Ext.isNumber(v)){v=0}if(!Ext.isNumber(u)){u=0}h.each(function(F,G){p=F.get(z.xField);r=[];if(typeof p!="number"){p=G}q.push(p);k=0;for(C=0;C<B;C++){t=F.get(g[C]);if(typeof t=="number"){v=y(v,t);r.push(t);k+=t}}x=y(x,p);w=E(w,p);u=E(u,k);d.push(r)},z);D=a.width/((w-x)||1);b=a.height/((u-v)||1);j=q.length;if((j>a.width)&&z.areas){e=z.shrink(q,d,a.width);q=e.x;d=e.y}return{bbox:a,minX:x,minY:v,xValues:q,yValues:d,xScale:D,yScale:b,areasLen:B}},getPaths:function(){var A=this,m=A.chart,c=m.getChartStore(),d=true,e=A.getBounds(),a=e.bbox,n=A.items=[],z=[],b,q=[],u,h,j,g,r,v,k,B,t,w,p;h=e.xValues.length;for(u=0;u<h;u++){r=e.xValues[u];v=e.yValues[u];j=a.x+(r-e.minX)*e.xScale;k=0;for(B=0;B<e.areasLen;B++){if(A.__excludes[B]){continue}if(!z[B]){z[B]=[]}w=v[B];k+=w;g=a.y+a.height-(k-e.minY)*e.yScale;if(!q[B]){q[B]=["M",j,g];z[B].push(["L",j,g])}else{q[B].push("L",j,g);z[B].push(["L",j,g])}if(!n[B]){n[B]={pointsUp:[],pointsDown:[],series:A}}n[B].pointsUp.push([j,g])}}for(B=0;B<e.areasLen;B++){if(A.__excludes[B]){continue}p=q[B];if(B==0||d){d=false;p.push("L",j,a.y+a.height,"L",a.x,a.y+a.height,"Z")}else{b=z[t];b.reverse();p.push("L",j,b[0][2]);for(u=0;u<h;u++){p.push(b[u][0],b[u][1],b[u][2]);n[B].pointsDown[h-u-1]=[b[u][1],b[u][2]]}p.push("L",a.x,p[2],"Z")}t=B}return{paths:q,areasLen:e.areasLen}},drawSeries:function(){var h=this,g=h.chart,j=g.getChartStore(),c=g.surface,b=g.animate,m=h.group,a=Ext.apply(h.seriesStyle,h.style),n=h.colorArrayStyle,r=n&&n.length||0,d,e,q,p,k;h.unHighlightItem();h.cleanHighlights();if(!j||!j.getCount()){return}q=h.getPaths();if(!h.areas){h.areas=[]}for(d=0;d<q.areasLen;d++){if(h.__excludes[d]){continue}if(!h.areas[d]){h.items[d].sprite=h.areas[d]=c.add(Ext.apply({},{type:"path",group:m,path:q.paths[d],stroke:a.stroke||n[d%r],fill:n[d%r]},a||{}))}e=h.areas[d];p=q.paths[d];if(b){k=h.renderer(e,false,{path:p,fill:n[d%r],stroke:a.stroke||n[d%r]},d,j);h.animation=h.onAnimate(e,{to:k})}else{k=h.renderer(e,false,{path:p,hidden:false,fill:n[d%r],stroke:a.stroke||n[d%r]},d,j);h.areas[d].setAttributes(k,true)}}h.renderLabels();h.renderCallouts()},onAnimate:function(b,a){b.show();return this.callParent(arguments)},onCreateLabel:function(d,k,c,e){var g=this,h=g.labelsGroup,a=g.label,j=g.bbox,b=Ext.apply(a,g.seriesLabelStyle);return g.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:h,x:k.point[0],y:j.y+j.height/2},b||{}))},onPlaceLabel:function(g,k,v,r,q,c,e){var z=this,m=z.chart,u=m.resizing,w=z.label,t=w.renderer,b=w.field,a=z.bbox,j=v.point[0],h=v.point[1],d,p,n;g.setAttributes({text:t(k.get(b[e])),hidden:true},true);d=g.getBBox();p=d.width/2;n=d.height/2;j=j-p<a.x?a.x+p:j;j=(j+p>a.x+a.width)?(j-(j+p-a.x-a.width)):j;h=h-n<a.y?a.y+n:h;h=(h+n>a.y+a.height)?(h-(h+n-a.y-a.height)):h;if(z.chart.animate&&!z.chart.resizing){g.show(true);z.onAnimate(g,{to:{x:j,y:h}})}else{g.setAttributes({x:j,y:h},true);if(u){z.animation.on("afteranimate",function(){g.show(true)})}else{g.show(true)}}},onPlaceCallout:function(n,u,M,J,I,d,k){var P=this,v=P.chart,G=v.surface,K=v.resizing,O=P.callouts,w=P.items,A=(J==0)?false:w[J-1].point,C=(J==w.length-1)?false:w[J+1].point,c=M.point,D,g,Q,N,r,t,b=n.label.getBBox(),L=30,F=10,E=3,h,e,j,B,z,H=P.clipRect,q,m;if(!A){A=c}if(!C){C=c}N=(C[1]-A[1])/(C[0]-A[0]);r=(c[1]-A[1])/(c[0]-A[0]);t=(C[1]-c[1])/(C[0]-c[0]);g=Math.sqrt(1+N*N);D=[1/g,N/g];Q=[-D[1],D[0]];if(r>0&&t<0&&Q[1]<0||r<0&&t>0&&Q[1]>0){Q[0]*=-1;Q[1]*=-1}else{if(Math.abs(r)<Math.abs(t)&&Q[0]<0||Math.abs(r)>Math.abs(t)&&Q[0]>0){Q[0]*=-1;Q[1]*=-1}}q=c[0]+Q[0]*L;m=c[1]+Q[1]*L;h=q+(Q[0]>0?0:-(b.width+2*E));e=m-b.height/2-E;j=b.width+2*E;B=b.height+2*E;if(h<H[0]||(h+j)>(H[0]+H[2])){Q[0]*=-1}if(e<H[1]||(e+B)>(H[1]+H[3])){Q[1]*=-1}q=c[0]+Q[0]*L;m=c[1]+Q[1]*L;h=q+(Q[0]>0?0:-(b.width+2*E));e=m-b.height/2-E;j=b.width+2*E;B=b.height+2*E;n.lines.setAttributes({path:["M",c[0],c[1],"L",q,m,"Z"]},true);n.box.setAttributes({x:h,y:e,width:j,height:B},true);n.label.setAttributes({x:q+(Q[0]>0?E:-(b.width+E)),y:m},true);for(z in n){n[z].show(true)}},isItemInPoint:function(j,h,m,c){var g=this,b=m.pointsUp,d=m.pointsDown,q=Math.abs,e=Infinity,a,n,k;for(a=0,n=b.length;a<n;a++){k=[b[a][0],b[a][1]];if(e>q(j-k[0])){e=q(j-k[0])}else{k=b[a-1];if(h>=k[1]&&(!d.length||h<=(d[a-1][1]))){m.storeIndex=a-1;m.storeField=g.yField[c];m.storeItem=g.chart.store.getAt(a-1);m._points=d.length?[k,d[a-1]]:[k];return true}else{break}}}return false},highlightSeries:function(){var a,c,b;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}a.__highlighted=true;a.__prevOpacity=a.__prevOpacity||a.attr.opacity||1;a.__prevFill=a.__prevFill||a.attr.fill;a.__prevLineWidth=a.__prevLineWidth||a.attr.lineWidth;b=Ext.draw.Color.fromString(a.__prevFill);c={lineWidth:(a.__prevLineWidth||0)+2};if(b){c.fill=b.getLighter(0.2).toString()}else{c.opacity=Math.max(a.__prevOpacity-0.3,0)}if(this.chart.animate){a.__highlightAnim=Ext.create("Ext.fx.Anim",Ext.apply({target:a,to:c},this.chart.animate))}else{a.setAttributes(c,true)}}},unHighlightSeries:function(){var a;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}if(a.__highlighted){a.__highlighted=false;a.__highlightAnim=Ext.create("Ext.fx.Anim",{target:a,to:{fill:a.__prevFill,opacity:a.__prevOpacity,lineWidth:a.__prevLineWidth}})}}},highlightItem:function(c){var b=this,a,d;if(!c){this.highlightSeries();return}a=c._points;d=a.length==2?["M",a[0][0],a[0][1],"L",a[1][0],a[1][1]]:["M",a[0][0],a[0][1],"L",a[0][0],b.bbox.y+b.bbox.height];b.highlightSprite.setAttributes({path:d,hidden:false},true)},unHighlightItem:function(a){if(!a){this.unHighlightSeries()}if(this.highlightSprite){this.highlightSprite.hide(true)}},hideAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=true;this.areas[this._index].hide(true);this.drawSeries()}},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.areas[this._index].show(true);this.drawSeries()}},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Bar",{extend:"Ext.chart.series.Cartesian",alternateClassName:["Ext.chart.BarSeries","Ext.chart.BarChart","Ext.chart.StackedBarChart"],requires:["Ext.chart.axis.Axis","Ext.fx.Anim"],type:"bar",alias:"series.bar",column:false,style:{},gutter:38.2,groupGutter:38.2,xPadding:0,yPadding:10,constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,g=e.chart.shadow,d,b;Ext.apply(e,c,{highlightCfg:{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:1.2}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:0.9}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:0.6}}]});e.group=a.getGroup(e.seriesId+"-bars");if(g){for(d=0,b=e.shadowAttributes.length;d<b;d++){e.shadowGroups.push(a.getGroup(e.seriesId+"-shadows"+d))}}},getBarGirth:function(){var d=this,a=d.chart.getChartStore(),b=d.column,c=a.getCount(),e=d.gutter/100;return(d.chart.chartBBox[b?"width":"height"]-d[b?"xPadding":"yPadding"]*2)/(c*(e+1)-e)},getGutters:function(){var b=this,a=b.column,c=Math.ceil(b[a?"xPadding":"yPadding"]+b.getBarGirth()/2);return b.column?[c,0]:[0,c]},getBounds:function(){var E=this,u=E.chart,m=u.getChartStore(),v=[].concat(E.yField),c=v.length,n=c,k=E.groupGutter/100,g=E.column,r=E.xPadding,b=E.yPadding,B=E.stacked,t=E.getBarGirth(),h=Math,H=h.max,z=h.abs,D,a,C,A,e,x,F,q,G,p,w,y,d;E.setBBox(true);a=E.bbox;if(E.__excludes){for(w=0,G=E.__excludes.length;w<G;w++){if(E.__excludes[w]){n--}}}if(E.axis){e=u.axes.get(E.axis);if(e){x=e.calcEnds();C=x.from;A=x.to}}if(E.yField&&!Ext.isNumber(C)){e=Ext.create("Ext.chart.axis.Axis",{chart:u,fields:[].concat(E.yField)});x=e.calcEnds();C=x.from;A=x.to}if(!Ext.isNumber(C)){C=0}if(!Ext.isNumber(A)){A=0}F=(g?a.height-b*2:a.width-r*2)/(A-C);D=t/((B?1:n)*(k+1)-k);q=(g)?a.y+a.height-b:a.x+r;if(B){G=[[],[]];m.each(function(j,I){G[0][I]=G[0][I]||0;G[1][I]=G[1][I]||0;for(w=0;w<c;w++){if(E.__excludes&&E.__excludes[w]){continue}p=j.get(v[w]);G[+(p>0)][I]+=z(p)}});G[+(A>0)].push(z(A));G[+(C>0)].push(z(C));d=H.apply(h,G[0]);y=H.apply(h,G[1]);F=(g?a.height-b*2:a.width-r*2)/(y+d);q=q+d*F*(g?-1:1)}else{if(C/A<0){q=q-C*F*(g?-1:1)}}return{bars:v,bbox:a,barsLen:c,groupBarsLen:n,barWidth:t,groupBarWidth:D,scale:F,zero:q,xPadding:r,yPadding:b,signed:C/A<0,minY:C,maxY:A}},getPaths:function(){var y=this,T=y.chart,b=T.getChartStore(),H=y.bounds=y.getBounds(),C=y.items=[],m=y.gutter/100,c=y.groupGutter/100,R=T.animate,M=y.column,A=y.group,n=T.shadow,P=y.shadowGroups,O=y.shadowAttributes,t=P.length,B=H.bbox,p=y.xPadding,u=y.yPadding,Q=y.stacked,z=H.barsLen,N=y.colorArrayStyle,h=N&&N.length||0,E=Math,q=E.max,J=E.min,x=E.abs,S,U,e,K,F,a,k,w,v,r,g,d,G,D,L,I;b.each(function(j,V,W){a=H.zero;k=H.zero;K=0;F=0;w=false;for(S=0,g=0;S<z;S++){if(y.__excludes&&y.__excludes[S]){continue}U=j.get(H.bars[S]);e=Math.round((U-q(H.minY,0))*H.scale);v={fill:N[(z>1?S:0)%h]};if(M){Ext.apply(v,{height:e,width:q(H.groupBarWidth,0),x:(B.x+p+V*H.barWidth*(1+m)+g*H.groupBarWidth*(1+c)*!Q),y:a-e})}else{L=(W-1)-V;Ext.apply(v,{height:q(H.groupBarWidth,0),width:e+(a==H.zero),x:a+(a!=H.zero),y:(B.y+u+L*H.barWidth*(1+m)+g*H.groupBarWidth*(1+c)*!Q+1)})}if(e<0){if(M){v.y=k;v.height=x(e)}else{v.x=k+e;v.width=x(e)}}if(Q){if(e<0){k+=e*(M?-1:1)}else{a+=e*(M?-1:1)}K+=x(e);if(e<0){F+=x(e)}}v.x=Math.floor(v.x)+1;I=Math.floor(v.y);if(!Ext.isIE9&&v.y>I){I--}v.y=I;v.width=Math.floor(v.width);v.height=Math.floor(v.height);C.push({series:y,storeItem:j,value:[j.get(y.xField),U],attr:v,point:M?[v.x+v.width/2,U>=0?v.y:v.y+v.height]:[U>=0?v.x+v.width:v.x,v.y+v.height/2]});if(R&&T.resizing){r=M?{x:v.x,y:H.zero,width:v.width,height:0}:{x:H.zero,y:v.y,width:0,height:v.height};if(n&&(Q&&!w||!Q)){w=true;for(d=0;d<t;d++){G=P[d].getAt(Q?V:(V*z+S));if(G){G.setAttributes(r,true)}}}D=A.getAt(V*z+S);if(D){D.setAttributes(r,true)}}g++}if(Q&&C.length){C[V*g].totalDim=K;C[V*g].totalNegDim=F}},y)},renderShadows:function(x,y,B,m){var C=this,r=C.chart,v=r.surface,g=r.animate,A=C.stacked,a=C.shadowGroups,z=C.shadowAttributes,q=a.length,h=r.getChartStore(),d=C.column,u=C.items,b=[],n=m.zero,e,t,k,D,p,w,c;if((A&&(x%m.groupBarsLen===0))||!A){w=x/m.groupBarsLen;for(e=0;e<q;e++){t=Ext.apply({},z[e]);k=a[e].getAt(A?w:x);Ext.copyTo(t,y,"x,y,width,height");if(!k){k=v.add(Ext.apply({type:"rect",group:a[e]},Ext.apply({},B,t)))}if(A){D=u[x].totalDim;p=u[x].totalNegDim;if(d){t.y=n-p;t.height=D}else{t.x=n-p;t.width=D}}if(g){if(!A){c=C.renderer(k,h.getAt(w),t,x,h);C.onAnimate(k,{to:c})}else{c=C.renderer(k,h.getAt(w),Ext.apply(t,{hidden:true}),x,h);k.setAttributes(c,true)}}else{c=C.renderer(k,h.getAt(w),Ext.apply(t,{hidden:false}),x,h);k.setAttributes(c,true)}b.push(k)}}return b},drawSeries:function(){var F=this,u=F.chart,n=u.getChartStore(),y=u.surface,k=u.animate,D=F.stacked,d=F.column,b=u.shadow,a=F.shadowGroups,t=a.length,q=F.group,g=F.seriesStyle,v,r,B,A,E,w,c,e,h,p,m,C,x,z;if(!n||!n.getCount()){return}delete g.fill;m=Ext.apply(g,this.style);F.unHighlightItem();F.cleanHighlights();F.getPaths();p=F.bounds;v=F.items;E=d?{y:p.zero,height:0}:{x:p.zero,width:0};r=v.length;for(B=0;B<r;B++){w=q.getAt(B);C=v[B].attr;if(b){v[B].shadows=F.renderShadows(B,C,E,p)}if(!w){x=Ext.apply({},E,C);x=Ext.apply(x,m||{});w=y.add(Ext.apply({},{type:"rect",group:q},x))}if(k){c=F.renderer(w,n.getAt(B),C,B,n);w._to=c;z=F.onAnimate(w,{to:Ext.apply(c,m)});if(b&&D&&(B%p.barsLen===0)){A=B/p.barsLen;for(e=0;e<t;e++){z.on("afteranimate",function(){this.show(true)},a[e].getAt(A))}}}else{c=F.renderer(w,n.getAt(B),Ext.apply(C,{hidden:false}),B,n);w.setAttributes(Ext.apply(c,m),true)}v[B].sprite=w}r=q.getCount();for(A=B;A<r;A++){q.getAt(A).hide(true)}if(b){for(e=0;e<t;e++){h=a[e];r=h.getCount();for(A=B;A<r;A++){h.getAt(A).hide(true)}}}F.renderLabels()},onCreateLabel:function(e,m,d,g){var h=this,a=h.chart.surface,k=h.labelsGroup,b=h.label,c=Ext.apply({},b,h.seriesLabelStyle||{}),j;return a.add(Ext.apply({type:"text",group:k},c||{}))},onPlaceLabel:function(J,Q,v,M,r,K,L,A){var n=this,p=n.bounds,d=p.groupBarWidth,I=n.column,O=n.chart,z=O.chartBBox,D=O.resizing,q=v.value[0],R=v.value[1],m=v.attr,C=n.label,N=C.orientation=="vertical",h=[].concat(C.field),w=C.renderer,u=w(Q.get(h[A])),g=n.getLabelSize(u),a=g.width,c=g.height,b=p.zero,k="outside",t="insideStart",P="insideEnd",H=10,F=6,e=p.signed,G,E,B;J.setAttributes({text:u});J.isOutside=false;if(I){if(r==k){if(c+F+m.height>(R>=0?b-z.y:z.y+z.height-b)){r=P}}else{if(c+F>m.height){r=k;J.isOutside=true}}G=m.x+d/2;E=r==t?(b+((c/2+3)*(R>=0?-1:1))):(R>=0?(m.y+((c/2+3)*(r==k?-1:1))):(m.y+m.height+((c/2+3)*(r===k?1:-1))))}else{if(r==k){if(a+H+m.width>(R>=0?z.x+z.width-b:b-z.x)){r=P}}else{if(a+H>m.width){r=k;J.isOutside=true}}G=r==t?(b+((a/2+5)*(R>=0?1:-1))):(R>=0?(m.x+m.width+((a/2+5)*(r===k?1:-1))):(m.x+((a/2+5)*(r===k?-1:1))));E=m.y+d/2}B={x:G,y:E};if(N){B.rotate={x:G,y:E,degrees:270}}if(K&&D){if(I){G=m.x+m.width/2;E=b}else{G=b;E=m.y+m.height/2}J.setAttributes({x:G,y:E},true);if(N){J.setAttributes({rotate:{x:G,y:E,degrees:270}},true)}}if(K){n.onAnimate(J,{to:B})}else{J.setAttributes(Ext.apply(B,{hidden:false}),true)}},getLabelSize:function(g){var m=this.testerLabel,a=this.label,d=Ext.apply({},a,this.seriesLabelStyle||{}),b=a.orientation==="vertical",k,j,e,c;if(!m){m=this.testerLabel=this.chart.surface.add(Ext.apply({type:"text",opacity:0},d))}m.setAttributes({text:g},true);k=m.getBBox();j=k.width;e=k.height;return{width:b?e:j,height:b?j:e}},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(a,d,b){var c=b.sprite.getBBox();return c.x<=a&&c.y<=d&&(c.x+c.width)>=a&&(c.y+c.height)>=d},hideAll:function(){var a=this.chart.axes;if(!isNaN(this._index)){if(!this.__excludes){this.__excludes=[]}this.__excludes[this._index]=true;this.drawSeries();a.each(function(b){b.drawAxis()})}},showAll:function(){var a=this.chart.axes;if(!isNaN(this._index)){if(!this.__excludes){this.__excludes=[]}this.__excludes[this._index]=false;this.drawSeries();a.each(function(b){b.drawAxis()})}},getLegendColor:function(a){var c=this,b=c.colorArrayStyle.length;if(c.style&&c.style.fill){return c.style.fill}else{return c.colorArrayStyle[a%b]}},highlightItem:function(a){this.callParent(arguments);this.renderLabels()},unHighlightItem:function(){this.callParent(arguments);this.renderLabels()},cleanHighlights:function(){this.callParent(arguments);this.renderLabels()}});Ext.define("Ext.chart.series.Column",{alternateClassName:["Ext.chart.ColumnSeries","Ext.chart.ColumnChart","Ext.chart.StackedColumnChart"],extend:"Ext.chart.series.Bar",type:"column",alias:"series.column",column:true,xPadding:10,yPadding:0});Ext.define("Ext.chart.series.Gauge",{extend:"Ext.chart.series.Series",type:"gauge",alias:"series.gauge",rad:Math.PI/180,highlightDuration:150,angleField:false,needle:false,donut:false,showInLegend:false,style:{},constructor:function(b){this.callParent(arguments);var h=this,g=h.chart,a=g.surface,j=g.store,k=g.shadow,d,c,e;Ext.apply(h,b,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});h.group=a.getGroup(h.seriesId);if(k){for(d=0,c=h.shadowAttributes.length;d<c;d++){h.shadowGroups.push(a.getGroup(h.seriesId+"-shadows"+d))}}a.customAttributes.segment=function(m){return h.getSegment(m)}},initialize:function(){var b=this,a=b.chart.getChartStore();b.yField=[];if(b.label.field){a.each(function(c){b.yField.push(c.get(b.label.field))})}},getSegment:function(b){var G=this,F=G.rad,d=Math.cos,a=Math.sin,q=Math.abs,m=G.centerX,j=G.centerY,C=0,B=0,A=0,w=0,h=0,g=0,e=0,c=0,D=0.01,p=b.endRho-b.startRho,v=b.startAngle,u=b.endAngle,k=(v+u)/2*F,n=b.margin||0,z=q(u-v)>180,H=Math.min(v,u)*F,E=Math.max(v,u)*F,t=false;m+=n*d(k);j+=n*a(k);C=m+b.startRho*d(H);h=j+b.startRho*a(H);B=m+b.endRho*d(H);g=j+b.endRho*a(H);A=m+b.startRho*d(E);e=j+b.startRho*a(E);w=m+b.endRho*d(E);c=j+b.endRho*a(E);if(q(C-A)<=D&&q(h-e)<=D){t=true}if(t){return{path:[["M",C,h],["L",B,g],["A",b.endRho,b.endRho,0,+z,1,w,c],["Z"]]}}else{return{path:[["M",C,h],["L",B,g],["A",b.endRho,b.endRho,0,+z,1,w,c],["L",A,e],["A",b.startRho,b.startRho,0,+z,0,C,h],["Z"]]}}},calcMiddle:function(t){var m=this,n=m.rad,r=t.slice,q=m.centerX,p=m.centerY,k=r.startAngle,e=r.endAngle,j=Math.max(("rho" in r)?r.rho:m.radius,m.label.minMargin),h=+m.donut,b=Math.min(k,e)*n,a=Math.max(k,e)*n,d=-(b+(a-b)/2),g=q+(t.endRho+t.startRho)/2*Math.cos(d),c=p-(t.endRho+t.startRho)/2*Math.sin(d);t.middle={x:g,y:c}},drawSeries:function(){var z=this,Z=z.chart,b=Z.getChartStore(),D=z.group,V=z.chart.animate,G=z.chart.axes.get(0),H=G&&G.minimum||z.minimum||0,L=G&&G.maximum||z.maximum||0,q=z.angleField||z.field||z.xField,P=Z.surface,K=Z.chartBBox,h=z.rad,c=+z.donut,aa={},E=[],n=z.seriesStyle,a=z.seriesLabelStyle,g=z.colorArrayStyle,C=g&&g.length||0,N=Z.maxGutter[0],M=Z.maxGutter[1],k=Math.cos,v=Math.sin,w,e,d,y,u,F,R,I,J,O,X,W,m,Y,A,r,T,U,t,B,x,S,Q;Ext.apply(n,z.style||{});z.setBBox();B=z.bbox;if(z.colorSet){g=z.colorSet;C=g.length}if(!b||!b.getCount()){return}e=z.centerX=K.x+(K.width/2);d=z.centerY=K.y+K.height;z.radius=Math.min(e-K.x,d-K.y);z.slices=u=[];z.items=E=[];if(!z.value){O=b.getAt(0);z.value=O.get(q)}R=z.value;if(z.needle){S={series:z,value:R,startAngle:-180,endAngle:0,rho:z.radius};x=-180*(1-(R-H)/(L-H));u.push(S)}else{x=-180*(1-(R-H)/(L-H));S={series:z,value:R,startAngle:-180,endAngle:x,rho:z.radius};Q={series:z,value:z.maximum-R,startAngle:x,endAngle:0,rho:z.radius};u.push(S,Q)}for(X=0,J=u.length;X<J;X++){y=u[X];F=D.getAt(X);w=Ext.apply({segment:{startAngle:y.startAngle,endAngle:y.endAngle,margin:0,rho:y.rho,startRho:y.rho*+c/100,endRho:y.rho}},Ext.apply(n,g&&{fill:g[X%C]}||{}));I=Ext.apply({},w.segment,{slice:y,series:z,storeItem:O,index:X});E[X]=I;if(!F){t=Ext.apply({type:"path",group:D},Ext.apply(n,g&&{fill:g[X%C]}||{}));F=P.add(Ext.apply(t,w))}y.sprite=y.sprite||[];I.sprite=F;y.sprite.push(F);if(V){w=z.renderer(F,O,w,X,b);F._to=w;z.onAnimate(F,{to:w})}else{w=z.renderer(F,O,Ext.apply(w,{hidden:false}),X,b);F.setAttributes(w,true)}}if(z.needle){x=x*Math.PI/180;if(!z.needleSprite){z.needleSprite=z.chart.surface.add({type:"path",path:["M",e+(z.radius*+c/100)*k(x),d+-Math.abs((z.radius*+c/100)*v(x)),"L",e+z.radius*k(x),d+-Math.abs(z.radius*v(x))],"stroke-width":4,stroke:"#222"})}else{if(V){z.onAnimate(z.needleSprite,{to:{path:["M",e+(z.radius*+c/100)*k(x),d+-Math.abs((z.radius*+c/100)*v(x)),"L",e+z.radius*k(x),d+-Math.abs(z.radius*v(x))]}})}else{z.needleSprite.setAttributes({type:"path",path:["M",e+(z.radius*+c/100)*k(x),d+-Math.abs((z.radius*+c/100)*v(x)),"L",e+z.radius*k(x),d+-Math.abs(z.radius*v(x))]})}}z.needleSprite.setAttributes({hidden:false},true)}delete z.value},setValue:function(a){this.value=a;this.drawSeries()},onCreateLabel:function(c,b,a,d){},onPlaceLabel:function(c,g,e,d,h,a,b){},onPlaceCallout:function(){},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(a,d,c,b){return false},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.drawSeries()}},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Line",{extend:"Ext.chart.series.Cartesian",alternateClassName:["Ext.chart.LineSeries","Ext.chart.LineChart"],requires:["Ext.chart.axis.Axis","Ext.chart.Shape","Ext.draw.Draw","Ext.fx.Anim"],type:"line",alias:"series.line",selectionTolerance:20,showMarkers:true,markerConfig:{},style:{},smooth:false,defaultSmoothness:3,fill:false,constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,g=e.chart.shadow,d,b;Ext.apply(e,c,{highlightCfg:{"stroke-width":3},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}}]});e.group=a.getGroup(e.seriesId);if(e.showMarkers){e.markerGroup=a.getGroup(e.seriesId+"-markers")}if(g){for(d=0,b=e.shadowAttributes.length;d<b;d++){e.shadowGroups.push(a.getGroup(e.seriesId+"-shadows"+d))}}},shrink:function(b,k,m){var h=b.length,j=Math.floor(h/m),g=1,d=0,a=0,e=[b[0]],c=[k[0]];for(;g<h;++g){d+=b[g]||0;a+=k[g]||0;if(g%j==0){e.push(d/j);c.push(a/j);d=0;a=0}}return{x:e,y:c}},drawSeries:function(){var ao=this,ay=ao.chart,W=ay.axes,at=ay.getChartStore(),Z=at.getCount(),A=ao.chart.surface,aq={},V=ao.group,O=ao.showMarkers,aE=ao.markerGroup,H=ay.shadow,G=ao.shadowGroups,ab=ao.shadowAttributes,S=ao.smooth,u=G.length,aw=["M"],X=["M"],d=["M"],b=["M"],N=ay.markerIndex,am=[].concat(ao.axis),al,az=[],ak={},ae=[],B={},M=false,U=[],aD=ao.markerStyle,ad=ao.style,z=ao.colorArrayStyle,T=z&&z.length||0,P=Ext.isNumber,aA=ao.seriesIdx,h=ao.getAxesForXAndYFields(),n=h.xAxis,aC=h.yAxis,ag,k,af,ah,E,c,ai,L,K,g,e,w,v,aa,R,Q,ax,p,J,I,aF,q,t,F,a,ac,aj,D,av,C,au,r,aB,ar,ap,Y,m,an;if(ao.fireEvent("beforedraw",ao)===false){return}if(!Z||ao.seriesIsHidden){an=this.items;if(an){for(R=0,ax=an.length;R<ax;++R){if(an[R].sprite){an[R].sprite.hide(true)}}}return}ar=Ext.apply(aD||{},ao.markerConfig);Y=ar.type;delete ar.type;ap=ad;if(!ap["stroke-width"]){ap["stroke-width"]=0.5}if(N&&aE&&aE.getCount()){for(R=0;R<N;R++){I=aE.getAt(R);aE.remove(I);aE.add(I);aF=aE.getAt(aE.getCount()-2);I.setAttributes({x:0,y:0,translate:{x:aF.attr.translation.x,y:aF.attr.translation.y}},true)}}ao.unHighlightItem();ao.cleanHighlights();ao.setBBox();aq=ao.bbox;ao.clipRect=[aq.x,aq.y,aq.width,aq.height];for(R=0,ax=am.length;R<ax;R++){p=W.get(am[R]);if(p){J=p.calcEnds();if(p.position=="top"||p.position=="bottom"){D=J.from;av=J.to}else{C=J.from;au=J.to}}}if(ao.xField&&!P(D)&&(n=="bottom"||n=="top")&&!W.get(n)){p=Ext.create("Ext.chart.axis.Axis",{chart:ay,fields:[].concat(ao.xField)}).calcEnds();D=p.from;av=p.to}if(ao.yField&&!P(C)&&(aC=="right"||aC=="left")&&!W.get(aC)){p=Ext.create("Ext.chart.axis.Axis",{chart:ay,fields:[].concat(ao.yField)}).calcEnds();C=p.from;au=p.to}if(isNaN(D)){D=0;ac=aq.width/((Z-1)||1)}else{ac=aq.width/((av-D)||(Z-1)||1)}if(isNaN(C)){C=0;aj=aq.height/((Z-1)||1)}else{aj=aq.height/((au-C)||(Z-1)||1)}ao.eachRecord(function(j,x){t=j.get(ao.xField);if(typeof t=="string"||typeof t=="object"&&!Ext.isDate(t)||n&&W.get(n)&&W.get(n).type=="Category"){if(t in ak){t=ak[t]}else{t=ak[t]=x}}F=j.get(ao.yField);if(typeof F=="undefined"||(typeof F=="string"&&!F)){return}if(typeof F=="string"||typeof F=="object"&&!Ext.isDate(F)||aC&&W.get(aC)&&W.get(aC).type=="Category"){F=x}U.push(x);az.push(t);ae.push(F)});ax=az.length;if(ax>aq.width){a=ao.shrink(az,ae,aq.width);az=a.x;ae=a.y}ao.items=[];m=0;ax=az.length;for(R=0;R<ax;R++){t=az[R];F=ae[R];if(F===false){if(X.length==1){X=[]}M=true;ao.items.push(false);continue}else{L=(aq.x+(t-D)*ac).toFixed(2);K=((aq.y+aq.height)-(F-C)*aj).toFixed(2);if(M){M=false;X.push("M")}X=X.concat([L,K])}if((typeof v=="undefined")&&(typeof K!="undefined")){v=K;w=L}if(!ao.line||ay.resizing){aw=aw.concat([L,aq.y+aq.height/2])}if(ay.animate&&ay.resizing&&ao.line){ao.line.setAttributes({path:aw},true);if(ao.fillPath){ao.fillPath.setAttributes({path:aw,opacity:0.2},true)}if(ao.line.shadows){ag=ao.line.shadows;for(Q=0,u=ag.length;Q<u;Q++){k=ag[Q];k.setAttributes({path:aw},true)}}}if(O){I=aE.getAt(m++);if(!I){I=Ext.chart.Shape[Y](A,Ext.apply({group:[V,aE],x:0,y:0,translate:{x:+(g||L),y:e||(aq.y+aq.height/2)},value:'"'+t+", "+F+'"',zIndex:4000},ar));I._to={translate:{x:+L,y:+K}}}else{I.setAttributes({value:'"'+t+", "+F+'"',x:0,y:0,hidden:false},true);I._to={translate:{x:+L,y:+K}}}}ao.items.push({series:ao,value:[t,F],point:[L,K],sprite:I,storeItem:at.getAt(U[R])});g=L;e=K}if(X.length<=1){return}if(ao.smooth){b=Ext.draw.Draw.smooth(X,P(S)?S:ao.defaultSmoothness)}d=S?b:X;if(ay.markerIndex&&ao.previousPath){ah=ao.previousPath;if(!S){Ext.Array.erase(ah,1,2)}}else{ah=X}if(!ao.line){ao.line=A.add(Ext.apply({type:"path",group:V,path:aw,stroke:ap.stroke||ap.fill},ap||{}));if(H){ao.line.setAttributes(Ext.apply({},ao.shadowOptions),true)}ao.line.setAttributes({fill:"none",zIndex:3000});if(!ap.stroke&&T){ao.line.setAttributes({stroke:z[aA%T]},true)}if(H){ag=ao.line.shadows=[];for(af=0;af<u;af++){al=ab[af];al=Ext.apply({},al,{path:aw});k=A.add(Ext.apply({},{type:"path",group:G[af]},al));ag.push(k)}}}if(ao.fill){c=d.concat([["L",L,aq.y+aq.height],["L",w,aq.y+aq.height],["L",w,v]]);if(!ao.fillPath){ao.fillPath=A.add({group:V,type:"path",opacity:ap.opacity||0.3,fill:ap.fill||z[aA%T],path:aw})}}aa=O&&aE.getCount();if(ay.animate){E=ao.fill;r=ao.line;ai=ao.renderer(r,false,{path:d},R,at);Ext.apply(ai,ap||{},{stroke:ap.stroke||ap.fill});delete ai.fill;r.show(true);if(ay.markerIndex&&ao.previousPath){ao.animation=aB=ao.onAnimate(r,{to:ai,from:{path:ah}})}else{ao.animation=aB=ao.onAnimate(r,{to:ai})}if(H){ag=r.shadows;for(Q=0;Q<u;Q++){ag[Q].show(true);if(ay.markerIndex&&ao.previousPath){ao.onAnimate(ag[Q],{to:{path:d},from:{path:ah}})}else{ao.onAnimate(ag[Q],{to:{path:d}})}}}if(E){ao.fillPath.show(true);ao.onAnimate(ao.fillPath,{to:Ext.apply({},{path:c,fill:ap.fill||z[aA%T],"stroke-width":0},ap||{})})}if(O){m=0;for(R=0;R<ax;R++){if(ao.items[R]){q=aE.getAt(m++);if(q){ai=ao.renderer(q,at.getAt(R),q._to,R,at);ao.onAnimate(q,{to:Ext.apply(ai,ar||{})});q.show(true)}}}for(;m<aa;m++){q=aE.getAt(m);q.hide(true)}}}else{ai=ao.renderer(ao.line,false,{path:d,hidden:false},R,at);Ext.apply(ai,ap||{},{stroke:ap.stroke||ap.fill});delete ai.fill;ao.line.setAttributes(ai,true);if(H){ag=ao.line.shadows;for(Q=0;Q<u;Q++){ag[Q].setAttributes({path:d,hidden:false},true)}}if(ao.fill){ao.fillPath.setAttributes({path:c,hidden:false},true)}if(O){m=0;for(R=0;R<ax;R++){if(ao.items[R]){q=aE.getAt(m++);if(q){ai=ao.renderer(q,at.getAt(R),q._to,R,at);q.setAttributes(Ext.apply(ar||{},ai||{}),true);q.show(true)}}}for(;m<aa;m++){q=aE.getAt(m);q.hide(true)}}}if(ay.markerIndex){if(ao.smooth){Ext.Array.erase(X,1,2)}else{Ext.Array.splice(X,1,0,X[1],X[2])}ao.previousPath=X}ao.renderLabels();ao.renderCallouts();ao.fireEvent("draw",ao)},onCreateLabel:function(d,k,c,e){var g=this,h=g.labelsGroup,a=g.label,j=g.bbox,b=Ext.apply(a,g.seriesLabelStyle);return g.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:h,x:k.point[0],y:j.y+j.height/2},b||{}))},onPlaceLabel:function(g,k,v,r,q,d){var z=this,m=z.chart,u=m.resizing,w=z.label,t=w.renderer,b=w.field,a=z.bbox,j=v.point[0],h=v.point[1],c=v.sprite.attr.radius,e,p,n;g.setAttributes({text:t(k.get(b)),hidden:true},true);if(q=="rotate"){g.setAttributes({"text-anchor":"start",rotation:{x:j,y:h,degrees:-45}},true);e=g.getBBox();p=e.width;n=e.height;j=j<a.x?a.x:j;j=(j+p>a.x+a.width)?(j-(j+p-a.x-a.width)):j;h=(h-n<a.y)?a.y+n:h}else{if(q=="under"||q=="over"){e=v.sprite.getBBox();e.width=e.width||(c*2);e.height=e.height||(c*2);h=h+(q=="over"?-e.height:e.height);e=g.getBBox();p=e.width/2;n=e.height/2;j=j-p<a.x?a.x+p:j;j=(j+p>a.x+a.width)?(j-(j+p-a.x-a.width)):j;h=h-n<a.y?a.y+n:h;h=(h+n>a.y+a.height)?(h-(h+n-a.y-a.height)):h}}if(z.chart.animate&&!z.chart.resizing){g.show(true);z.onAnimate(g,{to:{x:j,y:h}})}else{g.setAttributes({x:j,y:h},true);if(u&&z.animation){z.animation.on("afteranimate",function(){g.show(true)})}else{g.show(true)}}},highlightItem:function(){var a=this;a.callParent(arguments);if(a.line&&!a.highlighted){if(!("__strokeWidth" in a.line)){a.line.__strokeWidth=a.line.attr["stroke-width"]||0}if(a.line.__anim){a.line.__anim.paused=true}a.line.__anim=Ext.create("Ext.fx.Anim",{target:a.line,to:{"stroke-width":a.line.__strokeWidth+3}});a.highlighted=true}},unHighlightItem:function(){var a=this;a.callParent(arguments);if(a.line&&a.highlighted){a.line.__anim=Ext.create("Ext.fx.Anim",{target:a.line,to:{"stroke-width":a.line.__strokeWidth}});a.highlighted=false}},onPlaceCallout:function(n,u,M,J,I,d,k){if(!I){return}var P=this,v=P.chart,G=v.surface,K=v.resizing,O=P.callouts,w=P.items,A=J==0?false:w[J-1].point,C=(J==w.length-1)?false:w[J+1].point,c=[+M.point[0],+M.point[1]],D,g,Q,N,r,t,L=O.offsetFromViz||30,F=O.offsetToSide||10,E=O.offsetBox||3,h,e,j,B,z,H=P.clipRect,b={width:O.styles.width||10,height:O.styles.height||10},q,m;if(!A){A=c}if(!C){C=c}N=(C[1]-A[1])/(C[0]-A[0]);r=(c[1]-A[1])/(c[0]-A[0]);t=(C[1]-c[1])/(C[0]-c[0]);g=Math.sqrt(1+N*N);D=[1/g,N/g];Q=[-D[1],D[0]];if(r>0&&t<0&&Q[1]<0||r<0&&t>0&&Q[1]>0){Q[0]*=-1;Q[1]*=-1}else{if(Math.abs(r)<Math.abs(t)&&Q[0]<0||Math.abs(r)>Math.abs(t)&&Q[0]>0){Q[0]*=-1;Q[1]*=-1}}q=c[0]+Q[0]*L;m=c[1]+Q[1]*L;h=q+(Q[0]>0?0:-(b.width+2*E));e=m-b.height/2-E;j=b.width+2*E;B=b.height+2*E;if(h<H[0]||(h+j)>(H[0]+H[2])){Q[0]*=-1}if(e<H[1]||(e+B)>(H[1]+H[3])){Q[1]*=-1}q=c[0]+Q[0]*L;m=c[1]+Q[1]*L;h=q+(Q[0]>0?0:-(b.width+2*E));e=m-b.height/2-E;j=b.width+2*E;B=b.height+2*E;if(v.animate){P.onAnimate(n.lines,{to:{path:["M",c[0],c[1],"L",q,m,"Z"]}});if(n.panel){n.panel.setPosition(h,e,true)}}else{n.lines.setAttributes({path:["M",c[0],c[1],"L",q,m,"Z"]},true);if(n.panel){n.panel.setPosition(h,e)}}for(z in n){n[z].show(true)}},isItemInPoint:function(j,g,D,t){var F=this,p=F.items,v=F.selectionTolerance,k=null,C,c,r,A,h,B,b,w,a,m,E,e,d,q,z,u,G=Math.sqrt,n=Math.abs;c=p[t];C=t&&p[t-1];if(t>=h){C=p[h-1]}r=C&&C.point;A=c&&c.point;B=C?r[0]:A[0]-v;b=C?r[1]:A[1];w=c?A[0]:r[0]+v;a=c?A[1]:r[1];e=G((j-B)*(j-B)+(g-b)*(g-b));d=G((j-w)*(j-w)+(g-a)*(g-a));q=Math.min(e,d);if(q<=v){return q==e?C:c}return false},toggleAll:function(a){var e=this,b,d,g,c;if(!a){Ext.chart.series.Cartesian.prototype.hideAll.call(e)}else{Ext.chart.series.Cartesian.prototype.showAll.call(e)}if(e.line){e.line.setAttributes({hidden:!a},true);if(e.line.shadows){for(b=0,c=e.line.shadows,d=c.length;b<d;b++){g=c[b];g.setAttributes({hidden:!a},true)}}}if(e.fillPath){e.fillPath.setAttributes({hidden:!a},true)}},hideAll:function(){this.toggleAll(false)},showAll:function(){this.toggleAll(true)}});Ext.define("Ext.chart.series.Pie",{alternateClassName:["Ext.chart.PieSeries","Ext.chart.PieChart"],extend:"Ext.chart.series.Series",type:"pie",alias:"series.pie",rad:Math.PI/180,highlightDuration:150,angleField:false,lengthField:false,donut:false,showInLegend:false,style:{},constructor:function(b){this.callParent(arguments);var h=this,g=h.chart,a=g.surface,j=g.store,k=g.shadow,d,c,e;Ext.applyIf(h,{highlightCfg:{segment:{margin:20}}});Ext.apply(h,b,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});h.group=a.getGroup(h.seriesId);if(k){for(d=0,c=h.shadowAttributes.length;d<c;d++){h.shadowGroups.push(a.getGroup(h.seriesId+"-shadows"+d))}}a.customAttributes.segment=function(m){return h.getSegment(m)};h.__excludes=h.__excludes||[]},initialize:function(){var b=this,a=b.chart.getChartStore();b.yField=[];if(b.label.field){a.each(function(c){b.yField.push(c.get(b.label.field))})}},getSegment:function(d){var N=this,M=N.rad,j=Math.cos,a=Math.sin,t=N.centerX,q=N.centerY,I=0,H=0,G=0,E=0,n=0,m=0,k=0,g=0,C=0,c=0,B=0,b=0,K=0.01,D=d.startAngle,A=d.endAngle,r=(D+A)/2*M,v=d.margin||0,O=Math.min(D,A)*M,L=Math.max(D,A)*M,z=j(O),h=a(O),w=j(L),e=a(L),p=j(r),J=a(r),F=0,u=0.7071067811865476;if(L-O<K){return{path:""}}if(v!==0){t+=v*p;q+=v*J}H=t+d.endRho*z;m=q+d.endRho*h;E=t+d.endRho*w;g=q+d.endRho*e;if(Math.abs(H-E)+Math.abs(m-g)<K){p=u;J=-u;F=1}B=t+d.endRho*p;b=q+d.endRho*J;if(d.startRho!==0){I=t+d.startRho*z;n=q+d.startRho*h;G=t+d.startRho*w;k=q+d.startRho*e;C=t+d.startRho*p;c=q+d.startRho*J;return{path:[["M",H,m],["A",d.endRho,d.endRho,0,0,1,B,b],["L",B,b],["A",d.endRho,d.endRho,0,F,1,E,g],["L",E,g],["L",G,k],["A",d.startRho,d.startRho,0,F,0,C,c],["L",C,c],["A",d.startRho,d.startRho,0,0,0,I,n],["L",I,n],["Z"]]}}else{return{path:[["M",t,q],["L",H,m],["A",d.endRho,d.endRho,0,0,1,B,b],["L",B,b],["A",d.endRho,d.endRho,0,F,1,E,g],["L",E,g],["L",t,q],["Z"]]}}},calcMiddle:function(q){var j=this,k=j.rad,p=q.slice,n=j.centerX,m=j.centerY,h=p.startAngle,d=p.endAngle,g=+j.donut,c=-(h+d)*k/2,a=(q.endRho+q.startRho)/2,e=n+a*Math.cos(c),b=m-a*Math.sin(c);q.middle={x:e,y:b}},drawSeries:function(){var B=this,b=B.chart.getChartStore(),H=B.group,ah=B.chart.animate,t=B.angleField||B.field||B.xField,K=[].concat(B.lengthField),ag=0,Z=B.colorSet,am=B.chart,W=am.surface,R=am.chartBBox,n=am.shadow,ae=B.shadowGroups,ad=B.shadowAttributes,aq=ae.length,h=B.rad,X=K.length,L=0,d=+B.donut,ao=[],ap={},an,I=[],k=false,E=0,aa=0,m=9,ar=true,D=0,r=B.seriesStyle,a=B.seriesLabelStyle,g=B.colorArrayStyle,G=g&&g.length||0,U=am.maxGutter[0],T=am.maxGutter[1],P=Math.abs,y,af,al,M,S,O,e,c,z,v=0,A,x,J,Y,N,at,Q,V,aj,ai,q,ak,C,u,ab,ac,w,F;Ext.apply(r,B.style||{});B.setBBox();F=B.bbox;if(B.colorSet){g=B.colorSet;G=g.length}if(!b||!b.getCount()){return}B.unHighlightItem();B.cleanHighlights();e=B.centerX=R.x+(R.width/2);c=B.centerY=R.y+(R.height/2);B.radius=Math.min(e-R.x,c-R.y);B.slices=x=[];B.items=I=[];b.each(function(j,p){if(this.__excludes&&this.__excludes[p]){return}E+=+j.get(t);if(K[0]){for(ai=0,ag=0;ai<X;ai++){ag+=+j.get(K[ai])}ao[p]=ag;aa=Math.max(aa,ag)}},this);E=E||1;b.each(function(j,p){if(this.__excludes&&this.__excludes[p]){Y=0}else{Y=j.get(t);if(v==0){v=1}}if(v==1){v=2;B.firstAngle=D=360*Y/E/2;for(ai=0;ai<p;ai++){x[ai].startAngle=x[ai].endAngle=B.firstAngle}}ak=D-360*Y/E;A={series:B,value:Y,startAngle:D,endAngle:ak,storeItem:j};if(K[0]){at=ao[p];A.rho=B.radius*(at/aa)}else{A.rho=B.radius}x[p]=A;D=ak},B);if(n){for(aj=0,Q=x.length;aj<Q;aj++){A=x[aj];A.shadowAttrs=[];for(ai=0,L=0,M=[];ai<X;ai++){J=H.getAt(aj*X+ai);z=K[ai]?b.getAt(aj).get(K[ai])/ao[aj]*A.rho:A.rho;y={segment:{startAngle:A.startAngle,endAngle:A.endAngle,margin:0,rho:A.rho,startRho:L+(z*d/100),endRho:L+z},hidden:!A.value&&(A.startAngle%360)==(A.endAngle%360)};for(O=0,M=[];O<aq;O++){al=ad[O];S=ae[O].getAt(aj);if(!S){S=am.surface.add(Ext.apply({},{type:"path",group:ae[O],strokeLinejoin:"round"},y,al))}if(ah){al=B.renderer(S,b.getAt(aj),Ext.apply({},y,al),aj,b);B.onAnimate(S,{to:al})}else{al=B.renderer(S,b.getAt(aj),al,aj,b);S.setAttributes(al,true)}M.push(S)}A.shadowAttrs[ai]=M}}}for(aj=0,Q=x.length;aj<Q;aj++){A=x[aj];for(ai=0,L=0;ai<X;ai++){J=H.getAt(aj*X+ai);z=K[ai]?b.getAt(aj).get(K[ai])/ao[aj]*A.rho:A.rho;y=Ext.apply({segment:{startAngle:A.startAngle,endAngle:A.endAngle,margin:0,rho:A.rho,startRho:L+(z*d/100),endRho:L+z},hidden:(!A.value&&(A.startAngle%360)==(A.endAngle%360))},Ext.apply(r,g&&{fill:g[(X>1?ai:aj)%G]}||{}));N=Ext.apply({},y.segment,{slice:A,series:B,storeItem:A.storeItem,index:aj});B.calcMiddle(N);if(n){N.shadows=A.shadowAttrs[ai]}I[aj]=N;if(!J){w=Ext.apply({type:"path",group:H,middle:N.middle},Ext.apply(r,g&&{fill:g[(X>1?ai:aj)%G]}||{}));J=W.add(Ext.apply(w,y))}A.sprite=A.sprite||[];N.sprite=J;A.sprite.push(J);A.point=[N.middle.x,N.middle.y];if(ah){y=B.renderer(J,b.getAt(aj),y,aj,b);J._to=y;J._animating=true;B.onAnimate(J,{to:y,listeners:{afteranimate:{fn:function(){this._animating=false},scope:J}}})}else{y=B.renderer(J,b.getAt(aj),Ext.apply(y,{hidden:false}),aj,b);J.setAttributes(y,true)}L+=z}}Q=H.getCount();for(aj=0;aj<Q;aj++){if(!x[(aj/X)>>0]&&H.getAt(aj)){H.getAt(aj).hide(true)}}if(n){aq=ae.length;for(O=0;O<Q;O++){if(!x[(O/X)>>0]){for(ai=0;ai<aq;ai++){if(ae[ai].getAt(O)){ae[ai].getAt(O).hide(true)}}}}}B.renderLabels();B.renderCallouts()},onCreateLabel:function(g,m,e,h){var j=this,k=j.labelsGroup,a=j.label,d=j.centerX,c=j.centerY,n=m.middle,b=Ext.apply(j.seriesLabelStyle||{},a||{});return j.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:k,x:n.x,y:n.y},b))},onPlaceLabel:function(k,r,C,w,v,e,g){var E=this,t=E.chart,B=t.resizing,D=E.label,z=D.renderer,c=[].concat(D.field),n=E.centerX,m=E.centerY,F=C.middle,b={x:F.x,y:F.y},q=F.x-n,p=F.y-m,u={},d=1,j=Math.atan2(p,q||1),A=j*180/Math.PI,h;if(this.__excludes&&this.__excludes[w]){b.hidden=true}function a(x){if(x<0){x+=360}return x%360}k.setAttributes({text:z(r.get(c[g]))},true);switch(v){case"outside":d=Math.sqrt(q*q+p*p)*2;b.x=d*Math.cos(j)+n;b.y=d*Math.sin(j)+m;break;case"rotate":A=a(A);A=(A>90&&A<270)?A+180:A;h=k.attr.rotation.degrees;if(h!=null&&Math.abs(h-A)>180){if(A>h){A-=360}else{A+=360}A=A%360}else{A=a(A)}b.rotate={degrees:A,x:b.x,y:b.y};break;default:break}b.translate={x:0,y:0};if(e&&!B&&(v!="rotate"||h!=null)){E.onAnimate(k,{to:b})}else{k.setAttributes(b,true)}k._from=u},onPlaceCallout:function(m,r,D,A,z,d,e){var F=this,t=F.chart,B=t.resizing,E=F.callouts,j=F.centerX,h=F.centerY,G=D.middle,b={x:G.x,y:G.y},q=G.x-j,k=G.y-h,c=1,n,g=Math.atan2(k,q||1),a=m.label.getBBox(),C=20,w=10,v=10,u;c=D.endRho+C;n=(D.endRho+D.startRho)/2+(D.endRho-D.startRho)/3;b.x=c*Math.cos(g)+j;b.y=c*Math.sin(g)+h;q=n*Math.cos(g);k=n*Math.sin(g);if(t.animate){F.onAnimate(m.lines,{to:{path:["M",q+j,k+h,"L",b.x,b.y,"Z","M",b.x,b.y,"l",q>0?w:-w,0,"z"]}});F.onAnimate(m.box,{to:{x:b.x+(q>0?w:-(w+a.width+2*v)),y:b.y+(k>0?(-a.height-v/2):(-a.height-v/2)),width:a.width+2*v,height:a.height+2*v}});F.onAnimate(m.label,{to:{x:b.x+(q>0?(w+v):-(w+a.width+v)),y:b.y+(k>0?-a.height/4:-a.height/4)}})}else{m.lines.setAttributes({path:["M",q+j,k+h,"L",b.x,b.y,"Z","M",b.x,b.y,"l",q>0?w:-w,0,"z"]},true);m.box.setAttributes({x:b.x+(q>0?w:-(w+a.width+2*v)),y:b.y+(k>0?(-a.height-v/2):(-a.height-v/2)),width:a.width+2*v,height:a.height+2*v},true);m.label.setAttributes({x:b.x+(q>0?(w+v):-(w+a.width+v)),y:b.y+(k>0?-a.height/4:-a.height/4)},true)}for(u in m){m[u].show(true)}},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(m,j,p,e){var h=this,d=h.centerX,c=h.centerY,r=Math.abs,q=r(m-d),n=r(j-c),g=p.startAngle,a=p.endAngle,k=Math.sqrt(q*q+n*n),b=Math.atan2(j-c,m-d)/h.rad;if(b>h.firstAngle){b-=360}return(b<=g&&b>a&&k>=p.startRho&&k<=p.endRho)},hideAll:function(){var e,b,h,g,d,a,c;if(!isNaN(this._index)){this.__excludes=this.__excludes||[];this.__excludes[this._index]=true;c=this.slices[this._index].sprite;for(d=0,a=c.length;d<a;d++){c[d].setAttributes({hidden:true},true)}if(this.slices[this._index].shadowAttrs){for(e=0,g=this.slices[this._index].shadowAttrs,b=g.length;e<b;e++){h=g[e];for(d=0,a=h.length;d<a;d++){h[d].setAttributes({hidden:true},true)}}}this.drawSeries()}},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.drawSeries()}},highlightItem:function(v){var z=this,w=z.rad;v=v||this.items[this._index];this.unHighlightItem();if(!v||v.sprite&&v.sprite._animating){return}z.callParent([v]);if(!z.highlight){return}if("segment" in z.highlightCfg){var B=z.highlightCfg.segment,d=z.chart.animate,q,u,a,e,k,b,n,c;if(z.labelsGroup){var g=z.labelsGroup,t=z.label.display,h=g.getAt(v.index),A=(v.startAngle+v.endAngle)/2*w,p=B.margin||0,m=p*Math.cos(A),j=p*Math.sin(A);if(Math.abs(m)<1e-10){m=0}if(Math.abs(j)<1e-10){j=0}if(d){h.stopAnimation();h.animate({to:{translate:{x:m,y:j}},duration:z.highlightDuration})}else{h.setAttributes({translate:{x:m,y:j}},true)}}if(z.chart.shadow&&v.shadows){u=0;a=v.shadows;k=a.length;for(;u<k;u++){e=a[u];b={};n=v.sprite._from.segment;for(c in n){if(!(c in B)){b[c]=n[c]}}q={segment:Ext.applyIf(b,z.highlightCfg.segment)};if(d){e.stopAnimation();e.animate({to:q,duration:z.highlightDuration})}else{e.setAttributes(q,true)}}}}},unHighlightItem:function(){var z=this;if(!z.highlight){return}if(("segment" in z.highlightCfg)&&z.items){var m=z.items,e=z.chart.animate,d=!!z.chart.shadow,k=z.labelsGroup,w=m.length,v=0,u=0,t=z.label.display,A,n,c,a,y,q,b,g,x,h,r;for(;v<w;v++){x=m[v];if(!x){continue}q=x.sprite;if(q&&q._highlighted){if(k){h=k.getAt(x.index);r=Ext.apply({translate:{x:0,y:0}},t=="rotate"?{rotate:{x:h.attr.x,y:h.attr.y,degrees:h.attr.rotation.degrees}}:{});if(e){h.stopAnimation();h.animate({to:r,duration:z.highlightDuration})}else{h.setAttributes(r,true)}}if(d){b=x.shadows;A=b.length;for(;u<A;u++){c={};a=x.sprite._to.segment;y=x.sprite._from.segment;Ext.apply(c,y);for(n in a){if(!(n in y)){c[n]=a[n]}}g=b[u];if(e){g.stopAnimation();g.animate({to:{segment:c},duration:z.highlightDuration})}else{g.setAttributes({segment:c},true)}}}}}}z.callParent(arguments)},getLegendColor:function(a){var b=this;return(b.colorSet&&b.colorSet[a%b.colorSet.length])||b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Series",requires:["Ext.chart.Shape","Ext.fx.Anim"],type:"radar",alias:"series.radar",rad:Math.PI/180,showInLegend:false,style:{},constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,d,b;e.group=a.getGroup(e.seriesId);if(e.showMarkers){e.markerGroup=a.getGroup(e.seriesId+"-markers")}},drawSeries:function(){var N=this,n=N.chart.getChartStore(),q=N.group,E,A=N.chart,m=A.animate,c=N.field||N.yField,G=A.surface,w=A.chartBBox,h,t,r,B,j,L=0,F=[],J=Math.max,e=Math.cos,a=Math.sin,D=Math.PI*2,H=n.getCount(),M,C,v,u,d,I,b,k=N.seriesStyle,K=N.seriesLabelStyle,p=A.resizing||!N.radar,g=A.axes&&A.axes.get(0),z=!(g&&g.maximum);N.setBBox();L=z?0:(g.maximum||0);Ext.apply(k,N.style||{});if(!n||!n.getCount()){return}N.unHighlightItem();N.cleanHighlights();t=N.centerX=w.x+(w.width/2);r=N.centerY=w.y+(w.height/2);N.radius=j=Math.min(w.width,w.height)/2;N.items=B=[];if(z){A.series.each(function(x){F.push(x.yField)});n.each(function(x,y){for(y=0,b=F.length;y<b;y++){L=J(+x.get(F[y]),L)}})}L=L||1;M=[];C=[];n.each(function(x,y){d=j*x.get(c)/L;v=d*e(y/H*D);u=d*a(y/H*D);if(y==0){C.push("M",v+t,u+r);M.push("M",0.01*v+t,0.01*u+r)}else{C.push("L",v+t,u+r);M.push("L",0.01*v+t,0.01*u+r)}B.push({sprite:false,point:[t+v,r+u],series:N})});C.push("Z");if(!N.radar){N.radar=G.add(Ext.apply({type:"path",group:q,path:M},k||{}))}if(A.resizing){N.radar.setAttributes({path:M},true)}if(A.animate){N.onAnimate(N.radar,{to:Ext.apply({path:C},k||{})})}else{N.radar.setAttributes(Ext.apply({path:C},k||{}),true)}if(N.showMarkers){N.drawMarkers()}N.renderLabels();N.renderCallouts()},drawMarkers:function(){var n=this,k=n.chart,a=k.surface,b=Ext.apply({},n.markerStyle||{}),j=Ext.apply(b,n.markerConfig),m=n.items,p=j.type,r=n.markerGroup,e=n.centerX,d=n.centerY,q,h,c,g;delete j.type;for(h=0,c=m.length;h<c;h++){q=m[h];g=r.getAt(h);if(!g){g=Ext.chart.Shape[p](a,Ext.apply({group:r,x:0,y:0,translate:{x:e,y:d}},j))}else{g.show()}if(k.resizing){g.setAttributes({x:0,y:0,translate:{x:e,y:d}},true)}g._to={translate:{x:q.point[0],y:q.point[1]}};if(k.animate){n.onAnimate(g,{to:g._to})}else{g.setAttributes(Ext.apply(g._to,j||{}),true)}}},isItemInPoint:function(c,g,e){var b,d=10,a=Math.abs;b=e.point;return(a(b[0]-c)<=d&&a(b[1]-g)<=d)},onCreateLabel:function(g,n,e,h){var j=this,m=j.labelsGroup,a=j.label,d=j.centerX,c=j.centerY,k=n.point,b=Ext.apply(j.seriesLabelStyle||{},a);return j.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:m,x:d,y:c},a||{}))},onPlaceLabel:function(t,h,v,g,k,b){var n=this,m=n.chart,j=m.resizing,c=n.label,u=c.renderer,r=c.field,e=n.centerX,d=n.centerY,a={x:v.point[0],y:v.point[1]},q=a.x-e,p=a.y-d;t.setAttributes({text:u(h.get(r)),hidden:true},true);if(j){t.setAttributes({x:e,y:d},true)}if(b){t.show(true);n.onAnimate(t,{to:a})}else{t.setAttributes(a,true);t.show(true)}},toggleAll:function(a){var e=this,b,d,g,c;if(!a){Ext.chart.series.Radar.superclass.hideAll.call(e)}else{Ext.chart.series.Radar.superclass.showAll.call(e)}if(e.radar){e.radar.setAttributes({hidden:!a},true);if(e.radar.shadows){for(b=0,c=e.radar.shadows,d=c.length;b<d;b++){g=c[b];g.setAttributes({hidden:!a},true)}}}},hideAll:function(){this.toggleAll(false);this.hideMarkers(0)},showAll:function(){this.toggleAll(true)},hideMarkers:function(a){var d=this,c=d.markerGroup&&d.markerGroup.getCount()||0,b=a||0;for(;b<c;b++){d.markerGroup.getAt(b).hide(true)}}});Ext.define("Ext.chart.series.Scatter",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.axis.Axis","Ext.chart.Shape","Ext.fx.Anim"],type:"scatter",alias:"series.scatter",constructor:function(c){this.callParent(arguments);var e=this,g=e.chart.shadow,a=e.chart.surface,d,b;Ext.apply(e,c,{style:{},markerConfig:{},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)"},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)"},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)"}]});e.group=a.getGroup(e.seriesId);if(g){for(d=0,b=e.shadowAttributes.length;d<b;d++){e.shadowGroups.push(a.getGroup(e.seriesId+"-shadows"+d))}}},getBounds:function(){var n=this,m=n.chart,q=m.getChartStore(),j=[].concat(n.axis),t,r,c,k,g,e,b,a,h,d,p;n.setBBox();t=n.bbox;for(h=0,k=j.length;h<k;h++){d=m.axes.get(j[h]);if(d){p=d.calcEnds();if(d.position=="top"||d.position=="bottom"){g=p.from;b=p.to}else{e=p.from;a=p.to}}}if(n.xField&&!Ext.isNumber(g)){d=Ext.create("Ext.chart.axis.Axis",{chart:m,fields:[].concat(n.xField)}).calcEnds();g=d.from;b=d.to}if(n.yField&&!Ext.isNumber(e)){d=Ext.create("Ext.chart.axis.Axis",{chart:m,fields:[].concat(n.yField)}).calcEnds();e=d.from;a=d.to}if(isNaN(g)){g=0;b=q.getCount()-1;r=t.width/(q.getCount()-1)}else{r=t.width/(b-g)}if(isNaN(e)){e=0;a=q.getCount()-1;c=t.height/(q.getCount()-1)}else{c=t.height/(a-e)}return{bbox:t,minX:g,minY:e,xScale:r,yScale:c}},getPaths:function(){var z=this,m=z.chart,b=m.shadow,d=m.getChartStore(),h=z.group,e=z.bounds=z.getBounds(),a=z.bbox,B=e.xScale,c=e.yScale,v=e.minX,u=e.minY,A=a.x,w=a.y,g=a.height,n=z.items=[],q=[],k,j,r,t,p;d.each(function(x,y){r=x.get(z.xField);t=x.get(z.yField);if(typeof t=="undefined"||(typeof t=="string"&&!t)){return}if(typeof r=="string"||typeof r=="object"&&!Ext.isDate(r)){r=y}if(typeof t=="string"||typeof t=="object"&&!Ext.isDate(t)){t=y}k=A+(r-v)*B;j=w+g-(t-u)*c;q.push({x:k,y:j});z.items.push({series:z,value:[r,t],point:[k,j],storeItem:x});if(m.animate&&m.resizing){p=h.getAt(y);if(p){z.resetPoint(p);if(b){z.resetShadow(p)}}}});return q},resetPoint:function(a){var b=this.bbox;a.setAttributes({translate:{x:(b.x+b.width)/2,y:(b.y+b.height)/2}},true)},resetShadow:function(c){var g=this,e=c.shadows,j=g.shadowAttributes,d=g.shadowGroups.length,h=g.bbox,b,a;for(b=0;b<d;b++){a=Ext.apply({},j[b]);if(a.translate){a.translate.x+=(h.x+h.width)/2;a.translate.y+=(h.y+h.height)/2}else{a.translate={x:(h.x+h.width)/2,y:(h.y+h.height)/2}}e[b].setAttributes(a,true)}},createPoint:function(a,c){var d=this,b=d.chart,e=d.group,g=d.bbox;return Ext.chart.Shape[c](b.surface,Ext.apply({},{x:0,y:0,group:e,translate:{x:(g.x+g.width)/2,y:(g.y+g.height)/2}},a))},createShadow:function(p,g,k){var j=this,h=j.chart,m=j.shadowGroups,d=j.shadowAttributes,a=m.length,q=j.bbox,c,n,b,e;p.shadows=b=[];for(c=0;c<a;c++){e=Ext.apply({},d[c]);if(e.translate){e.translate.x+=(q.x+q.width)/2;e.translate.y+=(q.y+q.height)/2}else{Ext.apply(e,{translate:{x:(q.x+q.width)/2,y:(q.y+q.height)/2}})}Ext.apply(e,g);n=Ext.chart.Shape[k](h.surface,Ext.apply({},{x:0,y:0,group:m[c]},e));b.push(n)}},drawSeries:function(){var x=this,m=x.chart,h=m.getChartStore(),j=x.group,c=m.shadow,a=x.shadowGroups,t=x.shadowAttributes,u=a.length,n,p,q,k,r,w,e,g,b,d,v;w=Ext.apply(x.markerStyle,x.markerConfig);g=w.type;delete w.type;if(!h||!h.getCount()){return}x.unHighlightItem();x.cleanHighlights();p=x.getPaths();k=p.length;for(r=0;r<k;r++){q=p[r];n=j.getAt(r);Ext.apply(q,w);if(!n){n=x.createPoint(q,g);if(c){x.createShadow(n,w,g)}}b=n.shadows;if(m.animate){d=x.renderer(n,h.getAt(r),{translate:q},r,h);n._to=d;x.onAnimate(n,{to:d});for(e=0;e<u;e++){v=Ext.apply({},t[e]);d=x.renderer(b[e],h.getAt(r),Ext.apply({},{hidden:false,translate:{x:q.x+(v.translate?v.translate.x:0),y:q.y+(v.translate?v.translate.y:0)}},v),r,h);x.onAnimate(b[e],{to:d})}}else{d=x.renderer(n,h.getAt(r),{translate:q},r,h);n._to=d;n.setAttributes(d,true);for(e=0;e<u;e++){v=Ext.apply({},t[e]);d=x.renderer(b[e],h.getAt(r),Ext.apply({},{hidden:false,translate:{x:q.x+(v.translate?v.translate.x:0),y:q.y+(v.translate?v.translate.y:0)}},v),r,h);b[e].setAttributes(d,true)}}x.items[r].sprite=n}k=j.getCount();for(r=p.length;r<k;r++){j.getAt(r).hide(true)}x.renderLabels();x.renderCallouts()},onCreateLabel:function(d,k,c,e){var g=this,h=g.labelsGroup,a=g.label,b=Ext.apply({},a,g.seriesLabelStyle),j=g.bbox;return g.chart.surface.add(Ext.apply({type:"text",group:h,x:k.point[0],y:j.y+j.height/2},b))},onPlaceLabel:function(g,k,w,t,r,d){var A=this,m=A.chart,v=m.resizing,z=A.label,u=z.renderer,b=z.field,a=A.bbox,j=w.point[0],h=w.point[1],c=w.sprite.attr.radius,e,p,n,q;g.setAttributes({text:u(k.get(b)),hidden:true},true);if(r=="rotate"){g.setAttributes({"text-anchor":"start",rotation:{x:j,y:h,degrees:-45}},true);e=g.getBBox();p=e.width;n=e.height;j=j<a.x?a.x:j;j=(j+p>a.x+a.width)?(j-(j+p-a.x-a.width)):j;h=(h-n<a.y)?a.y+n:h}else{if(r=="under"||r=="over"){e=w.sprite.getBBox();e.width=e.width||(c*2);e.height=e.height||(c*2);h=h+(r=="over"?-e.height:e.height);e=g.getBBox();p=e.width/2;n=e.height/2;j=j-p<a.x?a.x+p:j;j=(j+p>a.x+a.width)?(j-(j+p-a.x-a.width)):j;h=h-n<a.y?a.y+n:h;h=(h+n>a.y+a.height)?(h-(h+n-a.y-a.height)):h}}if(!m.animate){g.setAttributes({x:j,y:h},true);g.show(true)}else{if(v){q=w.sprite.getActiveAnimation();if(q){q.on("afteranimate",function(){g.setAttributes({x:j,y:h},true);g.show(true)})}else{g.show(true)}}else{A.onAnimate(g,{to:{x:j,y:h}})}}},onPlaceCallout:function(k,n,E,C,B,c,h){var H=this,q=H.chart,z=q.surface,D=q.resizing,G=H.callouts,r=H.items,b=E.point,I,a=k.label.getBBox(),F=30,w=10,v=3,e,d,g,u,t,A=H.bbox,m,j;I=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)];m=b[0]+I[0]*F;j=b[1]+I[1]*F;e=m+(I[0]>0?0:-(a.width+2*v));d=j-a.height/2-v;g=a.width+2*v;u=a.height+2*v;if(e<A[0]||(e+g)>(A[0]+A[2])){I[0]*=-1}if(d<A[1]||(d+u)>(A[1]+A[3])){I[1]*=-1}m=b[0]+I[0]*F;j=b[1]+I[1]*F;e=m+(I[0]>0?0:-(a.width+2*v));d=j-a.height/2-v;g=a.width+2*v;u=a.height+2*v;if(q.animate){H.onAnimate(k.lines,{to:{path:["M",b[0],b[1],"L",m,j,"Z"]}},true);H.onAnimate(k.box,{to:{x:e,y:d,width:g,height:u}},true);H.onAnimate(k.label,{to:{x:m+(I[0]>0?v:-(a.width+v)),y:j}},true)}else{k.lines.setAttributes({path:["M",b[0],b[1],"L",m,j,"Z"]},true);k.box.setAttributes({x:e,y:d,width:g,height:u},true);k.label.setAttributes({x:m+(I[0]>0?v:-(a.width+v)),y:j},true)}for(t in k){k[t].show(true)}},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(c,h,e){var b,d=10,a=Math.abs;function g(j){var m=a(j[0]-c),k=a(j[1]-h);return Math.sqrt(m*m+k*k)}b=e.point;return(b[0]-d<=c&&b[0]+d>=c&&b[1]-d<=h&&b[1]+d>=h)}});Ext.define("Ext.chart.theme.Base",{requires:["Ext.chart.theme.Theme"],constructor:function(a){Ext.chart.theme.call(this,a,{background:false,axis:{stroke:"#444","stroke-width":1},axisLabelTop:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisLabelRight:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisLabelBottom:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisLabelLeft:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisTitleTop:{font:"bold 18px Arial",fill:"#444"},axisTitleRight:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},axisTitleBottom:{font:"bold 18px Arial",fill:"#444"},axisTitleLeft:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},series:{"stroke-width":0},seriesLabel:{font:"12px Arial",fill:"#333"},marker:{stroke:"#555",fill:"#000",radius:3,size:3},colors:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],seriesThemes:[{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#a66111"}],markerThemes:[{fill:"#115fa6",type:"circle"},{fill:"#94ae0a",type:"cross"},{fill:"#a61120",type:"plus"}]})}},function(){var c=["#b1da5a","#4ce0e7","#e84b67","#da5abd","#4d7fe6","#fec935"],k=["Green","Sky","Red","Purple","Blue","Yellow"],h=0,g=0,b=c.length,a=Ext.chart.theme,d=[["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]],e=d.length;for(;h<b;h++){a[k[h]]=(function(j){return Ext.extend(a.Base,{constructor:function(m){a.Base.prototype.constructor.call(this,Ext.apply({baseColor:j},m))}})})(c[h])}for(h=0;h<e;h++){a["Category"+(h+1)]=(function(j){return Ext.extend(a.Base,{constructor:function(m){a.Base.prototype.constructor.call(this,Ext.apply({colors:j},m))}})})(d[h])}});Ext.define("Ext.data.ArrayStore",{extend:"Ext.data.Store",alias:"store.array",uses:["Ext.data.reader.Array"],constructor:function(a){a=a||{};Ext.applyIf(a,{proxy:{type:"memory",reader:"array"}});this.callParent([a])},loadData:function(e,a){if(this.expandData===true){var d=[],b=0,c=e.length;for(;b<c;b++){d[d.length]=[e[b]]}e=d}this.callParent([e,a])}},function(){Ext.data.SimpleStore=Ext.data.ArrayStore});Ext.define("Ext.data.Batch",{mixins:{observable:"Ext.util.Observable"},autoStart:false,current:-1,total:0,isRunning:false,isComplete:false,hasException:false,pauseOnException:true,constructor:function(a){var b=this;b.addEvents("complete","exception","operationcomplete");b.mixins.observable.constructor.call(b,a);b.operations=[]},add:function(a){this.total++;a.setBatch(this);this.operations.push(a)},start:function(){this.hasException=false;this.isRunning=true;this.runNextOperation()},runNextOperation:function(){this.runOperation(this.current+1)},pause:function(){this.isRunning=false},runOperation:function(d){var e=this,c=e.operations,b=c[d],a;if(b===undefined){e.isRunning=false;e.isComplete=true;e.fireEvent("complete",e,c[c.length-1])}else{e.current=d;a=function(g){var h=g.hasException();if(h){e.hasException=true;e.fireEvent("exception",e,g)}else{e.fireEvent("operationcomplete",e,g)}if(h&&e.pauseOnException){e.pause()}else{g.setCompleted();e.runNextOperation()}};b.setStarted();e.proxy[b.action](b,a,e)}}});Ext.define("Ext.data.BelongsToAssociation",{extend:"Ext.data.Association",alias:"association.belongsto",constructor:function(c){this.callParent(arguments);var e=this,a=e.ownerModel.prototype,g=e.associatedName,d=e.getterName||"get"+g,b=e.setterName||"set"+g;Ext.applyIf(e,{name:g,foreignKey:g.toLowerCase()+"_id",instanceName:g+"BelongsToInstance",associationKey:g.toLowerCase()});a[d]=e.createGetter();a[b]=e.createSetter()},createSetter:function(){var c=this,d=c.ownerModel,e=c.associatedModel,b=c.foreignKey,a=c.primaryKey;return function(j,g,h){this.set(b,j);if(typeof g=="function"){g={callback:g,scope:h||this}}if(Ext.isObject(g)){return this.save(g)}}},createGetter:function(){var d=this,g=d.ownerModel,e=d.associatedName,h=d.associatedModel,c=d.foreignKey,b=d.primaryKey,a=d.instanceName;return function(n,p){n=n||{};var m=this,q=m.get(c),j,k;if(m[a]===undefined){j=Ext.ModelManager.create({},e);j.set(b,q);if(typeof n=="function"){n={callback:n,scope:p||m}}h.load(q,n);m[a]=h;return h}else{j=m[a];k=[j];p=p||m;Ext.callback(n,p,k);Ext.callback(n.success,p,k);Ext.callback(n.failure,p,k);Ext.callback(n.callback,p,k);return j}}},read:function(b,a,c){b[this.instanceName]=a.read([c]).records[0]}});Ext.define("Ext.data.BufferStore",{extend:"Ext.data.Store",alias:"store.buffer",sortOnLoad:false,filterOnLoad:false,constructor:function(){Ext.Error.raise("The BufferStore class has been deprecated. Instead, specify the buffered config option on Ext.data.Store")}});Ext.define("Ext.direct.Manager",{singleton:true,mixins:{observable:"Ext.util.Observable"},requires:["Ext.util.MixedCollection"],statics:{exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"}},constructor:function(){var a=this;a.addEvents("event","exception");a.transactions=Ext.create("Ext.util.MixedCollection");a.providers=Ext.create("Ext.util.MixedCollection");a.mixins.observable.constructor.call(a)},addProvider:function(e){var d=this,b=arguments,c=0,a;if(b.length>1){for(a=b.length;c<a;++c){d.addProvider(b[c])}return}if(!e.isProvider){e=Ext.create("direct."+e.type+"provider",e)}d.providers.add(e);e.on("data",d.onProviderData,d);if(!e.isConnected()){e.connect()}return e},getProvider:function(a){return a.isProvider?a:this.providers.get(a)},removeProvider:function(c){var b=this,a=b.providers;c=c.isProvider?c:a.get(c);if(c){c.un("data",b.onProviderData,b);a.remove(c);return c}return null},addTransaction:function(a){this.transactions.add(a);return a},removeTransaction:function(a){a=this.getTransaction(a);this.transactions.remove(a);return a},getTransaction:function(a){return a.isTransaction?a:this.transactions.get(a)},onProviderData:function(e,d){var c=this,b=0,a;if(Ext.isArray(d)){for(a=d.length;b<a;++b){c.onProviderData(e,d[b])}return}if(d.name&&d.name!="event"&&d.name!="exception"){c.fireEvent(d.name,d)}else{if(d.status===false){c.fireEvent("exception",d)}}c.fireEvent("event",d,e)}},function(){Ext.Direct=Ext.direct.Manager});Ext.define("Ext.data.proxy.Direct",{extend:"Ext.data.proxy.Server",alternateClassName:"Ext.data.DirectProxy",alias:"proxy.direct",requires:["Ext.direct.Manager"],paramOrder:undefined,paramsAsHash:true,directFn:undefined,paramOrderRe:/[\s,|]/,constructor:function(a){var b=this;Ext.apply(b,a);if(Ext.isString(b.paramOrder)){b.paramOrder=b.paramOrder.split(b.paramOrderRe)}b.callParent(arguments)},doRequest:function(d,p,q){var m=this,b=m.getWriter(),e=m.buildRequest(d,p,q),n=m.api[e.action]||m.directFn,j=[],c=e.params,k=m.paramOrder,a,g=0,h;if(d.allowWrite()){e=b.write(e)}if(d.action=="read"){a=n.directCfg.method;if(a.ordered){if(a.len>0){if(k){for(h=k.length;g<h;++g){j.push(c[k[g]])}}else{if(m.paramsAsHash){j.push(c)}}}}else{j.push(c)}}else{j.push(e.jsonData)}Ext.apply(e,{args:j,directFn:n});j.push(m.createRequestCallback(e,d,p,q),m);n.apply(window,j)},applyEncoding:function(a){return a},createRequestCallback:function(d,a,e,b){var c=this;return function(h,g){c.processResponse(g.status,a,d,g,e,b)}},extractResponseData:function(a){return Ext.isDefined(a.result)?a.result:a.data},setException:function(b,a){b.setException(a.message)},buildUrl:function(){return""}});Ext.define("Ext.data.DirectStore",{extend:"Ext.data.Store",alias:"store.direct",requires:["Ext.data.proxy.Direct"],constructor:function(a){a=Ext.apply({},a);if(!a.proxy){var b={type:"direct",reader:{type:"json"}};Ext.copyTo(b,a,"paramOrder,paramsAsHash,directFn,api,simpleSortMode");Ext.copyTo(b.reader,a,"totalProperty,root,idProperty");a.proxy=b}this.callParent([a])}});Ext.define("Ext.util.Inflector",{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^person$/),"people"],[(/^man$/),"men"],[(/^(child)$/),"$1ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/people$/i),"person"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(g){if(this.isTransnumeral(g)){return g}var e=this.plurals,d=e.length,a,c,b;for(b=0;b<d;b++){a=e[b];c=a[0];if(c==g||(c.test&&c.test(g))){return g.replace(c,a[1])}}return g},singularize:function(g){if(this.isTransnumeral(g)){return g}var e=this.singulars,d=e.length,a,c,b;for(b=0;b<d;b++){a=e[b];c=a[0];if(c==g||(c.test&&c.test(g))){return g.replace(c,a[1])}}return g},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(d){var b=parseInt(d,10),c=b%10,a=b%100;if(11<=a&&a<=13){return d+"th"}else{switch(c){case 1:return d+"st";case 2:return d+"nd";case 3:return d+"rd";default:return d+"th"}}}},function(){var b={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},a;for(a in b){this.plural(a,b[a]);this.singular(b[a],a)}});Ext.define("Ext.data.HasManyAssociation",{extend:"Ext.data.Association",requires:["Ext.util.Inflector"],alias:"association.hasmany",constructor:function(c){var d=this,a,b;d.callParent(arguments);d.name=d.name||Ext.util.Inflector.pluralize(d.associatedName.toLowerCase());a=d.ownerModel.prototype;b=d.name;Ext.applyIf(d,{storeName:b+"Store",foreignKey:d.ownerName.toLowerCase()+"_id"});a[b]=d.createStore()},createStore:function(){var h=this,j=h.associatedModel,c=h.storeName,d=h.foreignKey,a=h.primaryKey,g=h.filterProperty,b=h.autoLoad,e=h.storeConfig||{};return function(){var p=this,m,n,k={};if(p[c]===undefined){if(g){n={property:g,value:p.get(g),exactMatch:true}}else{n={property:d,value:p.get(a),exactMatch:true}}k[d]=p.get(a);m=Ext.apply({},e,{model:j,filters:[n],remoteFilter:false,modelDefaults:k});p[c]=Ext.create("Ext.data.Store",m);if(b){p[c].load()}}return p[c]}},read:function(c,a,e){var d=c[this.name](),b;d.add(a.read(e).records);b=this.associatedModel.prototype.associations.findBy(function(g){return g.type==="belongsTo"&&g.associatedName===c.$className});if(b){d.data.each(function(g){g[b.instanceName]=c})}}});Ext.define("Ext.data.JsonP",{singleton:true,statics:{requestCount:0,requests:{}},timeout:30000,disableCaching:true,disableCachingParam:"_dc",callbackKey:"callback",request:function(q){q=Ext.apply({},q);var k=this,d=Ext.isDefined(q.disableCaching)?q.disableCaching:k.disableCaching,h=q.disableCachingParam||k.disableCachingParam,c=++k.statics().requestCount,n=q.callbackName||"callback"+c,j=q.callbackKey||k.callbackKey,p=Ext.isDefined(q.timeout)?q.timeout:k.timeout,e=Ext.apply({},q.params),b=q.url,a=Ext.isSandboxed?Ext.getUniqueGlobalNamespace():"Ext",g,m;e[j]=a+".data.JsonP."+n;if(d){e[h]=new Date().getTime()}m=k.createScript(b,e);k.statics().requests[c]=g={url:b,params:e,script:m,id:c,scope:q.scope,success:q.success,failure:q.failure,callback:q.callback,callbackName:n};if(p>0){g.timeout=setTimeout(Ext.bind(k.handleTimeout,k,[g]),p)}k.setupErrorHandling(g);k[n]=Ext.bind(k.handleResponse,k,[g],true);Ext.getHead().appendChild(m);return g},abort:function(b){var c=this.statics().requests,a;if(b){if(!b.id){b=c[b]}this.abort(b)}else{for(a in c){if(c.hasOwnProperty(a)){this.abort(c[a])}}}},setupErrorHandling:function(a){a.script.onerror=Ext.bind(this.handleError,this,[a])},handleAbort:function(a){a.errorType="abort";this.handleResponse(null,a)},handleError:function(a){a.errorType="error";this.handleResponse(null,a)},cleanupErrorHandling:function(a){a.script.onerror=null},handleTimeout:function(a){a.errorType="timeout";this.handleResponse(null,a)},handleResponse:function(a,b){var c=true;if(b.timeout){clearTimeout(b.timeout)}delete this[b.callbackName];delete this.statics()[b.id];this.cleanupErrorHandling(b);Ext.fly(b.script).remove();if(b.errorType){c=false;Ext.callback(b.failure,b.scope,[b.errorType])}else{Ext.callback(b.success,b.scope,[a])}Ext.callback(b.callback,b.scope,[c,a,b.errorType])},createScript:function(b,c){var a=document.createElement("script");a.setAttribute("src",Ext.urlAppend(b,Ext.Object.toQueryString(c)));a.setAttribute("async",true);a.setAttribute("type","text/javascript");return a}});Ext.define("Ext.data.JsonPStore",{extend:"Ext.data.Store",alias:"store.jsonp",constructor:function(a){this.callParent(Ext.apply(a,{reader:Ext.create("Ext.data.reader.Json",a),proxy:Ext.create("Ext.data.proxy.JsonP",a)}))}});Ext.define("Ext.data.NodeInterface",{requires:["Ext.data.Field"],statics:{decorate:function(c){if(!c.isNode){var j=Ext.ModelManager,e=c.modelName,h=j.getModel(e),k=h.prototype.idProperty,g=[],b,a,d;h.override(this.getPrototypeBody());g=this.applyFields(h,[{name:k,type:"string",defaultValue:null},{name:"parentId",type:"string",defaultValue:null},{name:"index",type:"int",defaultValue:null},{name:"depth",type:"int",defaultValue:0},{name:"expanded",type:"bool",defaultValue:false,persist:false},{name:"expandable",type:"bool",defaultValue:true,persist:false},{name:"checked",type:"auto",defaultValue:null},{name:"leaf",type:"bool",defaultValue:false,persist:false},{name:"cls",type:"string",defaultValue:null,persist:false},{name:"iconCls",type:"string",defaultValue:null,persist:false},{name:"icon",type:"string",defaultValue:null,persist:false},{name:"root",type:"boolean",defaultValue:false,persist:false},{name:"isLast",type:"boolean",defaultValue:false,persist:false},{name:"isFirst",type:"boolean",defaultValue:false,persist:false},{name:"allowDrop",type:"boolean",defaultValue:true,persist:false},{name:"allowDrag",type:"boolean",defaultValue:true,persist:false},{name:"loaded",type:"boolean",defaultValue:false,persist:false},{name:"loading",type:"boolean",defaultValue:false,persist:false},{name:"href",type:"string",defaultValue:null,persist:false},{name:"hrefTarget",type:"string",defaultValue:null,persist:false},{name:"qtip",type:"string",defaultValue:null,persist:false},{name:"qtitle",type:"string",defaultValue:null,persist:false}]);d=g.length;for(b=0;b<d;++b){a=g[b];if(c.get(a.name)===undefined){c.data[a.name]=a.defaultValue}}}Ext.applyIf(c,{firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,childNodes:[]});c.commit(true);c.enableBubble(["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","sort"]);return c},applyFields:function(j,k){var c=j.prototype,e=c.fields,m=e.keys,h=k.length,b,d,a,g=[];for(d=0;d<h;d++){b=k[d];if(!Ext.Array.contains(m,b.name)){b=Ext.create("data.field",b);g.push(b);e.add(b)}}return g},getPrototypeBody:function(){return{isNode:true,createNode:function(a){if(Ext.isObject(a)&&!a.isModel){a=Ext.ModelManager.create(a,this.modelName)}return Ext.data.NodeInterface.decorate(a)},isLeaf:function(){return this.get("leaf")===true},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},updateInfo:function(k){var m=this,b=m.isRoot(),h=m.parentNode,c=(!h?true:h.firstChild==m),g=(!h?true:h.lastChild==m),e=0,n=m,a=m.childNodes,j=a.length,d=0;while(n.parentNode){++e;n=n.parentNode}m.beginEdit();m.set({isFirst:c,isLast:g,depth:e,index:h?h.indexOf(m):0,parentId:h?h.getId():null});m.endEdit(k);if(k){m.commit()}for(d=0;d<j;d++){a[d].updateInfo(k)}},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var a=this;if(a.get("expandable")){return !(a.isLeaf()||(a.isLoaded()&&!a.hasChildNodes()))}return false},appendChild:function(b,k,j){var g=this,c,e,d,h,a;if(Ext.isArray(b)){for(c=0,e=b.length;c<e;c++){g.appendChild(b[c])}}else{b=g.createNode(b);if(k!==true&&g.fireEvent("beforeappend",g,b)===false){return false}d=g.childNodes.length;h=b.parentNode;if(h){if(k!==true&&b.fireEvent("beforemove",b,h,g,d)===false){return false}h.removeChild(b,null,false,true)}d=g.childNodes.length;if(d===0){g.setFirstChild(b)}g.childNodes.push(b);b.parentNode=g;b.nextSibling=null;g.setLastChild(b);a=g.childNodes[d-1];if(a){b.previousSibling=a;a.nextSibling=b;a.updateInfo(j)}else{b.previousSibling=null}b.updateInfo(j);if(!g.isLoaded()){g.set("loaded",true)}else{if(g.childNodes.length===1){g.set("loaded",g.isLoaded())}}if(k!==true){g.fireEvent("append",g,b,d);if(h){b.fireEvent("move",b,h,g,d)}}return b}},getBubbleTarget:function(){return this.parentNode},removeChild:function(e,b,c,g){var d=this,a=d.indexOf(e);if(a==-1||(c!==true&&d.fireEvent("beforeremove",d,e)===false)){return false}Ext.Array.erase(d.childNodes,a,1);if(d.firstChild==e){d.setFirstChild(e.nextSibling)}if(d.lastChild==e){d.setLastChild(e.previousSibling)}if(e.previousSibling){e.previousSibling.nextSibling=e.nextSibling;e.previousSibling.updateInfo(g)}if(e.nextSibling){e.nextSibling.previousSibling=e.previousSibling;e.nextSibling.updateInfo(g)}if(c!==true){d.fireEvent("remove",d,e)}if(!d.childNodes.length){d.set("loaded",d.isLoaded())}if(b){e.destroy(true)}else{e.clear()}return e},copy:function(d,c){var g=this,b=g.callOverridden(arguments),a=g.childNodes?g.childNodes.length:0,e;if(c){for(e=0;e<a;e++){b.appendChild(g.childNodes[e].copy(true))}}return b},clear:function(a){var b=this;b.parentNode=b.previousSibling=b.nextSibling=null;if(a){b.firstChild=b.lastChild=null}},destroy:function(a){var c=this,b=c.destroyOptions;if(a===true){c.clear(true);Ext.each(c.childNodes,function(d){d.destroy(true)});c.childNodes=null;delete c.destroyOptions;c.callOverridden([b])}else{c.destroyOptions=a;c.remove(true)}},insertBefore:function(g,a,d){var e=this,b=e.indexOf(a),c=g.parentNode,h=b,j;if(!a){return e.appendChild(g)}if(g==a){return false}g=e.createNode(g);if(d!==true&&e.fireEvent("beforeinsert",e,g,a)===false){return false}if(c==e&&e.indexOf(g)<b){h--}if(c){if(d!==true&&g.fireEvent("beforemove",g,c,e,b,a)===false){return false}c.removeChild(g)}if(h===0){e.setFirstChild(g)}Ext.Array.splice(e.childNodes,h,0,g);g.parentNode=e;g.nextSibling=a;a.previousSibling=g;j=e.childNodes[h-1];if(j){g.previousSibling=j;j.nextSibling=g;j.updateInfo()}else{g.previousSibling=null}g.updateInfo();if(!e.isLoaded()){e.set("loaded",true)}else{if(e.childNodes.length===1){e.set("loaded",e.isLoaded())}}if(d!==true){e.fireEvent("insert",e,g,a);if(c){g.fireEvent("move",g,c,e,h,a)}}return g},insertChild:function(a,c){var b=this.childNodes[a];if(b){return this.insertBefore(c,b)}else{return this.appendChild(c)}},remove:function(b,c){var a=this.parentNode;if(a){a.removeChild(this,b,c,true)}return this},removeAll:function(a,b){var d=this.childNodes,c;while((c=d[0])){this.removeChild(c,a,b)}return this},getChildAt:function(a){return this.childNodes[a]},replaceChild:function(a,d,c){var b=d?d.nextSibling:null;this.removeChild(d,c);this.insertBefore(a,b,c);return d},indexOf:function(a){return Ext.Array.indexOf(this.childNodes,a)},getPath:function(d,c){d=d||this.idProperty;c=c||"/";var b=[this.get(d)],a=this.parentNode;while(a){b.unshift(a.get(d));a=a.parentNode}return c+b.join(c)},getDepth:function(){return this.get("depth")},bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.parentNode}},cascade:function(){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.data.Node: cascade has been deprecated. Please use cascadeBy instead.")}return this.cascadeBy.apply(this,arguments)},cascadeBy:function(d,c,a){if(d.apply(c||this,a||[this])!==false){var g=this.childNodes,e=g.length,b;for(b=0;b<e;b++){g[b].cascadeBy(d,c,a)}}},eachChild:function(d,c,a){var g=this.childNodes,e=g.length,b;for(b=0;b<e;b++){if(d.apply(c||this,a||[g[b]])===false){break}}},findChild:function(b,c,a){return this.findChildBy(function(){return this.get(b)==c},null,a)},findChildBy:function(h,g,b){var e=this.childNodes,a=e.length,d=0,j,c;for(;d<a;d++){j=e[d];if(h.call(g||j,j)===true){return j}else{if(b){c=j.findChildBy(h,g,b);if(c!==null){return c}}}}return null},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var b=this.parentNode;while(b){if(b==a){return true}b=b.parentNode}return false},sort:function(g,b,a){var d=this.childNodes,e=d.length,c,h;if(e>0){Ext.Array.sort(d,g);for(c=0;c<e;c++){h=d[c];h.previousSibling=d[c-1];h.nextSibling=d[c+1];if(c===0){this.setFirstChild(h);h.updateInfo()}if(c==e-1){this.setLastChild(h);h.updateInfo()}if(b&&!h.isLeaf()){h.sort(g,true,true)}}if(a!==true){this.fireEvent("sort",this,d)}}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isLoading:function(){return this.get("loading")},isRoot:function(){return !this.parentNode},isVisible:function(){var a=this.parentNode;while(a){if(!a.isExpanded()){return false}a=a.parentNode}return true},expand:function(a,d,b){var c=this;if(!c.isLeaf()){if(c.isLoading()){c.on("expand",function(){c.expand(a,d,b)},c,{single:true})}else{if(!c.isExpanded()){c.fireEvent("beforeexpand",c,function(){c.set("expanded",true);c.fireEvent("expand",c,c.childNodes,false);if(a){c.expandChildren(true,d,b)}else{Ext.callback(d,b||c,[c.childNodes])}},c)}else{if(a){c.expandChildren(true,d,b)}else{Ext.callback(d,b||c,[c.childNodes])}}}}else{Ext.callback(d,b||c)}},expandChildren:function(d,j,k){var h=this,e=0,a=h.childNodes,g=a.length,c,b=0;for(;e<g;++e){c=a[e];if(!c.isLeaf()&&!c.isExpanded()){b++;a[e].expand(d,function(){b--;if(j&&!b){Ext.callback(j,k||h,[h.childNodes])}})}}if(!b&&j){Ext.callback(j,k||h,[h.childNodes])}},collapse:function(a,d,b){var c=this;if(!c.isLeaf()){if(!c.collapsing&&c.isExpanded()){c.fireEvent("beforecollapse",c,function(){c.set("expanded",false);c.fireEvent("collapse",c,c.childNodes,false);if(a){c.collapseChildren(true,d,b)}else{Ext.callback(d,b||c,[c.childNodes])}},c)}else{if(a){c.collapseChildren(true,d,b)}}}else{Ext.callback(d,b||c,[c.childNodes])}},collapseChildren:function(d,j,k){var h=this,e=0,b=h.childNodes,g=b.length,c,a=0;for(;e<g;++e){c=b[e];if(!c.isLeaf()&&c.isExpanded()){a++;b[e].collapse(d,function(){a--;if(j&&!a){Ext.callback(j,k||h,[h.childNodes])}})}}if(!a&&j){Ext.callback(j,k||h,[h.childNodes])}}}}}});Ext.define("Ext.data.NodeStore",{extend:"Ext.data.Store",alias:"store.node",requires:["Ext.data.NodeInterface"],node:null,recursive:false,rootVisible:false,constructor:function(a){var c=this,b;a=a||{};Ext.apply(c,a);a.proxy={type:"proxy"};c.callParent([a]);c.addEvents("expand","collapse","beforeexpand","beforecollapse");b=c.node;if(b){c.node=null;c.setNode(b)}},setNode:function(b){var a=this;if(a.node&&a.node!=b){a.mun(a.node,{expand:a.onNodeExpand,collapse:a.onNodeCollapse,append:a.onNodeAppend,insert:a.onNodeInsert,remove:a.onNodeRemove,sort:a.onNodeSort,scope:a});a.node=null}if(b){Ext.data.NodeInterface.decorate(b);a.removeAll();if(a.rootVisible){a.add(b)}a.mon(b,{expand:a.onNodeExpand,collapse:a.onNodeCollapse,append:a.onNodeAppend,insert:a.onNodeInsert,remove:a.onNodeRemove,sort:a.onNodeSort,scope:a});a.node=b;if(b.isExpanded()&&b.isLoaded()){a.onNodeExpand(b,b.childNodes,true)}}},onNodeSort:function(b,c){var a=this;if((a.indexOf(b)!==-1||(b===a.node&&!a.rootVisible)&&b.isExpanded())){a.onNodeCollapse(b,c,true);a.onNodeExpand(b,c,true)}},onNodeExpand:function(g,d,c){var j=this,a=j.indexOf(g)+1,h=d?d.length:0,e,b;if(!j.recursive&&g!==j.node){return}if(!j.isVisible(g)){return}if(!c&&j.fireEvent("beforeexpand",g,d,a)===false){return}if(h){j.insert(a,d);for(e=0;e<h;e++){b=d[e];if(b.isExpanded()){if(b.isLoaded()){j.onNodeExpand(b,b.childNodes,true)}else{b.set("expanded",false);b.expand()}}}}if(!c){j.fireEvent("expand",g,d)}},onNodeCollapse:function(g,c,b){var j=this,h=c.length,e=j.indexOf(g)+1,d,a;if(!j.recursive&&g!==j.node){return}if(!b&&j.fireEvent("beforecollapse",g,c,e)===false){return}for(d=0;d<h;d++){a=c[d];j.remove(a);if(a.isExpanded()){j.onNodeCollapse(a,a.childNodes,true)}}if(!b){j.fireEvent("collapse",g,c,e)}},onNodeAppend:function(d,g,b){var e=this,a,c;if(e.isVisible(g)){if(b===0){a=d}else{c=g.previousSibling;while(c.isExpanded()&&c.lastChild){c=c.lastChild}a=c}e.insert(e.indexOf(a)+1,g);if(!g.isLeaf()&&g.isExpanded()){if(g.isLoaded()){e.onNodeExpand(g,g.childNodes,true)}else{g.set("expanded",false);g.expand()}}}},onNodeInsert:function(c,e,a){var d=this,b=this.indexOf(a);if(b!=-1&&d.isVisible(e)){d.insert(b,e);if(!e.isLeaf()&&e.isExpanded()){if(e.isLoaded()){d.onNodeExpand(e,e.childNodes,true)}else{e.set("expanded",false);e.expand()}}}},onNodeRemove:function(b,d,a){var c=this;if(c.indexOf(d)!=-1){if(!d.isLeaf()&&d.isExpanded()){c.onNodeCollapse(d,d.childNodes,true)}c.remove(d)}},isVisible:function(b){var a=b.parentNode;while(a){if(a===this.node&&!this.rootVisible&&a.isExpanded()){return true}if(this.indexOf(a)===-1||!a.isExpanded()){return false}a=a.parentNode}return true}});Ext.define("Ext.data.Request",{action:undefined,params:undefined,method:"GET",url:undefined,constructor:function(a){Ext.apply(this,a)}});Ext.define("Ext.data.SequentialIdGenerator",{extend:"Ext.data.IdGenerator",alias:"idgen.sequential",constructor:function(){var a=this;a.callParent(arguments);a.parts=[a.prefix,""]},prefix:"",seed:1,generate:function(){var a=this,b=a.parts;b[1]=a.seed++;return b.join("")}});Ext.define("Ext.data.Tree",{alias:"data.tree",mixins:{observable:"Ext.util.Observable"},root:null,constructor:function(a){var b=this;b.mixins.observable.constructor.call(b);if(a){b.setRootNode(a)}},getRootNode:function(){return this.root},setRootNode:function(b){var a=this;a.root=b;Ext.data.NodeInterface.decorate(b);if(a.fireEvent("beforeappend",null,b)!==false){b.set("root",true);b.updateInfo();a.relayEvents(b,["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","rootchange"]);b.on({scope:a,insert:a.onNodeInsert,append:a.onNodeAppend,remove:a.onNodeRemove});a.nodeHash={};a.registerNode(b);a.fireEvent("append",null,b);a.fireEvent("rootchange",b)}return b},flatten:function(){var a=[],c=this.nodeHash,b;for(b in c){if(c.hasOwnProperty(b)){a.push(c[b])}}return a},onNodeInsert:function(a,b){this.registerNode(b,true)},onNodeAppend:function(a,b){this.registerNode(b,true)},onNodeRemove:function(a,b){this.unregisterNode(b,true)},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(b,a){this.nodeHash[b.getId()||b.internalId]=b;if(a===true){b.eachChild(function(c){this.registerNode(c,true)},this)}},unregisterNode:function(b,a){delete this.nodeHash[b.getId()||b.internalId];if(a===true){b.eachChild(function(c){this.unregisterNode(c,true)},this)}},sort:function(b,a){this.getRootNode().sort(b,a)},filter:function(b,a){this.getRootNode().filter(b,a)}});Ext.define("Ext.data.TreeStore",{extend:"Ext.data.AbstractStore",alias:"store.tree",requires:["Ext.data.Tree","Ext.data.NodeInterface","Ext.data.NodeStore"],clearOnLoad:true,nodeParam:"node",defaultRootId:"root",defaultRootProperty:"children",folderSort:false,constructor:function(c){var d=this,b,a;c=Ext.apply({},c);a=c.fields||d.fields;if(!a){c.fields=[{name:"text",type:"string"}]}d.callParent([c]);d.tree=Ext.create("Ext.data.Tree");d.relayEvents(d.tree,["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","rootchange"]);d.tree.on({scope:d,remove:d.onNodeRemove,beforeexpand:d.onBeforeNodeExpand,beforecollapse:d.onBeforeNodeCollapse,append:d.onNodeAdded,insert:d.onNodeAdded});d.onBeforeSort();b=d.root;if(b){delete d.root;d.setRootNode(b)}d.addEvents("sort");if(Ext.isDefined(d.nodeParameter)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.data.TreeStore: nodeParameter has been deprecated. Please use nodeParam instead.")}d.nodeParam=d.nodeParameter;delete d.nodeParameter}},setProxy:function(c){var a,b;if(c instanceof Ext.data.proxy.Proxy){b=Ext.isEmpty(c.getReader().root)}else{if(Ext.isString(c)){b=true}else{a=c.reader;b=!(a&&!Ext.isEmpty(a.root))}}c=this.callParent(arguments);if(b){a=c.getReader();a.root=this.defaultRootProperty;a.buildExtractors(true)}},onBeforeSort:function(){if(this.folderSort){this.sort({property:"leaf",direction:"ASC"},"prepend",false)}},onBeforeNodeExpand:function(b,c,a){if(b.isLoaded()){Ext.callback(c,a||b,[b.childNodes])}else{if(b.isLoading()){this.on("load",function(){Ext.callback(c,a||b,[b.childNodes])},this,{single:true})}else{this.read({node:b,callback:function(){Ext.callback(c,a||b,[b.childNodes])}})}}},getNewRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterNew)},getUpdatedRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterUpdated)},onBeforeNodeCollapse:function(b,c,a){c.call(a||b,b.childNodes)},onNodeRemove:function(a,b){var c=this.removed;if(!b.isReplace&&Ext.Array.indexOf(c,b)==-1){c.push(b)}},onNodeAdded:function(d,e){var c=this.getProxy(),a=c.getReader(),g=e.raw||e.data,h,b;Ext.Array.remove(this.removed,e);if(!e.isLeaf()&&!e.isLoaded()){h=a.getRoot(g);if(h){this.fillNode(e,a.extractData(h));delete g[a.root]}}},setRootNode:function(a){var b=this;a=a||{};if(!a.isNode){Ext.applyIf(a,{id:b.defaultRootId,text:"Root",allowDrag:false});a=Ext.ModelManager.create(a,b.model)}Ext.data.NodeInterface.decorate(a);b.getProxy().getReader().buildExtractors(true);b.tree.setRootNode(a);if(!a.isLoaded()&&(b.autoLoad===true||a.isExpanded())){b.load({node:a})}return a},getRootNode:function(){return this.tree.getRootNode()},getNodeById:function(a){return this.tree.getNodeById(a)},load:function(b){b=b||{};b.params=b.params||{};var d=this,c=b.node||d.tree.getRootNode(),a;if(!c){c=d.setRootNode({expanded:true})}if(d.clearOnLoad){c.removeAll(true)}Ext.applyIf(b,{node:c});b.params[d.nodeParam]=c?c.getId():"root";if(c){c.set("loading",true)}return d.callParent([b])},fillNode:function(g,b){var e=this,d=b?b.length:0,c=0,a;if(d&&e.sortOnLoad&&!e.remoteSort&&e.sorters&&e.sorters.items){a=Ext.create("Ext.util.MixedCollection");a.addAll(b);a.sort(e.sorters.items);b=a.items}g.set("loaded",true);for(;c<d;c++){g.appendChild(b[c],undefined,true)}return b},onProxyLoad:function(b){var d=this,e=b.wasSuccessful(),a=b.getRecords(),c=b.node;d.loading=false;c.set("loading",false);if(e){a=d.fillNode(c,a)}d.fireEvent("read",d,b.node,a,e);d.fireEvent("load",d,b.node,a,e);Ext.callback(b.callback,b.scope||d,[a,b,e])},onCreateRecords:function(c,d,m){if(m){var e=0,a=c.length,k=d.records,h,g,b,j;for(;e<a;++e){g=c[e];b=k[e];if(b){h=b.parentNode;if(h){b.isReplace=true;h.replaceChild(g,b);delete b.isReplace}g.phantom=false}}}},onUpdateRecords:function(c,d,m){if(m){var k=this,g=0,a=c.length,e=k.data,b,j,h;for(;g<a;++g){h=c[g];b=k.tree.getNodeById(h.getId());j=b.parentNode;if(j){b.isReplace=true;j.replaceChild(h,b);b.isReplace=false}}}},onDestroyRecords:function(b,a,c){if(c){this.removed=[]}},removeAll:function(){this.getRootNode().destroy(true);this.fireEvent("clear",this)},doSort:function(a){var b=this;if(b.remoteSort){b.load()}else{b.tree.sort(a,true);b.fireEvent("datachanged",b)}b.fireEvent("sort",b)}});Ext.define("Ext.data.UuidGenerator",function(){var h=Math.pow(2,14),g=Math.pow(2,16),e=Math.pow(2,28),c=Math.pow(2,32);function a(m,k){var j=m.toString(16);if(j.length>k){j=j.substring(j.length-k)}else{if(j.length<k){j=Ext.String.leftPad(j,k,"0")}}return j}function d(m,k){var j=Math.random()*(k-m+1);return Math.floor(j)+m}function b(k){if(typeof(k)=="number"){var j=Math.floor(k/c);return{lo:Math.floor(k-j*c),hi:j}}return k}return{extend:"Ext.data.IdGenerator",alias:"idgen.uuid",id:"uuid",version:4,constructor:function(){var j=this;j.callParent(arguments);j.parts=[];j.init()},generate:function(){var k=this,m=k.parts,j=k.timestamp;m[0]=a(j.lo,8);m[1]=a(j.hi&65535,4);m[2]=a(((j.hi>>>16)&4095)|(k.version<<12),4);m[3]=a(128|((k.clockSeq>>>8)&63),2)+a(k.clockSeq&255,2);m[4]=a(k.salt.hi,4)+a(k.salt.lo,8);if(k.version==4){k.init()}else{++j.lo;if(j.lo>=c){j.lo=0;++j.hi}}return m.join("-").toLowerCase()},getRecId:function(j){return j.getId()},init:function(){var k=this,j,m;if(k.version==4){k.clockSeq=d(0,h-1);j=k.salt||(k.salt={});m=k.timestamp||(k.timestamp={});j.lo=d(0,c-1);j.hi=d(0,g-1);m.lo=d(0,c-1);m.hi=d(0,e-1)}else{k.salt=b(k.salt);k.timestamp=b(k.timestamp);k.salt.hi|=256}},reconfigure:function(j){Ext.apply(this,j);this.init()}}}());Ext.define("Ext.data.XmlStore",{extend:"Ext.data.Store",alternateClassName:"Ext.data.XmlStore",alias:"store.xml",constructor:function(a){a=a||{};a=a||{};Ext.applyIf(a,{proxy:{type:"ajax",reader:"xml",writer:"xml"}});this.callParent([a])}});Ext.define("Ext.data.proxy.Client",{extend:"Ext.data.proxy.Proxy",alternateClassName:"Ext.data.ClientProxy",clear:function(){}});Ext.define("Ext.data.proxy.JsonP",{extend:"Ext.data.proxy.Server",alternateClassName:"Ext.data.ScriptTagProxy",alias:["proxy.jsonp","proxy.scripttag"],requires:["Ext.data.JsonP"],defaultWriterType:"base",callbackKey:"callback",recordParam:"records",autoAppendParams:true,constructor:function(){this.addEvents("exception");this.callParent(arguments)},doRequest:function(a,h,b){var d=this,e=d.getWriter(),c=d.buildRequest(a),g=c.params;if(a.allowWrite()){c=e.write(c)}Ext.apply(c,{callbackKey:d.callbackKey,timeout:d.timeout,scope:d,disableCaching:false,callback:d.createRequestCallback(c,a,h,b)});if(d.autoAppendParams){c.params={}}c.jsonp=Ext.data.JsonP.request(c);c.params=g;a.setStarted();d.lastRequest=c;return c},createRequestCallback:function(d,a,e,b){var c=this;return function(j,g,h){delete c.lastRequest;c.processResponse(j,a,d,g,e,b)}},setException:function(b,a){b.setException(b.request.jsonp.errorType)},buildUrl:function(h){var g=this,b=g.callParent(arguments),j=Ext.apply({},h.params),e=j.filters,a,d,c;delete j.filters;if(g.autoAppendParams){b=Ext.urlAppend(b,Ext.Object.toQueryString(j))}if(e&&e.length){for(c=0;c<e.length;c++){d=e[c];if(d.value){b=Ext.urlAppend(b,d.property+"="+d.value)}}}a=h.records;if(Ext.isArray(a)&&a.length>0){b=Ext.urlAppend(b,Ext.String.format("{0}={1}",g.recordParam,g.encodeRecords(a)))}return b},destroy:function(){this.abort();this.callParent()},abort:function(){var a=this.lastRequest;if(a){Ext.data.JsonP.abort(a.jsonp)}},encodeRecords:function(b){var d="",c=0,a=b.length;for(;c<a;c++){d+=Ext.Object.toQueryString(b[c].data)}return d}});Ext.define("Ext.data.proxy.WebStorage",{extend:"Ext.data.proxy.Client",alternateClassName:"Ext.data.WebStorageProxy",id:undefined,constructor:function(a){this.callParent(arguments);this.cache={};this.id=this.id||(this.store?this.store.storeId:undefined);this.initialize()},create:function(e,j,k){var d=e.records,c=d.length,a=this.getIds(),b,h,g;e.setStarted();for(g=0;g<c;g++){h=d[g];if(h.phantom){h.phantom=false;b=this.getNextId()}else{b=h.getId()}this.setRecord(h,b);a.push(b)}this.setIds(a);e.setCompleted();e.setSuccessful();if(typeof j=="function"){j.call(k||this,e)}},read:function(e,j,k){var d=[],a=this.getIds(),c=a.length,g,b,h;if(e.id){h=this.getRecord(e.id);if(h){d.push(h);e.setSuccessful()}}else{for(g=0;g<c;g++){d.push(this.getRecord(a[g]))}e.setSuccessful()}e.setCompleted();e.resultSet=Ext.create("Ext.data.ResultSet",{records:d,total:d.length,loaded:true});if(typeof j=="function"){j.call(k||this,e)}},update:function(e,j,k){var d=e.records,c=d.length,a=this.getIds(),h,b,g;e.setStarted();for(g=0;g<c;g++){h=d[g];this.setRecord(h);b=h.getId();if(b!==undefined&&Ext.Array.indexOf(a,b)==-1){a.push(b)}}this.setIds(a);e.setCompleted();e.setSuccessful();if(typeof j=="function"){j.call(k||this,e)}},destroy:function(b,j,e){var a=b.records,g=a.length,d=this.getIds(),h=[].concat(d),c;for(c=0;c<g;c++){Ext.Array.remove(h,a[c].getId());this.removeRecord(a[c],false)}this.setIds(h);b.setCompleted();b.setSuccessful();if(typeof j=="function"){j.call(e||this,b)}},getRecord:function(c){if(this.cache[c]===undefined){var a=Ext.decode(this.getStorageObject().getItem(this.getRecordKey(c))),g={},e=this.model,k=e.prototype.fields.items,d=k.length,h,m,b,j;for(h=0;h<d;h++){m=k[h];b=m.name;if(typeof m.decode=="function"){g[b]=m.decode(a[b])}else{g[b]=a[b]}}j=new e(g,c);j.phantom=false;this.cache[c]=j}return this.cache[c]},setRecord:function(k,c){if(c){k.setId(c)}else{c=k.getId()}var n=this,a=k.data,h={},j=n.model,m=j.prototype.fields.items,d=m.length,g=0,p,b,e,q;for(;g<d;g++){p=m[g];b=p.name;if(typeof p.encode=="function"){h[b]=p.encode(a[b],k)}else{h[b]=a[b]}}e=n.getStorageObject();q=n.getRecordKey(c);n.cache[c]=k;e.removeItem(q);e.setItem(q,Ext.encode(h))},removeRecord:function(d,c){var b=this,a;if(d.isModel){d=d.getId()}if(c!==false){a=b.getIds();Ext.Array.remove(a,d);b.setIds(a)}b.getStorageObject().removeItem(b.getRecordKey(d))},getRecordKey:function(a){if(a.isModel){a=a.getId()}return Ext.String.format("{0}-{1}",this.id,a)},getRecordCounterKey:function(){return Ext.String.format("{0}-counter",this.id)},getIds:function(){var b=(this.getStorageObject().getItem(this.id)||"").split(","),c=b.length,a;if(c==1&&b[0]===""){b=[]}else{for(a=0;a<c;a++){b[a]=parseInt(b[a],10)}}return b},setIds:function(a){var b=this.getStorageObject(),c=a.join(",");b.removeItem(this.id);if(!Ext.isEmpty(c)){b.setItem(this.id,c)}},getNextId:function(){var d=this.getStorageObject(),a=this.getRecordCounterKey(),c=d.getItem(a),b,e;if(c===null){b=this.getIds();c=b[b.length-1]||0}e=parseInt(c,10)+1;d.setItem(a,e);return e},initialize:function(){var a=this.getStorageObject();a.setItem(this.id,a.getItem(this.id)||"")},clear:function(){var d=this.getStorageObject(),c=this.getIds(),a=c.length,b;for(b=0;b<a;b++){this.removeRecord(c[b])}d.removeItem(this.getRecordCounterKey());d.removeItem(this.id)},getStorageObject:function(){}});Ext.define("Ext.data.proxy.LocalStorage",{extend:"Ext.data.proxy.WebStorage",alias:"proxy.localstorage",alternateClassName:"Ext.data.LocalStorageProxy",getStorageObject:function(){return window.localStorage}});Ext.define("Ext.data.proxy.Memory",{extend:"Ext.data.proxy.Client",alias:"proxy.memory",alternateClassName:"Ext.data.MemoryProxy",constructor:function(a){this.callParent([a]);this.setReader(this.reader)},read:function(c,g,d){var e=this,b=e.getReader(),a=b.read(e.data);Ext.apply(c,{resultSet:a});c.setCompleted();c.setSuccessful();Ext.callback(g,d||e,[c])},clear:Ext.emptyFn});Ext.define("Ext.data.proxy.Rest",{extend:"Ext.data.proxy.Ajax",alternateClassName:"Ext.data.RestProxy",alias:"proxy.rest",appendId:true,batchActions:false,buildUrl:function(g){var e=this,c=g.operation,b=c.records||[],a=b[0],h=e.format,d=e.getUrl(g),j=a?a.getId():c.id;if(e.appendId&&j){if(!d.match(/\/$/)){d+="/"}d+=j}if(h){if(!d.match(/\.$/)){d+="."}d+=h}g.url=d;return e.callParent(arguments)}},function(){Ext.apply(this.prototype,{actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"}})});Ext.define("Ext.data.proxy.SessionStorage",{extend:"Ext.data.proxy.WebStorage",alias:"proxy.sessionstorage",alternateClassName:"Ext.data.SessionStorageProxy",getStorageObject:function(){return window.sessionStorage}});Ext.define("Ext.data.reader.Array",{extend:"Ext.data.reader.Json",alternateClassName:"Ext.data.ArrayReader",alias:"reader.array",buildExtractors:function(){this.callParent(arguments);var a=this.model.prototype.fields.items,b=0,c=a.length,e=[],d;for(;b<c;b++){d=a[b].mapping;e.push(function(g){return function(h){return h[g]}}(d!==null?d:b))}this.extractorFunctions=e}});Ext.define("Ext.data.reader.Xml",{extend:"Ext.data.reader.Reader",alternateClassName:"Ext.data.XmlReader",alias:"reader.xml",createAccessor:function(b){var a=this;if(Ext.isEmpty(b)){return Ext.emptyFn}if(Ext.isFunction(b)){return b}return function(c){return a.getNodeValue(Ext.DomQuery.selectNode(b,c))}},getNodeValue:function(a){if(a&&a.firstChild){return a.firstChild.nodeValue}return undefined},getResponseData:function(a){var b=a.responseXML;return b},getData:function(a){return a.documentElement||a},getRoot:function(b){var c=b.nodeName,a=this.root;if(!a||(c&&c==a)){return b}else{if(Ext.DomQuery.isXml(b)){return Ext.DomQuery.selectNode(a,b)}}},extractData:function(a){var b=this.record;if(b!=a.nodeName){a=Ext.DomQuery.select(b,a)}else{a=[a]}return this.callParent([a])},getAssociatedDataRoot:function(b,a){return Ext.DomQuery.select(a,b)[0]},readRecords:function(a){if(Ext.isArray(a)){a=a[0]}this.xmlData=a;return this.callParent([a])}});Ext.define("Ext.data.writer.Xml",{extend:"Ext.data.writer.Writer",alternateClassName:"Ext.data.XmlWriter",alias:"writer.xml",documentRoot:"xmlData",defaultDocumentRoot:"xmlData",header:"",record:"record",writeRecords:function(a,b){var h=this,d=[],c=0,g=b.length,j=h.documentRoot,e=h.record,n=b.length!==1,m,k;d.push(h.header||"");if(!j&&n){j=h.defaultDocumentRoot}if(j){d.push("<",j,">")}for(;c<g;++c){m=b[c];d.push("<",e,">");for(k in m){if(m.hasOwnProperty(k)){d.push("<",k,">",m[k],"</",k,">")}}d.push("</",e,">")}if(j){d.push("</",j,">")}a.xmlData=d.join("");return a}});Ext.define("Ext.direct.Event",{alias:"direct.event",requires:["Ext.direct.Manager"],status:true,constructor:function(a){Ext.apply(this,a)},getData:function(){return this.data}});Ext.define("Ext.direct.RemotingEvent",{extend:"Ext.direct.Event",alias:"direct.rpc",getTransaction:function(){return this.transaction||Ext.direct.Manager.getTransaction(this.tid)}});Ext.define("Ext.direct.ExceptionEvent",{extend:"Ext.direct.RemotingEvent",alias:"direct.exception",status:false});Ext.define("Ext.direct.Provider",{alias:"direct.provider",mixins:{observable:"Ext.util.Observable"},constructor:function(a){var b=this;Ext.apply(b,a);b.addEvents("connect","disconnect","data","exception");b.mixins.observable.constructor.call(b,a)},isConnected:function(){return false},connect:Ext.emptyFn,disconnect:Ext.emptyFn});Ext.define("Ext.direct.JsonProvider",{extend:"Ext.direct.Provider",alias:"direct.jsonprovider",uses:["Ext.direct.ExceptionEvent"],parseResponse:function(a){if(!Ext.isEmpty(a.responseText)){if(Ext.isObject(a.responseText)){return a.responseText}return Ext.decode(a.responseText)}return null},createEvents:function(b){var h=null,d=[],g,c=0,a;try{h=this.parseResponse(b)}catch(j){g=Ext.create("Ext.direct.ExceptionEvent",{data:j,xhr:b,code:Ext.direct.Manager.self.exceptions.PARSE,message:"Error parsing json response: \n\n "+h});return[g]}if(Ext.isArray(h)){for(a=h.length;c<a;++c){d.push(this.createEvent(h[c]))}}else{d.push(this.createEvent(h))}return d},createEvent:function(a){return Ext.create("direct."+a.type,a)}});Ext.define("Ext.direct.PollingProvider",{extend:"Ext.direct.JsonProvider",alias:"direct.pollingprovider",uses:["Ext.direct.ExceptionEvent"],requires:["Ext.Ajax","Ext.util.DelayedTask"],interval:3000,constructor:function(a){this.callParent(arguments);this.addEvents("beforepoll","poll")},isConnected:function(){return !!this.pollTask},connect:function(){var b=this,a=b.url;if(a&&!b.pollTask){b.pollTask=Ext.TaskManager.start({run:function(){if(b.fireEvent("beforepoll",b)!==false){if(Ext.isFunction(a)){a(b.baseParams)}else{Ext.Ajax.request({url:a,callback:b.onData,scope:b,params:b.baseParams})}}},interval:b.interval,scope:b});b.fireEvent("connect",b)}else{if(!a){}}},disconnect:function(){var a=this;if(a.pollTask){Ext.TaskManager.stop(a.pollTask);delete a.pollTask;a.fireEvent("disconnect",a)}},onData:function(e,h,b){var g=this,d=0,a,c;if(h){c=g.createEvents(b);for(a=c.length;d<a;++d){g.fireEvent("data",g,c[d])}}else{g.fireEvent("data",g,Ext.create("Ext.direct.ExceptionEvent",{data:null,code:Ext.direct.Manager.self.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:b}))}}});Ext.define("Ext.direct.RemotingMethod",{constructor:function(b){var c=this,d=Ext.isDefined(b.params)?b.params:b.len,a;c.name=b.name;c.formHandler=b.formHandler;if(Ext.isNumber(d)){c.len=d;c.ordered=true}else{c.params=[];Ext.each(d,function(e){a=Ext.isObject(e)?e.name:e;c.params.push(a)})}},getCallData:function(c){var e=this,g=null,a=e.len,h=e.params,j,d,b;if(e.ordered){j=c[a];d=c[a+1];if(a!==0){g=c.slice(0,a)}}else{g=Ext.apply({},c[0]);j=c[1];d=c[2];for(b in g){if(g.hasOwnProperty(b)){if(!Ext.Array.contains(h,b)){delete g[b]}}}}return{data:g,callback:j,scope:d}}});Ext.define("Ext.direct.Transaction",{alias:"direct.transaction",alternateClassName:"Ext.Direct.Transaction",statics:{TRANSACTION_ID:0},constructor:function(a){var b=this;Ext.apply(b,a);b.id=++b.self.TRANSACTION_ID;b.retryCount=0},send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++;this.send()},getProvider:function(){return this.provider}});Ext.define("Ext.direct.RemotingProvider",{alias:"direct.remotingprovider",extend:"Ext.direct.JsonProvider",requires:["Ext.util.MixedCollection","Ext.util.DelayedTask","Ext.direct.Transaction","Ext.direct.RemotingMethod"],enableBuffer:10,maxRetries:1,timeout:undefined,constructor:function(a){var b=this;b.callParent(arguments);b.addEvents("beforecall","call");b.namespace=(Ext.isString(b.namespace))?Ext.ns(b.namespace):b.namespace||window;b.transactions=Ext.create("Ext.util.MixedCollection");b.callBuffer=[]},initAPI:function(){var h=this.actions,e=this.namespace,g,b,c,d,a,j;for(g in h){b=e[g];if(!b){b=e[g]={}}c=h[g];for(d=0,a=c.length;d<a;++d){j=Ext.create("Ext.direct.RemotingMethod",c[d]);b[j.name]=this.createHandler(g,j)}}},createHandler:function(c,d){var b=this,a;if(!d.formHandler){a=function(){b.configureRequest(c,d,Array.prototype.slice.call(arguments,0))}}else{a=function(g,h,e){b.configureFormRequest(c,d,g,h,e)}}a.directCfg={action:c,method:d};return a},isConnected:function(){return !!this.connected},connect:function(){var a=this;if(a.url){a.initAPI();a.connected=true;a.fireEvent("connect",a)}else{if(!a.url){}}},disconnect:function(){var a=this;if(a.connected){a.connected=false;a.fireEvent("disconnect",a)}},runCallback:function(d,b){var c=b.status?"success":"failure",e,a;if(d&&d.callback){e=d.callback;a=Ext.isDefined(b.result)?b.result:b.data;if(Ext.isFunction(e)){e(a,b)}else{Ext.callback(e[c],e.scope,[a,b]);Ext.callback(e.callback,e.scope,[a,b])}}},onData:function(m,j,c){var g=this,d=0,e,k,a,b,h;if(j){k=g.createEvents(c);for(e=k.length;d<e;++d){a=k[d];b=g.getTransaction(a);g.fireEvent("data",g,a);if(b){g.runCallback(b,a,true);Ext.direct.Manager.removeTransaction(b)}}}else{h=[].concat(m.transaction);for(e=h.length;d<e;++d){b=g.getTransaction(h[d]);if(b&&b.retryCount<g.maxRetries){b.retry()}else{a=Ext.create("Ext.direct.ExceptionEvent",{data:null,transaction:b,code:Ext.direct.Manager.self.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:c});g.fireEvent("data",g,a);if(b){g.runCallback(b,a,false);Ext.direct.Manager.removeTransaction(b)}}}}},getTransaction:function(a){return a&&a.tid?Ext.direct.Manager.getTransaction(a.tid):null},configureRequest:function(d,a,g){var h=this,c=a.getCallData(g),e=c.data,j=c.callback,k=c.scope,b;b=Ext.create("Ext.direct.Transaction",{provider:h,args:g,action:d,method:a.name,data:e,callback:k&&Ext.isFunction(j)?Ext.Function.bind(j,k):j});if(h.fireEvent("beforecall",h,b,a)!==false){Ext.direct.Manager.addTransaction(b);h.queueTransaction(b);h.fireEvent("call",h,b,a)}},getCallData:function(a){return{action:a.action,method:a.method,data:a.data,type:"rpc",tid:a.id}},sendRequest:function(h){var g=this,e={url:g.url,callback:g.onData,scope:g,transaction:h,timeout:g.timeout},b,d=g.enableUrlEncode,c=0,a,j;if(Ext.isArray(h)){b=[];for(a=h.length;c<a;++c){b.push(g.getCallData(h[c]))}}else{b=g.getCallData(h)}if(d){j={};j[Ext.isString(d)?d:"data"]=Ext.encode(b);e.params=j}else{e.jsonData=b}Ext.Ajax.request(e)},queueTransaction:function(c){var b=this,a=b.enableBuffer;if(c.form){b.sendFormRequest(c);return}b.callBuffer.push(c);if(a){if(!b.callTask){b.callTask=Ext.create("Ext.util.DelayedTask",b.combineAndSend,b)}b.callTask.delay(Ext.isNumber(a)?a:10)}else{b.combineAndSend()}},combineAndSend:function(){var b=this.callBuffer,a=b.length;if(a>0){this.sendRequest(a==1?b[0]:b);this.callBuffer=[]}},configureFormRequest:function(e,a,b,j,k){var h=this,c=Ext.create("Ext.direct.Transaction",{provider:h,action:e,method:a.name,args:[b,j,k],callback:k&&Ext.isFunction(j)?Ext.Function.bind(j,k):j,isForm:true}),g,d;if(h.fireEvent("beforecall",h,c,a)!==false){Ext.direct.Manager.addTransaction(c);g=String(b.getAttribute("enctype")).toLowerCase()=="multipart/form-data";d={extTID:c.id,extAction:e,extMethod:a.name,extType:"rpc",extUpload:String(g)};Ext.apply(c,{form:Ext.getDom(b),isUpload:g,params:j&&Ext.isObject(j.params)?Ext.apply(d,j.params):d});h.fireEvent("call",h,c,a);h.sendFormRequest(c)}},sendFormRequest:function(a){Ext.Ajax.request({url:this.url,params:a.params,callback:this.onData,scope:this,form:a.form,isUpload:a.isUpload,transaction:a})}});Ext.define("Ext.draw.Matrix",{requires:["Ext.draw.Draw"],constructor:function(h,g,n,m,k,j){if(h!=null){this.matrix=[[h,n,k],[g,m,j],[0,0,1]]}else{this.matrix=[[1,0,0],[0,1,0],[0,0,1]]}},add:function(w,t,p,m,j,h){var q=this,g=[[],[],[]],v=[[w,p,j],[t,m,h],[0,0,1]],u,r,n,k;for(u=0;u<3;u++){for(r=0;r<3;r++){k=0;for(n=0;n<3;n++){k+=q.matrix[u][n]*v[n][r]}g[u][r]=k}}q.matrix=g},prepend:function(w,t,p,m,j,h){var q=this,g=[[],[],[]],v=[[w,p,j],[t,m,h],[0,0,1]],u,r,n,k;for(u=0;u<3;u++){for(r=0;r<3;r++){k=0;for(n=0;n<3;n++){k+=v[u][n]*q.matrix[n][r]}g[u][r]=k}}q.matrix=g},invert:function(){var k=this.matrix,j=k[0][0],h=k[1][0],q=k[0][1],p=k[1][1],n=k[0][2],m=k[1][2],g=j*p-h*q;return new Ext.draw.Matrix(p/g,-h/g,-q/g,j/g,(q*m-p*n)/g,(h*n-j*m)/g)},clone:function(){var j=this.matrix,h=j[0][0],g=j[1][0],p=j[0][1],n=j[1][1],m=j[0][2],k=j[1][2];return new Ext.draw.Matrix(h,g,p,n,m,k)},translate:function(a,b){this.prepend(1,0,0,1,a,b)},scale:function(b,e,a,d){var c=this;if(e==null){e=b}c.add(1,0,0,1,a,d);c.add(b,0,0,e,0,0);c.add(1,0,0,1,-a,-d)},rotate:function(c,b,h){c=Ext.draw.Draw.rad(c);var e=this,g=+Math.cos(c).toFixed(9),d=+Math.sin(c).toFixed(9);e.add(g,d,-d,g,b,h);e.add(1,0,0,1,-b,-h)},x:function(a,c){var b=this.matrix;return a*b[0][0]+c*b[0][1]+b[0][2]},y:function(a,c){var b=this.matrix;return a*b[1][0]+c*b[1][1]+b[1][2]},get:function(b,a){return +this.matrix[b][a].toFixed(4)},toString:function(){var a=this;return[a.get(0,0),a.get(0,1),a.get(1,0),a.get(1,1),0,0].join()},toSvg:function(){var a=this;return"matrix("+[a.get(0,0),a.get(1,0),a.get(0,1),a.get(1,1),a.get(0,2),a.get(1,2)].join()+")"},toFilter:function(){var a=this;return"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',FilterType=bilinear,M11="+a.get(0,0)+", M12="+a.get(0,1)+", M21="+a.get(1,0)+", M22="+a.get(1,1)+", Dx="+a.get(0,2)+", Dy="+a.get(1,2)+")"},offset:function(){var a=this.matrix;return[(a[0][2]||0).toFixed(4),(a[1][2]||0).toFixed(4)]},split:function(){function d(g){return g[0]*g[0]+g[1]*g[1]}function b(g){var h=Math.sqrt(d(g));g[0]/=h;g[1]/=h}var a=this.matrix,c={translateX:a[0][2],translateY:a[1][2]},e;e=[[a[0][0],a[0][1]],[a[1][0],a[1][1]]];c.scaleX=Math.sqrt(d(e[0]));b(e[0]);c.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1];e[1]=[e[1][0]-e[0][0]*c.shear,e[1][1]-e[0][1]*c.shear];c.scaleY=Math.sqrt(d(e[1]));b(e[1]);c.shear/=c.scaleY;c.rotate=Math.asin(-e[0][1]);c.isSimple=!+c.shear.toFixed(9)&&(c.scaleX.toFixed(9)==c.scaleY.toFixed(9)||!c.rotate);return c}});Ext.define("Ext.draw.SpriteDD",{extend:"Ext.dd.DragSource",constructor:function(b,a){var d=this,c=b.el;d.sprite=b;d.el=c;d.dragData={el:c,sprite:b};d.callParent([c,a]);d.sprite.setStyle("cursor","move")},showFrame:Ext.emptyFn,createFrame:Ext.emptyFn,getDragEl:function(a){return this.el},getRegion:function(){var k=this,g=k.el,n,d,c,q,p,w,a,m,h,v,u;u=k.sprite;v=u.getBBox();try{n=Ext.Element.getXY(g)}catch(j){}if(!n){return null}d=n[0];c=d+v.width;q=n[1];p=q+v.height;return Ext.create("Ext.util.Region",q,c,p,d)},startDrag:function(b,d){var c=this,a=c.sprite.attr;c.prev=c.sprite.surface.transformToViewBox(b,d)},onDrag:function(j){var h=j.getXY(),g=this,d=g.sprite,a=d.attr,c,b;h=g.sprite.surface.transformToViewBox(h[0],h[1]);c=h[0]-g.prev[0];b=h[1]-g.prev[1];d.setAttributes({translate:{x:a.translation.x+c,y:a.translation.y+b}},true);g.prev=h},setDragElPos:function(){return false}});Ext.define("Ext.draw.Sprite",{mixins:{observable:"Ext.util.Observable",animate:"Ext.util.Animate"},requires:["Ext.draw.SpriteDD"],dirty:false,dirtyHidden:false,dirtyTransform:false,dirtyPath:true,dirtyFont:true,zIndexDirty:true,isSprite:true,zIndex:0,fontProperties:["font","font-size","font-weight","font-style","font-family","text-anchor","text"],pathProperties:["x","y","d","path","height","width","radius","r","rx","ry","cx","cy"],constructor:function(a){var b=this;a=a||{};b.id=Ext.id(null,"ext-sprite-");b.transformations=[];Ext.copyTo(this,a,"surface,group,type,draggable");b.bbox={};b.attr={zIndex:0,translation:{x:null,y:null},rotation:{degrees:null,x:null,y:null},scaling:{x:null,y:null,cx:null,cy:null}};delete a.surface;delete a.group;delete a.type;delete a.draggable;b.setAttributes(a);b.addEvents("beforedestroy","destroy","render","mousedown","mouseup","mouseover","mouseout","mousemove","click");b.mixins.observable.constructor.apply(this,arguments)},initDraggable:function(){var a=this;a.draggable=true;if(!a.el){a.surface.createSpriteElement(a)}a.dd=Ext.create("Ext.draw.SpriteDD",a,Ext.isBoolean(a.draggable)?null:a.draggable);a.on("beforedestroy",a.dd.destroy,a.dd)},setAttributes:function(k,p){var v=this,j=v.fontProperties,t=j.length,g=v.pathProperties,e=g.length,u=!!v.surface,a=u&&v.surface.customAttributes||{},b=v.attr,m,q,h,c,r,n,w,d;k=Ext.apply({},k);for(m in a){if(k.hasOwnProperty(m)&&typeof a[m]=="function"){Ext.apply(k,a[m].apply(v,[].concat(k[m])))}}if(!!k.hidden!==!!b.hidden){v.dirtyHidden=true}for(q=0;q<e;q++){m=g[q];if(m in k&&k[m]!==b[m]){v.dirtyPath=true;break}}if("zIndex" in k){v.zIndexDirty=true}for(q=0;q<t;q++){m=j[q];if(m in k&&k[m]!==b[m]){v.dirtyFont=true;break}}h=k.translate;c=b.translation;if(h){if((h.x&&h.x!==c.x)||(h.y&&h.y!==c.y)){Ext.apply(c,h);v.dirtyTransform=true}delete k.translate}r=k.rotate;n=b.rotation;if(r){if((r.x&&r.x!==n.x)||(r.y&&r.y!==n.y)||(r.degrees&&r.degrees!==n.degrees)){Ext.apply(n,r);v.dirtyTransform=true}delete k.rotate}w=k.scale;d=b.scaling;if(w){if((w.x&&w.x!==d.x)||(w.y&&w.y!==d.y)||(w.cx&&w.cx!==d.cx)||(w.cy&&w.cy!==d.cy)){Ext.apply(d,w);v.dirtyTransform=true}delete k.scale}Ext.apply(b,k);v.dirty=true;if(p===true&&u){v.redraw()}return this},getBBox:function(){return this.surface.getBBox(this)},setText:function(a){return this.surface.setText(this,a)},hide:function(a){this.setAttributes({hidden:true},a);return this},show:function(a){this.setAttributes({hidden:false},a);return this},remove:function(){if(this.surface){this.surface.remove(this);return true}return false},onRemove:function(){this.surface.onRemove(this)},destroy:function(){var a=this;if(a.fireEvent("beforedestroy",a)!==false){a.remove();a.surface.onDestroy(a);a.clearListeners();a.fireEvent("destroy")}},redraw:function(){this.surface.renderItem(this);return this},setStyle:function(){this.el.setStyle.apply(this.el,arguments);return this},addCls:function(a){this.surface.addCls(this,a);return this},removeCls:function(a){this.surface.removeCls(this,a);return this}});Ext.define("Ext.draw.engine.Svg",{extend:"Ext.draw.Surface",requires:["Ext.draw.Draw","Ext.draw.Sprite","Ext.draw.Matrix","Ext.Element"],engine:"Svg",trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,xlink:"http://www.w3.org/1999/xlink",translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",path:"d",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},parsers:{},minDefaults:{circle:{cx:0,cy:0,r:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start","font-family":null,"font-size":null,"font-weight":null,"font-style":null,fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},createSvgElement:function(d,a){var c=this.domRef.createElementNS("http://www.w3.org/2000/svg",d),b;if(a){for(b in a){c.setAttribute(b,String(a[b]))}}return c},createSpriteElement:function(a){var b=this.createSvgElement(a.type);b.id=a.id;if(b.style){b.style.webkitTapHighlightColor="rgba(0,0,0,0)"}a.el=Ext.get(b);this.applyZIndex(a);a.matrix=Ext.create("Ext.draw.Matrix");a.bbox={plain:0,transform:0};a.fireEvent("render",a);return b},getBBox:function(a,b){var c=this["getPath"+a.type](a);if(b){a.bbox.plain=a.bbox.plain||Ext.draw.Draw.pathDimensions(c);return a.bbox.plain}a.bbox.transform=a.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(c,a.matrix));return a.bbox.transform},getBBoxText:function(j){var k={},g,m,a,c,h,b;if(j&&j.el){b=j.el.dom;try{k=b.getBBox();return k}catch(d){}k={x:k.x,y:Infinity,width:0,height:0};h=b.getNumberOfChars();for(c=0;c<h;c++){g=b.getExtentOfChar(c);k.y=Math.min(g.y,k.y);m=g.y+g.height-k.y;k.height=Math.max(k.height,m);a=g.x+g.width-k.x;k.width=Math.max(k.width,a)}return k}},hide:function(){Ext.get(this.el).hide()},show:function(){Ext.get(this.el).show()},hidePrim:function(a){this.addCls(a,Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(a){this.removeCls(a,Ext.baseCSSPrefix+"hide-visibility")},getDefs:function(){return this._defs||(this._defs=this.createSvgElement("defs"))},transform:function(d){var h=this,a=Ext.create("Ext.draw.Matrix"),g=d.transformations,j=g.length,c=0,b,e;for(;c<j;c++){b=g[c];e=b.type;if(e=="translate"){a.translate(b.x,b.y)}else{if(e=="rotate"){a.rotate(b.degrees,b.x,b.y)}else{if(e=="scale"){a.scale(b.x,b.y,b.centerX,b.centerY)}}}}d.matrix=a;d.el.set({transform:a.toSvg()})},setSize:function(a,c){var d=this,b=d.el;a=+a||d.width;c=+c||d.height;d.width=a;d.height=c;b.setSize(a,c);b.set({width:a,height:c});d.callParent([a,c])},getRegion:function(){var e=this.el.getXY(),c=this.bgRect.getXY(),b=Math.max,a=b(e[0],c[0]),d=b(e[1],c[1]);return{left:a,top:d,right:a+this.width,bottom:d+this.height}},onRemove:function(a){if(a.el){a.el.remove();delete a.el}this.callParent(arguments)},setViewBox:function(b,d,c,a){if(isFinite(b)&&isFinite(d)&&isFinite(c)&&isFinite(a)){this.callParent(arguments);this.el.dom.setAttribute("viewBox",[b,d,c,a].join(" "))}},render:function(c){var g=this;if(!g.el){var e=g.width||10,b=g.height||10,d=g.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:e,height:b}),a=g.getDefs(),h=g.createSvgElement("rect",{width:"100%",height:"100%",fill:"#000",stroke:"none",opacity:0}),j;if(Ext.isSafari3){j=g.createSvgElement("rect",{x:-10,y:-10,width:"110%",height:"110%",fill:"none",stroke:"#000"})}d.appendChild(a);if(Ext.isSafari3){d.appendChild(j)}d.appendChild(h);c.appendChild(d);g.el=Ext.get(d);g.bgRect=Ext.get(h);if(Ext.isSafari3){g.webkitRect=Ext.get(j);g.webkitRect.hide()}g.el.on({scope:g,mouseup:g.onMouseUp,mousedown:g.onMouseDown,mouseover:g.onMouseOver,mouseout:g.onMouseOut,mousemove:g.onMouseMove,mouseenter:g.onMouseEnter,mouseleave:g.onMouseLeave,click:g.onClick})}g.renderAll()},onMouseEnter:function(a){if(this.el.parent().getRegion().contains(a.getPoint())){this.fireEvent("mouseenter",a)}},onMouseLeave:function(a){if(!this.el.parent().getRegion().contains(a.getPoint())){this.fireEvent("mouseleave",a)}},processEvent:function(b,g){var d=g.getTarget(),a=this.surface,c;this.fireEvent(b,g);if(d.nodeName=="tspan"&&d.parentNode){d=d.parentNode}c=this.items.get(d.id);if(c){c.fireEvent(b,c,g)}},tuneText:function(j,k){var a=j.el.dom,b=[],n,h,m,d,e,c,g;if(k.hasOwnProperty("text")){b=this.setText(j,k.text)}if(b.length){n=this.getBBoxText(j).height;for(d=0,e=b.length;d<e;d++){g=(Ext.isFF3_0||Ext.isFF3_5)?2:4;b[d].setAttribute("dy",d?n*1.2:n/g)}j.dirty=true}},setText:function(m,d){var h=this,a=m.el.dom,k=a.getAttribute("x"),b=[],p,j,n,e,g,c;while(a.firstChild){a.removeChild(a.firstChild)}c=String(d).split("\n");for(e=0,g=c.length;e<g;e++){n=c[e];if(n){j=h.createSvgElement("tspan");j.appendChild(document.createTextNode(Ext.htmlDecode(n)));j.setAttribute("x",k);a.appendChild(j);b[e]=j}}return b},renderAll:function(){this.items.each(this.renderItem,this)},renderItem:function(a){if(!this.el){return}if(!a.el){this.createSpriteElement(a)}if(a.zIndexDirty){this.applyZIndex(a)}if(a.dirty){this.applyAttrs(a);this.applyTransformations(a)}},redraw:function(a){a.dirty=a.zIndexDirty=true;this.renderItem(a)},applyAttrs:function(u){var n=this,c=u.el,t=u.group,j=u.attr,v=n.parsers,g=n.gradientsMap||{},k=Ext.isSafari&&!Ext.isStrict,e,h,m,r,d,q,b,a,p;if(t){e=[].concat(t);m=e.length;for(h=0;h<m;h++){t=e[h];n.getGroup(t).add(u)}delete u.group}r=n.scrubAttrs(u)||{};u.bbox.plain=0;u.bbox.transform=0;if(u.type=="circle"||u.type=="ellipse"){r.cx=r.cx||r.x;r.cy=r.cy||r.y}else{if(u.type=="rect"){r.rx=r.ry=r.r}else{if(u.type=="path"&&r.d){r.d=Ext.draw.Draw.pathToString(Ext.draw.Draw.pathToAbsolute(r.d))}}}u.dirtyPath=false;if(r["clip-rect"]){n.setClip(u,r);delete r["clip-rect"]}if(u.type=="text"&&r.font&&u.dirtyFont){c.set({style:"font: "+r.font});u.dirtyFont=false}if(u.type=="image"){c.dom.setAttributeNS(n.xlink,"href",r.src)}Ext.applyIf(r,n.minDefaults[u.type]);if(u.dirtyHidden){(j.hidden)?n.hidePrim(u):n.showPrim(u);u.dirtyHidden=false}for(q in r){if(r.hasOwnProperty(q)&&r[q]!=null){if(k&&("color|stroke|fill".indexOf(q)>-1)&&(r[q] in g)){r[q]=g[r[q]]}if(q in v){c.dom.setAttribute(q,v[q](r[q],u,n))}else{c.dom.setAttribute(q,r[q])}}}if(u.type=="text"){n.tuneText(u,r)}b=j.style;if(b){c.setStyle(b)}u.dirty=false;if(Ext.isSafari3){n.webkitRect.show();setTimeout(function(){n.webkitRect.hide()})}},setClip:function(b,g){var e=this,d=g["clip-rect"],a,c;if(d){if(b.clip){b.clip.parentNode.parentNode.removeChild(b.clip.parentNode)}a=e.createSvgElement("clipPath");c=e.createSvgElement("rect");a.id=Ext.id(null,"ext-clip-");c.setAttribute("x",d.x);c.setAttribute("y",d.y);c.setAttribute("width",d.width);c.setAttribute("height",d.height);a.appendChild(c);e.getDefs().appendChild(a);b.el.dom.setAttribute("clip-path","url(#"+a.id+")");b.clip=c}},applyZIndex:function(d){var g=this,b=g.items,a=b.indexOf(d),e=d.el,c;if(g.el.dom.childNodes[a+2]!==e.dom){if(a>0){do{c=b.getAt(--a).el}while(!c&&a>0)}e.insertAfter(c||g.bgRect)}d.zIndexDirty=false},createItem:function(a){var b=Ext.create("Ext.draw.Sprite",a);b.surface=this;return b},addGradient:function(h){h=Ext.draw.Draw.parseGradient(h);var e=this,d=h.stops.length,a=h.vector,m=Ext.isSafari&&!Ext.isStrict,j,g,k,c,b;b=e.gradientsMap||{};if(!m){if(h.type=="linear"){j=e.createSvgElement("linearGradient");j.setAttribute("x1",a[0]);j.setAttribute("y1",a[1]);j.setAttribute("x2",a[2]);j.setAttribute("y2",a[3])}else{j=e.createSvgElement("radialGradient");j.setAttribute("cx",h.centerX);j.setAttribute("cy",h.centerY);j.setAttribute("r",h.radius);if(Ext.isNumber(h.focalX)&&Ext.isNumber(h.focalY)){j.setAttribute("fx",h.focalX);j.setAttribute("fy",h.focalY)}}j.id=h.id;e.getDefs().appendChild(j);for(c=0;c<d;c++){g=h.stops[c];k=e.createSvgElement("stop");k.setAttribute("offset",g.offset+"%");k.setAttribute("stop-color",g.color);k.setAttribute("stop-opacity",g.opacity);j.appendChild(k)}}else{b["url(#"+h.id+")"]=h.stops[0].color}e.gradientsMap=b},hasCls:function(a,b){return b&&(" "+(a.el.dom.getAttribute("class")||"")+" ").indexOf(" "+b+" ")!=-1},addCls:function(e,h){var g=e.el,d,a,c,b=[],j=g.getAttribute("class")||"";if(!Ext.isArray(h)){if(typeof h=="string"&&!this.hasCls(e,h)){g.set({"class":j+" "+h})}}else{for(d=0,a=h.length;d<a;d++){c=h[d];if(typeof c=="string"&&(" "+j+" ").indexOf(" "+c+" ")==-1){b.push(c)}}if(b.length){g.set({"class":" "+b.join(" ")})}}},removeCls:function(k,g){var h=this,b=k.el,d=b.getAttribute("class")||"",c,j,e,m,a;if(!Ext.isArray(g)){g=[g]}if(d){a=d.replace(h.trimRe," ").split(h.spacesRe);for(c=0,e=g.length;c<e;c++){m=g[c];if(typeof m=="string"){m=m.replace(h.trimRe,"");j=Ext.Array.indexOf(a,m);if(j!=-1){Ext.Array.erase(a,j,1)}}}b.set({"class":a.join(" ")})}},destroy:function(){var a=this;a.callParent();if(a.el){a.el.remove()}delete a.el}});Ext.define("Ext.draw.engine.Vml",{extend:"Ext.draw.Surface",requires:["Ext.draw.Draw","Ext.draw.Color","Ext.draw.Sprite","Ext.draw.Matrix","Ext.Element"],engine:"Vml",map:{M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bitesRe:/([clmz]),?([^clmz]*)/gi,valRe:/-?[^,\s-]+/g,fillUrlRe:/^url\(\s*['"]?([^\)]+?)['"]?\s*\)$/i,pathlike:/^(path|rect)$/,NonVmlPathRe:/[ahqstv]/ig,partialPathRe:/[clmz]/g,fontFamilyRe:/^['"]+|['"]+$/g,baseVmlCls:Ext.baseCSSPrefix+"vml-base",vmlGroupCls:Ext.baseCSSPrefix+"vml-group",spriteCls:Ext.baseCSSPrefix+"vml-sprite",measureSpanCls:Ext.baseCSSPrefix+"vml-measure-span",zoom:21600,coordsize:1000,coordorigin:"0 0",orderSpritesByZIndex:false,path2vml:function(w){var q=this,x=q.NonVmlPathRe,b=q.map,e=q.valRe,v=q.zoom,d=q.bitesRe,g=Ext.Function.bind(Ext.draw.Draw.pathToAbsolute,Ext.draw.Draw),n,t,c,a,k,u,h,m;if(String(w).match(x)){g=Ext.Function.bind(Ext.draw.Draw.path2curve,Ext.draw.Draw)}else{if(!String(w).match(q.partialPathRe)){n=String(w).replace(d,function(y,A,p){var z=[],j=A.toLowerCase()=="m",r=b[A];p.replace(e,function(B){if(j&&z[length]==2){r+=z+b[A=="m"?"l":"L"];z=[]}z.push(Math.round(B*v))});return r+z});return n}}t=g(w);n=[];for(k=0,u=t.length;k<u;k++){c=t[k];a=t[k][0].toLowerCase();if(a=="z"){a="x"}for(h=1,m=c.length;h<m;h++){a+=Math.round(c[h]*q.zoom)+(h!=m-1?",":"")}n.push(a)}return n.join(" ")},translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},minDefaults:{circle:{fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start",font:'10px "Arial"',fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},onMouseEnter:function(a){this.fireEvent("mouseenter",a)},onMouseLeave:function(a){this.fireEvent("mouseleave",a)},processEvent:function(b,g){var d=g.getTarget(),a=this.surface,c;this.fireEvent(b,g);c=this.items.get(d.id);if(c){c.fireEvent(b,c,g)}},createSpriteElement:function(h){var e=this,d=h.attr,g=h.type,k=e.zoom,b=h.vml||(h.vml={}),m=Math.round,c=e.createNode("shape"),n,j,a;c.coordsize=k+" "+k;c.coordorigin=d.coordorigin||"0 0";Ext.get(c).addCls(e.spriteCls);if(g=="text"){b.path=n=e.createNode("path");n.textpathok=true;b.textpath=a=e.createNode("textpath");a.on=true;c.appendChild(a);c.appendChild(n)}c.id=h.id;h.el=Ext.get(c);e.el.appendChild(c);if(g!=="image"){j=e.createNode("skew");j.on=true;c.appendChild(j);h.skew=j}h.matrix=Ext.create("Ext.draw.Matrix");h.bbox={plain:null,transform:null};h.fireEvent("render",h);return h.el},getBBox:function(a,b){var c=this["getPath"+a.type](a);if(b){a.bbox.plain=a.bbox.plain||Ext.draw.Draw.pathDimensions(c);return a.bbox.plain}a.bbox.transform=a.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(c,a.matrix));return a.bbox.transform},getBBoxText:function(b){var a=b.vml;return{x:a.X+(a.bbx||0)-a.W/2,y:a.Y-a.H/2,width:a.W,height:a.H}},applyAttrs:function(p){var w=this,d=p.vml,k=p.group,b=p.attr,c=p.el,r=c.dom,t,y,v,q,m,u,n,x,a;if(k){v=[].concat(k);m=v.length;for(q=0;q<m;q++){k=v[q];w.getGroup(k).add(p)}delete p.group}u=w.scrubAttrs(p)||{};if(p.zIndexDirty){w.setZIndex(p)}Ext.applyIf(u,w.minDefaults[p.type]);if(r.href){r.href=u.href}if(r.title){r.title=u.title}if(r.target){r.target=u.target}if(r.cursor){r.cursor=u.cursor}if(p.dirtyHidden){(u.hidden)?w.hidePrim(p):w.showPrim(p);p.dirtyHidden=false}if(p.dirtyPath){if(p.type=="circle"||p.type=="ellipse"){var g=u.x,e=u.y,j=u.rx||u.r||0,h=u.ry||u.r||0;r.path=Ext.String.format("ar{0},{1},{2},{3},{4},{1},{4},{1}",Math.round((g-j)*w.zoom),Math.round((e-h)*w.zoom),Math.round((g+j)*w.zoom),Math.round((e+h)*w.zoom),Math.round(g*w.zoom));p.dirtyPath=false}else{if(p.type!=="text"){p.attr.path=u.path=w.setPaths(p,u)||u.path;r.path=w.path2vml(u.path);p.dirtyPath=false}}}if("clip-rect" in u){w.setClip(p,u)}if(p.type=="text"){w.setTextAttributes(p,u)}if(p.type=="image"||u.opacity||u["fill-opacity"]||u.fill){w.setFill(p,u)}if(u.stroke||u["stroke-opacity"]||u.fill){w.setStroke(p,u)}t=b.style;if(t){c.setStyle(t)}p.dirty=false},setZIndex:function(a){if(a.el){if(a.attr.zIndex!=undefined){a.el.setStyle("zIndex",a.attr.zIndex)}a.zIndexDirty=false}},setPaths:function(b,c){var a=b.attr;b.bbox.plain=null;b.bbox.transform=null;if(b.type=="circle"){a.rx=a.ry=c.r;return Ext.draw.Draw.ellipsePath(b)}else{if(b.type=="ellipse"){a.rx=c.rx;a.ry=c.ry;return Ext.draw.Draw.ellipsePath(b)}else{if(b.type=="rect"||b.type=="image"){a.rx=a.ry=c.r;return Ext.draw.Draw.rectPath(b)}else{if(b.type=="path"&&a.path){return Ext.draw.Draw.pathToAbsolute(a.path)}}}}return false},setFill:function(m,d){var h=this,b=m.el,e=b.dom,k=e.getElementsByTagName("fill")[0],g,j,a,n,c;if(k){e.removeChild(k)}else{k=h.createNode("fill")}if(Ext.isArray(d.fill)){d.fill=d.fill[0]}if(m.type=="image"){k.on=true;k.src=d.src;k.type="tile";k.rotate=true}else{if(d.fill=="none"){k.on=false}else{if(typeof d.opacity=="number"){k.opacity=d.opacity}if(typeof d["fill-opacity"]=="number"){k.opacity=d["fill-opacity"]}k.on=true;if(typeof d.fill=="string"){a=d.fill.match(h.fillUrlRe);if(a){a=a[1];if(a.charAt(0)=="#"){j=h.gradientsColl.getByKey(a.substring(1))}if(j){n=d.rotation;c=-(j.angle+270+(n?n.degrees:0))%360;if(c===0){c=180}k.angle=c;k.type="gradient";k.method="sigma";k.colors=j.colors}else{k.src=a;k.type="tile";k.rotate=true}}else{k.color=Ext.draw.Color.toHex(d.fill)||d.fill;k.src="";k.type="solid"}}}}e.appendChild(k)},setStroke:function(b,h){var e=this,d=b.el.dom,j=b.strokeEl,g=false,c,a;if(!j){j=b.strokeEl=e.createNode("stroke");g=true}if(Ext.isArray(h.stroke)){h.stroke=h.stroke[0]}if(!h.stroke||h.stroke=="none"||h.stroke==0||h["stroke-width"]==0){j.on=false}else{j.on=true;if(h.stroke&&!h.stroke.match(e.fillUrlRe)){j.color=Ext.draw.Color.toHex(h.stroke)}j.joinstyle=h["stroke-linejoin"];j.endcap=h["stroke-linecap"]||"round";j.miterlimit=h["stroke-miterlimit"]||8;c=parseFloat(h["stroke-width"]||1)*0.75;a=h["stroke-opacity"]||1;if(Ext.isNumber(c)&&c<1){j.weight=1;j.opacity=a*c}else{j.weight=c;j.opacity=a}}if(g){d.appendChild(j)}},setClip:function(b,g){var e=this,c=b.el,a=b.clipEl,d=String(g["clip-rect"]).split(e.separatorRe);if(!a){a=b.clipEl=e.el.insertFirst(Ext.getDoc().dom.createElement("div"));a.addCls(Ext.baseCSSPrefix+"vml-sprite")}if(d.length==4){d[2]=+d[2]+(+d[0]);d[3]=+d[3]+(+d[1]);a.setStyle("clip",Ext.String.format("rect({1}px {2}px {3}px {0}px)",d[0],d[1],d[2],d[3]));a.setSize(e.el.width,e.el.height)}else{a.setStyle("clip","")}},setTextAttributes:function(j,c){var h=this,a=j.vml,e=a.textpath.style,g=h.span.style,k=h.zoom,m=Math.round,n={fontSize:"font-size",fontWeight:"font-weight",fontStyle:"font-style"},b,d;if(j.dirtyFont){if(c.font){e.font=g.font=c.font}if(c["font-family"]){e.fontFamily='"'+c["font-family"].split(",")[0].replace(h.fontFamilyRe,"")+'"';g.fontFamily=c["font-family"]}for(b in n){d=c[n[b]];if(d){e[b]=g[b]=d}}h.setText(j,c.text);if(a.textpath.string){h.span.innerHTML=String(a.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")}a.W=h.span.offsetWidth;a.H=h.span.offsetHeight+2;if(c["text-anchor"]=="middle"){e["v-text-align"]="center"}else{if(c["text-anchor"]=="end"){e["v-text-align"]="right";a.bbx=-Math.round(a.W/2)}else{e["v-text-align"]="left";a.bbx=Math.round(a.W/2)}}}a.X=c.x;a.Y=c.y;a.path.v=Ext.String.format("m{0},{1}l{2},{1}",Math.round(a.X*k),Math.round(a.Y*k),Math.round(a.X*k)+1);j.bbox.plain=null;j.bbox.transform=null;j.dirtyFont=false},setText:function(a,b){a.vml.textpath.string=Ext.htmlDecode(b)},hide:function(){this.el.hide()},show:function(){this.el.show()},hidePrim:function(a){a.el.addCls(Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(a){a.el.removeCls(Ext.baseCSSPrefix+"hide-visibility")},setSize:function(b,a){var c=this;b=b||c.width;a=a||c.height;c.width=b;c.height=a;if(c.el){if(b!=undefined){c.el.setWidth(b)}if(a!=undefined){c.el.setHeight(a)}c.applyViewBox();c.callParent(arguments)}},setViewBox:function(b,d,c,a){this.callParent(arguments);this.viewBox={x:b,y:d,width:c,height:a};this.applyViewBox()},applyViewBox:function(){var d=this,n=d.viewBox,a=d.width,h=d.height,g,e,k,b,j,c,m;if(n&&(a||h)){g=n.x;e=n.y;k=n.width;b=n.height;j=h/b;c=a/k;if(k*j<a){g-=(a-k*j)/2/j}if(b*c<h){e-=(h-b*c)/2/c}m=1/Math.max(k/a,b/h);d.viewBoxShift={dx:-g,dy:-e,scale:m};d.items.each(function(p){d.transform(p)})}},onAdd:function(a){this.callParent(arguments);if(this.el){this.renderItem(a)}},onRemove:function(a){if(a.el){a.el.remove();delete a.el}this.callParent(arguments)},createNode:(function(){try{var b=Ext.getDoc().dom;if(!b.namespaces.rvml){b.namespaces.add("rvml","urn:schemas-microsoft-com:vml")}return function(c){return b.createElement("<rvml:"+c+' class="rvml">')}}catch(a){return function(c){return b.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}})(),render:function(a){var c=this,d=Ext.getDoc().dom;if(!c.el){var b=d.createElement("div");c.el=Ext.get(b);c.el.addCls(c.baseVmlCls);c.span=d.createElement("span");Ext.get(c.span).addCls(c.measureSpanCls);b.appendChild(c.span);c.el.setSize(c.width||10,c.height||10);a.appendChild(b);c.el.on({scope:c,mouseup:c.onMouseUp,mousedown:c.onMouseDown,mouseover:c.onMouseOver,mouseout:c.onMouseOut,mousemove:c.onMouseMove,mouseenter:c.onMouseEnter,mouseleave:c.onMouseLeave,click:c.onClick})}c.renderAll()},renderAll:function(){this.items.each(this.renderItem,this)},redraw:function(a){a.dirty=true;this.renderItem(a)},renderItem:function(a){if(!this.el){return}if(!a.el){this.createSpriteElement(a)}if(a.dirty){this.applyAttrs(a);if(a.dirtyTransform){this.applyTransformations(a)}}},rotationCompensation:function(d,c,a){var b=Ext.create("Ext.draw.Matrix");b.rotate(-d,0.5,0.5);return{x:b.x(c,a),y:b.y(c,a)}},extractTransform:function(k){var h=this,j=Ext.create("Ext.draw.Matrix"),e,c,a,d,g=0,b=h.viewBoxShift;for(c=k.transformations,a=c.length;g<a;g++){d=c[g];switch(d.type){case"translate":j.translate(d.x,d.y);break;case"rotate":j.rotate(d.degrees,d.x,d.y);break;case"scale":j.scale(d.x||d.scale,d.y||d.scale,d.centerX,d.centerY);break}}if(b){j.add(1,0,0,1,b.dx,b.dy);j.prepend(b.scale,0,0,b.scale,0,0)}return k.matrix=j},setSimpleCoords:function(q,n,m,u,t,e){var k=this,p=q.matrix,d=q.el.dom,a=d.style,c=1,g="",r=d.getElementsByTagName("fill")[0],j=k.zoom/n,h=k.zoom/m,b;if(!n||!m){return}d.coordsize=Math.abs(j)+" "+Math.abs(h);a.rotation=e*(n*m<0?-1:1);if(e){b=k.rotationCompensation(e,u,t);u=b.x;t=b.y}if(n<0){g+="x"}if(m<0){g+=" y";c=-1}a.flip=g;d.coordorigin=(u*-j)+" "+(t*-h);if(r){d.removeChild(r);b=k.rotationCompensation(e,p.x(q.x,q.y),p.y(q.x,q.y));r.position=b.x*c+" "+b.y*c;r.size=q.width*Math.abs(n)+" "+q.height*Math.abs(m);d.appendChild(r)}},transform:function(p){var k=this,b=p.el,u=p.skew,e=b.dom,g=e.style,n=k.extractTransform(p).clone(),m,t=k.zoom,r=e.getElementsByTagName("fill")[0],a=!String(p.fill).indexOf("url("),d,j;if(p.type!="image"&&u&&!a){u.matrix=n.toString();d=n.offset();if(d[0]>32767){d[0]=32767}else{if(d[0]<-32768){d[0]=-32768}}if(d[1]>32767){d[1]=32767}else{if(d[1]<-32768){d[1]=-32768}}u.offset=d}else{if(u){u.matrix="1 0 0 1";u.offset="0 0"}m=n.split();if(m.isSimple){g.filter="";k.setSimpleCoords(p,m.scaleX,m.scaleY,m.translateX,m.translateY,m.rotate/Math.PI*180)}else{g.filter=n.toFilter();var h=k.getBBox(p),v=h.x-p.x,q=h.y-p.y;e.coordorigin=(v*-t)+" "+(q*-t);if(r){e.removeChild(r);r.position=v+" "+q;r.size=p.width*p.scale.x+" "+p.height*1.1;e.appendChild(r)}}}},createItem:function(a){return Ext.create("Ext.draw.Sprite",a)},getRegion:function(){return this.el.getRegion()},addCls:function(a,b){if(a&&a.el){a.el.addCls(b)}},removeCls:function(a,b){if(a&&a.el){a.el.removeCls(b)}},addGradient:function(d){var a=this.gradientsColl||(this.gradientsColl=Ext.create("Ext.util.MixedCollection")),b=[],c=Ext.create("Ext.util.MixedCollection");c.addAll(d.stops);c.sortByKey("ASC",function(g,e){g=parseInt(g,10);e=parseInt(e,10);return g>e?1:(g<e?-1:0)});c.eachKey(function(g,e){b.push(g+"% "+e.color)});a.add(d.id,{colors:b.join(","),angle:d.angle})},destroy:function(){var a=this;a.callParent(arguments);if(a.el){a.el.remove()}delete a.el}});Ext.define("Ext.fx.target.ElementCSS",{extend:"Ext.fx.target.Element",setAttr:function(p,e){var r={attrs:[],duration:[],easing:[]},n=p.length,g,q,k,m,c,b,h,d,a;for(h=0;h<n;h++){q=p[h];c=q.duration;m=q.easing;q=q.attrs;for(k in q){if(Ext.Array.indexOf(r.attrs,k)==-1){r.attrs.push(k.replace(/[A-Z]/g,function(j){return"-"+j.toLowerCase()}));r.duration.push(c+"ms");r.easing.push(m)}}}g=r.attrs.join(",");c=r.duration.join(",");m=r.easing.join(", ");for(h=0;h<n;h++){q=p[h].attrs;for(k in q){a=q[k].length;for(d=0;d<a;d++){b=q[k][d];b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",e?"":g);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",e?"":c);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",e?"":m);b[0].setStyle(k,b[1]);if(e){b=b[0].dom.offsetWidth}else{b[0].on(Ext.supports.CSS3TransitionEnd,function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},b[0],{single:true})}}}}}});Ext.define("Ext.fx.target.CompositeElementCSS",{extend:"Ext.fx.target.CompositeElement",requires:["Ext.fx.target.ElementCSS"],setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}});Ext.define("Ext.layout.container.AbstractFit",{extend:"Ext.layout.container.Container",itemCls:Ext.baseCSSPrefix+"fit-item",targetCls:Ext.baseCSSPrefix+"layout-fit",type:"fit"});Ext.define("Ext.layout.container.Fit",{extend:"Ext.layout.container.AbstractFit",alias:"layout.fit",alternateClassName:"Ext.layout.FitLayout",requires:["Ext.layout.container.Box"],defaultMargins:{top:0,right:0,bottom:0,left:0},onLayout:function(){var c=this,a,b,d;c.callParent();if(c.owner.items.length){b=c.owner.items.get(0);d=b.margins||c.defaultMargins;a=c.getLayoutTargetSize();a.width-=d.width;a.height-=d.height;c.setItemBox(b,a);if(d.left||d.top){b.setPosition(d.left,d.top)}}},getTargetBox:function(){return this.getLayoutTargetSize()},setItemBox:function(c,b){var a=this;if(c&&b.height>0){if(!a.owner.isFixedWidth()){b.width=undefined}if(!a.owner.isFixedHeight()){b.height=undefined}a.setItemSize(c,b.width,b.height)}},configureItem:function(a){a.layoutManagedHeight=0;a.layoutManagedWidth=0;this.callParent(arguments)}},function(){this.prototype.renderItem=Ext.layout.container.Box.prototype.renderItem});Ext.define("Ext.layout.container.AbstractCard",{extend:"Ext.layout.container.Fit",type:"card",sizeAllCards:false,hideInactive:true,deferredRender:false,beforeLayout:function(){var a=this;a.getActiveItem();if(a.activeItem&&a.deferredRender){a.renderItems([a.activeItem],a.getRenderTarget());return true}else{return this.callParent(arguments)}},renderChildren:function(){if(!this.deferredRender){this.getActiveItem();this.callParent()}},onLayout:function(){var g=this,h=g.activeItem,b=g.getVisibleItems(),e=b.length,a=g.getTargetBox(),c,d;for(c=0;c<e;c++){d=b[c];g.setItemBox(d,a)}if(!g.firstActivated&&h){if(h.fireEvent("beforeactivate",h)!==false){h.fireEvent("activate",h)}g.firstActivated=true}},isValidParent:function(c,d,a){var b=c.el?c.el.dom:Ext.getDom(c);return(b&&b.parentNode===(d.dom||d))||false},getActiveItem:function(){var a=this;if(!a.activeItem&&a.owner){a.activeItem=a.parseActiveItem(a.owner.activeItem)}if(a.activeItem&&a.owner.items.indexOf(a.activeItem)!=-1){return a.activeItem}return null},parseActiveItem:function(a){if(a&&a.isComponent){return a}else{if(typeof a=="number"||a===undefined){return this.getLayoutItems()[a||0]}else{return this.owner.getComponent(a)}}},configureItem:function(b,a){this.callParent([b,a]);if(this.hideInactive&&this.activeItem!==b){b.hide()}else{b.show()}},onRemove:function(a){if(a===this.activeItem){this.activeItem=null;if(this.owner.items.getCount()===0){this.firstActivated=false}}},getAnimation:function(b,a){var c=(b||{}).cardSwitchAnimation;if(c===false){return false}return c||a.cardSwitchAnimation},getNext:function(){var c=arguments[0];var a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b+1]||(c?a[0]:false)},next:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getNext(a),b)},getPrev:function(){var c=arguments[0];var a=this.getLayoutItems(),b=Ext.Array.indexOf(a,this.activeItem);return a[b-1]||(c?a[a.length-1]:false)},prev:function(){var b=arguments[0],a=arguments[1];return this.setActiveItem(this.getPrev(a),b)}});Ext.define("Ext.selection.Model",{extend:"Ext.util.Observable",alternateClassName:"Ext.AbstractSelectionModel",requires:["Ext.data.StoreManager"],allowDeselect:false,selected:null,pruneRemoved:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.addEvents("selectionchange");b.modes={SINGLE:true,SIMPLE:true,MULTI:true};b.setSelectionMode(a.mode||b.mode);b.selected=Ext.create("Ext.util.MixedCollection");b.callParent(arguments)},bind:function(a,b){var c=this;if(!b&&c.store){if(a!==c.store&&c.store.autoDestroy){c.store.destroyStore()}else{c.store.un("add",c.onStoreAdd,c);c.store.un("clear",c.onStoreClear,c);c.store.un("remove",c.onStoreRemove,c);c.store.un("update",c.onStoreUpdate,c)}}if(a){a=Ext.data.StoreManager.lookup(a);a.on({add:c.onStoreAdd,clear:c.onStoreClear,remove:c.onStoreRemove,update:c.onStoreUpdate,scope:c})}c.store=a;if(a&&!b){c.refresh()}},selectAll:function(b){var e=this,d=e.store.getRange(),c=0,a=d.length,g=e.getSelection().length;e.bulkChange=true;for(;c<a;c++){e.doSelect(d[c],true,b)}delete e.bulkChange;e.maybeFireSelectionChange(e.getSelection().length!==g)},deselectAll:function(b){var e=this,d=e.getSelection(),c=0,a=d.length,g=e.getSelection().length;e.bulkChange=true;for(;c<a;c++){e.doDeselect(d[c],b)}delete e.bulkChange;e.maybeFireSelectionChange(e.getSelection().length!==g)},selectWithEvent:function(a,d,c){var b=this;switch(b.selectionMode){case"MULTI":if(d.ctrlKey&&b.isSelected(a)){b.doDeselect(a,false)}else{if(d.shiftKey&&b.lastFocused){b.selectRange(b.lastFocused,a,d.ctrlKey)}else{if(d.ctrlKey){b.doSelect(a,true,false)}else{if(b.isSelected(a)&&!d.shiftKey&&!d.ctrlKey&&b.selected.getCount()>1){b.doSelect(a,c,false)}else{b.doSelect(a,false)}}}}break;case"SIMPLE":if(b.isSelected(a)){b.doDeselect(a)}else{b.doSelect(a,true)}break;case"SINGLE":if(b.allowDeselect&&b.isSelected(a)){b.doDeselect(a)}else{b.doSelect(a,false)}break}},selectRange:function(m,e,n,c){var j=this,k=j.store,d=0,h,g,a,b=[];if(j.isLocked()){return}if(!n){j.deselectAll(true)}if(!Ext.isNumber(m)){m=k.indexOf(m)}if(!Ext.isNumber(e)){e=k.indexOf(e)}if(m>e){g=e;e=m;m=g}for(h=m;h<=e;h++){if(j.isSelected(k.getAt(h))){d++}}if(!c){a=-1}else{a=(c=="up")?m:e}for(h=m;h<=e;h++){if(d==(e-m+1)){if(h!=a){j.doDeselect(h,true)}}else{b.push(k.getAt(h))}}j.doMultiSelect(b,true)},select:function(b,c,a){if(Ext.isDefined(b)){this.doSelect(b,c,a)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(c,e,b){var d=this,a;if(d.locked){return}if(typeof c==="number"){c=[d.store.getAt(c)]}if(d.selectionMode=="SINGLE"&&c){a=c.length?c[0]:c;d.doSingleSelect(a,b)}else{d.doMultiSelect(c,e,b)}},doMultiSelect:function(a,m,k){var h=this,b=h.selected,j=false,d=0,g,e;if(h.locked){return}a=!Ext.isArray(a)?[a]:a;g=a.length;if(!m&&b.getCount()>0){if(h.doDeselect(h.getSelection(),k)===false){return}}function c(){b.add(e);j=true}for(;d<g;d++){e=a[d];if(m&&h.isSelected(e)){continue}h.lastSelected=e;h.onSelectChange(e,true,k,c)}h.setLastFocused(e,k);h.maybeFireSelectionChange(j&&!k)},doDeselect:function(a,k){var j=this,b=j.selected,d=0,h,e,m=0,g=0;if(j.locked){return false}if(typeof a==="number"){a=[j.store.getAt(a)]}else{if(!Ext.isArray(a)){a=[a]}}function c(){++g;b.remove(e)}h=a.length;for(;d<h;d++){e=a[d];if(j.isSelected(e)){if(j.lastSelected==e){j.lastSelected=b.last()}++m;j.onSelectChange(e,false,k,c)}}j.maybeFireSelectionChange(g>0&&!k);return g===m},doSingleSelect:function(a,b){var d=this,g=false,c=d.selected;if(d.locked){return}if(d.isSelected(a)){return}function e(){d.bulkChange=true;if(c.getCount()>0&&d.doDeselect(d.lastSelected,b)===false){delete d.bulkChange;return false}delete d.bulkChange;c.add(a);d.lastSelected=a;g=true}d.onSelectChange(a,true,b,e);if(g){if(!b){d.setLastFocused(a)}d.maybeFireSelectionChange(!b)}},setLastFocused:function(c,b){var d=this,a=d.lastFocused;d.lastFocused=c;d.onLastFocusChanged(a,c,b)},isFocused:function(a){return a===this.getLastFocused()},maybeFireSelectionChange:function(a){var b=this;if(a&&!b.bulkChange){b.fireEvent("selectionchange",b,b.getSelection())}},getLastSelected:function(){return this.lastSelected},getLastFocused:function(){return this.lastFocused},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE";this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected.indexOf(a)!==-1},hasSelection:function(){return this.selected.getCount()>0},refresh:function(){var h=this,b=[],g=h.getSelection(),a=g.length,e,j,d=0,c=this.getLastFocused();for(;d<a;d++){e=g[d];if(!this.pruneRemoved||h.store.indexOf(e)!==-1){b.push(e)}}if(h.selected.getCount()!=b.length){j=true}h.clearSelections();if(h.store.indexOf(c)!==-1){this.setLastFocused(c,true)}if(b.length){h.doSelect(b,false,true)}h.maybeFireSelectionChange(j)},clearSelections:function(){this.selected.clear();this.lastSelected=null;this.setLastFocused(null)},onStoreAdd:function(){},onStoreClear:function(){if(this.selected.getCount>0){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(b,a){var d=this,c=d.selected;if(d.locked||!d.pruneRemoved){return}if(c.remove(a)){if(d.lastSelected==a){d.lastSelected=null}if(d.getLastFocused()==a){d.setLastFocused(null)}d.maybeFireSelectionChange(true)}},getCount:function(){return this.selected.getCount()},destroy:function(){},onStoreUpdate:function(){},onSelectChange:function(a,c,b){},onLastFocusChanged:function(b,a){},onEditorKey:function(b,a){},bindComponent:function(a){}});Ext.define("Ext.selection.DataViewModel",{extend:"Ext.selection.Model",requires:["Ext.util.KeyNav"],deselectOnContainerClick:true,enableKeyNav:true,constructor:function(a){this.addEvents("beforedeselect","beforeselect","deselect","select");this.callParent(arguments)},bindComponent:function(a){var b=this,c={refresh:b.refresh,scope:b};b.view=a;b.bind(a.getStore());a.on(a.triggerEvent,b.onItemClick,b);a.on(a.triggerCtEvent,b.onContainerClick,b);a.on(c);if(b.enableKeyNav){b.initKeyNav(a)}},onItemClick:function(b,a,d,c,g){this.selectWithEvent(a,g)},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},initKeyNav:function(a){var b=this;if(!a.rendered){a.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}a.el.set({tabIndex:-1});b.keyNav=Ext.create("Ext.util.KeyNav",a.el,{down:Ext.pass(b.onNavKey,[1],b),right:Ext.pass(b.onNavKey,[1],b),left:Ext.pass(b.onNavKey,[-1],b),up:Ext.pass(b.onNavKey,[-1],b),scope:b})},onNavKey:function(g){g=g||1;var e=this,b=e.view,d=e.getSelection()[0],c=e.view.store.getCount(),a;if(d){a=b.indexOf(b.getNode(d))+g}else{a=0}if(a<0){a=c-1}else{if(a>=c){a=0}}e.select(a)},onSelectChange:function(b,e,d,h){var g=this,a=g.view,c=e?"select":"deselect";if((d||g.fireEvent("before"+c,g,b))!==false&&h()!==false){if(e){a.onItemSelect(b)}else{a.onItemDeselect(b)}if(!d){g.fireEvent(c,g,b)}}},destroy:function(){Ext.destroy(this.keyNav);this.callParent()}});Ext.define("Ext.state.CookieProvider",{extend:"Ext.state.Provider",constructor:function(a){var b=this;b.path="/";b.expires=new Date(new Date().getTime()+(1000*60*60*24*7));b.domain=null;b.secure=false;b.callParent(arguments);b.state=b.readCookies()},set:function(a,c){var b=this;if(typeof c=="undefined"||c===null){b.clear(a);return}b.setCookie(a,c);b.callParent(arguments)},clear:function(a){this.clearCookie(a);this.callParent(arguments)},readCookies:function(){var e={},k=document.cookie+";",d=/\s?(.*?)=(.*?);/g,j=this.prefix,a=j.length,h,b,g;while((h=d.exec(k))!=null){b=h[1];g=h[2];if(b&&b.substring(0,a)==j){e[b.substr(a)]=this.decodeValue(g)}}return e},setCookie:function(a,c){var b=this;document.cookie=b.prefix+a+"="+b.encodeValue(c)+((b.expires==null)?"":("; expires="+b.expires.toGMTString()))+((b.path==null)?"":("; path="+b.path))+((b.domain==null)?"":("; domain="+b.domain))+((b.secure==true)?"; secure":"")},clearCookie:function(a){var b=this;document.cookie=b.prefix+a+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+((b.path==null)?"":("; path="+b.path))+((b.domain==null)?"":("; domain="+b.domain))+((b.secure==true)?"; secure":"")}});Ext.define("Ext.state.LocalStorageProvider",{extend:"Ext.state.Provider",alias:"state.localstorage",constructor:function(){var a=this;a.callParent(arguments);a.store=a.getStorageObject();a.state=a.readLocalStorage()},readLocalStorage:function(){var c=this.store,e=0,a=c.length,h=this.prefix,b=h.length,g={},d;for(;e<a;++e){d=c.key(e);if(d.substring(0,b)==h){g[d.substr(b)]=this.decodeValue(c.getItem(d))}}return g},set:function(a,c){var b=this;b.clear(a);if(typeof c=="undefined"||c===null){return}b.store.setItem(b.prefix+a,b.encodeValue(c));b.callParent(arguments)},clear:function(a){this.store.removeItem(this.prefix+a);this.callParent(arguments)},getStorageObject:function(){try{var a="localStorage" in window&&window.localStorage!==null;if(a){return window.localStorage}}catch(b){return false}}});Ext.define("Ext.util.Point",{extend:"Ext.util.Region",statics:{fromEvent:function(a){a=(a.changedTouches&&a.changedTouches.length>0)?a.changedTouches[0]:a;return new this(a.pageX,a.pageY)}},constructor:function(a,b){this.callParent([b,a,b,a])},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(a){return(this.x==a.x&&this.y==a.y)},isWithin:function(b,a){if(!Ext.isObject(a)){a={x:a,y:a}}return(this.x<=b.x+a.x&&this.x>=b.x-a.x&&this.y<=b.y+a.y&&this.y>=b.y-a.y)},roundedEquals:function(a){return(Math.round(this.x)==Math.round(a.x)&&Math.round(this.y)==Math.round(a.y))}},function(){this.prototype.translate=Ext.util.Region.prototype.translateBy});Ext.define("Ext.LoadMask",{extend:"Ext.Component",alias:"widget.loadmask",mixins:{floating:"Ext.util.Floating"},uses:["Ext.data.StoreManager"],msg:"Loading...",msgCls:Ext.baseCSSPrefix+"mask-loading",useMsg:true,disabled:false,baseCls:Ext.baseCSSPrefix+"mask-msg",renderTpl:'<div style="position:relative" class="{msgCls}"></div>',modal:true,floating:{shadow:"frame"},focusOnToFront:false,constructor:function(b,a){var c=this;if(b.isComponent){c.ownerCt=b;c.bindComponent(b)}else{c.ownerCt=new Ext.Component({el:Ext.get(b),rendered:true,componentLayoutCounter:1});c.container=b}c.callParent([a]);if(c.store){c.bindStore(c.store,true)}c.renderData={msgCls:c.msgCls};c.renderSelectors={msgEl:"div"}},bindComponent:function(a){this.mon(a,{resize:this.onComponentResize,scope:this})},afterRender:function(){this.callParent(arguments);this.container=this.floatParent.getContentTarget()},onComponentResize:function(){var a=this;if(a.rendered&&a.isVisible()){a.toFront();a.center()}},bindStore:function(a,b){var c=this;if(!b&&c.store){c.mun(c.store,{scope:c,beforeload:c.onBeforeLoad,load:c.onLoad,exception:c.onLoad});if(!a){c.store=null}}if(a){a=Ext.data.StoreManager.lookup(a);c.mon(a,{scope:c,beforeload:c.onBeforeLoad,load:c.onLoad,exception:c.onLoad})}c.store=a;if(a&&a.isLoading()){c.onBeforeLoad()}},onDisable:function(){this.callParent(arguments);if(this.loading){this.onLoad()}},onBeforeLoad:function(){var c=this,a=c.ownerCt||c.floatParent,b;if(!this.disabled){if(a.componentLayoutCounter){Ext.Component.prototype.show.call(c)}else{b=a.afterComponentLayout;a.afterComponentLayout=function(){a.afterComponentLayout=b;b.apply(a,arguments);if(c.loading){Ext.Component.prototype.show.call(c)}}}}},onHide:function(){var a=this;a.callParent(arguments);a.showOnParentShow=true},onShow:function(){var b=this,a=b.msgEl;b.callParent(arguments);b.loading=true;if(b.useMsg){a.show().update(b.msg)}else{a.parent().hide()}},afterShow:function(){this.callParent(arguments);this.center()},onLoad:function(){this.loading=false;Ext.Component.prototype.hide.call(this)}});Ext.define("Ext.view.AbstractView",{extend:"Ext.Component",alternateClassName:"Ext.view.AbstractView",requires:["Ext.LoadMask","Ext.data.StoreManager","Ext.CompositeElementLite","Ext.DomQuery","Ext.selection.DataViewModel"],inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.boundView)}},deferInitialRefresh:true,itemCls:Ext.baseCSSPrefix+"dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,last:false,triggerEvent:"itemclick",triggerCtEvent:"containerclick",addCmpEvents:function(){},initComponent:function(){var c=this,a=Ext.isDefined,d=c.itemTpl,b={};if(d){if(Ext.isArray(d)){d=d.join("")}else{if(Ext.isObject(d)){b=Ext.apply(b,d.initialConfig);d=d.html}}if(!c.itemSelector){c.itemSelector="."+c.itemCls}d=Ext.String.format('<tpl for="."><div class="{0}">{1}</div></tpl>',c.itemCls,d);c.tpl=Ext.create("Ext.XTemplate",d,b)}c.callParent();if(Ext.isString(c.tpl)||Ext.isArray(c.tpl)){c.tpl=Ext.create("Ext.XTemplate",c.tpl)}c.addEvents("beforerefresh","refresh","viewready","itemupdate","itemadd","itemremove");c.addCmpEvents();c.store=Ext.data.StoreManager.lookup(c.store||"ext-empty-store");c.all=new Ext.CompositeElementLite()},onRender:function(){var c=this,b=c.loadMask,a={msg:c.loadingText,msgCls:c.loadingCls,useMsg:c.loadingUseMsg};c.callParent(arguments);if(b){if(Ext.isObject(b)){a=Ext.apply(a,b)}c.loadMask=Ext.create("Ext.LoadMask",c,a);c.loadMask.on({scope:c,beforeshow:c.onMaskBeforeShow,hide:c.onMaskHide})}},onMaskBeforeShow:function(){var a=this.loadingHeight;this.getSelectionModel().deselectAll();if(a){this.setCalculatedSize(undefined,a)}},onMaskHide:function(){var a=this;if(!a.destroying&&a.loadingHeight){a.setHeight(a.height)}},afterRender:function(){this.callParent(arguments);this.getSelectionModel().bindComponent(this)},getSelectionModel:function(){var a=this,b="SINGLE";if(!a.selModel){a.selModel={}}if(a.simpleSelect){b="SIMPLE"}else{if(a.multiSelect){b="MULTI"}}Ext.applyIf(a.selModel,{allowDeselect:a.allowDeselect,mode:b});if(!a.selModel.events){a.selModel=Ext.create("Ext.selection.DataViewModel",a.selModel)}if(!a.selModel.hasRelaySetup){a.relayEvents(a.selModel,["selectionchange","beforeselect","beforedeselect","select","deselect"]);a.selModel.hasRelaySetup=true}if(a.disableSelection){a.selModel.locked=true}return a.selModel},refresh:function(){var c=this,b,a;if(!c.rendered||c.isDestroyed){return}c.fireEvent("beforerefresh",c);b=c.getTargetEl();a=c.store.getRange();b.update("");if(a.length<1){if(!c.deferEmptyText||c.hasSkippedEmptyText){b.update(c.emptyText)}c.all.clear()}else{c.tpl.overwrite(b,c.collectData(a,0));c.all.fill(Ext.query(c.getItemSelector(),b.dom));c.updateIndexes(0)}c.selModel.refresh();c.hasSkippedEmptyText=true;c.fireEvent("refresh",c);if(!c.viewReady){c.viewReady=true;c.fireEvent("viewready",c)}},prepareData:function(c,b,a){if(a){Ext.apply(c,a.getAssociatedData())}return c},collectData:function(c,g){var e=[],d=0,a=c.length,b;for(;d<a;d++){b=c[d];e[e.length]=this.prepareData(b[b.persistenceProperty],g+d,b)}return e},bufferRender:function(a,b){var c=document.createElement("div");this.tpl.overwrite(c,this.collectData(a,b));return Ext.query(this.getItemSelector(),c)},onUpdate:function(e,a){var d=this,b=d.store.indexOf(a),c;if(b>-1){c=d.bufferRender([a],b)[0];if(d.getNode(a)){d.all.replaceElement(b,c,true);d.updateIndexes(b,b);d.selModel.refresh();d.fireEvent("itemupdate",a,b,c)}}},onAdd:function(e,b,c){var d=this,a;if(d.all.getCount()===0){d.refresh();return}a=d.bufferRender(b,c);d.doAdd(a,b,c);d.selModel.refresh();d.updateIndexes(c);d.fireEvent("itemadd",b,c,a)},doAdd:function(b,a,c){var d=this.all;if(c<d.getCount()){d.item(c).insertSibling(b,"before",true)}else{d.last().insertSibling(b,"after",true)}Ext.Array.insert(d.elements,c,b)},onRemove:function(d,a,b){var c=this;c.doRemove(a,b);c.updateIndexes(b);if(c.store.getCount()===0){c.refresh()}c.fireEvent("itemremove",a,b)},doRemove:function(a,b){this.all.removeElement(b,true)},refreshNode:function(a){this.onUpdate(this.store,this.store.getAt(a))},updateIndexes:function(e,d){var c=this.all.elements,a=this.store.getRange(),b;e=e||0;d=d||((d===0)?0:(c.length-1));for(b=e;b<=d;b++){c[b].viewIndex=b;c[b].viewRecordId=a[b].internalId;if(!c[b].boundView){c[b].boundView=this.id}}},getStore:function(){return this.store},bindStore:function(a,b){var d=this,c;if(!b&&d.store){if(a!==d.store&&d.store.autoDestroy){d.store.destroyStore()}else{d.mun(d.store,{scope:d,datachanged:d.onDataChanged,add:d.onAdd,remove:d.onRemove,update:d.onUpdate,clear:d.refresh})}if(!a){if(d.loadMask&&d.loadMask.bindStore){d.loadMask.bindStore(null)}d.store=null}}if(a){a=Ext.data.StoreManager.lookup(a);d.mon(a,{scope:d,datachanged:d.onDataChanged,add:d.onAdd,remove:d.onRemove,update:d.onUpdate,clear:d.refresh});if(d.loadMask&&d.loadMask.bindStore){if(Ext.Array.contains(a.alias,"store.node")){c=this.ownerCt.store}else{c=a}d.loadMask.bindStore(c)}}d.viewReady=false;d.store=a;d.getSelectionModel().bind(a);if(a){if(b&&d.deferInitialRefresh){Ext.Function.defer(function(){if(!d.isDestroyed){d.refresh(true)}},1)}else{d.refresh(true)}}},onDataChanged:function(){if(this.blockRefresh!==true){this.refresh.apply(this,arguments)}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var b=[],a=this.selModel.getSelection(),d=a.length,c=0;for(;c<d;c++){b.push(this.getNode(a[c]))}return b},getRecords:function(c){var b=[],d=0,a=c.length,e=this.store.data;for(;d<a;d++){b[b.length]=e.getByKey(c[d].viewRecordId)}return b},getRecord:function(a){return this.store.data.getByKey(Ext.getDom(a).viewRecordId)},isSelected:function(b){var a=this.getRecord(b);return this.selModel.isSelected(a)},select:function(b,c,a){this.selModel.select(b,c,a)},deselect:function(b,a){this.selModel.deselect(b,a)},getNode:function(a){if(!this.rendered){return null}if(Ext.isString(a)){return document.getElementById(a)}if(Ext.isNumber(a)){return this.all.elements[a]}if(a instanceof Ext.data.Model){return this.getNodeByRecord(a)}return a},getNodeByRecord:function(a){var c=this.all.elements,d=c.length,b=0;for(;b<d;b++){if(c[b].viewRecordId===a.internalId){return c[b]}}return null},getNodes:function(e,a){var d=this.all.elements,b=[],c;e=e||0;a=!Ext.isDefined(a)?Math.max(d.length-1,0):a;if(e<=a){for(c=e;c<=a&&d[c];c++){b.push(d[c])}}else{for(c=e;c>=a&&d[c];c--){b.push(d[c])}}return b},indexOf:function(a){a=this.getNode(a);if(Ext.isNumber(a.viewIndex)){return a.viewIndex}return this.all.indexOf(a)},onDestroy:function(){var a=this;a.all.clear();a.callParent();a.bindStore(null);a.selModel.destroy()},onItemSelect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).addCls(this.selectedItemCls)}},onItemDeselect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector}},function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(a,b,d){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var c=this.getSelectionModel();return c.select.apply(c,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var a=this.getSelectionModel();return a.deselectAll()}})})});Ext.define("Ext.Action",{constructor:function(a){this.initialConfig=a;this.itemId=a.itemId=(a.itemId||a.id||Ext.id());this.items=[]},isAction:true,setText:function(a){this.initialConfig.text=a;this.callEach("setText",[a])},getText:function(){return this.initialConfig.text},setIconCls:function(a){this.initialConfig.iconCls=a;this.callEach("setIconCls",[a])},getIconCls:function(){return this.initialConfig.iconCls},setDisabled:function(a){this.initialConfig.disabled=a;this.callEach("setDisabled",[a])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(a){this.initialConfig.hidden=a;this.callEach("setVisible",[!a])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(b,a){this.initialConfig.handler=b;this.initialConfig.scope=a;this.callEach("setHandler",[b,a])},each:function(b,a){Ext.each(this.items,b,a)},callEach:function(e,c){var b=this.items,d=0,a=b.length;for(;d<a;d++){b[d][e].apply(b[d],c)}},addComponent:function(a){this.items.push(a);a.on("destroy",this.removeComponent,this)},removeComponent:function(a){Ext.Array.remove(this.items,a)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||Ext.global,arguments)}});Ext.define("Ext.layout.component.Editor",{alias:["layout.editor"],extend:"Ext.layout.component.Component",onLayout:function(d,c){var e=this,b=e.owner,a=b.autoSize;if(a===true){a={width:"field",height:"field"}}if(a){d=e.getDimension(b,a.width,"Width",d);c=e.getDimension(b,a.height,"Height",c)}e.setTargetSize(d,c);b.field.setSize(d,c)},getDimension:function(a,b,c,e){var d="get"+c;switch(b){case"boundEl":return a.boundEl[d]();case"field":return a.field[d]();default:return e}}});Ext.define("Ext.Editor",{extend:"Ext.Component",alias:"widget.editor",requires:["Ext.layout.component.Editor"],componentLayout:"editor",allowBlur:true,revertInvalid:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,hidden:true,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var a=this,b=a.field=Ext.ComponentManager.create(a.field,"textfield");Ext.apply(b,{inEditor:true,msgTarget:b.msgTarget=="title"?"title":"qtip"});a.mon(b,{scope:a,blur:{fn:a.onBlur,delay:1},specialkey:a.onSpecialKey});if(b.grow){a.mon(b,"autosize",a.onAutoSize,a,{delay:1})}a.floating={constrain:a.constrain};a.callParent(arguments);a.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onAutoSize:function(){this.doComponentLayout()},onRender:function(b,a){var c=this,e=c.field,d=e.inputEl;c.callParent(arguments);e.render(c.el);if(d){d.dom.name="";if(c.swallowKeys){d.swallowEvent(["keypress","keydown"])}}},onSpecialKey:function(g,e){var d=this,b=e.getKey(),a=d.completeOnEnter&&b==e.ENTER,c=d.cancelOnEsc&&b==e.ESC;if(a||c){e.stopEvent();Ext.defer(function(){if(a){d.completeEdit()}else{d.cancelEdit()}if(g.triggerBlur){g.triggerBlur()}},10)}this.fireEvent("specialkey",this,g,e)},startEdit:function(a,c){var b=this,d=b.field;b.completeEdit();b.boundEl=Ext.get(a);c=Ext.isDefined(c)?c:b.boundEl.dom.innerHTML;if(!b.rendered){b.render(b.parentEl||document.body)}if(b.fireEvent("beforestartedit",b,b.boundEl,c)!==false){b.startValue=c;b.show();d.reset();d.setValue(c);b.realign(true);d.focus(false,10);if(d.autoSize){d.autoSize()}b.editing=true}},realign:function(a){var b=this;if(a===true){b.doComponentLayout()}b.alignTo(b.boundEl,b.alignment,b.offsets)},completeEdit:function(a){var b=this,d=b.field,c;if(!b.editing){return}if(d.assertValue){d.assertValue()}c=b.getValue();if(!d.isValid()){if(b.revertInvalid!==false){b.cancelEdit(a)}return}if(String(c)===String(b.startValue)&&b.ignoreNoChange){b.hideEdit(a);return}if(b.fireEvent("beforecomplete",b,c,b.startValue)!==false){c=b.getValue();if(b.updateEl&&b.boundEl){b.boundEl.update(c)}b.hideEdit(a);b.fireEvent("complete",b,c,b.startValue)}},onShow:function(){var a=this;a.callParent(arguments);if(a.hideEl!==false){a.boundEl.hide()}a.fireEvent("startedit",a.boundEl,a.startValue)},cancelEdit:function(a){var c=this,b=c.startValue,d;if(c.editing){d=c.getValue();c.setValue(b);c.hideEdit(a);c.fireEvent("canceledit",c,d,b)}},hideEdit:function(a){if(a!==true){this.editing=false;this.hide()}},onBlur:function(){var a=this;if(a.allowBlur===true&&a.editing&&a.selectSameEditor!==true){a.completeEdit()}},onHide:function(){var a=this,b=a.field;if(a.editing){a.completeEdit();return}b.blur();if(b.collapse){b.collapse()}if(a.hideEl!==false){a.boundEl.show()}a.callParent(arguments)},setValue:function(a){this.field.setValue(a)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){var a=this;Ext.destroy(a.field);delete a.field;delete a.parentEl;delete a.boundEl;a.callParent(arguments)}});Ext.define("Ext.Img",{extend:"Ext.Component",alias:["widget.image","widget.imagecomponent"],src:"",getElConfig:function(){return{tag:"img",src:this.src}},initRenderTpl:Ext.emptyFn,setSrc:function(c){var b=this,a=b.el;b.src=c;if(a){a.dom.src=c}}});Ext.define("Ext.Layer",{uses:["Ext.Shadow"],statics:{shims:[]},extend:"Ext.Element",constructor:function(b,a){b=b||{};var c=this,d=Ext.DomHelper,g=b.parentEl,e=g?Ext.getDom(g):document.body,h=b.hideMode;if(a){c.dom=Ext.getDom(a)}if(!c.dom){c.dom=d.append(e,b.dh||{tag:"div",cls:Ext.baseCSSPrefix+"layer"})}else{c.addCls(Ext.baseCSSPrefix+"layer");if(!c.dom.parentNode){e.appendChild(c.dom)}}if(b.cls){c.addCls(b.cls)}c.constrain=b.constrain!==false;if(h){c.setVisibilityMode(Ext.Element[h.toUpperCase()]);if(c.visibilityMode==Ext.Element.ASCLASS){c.visibilityCls=b.visibilityCls}}else{if(b.useDisplay){c.setVisibilityMode(Ext.Element.DISPLAY)}else{c.setVisibilityMode(Ext.Element.VISIBILITY)}}if(b.id){c.id=c.dom.id=b.id}else{c.id=Ext.id(c.dom)}c.position("absolute");if(b.shadow){c.shadowOffset=b.shadowOffset||4;c.shadow=Ext.create("Ext.Shadow",{offset:c.shadowOffset,mode:b.shadow});c.disableShadow()}else{c.shadowOffset=0}c.useShim=b.shim!==false&&Ext.useShims;if(b.hidden===true){c.hide()}else{c.show()}},getZIndex:function(){return parseInt((this.getShim()||this).getStyle("z-index"),10)},getShim:function(){var b=this,c,a;if(!b.useShim){return null}if(!b.shim){c=b.self.shims.shift();if(!c){c=b.createShim();c.enableDisplayMode("block");c.hide()}a=b.dom.parentNode;if(c.dom.parentNode!=a){a.insertBefore(c.dom,b.dom)}b.shim=c}return b.shim},hideShim:function(){var a=this;if(a.shim){a.shim.setDisplayed(false);a.self.shims.push(a.shim);delete a.shim}},disableShadow:function(){var a=this;if(a.shadow&&!a.shadowDisabled){a.shadowDisabled=true;a.shadow.hide();a.lastShadowOffset=a.shadowOffset;a.shadowOffset=0}},enableShadow:function(a){var b=this;if(b.shadow&&b.shadowDisabled){b.shadowDisabled=false;b.shadowOffset=b.lastShadowOffset;delete b.lastShadowOffset;if(a){b.sync(true)}}},sync:function(b){var k=this,p=k.shadow,j,e,a;if(!k.updating&&k.isVisible()&&(p||k.useShim)){var d=k.getShim(),c=k.getLeft(true),q=k.getTop(true),n=k.dom.offsetWidth,g=k.dom.offsetHeight,m;if(p&&!k.shadowDisabled){if(b&&!p.isVisible()){p.show(k)}else{p.realign(c,q,n,g)}if(d){m=d.getStyle("z-index");if(m>k.zindex){k.shim.setStyle("z-index",k.zindex-2)}d.show();if(p.isVisible()){j=p.el.getXY();e=d.dom.style;a=p.el.getSize();if(Ext.supports.CSS3BoxShadow){a.height+=6;a.width+=4;j[0]-=2;j[1]-=4}e.left=(j[0])+"px";e.top=(j[1])+"px";e.width=(a.width)+"px";e.height=(a.height)+"px"}else{d.setSize(n,g);d.setLeftTop(c,q)}}}else{if(d){m=d.getStyle("z-index");if(m>k.zindex){k.shim.setStyle("z-index",k.zindex-2)}d.show();d.setSize(n,g);d.setLeftTop(c,q)}}}return k},remove:function(){this.hideUnders();this.callParent()},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var g=Ext.Element.getViewWidth(),b=Ext.Element.getViewHeight(),n=Ext.getDoc().getScroll(),m=this.getXY(),j=m[0],e=m[1],a=this.shadowOffset,k=this.dom.offsetWidth+a,c=this.dom.offsetHeight+a,d=false;if((j+k)>g+n.left){j=g-k-a;d=true}if((e+c)>b+n.top){e=b-c-a;d=true}if(j<n.left){j=n.left;d=true}if(e<n.top){e=n.top;d=true}if(d){Ext.Layer.superclass.setXY.call(this,[j,e]);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},setVisible:function(e,b,d,h,g){var c=this,a;a=function(){if(e){c.sync(true)}if(h){h()}};if(!e){c.hideUnders(true)}c.callParent([e,b,d,h,g]);if(!b){a()}return c},beforeFx:function(){this.beforeAction();return this.callParent(arguments)},afterFx:function(){this.callParent(arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(a){this.callParent(arguments);return this.sync()},setTop:function(a){this.callParent(arguments);return this.sync()},setLeftTop:function(b,a){this.callParent(arguments);return this.sync()},setXY:function(d,a,c,g,e){var b=this;g=b.createCB(g);b.fixDisplay();b.beforeAction();b.callParent([d,a,c,g,e]);if(!a){g()}return b},createCB:function(c){var a=this,b=a.shadow&&a.shadow.isVisible();return function(){a.constrainXY();a.sync(b);if(c){c()}}},setX:function(a,b,c,e,d){this.setXY([a,this.getY()],b,c,e,d);return this},setY:function(e,a,b,d,c){this.setXY([this.getX(),e],a,b,d,c);return this},setSize:function(a,c,b,e,j,g){var d=this;j=d.createCB(j);d.beforeAction();d.callParent([a,c,b,e,j,g]);if(!b){j()}return d},setWidth:function(a,b,d,g,e){var c=this;g=c.createCB(g);c.beforeAction();c.callParent([a,b,d,g,e]);if(!b){g()}return c},setHeight:function(b,a,d,g,e){var c=this;g=c.createCB(g);c.beforeAction();c.callParent([b,a,d,g,e]);if(!a){g()}return c},setBounds:function(h,g,a,k,b,c,j,d){var e=this;j=e.createCB(j);e.beforeAction();if(!b){Ext.Layer.superclass.setXY.call(e,[h,g]);Ext.Layer.superclass.setSize.call(e,a,k);j()}else{e.callParent([h,g,a,k,b,c,j,d])}return e},setZIndex:function(a){var b=this;b.zindex=a;if(b.getShim()){b.shim.setStyle("z-index",a++)}if(b.shadow){b.shadow.setZIndex(a++)}return b.setStyle("z-index",a)},setOpacity:function(a){if(this.shadow){this.shadow.setOpacity(a)}return this.callParent(arguments)}});Ext.define("Ext.layout.component.ProgressBar",{alias:["layout.progressbar"],extend:"Ext.layout.component.Component",type:"progressbar",onLayout:function(d,b){var e=this,a=e.owner,c=a.textEl;e.setElementSize(a.el,d,b);c.setWidth(a.el.getWidth(true));e.callParent([d,b]);a.updateProgress(a.value)}});Ext.define("Ext.ProgressBar",{extend:"Ext.Component",alias:"widget.progressbar",requires:["Ext.Template","Ext.CompositeElement","Ext.TaskManager","Ext.layout.component.ProgressBar"],uses:["Ext.fx.Anim"],baseCls:Ext.baseCSSPrefix+"progress",config:{animate:false,text:""},waitTimer:null,renderTpl:['<div class="{baseCls}-text {baseCls}-text-back">',"<div>&#160;</div>","</div>",'<div id="{id}-bar" class="{baseCls}-bar">','<div class="{baseCls}-text">',"<div>&#160;</div>","</div>","</div>"],componentLayout:"progressbar",initComponent:function(){this.callParent();this.addChildEls("bar");this.addEvents("update")},afterRender:function(){var a=this;a.textEl=a.textEl?Ext.get(a.textEl):a.el.select("."+a.baseCls+"-text");a.callParent(arguments);if(a.value){a.updateProgress(a.value,a.text)}else{a.updateText(a.text)}},updateProgress:function(d,e,a){var c=this,b;c.value=d||0;if(e){c.updateText(e)}if(c.rendered&&!c.isDestroyed){if(c.isVisible(true)){b=Math.floor(c.value*c.el.getWidth(true));if(Ext.isForcedBorderBox){b+=c.bar.getBorderWidth("lr")}if(a===true||(a!==false&&c.animate)){c.bar.stopAnimation();c.bar.animate(Ext.apply({to:{width:b+"px"}},c.animate))}else{c.bar.setWidth(b)}}else{c.doComponentLayout()}}c.fireEvent("update",c,c.value,e);return c},updateText:function(b){var a=this;a.text=b;if(a.rendered){a.textEl.update(a.text)}return a},applyText:function(a){this.updateText(a)},wait:function(b){var a=this;if(!a.waitTimer){scope=a;b=b||{};a.updateText(b.text);a.waitTimer=Ext.TaskManager.start({run:function(c){var d=b.increment||10;c-=1;a.updateProgress(((((c+d)%d)+1)*(100/d))*0.01,null,b.animate)},interval:b.interval||1000,duration:b.duration,onStop:function(){if(b.fn){b.fn.apply(b.scope||a)}a.reset()},scope:scope})}return a},isWaiting:function(){return this.waitTimer!==null},reset:function(a){var b=this;b.updateProgress(0);b.clearTimer();if(a===true){b.hide()}return b},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},onDestroy:function(){var a=this;a.clearTimer();if(a.rendered){if(a.textEl.isComposite){a.textEl.clear()}Ext.destroyMembers(a,"textEl","progressBar")}a.callParent()}});Ext.define("Ext.ShadowPool",{singleton:true,requires:["Ext.DomHelper"],markup:function(){if(Ext.supports.CSS3BoxShadow){return'<div class="'+Ext.baseCSSPrefix+'css-shadow" role="presentation"></div>'}else{if(Ext.isIE){return'<div class="'+Ext.baseCSSPrefix+'ie-shadow" role="presentation"></div>'}else{return'<div class="'+Ext.baseCSSPrefix+'frame-shadow" role="presentation"><div class="xst" role="presentation"><div class="xstl" role="presentation"></div><div class="xstc" role="presentation"></div><div class="xstr" role="presentation"></div></div><div class="xsc" role="presentation"><div class="xsml" role="presentation"></div><div class="xsmc" role="presentation"></div><div class="xsmr" role="presentation"></div></div><div class="xsb" role="presentation"><div class="xsbl" role="presentation"></div><div class="xsbc" role="presentation"></div><div class="xsbr" role="presentation"></div></div></div>'}}}(),shadows:[],pull:function(){var a=this.shadows.shift();if(!a){a=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,this.markup));a.autoBoxAdjust=false}return a},push:function(a){this.shadows.push(a)},reset:function(){Ext.Array.each(this.shadows,function(a){a.remove()});this.shadows=[]}});Ext.define("Ext.Shadow",{requires:["Ext.ShadowPool"],constructor:function(b){var c=this,d={h:0},e,a;Ext.apply(c,b);if(!Ext.isString(c.mode)){c.mode=c.defaultMode}e=c.offset;a=Math.floor(e/2);c.opacity=50;switch(c.mode.toLowerCase()){case"drop":if(Ext.supports.CSS3BoxShadow){d.w=d.h=-e;d.l=d.t=e}else{d.w=0;d.l=d.t=e;d.t-=1;if(Ext.isIE){d.l-=e+a;d.t-=e+a;d.w-=a;d.h-=a;d.t+=1}}break;case"sides":if(Ext.supports.CSS3BoxShadow){d.h-=e;d.t=e;d.l=d.w=0}else{d.w=(e*2);d.l=-e;d.t=e-1;if(Ext.isIE){d.l-=(e-a);d.t-=e+a;d.l+=1;d.w-=(e-a)*2;d.w-=a+1;d.h-=1}}break;case"frame":if(Ext.supports.CSS3BoxShadow){d.l=d.w=d.t=0}else{d.w=d.h=(e*2);d.l=d.t=-e;d.t+=1;d.h-=2;if(Ext.isIE){d.l-=(e-a);d.t-=(e-a);d.l+=1;d.w-=(e+a+1);d.h-=(e+a);d.h+=1}break}}c.adjusts=d},offset:4,defaultMode:"drop",show:function(c){var b=this,a;c=Ext.get(c);if(!b.el){b.el=Ext.ShadowPool.pull();if(b.el.dom.nextSibling!=c.dom){b.el.insertBefore(c)}}a=(parseInt(c.getStyle("z-index"),10)-1)||0;b.el.setStyle("z-index",b.zIndex||a);if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){b.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(b.offset)+")"}b.realign(c.getLeft(true),c.getTop(true),c.dom.offsetWidth,c.dom.offsetHeight);b.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(b,r,n,h){if(!this.el){return}var a=this.adjusts,k=this.el.dom,m=k.style,c,g,p,e,j,q;m.left=(b+a.l)+"px";m.top=(r+a.t)+"px";c=Math.max(n+a.w,0);g=Math.max(h+a.h,0);j=c+"px";q=g+"px";if(m.width!=j||m.height!=q){m.width=j;m.height=q;if(Ext.supports.CSS3BoxShadow){m.boxShadow="0 0 "+this.offset+"px 0 #888"}else{if(!Ext.isIE){p=k.childNodes;e=Math.max(0,(c-12))+"px";p[0].childNodes[1].style.width=e;p[1].childNodes[1].style.width=e;p[2].childNodes[1].style.width=e;p[1].style.height=Math.max(0,(g-12))+"px"}}}},hide:function(){var a=this;if(a.el){a.el.dom.style.display="none";Ext.ShadowPool.push(a.el);delete a.el}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle("z-index",a)}},setOpacity:function(a){if(this.el){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;this.el.setOpacity(a)}}});Ext.define("Ext.button.Split",{alias:"widget.splitbutton",extend:"Ext.button.Button",alternateClassName:"Ext.SplitButton",arrowCls:"split",split:true,initComponent:function(){this.callParent();this.addEvents("arrowclick")},setArrowHandler:function(b,a){this.arrowHandler=b;this.scope=a},onClick:function(c,a){var b=this;c.preventDefault();if(!b.disabled){if(b.overMenuTrigger){b.maybeShowMenu();b.fireEvent("arrowclick",b,c);if(b.arrowHandler){b.arrowHandler.call(b.scope||b,b,c)}}else{b.doToggle();b.fireHandler()}}}});Ext.define("Ext.button.Cycle",{alias:"widget.cycle",extend:"Ext.button.Split",alternateClassName:"Ext.CycleButton",getButtonText:function(b){var a=this,c="";if(b&&a.showText===true){if(a.prependText){c+=a.prependText}c+=b.text;return c}return a.text},setActiveItem:function(c,a){var b=this;if(!Ext.isObject(c)){c=b.menu.getComponent(c)}if(c){if(!b.rendered){b.text=b.getButtonText(c);b.iconCls=c.iconCls}else{b.setText(b.getButtonText(c));b.setIconCls(c.iconCls)}b.activeItem=c;if(!c.checked){c.setChecked(true,false)}if(b.forceIcon){b.setIconCls(b.forceIcon)}if(!a){b.fireEvent("change",b,c)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){var c=this,b=0,a;c.addEvents("change");if(c.changeHandler){c.on("change",c.changeHandler,c.scope||c);delete c.changeHandler}a=(c.menu.items||[]).concat(c.items||[]);c.menu=Ext.applyIf({cls:Ext.baseCSSPrefix+"cycle-menu",items:[]},c.menu);Ext.each(a,function(e,d){e=Ext.applyIf({group:c.id,itemIndex:d,checkHandler:c.checkHandler,scope:c,checked:e.checked||false},e);c.menu.items.push(e);if(e.checked){b=d}});c.itemCount=c.menu.items.length;c.callParent(arguments);c.on("click",c.toggleSelected,c);c.setActiveItem(b,c);if(c.width&&c.showText){c.addCls(Ext.baseCSSPrefix+"cycle-fixed-width")}},checkHandler:function(a,b){if(b){this.setActiveItem(a)}},toggleSelected:function(){var c=this,a=c.menu,b;b=c.activeItem.next(":not([disabled])")||a.items.getAt(0);b.setChecked(true)}});Ext.define("Ext.container.ButtonGroup",{extend:"Ext.panel.Panel",alias:"widget.buttongroup",alternateClassName:"Ext.ButtonGroup",baseCls:Ext.baseCSSPrefix+"btn-group",layout:{type:"table"},defaultType:"button",frame:true,frameHeader:false,internalDefaults:{removeMode:"container",hideParent:true},initComponent:function(){var a=this,b=a.columns;a.noTitleCls=a.baseCls+"-notitle";if(b){a.layout=Ext.apply({},{columns:b},a.layout)}if(!a.title){a.addCls(a.noTitleCls)}a.callParent(arguments)},afterLayout:function(){var b=this;b.callParent(arguments);if(b.layout.table&&(Ext.isIEQuirks||Ext.isIE6)&&!b.width){var a=b.getTargetEl();a.setWidth(b.layout.table.offsetWidth+a.getPadding("lr"))}if(Ext.isIE7){b.el.repaint()}},afterRender:function(){var a=this;if(a.header){delete a.header.items.items[0].flex;a.suspendLayout=true;a.header.insert(1,{xtype:"component",ui:a.ui,flex:1});a.header.insert(0,{xtype:"component",ui:a.ui,flex:1});a.suspendLayout=false}a.callParent(arguments)},onBeforeAdd:function(a){if(a.is("button")){a.ui=a.ui+"-toolbar"}this.callParent(arguments)},applyDefaults:function(b){if(!Ext.isString(b)){b=this.callParent(arguments);var a=this.internalDefaults;if(b.events){Ext.applyIf(b.initialConfig,a);Ext.apply(b,a)}else{Ext.applyIf(b,a)}}return b}});Ext.define("Ext.container.Viewport",{extend:"Ext.container.Container",alias:"widget.viewport",requires:["Ext.EventManager"],alternateClassName:"Ext.Viewport",isViewport:true,ariaRole:"application",initComponent:function(){var c=this,a=Ext.fly(document.body.parentNode),b;c.callParent(arguments);a.addCls(Ext.baseCSSPrefix+"viewport");if(c.autoScroll){a.setStyle("overflow","auto")}c.el=b=Ext.getBody();b.setHeight=Ext.emptyFn;b.setWidth=Ext.emptyFn;b.setSize=Ext.emptyFn;b.dom.scroll="no";c.allowDomMove=false;Ext.EventManager.onWindowResize(c.fireResize,c);c.renderTo=c.el;c.width=Ext.Element.getViewportWidth();c.height=Ext.Element.getViewportHeight()},fireResize:function(a,b){this.setSize(a,b)}});Ext.define("Ext.dd.DDTarget",{extend:"Ext.dd.DragDrop",constructor:function(c,a,b){if(c){this.initTarget(c,a,b)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}});Ext.define("Ext.dd.DragTracker",{uses:["Ext.util.Region"],mixins:{observable:"Ext.util.Observable"},active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(a){Ext.apply(this,a);this.addEvents("mouseover","mouseout","mousedown","mouseup","mousemove","beforedragstart","dragstart","dragend","drag");this.dragRegion=Ext.create("Ext.util.Region",0,0,0,0);if(this.el){this.initEl(this.el)}this.mixins.observable.constructor.call(this);if(this.disabled){this.disable()}},initEl:function(a){this.el=Ext.get(a);this.handle=Ext.get(this.delegate);this.delegate=this.handle?undefined:this.delegate;if(!this.handle){this.handle=this.el}this.mon(this.handle,{mousedown:this.onMouseDown,delegate:this.delegate,scope:this});if(this.trackOver||this.overCls){this.mon(this.handle,{mouseover:this.onMouseOver,mouseout:this.onMouseOut,delegate:this.delegate,scope:this})}},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){this.clearListeners();delete this.el},onMouseOver:function(c,b){var a=this;if(!a.disabled){if(Ext.EventManager.contains(c)||a.delegate){a.mouseIsOut=false;if(a.overCls){a.el.addCls(a.overCls)}a.fireEvent("mouseover",a,c,a.delegate?c.getTarget(a.delegate,b):a.handle)}}},onMouseOut:function(a){if(this.mouseIsDown){this.mouseIsOut=true}else{if(this.overCls){this.el.removeCls(this.overCls)}this.fireEvent("mouseout",this,a)}},onMouseDown:function(b,a){if(this.disabled||b.dragTracked){return}this.dragTarget=this.delegate?a:this.handle.dom;this.startXY=this.lastXY=b.getXY();this.startRegion=Ext.fly(this.dragTarget).getRegion();if(this.fireEvent("mousedown",this,b)===false||this.fireEvent("beforedragstart",this,b)===false||this.onBeforeStart(b)===false){return}this.mouseIsDown=true;b.dragTracked=true;if(this.preventDefault!==false){b.preventDefault()}Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect});if(this.autoStart){this.timer=Ext.defer(this.triggerStart,this.autoStart===true?1000:this.autoStart,this,[b])}},onMouseMove:function(d,c){if(this.active&&Ext.isIE&&!d.browserEvent.button){d.preventDefault();this.onMouseUp(d);return}d.preventDefault();var b=d.getXY(),a=this.startXY;this.lastXY=b;if(!this.active){if(Math.max(Math.abs(a[0]-b[0]),Math.abs(a[1]-b[1]))>this.tolerance){this.triggerStart(d)}else{return}}if(this.fireEvent("mousemove",this,d)===false){this.onMouseUp(d)}else{this.onDrag(d);this.fireEvent("drag",this,d)}},onMouseUp:function(a){this.mouseIsDown=false;if(this.mouseIsOut){this.mouseIsOut=false;this.onMouseOut(a)}a.preventDefault();this.fireEvent("mouseup",this,a);this.endDrag(a)},endDrag:function(c){var b=Ext.getDoc(),a=this.active;b.un("mousemove",this.onMouseMove,this);b.un("mouseup",this.onMouseUp,this);b.un("selectstart",this.stopSelect,this);this.clearStart();this.active=false;if(a){this.onEnd(c);this.fireEvent("dragend",this,c)}delete this._constrainRegion;delete Ext.EventObject.dragTracked},triggerStart:function(a){this.clearStart();this.active=true;this.onStart(a);this.fireEvent("dragstart",this,a)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){if(this.constrainTo){if(this.constrainTo instanceof Ext.util.Region){return this.constrainTo}if(!this._constrainRegion){this._constrainRegion=Ext.fly(this.constrainTo).getViewRegion()}}else{if(!this._constrainRegion){this._constrainRegion=this.getDragCt().getViewRegion()}}return this._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(c){var b=this.getXY(c),a=this.startXY;return[b[0]-a[0],b[1]-a[1]]},constrainModes:{point:function(b,d){var c=b.dragRegion,a=b.getConstrainRegion();if(!a){return d}c.x=c.left=c[0]=c.right=d[0];c.y=c.top=c[1]=c.bottom=d[1];c.constrainTo(a);return[c.left,c.top]},dragTarget:function(c,g){var b=c.startXY,e=c.startRegion.copy(),a=c.getConstrainRegion(),d;if(!a){return g}e.translateBy(g[0]-b[0],g[1]-b[1]);if(e.right>a.right){g[0]+=d=(a.right-e.right);e.left+=d}if(e.left<a.left){g[0]+=(a.left-e.left)}if(e.bottom>a.bottom){g[1]+=d=(a.bottom-e.bottom);e.top+=d}if(e.top<a.top){g[1]+=(a.top-e.top)}return g}}});Ext.define("Ext.dd.DragZone",{extend:"Ext.dd.DragSource",constructor:function(b,a){this.callParent([b,a]);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(a,b);return true},afterRepair:function(){var a=this;if(Ext.enableFx){Ext.fly(a.dragData.ddel).highlight(a.repairHighlightColor)}a.dragging=false},getRepairXY:function(a){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){this.callParent();if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.define("Ext.dd.ScrollManager",{singleton:true,requires:["Ext.dd.DragDropManager"],constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this);a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this);this.doScroll=Ext.Function.bind(this.doScroll,this);this.ddmInstance=a;this.els={};this.dragEl=null;this.proc={}},onStop:function(a){var b=Ext.dd.ScrollManager;b.dragEl=null;b.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){if(this.ddmInstance.dragCurrent){var a=this.proc,b=a.el,c=a.el.ddScrollConfig,d=c?c.increment:this.increment;if(!this.animate){if(b.scroll(a.dir,d)){this.triggerRefresh()}}else{b.scroll(a.dir,d,true,this.animDuration,this.triggerRefresh)}}},clearProc:function(){var a=this.proc;if(a.id){clearInterval(a.id)}a.id=0;a.el=null;a.dir=""},startProc:function(b,a){this.clearProc();this.proc.el=b;this.proc.dir=a;var d=b.ddScrollConfig?b.ddScrollConfig.ddGroup:undefined,c=(b.ddScrollConfig&&b.ddScrollConfig.frequency)?b.ddScrollConfig.frequency:this.frequency;if(d===undefined||this.ddmInstance.dragCurrent.ddGroup==d){this.proc.id=setInterval(this.doScroll,c)}},onFire:function(h,m){if(m||!this.ddmInstance.dragCurrent){return}if(!this.dragEl||this.dragEl!=this.ddmInstance.dragCurrent){this.dragEl=this.ddmInstance.dragCurrent;this.refreshCache()}var n=h.getXY(),p=h.getPoint(),j=this.proc,g=this.els;for(var b in g){var d=g[b],a=d._region;var k=d.ddScrollConfig?d.ddScrollConfig:this;if(a&&a.contains(p)&&d.isScrollable()){if(a.bottom-p.y<=k.vthresh){if(j.el!=d){this.startProc(d,"down")}return}else{if(a.right-p.x<=k.hthresh){if(j.el!=d){this.startProc(d,"left")}return}else{if(p.y-a.top<=k.vthresh){if(j.el!=d){this.startProc(d,"up")}return}else{if(p.x-a.left<=k.hthresh){if(j.el!=d){this.startProc(d,"right")}return}}}}}}this.clearProc()},register:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.register(c[b])}}else{c=Ext.get(c);this.els[c.id]=c}},unregister:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.unregister(c[b])}}else{c=Ext.get(c);delete this.els[c.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var a=this.els,b;for(b in a){if(typeof a[b]=="object"){a[b]._region=a[b].getRegion()}}}});Ext.define("Ext.dd.DropTarget",{extend:"Ext.dd.DDTarget",requires:["Ext.dd.ScrollManager"],constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:true}])},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(a,c,b){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(a,c,b){return this.dropAllowed},notifyOut:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(a,c,b){return false},destroy:function(){this.callParent();if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.define("Ext.dd.Registry",{singleton:true,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(b,a){if(typeof b=="string"){return b}var c=b.id;if(!c&&a!==false){c="extdd-"+(++this.autoIdSeed);b.id=c}return c},register:function(d,e){e=e||{};if(typeof d=="string"){d=document.getElementById(d)}e.ddel=d;this.elements[this.getId(d)]=e;if(e.isHandle!==false){this.handles[e.ddel.id]=e}if(e.handles){var c=e.handles;for(var b=0,a=c.length;b<a;b++){this.handles[this.getId(c[b])]=e}}},unregister:function(d){var g=this.getId(d,false);var e=this.elements[g];if(e){delete this.elements[g];if(e.handles){var c=e.handles;for(var b=0,a=c.length;b<a;b++){delete this.handles[this.getId(c[b],false)]}}}},getHandle:function(a){if(typeof a!="string"){a=a.id}return this.handles[a]},getHandleFromEvent:function(b){var a=b.getTarget();return a?this.handles[a.id]:null},getTarget:function(a){if(typeof a!="string"){a=a.id}return this.elements[a]},getTargetFromEvent:function(b){var a=b.getTarget();return a?this.elements[a.id]||this.handles[a.id]:null}});Ext.define("Ext.dd.DropZone",{extend:"Ext.dd.DropTarget",requires:["Ext.dd.Registry"],getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(d,a,c,b){},onNodeOver:function(d,a,c,b){return this.dropAllowed},onNodeOut:function(d,a,c,b){},onNodeDrop:function(d,a,c,b){return false},onContainerOver:function(a,c,b){return this.dropNotAllowed},onContainerDrop:function(a,c,b){return false},notifyEnter:function(a,c,b){return this.dropNotAllowed},notifyOver:function(a,c,b){var d=this.getTargetFromEvent(c);if(!d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}return this.onContainerOver(a,c,b)}if(this.lastOverNode!=d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b)}this.onNodeEnter(d,a,c,b);this.lastOverNode=d}return this.onNodeOver(d,a,c,b)},notifyOut:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}},notifyDrop:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}var d=this.getTargetFromEvent(c);return d?this.onNodeDrop(d,a,c,b):this.onContainerDrop(a,c,b)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.define("Ext.flash.Component",{extend:"Ext.Component",alternateClassName:"Ext.FlashComponent",alias:"widget.flash",flashVersion:"9.0.115",backgroundColor:"#ffffff",wmode:"opaque",swfWidth:"100%",swfHeight:"100%",expressInstall:false,renderTpl:['<div id="{swfId}"></div>'],initComponent:function(){this.callParent();this.addEvents("success","failure")},onRender:function(){var c=this,e,d,b,a=c.getSwfId();c.renderData.swfId=a;c.callParent(arguments);e=Ext.apply({allowScriptAccess:"always",bgcolor:c.backgroundColor,wmode:c.wmode},c.flashParams);d=Ext.apply({allowedDomain:document.location.hostname},c.flashVars);new swfobject.embedSWF(c.url,a,c.swfWidth,c.swfHeight,c.flashVersion,c.expressInstall?c.statics.EXPRESS_INSTALL_URL:b,d,e,c.flashAttributes,Ext.bind(c.swfCallback,c))},swfCallback:function(b){var a=this;if(b.success){a.swf=Ext.get(b.ref);a.onSuccess();a.fireEvent("success",a)}else{a.onFailure();a.fireEvent("failure",a)}},getSwfId:function(){return this.swfId||(this.swfId="extswf"+this.getAutoId())},onSuccess:function(){this.swf.setStyle("visibility","inherit")},onFailure:Ext.emptyFn,beforeDestroy:function(){var b=this,a=b.swf;if(a){swfobject.removeSWF(b.getSwfId());Ext.destroy(a);delete b.swf}b.callParent()},statics:{EXPRESS_INSTALL_URL:"http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf"}});Ext.define("Ext.form.action.Action",{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(a){if(a){Ext.apply(this,a)}var b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(a){this.response=a;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}return(this.result=this.handleResponse(a))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var c=this,a,b=c.form;return{success:c.onSuccess,failure:c.onFailure,scope:c,timeout:(this.timeout*1000)||(b.timeout*1000),upload:b.fileUpload?c.onSuccess:a}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}});Ext.define("Ext.form.action.Submit",{extend:"Ext.form.action.Action",alternateClassName:"Ext.form.Action.Submit",alias:"formaction.submit",type:"submit",run:function(){var a=this.form;if(this.clientValidation===false||a.isValid()){this.doSubmit()}else{this.failureType=Ext.form.action.Action.CLIENT_INVALID;a.afterAction(this,false)}},doSubmit:function(){var b,a=Ext.apply(this.createCallback(),{url:this.getUrl(),method:this.getMethod(),headers:this.headers});if(this.form.hasUpload()){b=a.form=this.buildForm();a.isUpload=true}else{a.params=this.getParams()}Ext.Ajax.request(a);if(b){Ext.removeNode(b)}},getParams:function(){var c=false,b=this.callParent(),a=this.form.getValues(c,c,this.submitEmptyText!==c);return Ext.apply({},a,b)},buildForm:function(){var c=[],d,e,b=this.form,h=this.getParams(),a=[];b.getFields().each(function(j){if(j.isFileUpload()){a.push(j)}});function g(j,k){c.push({tag:"input",type:"hidden",name:j,value:Ext.String.htmlEncode(k)})}Ext.iterate(h,function(j,k){if(Ext.isArray(k)){Ext.each(k,function(m){g(j,m)})}else{g(j,k)}});d={tag:"form",action:this.getUrl(),method:this.getMethod(),target:this.target||"_self",style:"display:none",cn:c};if(a.length){d.encoding=d.enctype="multipart/form-data"}e=Ext.DomHelper.append(Ext.getBody(),d);Ext.Array.each(a,function(j){if(j.rendered){e.appendChild(j.extractFileInput())}});return e},onSuccess:function(b){var c=this.form,d=true,a=this.processResponse(b);if(a!==true&&!a.success){if(a.errors){c.markInvalid(a.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;d=false}c.afterAction(this,d)},handleResponse:function(d){var h=this.form,e=h.errorReader,c,j,g,a,b;if(e){c=e.read(d);b=c.records;j=[];if(b){for(g=0,a=b.length;g<a;g++){j[g]=b[g].data}}if(j.length<1){j=null}return{success:c.success,errors:j}}return Ext.decode(d.responseText)}});Ext.define("Ext.util.ComponentDragger",{extend:"Ext.dd.DragTracker",autoStart:500,constructor:function(a,b){this.comp=a;this.initialConstrainTo=b.constrainTo;this.callParent([b])},onStart:function(c){var b=this,a=b.comp;this.startPosition=a.getPosition();if(a.ghost&&!a.liveDrag){b.proxy=a.ghost();b.dragTarget=b.proxy.header.el}if(b.constrain||b.constrainDelegate){b.constrainTo=b.calculateConstrainRegion()}},calculateConstrainRegion:function(){var d=this,a=d.comp,h=d.initialConstrainTo,e,g,b=a.el.shadow?a.el.shadow.offset:0;if(!(h instanceof Ext.util.Region)){h=Ext.fly(h).getViewRegion()}if(b){h.adjust(0,-b,-b,b)}if(!d.constrainDelegate){e=Ext.fly(d.dragTarget).getRegion();g=d.proxy?d.proxy.el.getRegion():a.el.getRegion();h.adjust(e.top-g.top,e.right-g.right,e.bottom-g.bottom,e.left-g.left)}return h},onDrag:function(c){var b=this,a=(b.proxy&&!b.comp.liveDrag)?b.proxy:b.comp,d=b.getOffset(b.constrain||b.constrainDelegate?"dragTarget":null);a.setPosition(b.startPosition[0]+d[0],b.startPosition[1]+d[1])},onEnd:function(a){if(this.proxy&&!this.comp.liveDrag){this.comp.unghost()}}});Ext.define("Ext.form.Labelable",{requires:["Ext.XTemplate"],labelableRenderTpl:['<tpl if="!hideLabel && !(!fieldLabel && hideEmptyLabel)">','<label id="{id}-labelEl"<tpl if="inputId"> for="{inputId}"</tpl> class="{labelCls}"','<tpl if="labelStyle"> style="{labelStyle}"</tpl>>','<tpl if="fieldLabel">{fieldLabel}{labelSeparator}</tpl>',"</label>","</tpl>",'<div class="{baseBodyCls} {fieldBodyCls}" id="{id}-bodyEl" role="presentation">{subTplMarkup}</div>','<div id="{id}-errorEl" class="{errorMsgCls}" style="display:none"></div>','<div class="{clearCls}" role="presentation"><!-- --></div>',{compiled:true,disableFormats:true}],activeErrorsTpl:['<tpl if="errors && errors.length">','<ul><tpl for="errors"><li<tpl if="xindex == xcount"> class="last"</tpl>>{.}</li></tpl></ul>',"</tpl>"],isFieldLabelable:true,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",fieldBodyCls:"",clearCls:Ext.baseCSSPrefix+"clear",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",initLabelable:function(){this.addCls(this.formItemCls);this.addEvents("errorchange")},getFieldLabel:function(){return this.fieldLabel||""},getLabelableRenderData:function(){var e=this,b=e.labelAlign,g=e.labelCls,d=e.labelClsExtra,c=e.labelPad,a;if(b==="top"){a="margin-bottom:"+c+"px;"}else{a="margin-right:"+c+"px;";if(Ext.isBorderBox){a+="width:"+e.labelWidth+"px;"}}return Ext.copyTo({inputId:e.getInputId(),fieldLabel:e.getFieldLabel(),labelCls:d?g+" "+d:g,labelStyle:a+(e.labelStyle||""),subTplMarkup:e.getSubTplMarkup()},e,"hideLabel,hideEmptyLabel,fieldBodyCls,baseBodyCls,errorMsgCls,clearCls,labelSeparator",true)},onLabelableRender:function(){this.addChildEls("labelEl","bodyEl","errorEl")},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.activeError=a;this.activeErrors=[a];this.renderActiveError()},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(a){this.activeErrors=a;this.activeError=this.getTpl("activeErrorsTpl").apply({errors:a});this.renderActiveError()},unsetActiveError:function(){delete this.activeError;delete this.activeErrors;this.renderActiveError()},renderActiveError:function(){var c=this,b=c.getActiveError(),a=!!b;if(b!==c.lastActiveError){c.fireEvent("errorchange",c,b);c.lastActiveError=b}if(c.rendered&&!c.isDestroyed&&!c.preventMark){c.el[a?"addCls":"removeCls"](c.invalidCls);c.getActionEl().dom.setAttribute("aria-invalid",a);c.errorEl.dom.innerHTML=b}},setFieldDefaults:function(b){var a=this;Ext.iterate(b,function(c,d){if(!a.hasOwnProperty(c)){a[c]=d}})},getBodyNaturalWidth:function(){return this.bodyEl.getWidth()}});Ext.define("Ext.form.field.Field",{isFormField:true,disabled:false,submitValue:true,validateOnChange:true,suspendCheckChange:0,initField:function(){this.addEvents("change","validitychange","dirtychange");this.initValue()},initValue:function(){var a=this;a.originalValue=a.lastValue=a.value;a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(b,a){return String(b)===String(a)},isEqualAsString:function(b,a){return String(Ext.value(b,""))===String(Ext.value(a,""))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue&&!a.isFileUpload()){b={};b[a.getName()]=""+a.getValue()}return b},getModelData:function(){var a=this,b=null;if(!a.disabled&&!a.isFileUpload()){b={};b[a.getName()]=a.getValue()}return b},reset:function(){var a=this;a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){if(!this.suspendCheckChange){var c=this,b=c.getValue(),a=c.lastValue;if(!c.isEqual(b,a)&&!c.isDestroyed){c.lastValue=b;c.fireEvent("change",c,b,a);c.onChange(b,a)}}},onChange:function(b,a){if(this.validateOnChange){this.validate()}this.checkDirty()},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.fireEvent("dirtychange",a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(a){return[]},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){var a=this,b=a.isValid();if(b!==a.wasValid){a.wasValid=b;a.fireEvent("validitychange",a,b)}return b},batchChanges:function(a){try{this.suspendCheckChange++;a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.define("Ext.layout.component.field.Field",{alias:["layout.field"],extend:"Ext.layout.component.Component",uses:["Ext.tip.QuickTip","Ext.util.TextMetrics"],type:"field",beforeLayout:function(b,a){var c=this;return c.callParent(arguments)||(!c.owner.preventMark&&c.activeError!==c.owner.getActiveError())},onLayout:function(a,p){var g=this,b=g.owner,e=g.getLabelStrategy(),n=g.getErrorStrategy(),k=Ext.isDefined,q=Ext.isNumber,j,h,m,c,d;j=g.lastComponentSize||{};if(!k(a)){a=j.width;if(a<0){a=d}}if(!k(p)){p=j.height;if(p<0){p=d}}h=!q(a);m=!q(p);c={autoWidth:h,autoHeight:m,width:h?b.getBodyNaturalWidth():a,height:p,setOuterWidth:false,insets:{top:0,right:0,bottom:0,left:0}};e.prepare(b,c);n.prepare(b,c);e.adjustHorizInsets(b,c);n.adjustHorizInsets(b,c);e.layoutHoriz(b,c);n.layoutHoriz(b,c);e.adjustVertInsets(b,c);n.adjustVertInsets(b,c);e.layoutVert(b,c);n.layoutVert(b,c);if(h&&m){g.setElementSize(b.el,(c.setOuterWidth?c.width:d),c.height)}else{g.setTargetSize((!h||c.setOuterWidth?c.width:d),c.height)}g.sizeBody(c);g.activeError=b.getActiveError()},onFocus:function(){this.getErrorStrategy().onFocus(this.owner)},sizeBody:function(j){var h=this,c=h.owner,d=j.insets,b=j.width,e=j.height,g=Ext.isNumber(b)?b-d.left-d.right:b,a=Ext.isNumber(e)?e-d.top-d.bottom:e;h.setElementSize(c.bodyEl,g,a);h.sizeBodyContents(g,a)},sizeBodyContents:Ext.emptyFn,getLabelStrategy:function(){var b=this,c=b.labelStrategies,a=b.owner.labelAlign;return c[a]||c.base},getErrorStrategy:function(){var c=this,a=c.owner,d=c.errorStrategies,b=a.msgTarget;return !a.preventMark&&Ext.isString(b)?(d[b]||d.elementId):d.none},labelStrategies:(function(){var b=Ext.applyIf,a=Ext.emptyFn,c={prepare:function(e,j){var g=e.labelCls+"-"+e.labelAlign,h=e.labelEl;if(h&&!h.hasCls(g)){h.addCls(g)}},adjustHorizInsets:a,adjustVertInsets:a,layoutHoriz:a,layoutVert:a},d=b({prepare:function(e,g){c.prepare(e,g);if(g.autoWidth){g.width+=(!e.labelEl?0:e.labelWidth+e.labelPad)}g.setOuterWidth=true},adjustHorizInsets:function(e,g){if(e.labelEl){g.insets.left+=e.labelWidth+e.labelPad}},layoutHoriz:function(e,h){var g=e.labelEl;if(g&&!e.isLabelSized&&!Ext.isBorderBox){g.setWidth(e.labelWidth);e.isLabelSized=true}}},c);return{base:c,top:b({adjustVertInsets:function(e,h){var g=e.labelEl;if(g){h.insets.top+=Ext.util.TextMetrics.measure(g,e.fieldLabel,h.width).height+g.getFrameWidth("tb")+e.labelPad}}},c),left:d,right:d}})(),errorStrategies:(function(){function d(j,h){var k=j.getStyle("display")!=="none";if(h!==k){j.setDisplayed(h)}}function g(j,h,k){if(j.getStyle(h)!==k){j.setStyle(h,k)}}function c(h){var j=Ext.layout.component.field.Field.tip,k;if(j&&j.isVisible()){k=j.activeTarget;if(k&&k.el===h.getActionEl().dom){j.toFront(true)}}}var b=Ext.applyIf,a=Ext.emptyFn,e={prepare:function(h){d(h.errorEl,false)},adjustHorizInsets:a,adjustVertInsets:a,layoutHoriz:a,layoutVert:a,onFocus:a};return{none:e,side:b({prepare:function(h){var j=h.errorEl;j.addCls(Ext.baseCSSPrefix+"form-invalid-icon");Ext.layout.component.field.Field.initTip();j.dom.setAttribute("data-errorqtip",h.getActiveError()||"");d(j,h.hasActiveError())},adjustHorizInsets:function(h,j){if(h.autoFitErrors&&h.hasActiveError()){j.insets.right+=h.errorEl.getWidth()}},layoutHoriz:function(h,j){if(h.hasActiveError()){g(h.errorEl,"left",j.width-j.insets.right+"px")}},layoutVert:function(h,j){if(h.hasActiveError()){g(h.errorEl,"top",j.insets.top+"px")}},onFocus:c},e),under:b({prepare:function(h){var k=h.errorEl,j=Ext.baseCSSPrefix+"form-invalid-under";if(!k.hasCls(j)){k.addCls(j)}d(k,h.hasActiveError())},adjustVertInsets:function(h,j){if(h.autoFitErrors){j.insets.bottom+=h.errorEl.getHeight()}},layoutHoriz:function(h,k){var m=h.errorEl,j=k.insets;g(m,"width",k.width-j.right-j.left+"px");g(m,"marginLeft",j.left+"px")}},e),qtip:b({prepare:function(h){d(h.errorEl,false);Ext.layout.component.field.Field.initTip();h.getActionEl().dom.setAttribute("data-errorqtip",h.getActiveError()||"")},onFocus:c},e),title:b({prepare:function(h){d(h.errorEl,false);h.el.dom.title=h.getActiveError()||""}},e),elementId:b({prepare:function(h){d(h.errorEl,false);var j=Ext.fly(h.msgTarget);if(j){j.dom.innerHTML=h.getActiveError()||"";j.setDisplayed(h.hasActiveError())}}},e)}})(),statics:{initTip:function(){var a=this.tip;if(!a){a=this.tip=Ext.create("Ext.tip.QuickTip",{baseCls:Ext.baseCSSPrefix+"form-invalid-tip",renderTo:Ext.getBody()});a.tagConfig=Ext.apply({},{attribute:"errorqtip"},a.tagConfig)}},destroyTip:function(){var a=this.tip;if(a){a.destroy();delete this.tip}}}});Ext.define("Ext.form.field.VTypes",(function(){var c=/^[a-zA-Z_]+$/,d=/^[a-zA-Z0-9_]+$/,b=/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,a=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(e){return b.test(e)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-@\+]/i,url:function(e){return a.test(e)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(e){return c.test(e)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(e){return d.test(e)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}})());Ext.define("Ext.layout.component.field.Text",{extend:"Ext.layout.component.field.Field",alias:"layout.textfield",requires:["Ext.util.TextMetrics"],type:"textfield",beforeLayout:function(d,b){var e=this,a=e.owner,c=this.lastValue,g=a.getRawValue();this.lastValue=g;return e.callParent(arguments)||(a.grow&&g!==c)},sizeBodyContents:function(c,a){var b=this.adjustForGrow(c,a);this.setElementSize(this.owner.inputEl,b[0],b[1])},adjustForGrow:function(e,c){var g=this,b=g.owner,j,h,d,a=[e,c];if(b.grow){j=b.inputEl;h=(j.dom.value||(b.hasFocus?"":b.emptyText)||"")+b.growAppend;d=j.getTextWidth(h)+j.getBorderWidth("lr")+j.getPadding("lr");a[0]=Ext.Number.constrain(d,b.growMin,Math.max(b.growMin,Math.min(b.growMax,Ext.isNumber(e)?e:Infinity)))}return a}});Ext.define("Ext.layout.component.field.TextArea",{extend:"Ext.layout.component.field.Text",alias:"layout.textareafield",type:"textareafield",adjustForGrow:function(a,m){var e=this,b=e.owner,j,h,g,d,c,k,n=[a,m];if(b.grow){j=b.inputEl;d=j.getWidth(true);c=j.getHeight();h=j.dom.value||"&#160;";h+=b.growAppend;h=h.replace(/\n/g,"<br>");k=Ext.util.TextMetrics.measure(j,h,d).height+j.getBorderWidth("tb")+j.getPadding("tb");g=b.growMax;if(Ext.isNumber(m)){g=Math.min(g,m)}n[1]=Ext.Number.constrain(k,b.growMin,g)}return n}});Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,onLayout:function(){this.callParent(arguments);var v=this,n=v.getLayoutTargetSize(),a=v.owner,x=v.getTarget(),w=n.width,k=n.height,p=x.getStyle("overflow"),m=v.getVisibleItems(a),t=m.length,e=[],h,q,j,g,c,d,r,b,u;if(w<20&&k<20){return}if(!v.clearEl){v.clearEl=x.createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})}if(!Ext.supports.RightMargin){u=Ext.Element.getRightMarginFixCleaner(x);x.addCls(Ext.baseCSSPrefix+"inline-children")}for(r=0;r<t;r++){j=m[r];b=j.el;g=j.anchorSpec;if(g){if(g.right){c=v.adjustWidthAnchor(g.right(w)-b.getMargin("lr"),j)}else{c=undefined}if(g.bottom){d=v.adjustHeightAnchor(g.bottom(k)-b.getMargin("tb"),j)}else{d=undefined}e.push({component:j,anchor:true,width:c||undefined,height:d||undefined})}else{e.push({component:j,anchor:false})}}if(!Ext.supports.RightMargin){x.removeCls(Ext.baseCSSPrefix+"inline-children");u()}for(r=0;r<t;r++){h=e[r];v.setItemSize(h.component,h.width,h.height)}if(p&&p!="hidden"&&!v.adjustmentPass){q=v.getLayoutTargetSize();if(q.width!=n.width||q.height!=n.height){v.adjustmentPass=true;v.onLayout()}}delete v.adjustmentPass},parseAnchor:function(c,g,b){if(c&&c!="none"){var d;if(this.parseAnchorRE.test(c)){var e=b-g;return function(a){return a-e}}else{if(c.indexOf("%")!=-1){d=parseFloat(c.replace("%",""))*0.01;return function(a){return Math.floor(a*d)}}else{c=parseInt(c,10);if(!isNaN(c)){return function(a){return a+c}}}}}return null},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b},configureItem:function(g){var e=this,a=e.owner,d=g.anchor,b,j,c,h;if(!g.anchor&&g.items&&!Ext.isNumber(g.width)&&!(Ext.isIE6&&Ext.isStrict)){g.anchor=d=e.defaultAnchor}if(a.anchorSize){if(typeof a.anchorSize=="number"){c=a.anchorSize}else{c=a.anchorSize.width;h=a.anchorSize.height}}else{c=a.initialConfig.width;h=a.initialConfig.height}if(d){b=d.split(" ");g.anchorSpec=j={right:e.parseAnchor(b[0],g.initialConfig.width,c),bottom:e.parseAnchor(b[1],g.initialConfig.height,h)};if(j.right){g.layoutManagedWidth=1}else{g.layoutManagedWidth=2}if(j.bottom){g.layoutManagedHeight=1}else{g.layoutManagedHeight=2}}else{g.layoutManagedWidth=2;g.layoutManagedHeight=2}this.callParent(arguments)}});Ext.define("Ext.form.action.Load",{extend:"Ext.form.action.Action",requires:["Ext.data.Connection"],alternateClassName:"Ext.form.Action.Load",alias:"formaction.load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(b){var a=this.processResponse(b),c=this.form;if(a===true||!a.success||!a.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;c.afterAction(this,false);return}c.clearInvalid();c.setValues(a.data);c.afterAction(this,true)},handleResponse:function(c){var a=this.form.reader,b,d;if(a){b=a.read(c);d=b.records&&b.records[0]?b.records[0].data:null;return{success:b.success,data:d}}return Ext.decode(c.responseText)}});Ext.define("Ext.window.Window",{extend:"Ext.panel.Panel",alternateClassName:"Ext.Window",requires:["Ext.util.ComponentDragger","Ext.util.Region","Ext.EventManager"],alias:"widget.window",baseCls:Ext.baseCSSPrefix+"window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"visibility",floating:true,ariaRole:"alertdialog",itemCls:"x-window-item",overlapHeader:true,ignoreHeaderBorderManagement:true,initComponent:function(){var a=this;a.callParent();a.addEvents("resize","maximize","minimize","restore");if(a.plain){a.addClsWithUI("plain")}if(a.modal){a.ariaRole="dialog"}},initStateEvents:function(){var a=this.stateEvents;Ext.each(["maximize","restore","resize","dragend"],function(b){if(Ext.Array.indexOf(a,b)){a.push(b)}});this.callParent()},getState:function(){var b=this,c=b.callParent()||{},a=!!b.maximized;c.maximized=a;Ext.apply(c,{size:a?b.restoreSize:b.getSize(),pos:a?b.restorePos:b.getPosition()});return c},applyState:function(b){var a=this;if(b){a.maximized=b.maximized;if(a.maximized){a.hasSavedRestore=true;a.restoreSize=b.size;a.restorePos=b.pos}else{Ext.apply(a,{width:b.size.width,height:b.size.height,x:b.pos[0],y:b.pos[1]})}}},onMouseDown:function(b){var a;if(this.floating){if(Ext.fly(b.getTarget()).focusable()){a=true}this.toFront(a)}},onRender:function(b,a){var c=this;c.callParent(arguments);c.focusEl=c.el;if(c.maximizable){c.header.on({dblclick:{fn:c.toggleMaximize,element:"el",scope:c}})}},afterRender:function(){var a=this,b=a.hidden,c;a.hidden=false;a.callParent();a.hidden=b;a.proxy=a.getProxy();a.mon(a.el,"mousedown",a.onMouseDown,a);a.el.set({tabIndex:-1});if(a.maximized){a.maximized=false;a.maximize()}if(a.closable){c=a.getKeyMap();c.on(27,a.onEsc,a);c.disable()}if(!b){a.syncMonitorWindowResize();a.doConstrain()}},initDraggable:function(){var b=this,a;if(!b.header){b.updateHeader(true)}if(b.header){a=Ext.applyIf({el:b.el,delegate:"#"+b.header.id},b.draggable);if(b.constrain||b.constrainHeader){a.constrain=b.constrain;a.constrainDelegate=b.constrainHeader;a.constrainTo=b.constrainTo||b.container}b.dd=Ext.create("Ext.util.ComponentDragger",this,a);b.relayEvents(b.dd,["dragstart","drag","dragend"])}},onEsc:function(a,b){b.stopEvent();this[this.closeAction]()},beforeDestroy:function(){var a=this;if(a.rendered){delete this.animateTarget;a.hide();Ext.destroy(a.keyMap)}a.callParent()},addTools:function(){var a=this;a.callParent();if(a.minimizable){a.addTool({type:"minimize",handler:Ext.Function.bind(a.minimize,a,[])})}if(a.maximizable){a.addTool({type:"maximize",handler:Ext.Function.bind(a.maximize,a,[])});a.addTool({type:"restore",handler:Ext.Function.bind(a.restore,a,[]),hidden:true})}},getFocusEl:function(){var d=this,g=d.focusEl,e=d.defaultButton||d.defaultFocus,b=typeof db,c,a;if(Ext.isDefined(e)){if(Ext.isNumber(e)){g=d.query("button")[e]}else{if(Ext.isString(e)){g=d.down("#"+e)}else{g=e}}}return g||d.focusEl},beforeShow:function(){this.callParent();if(this.expandOnShow){this.expand(false)}},afterShow:function(c){var b=this,a=c||b.animateTarget;b.callParent(arguments);if(b.maximized){b.fitContainer()}b.syncMonitorWindowResize();if(!a){b.doConstrain()}if(b.keyMap){b.keyMap.enable()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent("close",a);if(a.closeAction=="destroy"){this.destroy()}}else{a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.disable()}a.callParent(arguments)},onWindowResize:function(){if(this.maximized){this.fitContainer()}this.doConstrain()},minimize:function(){this.fireEvent("minimize",this);return this},afterCollapse:function(){var a=this;if(a.maximizable){a.tools.maximize.hide();a.tools.restore.hide()}if(a.resizer){a.resizer.disable()}a.callParent(arguments)},afterExpand:function(){var a=this;if(a.maximized){a.tools.restore.show()}else{if(a.maximizable){a.tools.maximize.show()}}if(a.resizer){a.resizer.enable()}a.callParent(arguments)},maximize:function(){var a=this;if(!a.maximized){a.expand(false);if(!a.hasSavedRestore){a.restoreSize=a.getSize();a.restorePos=a.getPosition(true)}if(a.maximizable){a.tools.maximize.hide();a.tools.restore.show()}a.maximized=true;a.el.disableShadow();if(a.dd){a.dd.disable()}if(a.collapseTool){a.collapseTool.hide()}a.el.addCls(Ext.baseCSSPrefix+"window-maximized");a.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct");a.syncMonitorWindowResize();a.setPosition(0,0);a.fitContainer();a.fireEvent("maximize",a)}return a},restore:function(){var a=this,b=a.tools;if(a.maximized){delete a.hasSavedRestore;a.removeCls(Ext.baseCSSPrefix+"window-maximized");if(b.restore){b.restore.hide()}if(b.maximize){b.maximize.show()}if(a.collapseTool){a.collapseTool.show()}a.setPosition(a.restorePos);a.setSize(a.restoreSize);delete a.restorePos;delete a.restoreSize;a.maximized=false;a.el.enableShadow(true);if(a.dd){a.dd.enable()}a.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct");a.syncMonitorWindowResize();a.doConstrain();a.fireEvent("restore",a)}return a},syncMonitorWindowResize:function(){var b=this,c=b._monitoringResize,d=b.monitorResize||b.constrain||b.constrainHeader||b.maximized,a=b.hidden||b.destroying||b.isDestroyed;if(d&&!a){if(!c){Ext.EventManager.onWindowResize(b.onWindowResize,b);b._monitoringResize=true}}else{if(c){Ext.EventManager.removeResizeListener(b.onWindowResize,b);b._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()}});Ext.define("Ext.form.field.Base",{extend:"Ext.Component",mixins:{labelable:"Ext.form.Labelable",field:"Ext.form.field.Field"},alias:"widget.field",alternateClassName:["Ext.form.Field","Ext.form.BaseField"],requires:["Ext.util.DelayedTask","Ext.XTemplate","Ext.layout.component.field.Field"],fieldSubTpl:['<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />',{compiled:true,disableFormats:true}],inputType:"text",invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:Ext.baseCSSPrefix+"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<9)?["change","propertychange"]:["change","input","textInput","keyup","dragdrop"],checkChangeBuffer:50,componentLayout:"field",readOnly:false,readOnlyCls:Ext.baseCSSPrefix+"form-readonly",validateOnBlur:true,hasFocus:false,baseCls:Ext.baseCSSPrefix+"field",maskOnDisable:false,initComponent:function(){var a=this;a.callParent();a.subTplData=a.subTplData||{};a.addEvents("focus","blur","specialkey");a.initLabelable();a.initField();if(!a.name){a.name=a.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=Ext.id())},getSubTplData:function(){var c=this,b=c.inputType,a=c.getInputId();return Ext.applyIf(c.subTplData,{id:a,cmpId:c.id,name:c.name||a,type:b,size:c.size||20,cls:c.cls,fieldCls:c.fieldCls,tabIdx:c.tabIndex,typeCls:Ext.baseCSSPrefix+"form-"+(b==="password"?"text":b)})},afterRender:function(){this.callParent();if(this.inputEl){this.inputEl.selectable()}},getSubTplMarkup:function(){return this.getTpl("fieldSubTpl").apply(this.getSubTplData())},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return a.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(a){var b=this,c=b.inputEl;if(c){c.applyStyles(a)}b.fieldStyle=a},onRender:function(){var b=this,a=b.fieldStyle;b.onLabelableRender();b.addChildEls({name:"inputEl",id:b.getInputId()});b.callParent(arguments);b.setRawValue(b.rawValue);if(b.readOnly){b.setReadOnly(true)}if(b.disabled){b.disable()}if(a){b.setFieldStyle(a)}b.renderActiveError()},initAria:function(){var a=this;a.callParent();a.getActionEl().dom.setAttribute("aria-describedby",Ext.id(a.errorEl))},getFocusEl:function(){return this.inputEl},isFileUpload:function(){return this.inputType==="file"},extractFileInput:function(){var b=this,a=b.isFileUpload()?b.inputEl.dom:null,c;if(a){c=a.cloneNode(true);a.parentNode.replaceChild(c,a);b.inputEl=Ext.get(c)}return a},getSubmitData:function(){var a=this,b=null,c;if(!a.disabled&&a.submitValue&&!a.isFileUpload()){c=a.getSubmitValue();if(c!==null){b={};b[a.getName()]=c}}return b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var b=this,a=(b.inputEl?b.inputEl.getValue():Ext.value(b.rawValue,""));b.rawValue=a;return a},setRawValue:function(b){var a=this;b=Ext.value(b,"");a.rawValue=b;if(a.inputEl){a.inputEl.dom.value=b}return b},valueToRaw:function(a){return""+Ext.value(a,"")},rawToValue:function(a){return a},processRawValue:function(a){return a},getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onDisable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=true}},onEnable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=false}},setReadOnly:function(c){var a=this,b=a.inputEl;if(b){b.dom.readOnly=c;b.dom.setAttribute("aria-readonly",c)}a[c?"addCls":"removeCls"](a.readOnlyCls);a.readOnly=c},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent("specialkey",this,Ext.create("Ext.EventObjectImpl",a))}},initEvents:function(){var b=this,c=b.inputEl,a,d;if(c){b.mon(c,Ext.EventManager.getKeyEvent(),b.fireKey,b);b.mon(c,"focus",b.onFocus,b);b.mon(c,"blur",b.onBlur,b,b.inEditor?{buffer:10}:null);a=Ext.create("Ext.util.DelayedTask",b.checkChange,b);b.onChangeEvent=d=function(){a.delay(b.checkChangeBuffer)};Ext.each(b.checkChangeEvents,function(e){if(e==="propertychange"){b.usesPropertychange=true}b.mon(c,e,d)},b)}b.callParent()},doComponentLayout:function(){var c=this,d=c.inputEl,a=c.usesPropertychange,b="propertychange",e=c.onChangeEvent;if(a){c.mun(d,b,e)}c.callParent(arguments);if(a){c.mon(d,b,e)}},preFocus:Ext.emptyFn,onFocus:function(){var b=this,a=b.focusCls,c=b.inputEl;b.preFocus();if(a&&c){c.addCls(a)}if(!b.hasFocus){b.hasFocus=true;b.componentLayout.onFocus();b.fireEvent("focus",b)}},beforeBlur:Ext.emptyFn,onBlur:function(){var b=this,a=b.focusCls,c=b.inputEl;if(b.destroying){return}b.beforeBlur();if(a&&c){c.removeCls(a)}if(b.validateOnBlur){b.validate()}b.hasFocus=false;b.fireEvent("blur",b);b.postBlur()},postBlur:Ext.emptyFn,onDirtyChange:function(a){this[a?"addCls":"removeCls"](this.dirtyCls)},isValid:function(){var a=this;return a.disabled||a.validateValue(a.processRawValue(a.getRawValue()))},validateValue:function(b){var a=this,d=a.getErrors(b),c=Ext.isEmpty(d);if(!a.preventMark){if(c){a.clearInvalid()}else{a.markInvalid(d)}}return c},markInvalid:function(c){var b=this,a=b.getActiveError();b.setActiveErrors(Ext.Array.from(c));if(a!==b.getActiveError()){b.doComponentLayout()}},clearInvalid:function(){var b=this,a=b.hasActiveError();b.unsetActiveError();if(a){b.doComponentLayout()}},renderActiveError:function(){var b=this,a=b.hasActiveError();if(b.inputEl){b.inputEl[a?"addCls":"removeCls"](b.invalidCls+"-field")}b.mixins.labelable.renderActiveError.call(b)},getActionEl:function(){return this.inputEl||this.el}});Ext.define("Ext.form.field.Text",{extend:"Ext.form.field.Base",alias:"widget.textfield",requires:["Ext.form.field.VTypes","Ext.layout.component.field.Text"],alternateClassName:["Ext.form.TextField","Ext.form.Text"],size:20,growMin:30,growMax:800,growAppend:"W",allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",ariaRole:"textbox",componentLayout:"textfield",initComponent:function(){this.callParent();this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){var b=this,a=b.inputEl;b.callParent();if(b.selectOnFocus||b.emptyText){b.mon(a,"mousedown",b.onMouseDown,b)}if(b.maskRe||(b.vtype&&b.disableKeyFilter!==true&&(b.maskRe=Ext.form.field.VTypes[b.vtype+"Mask"]))){b.mon(a,"keypress",b.filterKeys,b)}if(b.enableKeyEvents){b.mon(a,{scope:b,keyup:b.onKeyUp,keydown:b.onKeyDown,keypress:b.onKeyPress})}},isEqual:function(b,a){return this.isEqualAsString(b,a)},onChange:function(){this.callParent();this.autoSize()},afterRender:function(){var a=this;if(a.enforceMaxLength){a.inputEl.dom.maxLength=a.maxLength}a.applyEmptyText();a.autoSize();a.callParent()},onMouseDown:function(b){var a=this;if(!a.hasFocus){a.mon(a.inputEl,"mouseup",Ext.emptyFn,a,{single:true,preventDefault:true})}},processRawValue:function(b){var a=this,d=a.stripCharsRe,c;if(d){c=b.replace(d,"");if(c!==b){a.setRawValue(c);b=c}}return b},onDisable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){this.callParent();this.applyEmptyText()},applyEmptyText:function(){var b=this,a=b.emptyText,c;if(b.rendered&&a){c=b.getRawValue().length<1&&!b.hasFocus;if(Ext.supports.Placeholder){b.inputEl.dom.placeholder=a}else{if(c){b.setRawValue(a)}}if(c){b.inputEl.addCls(b.emptyCls)}b.autoSize()}},preFocus:function(){var b=this,c=b.inputEl,a=b.emptyText,d;if(a&&!Ext.supports.Placeholder&&c.dom.value===a){b.setRawValue("");d=true;c.removeCls(b.emptyCls)}else{if(Ext.supports.Placeholder){b.inputEl.removeCls(b.emptyCls)}}if(b.selectOnFocus||d){c.dom.select()}},onFocus:function(){var a=this;a.callParent(arguments);if(a.emptyText){a.autoSize()}},postBlur:function(){this.applyEmptyText()},filterKeys:function(c){if(c.ctrlKey&&!c.altKey){return}var b=c.getKey(),a=String.fromCharCode(c.getCharCode());if(Ext.isGecko&&(c.isNavKeyPress()||b===c.BACKSPACE||(b===c.DELETE&&c.button===-1))){return}if(!Ext.isGecko&&c.isSpecialKey()&&!a){return}if(!this.maskRe.test(a)){c.stopEvent()}},getRawValue:function(){var b=this,a=b.callParent();if(a===b.emptyText){a=""}return a},setValue:function(b){var a=this,c=a.inputEl;if(c&&a.emptyText&&!Ext.isEmpty(b)){c.removeCls(a.emptyCls)}a.callParent(arguments);a.applyEmptyText();return a},getErrors:function(n){var g=this,m=g.callParent(arguments),a=g.validator,d=g.emptyText,c=g.allowBlank,e=g.vtype,h=Ext.form.field.VTypes,j=g.regex,k=Ext.String.format,b;n=n||g.processRawValue(g.getRawValue());if(Ext.isFunction(a)){b=a.call(g,n);if(b!==true){m.push(b)}}if(n.length<1||n===d){if(!c){m.push(g.blankText)}return m}if(n.length<g.minLength){m.push(k(g.minLengthText,g.minLength))}if(n.length>g.maxLength){m.push(k(g.maxLengthText,g.maxLength))}if(e){if(!h[e](n,g)){m.push(g.vtypeText||h[e+"Text"])}}if(j&&!j.test(n)){m.push(g.regexText||g.invalidText)}return m},selectText:function(j,a){var h=this,c=h.getRawValue(),d=true,g=h.inputEl.dom,e,b;if(c.length>0){j=j===e?0:j;a=a===e?c.length:a;if(g.setSelectionRange){g.setSelectionRange(j,a)}else{if(g.createTextRange){b=g.createTextRange();b.moveStart("character",j);b.moveEnd("character",a-c.length);b.select()}}d=Ext.isGecko||Ext.isOpera}if(d){h.focus()}},autoSize:function(){var b=this,a;if(b.grow&&b.rendered){b.doComponentLayout();a=b.inputEl.getWidth();if(a!==b.lastInputWidth){b.fireEvent("autosize",a);b.lastInputWidth=a}}},initAria:function(){this.callParent();this.getActionEl().dom.setAttribute("aria-required",this.allowBlank===false)},getBodyNaturalWidth:function(){return Math.round(this.size*6.5)+20}});Ext.define("Ext.form.field.TextArea",{extend:"Ext.form.field.Text",alias:["widget.textareafield","widget.textarea"],alternateClassName:"Ext.form.TextArea",requires:["Ext.XTemplate","Ext.layout.component.field.TextArea"],fieldSubTpl:['<textarea id="{id}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="rows">rows="{rows}" </tpl>','<tpl if="cols">cols="{cols}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" ','autocomplete="off">',"</textarea>",{compiled:true,disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",cols:20,rows:4,enterIsSpecial:false,preventScrollbars:false,componentLayout:"textareafield",onRender:function(b,a){var c=this;Ext.applyIf(c.subTplData,{cols:c.cols,rows:c.rows});c.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments);if(a.grow){if(a.preventScrollbars){a.inputEl.setStyle("overflow","hidden")}a.inputEl.setHeight(a.growMin)}},fireKey:function(a){if(a.isSpecialKey()&&(this.enterIsSpecial||(a.getKey()!==a.ENTER||a.hasModifier()))){this.fireEvent("specialkey",this,a)}},autoSize:function(){var b=this,a;if(b.grow&&b.rendered){b.doComponentLayout();a=b.inputEl.getHeight();if(a!==b.lastInputHeight){b.fireEvent("autosize",a);b.lastInputHeight=a}}},initAria:function(){this.callParent(arguments);this.getActionEl().dom.setAttribute("aria-multiline",true)},getBodyNaturalWidth:function(){return Math.round(this.cols*6.5)+20}});Ext.define("Ext.window.MessageBox",{extend:"Ext.window.Window",requires:["Ext.toolbar.Toolbar","Ext.form.field.Text","Ext.form.field.TextArea","Ext.button.Button","Ext.layout.container.Anchor","Ext.layout.container.HBox","Ext.ProgressBar"],alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",hideMode:"offsets",closeAction:"hide",resizable:false,title:"&#160;",width:600,height:500,minWidth:250,maxWidth:600,minHeight:110,maxHeight:500,constrain:true,cls:Ext.baseCSSPrefix+"message-box",layout:{type:"anchor"},defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},iconHeight:35,makeButton:function(a){var b=this.buttonIds[a];return Ext.create("Ext.button.Button",{handler:this.btnCallback,itemId:b,scope:this,text:this.buttonText[b],minWidth:75})},btnCallback:function(a){var b=this,c,d;if(b.cfg.prompt||b.cfg.multiline){if(b.cfg.multiline){d=b.textArea}else{d=b.textField}c=d.getValue();d.reset()}a.blur();b.hide();b.userCallback(a.itemId,c,b.cfg)},hide:function(){var a=this;a.dd.endDrag();a.progressBar.reset();a.removeCls(a.cfg.cls);a.callParent()},initComponent:function(){var c=this,b,a;c.title="&#160;";c.topContainer=Ext.create("Ext.container.Container",{anchor:"100%",style:{padding:"10px",overflow:"hidden"},items:[c.iconComponent=Ext.create("Ext.Component",{cls:"ext-mb-icon",width:50,height:c.iconHeight,style:{"float":"left"}}),c.promptContainer=Ext.create("Ext.container.Container",{layout:{type:"anchor"},items:[c.msg=Ext.create("Ext.Component",{autoEl:{tag:"span"},cls:"ext-mb-text"}),c.textField=Ext.create("Ext.form.field.Text",{anchor:"100%",enableKeyEvents:true,listeners:{keydown:c.onPromptKey,scope:c}}),c.textArea=Ext.create("Ext.form.field.TextArea",{anchor:"100%",height:75})]})]});c.progressBar=Ext.create("Ext.ProgressBar",{anchor:"-10",style:"margin-left:10px"});c.items=[c.topContainer,c.progressBar];c.msgButtons=[];for(b=0;b<4;b++){a=c.makeButton(b);c.msgButtons[a.itemId]=a;c.msgButtons.push(a)}c.bottomTb=Ext.create("Ext.toolbar.Toolbar",{ui:"footer",dock:"bottom",layout:{pack:"center"},items:[c.msgButtons[0],c.msgButtons[1],c.msgButtons[2],c.msgButtons[3]]});c.dockedItems=[c.bottomTb];c.callParent()},onPromptKey:function(a,c){var b=this,d;if(c.keyCode===Ext.EventObject.RETURN||c.keyCode===10){if(b.msgButtons.ok.isVisible()){d=true;b.msgButtons.ok.handler.call(b,b.msgButtons.ok)}else{if(b.msgButtons.yes.isVisible()){b.msgButtons.yes.handler.call(b,b.msgButtons.yes);d=true}}if(d){b.textField.blur()}}},reconfigure:function(a){var d=this,c=a.buttons||0,g=true,e=d.maxWidth,b;a=a||{};d.cfg=a;if(a.width){e=a.width}delete d.defaultFocus;d.animateTarget=a.animateTarget||undefined;d.modal=a.modal!==false;if(a.title){d.setTitle(a.title||"&#160;")}if(!d.rendered){d.width=e;d.render(Ext.getBody())}else{d.setSize(e,d.maxHeight)}d.setPosition(-10000,-10000);d.closable=a.closable&&!a.wait;d.header.child("[type=close]").setVisible(a.closable!==false);if(!a.title&&!d.closable){d.header.hide()}else{d.header.show()}d.liveDrag=!a.proxyDrag;d.userCallback=Ext.Function.bind(a.callback||a.fn||Ext.emptyFn,a.scope||Ext.global);d.setIcon(a.icon);if(a.msg){d.msg.update(a.msg);d.msg.show()}else{d.msg.hide()}if(a.prompt||a.multiline){d.multiline=a.multiline;if(a.multiline){d.textArea.setValue(a.value);d.textArea.setHeight(a.defaultTextHeight||d.defaultTextHeight);d.textArea.show();d.textField.hide();d.defaultFocus=d.textArea}else{d.textField.setValue(a.value);d.textArea.hide();d.textField.show();d.defaultFocus=d.textField}}else{d.textArea.hide();d.textField.hide()}if(a.progress||a.wait){d.progressBar.show();d.updateProgress(0,a.progressText);if(a.wait===true){d.progressBar.wait(a.waitConfig)}}else{d.progressBar.hide()}for(b=0;b<4;b++){if(c&Math.pow(2,b)){if(!d.defaultFocus){d.defaultFocus=d.msgButtons[b]}d.msgButtons[b].show();g=false}else{d.msgButtons[b].hide()}}if(g){d.bottomTb.hide()}else{d.bottomTb.show()}},show:function(a){var b=this;b.reconfigure(a);b.addCls(a.cls);if(a.animateTarget){b.doAutoSize(true);b.callParent()}else{b.callParent();b.doAutoSize(true)}return b},afterShow:function(){if(this.animateTarget){this.center()}this.callParent(arguments)},doAutoSize:function(b){var e=this,d=e.iconComponent,g=e.iconHeight;if(!Ext.isDefined(e.frameWidth)){e.frameWidth=e.el.getWidth()-e.body.getWidth()}d.setHeight(g);e.minWidth=e.cfg.minWidth||Ext.getClass(this).prototype.minWidth;e.topContainer.doLayout();if(Ext.isIE6||Ext.isIEQuirks){e.textField.setCalculatedSize(9);e.textArea.setCalculatedSize(9)}var c=e.cfg.width||e.msg.getWidth()+d.getWidth()+25,a=(e.header.rendered?e.header.getHeight():0)+Math.max(e.promptContainer.getHeight(),d.getHeight())+e.progressBar.getHeight()+(e.bottomTb.rendered?e.bottomTb.getHeight():0)+20;d.setHeight(Math.max(g,e.msg.getHeight()));e.setSize(c+e.frameWidth,a+e.frameWidth);if(b){e.center()}return e},updateText:function(a){this.msg.update(a);return this.doAutoSize(true)},setIcon:function(a){var b=this;b.iconComponent.removeCls(b.iconCls);if(a){b.iconComponent.show();b.iconComponent.addCls(Ext.baseCSSPrefix+"dlg-icon");b.iconComponent.addCls(b.iconCls=a)}else{b.iconComponent.removeCls(Ext.baseCSSPrefix+"dlg-icon");b.iconComponent.hide()}return b},updateProgress:function(b,a,c){this.progressBar.updateProgress(b,a);if(c){this.updateText(c)}return this},onEsc:function(){if(this.closable!==false){this.callParent(arguments)}},confirm:function(a,d,c,b){if(Ext.isString(a)){a={title:a,icon:"ext-mb-question",msg:d,buttons:this.YESNO,callback:c,scope:b}}return this.show(a)},prompt:function(b,g,d,c,a,e){if(Ext.isString(b)){b={prompt:true,title:b,minWidth:this.minPromptWidth,msg:g,buttons:this.OKCANCEL,callback:d,scope:c,multiline:a,value:e}}return this.show(b)},wait:function(a,c,b){if(Ext.isString(a)){a={title:c,msg:a,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:b}}return this.show(a)},alert:function(a,d,c,b){if(Ext.isString(a)){a={title:a,msg:d,buttons:this.OK,fn:c,scope:b,minWidth:this.minWidth}}return this.show(a)},progress:function(a,c,b){if(Ext.isString(a)){a={title:a,msg:c,progress:true,progressText:b}}return this.show(a)}},function(){Ext.MessageBox=Ext.Msg=new this()});Ext.define("Ext.form.Basic",{extend:"Ext.util.Observable",alternateClassName:"Ext.form.BasicForm",requires:["Ext.util.MixedCollection","Ext.form.action.Load","Ext.form.action.Submit","Ext.window.MessageBox","Ext.data.Errors","Ext.util.DelayedTask"],constructor:function(a,b){var c=this,d=c.onItemAddOrRemove;c.owner=a;c.mon(a,{add:d,remove:d,scope:c});Ext.apply(c,b);if(Ext.isString(c.paramOrder)){c.paramOrder=c.paramOrder.split(/[\s,|]/)}c.checkValidityTask=Ext.create("Ext.util.DelayedTask",c.checkValidity,c);c.addEvents("beforeaction","actionfailed","actioncomplete","validitychange","dirtychange");c.callParent()},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){this.clearListeners();this.checkValidityTask.cancel()},onItemAddOrRemove:function(c,g){var d=this,e=!!g.ownerCt,b=g.isContainer;function a(h){d[e?"mon":"mun"](h,{validitychange:d.checkValidity,dirtychange:d.checkDirty,scope:d,buffer:100});delete d._fields}if(g.isFormField){a(g)}else{if(b){if(g.isDestroyed){delete d._fields}else{Ext.Array.forEach(g.query("[isFormField]"),a)}}}delete this._boundItems;if(d.initialized){d.checkValidityTask.delay(10)}},getFields:function(){var a=this._fields;if(!a){a=this._fields=Ext.create("Ext.util.MixedCollection");a.addAll(this.owner.query("[isFormField]"))}return a},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=Ext.create("Ext.util.MixedCollection");a.addAll(this.owner.query("[formBind]"))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(c){var a=c.preventMark,b;c.preventMark=true;b=c.isValid();c.preventMark=a;return !b})},isValid:function(){var a=this,b;a.batchLayouts(function(){b=a.getFields().filterBy(function(c){return !c.validate()})});return b.length<1},checkValidity:function(){var b=this,a=!b.hasInvalidField();if(a!==b.wasValid){b.onValidityChange(a);b.fireEvent("validitychange",b,a);b.wasValid=a}},onValidityChange:function(b){var a=this.getBoundItems();if(a){a.each(function(c){if(c.disabled===b){c.setDisabled(!b)}})}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirty:function(){var a=this.isDirty();if(a!==this.wasDirty){this.fireEvent("dirtychange",this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(b,a){if(Ext.isString(b)){b=Ext.ClassManager.instantiateByAlias("formaction."+b,Ext.apply({},a,{form:this}))}if(this.fireEvent("beforeaction",this,b)!==false){this.beforeAction(b);Ext.defer(b.run,100,b)}return this},submit:function(a){return this.doAction(this.standardSubmit?"standardsubmit":this.api?"directsubmit":"submit",a)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(b){var a=b.fields,c=this.getFieldValues(),d,e={};a.each(function(g){d=g.name;if(d in c){e[d]=c[d]}});b.beginEdit();b.set(e);b.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.data)},getRecord:function(){return this._record},beforeAction:function(c){var a=c.waitMsg,b=Ext.baseCSSPrefix+"mask-loading",d;this.getFields().each(function(e){if(e.isFormField&&e.syncValue){e.syncValue()}});if(a){d=this.waitMsgTarget;if(d===true){this.owner.el.mask(a,b)}else{if(d){d=this.waitMsgTarget=Ext.get(d);d.mask(a,b)}else{Ext.MessageBox.wait(a,c.waitTitle||this.waitTitle)}}}},afterAction:function(b,d){if(b.waitMsg){var a=Ext.MessageBox,c=this.waitMsgTarget;if(c===true){this.owner.el.unmask()}else{if(c){c.unmask()}else{a.updateProgress(1);a.hide()}}}if(d){if(b.reset){this.reset()}Ext.callback(b.success,b.scope||b,[this,b]);this.fireEvent("actioncomplete",this,b)}else{Ext.callback(b.failure,b.scope||b,[this,b]);this.fireEvent("actionfailed",this,b)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.getName()===a})},markInvalid:function(c){var a=this;function b(d,g){var e=a.findField(d);if(e){e.markInvalid(g)}}if(Ext.isArray(c)){Ext.each(c,function(d){b(d.id,d.msg)})}else{if(c instanceof Ext.data.Errors){c.each(function(d){b(d.field,d.message)})}else{Ext.iterate(c,b)}}return this},setValues:function(a){var b=this;function c(d,g){var e=b.findField(d);if(e){e.setValue(g);if(b.trackResetOnLoad){e.resetOriginalValue()}}}if(Ext.isArray(a)){Ext.each(a,function(d){c(d.id,d.value)})}else{Ext.iterate(a,c)}return this},getValues:function(e,b,d,a){var c={};this.getFields().each(function(h){if(!b||h.isDirty()){var g=h[a?"getModelData":"getSubmitData"](d);if(Ext.isObject(g)){Ext.iterate(g,function(k,m){if(d&&m===""){m=h.emptyText||""}if(k in c){var n=c[k],j=Ext.isArray;if(!j(n)){n=c[k]=[n]}if(j(m)){c[k]=n.concat(m)}else{n.push(m)}}else{c[k]=m}})}}});if(e){c=Ext.Object.toQueryString(c)}return c},getFieldValues:function(a){return this.getValues(false,a,false,true)},clearInvalid:function(){var a=this;a.batchLayouts(function(){a.getFields().each(function(b){b.clearInvalid()})});return a},reset:function(){var a=this;a.batchLayouts(function(){a.getFields().each(function(b){b.reset()})});return a},applyToFields:function(a){this.getFields().each(function(b){Ext.apply(b,a)});return this},applyIfToFields:function(a){this.getFields().each(function(b){Ext.applyIf(b,a)});return this},batchLayouts:function(b){var c=this,a=new Ext.util.HashMap();c.getFields().each(function(e){var d=e.ownerCt;if(!a.contains(d)){a.add(d);d.oldSuspendLayout=d.suspendLayout;d.suspendLayout=true}});b();a.each(function(e,d){d.suspendLayout=d.oldSuspendLayout;delete d.oldSuspendLayout});c.owner.doComponentLayout()}});Ext.define("Ext.form.FieldAncestor",{initFieldAncestor:function(){var a=this,b=a.onFieldAncestorSubtreeChange;a.addEvents("fieldvaliditychange","fielderrorchange");a.on("add",b,a);a.on("remove",b,a);a.initFieldDefaults()},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},onFieldAncestorSubtreeChange:function(b,e){var c=this,d=!!e.ownerCt;function a(g){var h=g.isFieldLabelable,j=g.isFormField;if(h||j){if(h){c["onLabelable"+(d?"Added":"Removed")](g)}if(j){c["onField"+(d?"Added":"Removed")](g)}}else{if(g.isContainer){Ext.Array.forEach(g.getRefItems(),a)}}}a(e)},onLabelableAdded:function(a){var b=this;b.mon(a,"errorchange",b.handleFieldErrorChange,b,{buffer:10});a.setFieldDefaults(b.fieldDefaults)},onFieldAdded:function(b){var a=this;a.mon(b,"validitychange",a.handleFieldValidityChange,a)},onLabelableRemoved:function(a){var b=this;b.mun(a,"errorchange",b.handleFieldErrorChange,b)},onFieldRemoved:function(b){var a=this;a.mun(b,"validitychange",a.handleFieldValidityChange,a)},handleFieldValidityChange:function(c,b){var a=this;a.fireEvent("fieldvaliditychange",a,c,b);a.onFieldValidityChange()},handleFieldErrorChange:function(b,a){var c=this;c.fireEvent("fielderrorchange",c,b,a);c.onFieldErrorChange()},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn});Ext.define("Ext.layout.container.CheckboxGroup",{extend:"Ext.layout.container.Container",alias:["layout.checkboxgroup"],onLayout:function(){var b=this.getColCount(),c=this.getShadowCt(),a=this.owner,g=a.items,j=c.items,h=g.length,k=0,d,e;j.each(function(m){m.items.clear()});while(j.length>b){c.remove(j.last())}while(j.length<b){c.add({xtype:"container",cls:a.groupCls,flex:1})}if(a.vertical){e=Math.ceil(h/b);for(d=0;d<h;d++){if(d>0&&d%e===0){k++}j.getAt(k).items.add(g.getAt(d))}}else{for(d=0;d<h;d++){k=d%b;j.getAt(k).items.add(g.getAt(d))}}if(!c.rendered){c.render(this.getRenderTarget())}else{j.each(function(m){var n=m.getLayout();n.renderItems(n.getLayoutItems(),n.getRenderTarget())})}c.doComponentLayout()},renderItems:Ext.emptyFn,getShadowCt:function(){var j=this,d=j.shadowCt,a,h,k,c,g,b,e;if(!d){a=j.owner;c=a.columns;g=Ext.isArray(c);b=j.getColCount();h=[];for(e=0;e<b;e++){k={xtype:"container",cls:a.groupCls};if(g){if(c[e]<1){k.flex=c[e]}else{k.width=c[e]}}else{k.flex=1}h.push(k)}d=j.shadowCt=Ext.createWidget("container",{layout:"hbox",items:h,ownerCt:a})}return d},getColCount:function(){var a=this.owner,b=a.columns;return Ext.isArray(b)?b.length:(Ext.isNumber(b)?b:a.items.length)}});Ext.define("Ext.form.FieldContainer",{extend:"Ext.container.Container",mixins:{labelable:"Ext.form.Labelable",fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.fieldcontainer",componentLayout:"field",combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,initComponent:function(){var b=this,a=b.onSubCmpAddOrRemove;b.initLabelable();b.initFieldAncestor();b.callParent()},onLabelableAdded:function(a){var b=this;b.mixins.fieldAncestor.onLabelableAdded.call(this,a);b.updateLabel()},onLabelableRemoved:function(a){var b=this;b.mixins.fieldAncestor.onLabelableRemoved.call(this,a);b.updateLabel()},onRender:function(){var a=this;a.onLabelableRender();a.callParent(arguments)},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return a.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},getFieldLabel:function(){var a=this.fieldLabel||"";if(!a&&this.combineLabels){a=Ext.Array.map(this.query("[isFieldLabelable]"),function(b){return b.getFieldLabel()}).join(this.labelConnector)}return a},updateLabel:function(){var b=this,a=b.labelEl;if(a){a.update(b.getFieldLabel())}},onFieldErrorChange:function(e,b){if(this.combineErrors){var d=this,g=d.getActiveError(),c=Ext.Array.filter(d.query("[isFormField]"),function(h){return h.hasActiveError()}),a=d.getCombinedErrors(c);if(a){d.setActiveErrors(a)}else{d.unsetActiveError()}if(g!==d.getActiveError()){d.doComponentLayout()}}},getCombinedErrors:function(a){var b=Ext.Array.forEach,c=[];b(a,function(d){b(d.getActiveErrors(),function(g){var e=d.getFieldLabel();c.push((e?e+": ":"")+g)})});return c},getTargetEl:function(){return this.bodyEl||this.callParent()}});Ext.define("Ext.form.CheckboxGroup",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.checkboxgroup",requires:["Ext.layout.container.CheckboxGroup","Ext.form.field.Base"],columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",groupCls:Ext.baseCSSPrefix+"form-check-group",fieldBodyCls:Ext.baseCSSPrefix+"form-checkboxgroup-body",layout:"checkboxgroup",initComponent:function(){var a=this;a.callParent();a.initField()},initValue:function(){var b=this,a=b.value;b.originalValue=b.lastValue=a||b.getValue();if(a){b.setValue(a)}},onFieldAdded:function(b){var a=this;if(b.isCheckbox){a.mon(b,"change",a.checkChange,a)}a.callParent(arguments)},onFieldRemoved:function(b){var a=this;if(b.isCheckbox){a.mun(b,"change",a.checkChange,a)}a.callParent(arguments)},isEqual:function(b,a){var c=Ext.Object.toQueryString;return c(b)===c(a)},getErrors:function(){var a=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){a.push(this.blankText)}return a},getBoxes:function(){return this.query("[isCheckbox]")},eachBox:function(b,a){Ext.Array.forEach(this.getBoxes(),b,a||this)},getChecked:function(){return Ext.Array.filter(this.getBoxes(),function(a){return a.getValue()})},isDirty:function(){return Ext.Array.some(this.getBoxes(),function(a){return a.isDirty()})},setReadOnly:function(a){this.eachBox(function(b){b.setReadOnly(a)});this.readOnly=a},reset:function(){var c=this,b=c.hasActiveError(),a=c.preventMark;c.preventMark=true;c.batchChanges(function(){c.eachBox(function(d){d.reset()})});c.preventMark=a;c.unsetActiveError();if(b){c.doComponentLayout()}},resetOriginalValue:function(){Ext.defer(function(){this.callParent()},1,this)},setValue:function(b){var a=this;a.batchChanges(function(){a.eachBox(function(c){var d=c.getName(),e=false;if(b&&d in b){if(Ext.isArray(b[d])){e=Ext.Array.contains(b[d],c.inputValue)}else{e=b[d]}}c.setValue(e)})});return a},getValue:function(){var a={};this.eachBox(function(c){var d=c.getName(),b=c.inputValue,e;if(c.getValue()){if(d in a){e=a[d];if(!Ext.isArray(e)){e=a[d]=[e]}e.push(b)}else{a[d]=b}}});return a},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var a=this,d=a.getErrors(),c=Ext.isEmpty(d),b=!a.hasActiveError();if(c){a.unsetActiveError()}else{a.setActiveError(d)}if(c!==b){a.fireEvent("validitychange",a,c);a.doComponentLayout()}return c}},function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid"])});Ext.define("Ext.form.CheckboxManager",{extend:"Ext.util.MixedCollection",singleton:true,getByName:function(a){return this.filterBy(function(b){return b.name==a})},getWithValue:function(a,b){return this.filterBy(function(c){return c.name==a&&c.inputValue==b})},getChecked:function(a){return this.filterBy(function(b){return b.name==a&&b.checked})}});Ext.define("Ext.form.FieldSet",{extend:"Ext.container.Container",alias:"widget.fieldset",uses:["Ext.form.field.Checkbox","Ext.panel.Tool","Ext.layout.container.Anchor","Ext.layout.component.FieldSet"],collapsed:false,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:"",renderTpl:['<div id="{id}-body" class="{baseCls}-body"></div>'],maskOnDisable:false,getElConfig:function(){return{tag:"fieldset",id:this.id}},initComponent:function(){var b=this,a=b.baseCls;b.callParent();b.initLegend();b.addChildEls("body");if(b.collapsed){b.addCls(a+"-collapsed");b.collapse()}},onRender:function(b,a){this.callParent(arguments);this.initLegend()},initLegend:function(){var c=this,a,b=c.legend;if(!b&&(c.title||c.checkboxToggle||c.collapsible)){a=[];if(c.checkboxToggle){a.push(c.createCheckboxCmp())}else{if(c.collapsible){a.push(c.createToggleCmp())}}a.push(c.createTitleCmp());b=c.legend=Ext.create("Ext.container.Container",{baseCls:c.baseCls+"-header",ariaRole:"",ownerCt:this,getElConfig:function(){var d={tag:"legend",cls:this.baseCls};if(!Ext.isGecko3){d.children=[{cls:Ext.baseCSSPrefix+"clear"}]}return d},items:a})}if(b&&!b.rendered&&c.rendered){c.legend.render(c.el,c.body)}},createTitleCmp:function(){var a=this;a.titleCmp=Ext.create("Ext.Component",{html:a.title,getElConfig:function(){return{tag:Ext.isGecko3?"span":"div",cls:a.titleCmp.cls,id:a.titleCmp.id}},cls:a.baseCls+"-header-text"});return a.titleCmp},createCheckboxCmp:function(){var a=this,b="-checkbox";a.checkboxCmp=Ext.create("Ext.form.field.Checkbox",{getElConfig:function(){return{tag:Ext.isGecko3?"span":"div",id:a.checkboxCmp.id,cls:a.checkboxCmp.cls}},name:a.checkboxName||a.id+b,cls:a.baseCls+"-header"+b,checked:!a.collapsed,listeners:{change:a.onCheckChange,scope:a}});return a.checkboxCmp},createToggleCmp:function(){var a=this;a.toggleCmp=Ext.create("Ext.panel.Tool",{getElConfig:function(){return{tag:Ext.isGecko3?"span":"div",id:a.toggleCmp.id,cls:a.toggleCmp.cls}},type:"toggle",handler:a.toggle,scope:a});return a.toggleCmp},setTitle:function(b){var a=this;a.title=b;a.initLegend();a.titleCmp.update(b);return a},getTargetEl:function(){return this.body||this.frameBody||this.el},getContentTarget:function(){return this.body},getRefItems:function(a){var c=this.callParent(arguments),b=this.legend;if(b){c.unshift(b);if(a){c.unshift.apply(c,b.getRefItems(true))}}return c},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setExpanded:function(a){var b=this,c=b.checkboxCmp;a=!!a;if(c){c.setValue(a)}if(a){b.removeCls(b.baseCls+"-collapsed")}else{b.addCls(b.baseCls+"-collapsed")}b.collapsed=!a;if(a){b.getComponentLayout().childrenChanged=true}b.doComponentLayout();return b},toggle:function(){this.setExpanded(!!this.collapsed)},onCheckChange:function(b,a){this.setExpanded(a)},beforeDestroy:function(){var a=this.legend;if(a){a.destroy()}this.callParent()}});Ext.define("Ext.form.Label",{extend:"Ext.Component",alias:"widget.label",requires:["Ext.util.Format"],maskOnDisable:false,getElConfig:function(){var a=this;return{tag:"label",id:a.id,htmlFor:a.forId||"",html:a.text?Ext.util.Format.htmlEncode(a.text):(a.html||"")}},setText:function(c,b){var a=this;b=b!==false;if(b){a.text=c;delete a.html}else{a.html=c;delete a.text}if(a.rendered){a.el.dom.innerHTML=b!==false?Ext.util.Format.htmlEncode(c):c}return this}});Ext.define("Ext.form.Panel",{extend:"Ext.panel.Panel",mixins:{fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.form",alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],requires:["Ext.form.Basic","Ext.util.TaskRunner"],layout:"anchor",ariaRole:"form",initComponent:function(){var a=this;if(a.frame){a.border=false}a.initFieldAncestor();a.callParent();a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){var a=this;a.form=a.createForm();a.callParent();a.form.initialize()},createForm:function(){return Ext.create("Ext.form.Basic",this,Ext.applyIf({listeners:{}},this.initialConfig))},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},getValues:function(){return this.getForm().getValues()},beforeDestroy:function(){this.stopPolling();this.form.destroy();this.callParent()},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},disable:function(a){this.callParent(arguments);this.form.getFields().each(function(b){b.disable()})},enable:function(a){this.callParent(arguments);this.form.getFields().each(function(b){b.enable()})},startPolling:function(b){this.stopPolling();var a=Ext.create("Ext.util.TaskRunner",b);a.start({interval:0,run:this.checkChange,scope:this});this.pollTask=a},stopPolling:function(){var a=this.pollTask;if(a){a.stopAll();delete this.pollTask}},checkChange:function(){this.form.getFields().each(function(a){a.checkChange()})}});Ext.define("Ext.form.RadioGroup",{extend:"Ext.form.CheckboxGroup",alias:"widget.radiogroup",allowBlank:true,blankText:"You must select one item in this group",defaultType:"radiofield",groupCls:Ext.baseCSSPrefix+"form-radio-group",getBoxes:function(){return this.query("[isRadio]")},setValue:function(b){var a=this;if(Ext.isObject(b)){Ext.Object.each(b,function(c,e){var d=Ext.form.RadioManager.getWithValue(c,e);d.each(function(g){g.setValue(true)})})}return a}});Ext.define("Ext.form.RadioManager",{extend:"Ext.util.MixedCollection",singleton:true,getByName:function(a){return this.filterBy(function(b){return b.name==a})},getWithValue:function(a,b){return this.filterBy(function(c){return c.name==a&&c.inputValue==b})},getChecked:function(a){return this.findBy(function(b){return b.name==a&&b.checked})}});Ext.define("Ext.form.action.DirectLoad",{extend:"Ext.form.action.Load",requires:["Ext.direct.Manager"],alternateClassName:"Ext.form.Action.DirectLoad",alias:"formaction.directload",type:"directload",run:function(){this.form.api.load.apply(window,this.getArgs())},getArgs:function(){var g=this,c=[],e=g.form,b=e.paramOrder,h=g.getParams(),d,a;if(b){for(d=0,a=b.length;d<a;d++){c.push(h[b[d]])}}else{if(e.paramsAsHash){c.push(h)}}c.push(g.onSuccess,g);return c},processResponse:function(a){return(this.result=a)},onSuccess:function(a,b){if(b.type==Ext.direct.Manager.self.exceptions.SERVER){a={}}this.callParent([a])}});Ext.define("Ext.form.action.DirectSubmit",{extend:"Ext.form.action.Submit",requires:["Ext.direct.Manager"],alternateClassName:"Ext.form.Action.DirectSubmit",alias:"formaction.directsubmit",type:"directsubmit",doSubmit:function(){var b=this,c=Ext.Function.bind(b.onSuccess,b),a=b.buildForm();b.form.api.submit(a,c,b);Ext.removeNode(a)},processResponse:function(a){return(this.result=a)},onSuccess:function(a,b){if(b.type===Ext.direct.Manager.self.exceptions.SERVER){a={}}this.callParent([a])}});Ext.define("Ext.form.action.StandardSubmit",{extend:"Ext.form.action.Submit",alias:"formaction.standardsubmit",doSubmit:function(){var a=this.buildForm();a.submit();Ext.removeNode(a)}});Ext.define("Ext.form.field.Checkbox",{extend:"Ext.form.field.Base",alias:["widget.checkboxfield","widget.checkbox"],alternateClassName:"Ext.form.Checkbox",requires:["Ext.XTemplate","Ext.form.CheckboxManager"],fieldSubTpl:["<tpl if=\"boxLabel && boxLabelAlign == 'before'\">",'<label id="{cmpId}-boxLabelEl" class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">{boxLabel}</label>',"</tpl>",'<input type="button" id="{id}" ','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" hidefocus="true" />',"<tpl if=\"boxLabel && boxLabelAlign == 'after'\">",'<label id="{cmpId}-boxLabelEl" class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">{boxLabel}</label>',"</tpl>",{disableFormats:true,compiled:true}],isCheckbox:true,focusCls:Ext.baseCSSPrefix+"form-cb-focus",fieldBodyCls:Ext.baseCSSPrefix+"form-cb-wrap",checked:false,checkedCls:Ext.baseCSSPrefix+"form-cb-checked",boxLabelCls:Ext.baseCSSPrefix+"form-cb-label",boxLabelAlign:"after",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",ariaRole:"checkbox",onRe:/^on$/i,initComponent:function(){this.callParent(arguments);this.getManager().add(this)},initValue:function(){var b=this,a=!!b.checked;b.originalValue=b.lastValue=a;b.setValue(a)},onRender:function(b,a){var c=this;c.addChildEls("boxLabelEl");Ext.applyIf(c.subTplData,{boxLabel:c.boxLabel,boxLabelCls:c.boxLabelCls,boxLabelAlign:c.boxLabelAlign});c.callParent(arguments)},initEvents:function(){var a=this;a.callParent();a.mon(a.inputEl,"click",a.onBoxClick,a)},onBoxClick:function(b){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(!this.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},setRawValue:function(d){var c=this,e=c.inputEl,a=c.inputValue,b=(d===true||d==="true"||d==="1"||d===1||(((Ext.isString(d)||Ext.isNumber(d))&&a)?d==a:c.onRe.test(d)));if(e){e.dom.setAttribute("aria-checked",b);c[b?"addCls":"removeCls"](c.checkedCls)}c.checked=c.rawValue=b;return b},setValue:function(b){var a=this;if(Ext.isArray(b)){a.getManager().getByName(a.name).each(function(c){c.setValue(Ext.Array.contains(b,c.inputValue))})}else{a.callParent(arguments)}return a},valueToRaw:function(a){return a},onChange:function(b,a){var d=this,c=d.handler;if(c){c.call(d.scope||d,d,b)}d.callParent(arguments)},beforeDestroy:function(){this.callParent();this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=a.readOnly}},setReadOnly:function(c){var a=this,b=a.inputEl;if(b){b.dom.disabled=c||a.disabled}a.readOnly=c},getBodyNaturalWidth:function(){var d=this,b=d.bodyEl,a="white-space",c;b.setStyle(a,"nowrap");c=b.getWidth();b.setStyle(a,"");return c}});Ext.define("Ext.layout.component.field.Trigger",{alias:["layout.triggerfield"],extend:"Ext.layout.component.field.Field",type:"triggerfield",sizeBodyContents:function(d,b){var e=this,a=e.owner,h=a.inputEl,c=a.triggerWrap,g=a.getTriggerWidth();if(a.hideTrigger||a.readOnly||g>0){e.setElementSize(h,Ext.isNumber(d)?d-g:d);c.setWidth(g)}}});Ext.define("Ext.view.View",{extend:"Ext.view.AbstractView",alternateClassName:"Ext.DataView",alias:"widget.dataview",inheritableStatics:{EventMap:{mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",focus:"Focus"}},addCmpEvents:function(){this.addEvents("beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","beforeitemkeydown","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect")},afterRender:function(){var b=this,a;b.callParent();a={scope:b,freezeEvent:true,click:b.handleEvent,mousedown:b.handleEvent,mouseup:b.handleEvent,dblclick:b.handleEvent,contextmenu:b.handleEvent,mouseover:b.handleEvent,mouseout:b.handleEvent,keydown:b.handleEvent};b.mon(b.getTargetEl(),a);if(b.store){b.bindStore(b.store,true)}},handleEvent:function(a){if(this.processUIEvent(a)!==false){this.processSpecialEvent(a)}},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,stillOverItem:function(b,a){var c;if(a&&typeof(a.offsetParent)==="object"){c=(b.type=="mouseout")?b.getRelatedTarget():b.getTarget();return Ext.fly(a).contains(c)}return false},processUIEvent:function(h){var j=this,m=h.getTarget(j.getItemSelector(),j.getTargetEl()),a=this.statics().EventMap,g,c,k=h.type,d=j.mouseOverItem,b;if(!m){if(k=="mouseover"&&j.stillOverItem(h,d)){m=d}if(k=="keydown"){c=j.getSelectionModel().getLastSelected();if(c){m=j.getNode(c)}}}if(m){g=j.indexOf(m);if(!c){c=j.getRecord(m)}if(j.processItemEvent(c,m,g,h)===false){return false}b=j.isNewItemEvent(m,h);if(b===false){return false}if((j["onBeforeItem"+a[b]](c,m,g,h)===false)||(j.fireEvent("beforeitem"+b,j,c,m,g,h)===false)||(j["onItem"+a[b]](c,m,g,h)===false)){return false}j.fireEvent("item"+b,j,c,m,g,h)}else{if((j.processContainerEvent(h)===false)||(j["onBeforeContainer"+a[k]](h)===false)||(j.fireEvent("beforecontainer"+k,j,h)===false)||(j["onContainer"+a[k]](h)===false)){return false}j.fireEvent("container"+k,j,h)}return true},isNewItemEvent:function(d,g){var c=this,a=c.mouseOverItem,b=g.type;switch(b){case"mouseover":if(d===a){return false}c.mouseOverItem=d;return"mouseenter";case"mouseout":if(c.stillOverItem(g,a)){return false}c.mouseOverItem=null;return"mouseleave"}return b},onItemMouseEnter:function(a,c,b,d){if(this.trackOver){this.highlightItem(c)}},onItemMouseLeave:function(a,c,b,d){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,highlightItem:function(b){var a=this;a.clearHighlight();a.highlightedItem=b;Ext.fly(b).addCls(a.overItemCls)},clearHighlight:function(){var b=this,a=b.highlightedItem;if(a){Ext.fly(a).removeCls(b.overItemCls);delete b.highlightedItem}},refresh:function(){var a=this;a.clearHighlight();a.callParent(arguments);if(!a.isFixedHeight()){a.doComponentLayout()}}});Ext.define("Ext.layout.component.BoundList",{extend:"Ext.layout.component.Component",alias:"layout.boundlist",type:"component",beforeLayout:function(){return this.callParent(arguments)||this.owner.refreshed>0},onLayout:function(b,t){var m=this,c=m.owner,j=c.floating,d=c.el,v=d.getXY(),u=Ext.isNumber,a,q,r,p,h,n,g,k,e;if(j){d.setXY([-9999,-9999])}m.setTargetSize(b,t);if(!u(b)){a=c.minWidth;q=c.maxWidth;if(u(a)||u(q)){h=d.getWidth();if(h<a){g=a}else{if(h>q){g=q}}if(g){m.setTargetSize(g)}}}if(!u(t)){r=c.minHeight;p=c.maxHeight;if(u(r)||u(p)){n=d.getHeight();if(n<r){k=r}else{if(n>p){k=p}}if(k){m.setTargetSize(e,k)}}}if(j){d.setXY(v)}},afterLayout:function(){var b=this,a=b.owner.pagingToolbar;b.callParent();if(a){a.doComponentLayout()}},setTargetSize:function(d,b){var g=this,a=g.owner,c=null,e;if(Ext.isNumber(b)){c=b-a.el.getFrameWidth("tb");e=a.pagingToolbar;if(e){c-=e.getHeight()}}g.setElementSize(a.listEl,null,c);g.callParent(arguments)}});Ext.define("Ext.toolbar.TextItem",{extend:"Ext.toolbar.Item",requires:["Ext.XTemplate"],alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",renderTpl:"{text}",baseCls:Ext.baseCSSPrefix+"toolbar-text",onRender:function(){Ext.apply(this.renderData,{text:this.text});this.callParent(arguments)},setText:function(a){if(this.rendered){this.el.update(a);this.ownerCt.doLayout()}else{this.text=a}}});Ext.define("Ext.form.field.Trigger",{extend:"Ext.form.field.Text",alias:["widget.triggerfield","widget.trigger"],requires:["Ext.DomHelper","Ext.util.ClickRepeater","Ext.layout.component.field.Trigger"],alternateClassName:["Ext.form.TriggerField","Ext.form.TwinTriggerField","Ext.form.Trigger"],fieldSubTpl:['<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />','<div id="{cmpId}-triggerWrap" class="{triggerWrapCls}" role="presentation">',"{triggerEl}",'<div class="{clearCls}" role="presentation"></div>',"</div>",{compiled:true,disableFormats:true}],triggerBaseCls:Ext.baseCSSPrefix+"form-trigger",triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",hideTrigger:false,editable:true,readOnly:false,repeatTriggerClick:false,autoSize:Ext.emptyFn,monitorTab:true,mimicing:false,triggerIndexRe:/trigger-index-(\d+)/,componentLayout:"triggerfield",initComponent:function(){this.wrapFocusCls=this.triggerWrapCls+"-focus";this.callParent(arguments)},onRender:function(d,a){var e=this,j,g=e.triggerBaseCls,h=e.triggerWrapCls,b=[],c;if(!e.trigger1Cls){e.trigger1Cls=e.triggerCls}for(c=0;(j=e["trigger"+(c+1)+"Cls"])||c<1;c++){b.push({cls:[Ext.baseCSSPrefix+"trigger-index-"+c,g,j].join(" "),role:"button"})}b[c-1].cls+=" "+g+"-last";e.addChildEls("triggerWrap");Ext.applyIf(e.subTplData,{triggerWrapCls:h,triggerEl:Ext.DomHelper.markup(b),clearCls:e.clearCls});e.callParent(arguments);e.triggerEl=Ext.select("."+g,true,e.triggerWrap.dom);e.doc=Ext.getDoc();e.initTrigger()},onEnable:function(){this.callParent();this.triggerWrap.unmask()},onDisable:function(){this.callParent();this.triggerWrap.mask()},afterRender:function(){this.callParent();this.updateEditState();this.triggerEl.unselectable()},updateEditState:function(){var c=this,e=c.inputEl,a=c.triggerWrap,d=Ext.baseCSSPrefix+"trigger-noedit",b,g;if(c.rendered){if(c.readOnly){e.addCls(d);g=true;b=false}else{if(c.editable){e.removeCls(d);g=false}else{e.addCls(d);g=true}b=!c.hideTrigger}a.setDisplayed(b);e.dom.readOnly=g;c.doComponentLayout()}},getTriggerWidth:function(){var c=this,b=c.triggerWrap,a=0;if(b&&!c.hideTrigger&&!c.readOnly){c.triggerEl.each(function(d){a+=d.getWidth()});a+=c.triggerWrap.getFrameWidth("lr")}return a},setHideTrigger:function(a){if(a!=this.hideTrigger){this.hideTrigger=a;this.updateEditState()}},setEditable:function(a){if(a!=this.editable){this.editable=a;this.updateEditState()}},setReadOnly:function(a){if(a!=this.readOnly){this.readOnly=a;this.updateEditState()}},initTrigger:function(){var c=this,a=c.triggerWrap,b=c.triggerEl;if(c.repeatTriggerClick){c.triggerRepeater=Ext.create("Ext.util.ClickRepeater",a,{preventDefault:true,handler:function(d,g){c.onTriggerWrapClick(g)}})}else{c.mon(c.triggerWrap,"click",c.onTriggerWrapClick,c)}b.addClsOnOver(c.triggerBaseCls+"-over");b.each(function(e,g,d){e.addClsOnOver(c["trigger"+(d+1)+"Cls"]+"-over")});b.addClsOnClick(c.triggerBaseCls+"-click");b.each(function(e,g,d){e.addClsOnClick(c["trigger"+(d+1)+"Cls"]+"-click")})},onDestroy:function(){var a=this;Ext.destroyMembers(a,"triggerRepeater","triggerWrap","triggerEl");delete a.doc;a.callParent()},onFocus:function(){var a=this;a.callParent();if(!a.mimicing){a.bodyEl.addCls(a.wrapFocusCls);a.mimicing=true;a.mon(a.doc,"mousedown",a.mimicBlur,a,{delay:10});if(a.monitorTab){a.on("specialkey",a.checkTab,a)}}},checkTab:function(a,b){if(!this.ignoreMonitorTab&&b.getKey()==b.TAB){this.triggerBlur()}},onBlur:Ext.emptyFn,mimicBlur:function(a){if(!this.isDestroyed&&!this.bodyEl.contains(a.target)&&this.validateBlur(a)){this.triggerBlur()}},triggerBlur:function(){var a=this;a.mimicing=false;a.mun(a.doc,"mousedown",a.mimicBlur,a);if(a.monitorTab&&a.inputEl){a.un("specialkey",a.checkTab,a)}Ext.form.field.Trigger.superclass.onBlur.call(a);if(a.bodyEl){a.bodyEl.removeCls(a.wrapFocusCls)}},beforeBlur:Ext.emptyFn,validateBlur:function(a){return true},onTriggerWrapClick:function(h){var g=this,d=h&&h.getTarget("."+Ext.baseCSSPrefix+"form-trigger",null),c=d&&d.className.match(g.triggerIndexRe),a,b;if(c&&!g.readOnly){a=parseInt(c[1],10);b=g["onTrigger"+(a+1)+"Click"]||g.onTriggerClick;if(b){b.call(g,h)}}},onTriggerClick:Ext.emptyFn});Ext.define("Ext.form.field.Picker",{extend:"Ext.form.field.Trigger",alias:"widget.pickerfield",alternateClassName:"Ext.form.Picker",requires:["Ext.util.KeyNav"],matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:Ext.baseCSSPrefix+"pickerfield-open",editable:true,initComponent:function(){this.callParent();this.addEvents("expand","collapse","select")},initEvents:function(){var a=this;a.callParent();a.keyNav=Ext.create("Ext.util.KeyNav",a.inputEl,{down:function(){if(!a.isExpanded){a.onTriggerClick()}},esc:a.collapse,scope:a,forceKeyDown:true});if(!a.editable){a.mon(a.inputEl,"click",a.onTriggerClick,a)}if(Ext.isGecko){a.inputEl.dom.setAttribute("autocomplete","off")}},expand:function(){var c=this,a,b,d;if(c.rendered&&!c.isExpanded&&!c.isDestroyed){a=c.bodyEl;b=c.getPicker();d=c.collapseIf;b.show();c.isExpanded=true;c.alignPicker();a.addCls(c.openCls);c.mon(Ext.getDoc(),{mousewheel:d,mousedown:d,scope:c});Ext.EventManager.onWindowResize(c.alignPicker,c);c.fireEvent("expand",c);c.onExpand()}},onExpand:Ext.emptyFn,alignPicker:function(){var b=this,a;if(b.isExpanded){a=b.getPicker();if(b.matchFieldWidth){a.setSize(b.bodyEl.getWidth(),a.store&&a.store.getCount()?null:0)}if(a.isFloating()){b.doAlign()}}},doAlign:function(){var d=this,c=d.picker,a="-above",b;d.picker.alignTo(d.inputEl,d.pickerAlign,d.pickerOffset);b=c.el.getY()<d.inputEl.getY();d.bodyEl[b?"addCls":"removeCls"](d.openCls+a);c[b?"addCls":"removeCls"](c.baseCls+a)},collapse:function(){if(this.isExpanded&&!this.isDestroyed){var d=this,c=d.openCls,b=d.picker,e=Ext.getDoc(),g=d.collapseIf,a="-above";b.hide();d.isExpanded=false;d.bodyEl.removeCls([c,c+a]);b.el.removeCls(b.baseCls+a);e.un("mousewheel",g,d);e.un("mousedown",g,d);Ext.EventManager.removeResizeListener(d.alignPicker,d);d.fireEvent("collapse",d);d.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.isDestroyed&&!b.within(a.bodyEl,false,true)&&!b.within(a.picker.el,false,true)){a.collapse()}},getPicker:function(){var a=this;return a.picker||(a.picker=a.createPicker())},createPicker:Ext.emptyFn,onTriggerClick:function(){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.expand()}a.inputEl.focus()}},mimicBlur:function(c){var b=this,a=b.picker;if(!a||!c.within(a.el,false,true)){b.callParent(arguments)}},onDestroy:function(){var b=this,a=b.picker;Ext.EventManager.removeResizeListener(b.alignPicker,b);Ext.destroy(b.keyNav);if(a){delete a.pickerField;a.destroy()}b.callParent()}});Ext.define("Ext.form.field.Spinner",{extend:"Ext.form.field.Trigger",alias:"widget.spinnerfield",alternateClassName:"Ext.form.Spinner",requires:["Ext.util.KeyNav"],trigger1Cls:Ext.baseCSSPrefix+"form-spinner-up",trigger2Cls:Ext.baseCSSPrefix+"form-spinner-down",spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,initComponent:function(){this.callParent();this.addEvents("spin","spinup","spindown")},onRender:function(){var b=this,a;b.callParent(arguments);a=b.triggerEl;b.spinUpEl=a.item(0);b.spinDownEl=a.item(1);b.setSpinUpEnabled(b.spinUpEnabled);b.setSpinDownEnabled(b.spinDownEnabled);if(b.keyNavEnabled){b.spinnerKeyNav=Ext.create("Ext.util.KeyNav",b.inputEl,{scope:b,up:b.spinUp,down:b.spinDown})}if(b.mouseWheelEnabled){b.mon(b.bodyEl,"mousewheel",b.onMouseWheel,b)}},getTriggerWidth:function(){return this.hideTrigger||this.readOnly?0:this.spinUpEl.getWidth()+this.triggerWrap.getFrameWidth("lr")},onTrigger1Click:function(){this.spinUp()},onTrigger2Click:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent("spin",a,"up");a.fireEvent("spinup",a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent("spin",a,"down");a.fireEvent("spindown",a);a.onSpinDown()}},setSpinUpEnabled:function(a){var b=this,c=b.spinUpEnabled;b.spinUpEnabled=a;if(c!==a&&b.rendered){b.spinUpEl[a?"removeCls":"addCls"](b.trigger1Cls+"-disabled")}},setSpinDownEnabled:function(a){var b=this,c=b.spinDownEnabled;b.spinDownEnabled=a;if(c!==a&&b.rendered){b.spinDownEl[a?"removeCls":"addCls"](b.trigger2Cls+"-disabled")}},onMouseWheel:function(b){var a=this,c;if(a.hasFocus){c=b.getWheelDelta();if(c>0){a.spinUp()}else{if(c<0){a.spinDown()}}b.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav","spinUpEl","spinDownEl");this.callParent()}});Ext.define("Ext.form.field.Number",{extend:"Ext.form.field.Spinner",alias:"widget.numberfield",alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowDecimals:true,decimalSeparator:".",decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var a=this,b;a.callParent();a.setMinValue(a.minValue);a.setMaxValue(a.maxValue);if(a.disableKeyFilter!==true){b=a.baseChars+"";if(a.allowDecimals){b+=a.decimalSeparator}if(a.minValue<0){b+="-"}b=Ext.String.escapeRegex(b);a.maskRe=new RegExp("["+b+"]");if(a.autoStripChars){a.stripCharsRe=new RegExp("[^"+b+"]","gi")}}},getErrors:function(c){var b=this,e=b.callParent(arguments),d=Ext.String.format,a;c=Ext.isDefined(c)?c:this.processRawValue(this.getRawValue());if(c.length<1){return e}c=String(c).replace(b.decimalSeparator,".");if(isNaN(c)){e.push(d(b.nanText,c))}a=b.parseValue(c);if(b.minValue===0&&a<0){e.push(this.negativeText)}else{if(a<b.minValue){e.push(d(b.minText,b.minValue))}}if(a>b.maxValue){e.push(d(b.maxText,b.maxValue))}return e},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(c){var b=this,a=b.decimalSeparator;c=b.parseValue(c);c=b.fixPrecision(c);c=Ext.isNumber(c)?c:parseFloat(String(c).replace(a,"."));c=isNaN(c)?"":String(c).replace(".",a);return c},onChange:function(){var b=this,c=b.getValue(),a=c===null;b.callParent(arguments);b.setSpinUpEnabled(a||c<b.maxValue);b.setSpinDownEnabled(a||c>b.minValue)},setMinValue:function(a){this.minValue=Ext.Number.from(a,Number.NEGATIVE_INFINITY)},setMaxValue:function(a){this.maxValue=Ext.Number.from(a,Number.MAX_VALUE)},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?null:a},fixPrecision:function(d){var c=this,b=isNaN(d),a=c.decimalPrecision;if(b||!d){return b?"":d}else{if(!c.allowDecimals||a<=0){a=0}}return parseFloat(Ext.Number.toFixed(parseFloat(d),a))},beforeBlur:function(){var b=this,a=b.parseValue(b.getRawValue());if(!Ext.isEmpty(a)){b.setValue(a)}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}}});Ext.define("Ext.toolbar.Paging",{extend:"Ext.toolbar.Toolbar",alias:"widget.pagingtoolbar",alternateClassName:"Ext.PagingToolbar",requires:["Ext.toolbar.TextItem","Ext.form.field.Number"],displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,getPagingItems:function(){var a=this;return[{itemId:"first",tooltip:a.firstText,overflowText:a.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:true,handler:a.moveFirst,scope:a},{itemId:"prev",tooltip:a.prevText,overflowText:a.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:true,handler:a.movePrevious,scope:a},"-",a.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,selectOnFocus:true,submitValue:false,width:a.inputItemWidth,margins:"-1 2 3 2",listeners:{scope:a,keydown:a.onPagingKeyDown,blur:a.onPagingBlur}},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(a.afterPageText,1)},"-",{itemId:"next",tooltip:a.nextText,overflowText:a.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:true,handler:a.moveNext,scope:a},{itemId:"last",tooltip:a.lastText,overflowText:a.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:true,handler:a.moveLast,scope:a},"-",{itemId:"refresh",tooltip:a.refreshText,overflowText:a.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",handler:a.doRefresh,scope:a}]},initComponent:function(){var b=this,c=b.getPagingItems(),a=b.items||b.buttons||[];if(b.prependButtons){b.items=a.concat(c)}else{b.items=c.concat(a)}delete b.buttons;if(b.displayInfo){b.items.push("->");b.items.push({xtype:"tbtext",itemId:"displayItem"})}b.callParent();b.addEvents("change","beforechange");b.on("afterlayout",b.onLoad,b,{single:true});b.bindStore(b.store||"ext-empty-store",true)},updateInfo:function(){var e=this,c=e.child("#displayItem"),a=e.store,b=e.getPageData(),d,g;if(c){d=a.getCount();if(d===0){g=e.emptyMsg}else{g=Ext.String.format(e.displayMsg,b.fromRecord,b.toRecord,b.total)}c.setText(g);e.doComponentLayout()}},onLoad:function(){var e=this,d,b,c,a;if(!e.rendered){return}d=e.getPageData();b=d.currentPage;c=d.pageCount;a=Ext.String.format(e.afterPageText,isNaN(c)?1:c);e.child("#afterTextItem").setText(a);e.child("#inputItem").setValue(b);e.child("#first").setDisabled(b===1);e.child("#prev").setDisabled(b===1);e.child("#next").setDisabled(b===c);e.child("#last").setDisabled(b===c);e.child("#refresh").enable();e.updateInfo();e.fireEvent("change",e,d)},getPageData:function(){var b=this.store,a=b.getTotalCount();return{total:a,currentPage:b.currentPage,pageCount:Math.ceil(a/b.pageSize),fromRecord:((b.currentPage-1)*b.pageSize)+1,toRecord:Math.min(b.currentPage*b.pageSize,a)}},onLoadError:function(){if(!this.rendered){return}this.child("#refresh").enable()},readPageFromInput:function(b){var a=this.child("#inputItem").getValue(),c=parseInt(a,10);if(!a||isNaN(c)){this.child("#inputItem").setValue(b.currentPage);return false}return c},onPagingFocus:function(){this.child("#inputItem").select()},onPagingBlur:function(b){var a=this.getPageData().currentPage;this.child("#inputItem").setValue(a)},onPagingKeyDown:function(j,h){var d=this,b=h.getKey(),c=d.getPageData(),a=h.shiftKey?10:1,g;if(b==h.RETURN){h.stopEvent();g=d.readPageFromInput(c);if(g!==false){g=Math.min(Math.max(1,g),c.pageCount);if(d.fireEvent("beforechange",d,g)!==false){d.store.loadPage(g)}}}else{if(b==h.HOME||b==h.END){h.stopEvent();g=b==h.HOME?1:c.pageCount;j.setValue(g)}else{if(b==h.UP||b==h.PAGEUP||b==h.DOWN||b==h.PAGEDOWN){h.stopEvent();g=d.readPageFromInput(c);if(g){if(b==h.DOWN||b==h.PAGEDOWN){a*=-1}g+=a;if(g>=1&&g<=c.pages){j.setValue(g)}}}}}},beforeLoad:function(){if(this.rendered&&this.refresh){this.refresh.disable()}},doLoad:function(a){if(this.fireEvent("beforechange",this,o)!==false){this.store.load()}},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1)}},movePrevious:function(){var b=this,a=b.store.currentPage-1;if(a>0){if(b.fireEvent("beforechange",b,a)!==false){b.store.previousPage()}}},moveNext:function(){var c=this,b=c.getPageData().pageCount,a=c.store.currentPage+1;if(a<=b){if(c.fireEvent("beforechange",c,a)!==false){c.store.nextPage()}}},moveLast:function(){var b=this,a=b.getPageData().pageCount;if(b.fireEvent("beforechange",b,a)!==false){b.store.loadPage(a)}},doRefresh:function(){var a=this,b=a.store.currentPage;if(a.fireEvent("beforechange",a,b)!==false){a.store.loadPage(b)}},bindStore:function(a,b){var c=this;if(!b&&c.store){if(a!==c.store&&c.store.autoDestroy){c.store.destroyStore()}else{c.store.un("beforeload",c.beforeLoad,c);c.store.un("load",c.onLoad,c);c.store.un("exception",c.onLoadError,c)}if(!a){c.store=null}}if(a){a=Ext.data.StoreManager.lookup(a);a.on({scope:c,beforeload:c.beforeLoad,load:c.onLoad,exception:c.onLoadError})}c.store=a},unbind:function(a){this.bindStore(null)},bind:function(a){this.bindStore(a)},onDestroy:function(){this.bindStore(null);this.callParent()}});Ext.define("Ext.view.BoundList",{extend:"Ext.view.View",alias:"widget.boundlist",alternateClassName:"Ext.BoundList",requires:["Ext.layout.component.BoundList","Ext.toolbar.Paging"],pageSize:0,autoScroll:true,baseCls:Ext.baseCSSPrefix+"boundlist",itemCls:Ext.baseCSSPrefix+"boundlist-item",listItemCls:"",shadow:false,trackOver:true,refreshed:0,ariaRole:"listbox",componentLayout:"boundlist",renderTpl:['<div id="{id}-listEl" class="list-ct"></div>'],initComponent:function(){var b=this,a=b.baseCls,c=b.itemCls;b.selectedItemCls=a+"-selected";b.overItemCls=a+"-item-over";b.itemSelector="."+c;if(b.floating){b.addCls(a+"-floating")}if(!b.tpl){b.tpl=Ext.create("Ext.XTemplate",'<ul><tpl for=".">','<li role="option" class="'+c+'">'+b.getInnerTpl(b.displayField)+"</li>","</tpl></ul>")}else{if(Ext.isString(b.tpl)){b.tpl=Ext.create("Ext.XTemplate",b.tpl)}}if(b.pageSize){b.pagingToolbar=b.createPagingToolbar()}b.callParent();b.addChildEls("listEl")},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{pageSize:this.pageSize,store:this.store,border:false})},onRender:function(){var b=this,a=b.pagingToolbar;b.callParent(arguments);if(a){a.render(b.el)}},bindStore:function(a,b){var d=this,c=d.pagingToolbar;d.callParent(arguments);if(c){c.bindStore(a,b)}},getTargetEl:function(){return this.listEl||this.el},getInnerTpl:function(a){return"{"+a+"}"},refresh:function(){var a=this;a.callParent();if(a.isVisible()){a.refreshed++;a.doComponentLayout();a.refreshed--}},initAria:function(){this.callParent();var a=this.getSelectionModel(),c=a.getSelectionMode(),b=this.getActionEl();if(c!=="SINGLE"){b.dom.setAttribute("aria-multiselectable",true)}},onDestroy:function(){Ext.destroyMembers(this,"pagingToolbar","listEl");this.callParent()}});Ext.define("Ext.view.BoundListKeyNav",{extend:"Ext.util.KeyNav",requires:"Ext.view.BoundList",constructor:function(b,a){var c=this;c.boundList=a.boundList;c.callParent([b,Ext.apply({},a,c.defaultHandlers)])},defaultHandlers:{up:function(){var e=this,b=e.boundList,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c>0?c-1:d.getCount()-1;e.highlightAt(a)},down:function(){var e=this,b=e.boundList,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c<d.getCount()-1?c+1:0;e.highlightAt(a)},pageup:function(){},pagedown:function(){},home:function(){this.highlightAt(0)},end:function(){var a=this;a.highlightAt(a.boundList.all.getCount()-1)},enter:function(a){this.selectHighlighted(a)}},highlightAt:function(b){var a=this.boundList,c=a.all.item(b);if(c){c=c.dom;a.highlightItem(c);a.getTargetEl().scrollChildIntoView(c,false)}},selectHighlighted:function(g){var d=this,b=d.boundList,c=b.highlightedItem,a=b.getSelectionModel();if(c){a.selectWithEvent(b.getRecord(c),g)}}});Ext.define("Ext.form.field.ComboBox",{extend:"Ext.form.field.Picker",requires:["Ext.util.DelayedTask","Ext.EventObject","Ext.view.BoundList","Ext.view.BoundListKeyNav","Ext.data.StoreManager"],alternateClassName:"Ext.form.ComboBox",alias:["widget.combobox","widget.combo"],triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",hiddenDataCls:Ext.baseCSSPrefix+"hide-display "+Ext.baseCSSPrefix+"form-data-hidden",fieldSubTpl:['<div class="{hiddenDataCls}" role="presentation"></div>','<input id="{id}" type="{type}" ','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />','<div id="{cmpId}-triggerWrap" class="{triggerWrapCls}" role="presentation">',"{triggerEl}",'<div class="{clearCls}" role="presentation"></div>',"</div>",{compiled:true,disableFormats:true}],getSubTplData:function(){var a=this;Ext.applyIf(a.subTplData,{hiddenDataCls:a.hiddenDataCls});return a.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments);a.setHiddenValue(a.value)},multiSelect:false,delimiter:", ",displayField:"text",triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,pageSize:0,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,defaultListConfig:{emptyText:"",loadingText:"Loading...",loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},ignoreSelection:0,initComponent:function(){var e=this,c=Ext.isDefined,b=e.store,d=e.transform,a,g;Ext.applyIf(e.renderSelectors,{hiddenDataEl:"."+e.hiddenDataCls.split(" ").join(".")});this.addEvents("beforequery","select","beforeselect","beforedeselect");if(d){a=Ext.getDom(d);if(a){b=Ext.Array.map(Ext.Array.from(a.options),function(h){return[h.value,h.text]});if(!e.name){e.name=a.name}if(!("value" in e)){e.value=a.value}}}e.bindStore(b||"ext-empty-store",true);b=e.store;if(b.autoCreated){e.queryMode="local";e.valueField=e.displayField="field1";if(!b.expanded){e.displayField="field2"}}if(!c(e.valueField)){e.valueField=e.displayField}g=e.queryMode==="local";if(!c(e.queryDelay)){e.queryDelay=g?10:500}if(!c(e.minChars)){e.minChars=g?0:4}if(!e.displayTpl){e.displayTpl=Ext.create("Ext.XTemplate",'<tpl for=".">{[typeof values === "string" ? values : values["'+e.displayField+'"]]}<tpl if="xindex < xcount">'+e.delimiter+"</tpl></tpl>")}else{if(Ext.isString(e.displayTpl)){e.displayTpl=Ext.create("Ext.XTemplate",e.displayTpl)}}e.callParent();e.doQueryTask=Ext.create("Ext.util.DelayedTask",e.doRawQuery,e);if(e.store.getCount()>0){e.setValue(e.value)}if(a){e.render(a.parentNode,a);Ext.removeNode(a);delete e.renderTo}},getStore:function(){return this.store},beforeBlur:function(){this.doQueryTask.cancel();this.assertValue()},assertValue:function(){var a=this,b=a.getRawValue(),c;if(a.forceSelection){if(a.multiSelect){if(b!==a.getDisplayValue()){a.setValue(a.lastSelection)}}else{c=a.findRecordByDisplay(b);if(c){a.select(c)}else{a.setValue(a.lastSelection)}}}a.collapse()},onTypeAhead:function(){var e=this,d=e.displayField,b=e.store.findRecord(d,e.getRawValue()),c=e.getPicker(),g,a,h;if(b){g=b.get(d);a=g.length;h=e.getRawValue().length;c.highlightItem(c.getNode(b));if(h!==0&&h!==a){e.setRawValue(g);e.selectText(h,g.length)}}},resetToDefault:function(){},bindStore:function(a,b){var c=this,d=c.store;if(d&&!b){if(d!==a&&d.autoDestroy){d.destroyStore()}else{d.un({scope:c,load:c.onLoad,exception:c.collapse})}if(!a){c.store=null;if(c.picker){c.picker.bindStore(null)}}}if(a){if(!b){c.resetToDefault()}c.store=Ext.data.StoreManager.lookup(a);c.store.on({scope:c,load:c.onLoad,exception:c.collapse});if(c.picker){c.picker.bindStore(a)}}},onLoad:function(){var a=this,b=a.value;if(a.rawQuery){a.rawQuery=false;a.syncSelection();if(a.picker&&!a.picker.getSelectionModel().hasSelection()){a.doAutoSelect()}}else{if(a.value){a.setValue(a.value)}else{if(a.store.getCount()){a.doAutoSelect()}else{a.setValue("")}}}},doRawQuery:function(){this.doQuery(this.getRawValue(),false,true)},doQuery:function(h,c,e){h=h||"";var d=this,b={query:h,forceAll:c,combo:d,cancel:false},a=d.store,g=d.queryMode==="local";if(d.fireEvent("beforequery",b)===false||b.cancel){return false}h=b.query;c=b.forceAll;if(c||(h.length>=d.minChars)){d.expand();if(!d.queryCaching||d.lastQuery!==h){d.lastQuery=h;if(g){if(c){a.clearFilter()}else{a.clearFilter(true);a.filter(d.displayField,h)}}else{d.rawQuery=e;if(d.pageSize){d.loadPage(1)}else{a.load({params:d.getParams(h)})}}}if(d.getRawValue()!==d.getDisplayValue()){d.ignoreSelection++;d.picker.getSelectionModel().deselectAll();d.ignoreSelection--}if(g){d.doAutoSelect()}if(d.typeAhead){d.doTypeAhead()}}return true},loadPage:function(a){this.store.loadPage(a,{params:this.getParams(this.lastQuery)})},onPageChange:function(b,a){this.loadPage(a);return false},getParams:function(c){var b={},a=this.queryParam;if(a){b[a]=c}return b},doAutoSelect:function(){var b=this,a=b.picker,c,d;if(a&&b.autoSelect&&b.store.getCount()>0){c=a.getSelectionModel().lastSelected;d=a.getNode(c||0);if(d){a.highlightItem(d);a.listEl.scrollChildIntoView(d,false)}}},doTypeAhead:function(){if(!this.typeAheadTask){this.typeAheadTask=Ext.create("Ext.util.DelayedTask",this.onTypeAhead,this)}if(this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.typeAheadTask.delay(this.typeAheadDelay)}},onTriggerClick:function(){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.onFocus({});if(a.triggerAction==="all"){a.doQuery(a.allQuery,true)}else{a.doQuery(a.getRawValue(),false,true)}}a.inputEl.focus()}},onKeyUp:function(d,b){var c=this,a=d.getKey();if(!c.readOnly&&!c.disabled&&c.editable){c.lastKey=a;if(!d.isSpecialKey()||a==d.BACKSPACE||a==d.DELETE){c.doQueryTask.delay(c.queryDelay)}}if(c.enableKeyEvents){c.callParent(arguments)}},initEvents:function(){var a=this;a.callParent();if(!a.enableKeyEvents){a.mon(a.inputEl,"keyup",a.onKeyUp,a)}},onDestroy:function(){this.bindStore(null);this.callParent()},createPicker:function(){var c=this,a,d=Ext.baseCSSPrefix+"menu",b=Ext.apply({pickerField:c,selModel:{mode:c.multiSelect?"SIMPLE":"SINGLE"},floating:true,hidden:true,ownerCt:c.ownerCt,cls:c.el.up("."+d)?d:"",store:c.store,displayField:c.displayField,focusOnToFront:false,pageSize:c.pageSize,tpl:c.tpl},c.listConfig,c.defaultListConfig);a=c.picker=Ext.create("Ext.view.BoundList",b);if(c.pageSize){a.pagingToolbar.on("beforechange",c.onPageChange,c)}c.mon(a,{itemclick:c.onItemClick,refresh:c.onListRefresh,scope:c});c.mon(a.getSelectionModel(),{beforeselect:c.onBeforeSelect,beforedeselect:c.onBeforeDeselect,selectionchange:c.onListSelectionChange,scope:c});return a},alignPicker:function(){var b=this,a=b.picker,e=b.getPosition()[1]-Ext.getBody().getScroll().top,d=Ext.Element.getViewHeight()-e-b.getHeight(),c=Math.max(e,d);b.callParent();if(a.getHeight()>c){a.setHeight(c-5);b.doAlign()}},onListRefresh:function(){this.alignPicker();this.syncSelection()},onItemClick:function(d,a){var g=this,b=g.lastSelection,c=g.valueField,e;if(!g.multiSelect&&b){e=b[0];if(e&&(a.get(c)===e.get(c))){g.displayTplData=[a.data];g.setRawValue(g.getDisplayValue());g.collapse()}}},onBeforeSelect:function(b,a){return this.fireEvent("beforeselect",this,a,a.index)},onBeforeDeselect:function(b,a){return this.fireEvent("beforedeselect",this,a,a.index)},onListSelectionChange:function(b,d){var a=this,e=a.multiSelect,c=d.length>0;if(!a.ignoreSelection&&a.isExpanded){if(!e){Ext.defer(a.collapse,1,a)}if(e||c){a.setValue(d,false)}if(c){a.fireEvent("select",a,d)}a.inputEl.focus()}},onExpand:function(){var d=this,a=d.listKeyNav,c=d.selectOnTab,b=d.getPicker();if(a){a.enable()}else{a=d.listKeyNav=Ext.create("Ext.view.BoundListKeyNav",this.inputEl,{boundList:b,forceKeyDown:true,tab:function(g){if(c){this.selectHighlighted(g);d.triggerBlur()}return true}})}if(c){d.ignoreMonitorTab=true}Ext.defer(a.enable,1,a);d.inputEl.focus()},onCollapse:function(){var b=this,a=b.listKeyNav;if(a){a.disable();b.ignoreMonitorTab=false}},select:function(a){this.setValue(a,true)},findRecord:function(d,c){var b=this.store,a=b.findExact(d,c);return a!==-1?b.getAt(a):false},findRecordByValue:function(a){return this.findRecord(this.valueField,a)},findRecordByDisplay:function(a){return this.findRecord(this.displayField,a)},setValue:function(m,e){var k=this,c=k.valueNotFoundText,n=k.inputEl,g,j,h,b=[],a=[],d=[];if(k.store.loading){k.value=m;k.setHiddenValue(k.value);return k}m=Ext.Array.from(m);for(g=0,j=m.length;g<j;g++){h=m[g];if(!h||!h.isModel){h=k.findRecordByValue(h)}if(h){b.push(h);a.push(h.data);d.push(h.get(k.valueField))}else{if(!k.forceSelection){a.push(m[g]);d.push(m[g])}else{if(Ext.isDefined(c)){a.push(c)}}}}k.setHiddenValue(d);k.value=k.multiSelect?d:d[0];if(!Ext.isDefined(k.value)){k.value=null}k.displayTplData=a;k.lastSelection=k.valueModels=b;if(n&&k.emptyText&&!Ext.isEmpty(m)){n.removeCls(k.emptyCls)}k.setRawValue(k.getDisplayValue());k.checkChange();if(e!==false){k.syncSelection()}k.applyEmptyText();return k},setHiddenValue:function(c){var g=this,e;if(!g.hiddenDataEl){return}c=Ext.Array.from(c);var j=g.hiddenDataEl.dom,h=j.childNodes,b=h[0],a=c.length,d=h.length;if(!b&&a>0){g.hiddenDataEl.update(Ext.DomHelper.markup({tag:"input",type:"hidden",name:g.name}));d=1;b=j.firstChild}while(d>a){j.removeChild(h[0]);--d}while(d<a){j.appendChild(b.cloneNode(true));++d}for(e=0;e<a;e++){h[e].value=c[e]}},getDisplayValue:function(){return this.displayTpl.apply(this.displayTplData)},getValue:function(){var b=this,a=b.picker,d=b.getRawValue(),c=b.value;if(b.getDisplayValue()!==d){c=d;b.value=b.displayTplData=b.valueModels=null;if(a){b.ignoreSelection++;a.getSelectionModel().deselectAll();b.ignoreSelection--}}return c},getSubmitValue:function(){return this.getValue()},isEqual:function(e,d){var b=Ext.Array.from,c,a;e=b(e);d=b(d);a=e.length;if(a!==d.length){return false}for(c=0;c<a;c++){if(d[c]!==e[c]){return false}}return true},clearValue:function(){this.setValue([])},syncSelection:function(){var d=this,e=Ext.Array,b=d.picker,c,a;if(b){c=[];e.forEach(d.valueModels||[],function(g){if(g&&g.isModel&&d.store.indexOf(g)>=0){c.push(g)}});d.ignoreSelection++;a=b.getSelectionModel();a.deselectAll();if(c.length){a.select(c)}d.ignoreSelection--}}});Ext.define("Ext.picker.Month",{extend:"Ext.Component",requires:["Ext.XTemplate","Ext.util.ClickRepeater","Ext.Date","Ext.button.Button"],alias:"widget.monthpicker",alternateClassName:"Ext.MonthPicker",renderTpl:['<div id="{id}-bodyEl" class="{baseCls}-body">','<div class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month"><a href="#" hidefocus="on">{.}</a></div>',"</tpl>","</div>",'<div class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<button id="{id}-prevEl" class="{baseCls}-yearnav-prev"></button>','<button id="{id}-nextEl" class="{baseCls}-yearnav-next"></button>',"</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year"><a href="#" hidefocus="on">{.}</a></div>',"</tpl>","</div>",'<div class="'+Ext.baseCSSPrefix+'clear"></div>',"</div>",'<tpl if="showButtons">','<div id="{id}-buttonsEl" class="{baseCls}-buttons"></div>',"</tpl>"],okText:"OK",cancelText:"Cancel",baseCls:Ext.baseCSSPrefix+"monthpicker",showButtons:true,width:178,smallCls:Ext.baseCSSPrefix+"monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var a=this;a.selectedCls=a.baseCls+"-selected";a.addEvents("cancelclick","monthclick","monthdblclick","okclick","select","yearclick","yeardblclick");if(a.small){a.addCls(a.smallCls)}a.setValue(a.value);a.activeYear=a.getYear(new Date().getFullYear()-4,-4);this.callParent()},onRender:function(e,c){var h=this,d=0,b=[],a=Ext.Date.getShortMonthName,g=h.monthOffset;for(;d<g;++d){b.push(a(d),a(d+g))}Ext.apply(h.renderData,{months:b,years:h.getYears(),showButtons:h.showButtons});h.addChildEls("bodyEl","prevEl","nextEl","buttonsEl");h.callParent(arguments)},afterRender:function(){var b=this,a=b.bodyEl,c=b.buttonsEl;b.callParent();b.mon(a,"click",b.onBodyClick,b);b.mon(a,"dblclick",b.onBodyClick,b);b.years=a.select("."+b.baseCls+"-year a");b.months=a.select("."+b.baseCls+"-month a");if(b.showButtons){b.okBtn=Ext.create("Ext.button.Button",{text:b.okText,renderTo:c,handler:b.onOkClick,scope:b});b.cancelBtn=Ext.create("Ext.button.Button",{text:b.cancelText,renderTo:c,handler:b.onCancelClick,scope:b})}b.backRepeater=Ext.create("Ext.util.ClickRepeater",b.prevEl,{handler:Ext.Function.bind(b.adjustYear,b,[-b.totalYears])});b.prevEl.addClsOnOver(b.baseCls+"-yearnav-prev-over");b.nextRepeater=Ext.create("Ext.util.ClickRepeater",b.nextEl,{handler:Ext.Function.bind(b.adjustYear,b,[b.totalYears])});b.nextEl.addClsOnOver(b.baseCls+"-yearnav-next-over");b.updateBody()},setValue:function(d){var c=this,e=c.activeYear,g=c.monthOffset,b,a;if(!d){c.value=[null,null]}else{if(Ext.isDate(d)){c.value=[d.getMonth(),d.getFullYear()]}else{c.value=[d[0],d[1]]}}if(c.rendered){b=c.value[1];if(b!==null){if((b<e||b>e+c.yearOffset)){c.activeYear=b-c.yearOffset+1}}c.updateBody()}return c},getValue:function(){return this.value},hasSelection:function(){var a=this.value;return a[0]!==null&&a[1]!==null},getYears:function(){var d=this,e=d.yearOffset,g=d.activeYear,a=g+e,c=g,b=[];for(;c<a;++c){b.push(c,c+e)}return b},updateBody:function(){var e=this,b=e.years,a=e.months,j=e.getYears(),k=e.selectedCls,g=e.getYear(null),c=e.value[0],h=e.monthOffset,d;if(e.rendered){b.removeCls(k);a.removeCls(k);b.each(function(p,n,m){d=j[m];p.dom.innerHTML=d;if(d==g){p.dom.className=k}});if(c!==null){if(c<h){c=c*2}else{c=(c-h)*2+1}a.item(c).addCls(k)}}},getYear:function(a,c){var b=this.value[1];c=c||0;return b===null?a:b+c},onBodyClick:function(d,b){var c=this,a=d.type=="dblclick";if(d.getTarget("."+c.baseCls+"-month")){d.stopEvent();c.onMonthClick(b,a)}else{if(d.getTarget("."+c.baseCls+"-year")){d.stopEvent();c.onYearClick(b,a)}}},adjustYear:function(a){if(typeof a!="number"){a=this.totalYears}this.activeYear+=a;this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(c,a){var b=this;b.value[0]=b.resolveOffset(b.months.indexOf(c),b.monthOffset);b.updateBody();b.fireEvent("month"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},onYearClick:function(c,a){var b=this;b.value[1]=b.activeYear+b.resolveOffset(b.years.indexOf(c),b.yearOffset);b.updateBody();b.fireEvent("year"+(a?"dbl":"")+"click",b,b.value);b.fireEvent("select",b,b.value)},resolveOffset:function(a,b){if(a%2===0){return(a/2)}else{return b+Math.floor(a/2)}},beforeDestroy:function(){var a=this;a.years=a.months=null;Ext.destroyMembers(a,"backRepeater","nextRepeater","okBtn","cancelBtn");a.callParent()}});Ext.define("Ext.picker.Date",{extend:"Ext.Component",requires:["Ext.XTemplate","Ext.button.Button","Ext.button.Split","Ext.util.ClickRepeater","Ext.util.KeyNav","Ext.EventObject","Ext.fx.Manager","Ext.picker.Month"],alias:"widget.datepicker",alternateClassName:"Ext.DatePicker",renderTpl:['<div class="{cls}" id="{id}" role="grid" title="{ariaTitle} {value:this.longDay}">','<div role="presentation" class="{baseCls}-header">','<div class="{baseCls}-prev"><a id="{id}-prevEl" href="#" role="button" title="{prevText}"></a></div>','<div class="{baseCls}-month" id="{id}-middleBtnEl"></div>','<div class="{baseCls}-next"><a id="{id}-nextEl" href="#" role="button" title="{nextText}"></a></div>',"</div>",'<table id="{id}-eventEl" class="{baseCls}-inner" cellspacing="0" role="presentation">','<thead role="presentation"><tr role="presentation">','<tpl for="dayNames">','<th role="columnheader" title="{.}"><span>{.:this.firstInitial}</span></th>',"</tpl>","</tr></thead>",'<tbody role="presentation"><tr role="presentation">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell" id="{[Ext.id()]}">','<a role="presentation" href="#" hidefocus="on" class="{parent.baseCls}-date" tabIndex="1">','<em role="presentation"><span role="presentation"></span></em>',"</a>","</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" role="presentation" class="{baseCls}-footer"></div>',"</tpl>","</div>",{firstInitial:function(a){return a.substr(0,1)},isEndOfWeek:function(b){b--;var a=b%7===0&&b!==0;return a?'</tr><tr role="row">':""},longDay:function(a){return Ext.Date.format(a,this.longDayFormat)}}],ariaTitle:"Date Picker",todayText:"Today",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:true,disableAnim:false,baseCls:Ext.baseCSSPrefix+"datepicker",longDayFormat:"F d, Y",focusOnShow:false,focusOnSelect:true,width:178,initHour:12,numDays:42,initComponent:function(){var b=this,a=Ext.Date.clearTime;b.selectedCls=b.baseCls+"-selected";b.disabledCellCls=b.baseCls+"-disabled";b.prevCls=b.baseCls+"-prevday";b.activeCls=b.baseCls+"-active";b.nextCls=b.baseCls+"-prevday";b.todayCls=b.baseCls+"-today";b.dayNames=b.dayNames.slice(b.startDay).concat(b.dayNames.slice(0,b.startDay));this.callParent();b.value=b.value?a(b.value,true):a(new Date());b.addEvents("select");b.initDisabledDays()},onRender:function(b,a){var d=this,e=new Array(d.numDays),c=Ext.Date.format(new Date(),d.format);Ext.applyIf(d,{renderData:{}});Ext.apply(d.renderData,{dayNames:d.dayNames,ariaTitle:d.ariaTitle,value:d.value,showToday:d.showToday,prevText:d.prevText,nextText:d.nextText,days:e});d.getTpl("renderTpl").longDayFormat=d.longDayFormat;d.addChildEls("eventEl","prevEl","nextEl","middleBtnEl","footerEl");this.callParent(arguments);d.el.unselectable();d.cells=d.eventEl.select("tbody td");d.textNodes=d.eventEl.query("tbody td span");d.monthBtn=Ext.create("Ext.button.Split",{text:"",tooltip:d.monthYearText,renderTo:d.middleBtnEl});d.todayBtn=Ext.create("Ext.button.Button",{renderTo:d.footerEl,text:Ext.String.format(d.todayText,c),tooltip:Ext.String.format(d.todayTip,c),handler:d.selectToday,scope:d})},initEvents:function(){var c=this,a=Ext.Date,b=a.DAY;this.callParent();c.prevRepeater=Ext.create("Ext.util.ClickRepeater",c.prevEl,{handler:c.showPrevMonth,scope:c,preventDefault:true,stopDefault:true});c.nextRepeater=Ext.create("Ext.util.ClickRepeater",c.nextEl,{handler:c.showNextMonth,scope:c,preventDefault:true,stopDefault:true});c.keyNav=Ext.create("Ext.util.KeyNav",c.eventEl,Ext.apply({scope:c,left:function(d){if(d.ctrlKey){c.showPrevMonth()}else{c.update(a.add(c.activeDate,b,-1))}},right:function(d){if(d.ctrlKey){c.showNextMonth()}else{c.update(a.add(c.activeDate,b,1))}},up:function(d){if(d.ctrlKey){c.showNextYear()}else{c.update(a.add(c.activeDate,b,-7))}},down:function(d){if(d.ctrlKey){c.showPrevYear()}else{c.update(a.add(c.activeDate,b,7))}},pageUp:c.showNextMonth,pageDown:c.showPrevMonth,enter:function(d){d.stopPropagation();return true}},c.keyNavConfig));if(c.showToday){c.todayKeyListener=c.eventEl.addKeyListener(Ext.EventObject.SPACE,c.selectToday,c)}c.mon(c.eventEl,"mousewheel",c.handleMouseWheel,c);c.mon(c.eventEl,"click",c.handleDateClick,c,{delegate:"a."+c.baseCls+"-date"});c.mon(c.monthBtn,"click",c.showMonthPicker,c);c.mon(c.monthBtn,"arrowclick",c.showMonthPicker,c);c.update(c.value)},initDisabledDays:function(){var d=this,b=d.disabledDates,c="(?:",a;if(!d.disabledDatesRE&&b){a=b.length-1;Ext.each(b,function(g,e){c+=Ext.isDate(g)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(g,d.format))+"$":b[e];if(e!=a){c+="|"}},d);d.disabledDatesRE=new RegExp(c+")")}},setDisabledDates:function(a){var b=this;if(Ext.isArray(a)){b.disabledDates=a;b.disabledDatesRE=null}else{b.disabledDatesRE=a}b.initDisabledDays();b.update(b.value,true);return b},setDisabledDays:function(a){this.disabledDays=a;return this.update(this.value,true)},setMinDate:function(a){this.minDate=a;return this.update(this.value,true)},setMaxDate:function(a){this.maxDate=a;return this.update(this.value,true)},setValue:function(a){this.value=Ext.Date.clearTime(a,true);return this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(){this.callParent();this.setDisabledStatus(false);this.update(this.activeDate)},onDisable:function(){this.callParent();this.setDisabledStatus(true)},setDisabledStatus:function(a){var b=this;b.keyNav.setDisabled(a);b.prevRepeater.setDisabled(a);b.nextRepeater.setDisabled(a);if(b.showToday){b.todayKeyListener.setDisabled(a);b.todayBtn.setDisabled(a)}},getActive:function(){return this.activeDate||this.value},runAnimation:function(c){var b=this.monthPicker,a={duration:200,callback:function(){if(c){b.hide()}else{b.show()}}};if(c){b.el.slideOut("t",a)}else{b.el.slideIn("t",a)}},hideMonthPicker:function(a){var c=this,b=c.monthPicker;if(b){if(c.shouldAnimate(a)){c.runAnimation(true)}else{b.hide()}}return c},showMonthPicker:function(a){var c=this,b;if(c.rendered&&!c.disabled){b=c.createMonthPicker();b.setValue(c.getActive());b.setSize(c.getSize());b.setPosition(-1,-1);if(c.shouldAnimate(a)){c.runAnimation(false)}else{b.show()}}return c},shouldAnimate:function(a){return Ext.isDefined(a)?a:!this.disableAnim},createMonthPicker:function(){var b=this,a=b.monthPicker;if(!a){b.monthPicker=a=Ext.create("Ext.picker.Month",{renderTo:b.el,floating:true,shadow:false,small:b.showToday===false,listeners:{scope:b,cancelclick:b.onCancelClick,okclick:b.onOkClick,yeardblclick:b.onOkClick,monthdblclick:b.onOkClick}});if(!b.disableAnim){a.el.setStyle("display","none")}b.on("beforehide",Ext.Function.bind(b.hideMonthPicker,b,[false]))}return a},onOkClick:function(b,e){var d=this,g=e[0],c=e[1],a=new Date(c,g,d.getActive().getDate());if(a.getMonth()!==g){a=new Date(c,g,1).getLastDateOfMonth()}d.update(a);d.hideMonthPicker()},onCancelClick:function(){this.hideMonthPicker()},showPrevMonth:function(a){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(a){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){this.update(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){this.update(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(a){a.stopEvent();if(!this.disabled){var b=a.getWheelDelta();if(b>0){this.showPrevMonth()}else{if(b<0){this.showNextMonth()}}}},handleDateClick:function(d,a){var c=this,b=c.handler;d.stopEvent();if(!c.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasCls(c.disabledCellCls)){c.cancelFocus=c.focusOnSelect===false;c.setValue(new Date(a.dateValue));delete c.cancelFocus;c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var c=this,a=c.todayBtn,b=c.handler;if(a&&!a.disabled){c.setValue(Ext.Date.clearTime(new Date()));c.fireEvent("select",c,c.value);if(b){b.call(c.scope||c,c,c.value)}c.onSelect()}return c},selectedUpdate:function(c,g){var e=this,d=c.getTime(),b=e.cells,a=e.selectedCls;b.removeCls(a);b.each(function(h){if(h.dom.firstChild.dateValue==d){e.el.dom.setAttribute("aria-activedescendent",h.dom.id);h.addCls(a);if(e.isVisible()&&!e.cancelFocus){Ext.fly(h.dom.firstChild).focus(50)}return false}},this)},fullUpdate:function(F,n){var I=this,g=I.cells.elements,d=I.textNodes,K=I.disabledCellCls,q=Ext.Date,A=0,H=0,e=I.isVisible(),y=+q.clearTime(F,true),D=+q.clearTime(new Date()),x=I.minDate?q.clearTime(I.minDate,true):Number.NEGATIVE_INFINITY,z=I.maxDate?q.clearTime(I.maxDate,true):Number.POSITIVE_INFINITY,G=I.disabledDatesRE,w=I.disabledDatesText,L=I.disabledDays?I.disabledDays.join(""):false,E=I.disabledDaysText,B=I.format,m=q.getDaysInMonth(F),t=q.getFirstDateOfMonth(F),h=t.getDay()-I.startDay,C=q.add(F,q.MONTH,-1),b=I.longDayFormat,k,u,a,J,p,r,c,j,v;if(h<0){h+=7}m+=h;k=q.getDaysInMonth(C)-h;u=new Date(C.getFullYear(),C.getMonth(),k,I.initHour);if(I.showToday){J=q.clearTime(new Date());a=(J<x||J>z||(G&&B&&G.test(q.dateFormat(J,B)))||(L&&L.indexOf(J.getDay())!=-1));if(!I.disabled){I.todayBtn.setDisabled(a);I.todayKeyListener.setDisabled(a)}}p=function(M){v=+q.clearTime(u,true);M.title=q.format(u,b);M.firstChild.dateValue=v;if(v==D){M.className+=" "+I.todayCls;M.title=I.todayText}if(v==y){M.className+=" "+I.selectedCls;I.el.dom.setAttribute("aria-activedescendant",M.id);if(e&&I.floating){Ext.fly(M.firstChild).focus(50)}}if(v<x){M.className=K;M.title=I.minText;return}if(v>z){M.className=K;M.title=I.maxText;return}if(L){if(L.indexOf(u.getDay())!=-1){M.title=E;M.className=K}}if(G&&B){j=q.dateFormat(u,B);if(G.test(j)){M.title=w.replace("%0",j);M.className=K}}};for(;A<I.numDays;++A){if(A<h){r=(++k);c=I.prevCls}else{if(A>=m){r=(++H);c=I.nextCls}else{r=A-h+1;c=I.activeCls}}d[A].innerHTML=r;g[A].className=c;u.setDate(u.getDate()+1);p(g[A])}I.monthBtn.setText(I.monthNames[F.getMonth()]+" "+F.getFullYear())},update:function(a,d){var b=this,c=b.activeDate;if(b.rendered){b.activeDate=a;if(!d&&c&&b.el&&c.getMonth()==a.getMonth()&&c.getFullYear()==a.getFullYear()){b.selectedUpdate(a,c)}else{b.fullUpdate(a,c)}}return b},beforeDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.todayKeyListener,a.keyNav,a.monthPicker,a.monthBtn,a.nextRepeater,a.prevRepeater,a.todayBtn);delete a.textNodes;delete a.cells.elements}a.callParent()},onShow:function(){this.callParent(arguments);if(this.focusOnShow){this.focus()}}},function(){var a=this.prototype;a.monthNames=Ext.Date.monthNames;a.dayNames=Ext.Date.dayNames;a.format=Ext.Date.defaultFormat});Ext.define("Ext.form.field.Date",{extend:"Ext.form.field.Picker",alias:"widget.datefield",requires:["Ext.picker.Date"],alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:Ext.baseCSSPrefix+"form-date-trigger",showToday:true,initTime:"12",initTimeFormat:"H",matchFieldWidth:false,startDay:0,initComponent:function(){var d=this,b=Ext.isString,c,a;c=d.minValue;a=d.maxValue;if(b(c)){d.minValue=d.parseDate(c)}if(b(a)){d.maxValue=d.parseDate(a)}d.disabledDatesRE=null;d.initDisabledDays();d.callParent()},initValue:function(){var a=this,b=a.value;if(Ext.isString(b)){a.value=a.rawToValue(b)}a.callParent()},initDisabledDays:function(){if(this.disabledDates){var b=this.disabledDates,a=b.length-1,c="(?:";Ext.each(b,function(g,e){c+=Ext.isDate(g)?"^"+Ext.String.escapeRegex(g.dateFormat(this.format))+"$":b[e];if(e!==a){c+="|"}},this);this.disabledDatesRE=new RegExp(c+")")}},setDisabledDates:function(a){var c=this,b=c.picker;c.disabledDates=a;c.initDisabledDays();if(b){b.setDisabledDates(c.disabledDatesRE)}},setDisabledDays:function(a){var b=this.picker;this.disabledDays=a;if(b){b.setDisabledDays(a)}},setMinValue:function(c){var b=this,a=b.picker,d=(Ext.isString(c)?b.parseDate(c):c);b.minValue=d;if(a){a.minText=Ext.String.format(b.minText,b.formatDate(b.minValue));a.setMinDate(d)}},setMaxValue:function(c){var b=this,a=b.picker,d=(Ext.isString(c)?b.parseDate(c):c);b.maxValue=d;if(a){a.maxText=Ext.String.format(b.maxText,b.formatDate(b.maxValue));a.setMaxDate(d)}},getErrors:function(t){var j=this,r=Ext.String.format,k=Ext.Date.clearTime,q=j.callParent(arguments),p=j.disabledDays,d=j.disabledDatesRE,n=j.minValue,h=j.maxValue,g=p?p.length:0,e=0,a,b,m,c;t=j.formatDate(t||j.processRawValue(j.getRawValue()));if(t===null||t.length<1){return q}a=t;t=j.parseDate(t);if(!t){q.push(r(j.invalidText,a,j.format));return q}c=t.getTime();if(n&&c<k(n).getTime()){q.push(r(j.minText,j.formatDate(n)))}if(h&&c>k(h).getTime()){q.push(r(j.maxText,j.formatDate(h)))}if(p){m=t.getDay();for(;e<g;e++){if(m===p[e]){q.push(j.disabledDaysText);break}}}b=j.formatDate(t);if(d&&d.test(b)){q.push(r(j.disabledDatesText,b))}return q},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},safeParse:function(e,g){var d=this,b=Ext.Date,c,a=null;if(b.formatContainsHourInfo(g)){a=b.parse(e,g)}else{c=b.parse(e+" "+d.initTime,g+" "+d.initTimeFormat);if(c){a=b.clearTime(c)}}return a},getSubmitValue:function(){var b=this.submitFormat||this.format,a=this.getValue();return a?Ext.Date.format(a,b):""},parseDate:function(e){if(!e||Ext.isDate(e)){return e}var d=this,h=d.safeParse(e,d.format),b=d.altFormats,g=d.altFormatsArray,c=0,a;if(!h&&b){g=g||b.split("|");a=g.length;for(;c<a&&!h;++c){h=d.safeParse(e,g[c])}}return h},formatDate:function(a){return Ext.isDate(a)?Ext.Date.dateFormat(a,this.format):a},createPicker:function(){var a=this,b=Ext.String.format;return Ext.create("Ext.picker.Date",{pickerField:a,ownerCt:a.ownerCt,renderTo:document.body,floating:true,hidden:true,focusOnShow:true,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,format:a.format,showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),maxText:b(a.maxText,a.formatDate(a.maxValue)),listeners:{scope:a,select:a.onSelect},keyNavConfig:{esc:function(){a.collapse()}}})},onSelect:function(a,c){var b=this;b.setValue(c);b.fireEvent("select",b,c);b.collapse()},onExpand:function(){var a=this.getValue();this.picker.setValue(Ext.isDate(a)?a:new Date())},onCollapse:function(){this.focus(false,60)},beforeBlur:function(){var c=this,a=c.parseDate(c.getRawValue()),b=c.focusTask;if(b){b.cancel()}if(a){c.setValue(a)}}});Ext.define("Ext.form.field.Display",{extend:"Ext.form.field.Base",alias:"widget.displayfield",requires:["Ext.util.Format","Ext.XTemplate"],alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],fieldSubTpl:['<div id="{id}" class="{fieldCls}"></div>',{compiled:true,disableFormats:true}],fieldCls:Ext.baseCSSPrefix+"form-display-field",htmlEncode:false,validateOnChange:false,initEvents:Ext.emptyFn,submitValue:false,isValid:function(){return true},validate:function(){return true},getRawValue:function(){return this.rawValue},setRawValue:function(b){var a=this;b=Ext.value(b,"");a.rawValue=b;if(a.rendered){a.inputEl.dom.innerHTML=a.htmlEncode?Ext.util.Format.htmlEncode(b):b}return b},getContentTarget:function(){return this.inputEl}});Ext.define("Ext.form.field.File",{extend:"Ext.form.field.Text",alias:["widget.filefield","widget.fileuploadfield"],alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],uses:["Ext.button.Button","Ext.layout.component.field.File"],buttonText:"Browse...",buttonOnly:false,buttonMargin:3,fieldBodyCls:Ext.baseCSSPrefix+"form-file-wrap",readOnly:true,componentLayout:"filefield",onRender:function(){var a=this,b;a.callParent(arguments);a.createButton();a.createFileInput();if(a.disabled){a.disableItems()}b=a.inputEl;b.dom.removeAttribute("name");if(a.buttonOnly){b.setDisplayed(false)}},createButton:function(){var a=this;a.button=Ext.widget("button",Ext.apply({ui:a.ui,renderTo:a.bodyEl,text:a.buttonText,cls:Ext.baseCSSPrefix+"form-file-btn",preventDefault:false,style:a.buttonOnly?"":"margin-left:"+a.buttonMargin+"px"},a.buttonConfig))},createFileInput:function(){var a=this;a.fileInputEl=a.button.el.createChild({name:a.getName(),cls:Ext.baseCSSPrefix+"form-file-input",tag:"input",type:"file",size:1}).on("change",a.onFileChange,a)},onFileChange:function(){this.lastValue=null;Ext.form.field.File.superclass.setValue.call(this,this.fileInputEl.dom.value)},setValue:Ext.emptyFn,reset:function(){var a=this;if(a.rendered){a.fileInputEl.remove();a.createFileInput();a.inputEl.dom.value=""}a.callParent()},onDisable:function(){this.callParent();this.disableItems()},disableItems:function(){var b=this.fileInputEl,a=this.button;if(b){b.dom.disabled=true}if(a){a.disable()}},onEnable:function(){var a=this;a.callParent();a.fileInputEl.dom.disabled=false;a.button.enable()},isFileUpload:function(){return true},extractFileInput:function(){var a=this.fileInputEl.dom;this.reset();return a},onDestroy:function(){Ext.destroyMembers(this,"fileInputEl","button");this.callParent()}});Ext.define("Ext.form.field.Hidden",{extend:"Ext.form.field.Base",alias:["widget.hiddenfield","widget.hidden"],alternateClassName:"Ext.form.Hidden",inputType:"hidden",hideLabel:true,initComponent:function(){this.formItemCls+="-hidden";this.callParent()},isEqual:function(b,a){return this.isEqualAsString(b,a)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.define("Ext.picker.Color",{extend:"Ext.Component",requires:"Ext.XTemplate",alias:"widget.colorpicker",alternateClassName:"Ext.ColorPalette",componentCls:Ext.baseCSSPrefix+"color-picker",selectedCls:Ext.baseCSSPrefix+"color-picker-selected",value:null,clickEvent:"click",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" class="color-{.}" hidefocus="on">','<em><span style="background:#{.}" unselectable="on">&#160;</span></em>',"</a>","</tpl>"],initComponent:function(){var a=this;a.callParent(arguments);a.addEvents("select");if(a.handler){a.on("select",a.handler,a.scope,true)}},onRender:function(c,b){var d=this,a=d.clickEvent;Ext.apply(d.renderData,{itemCls:d.itemCls,colors:d.colors});d.callParent(arguments);d.mon(d.el,a,d.handleClick,d,{delegate:"a"});if(a!="click"){d.mon(d.el,"click",Ext.emptyFn,d,{delegate:"a",stopEvent:true})}},afterRender:function(){var a=this,b;a.callParent(arguments);if(a.value){b=a.value;a.value=null;a.select(b,true)}},handleClick:function(c,d){var b=this,a;c.stopEvent();if(!b.disabled){a=d.className.match(b.colorRe)[1];b.select(a.toUpperCase())}},select:function(b,a){var d=this,g=d.selectedCls,e=d.value,c;b=b.replace("#","");if(!d.rendered){d.value=b;return}if(b!=e||d.allowReselect){c=d.el;if(d.value){c.down("a.color-"+e).removeCls(g)}c.down("a.color-"+b).addCls(g);d.value=b;if(a!==true){d.fireEvent("select",d,b)}}},getValue:function(){return this.value||null}});Ext.define("Ext.layout.component.field.HtmlEditor",{extend:"Ext.layout.component.field.Field",alias:["layout.htmleditor"],type:"htmleditor",sizeBodyContents:function(a,j){var e=this,b=e.owner,k=b.bodyEl,g=b.getToolbar(),h=b.textareaEl,c=b.iframeEl,d;if(Ext.isNumber(a)){a-=k.getFrameWidth("lr")}g.setWidth(a);h.setWidth(a);c.setWidth(a);if(Ext.isNumber(j)){d=j-g.getHeight()-k.getFrameWidth("tb");h.setHeight(d);c.setHeight(d)}}});Ext.define("Ext.form.field.HtmlEditor",{extend:"Ext.Component",mixins:{labelable:"Ext.form.Labelable",field:"Ext.form.field.Field"},alias:"widget.htmleditor",alternateClassName:"Ext.form.HtmlEditor",requires:["Ext.tip.QuickTipManager","Ext.picker.Color","Ext.toolbar.Item","Ext.toolbar.Toolbar","Ext.util.Format","Ext.layout.component.field.HtmlEditor"],fieldSubTpl:['<div id="{cmpId}-toolbarWrap" class="{toolbarWrapCls}"></div>','<textarea id="{cmpId}-textareaEl" name="{name}" tabIndex="-1" class="{textareaCls}" ','style="{size}" autocomplete="off"></textarea>','<iframe id="{cmpId}-iframeEl" name="{iframeName}" frameBorder="0" style="overflow:auto;{size}" src="{iframeSrc}"></iframe>',{compiled:true,disableFormats:true}],enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:(Ext.isOpera||Ext.isIE6)?"&#160;":"&#8203;",fieldBodyCls:Ext.baseCSSPrefix+"html-editor-wrap",componentLayout:"htmleditor",initialized:false,activated:false,sourceEditMode:false,iframePad:3,hideMode:"offsets",maskOnDisable:true,initComponent:function(){var a=this;a.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange");a.callParent(arguments);a.initLabelable();a.initField()},createToolbar:function(e){var h=this,g=[],k=Ext.tip.QuickTipManager&&Ext.tip.QuickTipManager.isEnabled(),d=Ext.baseCSSPrefix,c,j,b;function a(p,m,n){return{itemId:p,cls:d+"btn-icon",iconCls:d+"edit-"+p,enableToggle:m!==false,scope:e,handler:n||e.relayBtnCmd,clickEvent:"mousedown",tooltip:k?e.buttonTips[p]||b:b,overflowText:e.buttonTips[p].title||b,tabIndex:-1}}if(h.enableFont&&!Ext.isSafari2){c=Ext.widget("component",{renderTpl:['<select id="{id}-selectEl" class="{cls}">','<tpl for="fonts">','<option value="{[values.toLowerCase()]}" style="font-family:{.}"<tpl if="values.toLowerCase()==parent.defaultFont"> selected</tpl>>{.}</option>',"</tpl>","</select>"],renderData:{cls:d+"font-select",fonts:h.fontFamilies,defaultFont:h.defaultFont},childEls:["selectEl"],onDisable:function(){var m=this.selectEl;if(m){m.dom.disabled=true}Ext.Component.superclass.onDisable.apply(this,arguments)},onEnable:function(){var m=this.selectEl;if(m){m.dom.disabled=false}Ext.Component.superclass.onEnable.apply(this,arguments)}});g.push(c,"-")}if(h.enableFormat){g.push(a("bold"),a("italic"),a("underline"))}if(h.enableFontSize){g.push("-",a("increasefontsize",false,h.adjustFont),a("decreasefontsize",false,h.adjustFont))}if(h.enableColors){g.push("-",{itemId:"forecolor",cls:d+"btn-icon",iconCls:d+"edit-forecolor",overflowText:e.buttonTips.forecolor.title,tooltip:k?e.buttonTips.forecolor||b:b,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(n,m){h.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+m:m);h.deferFocus();this.up("menu").hide()}}]})},{itemId:"backcolor",cls:d+"btn-icon",iconCls:d+"edit-backcolor",overflowText:e.buttonTips.backcolor.title,tooltip:k?e.buttonTips.backcolor||b:b,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(n,m){if(Ext.isGecko){h.execCmd("useCSS",false);h.execCmd("hilitecolor",m);h.execCmd("useCSS",true);h.deferFocus()}else{h.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+m:m);h.deferFocus()}this.up("menu").hide()}}]})})}if(h.enableAlignments){g.push("-",a("justifyleft"),a("justifycenter"),a("justifyright"))}if(!Ext.isSafari2){if(h.enableLinks){g.push("-",a("createlink",false,h.createLink))}if(h.enableLists){g.push("-",a("insertorderedlist"),a("insertunorderedlist"))}if(h.enableSourceEdit){g.push("-",a("sourceedit",true,function(m){h.toggleSourceEdit(!h.sourceEditMode)}))}}j=Ext.widget("toolbar",{renderTo:h.toolbarWrap,enableOverflow:true,items:g});if(c){h.fontSelect=c.selectEl;h.mon(h.fontSelect,"change",function(){h.relayCmd("fontname",h.fontSelect.dom.value);h.deferFocus()})}h.mon(j.el,"click",function(m){m.preventDefault()});h.toolbar=j},onDisable:function(){this.bodyEl.mask();this.callParent(arguments)},onEnable:function(){this.bodyEl.unmask();this.callParent(arguments)},setReadOnly:function(e){var d=this,c=d.textareaEl,b=d.iframeEl,a;d.readOnly=e;if(c){c.dom.readOnly=e}if(d.initialized){a=d.getEditorBody();if(Ext.isIE){b.setDisplayed(false);a.contentEditable=!e;b.setDisplayed(true)}else{d.setDesignMode(!e)}if(a){a.style.cursor=e?"default":"text"}d.disableItems(e)}},getDocMarkup:function(){var b=this,a=b.iframeEl.getHeight()-b.iframePad*2;return Ext.String.format('<html><head><style type="text/css">body{border:0;margin:0;padding:{0}px;height:{1}px;box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;cursor:text}</style></head><body></body></html>',b.iframePad,a)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return(!Ext.isIE&&this.iframeEl.dom.contentDocument)||this.getWin().document},getWin:function(){return Ext.isIE?this.iframeEl.dom.contentWindow:window.frames[this.iframeEl.dom.name]},onRender:function(){var a=this;a.onLabelableRender();a.addChildEls("toolbarWrap","iframeEl","textareaEl");a.callParent(arguments);a.textareaEl.dom.value=a.value||"";a.monitorTask=Ext.TaskManager.start({run:a.checkDesignMode,scope:a,interval:100});a.createToolbar(a);a.disableItems(true)},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return a.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},getSubTplData:function(){var a=Ext.baseCSSPrefix;return{cmpId:this.id,id:this.getInputId(),toolbarWrapCls:a+"html-editor-tb",textareaCls:a+"hidden",iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,size:"height:100px;"}},getSubTplMarkup:function(){var a=this.getSubTplData();return this.getTpl("fieldSubTpl").apply(a)},getBodyNaturalWidth:function(){return 565},initFrameDoc:function(){var b=this,c,a;Ext.TaskManager.stop(b.monitorTask);c=b.getDoc();b.win=b.getWin();c.open();c.write(b.getDocMarkup());c.close();a={run:function(){var d=b.getDoc();if(d.body||d.readyState==="complete"){Ext.TaskManager.stop(a);b.setDesignMode(true);Ext.defer(b.initEditor,10,b)}},interval:10,duration:10000,scope:b};Ext.TaskManager.start(a)},checkDesignMode:function(){var a=this,b=a.getDoc();if(b&&(!b.editorInitialized||a.getDesignMode()!=="on")){a.initFrameDoc()}},setDesignMode:function(c){var a=this,b=a.getDoc();if(b){if(a.readOnly){c=false}b.designMode=(/on|true/i).test(String(c).toLowerCase())?"on":"off"}},getDesignMode:function(){var a=this.getDoc();return !a?"":String(a.designMode).toLowerCase()},disableItems:function(a){this.getToolbar().items.each(function(b){if(b.getItemId()!=="sourceedit"){b.setDisabled(a)}})},toggleSourceEdit:function(b){var g=this,d=g.iframeEl,a=g.textareaEl,e=Ext.baseCSSPrefix+"hidden",c=g.getToolbar().getComponent("sourceedit");if(!Ext.isBoolean(b)){b=!g.sourceEditMode}g.sourceEditMode=b;if(c.pressed!==b){c.toggle(b)}if(b){g.disableItems(true);g.syncValue();d.addCls(e);a.removeCls(e);a.dom.removeAttribute("tabIndex");a.focus()}else{if(g.initialized){g.disableItems(g.readOnly)}g.pushValue();d.removeCls(e);a.addCls(e);a.dom.setAttribute("tabIndex",-1);g.deferFocus()}g.fireEvent("editmodechange",g,b);g.doComponentLayout()},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=="http://"){this.relayCmd("createlink",a)}},clearInvalid:Ext.emptyFn,setValue:function(c){var b=this,a=b.textareaEl;b.mixins.field.setValue.call(b,c);if(c===null||c===undefined){c=""}if(a){a.dom.value=c}b.pushValue();return this},cleanHtml:function(a){a=String(a);if(Ext.isWebKit){a=a.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")}if(a.charCodeAt(0)===this.defaultValue.replace(/\D/g,"")){a=a.substring(1)}return a},syncValue:function(){var e=this,b,d,a,c;if(e.initialized){b=e.getEditorBody();d=b.innerHTML;if(Ext.isWebKit){a=b.getAttribute("style");c=a.match(/text-align:(.*?);/i);if(c&&c[1]){d='<div style="'+c[0]+'">'+d+"</div>"}}d=e.cleanHtml(d);if(e.fireEvent("beforesync",e,d)!==false){e.textareaEl.dom.value=d;e.fireEvent("sync",e,d)}}},getValue:function(){var a=this,b;if(!a.sourceEditMode){a.syncValue()}b=a.rendered?a.textareaEl.dom.value:a.value;a.value=b;return b},pushValue:function(){var b=this,a;if(b.initialized){a=b.textareaEl.dom.value||"";if(!b.activated&&a.length<1){a=b.defaultValue}if(b.fireEvent("beforepush",b,a)!==false){b.getEditorBody().innerHTML=a;if(Ext.isGecko){b.setDesignMode(false);b.setDesignMode(true)}b.fireEvent("push",b,a)}}},deferFocus:function(){this.focus(false,true)},getFocusEl:function(){var a=this,b=a.win;return b&&!a.sourceEditMode?b:a.textareaEl},initEditor:function(){try{var g=this,d=g.getEditorBody(),b=g.textareaEl.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),j,c;b["background-attachment"]="fixed";d.bgProperties="fixed";Ext.DomHelper.applyStyles(d,b);j=g.getDoc();if(j){try{Ext.EventManager.removeAll(j)}catch(h){}}c=Ext.Function.bind(g.onEditorEvent,g);Ext.EventManager.on(j,{mousedown:c,dblclick:c,click:c,keyup:c,buffer:100});c=g.onRelayedEvent;Ext.EventManager.on(j,{mousedown:c,mousemove:c,mouseup:c,click:c,dblclick:c,scope:g});if(Ext.isGecko){Ext.EventManager.on(j,"keypress",g.applyCommand,g)}if(g.fixKeys){Ext.EventManager.on(j,"keydown",g.fixKeys,g)}Ext.EventManager.on(window,"unload",g.beforeDestroy,g);j.editorInitialized=true;g.initialized=true;g.pushValue();g.setReadOnly(g.readOnly);g.fireEvent("initialize",g)}catch(a){}},beforeDestroy:function(){var a=this,d=a.monitorTask,c,g;if(d){Ext.TaskManager.stop(d)}if(a.rendered){try{c=a.getDoc();if(c){Ext.EventManager.removeAll(c);for(g in c){if(c.hasOwnProperty(g)){delete c[g]}}}}catch(b){}Ext.destroyMembers(a,"tb","toolbarWrap","iframeEl","textareaEl")}a.callParent()},onRelayedEvent:function(c){var b=this.iframeEl,d=b.getXY(),a=c.getXY();c.xy=[d[0]+a[0],d[1]+a[1]];c.injectEvent(b);c.xy=a},onFirstFocus:function(){var c=this,b,a;c.activated=true;c.disableItems(c.readOnly);if(Ext.isGecko){c.win.focus();b=c.win.getSelection();if(!b.focusNode||b.focusNode.nodeType!==3){a=b.getRangeAt(0);a.selectNodeContents(c.getEditorBody());a.collapse(true);c.deferFocus()}try{c.execCmd("useCSS",true);c.execCmd("styleWithCSS",false)}catch(d){}}c.fireEvent("activate",c)},adjustFont:function(d){var e=d.getItemId()==="increasefontsize"?1:-1,c=this.getDoc().queryCommandValue("FontSize")||"2",a=Ext.isString(c)&&c.indexOf("px")!==-1,b;c=parseInt(c,10);if(a){if(c<=10){c=1+e}else{if(c<=13){c=2+e}else{if(c<=16){c=3+e}else{if(c<=18){c=4+e}else{if(c<=24){c=5+e}else{c=6+e}}}}}c=Ext.Number.constrain(c,1,6)}else{b=Ext.isSafari;if(b){e*=2}c=Math.max(1,c+e)+(b?"px":0)}this.execCmd("FontSize",c)},onEditorEvent:function(a){this.updateToolbar()},updateToolbar:function(){var e=this,d,g,a,c;if(e.readOnly){return}if(!e.activated){e.onFirstFocus();return}d=e.getToolbar().items.map;g=e.getDoc();if(e.enableFont&&!Ext.isSafari2){a=(g.queryCommandValue("FontName")||e.defaultFont).toLowerCase();c=e.fontSelect.dom;if(a!==c.value){c.value=a}}function b(){Ext.Array.forEach(Ext.Array.toArray(arguments),function(h){d[h].toggle(g.queryCommandState(h))})}if(e.enableFormat){b("bold","italic","underline")}if(e.enableAlignments){b("justifyleft","justifycenter","justifyright")}if(!Ext.isSafari2&&e.enableLists){b("insertorderedlist","insertunorderedlist")}Ext.menu.Manager.hideAll();e.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(b,a){Ext.defer(function(){var c=this;c.focus();c.execCmd(b,a);c.updateToolbar()},10,this)},execCmd:function(d,c){var b=this,e=b.getDoc(),a;e.execCommand(d,false,c===a?null:c);b.syncValue()},applyCommand:function(d){if(d.ctrlKey){var a=this,g=d.getCharCode(),b;if(g>0){g=String.fromCharCode(g);switch(g){case"b":b="bold";break;case"i":b="italic";break;case"u":b="underline";break}if(b){a.win.focus();a.execCmd(b);a.deferFocus();d.preventDefault()}}}},insertAtCursor:function(c){var b=this,a;if(b.activated){b.win.focus();if(Ext.isIE){a=b.getDoc().selection.createRange();if(a){a.pasteHTML(c);b.syncValue();b.deferFocus()}}else{b.execCmd("InsertHTML",c);b.deferFocus()}}},fixKeys:function(){if(Ext.isIE){return function(h){var c=this,b=h.getKey(),g=c.getDoc(),a,d;if(b===h.TAB){h.stopEvent();a=g.selection.createRange();if(a){a.collapse(true);a.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");c.deferFocus()}}else{if(b===h.ENTER){a=g.selection.createRange();if(a){d=a.parentElement();if(!d||d.tagName.toLowerCase()!=="li"){h.stopEvent();a.pasteHTML("<br />");a.collapse(false);a.select()}}}}}}if(Ext.isOpera){return function(b){var a=this;if(b.getKey()===b.TAB){b.stopEvent();a.win.focus();a.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");a.deferFocus()}}}if(Ext.isWebKit){return function(c){var b=this,a=c.getKey();if(a===c.TAB){c.stopEvent();b.execCmd("InsertText","\t");b.deferFocus()}else{if(a===c.ENTER){c.stopEvent();b.execCmd("InsertHtml","<br /><br />");b.deferFocus()}}}}return null}(),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:Ext.baseCSSPrefix+"html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:Ext.baseCSSPrefix+"html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:Ext.baseCSSPrefix+"html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:Ext.baseCSSPrefix+"html-editor-tip"}}});Ext.define("Ext.form.field.Radio",{extend:"Ext.form.field.Checkbox",alias:["widget.radiofield","widget.radio"],alternateClassName:"Ext.form.Radio",requires:["Ext.form.RadioManager"],isRadio:true,inputType:"radio",ariaRole:"radio",getGroupValue:function(){var a=this.getManager().getChecked(this.name);return a?a.inputValue:null},onBoxClick:function(b){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(true)}},setValue:function(a){var b=this,c;if(Ext.isBoolean(a)){b.callParent(arguments)}else{c=b.getManager().getWithValue(b.name,a).getAt(0);if(c){c.setValue(true)}}return b},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){return this.getSubmitData()},onChange:function(b,a){var c=this;c.callParent(arguments);if(b){this.getManager().getByName(c.name).each(function(d){if(d!==c){d.setValue(false)}},c)}},getManager:function(){return Ext.form.RadioManager}});Ext.define("Ext.picker.Time",{extend:"Ext.view.BoundList",alias:"widget.timepicker",requires:["Ext.data.Store","Ext.Date"],increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:Ext.baseCSSPrefix+"timepicker",loadMask:false,initComponent:function(){var c=this,a=Ext.Date,b=a.clearTime,d=c.initDate;c.absMin=b(new Date(d[0],d[1],d[2]));c.absMax=a.add(b(new Date(d[0],d[1],d[2])),"mi",(24*60)-1);c.store=c.createStore();c.updateList();c.callParent()},setMinValue:function(a){this.minValue=a;this.updateList()},setMaxValue:function(a){this.maxValue=a;this.updateList()},normalizeDate:function(a){var b=this.initDate;a.setFullYear(b[0],b[1],b[2]);return a},updateList:function(){var c=this,b=c.normalizeDate(c.minValue||c.absMin),a=c.normalizeDate(c.maxValue||c.absMax);c.store.filterBy(function(d){var e=d.get("date");return e>=b&&e<=a})},createStore:function(){var d=this,c=Ext.Date,e=[],b=d.absMin,a=d.absMax;while(b<=a){e.push({disp:c.dateFormat(b,d.format),date:b});b=c.add(b,"mi",d.increment)}return Ext.create("Ext.data.Store",{fields:["disp","date"],data:e})}});Ext.define("Ext.form.field.Time",{extend:"Ext.form.field.Picker",alias:"widget.timefield",requires:["Ext.form.field.Date","Ext.picker.Time","Ext.view.BoundListKeyNav","Ext.Date"],alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:Ext.baseCSSPrefix+"form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,pickerMaxHeight:300,selectOnTab:true,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){var c=this,b=c.minValue,a=c.maxValue;if(b){c.setMinValue(b)}if(a){c.setMaxValue(a)}this.callParent()},initValue:function(){var a=this,b=a.value;if(Ext.isString(b)){a.value=a.rawToValue(b)}a.callParent()},setMinValue:function(c){var b=this,a=b.picker;b.setLimit(c,true);if(a){a.setMinValue(b.minValue)}},setMaxValue:function(c){var b=this,a=b.picker;b.setLimit(c,false);if(a){a.setMaxValue(b.maxValue)}},setLimit:function(b,g){var a=this,e,c;if(Ext.isString(b)){e=a.parseDate(b)}else{if(Ext.isDate(b)){e=b}}if(e){c=Ext.Date.clearTime(new Date(a.initDate));c.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());a[g?"minValue":"maxValue"]=c}},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},getErrors:function(d){var b=this,g=Ext.String.format,h=b.callParent(arguments),c=b.minValue,e=b.maxValue,a;d=b.formatDate(d||b.processRawValue(b.getRawValue()));if(d===null||d.length<1){return h}a=b.parseDate(d);if(!a){h.push(g(b.invalidText,d,b.format));return h}if(c&&a<c){h.push(g(b.minText,b.formatDate(c)))}if(e&&a>e){h.push(g(b.maxText,b.formatDate(e)))}return h},formatDate:function(){return Ext.form.field.Date.prototype.formatDate.apply(this,arguments)},parseDate:function(e){if(!e||Ext.isDate(e)){return e}var d=this,h=d.safeParse(e,d.format),b=d.altFormats,g=d.altFormatsArray,c=0,a;if(!h&&b){g=g||b.split("|");a=g.length;for(;c<a&&!h;++c){h=d.safeParse(e,g[c])}}return h},safeParse:function(e,g){var d=this,b=Ext.Date,c,a=null;if(b.formatContainsDateInfo(g)){a=b.parse(e,g)}else{c=b.parse(d.initDate+" "+e,d.initDateFormat+" "+g);if(c){a=c}}return a},getSubmitValue:function(){var a=this,c=a.submitFormat||a.format,b=a.getValue();return b?Ext.Date.format(b,c):null},createPicker:function(){var b=this,a=Ext.create("Ext.picker.Time",{pickerField:b,selModel:{mode:"SINGLE"},floating:true,hidden:true,minValue:b.minValue,maxValue:b.maxValue,increment:b.increment,format:b.format,ownerCt:this.ownerCt,renderTo:document.body,maxHeight:b.pickerMaxHeight,focusOnToFront:false});b.mon(a.getSelectionModel(),{selectionchange:b.onListSelect,scope:b});return a},onExpand:function(){var d=this,a=d.pickerKeyNav,c=d.selectOnTab,b=d.getPicker(),e=b.getSelectionModel().lastSelected,g;if(!a){a=d.pickerKeyNav=Ext.create("Ext.view.BoundListKeyNav",this.inputEl,{boundList:b,forceKeyDown:true,tab:function(h){if(c){if(d.picker.highlightedItem){this.selectHighlighted(h)}else{d.collapse()}d.triggerBlur()}return true}});if(c){d.ignoreMonitorTab=true}}Ext.defer(a.enable,1,a);if(e){g=b.getNode(e);if(g){b.highlightItem(g);b.el.scrollChildIntoView(g,false)}}},onCollapse:function(){var b=this,a=b.pickerKeyNav;if(a){a.disable();b.ignoreMonitorTab=false}},onChange:function(){var b=this,a=b.picker;b.callParent(arguments);if(a){a.clearHighlight()}},onListSelect:function(c,e){var b=this,a=e[0],d=a?a.get("date"):null;b.setValue(d);b.fireEvent("select",b,d);b.picker.clearHighlight();b.collapse();b.inputEl.focus()}});Ext.define("Ext.grid.CellEditor",{extend:"Ext.Editor",constructor:function(a){a=Ext.apply({},a);if(a.field){a.field.monitorTab=false}if(!Ext.isDefined(a.autoSize)){a.autoSize={width:"boundEl"}}this.callParent([a])},onShow:function(){var a=this.boundEl.first();if(a){a.hide()}this.callParent(arguments)},onHide:function(){var a=this.boundEl.first();if(a){a.show()}this.callParent(arguments)},afterRender:function(){this.callParent(arguments);var a=this.field;if(a.isXType("checkboxfield")){a.mon(a.inputEl,"mousedown",this.onCheckBoxMouseDown,this);a.mon(a.inputEl,"click",this.onCheckBoxClick,this)}},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit;this.field.focus(false,10)},alignment:"tl-tl",hideEl:false,cls:Ext.baseCSSPrefix+"small-editor "+Ext.baseCSSPrefix+"grid-editor",shim:false,shadow:false});Ext.define("Ext.grid.ColumnLayout",{extend:"Ext.layout.container.HBox",alias:"layout.gridcolumn",type:"column",reserveOffset:false,shrinkToFit:false,clearInnerCtOnLayout:true,beforeLayout:function(){var h=this,c=0,b=h.getLayoutItems(),a=b.length,g,e,d;if(!Ext.isDefined(h.availableSpaceOffset)){d=h.owner.up("tablepanel").verticalScroller;h.availableSpaceOffset=d?d.width-1:0}e=h.callParent(arguments);h.innerCt.setHeight(23);for(;c<a;c++){g=b[c];g.el.setStyle({height:"auto"});g.titleContainer.setStyle({height:"auto",paddingTop:"0"});if(g.componentLayout&&g.componentLayout.lastComponentSize){g.componentLayout.lastComponentSize.height=g.el.dom.offsetHeight}}return e},calculateChildBoxes:function(m,c){var j=this,b=j.callParent(arguments),g=b.boxes,a=b.meta,h=g.length,d=0,e,k;if(c.width&&!j.isHeader){if(j.owner.forceFit){for(;d<h;d++){e=g[d];k=e.component;k.minWidth=Ext.grid.plugin.HeaderResizer.prototype.minColWidth;k.flex=e.width}b=j.callParent(arguments)}else{if(a.tooNarrow){c.width=a.desiredSize}}}return b},afterLayout:function(){var n=this,a=n.owner,m,p,h,b,g,c,e=0,k,j,d;n.callParent(arguments);if(!n.owner.hideHeaders){if(a.lockableInjected){m=a.up("tablepanel").up("tablepanel");p=m.query("headercontainer:not([isHeader])");h=(p[0]===a)?p[1]:p[0];if(!h.rendered){return}g=h.layout.getRenderTarget().getViewSize().height;if(!g){return}b=this.getRenderTarget().getViewSize().height;if(!b){return}m.componentLayout.layoutBusy=true;d=b;if(b>g){h.layout.align="stretch";h.setCalculatedSize(h.getWidth(),a.getHeight(),h.ownerCt);delete h.layout.align;c=h.up("tablepanel")}else{if(g>b){d=g;this.align="stretch";a.setCalculatedSize(a.getWidth(),h.getHeight(),a.ownerCt);delete this.align;c=a.up("tablepanel")}}m.componentLayout.layoutBusy=false;k=p[0].layout.getLayoutItems().concat(p[1].layout.getLayoutItems())}else{d=this.getRenderTarget().getViewSize().height;k=n.getLayoutItems()}j=k.length;for(;e<j;e++){k[e].setPadding(d)}if(c){setTimeout(function(){c.doLayout()},1)}}},updateInnerCtSize:function(b,d){var c=this,a;if(!c.isHeader){c.tooNarrow=d.meta.tooNarrow;a=(c.reserveOffset?c.availableSpaceOffset:0);if(d.meta.tooNarrow){b.width=d.meta.desiredSize+a}else{b.width+=a}}return c.callParent(arguments)},doOwnerCtLayouts:function(){var a=this.owner.ownerCt;if(!a.componentLayout.layoutBusy){a.doComponentLayout()}}});Ext.define("Ext.grid.LockingView",{mixins:{observable:"Ext.util.Observable"},eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell)/,constructor:function(c){var g=this,j=[],a=g.eventRelayRe,b=c.locked.getView(),h=c.normal.getView(),d,e;Ext.apply(g,{lockedView:b,normalView:h,lockedGrid:c.locked,normalGrid:c.normal,panel:c.panel});g.mixins.observable.constructor.call(g,c);d=b.events;for(e in d){if(d.hasOwnProperty(e)&&a.test(e)){j.push(e)}}g.relayEvents(b,j);g.relayEvents(h,j);h.on({scope:g,itemmouseleave:g.onItemMouseLeave,itemmouseenter:g.onItemMouseEnter});b.on({scope:g,itemmouseleave:g.onItemMouseLeave,itemmouseenter:g.onItemMouseEnter})},getGridColumns:function(){var a=this.lockedGrid.headerCt.getGridColumns();return a.concat(this.normalGrid.headerCt.getGridColumns())},getEl:function(a){return this.getViewForColumn(a).getEl()},getViewForColumn:function(b){var a=this.lockedView,c;a.headerCt.cascade(function(d){if(d===b){c=true;return false}});return c?a:this.normalView},onItemMouseEnter:function(c,b){var g=this,d=g.lockedView,a=g.normalView,e;if(c.trackOver){if(c!==d){a=d}e=a.getNode(b);a.highlightItem(e)}},onItemMouseLeave:function(c,b){var e=this,d=e.lockedView,a=e.normalView;if(c.trackOver){if(c!==d){a=d}a.clearHighlight()}},relayFn:function(c,b){b=b||[];var a=this.lockedView;a[c].apply(a,b||[]);a=this.normalView;a[c].apply(a,b||[])},getSelectionModel:function(){return this.panel.getSelectionModel()},getStore:function(){return this.panel.store},getNode:function(a){return this.normalView.getNode(a)},getCell:function(b,c){var a=this.getViewForColumn(c),d;d=a.getNode(b);return Ext.fly(d).down(c.getCellSelector())},getRecord:function(b){var a=this.lockedView.getRecord(b);if(!b){a=this.normalView.getRecord(b)}return a},addElListener:function(a,c,b){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},refresh:function(){this.relayFn("refresh",arguments)},bindStore:function(){this.relayFn("bindStore",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)}});Ext.define("Ext.grid.Lockable",{requires:["Ext.grid.LockingView"],syncRowHeight:true,spacerHidden:true,headerCounter:0,unlockText:"Unlock",lockText:"Lock",determineXTypeToCreate:function(){var c=this,g;if(c.subGridXType){g=c.subGridXType}else{var d=this.getXTypes().split("/"),b=d.length,e=d[b-1],a=d[b-2];if(a!=="tablepanel"){g=a}else{g=e}}return g},injectLockable:function(){this.lockable=true;this.hasView=true;var k=this,a=k.determineXTypeToCreate(),h=k.getSelectionModel(),b={xtype:a,enableAnimations:false,scroll:false,scrollerOwner:false,selModel:h,border:false,cls:Ext.baseCSSPrefix+"grid-inner-locked"},j={xtype:a,enableAnimations:false,scrollerOwner:false,selModel:h,border:false},e=0,d,c,g;k.addCls(Ext.baseCSSPrefix+"grid-locked");Ext.copyTo(j,k,k.normalCfgCopy);Ext.copyTo(b,k,k.lockedCfgCopy);for(;e<k.normalCfgCopy.length;e++){delete k[k.normalCfgCopy[e]]}for(e=0;e<k.lockedCfgCopy.length;e++){delete k[k.lockedCfgCopy[e]]}k.addEvents("lockcolumn","unlockcolumn");k.addStateEvents(["lockcolumn","unlockcolumn"]);k.lockedHeights=[];k.normalHeights=[];d=k.processColumns(k.columns);b.width=d.lockedWidth+Ext.num(h.headerWidth,0);b.columns=d.locked;j.columns=d.normal;k.store=Ext.StoreManager.lookup(k.store);b.store=k.store;j.store=k.store;j.flex=1;b.viewConfig=k.lockedViewConfig||{};b.viewConfig.loadingUseMsg=false;j.viewConfig=k.normalViewConfig||{};Ext.applyIf(b.viewConfig,k.viewConfig);Ext.applyIf(j.viewConfig,k.viewConfig);k.normalGrid=Ext.ComponentManager.create(j);k.lockedGrid=Ext.ComponentManager.create(b);k.view=Ext.create("Ext.grid.LockingView",{locked:k.lockedGrid,normal:k.normalGrid,panel:k});if(k.syncRowHeight){k.lockedGrid.getView().on({refresh:k.onLockedGridAfterRefresh,itemupdate:k.onLockedGridAfterUpdate,scope:k});k.normalGrid.getView().on({refresh:k.onNormalGridAfterRefresh,itemupdate:k.onNormalGridAfterUpdate,scope:k})}c=k.lockedGrid.headerCt;g=k.normalGrid.headerCt;c.lockedCt=true;c.lockableInjected=true;g.lockableInjected=true;c.on({columnshow:k.onLockedHeaderShow,columnhide:k.onLockedHeaderHide,columnmove:k.onLockedHeaderMove,sortchange:k.onLockedHeaderSortChange,columnresize:k.onLockedHeaderResize,scope:k});g.on({columnmove:k.onNormalHeaderMove,sortchange:k.onNormalHeaderSortChange,scope:k});k.normalGrid.on({scrollershow:k.onScrollerShow,scrollerhide:k.onScrollerHide,scope:k});k.lockedGrid.on("afterlayout",k.onLockedGridAfterLayout,k,{single:true});k.modifyHeaderCt();k.items=[k.lockedGrid,k.normalGrid];k.relayHeaderCtEvents(c);k.relayHeaderCtEvents(g);k.layout={type:"hbox",align:"stretch"}},processColumns:function(g){var e=0,a=g.length,b=1,d=[],c=[],h;for(;e<a;++e){h=g[e];h.processed=true;if(h.locked){if(!h.hidden){b+=h.width||Ext.grid.header.Container.prototype.defaultWidth}d.push(h)}else{c.push(h)}if(!h.headerId){h.headerId=(h.initialConfig||h).id||("L"+(++this.headerCounter))}}return{lockedWidth:b,locked:d,normal:c}},onLockedGridAfterLayout:function(){var b=this,a=b.lockedGrid.getView();a.on({beforerefresh:b.destroySpacer,scope:b})},onLockedHeaderMove:function(){if(this.syncRowHeight){this.onNormalGridAfterRefresh()}},onNormalHeaderMove:function(){if(this.syncRowHeight){this.onLockedGridAfterRefresh()}},getSpacerEl:function(){var d=this,b,a,c;if(!d.spacerEl){b=Ext.getScrollBarWidth()+(Ext.isIE?2:0);a=d.lockedGrid.getView();c=a.el;d.spacerEl=Ext.DomHelper.append(c,{cls:d.spacerHidden?(Ext.baseCSSPrefix+"hidden"):"",style:"height: "+b+"px;"},true)}return d.spacerEl},destroySpacer:function(){var a=this;if(a.spacerEl){a.spacerEl.destroy();delete a.spacerEl}},onLockedGridAfterRefresh:function(){var e=this,a=e.lockedGrid.getView(),c=a.el,g=c.query(a.getItemSelector()),d=g.length,b=0;e.lockedHeights=[];for(;b<d;b++){e.lockedHeights[b]=g[b].clientHeight}e.syncRowHeights()},onNormalGridAfterRefresh:function(){var e=this,a=e.normalGrid.getView(),c=a.el,g=c.query(a.getItemSelector()),d=g.length,b=0;e.normalHeights=[];for(;b<d;b++){e.normalHeights[b]=g[b].clientHeight}e.syncRowHeights()},onLockedGridAfterUpdate:function(a,b,c){this.lockedHeights[b]=c.clientHeight;this.syncRowHeights()},onNormalGridAfterUpdate:function(a,b,c){this.normalHeights[b]=c.clientHeight;this.syncRowHeights()},syncRowHeights:function(){var m=this,b=m.lockedHeights,n=m.normalHeights,a=[],k=b.length,h=0,p,d,e,j,g=m.getVerticalScroller(),c;if(b.length&&n.length){p=m.lockedGrid.getView();d=m.normalGrid.getView();e=p.el.query(p.getItemSelector());j=d.el.query(d.getItemSelector());for(;h<k;h++){if(!isNaN(b[h])&&!isNaN(n[h])){if(b[h]>n[h]){Ext.fly(j[h]).setHeight(b[h])}else{if(b[h]<n[h]){Ext.fly(e[h]).setHeight(n[h])}}}}m.normalGrid.invalidateScroller();if(g&&g.setViewScrollTop){g.setViewScrollTop(m.virtualScrollTop)}else{c=d.el.dom.scrollTop;d.el.dom.scrollTop=c;p.el.dom.scrollTop=c}m.lockedHeights=[];m.normalHeights=[]}},onScrollerShow:function(a,b){if(b==="horizontal"){this.spacerHidden=false;this.getSpacerEl().removeCls(Ext.baseCSSPrefix+"hidden")}},onScrollerHide:function(a,b){if(b==="horizontal"){this.spacerHidden=true;if(this.spacerEl){this.spacerEl.addCls(Ext.baseCSSPrefix+"hidden")}}},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(true);a.normalGrid.headerCt.getMenuItems=a.getMenuItems(false)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},getMenuItems:function(b){var g=this,h=g.unlockText,j=g.lockText,c=Ext.baseCSSPrefix+"hmenu-unlock",e=Ext.baseCSSPrefix+"hmenu-lock",a=Ext.Function.bind(g.onUnlockMenuClick,g),d=Ext.Function.bind(g.onLockMenuClick,g);return function(){var k=Ext.grid.header.Container.prototype.getMenuItems.call(this);k.push("-",{cls:c,text:h,handler:a,disabled:!b});k.push({cls:e,text:j,handler:d,disabled:b});return k}},lock:function(a,d){var c=this,e=c.normalGrid,h=c.lockedGrid,g=e.headerCt,b=h.headerCt;a=a||g.getMenu().activeHeader;if(a.flex){a.width=a.getWidth();delete a.flex}g.remove(a,false);b.suspendLayout=true;a.locked=true;if(Ext.isDefined(d)){b.insert(d,a)}else{b.add(a)}b.suspendLayout=false;c.syncLockedSection();c.fireEvent("lockcolumn",c,a)},syncLockedSection:function(){var a=this;a.syncLockedWidth();a.lockedGrid.getView().refresh();a.normalGrid.getView().refresh()},syncLockedWidth:function(){var b=this,a=b.lockedGrid.headerCt.getFullWidth(true);b.lockedGrid.setWidth(a+1);b.doComponentLayout()},onLockedHeaderResize:function(){this.syncLockedWidth()},onLockedHeaderHide:function(){this.syncLockedWidth()},onLockedHeaderShow:function(){this.syncLockedWidth()},onLockedHeaderSortChange:function(b,c,a){if(a){this.normalGrid.headerCt.clearOtherSortStates(null,true)}},onNormalHeaderSortChange:function(b,c,a){if(a){this.lockedGrid.headerCt.clearOtherSortStates(null,true)}},unlock:function(a,d){var c=this,e=c.normalGrid,h=c.lockedGrid,g=e.headerCt,b=h.headerCt;if(!Ext.isDefined(d)){d=0}a=a||b.getMenu().activeHeader;b.remove(a,false);c.syncLockedWidth();c.lockedGrid.getView().refresh();a.locked=false;g.insert(d,a);c.normalGrid.getView().refresh();c.fireEvent("unlockcolumn",c,a)},applyColumnsState:function(e){var n=this,c=n.lockedGrid,d=c.headerCt,k=n.normalGrid.headerCt,p=d.items,g=k.items,a,j=[],m=[],b,h=1;Ext.each(e,function(q){function r(t){return t.headerId==q.id}b=true;if(!(a=p.findBy(r))){a=g.findBy(r);b=false}if(a){if(a.applyColumnState){a.applyColumnState(q)}if(!Ext.isDefined(a.locked)){a.locked=b}if(a.locked){j.push(a);if(!a.hidden&&Ext.isNumber(a.width)){h+=a.width}}else{m.push(a)}}});if(j.length+m.length==p.getCount()+g.getCount()){d.removeAll(false);k.removeAll(false);d.add(j);k.add(m);c.setWidth(h)}},getColumnsState:function(){var b=this,a=b.lockedGrid.headerCt.getColumnsState(),c=b.normalGrid.headerCt.getColumnsState();return a.concat(c)},reconfigureLockable:function(a,b){var c=this,e=c.lockedGrid,d=c.normalGrid;if(b){e.headerCt.suspendLayout=true;d.headerCt.suspendLayout=true;e.headerCt.removeAll();d.headerCt.removeAll();b=c.processColumns(b);e.setWidth(b.lockedWidth);e.headerCt.add(b.locked);d.headerCt.add(b.normal)}if(a){a=Ext.data.StoreManager.lookup(a);c.store=a;e.bindStore(a);d.bindStore(a)}else{e.getView().refresh();d.getView().refresh()}if(b){e.headerCt.suspendLayout=false;d.headerCt.suspendLayout=false;e.headerCt.forceComponentLayout();d.headerCt.forceComponentLayout()}}});Ext.define("Ext.grid.Scroller",{extend:"Ext.Component",alias:"widget.gridscroller",weight:110,baseCls:Ext.baseCSSPrefix+"scroller",focusable:false,reservedSpace:0,renderTpl:['<div class="'+Ext.baseCSSPrefix+'scroller-ct" id="{baseId}_ct">','<div class="'+Ext.baseCSSPrefix+'stretcher" id="{baseId}_stretch"></div>',"</div>"],initComponent:function(){var c=this,b=c.dock,a=Ext.baseCSSPrefix+"scroller-vertical";c.offsets={bottom:0};c.scrollProp="scrollTop";c.vertical=true;c.sizeProp="width";if(b==="top"||b==="bottom"){a=Ext.baseCSSPrefix+"scroller-horizontal";c.sizeProp="height";c.scrollProp="scrollLeft";c.vertical=false;c.weight+=5}c.cls+=(" "+a);Ext.applyIf(c.renderSelectors,{stretchEl:"."+Ext.baseCSSPrefix+"stretcher",scrollEl:"."+Ext.baseCSSPrefix+"scroller-ct"});c.callParent()},ensureDimension:function(){var a=this,b=a.sizeProp;a[b]=a.scrollerSize=Ext.getScrollbarSize()[b]},initRenderData:function(){var b=this,a=b.callParent(arguments)||{};a.baseId=b.id;return a},afterRender:function(){var a=this;a.callParent();a.mon(a.scrollEl,"scroll",a.onElScroll,a);Ext.cache[a.el.id].skipGarbageCollection=true},onAdded:function(a){this.ownerGrid=a;this.callParent(arguments)},getSizeCalculation:function(){var h=this,c=h.getPanel(),g=1,b=1,d,j;if(!h.vertical){var e=c.query("tableview"),a=e[1]||e[0];if(!a){return false}g=a.headerCt.getFullWidth();if(Ext.isIEQuirks){g--}}else{d=c.down("tableview:not([lockableInjected])");if(!d||!d.el){return false}j=d.el.child("table",true);if(!j){return false}b=j.offsetHeight}if(isNaN(g)){g=1}if(isNaN(b)){b=1}return{width:g,height:b}},invalidate:function(d){var g=this,e=g.stretchEl;if(!e||!g.ownerCt){return}var k=g.getSizeCalculation(),j=g.scrollEl,b=j.dom,c=g.reservedSpace,h,a=5;if(k){e.setSize(k);k=g.el.getSize(true);if(g.vertical){k.width+=a;k.height-=c;h="left"}else{k.width-=c;k.height+=a;h="top"}j.setSize(k);b.style[h]=(-a)+"px";b.scrollTop=b.scrollTop}},afterComponentLayout:function(){this.callParent(arguments);this.invalidate()},restoreScrollPos:function(){var c=this,b=this.scrollEl,a=b&&b.dom;if(c._scrollPos!==null&&a){a[c.scrollProp]=c._scrollPos;c._scrollPos=null}},setReservedSpace:function(b){var a=this;if(a.reservedSpace!==b){a.reservedSpace=b;a.invalidate()}},saveScrollPos:function(){var c=this,b=this.scrollEl,a=b&&b.dom;c._scrollPos=a?a[c.scrollProp]:null},setScrollTop:function(c){var b=this.scrollEl,a=b&&b.dom;if(a){return a.scrollTop=Ext.Number.constrain(c,0,a.scrollHeight-a.clientHeight)}},setScrollLeft:function(c){var b=this.scrollEl,a=b&&b.dom;if(a){return a.scrollLeft=Ext.Number.constrain(c,0,a.scrollWidth-a.clientWidth)}},scrollByDeltaY:function(c){var b=this.scrollEl,a=b&&b.dom;if(a){return this.setScrollTop(a.scrollTop+c)}},scrollByDeltaX:function(c){var b=this.scrollEl,a=b&&b.dom;if(a){return this.setScrollLeft(a.scrollLeft+c)}},scrollToTop:function(){this.setScrollTop(0)},onElScroll:function(a,b){this.fireEvent("bodyscroll",a,b)},getPanel:function(){var a=this;if(!a.panel){a.panel=this.up("[scrollerOwner]")}return a.panel}});Ext.define("Ext.grid.PagingScroller",{extend:"Ext.grid.Scroller",alias:"widget.paginggridscroller",percentageFromEdge:0.35,scrollToLoadBuffer:200,activePrefetch:true,chunkSize:50,snapIncrement:25,syncScroll:true,initComponent:function(){var a=this,b=a.store;b.on("guaranteedrange",a.onGuaranteedRange,a);a.callParent(arguments)},onGuaranteedRange:function(c,g,a){var d=this,e=d.store,b;if(c.length&&d.visibleStart<c[0].index){return}e.loadRecords(c);if(!d.firstLoad){if(d.rendered){d.invalidate()}else{d.on("afterrender",d.invalidate,d,{single:true})}d.firstLoad=true}else{if(d.scrollEl&&d.scrollEl.dom&&d.scrollEl.dom.scrollHeight){d.syncTo()}}},syncTo:function(){var j=this,b=j.getPanel(),k=b.store,h=this.scrollEl.dom,d=j.visibleStart-k.guaranteedStart,c=d*j.rowHeight,m=h.scrollHeight,e=h.clientHeight,a=h.scrollTop,g;if(Ext.isIE9&&Ext.isStrict){e=h.offsetHeight+2}g=(m-e-a<=0);this.setViewScrollTop(c,g)},getPageData:function(){var b=this.getPanel(),c=b.store,a=c.getTotalCount();return{total:a,currentPage:c.currentPage,pageCount:Math.ceil(a/c.pageSize),fromRecord:((c.currentPage-1)*c.pageSize)+1,toRecord:Math.min(c.currentPage*c.pageSize,a)}},onElScroll:function(B,p){var D=this,m=D.getPanel(),h=m.store,C=h.pageSize,c=h.guaranteedStart,z=h.guaranteedEnd,y=h.getTotalCount(),k=Math.ceil(D.percentageFromEdge*C),E=p.scrollTop,g=Math.floor(E/D.rowHeight),n=m.down("tableview"),j=n.el,q=j.getHeight(),b=Math.ceil(q/D.rowHeight),a=g+b,d=Math.floor(g/C),w=Math.floor(a/C)+2,A=Math.ceil(y/C),r=D.snapIncrement,x=Math.floor(g/r)*r,u=x+C-1,v=D.activePrefetch;D.visibleStart=g;D.visibleEnd=a;D.syncScroll=true;if(y>=C){if(u>y-1){D.cancelLoad();if(h.rangeSatisfied(y-C,y-1)){D.syncScroll=true}h.guaranteeRange(y-C,y-1)}else{if(g<=c||a>z){if(g<=c){x-=r;u-=r;if(x<0){x=0;u=C}}if(h.rangeSatisfied(x,u)){D.cancelLoad();h.guaranteeRange(x,u)}else{h.mask();D.attemptLoad(x,u)}D.syncScroll=false}else{if(v&&g<(c+k)&&d>0){D.syncScroll=true;h.prefetchPage(d)}else{if(v&&a>(z-k)&&w<A){D.syncScroll=true;h.prefetchPage(w)}}}}}if(D.syncScroll){D.syncTo()}},getSizeCalculation:function(){var j=this,b=j.ownerGrid,d=b.getView(),e=j.store,h=j.dock,c=j.el.dom,g=1,a=1;if(!j.rowHeight){j.rowHeight=d.el.down(d.getItemSelector()).getHeight(false,true)}a=e[(!e.remoteFilter&&e.isFiltered())?"getCount":"getTotalCount"]()*j.rowHeight;if(isNaN(g)){g=1}if(isNaN(a)){a=1}return{width:g,height:a}},attemptLoad:function(c,a){var b=this;if(!b.loadTask){b.loadTask=Ext.create("Ext.util.DelayedTask",b.doAttemptLoad,b,[])}b.loadTask.delay(b.scrollToLoadBuffer,b.doAttemptLoad,b,[c,a])},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(c,a){var b=this.getPanel().store;b.guaranteeRange(c,a)},setViewScrollTop:function(c,d){var p=this,b=p.getPanel(),n=b.query("tableview"),g=0,j=n.length,a,e,h,m,k=p.el.dom;b.virtualScrollTop=c;a=n[1]||n[0];e=a.el.dom;m=((b.store.pageSize*p.rowHeight)-e.clientHeight);h=(c%((b.store.pageSize*p.rowHeight)+1));if(d){h=m}if(h>m){return}for(;g<j;g++){n[g].el.dom.scrollTop=h}}});Ext.define("Ext.panel.Table",{extend:"Ext.panel.Panel",alias:"widget.tablepanel",uses:["Ext.selection.RowModel","Ext.grid.Scroller","Ext.grid.header.Container","Ext.grid.Lockable"],extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",layout:"fit",hasView:false,viewType:null,selType:"rowmodel",scrollDelta:40,scroll:true,deferRowRender:true,sortableColumns:true,enableLocking:false,verticalScrollDock:"right",verticalScrollerType:"gridscroller",horizontalScrollerPresentCls:Ext.baseCSSPrefix+"horizontal-scroller-present",verticalScrollerPresentCls:Ext.baseCSSPrefix+"vertical-scroller-present",scrollerOwner:true,invalidateScrollerOnRefresh:true,enableColumnMove:true,enableColumnResize:true,enableColumnHide:true,initComponent:function(){var h=this,a=h.scroll,d=false,c=false,j=h.columns||h.colModel,g=0,b,e=h.border;if(h.hideHeaders){e=false}h.store=Ext.data.StoreManager.lookup(h.store||"ext-empty-store");if(j instanceof Ext.grid.header.Container){h.headerCt=j;h.headerCt.border=e;h.columns=h.headerCt.items.items}else{if(Ext.isArray(j)){j={items:j,border:e}}Ext.apply(j,{forceFit:h.forceFit,sortable:h.sortableColumns,enableColumnMove:h.enableColumnMove,enableColumnResize:h.enableColumnResize,enableColumnHide:h.enableColumnHide,border:e});h.columns=j.items;if(h.enableLocking||Ext.ComponentQuery.query("{locked !== undefined}{processed != true}",h.columns).length){h.self.mixin("lockable",Ext.grid.Lockable);h.injectLockable()}}h.addEvents("reconfigure","viewready","scrollerhide","scrollershow");h.bodyCls=h.bodyCls||"";h.bodyCls+=(" "+h.extraBodyCls);h.cls=h.cls||"";h.cls+=(" "+h.extraBaseCls);delete h.autoScroll;if(!h.hasView){if(!h.headerCt){h.headerCt=Ext.create("Ext.grid.header.Container",j)}h.columns=h.headerCt.items.items;if(h.hideHeaders){h.headerCt.height=0;h.headerCt.border=false;h.headerCt.addCls(Ext.baseCSSPrefix+"grid-header-ct-hidden");h.addCls(Ext.baseCSSPrefix+"grid-header-hidden");if(Ext.isIEQuirks){h.headerCt.style={display:"none"}}}if(a===true||a==="both"){d=c=true}else{if(a==="horizontal"){c=true}else{if(a==="vertical"){d=true}else{h.headerCt.availableSpaceOffset=0}}}if(d){h.verticalScroller=Ext.ComponentManager.create(h.initVerticalScroller());h.mon(h.verticalScroller,{bodyscroll:h.onVerticalScroll,scope:h})}if(c){h.horizontalScroller=Ext.ComponentManager.create(h.initHorizontalScroller());h.mon(h.horizontalScroller,{bodyscroll:h.onHorizontalScroll,scope:h})}h.headerCt.on("resize",h.onHeaderResize,h);h.relayHeaderCtEvents(h.headerCt);h.features=h.features||[];if(!Ext.isArray(h.features)){h.features=[h.features]}h.dockedItems=h.dockedItems||[];h.dockedItems.unshift(h.headerCt);h.viewConfig=h.viewConfig||{};h.viewConfig.invalidateScrollerOnRefresh=h.invalidateScrollerOnRefresh;b=h.getView();b.on({afterrender:function(){b.el.scroll=Ext.Function.bind(h.elScroll,h);h.mon(b.el,{mousewheel:h.onMouseWheel,scope:h})},single:true});h.items=[b];h.hasView=true;h.mon(b.store,{load:h.onStoreLoad,scope:h});h.mon(b,{viewReady:h.onViewReady,resize:h.onViewResize,refresh:{fn:h.onViewRefresh,scope:h,buffer:50},scope:h});this.relayEvents(b,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","selectionchange","beforeselect","select","beforedeselect","deselect"])}h.callParent(arguments)},onRender:function(){var a=this.verticalScroller,b=this.horizontalScroller;if(a){a.ensureDimension()}if(b){b.ensureDimension()}this.callParent(arguments)},initStateEvents:function(){var a=this.stateEvents;Ext.each(["columnresize","columnmove","columnhide","columnshow","sortchange"],function(b){if(Ext.Array.indexOf(a,b)){a.push(b)}});this.callParent()},initHorizontalScroller:function(){var b=this,a={xtype:"gridscroller",dock:"bottom",section:b,store:b.store};return a},initVerticalScroller:function(){var b=this,a=b.verticalScroller||{};Ext.applyIf(a,{xtype:b.verticalScrollerType,dock:b.verticalScrollDock,store:b.store});return a},relayHeaderCtEvents:function(a){this.relayEvents(a,["columnresize","columnmove","columnhide","columnshow","sortchange"])},getState:function(){var a=this,b=a.callParent(),c=a.store.sorters.first();b.columns=(a.headerCt||a).getColumnsState();if(c){b.sort={property:c.property,direction:c.direction}}return b},applyState:function(d){var c=this,e=d.sort,a=c.store,b=d.columns;delete d.columns;c.callParent(arguments);if(b){(c.headerCt||c).applyColumnsState(b)}if(e){if(a.remoteSort){a.sorters.add(Ext.create("Ext.util.Sorter",{property:e.property,direction:e.direction}))}else{a.sort(e.property,e.direction)}}},getStore:function(){return this.store},getView:function(){var a=this,b;if(!a.view){b=a.getSelectionModel();a.view=a.createComponent(Ext.apply({},a.viewConfig,{deferInitialRefresh:a.deferRowRender,xtype:a.viewType,store:a.store,headerCt:a.headerCt,selModel:b,features:a.features,panel:a}));a.mon(a.view,{uievent:a.processEvent,scope:a});b.view=a.view;a.headerCt.view=a.view;a.relayEvents(a.view,["cellclick","celldblclick"])}return a.view},setAutoScroll:Ext.emptyFn,elScroll:function(d,e,b){var c=this,a;if(d==="up"||d==="left"){e=-e}if(d==="down"||d==="up"){a=c.getVerticalScroller();if(a){a.scrollByDeltaY(e)}}else{a=c.getHorizontalScroller();if(a){a.scrollByDeltaX(e)}}},processEvent:function(g,b,a,c,d,j){var h=this,k;if(d!==-1){k=h.headerCt.getGridColumns()[d];return k.processEvent.apply(k,arguments)}},determineScrollbars:function(){if(this.determineScrollbarsRunning){return}this.determineScrollbarsRunning=true;var j=this,k=j.view,d,a,e,m,p,g,h=j.verticalScroller,c=j.horizontalScroller,n=(h&&h.ownerCt===j?1:0)|(c&&c.ownerCt===j?2:0),b=0;if(!j.collapsed&&k&&k.viewReady){d=k.el.getSize();m=d.width+((n&1)?h.width:0);g=d.height+((n&2)?c.height:0);e=(j.headerCt.query("[flex]").length&&!j.headerCt.layout.tooNarrow)?0:j.headerCt.getFullWidth();if(h&&h.el){p=h.getSizeCalculation().height}else{a=k.el.child("table",true);p=a?a.offsetHeight:0}if(p>g){b=1;if(c&&((m-e)<h.width)){b=3}}else{if(e>m){b=2;if(h&&((g-p)<c.height)){b=3}}}if(b!==n){j.suspendLayout=true;if(b&1){j.showVerticalScroller()}else{j.hideVerticalScroller()}if(b&2){j.showHorizontalScroller()}else{j.hideHorizontalScroller()}j.suspendLayout=false;j.doComponentLayout();j.getLayout().layout()}}delete j.determineScrollbarsRunning},onViewResize:function(){this.determineScrollbars()},afterComponentLayout:function(){this.callParent(arguments);this.determineScrollbars();this.invalidateScroller()},onHeaderResize:function(){if(!this.componentLayout.layoutBusy&&this.view&&this.view.rendered){this.determineScrollbars();this.invalidateScroller()}},afterCollapse:function(){var a=this;if(a.verticalScroller){a.verticalScroller.saveScrollPos()}if(a.horizontalScroller){a.horizontalScroller.saveScrollPos()}a.callParent(arguments)},afterExpand:function(){var a=this;a.callParent(arguments);if(a.verticalScroller){a.verticalScroller.restoreScrollPos()}if(a.horizontalScroller){a.horizontalScroller.restoreScrollPos()}},hideHorizontalScroller:function(){var a=this;if(a.horizontalScroller&&a.horizontalScroller.ownerCt===a){a.verticalScroller.setReservedSpace(0);a.removeDocked(a.horizontalScroller,false);a.removeCls(a.horizontalScrollerPresentCls);a.fireEvent("scrollerhide",a.horizontalScroller,"horizontal")}},showHorizontalScroller:function(){var a=this;if(a.verticalScroller){a.verticalScroller.setReservedSpace(Ext.getScrollbarSize().height-1)}if(a.horizontalScroller&&a.horizontalScroller.ownerCt!==a){a.addDocked(a.horizontalScroller);a.addCls(a.horizontalScrollerPresentCls);a.fireEvent("scrollershow",a.horizontalScroller,"horizontal")}},hideVerticalScroller:function(){var a=this;a.setHeaderReserveOffset(false);if(a.verticalScroller&&a.verticalScroller.ownerCt===a){a.removeDocked(a.verticalScroller,false);a.removeCls(a.verticalScrollerPresentCls);a.fireEvent("scrollerhide",a.verticalScroller,"vertical")}},showVerticalScroller:function(){var a=this;a.setHeaderReserveOffset(true);if(a.verticalScroller&&a.verticalScroller.ownerCt!==a){a.addDocked(a.verticalScroller);a.addCls(a.verticalScrollerPresentCls);a.fireEvent("scrollershow",a.verticalScroller,"vertical")}},setHeaderReserveOffset:function(a){var c=this.headerCt,b=c.layout;if(b&&b.reserveOffset!==a){b.reserveOffset=a;if(!this.suspendLayout){c.doLayout()}}},invalidateScroller:function(){var b=this,a=b.verticalScroller,c=b.horizontalScroller;if(a){a.invalidate()}if(c){c.invalidate()}},onHeaderMove:function(c,d,a,b){this.view.refresh()},onHeaderHide:function(a,b){this.invalidateScroller()},onHeaderShow:function(a,b){this.invalidateScroller()},getVerticalScroller:function(){return this.getScrollerOwner().down("gridscroller[dock="+this.verticalScrollDock+"]")},getHorizontalScroller:function(){return this.getScrollerOwner().down("gridscroller[dock=bottom]")},onMouseWheel:function(q){var r=this,m=r.getVerticalScroller(),t=r.getHorizontalScroller(),b=-r.scrollDelta,c=q.getWheelDeltas(),j=b*c.x,h=b*c.y,p,u,a,v,d,k,n,g;if(t){u=t.scrollEl;if(u){v=u.dom;k=v.scrollLeft!==v.scrollWidth-v.clientWidth;d=v.scrollLeft!==0}}if(m){p=m.scrollEl;if(p){a=p.dom;n=a.scrollTop!==a.scrollHeight-a.clientHeight;g=a.scrollTop!==0}}if(t){if((j<0&&d)||(j>0&&k)){q.stopEvent();t.scrollByDeltaX(j)}}if(m){if((h<0&&g)||(h>0&&n)){q.stopEvent();m.scrollByDeltaY(h)}}},onViewReady:function(){var a=this;a.fireEvent("viewready",a);if(a.deferRowRender){a.determineScrollbars();a.invalidateScroller()}},onViewRefresh:function(){var a=this;if(!a.rendering){this.determineScrollbars();if(this.invalidateScrollerOnRefresh){this.invalidateScroller()}}},setScrollTop:function(d){var c=this,b=c.getScrollerOwner(),a=c.getVerticalScroller();b.virtualScrollTop=d;if(a){a.setScrollTop(d)}},getScrollerOwner:function(){var a=this;if(!this.scrollerOwner){a=this.up("[scrollerOwner]")}return a},scrollByDeltaY:function(a){var b=this.getVerticalScroller();if(b){b.scrollByDeltaY(a)}},scrollByDeltaX:function(a){var b=this.getHorizontalScroller();if(b){b.scrollByDeltaX(a)}},getLhsMarker:function(){var a=this;if(!a.lhsMarker){a.lhsMarker=Ext.DomHelper.append(a.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},true)}return a.lhsMarker},getRhsMarker:function(){var a=this;if(!a.rhsMarker){a.rhsMarker=Ext.DomHelper.append(a.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},true)}return a.rhsMarker},getSelectionModel:function(){if(!this.selModel){this.selModel={}}var b="SINGLE",a;if(this.simpleSelect){b="SIMPLE"}else{if(this.multiSelect){b="MULTI"}}Ext.applyIf(this.selModel,{allowDeselect:this.allowDeselect,mode:b});if(!this.selModel.events){a=this.selModel.selType||this.selType;this.selModel=Ext.create("selection."+a,this.selModel)}if(!this.selModel.hasRelaySetup){this.relayEvents(this.selModel,["selectionchange","beforeselect","beforedeselect","select","deselect"]);this.selModel.hasRelaySetup=true}if(this.disableSelection){this.selModel.locked=true}return this.selModel},onVerticalScroll:function(e,g){var b=this.getScrollerOwner(),c=b.query("tableview"),d=0,a=c.length;for(;d<a;d++){c[d].el.dom.scrollTop=g.scrollTop}},onHorizontalScroll:function(d,e){var b=this.getScrollerOwner(),c=b.query("tableview"),a=c[1]||c[0];a.el.dom.scrollLeft=e.scrollLeft;this.headerCt.el.dom.scrollLeft=e.scrollLeft},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(a){var b=this;b.store=a;b.getView().bindStore(a)},beforeDestroy:function(){Ext.destroy(this.horizontalScroller,this.verticalScroller);this.callParent()},reconfigure:function(a,b){var c=this,d=c.headerCt;if(c.lockable){c.reconfigureLockable(a,b)}else{if(b){d.suspendLayout=true;d.removeAll();d.add(b)}if(a){a=Ext.StoreManager.lookup(a);c.bindStore(a)}else{c.getView().refresh()}if(b){d.suspendLayout=false;c.forceComponentLayout()}}c.fireEvent("reconfigure",c)}});Ext.define("Ext.view.Table",{extend:"Ext.view.View",alias:"widget.tableview",uses:["Ext.view.TableChunker","Ext.util.DelayedTask","Ext.util.MixedCollection"],baseCls:Ext.baseCSSPrefix+"grid-view",itemSelector:"."+Ext.baseCSSPrefix+"grid-row",cellSelector:"."+Ext.baseCSSPrefix+"grid-cell",selectedItemCls:Ext.baseCSSPrefix+"grid-row-selected",selectedCellCls:Ext.baseCSSPrefix+"grid-cell-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-row-focused",overItemCls:Ext.baseCSSPrefix+"grid-row-over",altRowCls:Ext.baseCSSPrefix+"grid-row-alt",rowClsRe:/(?:^|\s*)grid-row-(first|last|alt)(?:\s+|$)/g,cellRe:new RegExp("x-grid-cell-([^\\s]+) ",""),trackOver:true,getRowClass:null,initComponent:function(){var a=this;a.scrollState={};a.selModel.view=a;a.headerCt.view=a;a.initFeatures();a.tpl="<div></div>";a.callParent();a.mon(a.store,{load:a.onStoreLoad,scope:a})},onStoreLoad:function(){var a=this;if(a.invalidateScrollerOnRefresh){if(Ext.isGecko){if(!a.scrollToTopTask){a.scrollToTopTask=Ext.create("Ext.util.DelayedTask",a.scrollToTop,a)}a.scrollToTopTask.delay(1)}else{a.scrollToTop()}}},scrollToTop:Ext.emptyFn,addElListener:function(a,c,b){this.mon(this,a,c,b,{element:"el"})},getGridColumns:function(){return this.headerCt.getGridColumns()},getHeaderAtIndex:function(a){return this.headerCt.getHeaderAtIndex(a)},getCell:function(a,b){var c=this.getNode(a);return Ext.fly(c).down(b.getCellSelector())},getFeature:function(b){var a=this.featuresMC;if(a){return a.get(b)}},initFeatures:function(){var d=this,b=0,c,a;d.features=d.features||[];c=d.features;a=c.length;d.featuresMC=Ext.create("Ext.util.MixedCollection");for(;b<a;b++){if(!c[b].isFeature){c[b]=Ext.create("feature."+c[b].ftype,c[b])}c[b].view=d;d.featuresMC.add(c[b])}},attachEventsForFeatures:function(){var b=this.features,c=b.length,a=0;for(;a<c;a++){if(b[a].isFeature){b[a].attachEvents()}}},afterRender:function(){var a=this;a.callParent();a.mon(a.el,{scroll:a.fireBodyScroll,scope:a});a.el.unselectable();a.attachEventsForFeatures()},fireBodyScroll:function(b,a){this.fireEvent("bodyscroll",b,a)},prepareData:function(c,k,e){var h=this,j=h.headerCt.prepareData(c,k,e,h,h.ownerCt),a=h.features,g=a.length,d=0,b,m;for(;d<g;d++){m=a[d];if(m.isFeature){Ext.apply(j,m.getAdditionalData(c,k,e,j,h))}}return j},collectData:function(d,p){var q=this.callParent(arguments),c=this.headerCt,n=c.getFullWidth(),b=this.features,k=b.length,a={rows:q,fullWidth:n},g=0,r,e=0,m,h;m=q.length;if(this.getRowClass){for(;e<m;e++){h={};q[e]["rowCls"]=this.getRowClass(d[e],e,h,this.store)}}for(;g<k;g++){r=b[g];if(r.isFeature&&r.collectData&&!r.disabled){a=r.collectData(d,q,p,n,a);break}}return a},onHeaderResize:function(e,a,d){var c=this,b=c.el;if(b){c.saveScrollState();if(Ext.isIE6||Ext.isIE7){if(e.el.hasCls(Ext.baseCSSPrefix+"column-header-first")){a+=1}}b.select("."+Ext.baseCSSPrefix+"grid-col-resizer-"+e.id).setWidth(a);b.select("."+Ext.baseCSSPrefix+"grid-table-resizer").setWidth(c.headerCt.getFullWidth());c.restoreScrollState();if(!c.ignoreTemplate){c.setNewTemplate()}if(!d){c.el.focus()}}},onHeaderShow:function(c,d,b){var a=this;a.ignoreTemplate=true;if(d.oldWidth){a.onHeaderResize(d,d.oldWidth,b);delete d.oldWidth}else{if(d.width&&!d.flex){a.onHeaderResize(d,d.width,b)}}delete a.ignoreTemplate;a.setNewTemplate()},onHeaderHide:function(b,c,a){this.onHeaderResize(c,0,a)},setNewTemplate:function(){var b=this,a=b.headerCt.getColumnsForTpl(true);b.tpl=b.getTableChunker().getTableTpl({columns:a,features:b.features})},getTableChunker:function(){return this.chunker||Ext.view.TableChunker},addRowCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).addCls(a)}},removeRowCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).removeCls(a)}},onRowSelect:function(a){this.addRowCls(a,this.selectedItemCls)},onRowDeselect:function(b){var a=this;a.removeRowCls(b,a.selectedItemCls);a.removeRowCls(b,a.focusedItemCls)},onCellSelect:function(b){var a=this.getCellByPosition(b);if(a){a.addCls(this.selectedCellCls)}},onCellDeselect:function(b){var a=this.getCellByPosition(b);if(a){a.removeCls(this.selectedCellCls)}},onCellFocus:function(a){this.focusCell(a)},getCellByPosition:function(b){var h=b.row,e=b.column,d=this.store,g=this.getNode(h),j=this.headerCt.getHeaderAtIndex(e),c,a=false;if(j&&g){c=j.getCellSelector();a=Ext.fly(g).down(c)}return a},onRowFocus:function(d,b,a){var c=this,e=c.getNode(d);if(b){c.addRowCls(d,c.focusedItemCls);if(!a){c.focusRow(d)}}else{c.removeRowCls(d,c.focusedItemCls)}},focusRow:function(b){var g=this,k=g.getNode(b),c=g.el,h=0,a=g.ownerCt,j,d,e;if(k&&c){d=c.getRegion();j=Ext.fly(k).getRegion();if(j.top<d.top){h=j.top-d.top}else{if(j.bottom>d.bottom){h=j.bottom-d.bottom}}e=g.getRecord(k);b=g.store.indexOf(e);if(h){a.scrollByDeltaY(h)}g.fireEvent("rowfocus",e,k,b)}},focusCell:function(h){var k=this,m=k.getCellByPosition(h),b=k.el,d=0,e=0,c=b.getRegion(),a=k.ownerCt,j,g;if(m){j=m.getRegion();if(j.top<c.top){d=j.top-c.top}else{if(j.bottom>c.bottom){d=j.bottom-c.bottom}}if(j.left<c.left){e=j.left-c.left}else{if(j.right>c.right){e=j.right-c.right}}if(d){a.scrollByDeltaY(d)}if(e){a.scrollByDeltaX(e)}b.focus();k.fireEvent("cellfocus",g,m,h)}},scrollByDelta:function(c,b){b=b||"scrollTop";var a=this.el.dom;a[b]=(a[b]+=c)},onUpdate:function(b,a){this.callParent(arguments)},saveScrollState:function(){if(this.rendered){var b=this.el.dom,a=this.scrollState;a.left=b.scrollLeft;a.top=b.scrollTop}},restoreScrollState:function(){if(this.rendered){var b=this.el.dom,a=this.scrollState,c=this.headerCt.el.dom;c.scrollLeft=b.scrollLeft=a.left;b.scrollTop=a.top}},refresh:function(){this.setNewTemplate();this.callParent(arguments)},processItemEvent:function(b,p,k,d){var h=this,m=d.getTarget(h.cellSelector,p),j=m?m.cellIndex:-1,a=h.statics().EventMap,c=h.getSelectionModel(),g=d.type,n;if(g=="keydown"&&!m&&c.getCurrentPosition){m=h.getCellByPosition(c.getCurrentPosition());if(m){m=m.dom;j=m.cellIndex}}n=h.fireEvent("uievent",g,h,m,k,j,d);if(n===false||h.callParent(arguments)===false){return false}if(g=="mouseover"||g=="mouseout"){return true}return !((h["onBeforeCell"+a[g]](m,j,b,p,k,d)===false)||(h.fireEvent("beforecell"+g,h,m,j,b,p,k,d)===false)||(h["onCell"+a[g]](m,j,b,p,k,d)===false)||(h.fireEvent("cell"+g,h,m,j,b,p,k,d)===false))},processSpecialEvent:function(k){var p=this,b=p.statics().EventMap,d=p.features,n=d.length,q=k.type,g,r,h,j,c,m,a=p.ownerCt;p.callParent(arguments);if(q=="mouseover"||q=="mouseout"){return}for(g=0;g<n;g++){r=d[g];if(r.hasFeatureEvent){j=k.getTarget(r.eventSelector,p.getTargetEl());if(j){h=r.eventPrefix;c=r.getFireEventArgs("before"+h+q,p,j,k);m=r.getFireEventArgs(h+q,p,j,k);if((p.fireEvent.apply(p,c)===false)||(a.fireEvent.apply(a,c)===false)||(p.fireEvent.apply(p,m)===false)||(a.fireEvent.apply(a,m)===false)){return false}}}}return true},onCellMouseDown:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,expandToFit:function(b){if(b){var a=this.getMaxContentWidth(b);delete b.flex;b.setWidth(a)}},getMaxContentWidth:function(h){var a=h.getCellInnerSelector(),c=this.el.query(a),d=0,g=c.length,e=h.el.dom.scrollWidth,b;for(;d<g;d++){b=c[d].scrollWidth;if(b>e){e=b}}return e},getPositionByEvent:function(g){var d=this,b=g.getTarget(d.cellSelector),c=g.getTarget(d.itemSelector),a=d.getRecord(c),h=d.getHeaderByCell(b);return d.getPosition(a,h)},getHeaderByCell:function(b){if(b){var a=b.className.match(this.cellRe);if(a&&a[1]){return Ext.getCmp(a[1])}}return false},walkCells:function(n,p,h,q,a,r){var k=this,t=n.row,d=n.column,m=k.store.getCount(),g=k.getFirstVisibleColumnIndex(),b=k.getLastVisibleColumnIndex(),j={row:t,column:d},c=k.headerCt.getHeaderAtIndex(d);if(!c||c.hidden){return false}h=h||{};p=p.toLowerCase();switch(p){case"right":if(d===b){if(q||t===m-1){return false}if(!h.ctrlKey){j.row=t+1;j.column=g}}else{if(!h.ctrlKey){j.column=d+k.getRightGap(c)}else{j.column=b}}break;case"left":if(d===g){if(q||t===0){return false}if(!h.ctrlKey){j.row=t-1;j.column=b}}else{if(!h.ctrlKey){j.column=d+k.getLeftGap(c)}else{j.column=g}}break;case"up":if(t===0){return false}else{if(!h.ctrlKey){j.row=t-1}else{j.row=0}}break;case"down":if(t===m-1){return false}else{if(!h.ctrlKey){j.row=t+1}else{j.row=m-1}}break}if(a&&a.call(r||window,j)!==true){return false}else{return j}},getFirstVisibleColumnIndex:function(){var c=this.getHeaderCt(),a=c.getGridColumns(),d=Ext.ComponentQuery.query(":not([hidden])",a),b=d[0];return c.getHeaderIndex(b)},getLastVisibleColumnIndex:function(){var c=this.getHeaderCt(),a=c.getGridColumns(),d=Ext.ComponentQuery.query(":not([hidden])",a),b=d[d.length-1];return c.getHeaderIndex(b)},getHeaderCt:function(){return this.headerCt},getPosition:function(a,e){var d=this,b=d.store,c=d.headerCt.getGridColumns();return{row:b.indexOf(a),column:Ext.Array.indexOf(c,e)}},getRightGap:function(a){var g=this.getHeaderCt(),e=g.getGridColumns(),b=Ext.Array.indexOf(e,a),c=b+1,d;for(;c<=e.length;c++){if(!e[c].hidden){d=c;break}}return d-b},beforeDestroy:function(){if(this.rendered){this.el.removeAllListeners()}this.callParent(arguments)},getLeftGap:function(a){var g=this.getHeaderCt(),e=g.getGridColumns(),c=Ext.Array.indexOf(e,a),d=c-1,b;for(;d>=0;d--){if(!e[d].hidden){b=d;break}}return b-c}});Ext.define("Ext.grid.View",{extend:"Ext.view.Table",alias:"widget.gridview",stripeRows:true,invalidateScrollerOnRefresh:true,scrollToTop:function(){if(this.rendered){var b=this.ownerCt,a=b.verticalScroller;if(a){a.scrollToTop()}}},onAdd:function(c,a,b){this.callParent(arguments);this.doStripeRows(b)},onRemove:function(c,a,b){this.callParent(arguments);this.doStripeRows(b)},onUpdate:function(d,a,b){var c=d.indexOf(a);this.callParent(arguments);this.doStripeRows(c,c)},doStripeRows:function(b,a){if(this.stripeRows){var d=this.getNodes(b,a),g=d.length,c=0,e;for(;c<g;c++){e=d[c];e.className=e.className.replace(this.rowClsRe," ");b++;if(b%2===0){e.className+=(" "+this.altRowCls)}}}},refresh:function(b){this.callParent(arguments);this.doStripeRows(0);var a=this.up("gridpanel");if(a&&this.invalidateScrollerOnRefresh){a.invalidateScroller()}}});Ext.define("Ext.grid.Panel",{extend:"Ext.panel.Table",requires:["Ext.grid.View"],alias:["widget.gridpanel","widget.grid"],alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],viewType:"gridview",lockable:false,normalCfgCopy:["invalidateScrollerOnRefresh","verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:["invalidateScrollerOnRefresh"],initComponent:function(){var a=this;if(a.columnLines){a.setColumnLines(a.columnLines)}a.callParent()},setColumnLines:function(a){var b=this,c=(a)?"addClsWithUI":"removeClsWithUI";b[c]("with-col-lines")}});Ext.define("Ext.grid.RowEditor",{extend:"Ext.form.Panel",requires:["Ext.tip.ToolTip","Ext.util.HashMap","Ext.util.KeyNav"],saveBtnText:"Update",cancelBtnText:"Cancel",errorsText:"Errors",dirtyText:"You need to commit or cancel your changes",lastScrollLeft:0,lastScrollTop:0,border:false,hideMode:"offsets",initComponent:function(){var b=this,a;b.cls=Ext.baseCSSPrefix+"grid-row-editor";b.layout={type:"hbox",align:"middle"};b.columns=Ext.create("Ext.util.HashMap");b.columns.getKey=function(d){var c;if(d.getEditor){c=d.getEditor();if(c){return c.id}}return d.id};b.mon(b.columns,{add:b.onFieldAdd,remove:b.onFieldRemove,replace:b.onFieldReplace,scope:b});b.callParent(arguments);if(b.fields){b.setField(b.fields);delete b.fields}a=b.getForm();a.trackResetOnLoad=true},onFieldChange:function(){var c=this,b=c.getForm(),a=b.isValid();if(c.errorSummary&&c.isVisible()){c[a?"hideToolTip":"showToolTip"]()}if(c.floatingButtons){c.floatingButtons.child("#update").setDisabled(!a)}c.isValid=a},afterRender:function(){var b=this,a=b.editingPlugin;b.callParent(arguments);b.mon(b.renderTo,"scroll",b.onCtScroll,b,{buffer:100});b.mon(b.el,{click:Ext.emptyFn,stopPropagation:true});b.el.swallowEvent(["keypress","keydown"]);b.keyNav=Ext.create("Ext.util.KeyNav",b.el,{enter:a.completeEdit,esc:a.onEscKey,scope:a});b.mon(a.view,{beforerefresh:b.onBeforeViewRefresh,refresh:b.onViewRefresh,scope:b})},onBeforeViewRefresh:function(b){var c=this,a=b.el.dom;if(c.el.dom.parentNode===a){a.removeChild(c.el.dom)}},onViewRefresh:function(c){var e=this,b=c.el.dom,d=e.context,a;b.appendChild(e.el.dom);if(d&&(a=d.store.indexOf(d.record))>=0){d.row=c.getNode(a);e.reposition();if(e.tooltip&&e.tooltip.isVisible()){e.tooltip.setTarget(d.row)}}else{e.editingPlugin.cancelEdit()}},onCtScroll:function(d,c){var a=this,b=c.scrollTop,g=c.scrollLeft;if(b!==a.lastScrollTop){a.lastScrollTop=b;if((a.tooltip&&a.tooltip.isVisible())||a.hiddenTip){a.repositionTip()}}if(g!==a.lastScrollLeft){a.lastScrollLeft=g;a.reposition()}},onColumnAdd:function(a){this.setField(a)},onColumnRemove:function(a){this.columns.remove(a)},onColumnResize:function(b,a){b.getEditor().setWidth(a-2);if(this.isVisible()){this.reposition()}},onColumnHide:function(a){a.getEditor().hide();if(this.isVisible()){this.reposition()}},onColumnShow:function(a){var b=a.getEditor();b.setWidth(a.getWidth()-2).show();if(this.isVisible()){this.reposition()}},onColumnMove:function(b,a,c){var d=b.getEditor();if(this.items.indexOf(d)!=c){this.move(a,c)}},onFieldAdd:function(e,a,b){var c=this,g=c.editingPlugin.grid.headerCt.getHeaderIndex(b),d=b.getEditor({xtype:"displayfield"});c.insert(g,d)},onFieldRemove:function(g,a,b){var c=this,e=b.getEditor(),d=e.el;c.remove(e,false);if(d){d.remove()}},onFieldReplace:function(e,a,c,b){var d=this;d.onFieldRemove(e,a,b)},clearFields:function(){var a=this,b=a.columns;b.each(function(c){b.removeAtKey(c)})},getFloatingButtons:function(){var d=this,e=Ext.baseCSSPrefix,c=e+"grid-row-editor-buttons",b=d.editingPlugin,a;if(!d.floatingButtons){a=d.floatingButtons=Ext.create("Ext.Container",{renderTpl:['<div class="{baseCls}-ml"></div>','<div class="{baseCls}-mr"></div>','<div class="{baseCls}-bl"></div>','<div class="{baseCls}-br"></div>','<div class="{baseCls}-bc"></div>'],renderTo:d.el,baseCls:c,layout:{type:"hbox",align:"middle"},defaults:{margins:"0 1 0 1"},items:[{itemId:"update",flex:1,xtype:"button",handler:b.completeEdit,scope:b,text:d.saveBtnText,disabled:!d.isValid},{flex:1,xtype:"button",handler:b.cancelEdit,scope:b,text:d.cancelBtnText}]});d.mon(a.el,{mousedown:Ext.emptyFn,click:Ext.emptyFn,stopEvent:true})}return d.floatingButtons},reposition:function(v){var x=this,c=x.context,e=c&&Ext.get(c.row),t=x.getFloatingButtons(),u=t.el,a=x.editingPlugin.grid,g=a.view.el,w=a.verticalScroller,r=a.headerCt.getFullWidth(),z=a.getWidth(),n=Math.min(r,z),q=a.view.el.dom.scrollLeft,j=t.getWidth(),d=(n-j)/2+q,k,h,p,m=function(){if(w){w.invalidate();u.scrollIntoView(g,false)}if(v&&v.callback){v.callback.call(v.scope||x)}};if(e&&Ext.isElement(e.dom)){e.scrollIntoView(g,false);k=e.getXY()[1]-5;h=e.getHeight();p=h+10;if(Ext.isIE){p+=2}if(x.getHeight()!=p){x.setHeight(p);x.el.setLeft(0)}if(v){var b={to:{y:k},duration:v.duration||125,listeners:{afteranimate:function(){m();k=e.getXY()[1]-5;x.el.setY(k)}}};x.animate(b)}else{x.el.setY(k);m()}}if(x.getWidth()!=r){x.setWidth(r)}u.setLeft(d)},getEditor:function(a){var b=this;if(Ext.isNumber(a)){return b.query(">[isFormField]")[a]}else{if(a instanceof Ext.grid.column.Column){return a.getEditor()}}},removeField:function(b){var a=this;b=a.getEditor(b);a.mun(b,"validitychange",a.onValidityChange,a);a.columns.removeKey(b.id)},setField:function(a){var b=this,c;if(Ext.isArray(a)){Ext.Array.forEach(a,b.setField,b);return}c=a.getEditor(null,{xtype:"displayfield",getModelData:function(){return null}});c.margins="0 0 0 2";c.setWidth(a.getDesiredWidth()-2);b.mon(c,"change",b.onFieldChange,b);b.columns.add(c.id,a);if(a.hidden){b.onColumnHide(a)}if(b.isVisible()&&b.context){b.renderColumnData(c,b.context.record)}},loadRecord:function(a){var c=this,b=c.getForm();b.loadRecord(a);if(b.isValid()){c.hideToolTip()}else{c.showToolTip()}Ext.Array.forEach(c.query(">displayfield"),function(d){c.renderColumnData(d,a)},c)},renderColumnData:function(m,h){var j=this,a=j.editingPlugin.grid,d=a.headerCt,k=a.view,p=k.store,e=j.columns.get(m.id),n=h.get(e.dataIndex);if(e.renderer){var b={tdCls:"",style:""},c=p.indexOf(h),g=d.getHeaderIndex(e);n=e.renderer.call(e.scope||d.ownerCt,n,b,h,c,g,p,k)}m.setRawValue(n);m.resetOriginalValue()},beforeEdit:function(){var a=this;if(a.isVisible()&&!a.autoCancel&&a.isDirty()){a.showToolTip();return false}},startEdit:function(b,h){var g=this,e=g.editingPlugin.grid,a=e.getView(),c=e.store,d=g.context=Ext.apply(g.editingPlugin.context,{view:e.getView(),store:c});d.grid.getSelectionModel().select(b);g.loadRecord(b);if(!g.isVisible()){g.show();g.focusContextCell()}else{g.reposition({callback:this.focusContextCell})}},focusContextCell:function(){var a=this.getEditor(this.context.colIdx);if(a&&a.focus){a.focus()}},cancelEdit:function(){var b=this,a=b.getForm();b.hide();a.clearInvalid();a.reset()},completeEdit:function(){var b=this,a=b.getForm();if(!a.isValid()){return}a.updateRecord(b.context.record);b.hide();return true},onShow:function(){var a=this;a.callParent(arguments);a.reposition()},onHide:function(){var a=this;a.callParent(arguments);a.hideToolTip();a.invalidateScroller();if(a.context){a.context.view.focus();a.context=null}},isDirty:function(){var b=this,a=b.getForm();return a.isDirty()},getToolTip:function(){var a=this,b;if(!a.tooltip){b=a.tooltip=Ext.createWidget("tooltip",{cls:Ext.baseCSSPrefix+"grid-row-editor-errors",title:a.errorsText,autoHide:false,closable:true,closeAction:"disable",anchor:"left"})}return a.tooltip},hideToolTip:function(){var a=this,b=a.getToolTip();if(b.rendered){b.disable()}a.hiddenTip=false},showToolTip:function(){var c=this,d=c.getToolTip(),a=c.context,e=Ext.get(a.row),b=a.grid.view.el;d.setTarget(e);d.showAt([-10000,-10000]);d.body.update(c.getErrors());d.mouseOffset=[b.getWidth()-e.getWidth()+c.lastScrollLeft+15,0];c.repositionTip();d.doLayout();d.enable()},repositionTip:function(){var j=this,k=j.getToolTip(),c=j.context,n=Ext.get(c.row),m=c.grid.view.el,e=m.getHeight(),g=j.lastScrollTop,h=g+e,b=n.getHeight(),a=n.dom.offsetTop,d=a+b;if(d>g&&a<h){k.show();j.hiddenTip=false}else{k.hide();j.hiddenTip=true}},getErrors:function(){var a=this,b=!a.autoCancel&&a.isDirty()?a.dirtyText+"<br />":"",c=[];Ext.Array.forEach(a.query(">[isFormField]"),function(d){c=c.concat(Ext.Array.map(d.getErrors(),function(g){return"<li>"+g+"</li>"}))},a);return b+"<ul>"+c.join("")+"</ul>"},invalidateScroller:function(){var c=this,b=c.context,a=b.grid.verticalScroller;if(a){a.invalidate()}}});Ext.define("Ext.grid.header.Container",{extend:"Ext.container.Container",uses:["Ext.grid.ColumnLayout","Ext.grid.column.Column","Ext.menu.Menu","Ext.menu.CheckItem","Ext.menu.Separator","Ext.grid.plugin.HeaderResizer","Ext.grid.plugin.HeaderReorderer"],border:true,alias:"widget.headercontainer",baseCls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",triStateSort:false,ddLock:false,dragging:false,sortable:true,initComponent:function(){var a=this;a.headerCounter=0;a.plugins=a.plugins||[];if(!a.isHeader){a.resizer=Ext.create("Ext.grid.plugin.HeaderResizer");a.reorderer=Ext.create("Ext.grid.plugin.HeaderReorderer");if(!a.enableColumnResize){a.resizer.disable()}if(!a.enableColumnMove){a.reorderer.disable()}a.plugins.push(a.reorderer,a.resizer)}if(a.isHeader&&!a.items){a.layout="auto"}else{a.layout={type:"gridcolumn",availableSpaceOffset:a.availableSpaceOffset,align:"stretchmax",resetStretch:true}}a.defaults=a.defaults||{};Ext.applyIf(a.defaults,{width:a.defaultWidth,triStateSort:a.triStateSort,sortable:a.sortable});a.callParent();a.addEvents("columnresize","headerclick","headertriggerclick","columnmove","columnhide","columnshow","sortchange","menucreate")},onDestroy:function(){Ext.destroy(this.resizer,this.reorderer);this.callParent()},applyDefaults:function(a){if(a&&!a.isComponent&&a.xtype=="rownumberer"){return a}return this.callParent([a])},applyColumnsState:function(d){if(!d||!d.length){return}var e=this,c=0,b,a;Ext.each(d,function(g){a=e.down("gridcolumn[headerId="+g.id+"]");if(a){b=e.items.indexOf(a);if(c!==b){e.moveHeader(b,c)}if(a.applyColumnState){a.applyColumnState(g)}++c}})},getColumnsState:function(){var b=this,a=[],c;b.items.each(function(d){c=d.getColumnState&&d.getColumnState();if(c){a.push(c)}});return a},onAdd:function(b){var a=this;if(!b.headerId){b.headerId=b.initialConfig.id||("h"+(++a.headerCounter))}a.callParent(arguments);a.purgeCache()},onRemove:function(b){var a=this;a.callParent(arguments);a.purgeCache()},afterRender:function(){this.callParent();var a=this.up("[store]").store,c=a.sorters,d=c.first(),b;if(d){b=this.down("gridcolumn[dataIndex="+d.property+"]");if(b){b.setSortState(d.direction,false,true)}}},afterLayout:function(){if(!this.isHeader){var e=this,d=e.query(">gridcolumn:not([hidden])"),c,b,a;e.callParent(arguments);if(d.length){b=d[0].el;if(b!==e.pastFirstHeaderEl){if(e.pastFirstHeaderEl){e.pastFirstHeaderEl.removeCls(e.firstHeaderCls)}b.addCls(e.firstHeaderCls);e.pastFirstHeaderEl=b}a=d[d.length-1].el;if(a!==e.pastLastHeaderEl){if(e.pastLastHeaderEl){e.pastLastHeaderEl.removeCls(e.lastHeaderCls)}a.addCls(e.lastHeaderCls);e.pastLastHeaderEl=a}}}},onHeaderShow:function(h,b){var m=this,n=m.ownerCt,d=m.getMenu(),e,c,j,a,k,g;if(d){j=d.down("menucheckitem[headerId="+h.id+"]");if(j){j.setChecked(true,true)}e=d.query("#columnItem>menucheckitem[checked]");c=e.length;if((m.getVisibleGridColumns().length>1)&&m.disabledMenuItems&&m.disabledMenuItems.length){if(c==1){Ext.Array.remove(m.disabledMenuItems,e[0])}for(g=0,k=m.disabledMenuItems.length;g<k;g++){a=m.disabledMenuItems[g];if(!a.isDestroyed){a[a.menu?"enableCheckChange":"enable"]()}}if(c==1){m.disabledMenuItems=e}else{m.disabledMenuItems=[]}}}if(!h.isGroupHeader){if(m.view){m.view.onHeaderShow(m,h,true)}if(n){n.onHeaderShow(m,h)}}m.fireEvent("columnshow",m,h);if(b!==true){m.doLayout()}},doComponentLayout:function(){var a=this;if(a.view&&a.view.saveScrollState){a.view.saveScrollState()}a.callParent(arguments);if(a.view&&a.view.restoreScrollState){a.view.restoreScrollState()}},onHeaderHide:function(g,c){var b=this,a=b.ownerCt,e=b.getMenu(),d;if(e){d=e.down("menucheckitem[headerId="+g.id+"]");if(d){d.setChecked(false,true)}b.setDisabledItems()}if(!g.isGroupHeader){if(b.view){b.view.onHeaderHide(b,g,true)}if(a){a.onHeaderHide(b,g)}if(!c){b.doLayout()}}b.fireEvent("columnhide",b,g)},setDisabledItems:function(){var d=this,g=d.getMenu(),b=0,a,e,c;e=g.query("#columnItem>menucheckitem[checked]");if((e.length===1)){if(!d.disabledMenuItems){d.disabledMenuItems=[]}if((d.getVisibleGridColumns().length===1)&&e[0].menu){e=e.concat(e[0].menu.query("menucheckitem[checked]"))}a=e.length;for(b=0;b<a;b++){c=e[b];if(!Ext.Array.contains(d.disabledMenuItems,c)){c.disabled=false;c[c.menu?"disableCheckChange":"disable"]();d.disabledMenuItems.push(c)}}}},tempLock:function(){this.ddLock=true;Ext.Function.defer(function(){this.ddLock=false},200,this)},onHeaderResize:function(c,a,b){this.tempLock();if(this.view&&this.view.rendered){this.view.onHeaderResize(c,a,b)}},onHeaderClick:function(c,b,a){this.fireEvent("headerclick",this,c,b,a)},onHeaderTriggerClick:function(c,b,a){if(this.fireEvent("headertriggerclick",this,c,b,a)!==false){this.showMenuBy(a,c)}},showMenuBy:function(b,g){var d=this.getMenu(),e=d.down("#ascItem"),c=d.down("#descItem"),a;d.activeHeader=d.ownerCt=g;d.setFloatParent(g);g.titleContainer.addCls(this.headerOpenCls);a=g.sortable?"enable":"disable";if(e){e[a]()}if(c){c[a]()}d.showBy(b)},onMenuDeactivate:function(){var a=this.getMenu();a.activeHeader.titleContainer.removeCls(this.headerOpenCls)},moveHeader:function(a,b){this.tempLock();this.onHeaderMoved(this.move(a,b),a,b)},purgeCache:function(){var a=this;delete a.gridDataColumns;delete a.hideableColumns;if(a.menu){a.menu.destroy();delete a.menu}},onHeaderMoved:function(e,b,d){var c=this,a=c.ownerCt;if(a&&a.onHeaderMove){a.onHeaderMove(c,e,b,d)}c.fireEvent("columnmove",c,e,b,d)},getMenu:function(){var a=this;if(!a.menu){a.menu=Ext.create("Ext.menu.Menu",{hideOnParentHide:false,items:a.getMenuItems(),listeners:{deactivate:a.onMenuDeactivate,scope:a}});a.setDisabledItems();a.fireEvent("menucreate",a,a.menu)}return a.menu},getMenuItems:function(){var c=this,b=[],a=c.enableColumnHide?c.getColumnMenu(c):null;if(c.sortable){b=[{itemId:"ascItem",text:c.sortAscText,cls:Ext.baseCSSPrefix+"hmenu-sort-asc",handler:c.onSortAscClick,scope:c},{itemId:"descItem",text:c.sortDescText,cls:Ext.baseCSSPrefix+"hmenu-sort-desc",handler:c.onSortDescClick,scope:c}]}if(a&&a.length){b.push("-",{itemId:"columnItem",text:c.columnsText,cls:Ext.baseCSSPrefix+"cols-icon",menu:a})}return b},onSortAscClick:function(){var b=this.getMenu(),a=b.activeHeader;a.setSortState("ASC")},onSortDescClick:function(){var b=this.getMenu(),a=b.activeHeader;a.setSortState("DESC")},getColumnMenu:function(g){var c=[],b=0,e,a=g.query(">gridcolumn[hideable]"),h=a.length,d;for(;b<h;b++){e=a[b];d=Ext.create("Ext.menu.CheckItem",{text:e.text,checked:!e.hidden,hideOnClick:false,headerId:e.id,menu:e.isGroupHeader?this.getColumnMenu(e):undefined,checkHandler:this.onColumnCheckChange,scope:this});if(h===1){d.disabled=true}c.push(d);e.on({destroy:Ext.Function.bind(d.destroy,d)})}return c},onColumnCheckChange:function(a,b){var c=Ext.getCmp(a.headerId);c[b?"show":"hide"]()},getColumnsForTpl:function(e){var c=[],d=this.getGridColumns(e),h=d.length,a=0,g,b;for(;a<h;a++){g=d[a];if(g.hidden||g.up("headercontainer[hidden=true]")){b=0}else{b=g.getDesiredWidth();if((a===0)&&(Ext.isIE6||Ext.isIE7)){b+=1}}c.push({dataIndex:g.dataIndex,align:g.align,width:b,id:g.id,cls:g.tdCls,columnId:g.getItemId()})}return c},getColumnCount:function(){return this.getGridColumns().length},getFullWidth:function(d){var c=0,b=this.getVisibleGridColumns(d),e=b.length,a=0;for(;a<e;a++){if(!isNaN(b[a].width)){if(b[a].getDesiredWidth){c+=b[a].getDesiredWidth()}else{c+=b[a].getWidth()}}}return c},clearOtherSortStates:function(a){var c=this.getGridColumns(),e=c.length,b=0,d;for(;b<e;b++){if(c[b]!==a){d=c[b].sortState;c[b].setSortState(null,true)}}},getVisibleGridColumns:function(a){return Ext.ComponentQuery.query(":not([hidden])",this.getGridColumns(a))},getGridColumns:function(b){var c=this,a=b?null:c.gridDataColumns;if(!a){c.gridDataColumns=a=[];c.cascade(function(d){if((d!==c)&&!d.isGroupHeader){a.push(d)}})}return a},getHideableColumns:function(b){var c=this,a=b?null:c.hideableColumns;if(!a){a=c.hideableColumns=c.query("[hideable]")}return a},getHeaderIndex:function(b){var a=this.getGridColumns();return Ext.Array.indexOf(a,b)},getHeaderAtIndex:function(a){var b=this.getGridColumns();return b[a]},prepareData:function(j,c,m,p,a){var h={},d=this.gridDataColumns||this.getGridColumns(),e=d.length,g=0,k,t,n,r,b,q=a.store;for(;g<e;g++){b={tdCls:"",style:""};k=d[g];t=k.id;n=k.renderer;r=j[k.dataIndex];if(typeof n==="string"){k.renderer=n=Ext.util.Format[n]}if(typeof n==="function"){r=n.call(k.scope||this.ownerCt,r,b,m,c,g,q,p)}h[t+"-modified"]=m.isModified(k.dataIndex)?Ext.baseCSSPrefix+"grid-dirty-cell":"";h[t+"-tdCls"]=b.tdCls;h[t+"-tdAttr"]=b.tdAttr;h[t+"-style"]=b.style;if(r===undefined||r===null||r===""){r="&#160;"}h[t]=r}return h},expandToFit:function(a){if(this.view){this.view.expandToFit(a)}}});Ext.define("Ext.grid.column.Column",{extend:"Ext.grid.header.Container",alias:"widget.gridcolumn",requires:["Ext.util.KeyNav"],alternateClassName:"Ext.grid.Column",baseCls:Ext.baseCSSPrefix+"column-header "+Ext.baseCSSPrefix+"unselectable",hoverCls:Ext.baseCSSPrefix+"column-header-over",handleWidth:5,sortState:null,possibleSortStates:["ASC","DESC"],renderTpl:'<div id="{id}-titleContainer" class="'+Ext.baseCSSPrefix+'column-header-inner"><span id="{id}-textEl" class="'+Ext.baseCSSPrefix+'column-header-text">{text}</span><tpl if="!values.menuDisabled"><div id="{id}-triggerEl" class="'+Ext.baseCSSPrefix+'column-header-trigger"></div></tpl></div>',dataIndex:null,text:"&#160;",sortable:true,hideable:true,menuDisabled:false,renderer:false,align:"left",draggable:true,initDraggable:Ext.emptyFn,isHeader:true,initComponent:function(){var d=this,b,a,c;if(Ext.isDefined(d.header)){d.text=d.header;delete d.header}if(d.flex){d.minWidth=d.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}else{d.minWidth=d.width}if(!d.triStateSort){d.possibleSortStates.length=2}if(Ext.isDefined(d.columns)){d.isGroupHeader=true;d.items=d.columns;delete d.columns;delete d.flex;d.width=0;for(b=0,a=d.items.length;b<a;b++){c=d.items[b];if(!c.hidden){d.width+=c.width||Ext.grid.header.Container.prototype.defaultWidth}}d.minWidth=d.width;d.cls=(d.cls||"")+" "+Ext.baseCSSPrefix+"group-header";d.sortable=false;d.resizable=false;d.align="center"}d.addChildEls("titleContainer","triggerEl","textEl");d.callParent(arguments)},onAdd:function(a){a.isSubHeader=true;a.addCls(Ext.baseCSSPrefix+"group-sub-header");this.callParent(arguments)},onRemove:function(a){a.isSubHeader=false;a.removeCls(Ext.baseCSSPrefix+"group-sub-header");this.callParent(arguments)},initRenderData:function(){var a=this;Ext.applyIf(a.renderData,{text:a.text,menuDisabled:a.menuDisabled});return a.callParent(arguments)},applyColumnState:function(b){var a=this,c=Ext.isDefined;a.applyColumnsState(b.columns);if(c(b.hidden)){a.hidden=b.hidden}if(c(b.locked)){a.locked=b.locked}if(c(b.sortable)){a.sortable=b.sortable}if(c(b.width)){delete a.flex;a.width=b.width}else{if(c(b.flex)){delete a.width;a.flex=b.flex}}},getColumnState:function(){var b=this,a=[],c={id:b.headerId};b.savePropsToState(["hidden","sortable","locked","flex","width"],c);if(b.isGroupHeader){b.items.each(function(d){a.push(d.getColumnState())});if(a.length){c.columns=a}}else{if(b.isSubHeader&&b.ownerCt.hidden){delete b.hidden}}if("width" in c){delete c.flex}return c},setText:function(a){this.text=a;if(this.rendered){this.textEl.update(a)}},getOwnerHeaderCt:function(){return this.up(":not([isHeader])")},getIndex:function(){return this.isGroupColumn?false:this.getOwnerHeaderCt().getHeaderIndex(this)},onRender:function(){var b=this,a=b.up("tablepanel");if(a&&(!b.sortable||a.sortableColumns===false)&&!b.groupable&&!b.lockable&&(a.enableColumnHide===false||!b.getOwnerHeaderCt().getHideableColumns().length)){b.menuDisabled=true}b.callParent(arguments)},afterRender:function(){var b=this,a=b.el;b.callParent(arguments);a.addCls(Ext.baseCSSPrefix+"column-header-align-"+b.align).addClsOnOver(b.overCls);b.mon(a,{click:b.onElClick,dblclick:b.onElDblClick,scope:b});if(!Ext.isIE8||!Ext.isStrict){b.mon(b.getFocusEl(),{focus:b.onTitleMouseOver,blur:b.onTitleMouseOut,scope:b})}b.mon(b.titleContainer,{mouseenter:b.onTitleMouseOver,mouseleave:b.onTitleMouseOut,scope:b});b.keyNav=Ext.create("Ext.util.KeyNav",a,{enter:b.onEnterKey,down:b.onDownKey,scope:b})},setWidth:function(b,a){var j=this,c=j.ownerCt,k,h,g,d=j.getWidth(),e=0,m;if(b!==d){j.oldWidth=d;j.minWidth=j.width=b;if(c.isGroupHeader){k=c.items.items;h=k.length;for(g=0;g<h;g++){m=k[g];if(!m.hidden){e+=(m===j)?b:m.getWidth()}}c.setWidth(e,a)}else{if(a!==false){c.doLayout()}}}},afterComponentLayout:function(c,a){var d=this,b=this.getOwnerHeaderCt();d.callParent(arguments);if(c&&!d.isGroupHeader&&b){b.onHeaderResize(d,c,true)}if(d.oldWidth&&(c!==d.oldWidth)){b.fireEvent("columnresize",b,this,c)}delete d.oldWidth},setPadding:function(a){var c=this,b=Ext.util.TextMetrics.measure(c.textEl.dom,c.text).height;if(!c.isGroupHeader){if(c.titleContainer.getHeight()<a){c.titleContainer.dom.style.height=a+"px"}}a=c.titleContainer.getViewSize().height;if(b){c.titleContainer.setStyle({paddingTop:Math.max(((a-b)/2),0)+"px"})}if(Ext.isIE&&c.triggerEl){c.triggerEl.setHeight(a)}},onDestroy:function(){var a=this;Ext.destroy(a.textEl,a.keyNav);delete a.keyNav;a.callParent(arguments)},onTitleMouseOver:function(){this.titleContainer.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleContainer.removeCls(this.hoverCls)},onDownKey:function(a){if(this.triggerEl){this.onElClick(a,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(a){this.onElClick(a,this.el.dom)},onElDblClick:function(d,a){var c=this,b=c.ownerCt;if(b&&Ext.Array.indexOf(b.items,c)!==0&&c.isOnLeftEdge(d)){b.expandToFit(c.previousSibling("gridcolumn"))}},onElClick:function(d,b){var c=this,a=c.getOwnerHeaderCt();if(a&&!a.ddLock){if(c.triggerEl&&(d.target===c.triggerEl.dom||b===c.triggerEl.dom||d.within(c.triggerEl))){a.onHeaderTriggerClick(c,d,b)}else{if(d.getKey()||(!c.isOnLeftEdge(d)&&!c.isOnRightEdge(d))){c.toggleSortState();a.onHeaderClick(c,d,b)}}}},processEvent:function(g,b,a,c,d,h){return this.fireEvent.apply(this,arguments)},toggleSortState:function(){var b=this,a,c;if(b.sortable){a=Ext.Array.indexOf(b.possibleSortStates,b.sortState);c=(a+1)%b.possibleSortStates.length;b.setSortState(b.possibleSortStates[c])}},doSort:function(b){var a=this.up("tablepanel").store;a.sort({property:this.getSortParam(),direction:b})},getSortParam:function(){return this.dataIndex},setSortState:function(a,m,g){var h=this,j=Ext.baseCSSPrefix+"column-header-sort-",k=j+"ASC",c=j+"DESC",b=j+"null",e=h.getOwnerHeaderCt(),d=h.sortState;if(d!==a&&h.getSortParam()){h.addCls(j+a);if(a&&!g){h.doSort(a)}switch(a){case"DESC":h.removeCls([k,b]);break;case"ASC":h.removeCls([c,b]);break;case null:h.removeCls([k,c]);break}if(e&&!h.triStateSort&&!m){e.clearOtherSortStates(h)}h.sortState=a;e.fireEvent("sortchange",e,h,a)}},hide:function(){var g=this,c,a,d,h,e=0,b=g.getOwnerHeaderCt();g.oldWidth=g.getWidth();if(g.isGroupHeader){c=g.items.items;g.callParent(arguments);b.onHeaderHide(g);for(d=0,a=c.length;d<a;d++){c[d].hidden=true;b.onHeaderHide(c[d],true)}return}h=g.ownerCt.componentLayout.layoutBusy;g.ownerCt.componentLayout.layoutBusy=true;g.callParent(arguments);g.ownerCt.componentLayout.layoutBusy=h;b.onHeaderHide(g);if(g.ownerCt.isGroupHeader){c=g.ownerCt.query(">:not([hidden])");if(!c.length){g.ownerCt.hide()}else{for(d=0,a=c.length;d<a;d++){e+=c[d].getWidth()}g.ownerCt.minWidth=e;g.ownerCt.setWidth(e)}}},show:function(){var m=this,b=m.ownerCt,g=b.componentLayout,c=g.layoutBusy,a=b.layout,h=a.layoutBusy,k,j,e,n,d=0;g.layoutBusy=a.layoutBusy=true;m.callParent(arguments);g.layoutBusy=c;a.layoutBusy=h;if(m.isSubHeader){if(!b.isVisible()){b.show()}}if(m.isGroupHeader&&!m.query(":not([hidden])").length){k=m.query(">*");for(e=0,j=k.length;e<j;e++){n=k[e];n.preventLayout=true;n.show();d+=n.getWidth();delete n.preventLayout}m.setWidth(d)}if(b.isGroupHeader&&m.preventLayout!==true){k=b.query(">:not([hidden])");for(e=0,j=k.length;e<j;e++){d+=k[e].getWidth()}b.minWidth=d;b.setWidth(d)}b=m.getOwnerHeaderCt();if(b){b.onHeaderShow(m,m.preventLayout)}},getDesiredWidth:function(){var a=this;if(a.rendered&&a.componentLayout&&a.componentLayout.lastComponentSize){return a.componentLayout.lastComponentSize.width}else{if(a.flex){return a.width}else{return a.width}}},getCellSelector:function(){return"."+Ext.baseCSSPrefix+"grid-cell-"+this.getItemId()},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isOnLeftEdge:function(a){return(a.getXY()[0]-this.el.getLeft()<=this.handleWidth)},isOnRightEdge:function(a){return(this.el.getRight()-a.getXY()[0]<=this.handleWidth)}});Ext.define("Ext.grid.RowNumberer",{extend:"Ext.grid.column.Column",alias:"widget.rownumberer",text:"&#160",width:23,sortable:false,align:"right",constructor:function(a){this.callParent(arguments);if(this.rowspan){this.renderer=Ext.Function.bind(this.renderer,this)}},resizable:false,hideable:false,menuDisabled:true,dataIndex:"",cls:Ext.baseCSSPrefix+"row-numberer",rowspan:undefined,renderer:function(e,b,a,d,g,c){if(this.rowspan){b.cellAttr='rowspan="'+this.rowspan+'"'}b.tdCls=Ext.baseCSSPrefix+"grid-cell-special";return c.indexOfTotal(a)+1}});Ext.define("Ext.view.DropZone",{extend:"Ext.dd.DropZone",indicatorHtml:'<div class="x-grid-drop-indicator-left"></div><div class="x-grid-drop-indicator-right"></div>',indicatorCls:"x-grid-drop-indicator",constructor:function(a){var b=this;Ext.apply(b,a);if(!b.ddGroup){b.ddGroup="view-dd-zone-"+b.view.id}b.callParent([b.view.el])},fireViewEvent:function(){var b=this,a;b.lock();a=b.view.fireEvent.apply(b.view,arguments);b.unlock();return a},getTargetFromEvent:function(k){var j=k.getTarget(this.view.getItemSelector()),d,c,b,g,a,h;if(!j){d=k.getPageY();for(g=0,c=this.view.getNodes(),a=c.length;g<a;g++){b=c[g];h=Ext.fly(b).getBox();if(d<=h.bottom){return b}}}return j},getIndicator:function(){var a=this;if(!a.indicator){a.indicator=Ext.createWidget("component",{html:a.indicatorHtml,cls:a.indicatorCls,ownerCt:a.view,floating:true,shadow:false})}return a.indicator},getPosition:function(c,a){var g=c.getXY()[1],b=Ext.fly(a).getRegion(),d;if((b.bottom-g)>=(b.bottom-b.top)/2){d="before"}else{d="after"}return d},containsRecordAtOffset:function(d,b,g){if(!b){return false}var a=this.view,c=a.indexOf(b),e=a.getNode(c+g),h=e?a.getRecord(e):null;return h&&Ext.Array.contains(d,h)},positionIndicator:function(b,c,d){var g=this,j=g.view,h=g.getPosition(d,b),n=j.getRecord(b),a=c.records,k,m;if(!Ext.Array.contains(a,n)&&(h=="before"&&!g.containsRecordAtOffset(a,n,-1)||h=="after"&&!g.containsRecordAtOffset(a,n,1))){g.valid=true;if(g.overRecord!=n||g.currentPosition!=h){m=Ext.fly(b).getY()-j.el.getY()-1;if(h=="after"){m+=Ext.fly(b).getHeight()}g.getIndicator().setWidth(Ext.fly(j.el).getWidth()).showAt(0,m);g.overRecord=n;g.currentPosition=h}}else{g.invalidateDrop()}},invalidateDrop:function(){if(this.valid){this.valid=false;this.getIndicator().hide()}},onNodeOver:function(c,a,g,d){var b=this;if(!Ext.Array.contains(d.records,b.view.getRecord(c))){b.positionIndicator(c,d,g)}return b.valid?b.dropAllowed:b.dropNotAllowed},notifyOut:function(c,a,g,d){var b=this;b.callParent(arguments);delete b.overRecord;delete b.currentPosition;if(b.indicator){b.indicator.hide()}},onContainerOver:function(a,h,g){var d=this,b=d.view,c=b.store.getCount();if(c){d.positionIndicator(b.getNode(c-1),g,h)}else{delete d.overRecord;delete d.currentPosition;d.getIndicator().setWidth(Ext.fly(b.el).getWidth()).showAt(0,0);d.valid=true}return d.dropAllowed},onContainerDrop:function(a,c,b){return this.onNodeDrop(a,null,c,b)},onNodeDrop:function(d,a,h,g){var c=this,k=false,b=function(){c.invalidateDrop();c.handleNodeDrop(g,c.overRecord,c.currentPosition);k=true;c.fireViewEvent("drop",d,g,c.overRecord,c.currentPosition)},j=false;if(c.valid){j=c.fireViewEvent("beforedrop",d,g,c.overRecord,c.currentPosition,b);if(j!==false){if(!k){b()}}}return j},destroy:function(){Ext.destroy(this.indicator);delete this.indicator;this.callParent()}});Ext.define("Ext.grid.ViewDropZone",{extend:"Ext.view.DropZone",indicatorHtml:'<div class="x-grid-drop-indicator-left"></div><div class="x-grid-drop-indicator-right"></div>',indicatorCls:"x-grid-drop-indicator",handleNodeDrop:function(b,d,e){var j=this.view,k=j.getStore(),h,a,c,g;if(b.copy){a=b.records;b.records=[];for(c=0,g=a.length;c<g;c++){b.records.push(a[c].copy(a[c].getId()))}}else{b.view.store.remove(b.records,b.view===j)}h=k.indexOf(d);if(e!=="before"){h++}k.insert(h,b.records);j.getSelectionModel().select(b.records)}});Ext.define("Ext.grid.column.Action",{extend:"Ext.grid.column.Column",alias:["widget.actioncolumn"],alternateClassName:"Ext.grid.ActionColumn",header:"&#160;",actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",sortable:false,constructor:function(d){var h=this,b=Ext.apply({},d),c=b.items||[h],a=c.length,e,g;delete b.items;h.callParent([b]);h.items=c;h.renderer=function(j,k){j=Ext.isFunction(b.renderer)?b.renderer.apply(this,arguments)||"":"";k.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell";for(e=0;e<a;e++){g=c[e];g.disable=Ext.Function.bind(h.disableAction,h,[e]);g.enable=Ext.Function.bind(h.enableAction,h,[e]);j+='<img alt="'+(g.altText||h.altText)+'" src="'+(g.icon||Ext.BLANK_IMAGE_URL)+'" class="'+Ext.baseCSSPrefix+"action-col-icon "+Ext.baseCSSPrefix+"action-col-"+String(e)+" "+(g.disabled?Ext.baseCSSPrefix+"item-disabled":" ")+(g.iconCls||"")+" "+(Ext.isFunction(g.getClass)?g.getClass.apply(g.scope||h.scope||h,arguments):(h.iconCls||""))+'"'+((g.tooltip)?' data-qtip="'+g.tooltip+'"':"")+" />"}return j}},enableAction:function(a){var b=this;if(!a){a=0}else{if(!Ext.isNumber(a)){a=Ext.Array.indexOf(b.items,a)}}b.items[a].disabled=false;b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).removeCls(b.disabledCls)},disableAction:function(a){var b=this;if(!a){a=0}else{if(!Ext.isNumber(a)){a=Ext.Array.indexOf(b.items,a)}}b.items[a].disabled=true;b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).addCls(b.disabledCls)},destroy:function(){delete this.items;delete this.renderer;return this.callParent(arguments)},processEvent:function(g,k,m,a,h,c){var d=this,b=c.getTarget().className.match(d.actionIdRe),n,j;if(b){n=d.items[parseInt(b[1],10)];if(n){if(g=="click"){j=n.handler||d.handler;if(j&&!n.disabled){j.call(n.scope||d.scope||d,k,a,h,n,c)}}else{if(g=="mousedown"&&n.stopSelection!==false){return false}}}}return d.callParent(arguments)},cascade:function(b,a){b.call(a||this,this)},getRefItems:function(){return[]}});Ext.define("Ext.grid.column.Boolean",{extend:"Ext.grid.column.Column",alias:["widget.booleancolumn"],alternateClassName:"Ext.grid.BooleanColumn",trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(a){this.callParent(arguments);var b=this.trueText,c=this.falseText,d=this.undefinedText;this.renderer=function(e){if(e===undefined){return d}if(!e||e==="false"){return c}return b}}});Ext.define("Ext.grid.column.Date",{extend:"Ext.grid.column.Column",alias:["widget.datecolumn"],requires:["Ext.Date"],alternateClassName:"Ext.grid.DateColumn",initComponent:function(){var a=this;a.callParent(arguments);if(!a.format){a.format=Ext.Date.defaultFormat}a.renderer=Ext.util.Format.dateRenderer(a.format)}});Ext.define("Ext.grid.column.Number",{extend:"Ext.grid.column.Column",alias:["widget.numbercolumn"],requires:["Ext.util.Format"],alternateClassName:"Ext.grid.NumberColumn",format:"0,000.00",constructor:function(a){this.callParent(arguments);this.renderer=Ext.util.Format.numberRenderer(this.format)}});Ext.define("Ext.grid.column.Template",{extend:"Ext.grid.column.Column",alias:["widget.templatecolumn"],requires:["Ext.XTemplate"],alternateClassName:"Ext.grid.TemplateColumn",constructor:function(a){var c=this,b;c.callParent(arguments);b=c.tpl=(!Ext.isPrimitive(c.tpl)&&c.tpl.compile)?c.tpl:Ext.create("Ext.XTemplate",c.tpl);c.renderer=function(g,h,d){var e=Ext.apply({},d.data,d.getAssociatedData());return b.apply(e)}}});Ext.define("Ext.grid.feature.Feature",{extend:"Ext.util.Observable",alias:"feature.feature",isFeature:true,disabled:false,hasFeatureEvent:true,eventPrefix:null,eventSelector:null,view:null,grid:null,collectData:false,getFeatureTpl:function(){return""},getFireEventArgs:function(b,a,c,d){return[b,a,c,d]},attachEvents:function(){},getFragmentTpl:function(){return},mutateMetaRowTpl:function(a){},getMetaRowTplFragments:function(){return{}},getTableFragments:function(){return{}},getAdditionalData:function(c,a,b,d){return{}},enable:function(){this.disabled=false},disable:function(){this.disabled=true}});Ext.define("Ext.grid.feature.AbstractSummary",{extend:"Ext.grid.feature.Feature",alias:"feature.abstractsummary",showSummaryRow:true,nestedIdRe:/\{\{id\}([\w\-]*)\}/g,toggleSummaryRow:function(a){this.showSummaryRow=!!a},getSummaryFragments:function(){var a={};if(this.showSummaryRow){Ext.apply(a,{printSummaryRow:Ext.bind(this.printSummaryRow,this)})}return a},printSummaryRow:function(b){var a=this.view.getTableChunker().metaRowTpl.join(""),c=Ext.baseCSSPrefix;a=a.replace(c+"grid-row",c+"grid-row-summary");a=a.replace("{{id}}","{gridSummaryValue}");a=a.replace(this.nestedIdRe,"{id$1}");a=a.replace("{[this.embedRowCls()]}","{rowCls}");a=a.replace("{[this.embedRowAttr()]}","{rowAttr}");a=Ext.create("Ext.XTemplate",a,{firstOrLastCls:Ext.view.TableChunker.firstOrLastCls});return a.applyTemplate({columns:this.getPrintData(b)})},getColumnValue:function(c,a){var b=Ext.getCmp(c.id),e=a[c.id],d=b.summaryRenderer;if(d){e=d.call(b.scope||this,e,a,c.dataIndex)}return e},getSummary:function(a,b,d,c){if(b){if(Ext.isFunction(b)){return a.aggregate(b,null,c)}switch(b){case"count":return a.count(c);case"min":return a.min(d,c);case"max":return a.max(d,c);case"sum":return a.sum(d,c);case"average":return a.average(d,c);default:return c?{}:""}}}});Ext.define("Ext.grid.feature.Chunking",{extend:"Ext.grid.feature.Feature",alias:"feature.chunking",chunkSize:20,rowHeight:Ext.isIE?27:26,visibleChunk:0,hasFeatureEvent:false,attachEvents:function(){var b=this.view.up("gridpanel"),a=b.down("gridscroller[dock=right]");a.el.on("scroll",this.onBodyScroll,this,{buffer:300})},onBodyScroll:function(g,c){var b=this.view,d=c.scrollTop,a=Math.floor(d/this.rowHeight/this.chunkSize);if(a!==this.visibleChunk){this.visibleChunk=a;b.refresh();b.el.dom.scrollTop=d;b.el.dom.scrollTop=d}},collectData:function(d,n,m,k,j){var c={fullWidth:j.fullWidth,chunks:[]},e=j.rows.length,b=0,g=0,a=this.visibleChunk,h,q,p;for(;b<e;b+=this.chunkSize,g++){if(b+this.chunkSize>e){p=e-b}else{p=this.chunkSize}if(g>=a-1&&g<=a+1){q=j.rows.slice(b,b+this.chunkSize)}else{q=[]}c.chunks.push({rows:q,fullWidth:k,chunkHeight:p*this.rowHeight})}return c},getTableFragments:function(){return{openTableWrap:function(){return'<tpl for="chunks"><div class="'+Ext.baseCSSPrefix+'grid-chunk" style="height: {chunkHeight}px;">'},closeTableWrap:function(){return"</div></tpl>"}}}});Ext.define("Ext.grid.feature.Grouping",{extend:"Ext.grid.feature.Feature",alias:"feature.grouping",eventPrefix:"group",eventSelector:"."+Ext.baseCSSPrefix+"grid-group-hd",constructor:function(){var a=this;a.collapsedState={};a.callParent(arguments)},groupHeaderTpl:"Group: {name}",depthToIndent:17,collapsedCls:Ext.baseCSSPrefix+"grid-group-collapsed",hdCollapsedCls:Ext.baseCSSPrefix+"grid-group-hd-collapsed",groupByText:"Group By This Field",showGroupsText:"Show in Groups",hideGroupedHeader:false,startCollapsed:false,enableGroupingMenu:true,enableNoGroups:true,enable:function(){var c=this,a=c.view,b=a.store,d;c.lastGroupField=c.getGroupField();if(c.lastGroupIndex){b.group(c.lastGroupIndex)}c.callParent();d=c.view.headerCt.getMenu().down("#groupToggleMenuItem");d.setChecked(true,true);c.refreshIf()},disable:function(){var d=this,a=d.view,b=a.store,g=b.remoteGroup,e,c;c=b.groupers.first();if(c){d.lastGroupIndex=c.property;d.block();b.clearGrouping();d.unblock()}d.callParent();e=d.view.headerCt.getMenu().down("#groupToggleMenuItem");e.setChecked(true,true);e.setChecked(false,true);if(!g){a.refresh()}},refreshIf:function(){if(this.blockRefresh!==true){this.view.refresh()}},getFeatureTpl:function(b,c,a,e){var d=this;return["<tpl if=\"typeof rows !== 'undefined'\">",'<tr class="'+Ext.baseCSSPrefix+"grid-group-hd "+(d.startCollapsed?d.hdCollapsedCls:"")+' {hdCollapsedCls}"><td class="'+Ext.baseCSSPrefix+'grid-cell" colspan="'+c.columns.length+'" {[this.indentByDepth(values)]}><div class="'+Ext.baseCSSPrefix+'grid-cell-inner"><div class="'+Ext.baseCSSPrefix+'grid-group-title">{collapsed}'+d.groupHeaderTpl+"</div></div></td></tr>",'<tr id="{viewId}-gp-{name}" class="'+Ext.baseCSSPrefix+"grid-group-body "+(d.startCollapsed?d.collapsedCls:"")+' {collapsedCls}"><td colspan="'+c.columns.length+'">{[this.recurse(values)]}</td></tr>',"</tpl>"].join("")},getFragmentTpl:function(){return{indentByDepth:this.indentByDepth,depthToIndent:this.depthToIndent}},indentByDepth:function(a){var b=a.depth||0;return'style="padding-left:'+b*this.depthToIndent+'px;"'},destroy:function(){var a=this;delete a.view;delete a.prunedHeader},attachEvents:function(){var b=this,a=b.view;a.on({scope:b,groupclick:b.onGroupClick,rowfocus:b.onRowFocus});a.store.on("groupchange",b.onGroupChange,b);b.pruneGroupedHeader();if(b.enableGroupingMenu){b.injectGroupingMenu()}b.lastGroupField=b.getGroupField();b.block();b.onGroupChange();b.unblock()},injectGroupingMenu:function(){var b=this,a=b.view,c=a.headerCt;c.showMenuBy=b.showMenuBy;c.getMenuItems=b.getMenuItems()},showMenuBy:function(b,e){var d=this.getMenu(),c=d.down("#groupMenuItem"),a=e.groupable===false?"disable":"enable";c[a]();Ext.grid.header.Container.prototype.showMenuBy.apply(this,arguments)},getMenuItems:function(){var e=this,b=e.groupByText,d=e.disabled,a=e.showGroupsText,c=e.enableNoGroups,h=Ext.Function.bind(e.onGroupMenuItemClick,e),g=Ext.Function.bind(e.onGroupToggleMenuItemClick,e);return function(){var j=Ext.grid.header.Container.prototype.getMenuItems.call(this);j.push("-",{iconCls:Ext.baseCSSPrefix+"group-by-icon",itemId:"groupMenuItem",text:b,handler:h});if(c){j.push({itemId:"groupToggleMenuItem",text:a,checked:!d,checkHandler:g})}return j}},onGroupMenuItemClick:function(c,h){var d=this,j=c.parentMenu,k=j.activeHeader,a=d.view,b=a.store,g=b.remoteGroup;delete d.lastGroupIndex;d.block();d.enable();b.group(k.dataIndex);d.pruneGroupedHeader();d.unblock();if(!g){a.refresh()}},block:function(){this.blockRefresh=this.view.blockRefresh=true},unblock:function(){this.blockRefresh=this.view.blockRefresh=false},onGroupToggleMenuItemClick:function(a,b){this[b?"enable":"disable"]()},pruneGroupedHeader:function(){var d=this,b=d.view,c=b.store,a=d.getGroupField(),e=b.headerCt,g=e.down("header[dataIndex="+a+"]");if(g){if(d.prunedHeader){d.prunedHeader.show()}d.prunedHeader=g;g.hide()}},getGroupField:function(){var a=this.view.store.groupers.first();if(a){return a.property}return""},onRowFocus:function(c){var b=this.view.getNode(c),a=Ext.fly(b).up("."+this.collapsedCls);if(a){this.expand(a)}},expand:function(c){var e=this,b=e.view,d=b.up("gridpanel"),a=Ext.getDom(c);e.collapsedState[a.id]=false;c.removeCls(e.collapsedCls);c.prev().removeCls(e.hdCollapsedCls);d.determineScrollbars();d.invalidateScroller();b.fireEvent("groupexpand")},collapse:function(c){var e=this,b=e.view,d=b.up("gridpanel"),a=Ext.getDom(c);e.collapsedState[a.id]=true;c.addCls(e.collapsedCls);c.prev().addCls(e.hdCollapsedCls);d.determineScrollbars();d.invalidateScroller();b.fireEvent("groupcollapse")},onGroupChange:function(){var b=this,c=b.getGroupField(),a;if(b.hideGroupedHeader){if(b.lastGroupField){a=b.getMenuItem(b.lastGroupField);if(a){a.setChecked(true)}}if(c){a=b.getMenuItem(c);if(a){a.setChecked(false)}}}if(b.blockRefresh!==true){b.view.refresh()}b.lastGroupField=c},getMenuItem:function(b){var a=this.view,d=a.headerCt.down("gridcolumn[dataIndex="+b+"]"),c=a.headerCt.getMenu();return c.down("menuitem[headerId="+d.id+"]")},onGroupClick:function(c,j,a,k,h){var g=this,d=g.toggleCls,b=Ext.fly(j.nextSibling,"_grouping");if(b.hasCls(g.collapsedCls)){g.expand(b)}else{g.collapse(b)}},getMetaRowTplFragments:function(){return{isRow:this.isRow,closeRow:this.closeRow}},isRow:function(){return"<tpl if=\"typeof rows === 'undefined'\">"},closeRow:function(){return"</tpl>"},mutateMetaRowTpl:function(a){a.unshift("{[this.isRow()]}");a.push("{[this.closeRow()]}")},getAdditionalData:function(e,k,g,j){var h=this.view,d=h.headerCt,c=d.items.getAt(0),b={},a=c.id+"-tdAttr";b[a]=this.indentByDepth(e)+" "+(j[a]?j[a]:"");b.collapsed="true";return b},getGroupRows:function(h,c,b,j){var e=this,d=h.children,g=h.rows=[],a=e.view;h.viewId=a.id;Ext.Array.each(c,function(m,k){if(Ext.Array.indexOf(d,m)!=-1){g.push(Ext.apply(b[k],{depth:1}))}});delete h.children;h.fullWidth=j;if(e.collapsedState[a.id+"-gp-"+h.name]){h.collapsedCls=e.collapsedCls;h.hdCollapsedCls=e.hdCollapsedCls}return h},collectData:function(d,c,j,h,g){var e=this,b=e.view.store,a;if(!e.disabled&&b.isGrouped()){a=b.getGroups();Ext.Array.each(a,function(m,k){e.getGroupRows(m,d,c,h)},e);return{rows:a,fullWidth:h}}return g},getFireEventArgs:function(g,h,d,c){var k=[g,h,d],j=Ext.fly(d.nextSibling,"_grouping"),a=Ext.getDom(j).id,b=h.id+"-gp-",m=a.substr(b.length);k.push(m,c);return k}});Ext.define("Ext.grid.feature.GroupingSummary",{extend:"Ext.grid.feature.Grouping",alias:"feature.groupingsummary",mixins:{summary:"Ext.grid.feature.AbstractSummary"},getFeatureTpl:function(){var a=this.callParent(arguments);if(this.showSummaryRow){a=a.replace("</tpl>","");a+="{[this.printSummaryRow(xindex)]}</tpl>"}return a},getFragmentTpl:function(){var b=this,a=b.callParent();Ext.apply(a,b.getSummaryFragments());if(b.showSummaryRow){b.summaryGroups=b.view.store.getGroups();b.summaryData=b.generateSummaryData()}return a},getPrintData:function(j){var k=this,e=k.view.headerCt.getColumnsForTpl(),h=0,b=e.length,g=[],a=k.summaryGroups[j-1].name,d=k.summaryData[a],c;for(;h<b;++h){c=e[h];c.gridSummaryValue=this.getColumnValue(c,d);g.push(c)}return g},generateSummaryData:function(){var n=this,j={},q={},r=n.view.store,a=this.getGroupField(),m=r.proxy.reader,d=n.summaryGroups,g=n.view.headerCt.getColumnsForTpl(),b,h,c,e,p,t,k;for(h=0,c=d.length;h<c;++h){j[d[h].name]={}}if(n.remoteRoot&&m.rawData){p=m.root;m.root=n.remoteRoot;m.buildExtractors(true);Ext.Array.each(m.getRoot(m.rawData),function(u){q[u[a]]=u});m.root=p;m.buildExtractors(true)}for(h=0,c=g.length;h<c;++h){k=Ext.getCmp(g[h].id);e=n.getSummary(r,k.summaryType,k.dataIndex,true);for(t in e){if(e.hasOwnProperty(t)){j[t][k.id]=e[t]}}for(t in q){if(q.hasOwnProperty(t)){b=q[t][k.dataIndex];if(b!==undefined&&j[t]!==undefined){j[t][k.id]=b}}}}return j}});Ext.define("Ext.grid.feature.RowBody",{extend:"Ext.grid.feature.Feature",alias:"feature.rowbody",rowBodyHiddenCls:Ext.baseCSSPrefix+"grid-row-body-hidden",rowBodyTrCls:Ext.baseCSSPrefix+"grid-rowbody-tr",rowBodyTdCls:Ext.baseCSSPrefix+"grid-cell-rowbody",rowBodyDivCls:Ext.baseCSSPrefix+"grid-rowbody",eventPrefix:"rowbody",eventSelector:"."+Ext.baseCSSPrefix+"grid-rowbody-tr",getRowBody:function(a){return['<tr class="'+this.rowBodyTrCls+' {rowBodyCls}">','<td class="'+this.rowBodyTdCls+'" colspan="{rowBodyColspan}">','<div class="'+this.rowBodyDivCls+'">{rowBody}</div>',"</td>","</tr>"].join("")},getMetaRowTplFragments:function(){return{getRowBody:this.getRowBody,rowBodyTrCls:this.rowBodyTrCls,rowBodyTdCls:this.rowBodyTdCls,rowBodyDivCls:this.rowBodyDivCls}},mutateMetaRowTpl:function(a){a.push("{[this.getRowBody(values)]}")},getAdditionalData:function(c,a,b,g){var d=this.view.headerCt,e=d.getColumnCount();return{rowBody:"",rowBodyCls:this.rowBodyCls,rowBodyColspan:e}}});Ext.define("Ext.grid.feature.RowWrap",{extend:"Ext.grid.feature.Feature",alias:"feature.rowwrap",hasFeatureEvent:false,mutateMetaRowTpl:function(a){a[0]=a[0].replace(Ext.baseCSSPrefix+"grid-row","");a[0]=a[0].replace("{[this.embedRowCls()]}","");a.unshift('<table class="'+Ext.baseCSSPrefix+"grid-table "+Ext.baseCSSPrefix+'grid-table-resizer" style="width: {[this.embedFullWidth()]}px;">');a.unshift('<tr class="'+Ext.baseCSSPrefix+'grid-row {[this.embedRowCls()]}"><td colspan="{[this.embedColSpan()]}"><div class="'+Ext.baseCSSPrefix+'grid-rowwrap-div">');a.push("</table>");a.push("</div></td></tr>")},embedColSpan:function(){return"{colspan}"},embedFullWidth:function(){return"{fullWidth}"},getAdditionalData:function(h,q,k,n){var d=this.view.headerCt,c=d.getColumnCount(),p=d.getFullWidth(),m=d.query("gridcolumn"),r=m.length,g=0,b={colspan:c,fullWidth:p},a,j,e;for(;g<r;g++){a=m[g].id;j=a+"-tdCls";e=Ext.baseCSSPrefix+"grid-col-resizer-"+a;b[j]=e+" "+(n[j]?n[j]:"");b[a+"-tdAttr"]=' style="width: '+(m[g].hidden?0:m[g].getDesiredWidth())+'px;" ';if(n[a+"-tdAttr"]){b[a+"-tdAttr"]+=n[a+"-tdAttr"]}}return b},getMetaRowTplFragments:function(){return{embedFullWidth:this.embedFullWidth,embedColSpan:this.embedColSpan}}});Ext.define("Ext.grid.feature.Summary",{extend:"Ext.grid.feature.AbstractSummary",alias:"feature.summary",getFragmentTpl:function(){this.summaryData=this.generateSummaryData();return this.getSummaryFragments()},getTableFragments:function(){if(this.showSummaryRow){return{closeRows:this.closeRows}}},closeRows:function(){return"</tpl>{[this.printSummaryRow()]}"},getPrintData:function(a){var g=this,c=g.view.headerCt.getColumnsForTpl(),b=0,e=c.length,h=[],j=g.summaryData,d;for(;b<e;++b){d=c[b];d.gridSummaryValue=this.getColumnValue(d,j);h.push(d)}return h},generateSummaryData:function(){var h=this,d={},j=h.view.store,c=h.view.headerCt.getColumnsForTpl(),e=0,a=c.length,b,k,g;for(e=0,a=c.length;e<a;++e){g=Ext.getCmp(c[e].id);d[g.id]=h.getSummary(j,g.summaryType,g.dataIndex,false)}return d}});Ext.define("Ext.grid.header.DragZone",{extend:"Ext.dd.DragZone",colHeaderCls:Ext.baseCSSPrefix+"column-header",maxProxyWidth:120,constructor:function(a){this.headerCt=a;this.ddGroup=this.getDDGroup();this.callParent([a.el]);this.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(b){var d=b.getTarget("."+this.colHeaderCls),a;if(d){a=Ext.getCmp(d.id);if(!this.headerCt.dragging&&a.draggable&&!(a.isOnLeftEdge(b)||a.isOnRightEdge(b))){var c=document.createElement("div");c.innerHTML=Ext.getCmp(d.id).text;return{ddel:c,header:a}}}return false},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=true;this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=false;this.callParent(arguments)},afterRepair:function(){this.callParent();this.headerCt.dragging=false},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=true},enable:function(){this.disabled=false}});Ext.define("Ext.grid.header.DropZone",{extend:"Ext.dd.DropZone",colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(a){this.headerCt=a;this.ddGroup=this.getDDGroup();this.callParent([a.el])},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(a){return a.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.DomHelper.append(Ext.getBody(),{cls:"col-move-top",html:"&#160;"},true)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.DomHelper.append(Ext.getBody(),{cls:"col-move-bottom",html:"&#160;"},true)}return this.bottomIndicator},getLocation:function(d,b){var a=d.getXY()[0],c=Ext.fly(b).getRegion(),h,g;if((c.right-a)<=(c.right-c.left)/2){h="after"}else{h="before"}return{pos:h,header:Ext.getCmp(b.id),node:b}},positionIndicator:function(A,r,y){var a=this.getLocation(y,r),u=a.header,h=a.pos,g=A.nextSibling("gridcolumn:not([hidden])"),x=A.previousSibling("gridcolumn:not([hidden])"),d,n,v,w,b,c,m,p,B,z;if(!u.draggable&&u.getIndex()==0){return false}this.lastLocation=a;if((A!==u)&&((h==="before"&&g!==u)||(h==="after"&&x!==u))&&!u.isDescendantOf(A)){var q=Ext.dd.DragDropManager.getRelated(this),k=q.length,t=0,j;for(;t<k;t++){j=q[t];if(j!==this&&j.invalidateDrop){j.invalidateDrop()}}this.valid=true;n=this.getTopIndicator();v=this.getBottomIndicator();if(h==="before"){w="tl";b="bl"}else{w="tr";b="br"}c=u.el.getAnchorXY(w);m=u.el.getAnchorXY(b);p=this.headerCt.el;B=p.getLeft();z=p.getRight();c[0]=Ext.Number.constrain(c[0],B,z);m[0]=Ext.Number.constrain(m[0],B,z);c[0]-=4;c[1]-=9;m[0]-=4;n.setXY(c);v.setXY(m);n.show();v.show()}else{this.invalidateDrop()}},invalidateDrop:function(){this.valid=false;this.hideIndicators()},onNodeOver:function(b,a,d,c){if(c.header.el.dom!==b){this.positionIndicator(c.header,b,d)}return this.valid?this.dropAllowed:this.dropNotAllowed},hideIndicators:function(){this.getTopIndicator().hide();this.getBottomIndicator().hide()},onNodeOut:function(){this.hideIndicators()},onNodeDrop:function(d,n,m,g){if(this.valid){this.invalidateDrop();var j=g.header,h=this.lastLocation,q=j.ownerCt,a=q.items.indexOf(j),k=h.header.ownerCt,r=k.items.indexOf(h.header),c=this.headerCt,p,b;if(h.pos==="after"){r++}if(q!==k&&q.lockableInjected&&k.lockableInjected&&k.lockedCt){b=q.up("[scrollerOwner]");b.lock(j,r)}else{if(q!==k&&q.lockableInjected&&k.lockableInjected&&q.lockedCt){b=q.up("[scrollerOwner]");b.unlock(j,r)}else{if((q===k)&&(r>q.items.indexOf(j))){r--}if(q!==k){q.suspendLayout=true;q.remove(j,false);q.suspendLayout=false}if(q.isGroupHeader){if(!q.items.getCount()){p=q.ownerCt;p.suspendLayout=true;p.remove(q,false);q.el.dom.parentNode.removeChild(q.el.dom);p.suspendLayout=false}else{q.minWidth=q.getWidth()-j.getWidth();q.setWidth(q.minWidth)}}k.suspendLayout=true;if(q===k){k.move(a,r)}else{k.insert(r,j)}k.suspendLayout=false;if(k.isGroupHeader){j.savedFlex=j.flex;delete j.flex;j.width=j.getWidth();k.minWidth=k.getWidth()+j.getWidth()-(j.savedFlex?1:0);k.setWidth(k.minWidth)}else{if(j.savedFlex){j.flex=j.savedFlex;delete j.width}}c.purgeCache();c.doLayout();c.onHeaderMoved(j,a,r);if(!q.items.getCount()){q.destroy()}}}}}});Ext.define("Ext.grid.plugin.Editing",{alias:"editing.editing",requires:["Ext.grid.column.Column","Ext.util.KeyNav"],mixins:{observable:"Ext.util.Observable"},clicksToEdit:2,defaultFieldXType:"textfield",editStyle:"",constructor:function(a){var b=this;Ext.apply(b,a);b.addEvents("beforeedit","edit","validateedit");b.mixins.observable.constructor.call(b);b.relayEvents(b,["afteredit"],"after")},init:function(a){var b=this;b.grid=a;b.view=a.view;b.initEvents();b.mon(a,"reconfigure",b.onReconfigure,b);b.onReconfigure();a.relayEvents(b,["beforeedit","edit","validateedit"]);a.isEditable=true;a.editingPlugin=a.view.editingPlugin=b},onReconfigure:function(){this.initFieldAccessors(this.view.getGridColumns())},destroy:function(){var c=this,b=c.grid,d=b.headerCt,a=b.events;Ext.destroy(c.keyNav);c.removeFieldAccessors(b.getView().getGridColumns());c.clearListeners();delete c.grid.editingPlugin;delete c.grid.view.editingPlugin;delete c.grid;delete c.view;delete c.editor;delete c.keyNav},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(a){var b=this;if(Ext.isArray(a)){Ext.Array.forEach(a,b.initFieldAccessors,b);return}Ext.applyIf(a,{getEditor:function(c,d){return b.getColumnField(this,d)},setEditor:function(c){b.setColumnField(this,c)}})},removeFieldAccessors:function(a){var b=this;if(Ext.isArray(a)){Ext.Array.forEach(a,b.removeFieldAccessors,b);return}delete a.getEditor;delete a.setEditor},getColumnField:function(b,a){var c=b.field;if(!c&&b.editor){c=b.editor;delete b.editor}if(!c&&a){c=a}if(c){if(Ext.isString(c)){c={xtype:c}}if(Ext.isObject(c)&&!c.isFormField){c=Ext.ComponentManager.create(c,this.defaultFieldXType);b.field=c}Ext.apply(c,{name:b.dataIndex});return c}},setColumnField:function(a,b){if(Ext.isObject(b)&&!b.isFormField){b=Ext.ComponentManager.create(b,this.defaultFieldXType)}a.field=b},initEvents:function(){var a=this;a.initEditTriggers();a.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var c=this,b=c.view,a=c.clicksToEdit===1?"click":"dblclick";c.mon(b,"cell"+a,c.startEditByClick,c);b.on("render",function(){c.keyNav=Ext.create("Ext.util.KeyNav",b.el,{enter:c.onEnterKey,esc:c.onEscKey,scope:c})},c,{single:true})},onEnterKey:function(h){var d=this,c=d.grid,b=c.getSelectionModel(),a,g=c.headerCt.getHeaderAtIndex(0);if(b.getCurrentPosition){pos=b.getCurrentPosition();a=c.store.getAt(pos.row);g=c.headerCt.getHeaderAtIndex(pos.column)}else{a=b.getLastSelected()}d.startEdit(a,g)},onEscKey:function(a){this.cancelEdit()},startEditByClick:function(c,a,j,b,h,d,g){this.startEdit(b,c.getHeaderAtIndex(j))},beforeEdit:Ext.emptyFn,startEdit:function(a,d){var c=this,b=c.getEditingContext(a,d);if(c.beforeEdit(b)===false||c.fireEvent("beforeedit",b)===false||b.cancel){return false}c.context=b;c.editing=true},getEditingContext:function(e,c){var g=this,a=g.grid,k=a.store,b,d,h=a.getView(),j;if(Ext.isNumber(e)){b=e;e=k.getAt(b)}else{b=k.indexOf(e)}if(Ext.isNumber(c)){d=c;c=a.headerCt.getHeaderAtIndex(d)}else{d=c.getIndex()}j=e.get(c.dataIndex);return{grid:a,record:e,field:c.dataIndex,value:j,row:h.getNode(b),column:c,rowIdx:b,colIdx:d}},cancelEdit:function(){this.editing=false},completeEdit:function(){var a=this;if(a.editing&&a.validateEdit()){a.fireEvent("edit",a.context)}delete a.context;a.editing=false},validateEdit:function(){var b=this,a=b.context;return b.fireEvent("validateedit",b,a)!==false&&!a.cancel}});Ext.define("Ext.grid.plugin.CellEditing",{alias:"plugin.cellediting",extend:"Ext.grid.plugin.Editing",requires:["Ext.grid.CellEditor","Ext.util.DelayedTask"],constructor:function(){this.callParent(arguments);this.editors=Ext.create("Ext.util.MixedCollection",false,function(a){return a.editorId});this.editTask=Ext.create("Ext.util.DelayedTask")},onReconfigure:function(){this.editors.clear();this.callParent()},destroy:function(){var a=this;a.editTask.cancel();a.editors.each(Ext.destroy,Ext);a.editors.clear();a.callParent(arguments)},onBodyScroll:function(){var a=this.getActiveEditor();if(a&&a.field){if(a.field.triggerBlur){a.field.triggerBlur()}else{a.field.blur()}}},initCancelTriggers:function(){var c=this,b=c.grid,a=b.view;a.addElListener("mousewheel",c.cancelEdit,c);c.mon(a,"bodyscroll",c.onBodyScroll,c);c.mon(b,{columnresize:c.cancelEdit,columnmove:c.cancelEdit,scope:c})},startEdit:function(a,g){var d=this,e=a.get(g.dataIndex),c=d.getEditingContext(a,g),b;a=c.record;g=c.column;d.completeEdit();c.originalValue=c.value=e;if(d.beforeEdit(c)===false||d.fireEvent("beforeedit",c)===false||c.cancel){return false}if(g&&!g.getEditor(a)){return false}b=d.getEditor(a,g);if(b){d.context=c;d.setActiveEditor(b);d.setActiveRecord(a);d.setActiveColumn(g);d.editTask.delay(15,b.startEdit,b,[d.getCell(a,g),e])}else{d.grid.getView().getEl(g).focus((Ext.isWebKit||Ext.isIE)?10:false)}},completeEdit:function(){var a=this.getActiveEditor();if(a){a.completeEdit()}},setActiveEditor:function(a){this.activeEditor=a},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(a){this.activeColumn=a},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(a){this.activeRecord=a},getActiveRecord:function(){return this.activeRecord},getEditor:function(a,d){var g=this,e=g.editors,c=d.getItemId(),b=e.getByKey(c);if(b){return b}else{b=d.getEditor(a);if(!b){return false}if(!(b instanceof Ext.grid.CellEditor)){b=Ext.create("Ext.grid.CellEditor",{editorId:c,field:b})}b.parentEl=g.grid.getEditorParent();b.on({scope:g,specialkey:g.onSpecialKey,complete:g.onEditComplete,canceledit:g.cancelEdit});e.add(b);return b}},setColumnField:function(b,c){var a=this.editors.getByKey(b.getItemId());Ext.destroy(a,b.field);this.editors.removeAtKey(b.getItemId());this.callParent(arguments)},getCell:function(a,b){return this.grid.getView().getCell(a,b)},onSpecialKey:function(a,d,c){var b=this.grid,g;if(c.getKey()===c.TAB){c.stopEvent();g=b.getSelectionModel();if(g.onEditorTab){g.onEditorTab(this,c)}}},onEditComplete:function(b,h,a){var g=this,d=g.grid,j=d.getSelectionModel(),e=g.getActiveColumn(),c;if(e){c=e.dataIndex;g.setActiveEditor(null);g.setActiveColumn(null);g.setActiveRecord(null);delete j.wasEditing;if(!g.validateEdit()){return}if(h!==a){g.context.record.set(c,h)}else{d.getView().getEl(e).focus()}g.context.value=h;g.fireEvent("edit",g,g.context)}},cancelEdit:function(){var c=this,b=c.getActiveEditor(),a=c.grid.getView().getEl(c.getActiveColumn());c.setActiveEditor(null);c.setActiveColumn(null);c.setActiveRecord(null);if(b){b.cancelEdit();a.focus()}},startEditByPosition:function(a){var d=this,c=d.grid,g=c.getSelectionModel(),b=c.store.getAt(a.row),e=c.headerCt.getHeaderAtIndex(a.column);if(g.selectByPosition){g.selectByPosition(a)}d.startEdit(b,e)}});Ext.define("Ext.grid.plugin.DragDrop",{extend:"Ext.AbstractPlugin",alias:"plugin.gridviewdragdrop",uses:["Ext.view.DragZone","Ext.grid.ViewDropZone"],dragText:"{0} selected row{1}",ddGroup:"GridDD",enableDrop:true,enableDrag:true,init:function(a){a.on("render",this.onViewRender,this,{single:true})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},enable:function(){var a=this;if(a.dragZone){a.dragZone.unlock()}if(a.dropZone){a.dropZone.unlock()}a.callParent()},disable:function(){var a=this;if(a.dragZone){a.dragZone.lock()}if(a.dropZone){a.dropZone.lock()}a.callParent()},onViewRender:function(a){var b=this;if(b.enableDrag){b.dragZone=Ext.create("Ext.view.DragZone",{view:a,ddGroup:b.dragGroup||b.ddGroup,dragText:b.dragText})}if(b.enableDrop){b.dropZone=Ext.create("Ext.grid.ViewDropZone",{view:a,ddGroup:b.dropGroup||b.ddGroup})}}});Ext.define("Ext.grid.plugin.HeaderReorderer",{extend:"Ext.util.Observable",requires:["Ext.grid.header.DragZone","Ext.grid.header.DropZone"],alias:"plugin.gridheaderreorderer",init:function(a){this.headerCt=a;a.on("render",this.onHeaderCtRender,this)},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onHeaderCtRender:function(){this.dragZone=Ext.create("Ext.grid.header.DragZone",this.headerCt);this.dropZone=Ext.create("Ext.grid.header.DropZone",this.headerCt);if(this.disabled){this.dragZone.disable()}},enable:function(){this.disabled=false;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=true;if(this.dragZone){this.dragZone.disable()}}});Ext.define("Ext.grid.plugin.HeaderResizer",{extend:"Ext.util.Observable",requires:["Ext.dd.DragTracker","Ext.util.Region"],alias:"plugin.gridheaderresizer",disabled:false,configs:{dynamic:true},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1000,wResizeCursor:"col-resize",eResizeCursor:"col-resize",init:function(a){this.headerCt=a;a.on("render",this.afterHeaderRender,this,{single:true})},destroy:function(){if(this.tracker){this.tracker.destroy()}},afterHeaderRender:function(){var b=this.headerCt,a=b.el;b.mon(a,"mousemove",this.onHeaderCtMouseMove,this);this.tracker=Ext.create("Ext.dd.DragTracker",{disabled:this.disabled,onBeforeStart:Ext.Function.bind(this.onBeforeStart,this),onStart:Ext.Function.bind(this.onStart,this),onDrag:Ext.Function.bind(this.onDrag,this),onEnd:Ext.Function.bind(this.onEnd,this),tolerance:3,autoStart:300,el:a})},onHeaderCtMouseMove:function(c,a){if(this.headerCt.dragging){if(this.activeHd){this.activeHd.el.dom.style.cursor="";delete this.activeHd}}else{var g=c.getTarget("."+this.colHeaderCls,3,true),b,d;if(g){b=Ext.getCmp(g.id);if(b.isOnLeftEdge(c)){d=b.previousNode("gridcolumn:not([hidden])")}else{if(b.isOnRightEdge(c)){d=b}else{d=null}}if(d){if(d.isGroupHeader){d=d.down(":not([isGroupHeader]):not([hidden]):last")}if(d&&!(d.fixed||(d.resizable===false)||this.disabled)){this.activeHd=d;b.el.dom.style.cursor=this.eResizeCursor}}else{b.el.dom.style.cursor="";delete this.activeHd}}}},onBeforeStart:function(b){var a=b.getTarget();this.dragHd=this.activeHd;if(!!this.dragHd&&!Ext.fly(a).hasCls("x-column-header-trigger")&&!this.headerCt.dragging){this.tracker.constrainTo=this.getConstrainRegion();return true}else{this.headerCt.dragging=false;return false}},getConstrainRegion:function(){var a=this.dragHd.el,b=Ext.util.Region.getRegion(a);return b.adjust(0,this.maxColWidth-a.getWidth(),0,this.minColWidth)},onStart:function(y){var z=this,h=z.dragHd,b=h.el,r=b.getWidth(),k=z.headerCt,n=y.getTarget();if(z.dragHd&&!Ext.fly(n).hasCls("x-column-header-trigger")){k.dragging=true}z.origWidth=r;if(!z.dynamic){var d=b.getXY(),w=k.up("[scrollerOwner]"),g=z.dragHd.up(":not([isGroupHeader])"),m=g.up(),c=w.getLhsMarker(),q=w.getRhsMarker(),a=q.parent(),j=a.getLeft(true),x=a.getTop(true),v=a.translatePoints(d),u=m.body.getHeight()+k.getHeight(),p=v.top-x;c.setTop(p);q.setTop(p);c.setHeight(u);q.setHeight(u);c.setLeft(v.left-j);q.setLeft(v.left+r-j)}},onDrag:function(h){if(!this.dynamic){var g=this.tracker.getXY("point"),a=this.headerCt.up("[scrollerOwner]"),j=a.getRhsMarker(),c=j.parent(),b=c.translatePoints(g),d=c.getLeft(true);j.setLeft(b.left-d)}else{this.doResize()}},onEnd:function(h){this.headerCt.dragging=false;if(this.dragHd){if(!this.dynamic){var g=this.dragHd,c=this.headerCt.up("[scrollerOwner]"),d=c.getLhsMarker(),k=c.getRhsMarker(),a=g.getWidth(),j=this.tracker.getOffset("point"),b=-9999;d.setLeft(b);k.setLeft(b)}this.doResize()}},doResize:function(){if(this.dragHd){var b=this.dragHd,a,c=this.tracker.getOffset("point");if(b.flex){delete b.flex}this.headerCt.suspendLayout=true;b.setWidth(this.origWidth+c[0],false);if(this.headerCt.forceFit){a=b.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(a){delete a.flex;a.setWidth(a.getWidth()-c[0],false)}}this.headerCt.suspendLayout=false;this.headerCt.doComponentLayout(this.headerCt.getFullWidth())}},disable:function(){this.disabled=true;if(this.tracker){this.tracker.disable()}},enable:function(){this.disabled=false;if(this.tracker){this.tracker.enable()}}});Ext.define("Ext.grid.plugin.RowEditing",{extend:"Ext.grid.plugin.Editing",alias:"plugin.rowediting",requires:["Ext.grid.RowEditor"],editStyle:"row",autoCancel:true,errorSummary:true,constructor:function(){var a=this;a.callParent(arguments);if(!a.clicksToMoveEditor){a.clicksToMoveEditor=a.clicksToEdit}a.autoCancel=!!a.autoCancel},destroy:function(){var a=this;Ext.destroy(a.editor);a.callParent(arguments)},startEdit:function(a,d){var c=this,b=c.getEditor();if(c.callParent(arguments)===false){return false}if(b.beforeEdit()!==false){b.startEdit(c.context.record,c.context.column)}},cancelEdit:function(){var a=this;if(a.editing){a.getEditor().cancelEdit();a.callParent(arguments);a.fireEvent("canceledit",a.context)}},completeEdit:function(){var a=this;if(a.editing&&a.validateEdit()){a.editing=false;a.fireEvent("edit",a.context)}},validateEdit:function(){var g=this,e=g.editor,d=g.context,a=d.record,c={},h={},b;e.items.each(function(j){b=j.name;c[b]=j.getValue();h[b]=a.get(b)});Ext.apply(d,{newValues:c,originalValues:h});return g.callParent(arguments)&&g.getEditor().completeEdit()},getEditor:function(){var a=this;if(!a.editor){a.editor=a.initEditor()}return a.editor},initEditor:function(){var c=this,b=c.grid,a=c.view,d=b.headerCt;return Ext.create("Ext.grid.RowEditor",{autoCancel:c.autoCancel,errorSummary:c.errorSummary,fields:d.getGridColumns(),hidden:true,editingPlugin:c,renderTo:a.el})},initEditTriggers:function(){var c=this,b=c.grid,a=c.view,e=b.headerCt,d=c.clicksToMoveEditor===1?"click":"dblclick";c.callParent(arguments);if(c.clicksToMoveEditor!==c.clicksToEdit){c.mon(a,"cell"+d,c.moveEditorByClick,c)}a.on("render",function(){c.mon(e,{add:c.onColumnAdd,remove:c.onColumnRemove,columnresize:c.onColumnResize,columnhide:c.onColumnHide,columnshow:c.onColumnShow,columnmove:c.onColumnMove,scope:c})},c,{single:true})},startEditByClick:function(){var a=this;if(!a.editing||a.clicksToMoveEditor===a.clicksToEdit){a.callParent(arguments)}},moveEditorByClick:function(){var a=this;if(a.editing){a.superclass.startEditByClick.apply(a,arguments)}},onColumnAdd:function(a,c){if(c.isHeader){var d=this,b;d.initFieldAccessors(c);b=d.getEditor();if(b&&b.onColumnAdd){b.onColumnAdd(c)}}},onColumnRemove:function(a,c){if(c.isHeader){var d=this,b=d.getEditor();if(b&&b.onColumnRemove){b.onColumnRemove(c)}d.removeFieldAccessors(c)}},onColumnResize:function(a,d,c){if(d.isHeader){var e=this,b=e.getEditor();if(b&&b.onColumnResize){b.onColumnResize(d,c)}}},onColumnHide:function(a,c){var d=this,b=d.getEditor();if(b&&b.onColumnHide){b.onColumnHide(c)}},onColumnShow:function(a,c){var d=this,b=d.getEditor();if(b&&b.onColumnShow){b.onColumnShow(c)}},onColumnMove:function(a,d,c,g){var e=this,b=e.getEditor();if(b&&b.onColumnMove){b.onColumnMove(d,c,g)}},setColumnField:function(a,c){var b=this;b.callParent(arguments);b.getEditor().setField(a.field,a)}});Ext.define("Ext.grid.property.Grid",{extend:"Ext.grid.Panel",alias:"widget.propertygrid",alternateClassName:"Ext.grid.PropertyGrid",uses:["Ext.grid.plugin.CellEditing","Ext.grid.property.Store","Ext.grid.property.HeaderContainer","Ext.XTemplate","Ext.grid.CellEditor","Ext.form.field.Date","Ext.form.field.Text","Ext.form.field.Number"],valueField:"value",nameField:"name",enableColumnMove:false,columnLines:true,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,initComponent:function(){var a=this;a.addCls(Ext.baseCSSPrefix+"property-grid");a.plugins=a.plugins||[];a.plugins.push(Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:a.clicksToEdit,startEdit:function(b,c){return this.self.prototype.startEdit.call(this,b,a.headerCt.child("#"+a.valueField))}}));a.selModel={selType:"cellmodel",onCellSelect:function(b){if(b.column!=1){b.column=1}return this.self.prototype.onCellSelect.call(this,b)}};a.customRenderers=a.customRenderers||{};a.customEditors=a.customEditors||{};if(!a.store){a.propStore=a.store=Ext.create("Ext.grid.property.Store",a,a.source)}a.store.sort("name","ASC");a.columns=Ext.create("Ext.grid.property.HeaderContainer",a,a.store);a.addEvents("beforepropertychange","propertychange");a.callParent();a.getView().walkCells=this.walkCells;a.editors={date:Ext.create("Ext.grid.CellEditor",{field:Ext.create("Ext.form.field.Date",{selectOnFocus:true})}),string:Ext.create("Ext.grid.CellEditor",{field:Ext.create("Ext.form.field.Text",{selectOnFocus:true})}),number:Ext.create("Ext.grid.CellEditor",{field:Ext.create("Ext.form.field.Number",{selectOnFocus:true})}),"boolean":Ext.create("Ext.grid.CellEditor",{field:Ext.create("Ext.form.field.ComboBox",{editable:false,store:[[true,a.headerCt.trueText],[false,a.headerCt.falseText]]})})};a.store.on("update",a.onUpdate,a)},onUpdate:function(d,a,c){var g=this,b,e;if(c==Ext.data.Model.EDIT){b=a.get(g.valueField);e=a.modified.value;if(g.fireEvent("beforepropertychange",g.source,a.getId(),b,e)!==false){if(g.source){g.source[a.getId()]=b}a.commit();g.fireEvent("propertychange",g.source,a.getId(),b,e)}else{a.reject()}}},walkCells:function(h,g,d,c,a,b){if(g=="left"){g="up"}else{if(g=="right"){g="down"}}h=Ext.view.Table.prototype.walkCells.call(this,h,g,d,c,a,b);if(!h.column){h.column=1}return h},getCellEditor:function(a,c){var d=this,e=a.get(d.nameField),g=a.get(d.valueField),b=d.customEditors[e];if(b){if(!(b instanceof Ext.grid.CellEditor)){if(!(b instanceof Ext.form.field.Base)){b=Ext.ComponentManager.create(b,"textfield")}b=d.customEditors[e]=Ext.create("Ext.grid.CellEditor",{field:b})}}else{if(Ext.isDate(g)){b=d.editors.date}else{if(Ext.isNumber(g)){b=d.editors.number}else{if(Ext.isBoolean(g)){b=d.editors["boolean"]}else{b=d.editors.string}}}}b.editorId=e;return b},beforeDestroy:function(){var a=this;a.callParent();a.destroyEditors(a.editors);a.destroyEditors(a.customEditors);delete a.source},destroyEditors:function(b){for(var a in b){if(b.hasOwnProperty(a)){Ext.destroy(b[a])}}},setSource:function(a){this.source=a;this.propStore.setSource(a)},getSource:function(){return this.propStore.getSource()},setProperty:function(c,b,a){this.propStore.setValue(c,b,a)},removeProperty:function(a){this.propStore.remove(a)}});Ext.define("Ext.grid.property.HeaderContainer",{extend:"Ext.grid.header.Container",alternateClassName:"Ext.grid.PropertyColumnModel",nameWidth:115,nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",nameColumnCls:Ext.baseCSSPrefix+"grid-property-name",constructor:function(b,a){var c=this;c.grid=b;c.store=a;c.callParent([{items:[{header:c.nameText,width:b.nameColumnWidth||c.nameWidth,sortable:true,dataIndex:b.nameField,renderer:Ext.Function.bind(c.renderProp,c),itemId:b.nameField,menuDisabled:true,tdCls:c.nameColumnCls},{header:c.valueText,renderer:Ext.Function.bind(c.renderCell,c),getEditor:Ext.Function.bind(c.getCellEditor,c),flex:1,fixed:true,dataIndex:b.valueField,itemId:b.valueField,menuDisabled:true}]}])},getCellEditor:function(a){return this.grid.getCellEditor(a,this)},renderProp:function(a){return this.getPropertyName(a)},renderCell:function(g,d,e){var b=this,c=b.grid.customRenderers[e.get(b.grid.nameField)],a=g;if(c){return c.apply(b,arguments)}if(Ext.isDate(g)){a=b.renderDate(g)}else{if(Ext.isBoolean(g)){a=b.renderBool(g)}}return Ext.util.Format.htmlEncode(a)},renderDate:Ext.util.Format.date,renderBool:function(a){return this[a?"trueText":"falseText"]},getPropertyName:function(b){var a=this.grid.propertyNames;return a&&a[b]?a[b]:b}});Ext.define("Ext.grid.property.Property",{extend:"Ext.data.Model",alternateClassName:"Ext.PropGridProperty",fields:[{name:"name",type:"string"},{name:"value"}],idProperty:"name"});Ext.define("Ext.grid.property.Store",{extend:"Ext.data.Store",alternateClassName:"Ext.grid.PropertyStore",uses:["Ext.data.reader.Reader","Ext.data.proxy.Proxy","Ext.data.ResultSet","Ext.grid.property.Property"],constructor:function(a,c){var b=this;b.grid=a;b.source=c;b.callParent([{data:c,model:Ext.grid.property.Property,proxy:b.getProxy()}])},getProxy:function(){if(!this.proxy){Ext.grid.property.Store.prototype.proxy=Ext.create("Ext.data.proxy.Memory",{model:Ext.grid.property.Property,reader:this.getReader()})}return this.proxy},getReader:function(){if(!this.reader){Ext.grid.property.Store.prototype.reader=Ext.create("Ext.data.reader.Reader",{model:Ext.grid.property.Property,buildExtractors:Ext.emptyFn,read:function(a){return this.readRecords(a)},readRecords:function(b){var d,c,a={records:[],success:true};for(c in b){if(b.hasOwnProperty(c)){d=b[c];if(this.isEditableValue(d)){a.records.push(new Ext.grid.property.Property({name:c,value:d},c))}}}a.total=a.count=a.records.length;return Ext.create("Ext.data.ResultSet",a)},isEditableValue:function(a){return Ext.isPrimitive(a)||Ext.isDate(a)}})}return this.reader},setSource:function(a){var b=this;b.source=a;b.suspendEvents();b.removeAll();b.proxy.data=a;b.load();b.resumeEvents();b.fireEvent("datachanged",b)},getProperty:function(a){return Ext.isNumber(a)?this.getAt(a):this.getById(a)},setValue:function(e,c,a){var b=this,d=b.getRec(e);if(d){d.set("value",c);b.source[e]=c}else{if(a){b.source[e]=c;d=new Ext.grid.property.Property({name:e,value:c},e);b.add(d)}}},remove:function(b){var a=this.getRec(b);if(a){this.callParent([a]);delete this.source[b]}},getRec:function(a){return this.getById(a)},getSource:function(){return this.source}});Ext.define("Ext.layout.component.Body",{alias:["layout.body"],extend:"Ext.layout.component.Component",uses:["Ext.layout.container.Container"],type:"body",onLayout:function(c,b){var d=this,a=d.owner;d.setTargetSize(c,b);d.setBodySize.apply(d,arguments);if(a&&a.layout&&a.layout.isLayout){if(!Ext.isNumber(a.height)||!Ext.isNumber(a.width)){a.layout.bindToOwnerCtComponent=true}else{a.layout.bindToOwnerCtComponent=false}}d.callParent(arguments)},setBodySize:function(e,b){var g=this,a=g.owner,c=a.frameSize,d=Ext.isNumber;if(d(e)){e-=a.el.getFrameWidth("lr")-c.left-c.right}if(d(b)){b-=a.el.getFrameWidth("tb")-c.top-c.bottom}g.setElementSize(a.body,e,b)}});Ext.define("Ext.layout.component.FieldSet",{extend:"Ext.layout.component.Body",alias:["layout.fieldset"],type:"fieldset",doContainerLayout:function(){if(!this.owner.collapsed){this.callParent()}}});Ext.define("Ext.layout.component.Tab",{alias:["layout.tab"],extend:"Ext.layout.component.Button",beforeLayout:function(){var b=this,a=b.lastClosable!==b.owner.closable;if(a){delete b.adjWidth}return this.callParent(arguments)||a},onLayout:function(){var a=this;a.callParent(arguments);a.lastClosable=a.owner.closable}});Ext.define("Ext.layout.component.field.File",{alias:["layout.filefield"],extend:"Ext.layout.component.field.Field",type:"filefield",sizeBodyContents:function(c,b){var d=this,a=d.owner;if(!a.buttonOnly){d.setElementSize(a.inputEl,Ext.isNumber(c)?c-a.button.getWidth()-a.buttonMargin:c)}}});Ext.define("Ext.layout.component.field.Slider",{alias:["layout.sliderfield"],extend:"Ext.layout.component.field.Field",type:"sliderfield",sizeBodyContents:function(a,k){var b=this.owner,g=b.thumbs,c=g.length,j=b.inputEl,h=b.innerEl,e=b.endEl,d=0;for(;d<c;++d){g[d].el.stopAnimation()}if(b.vertical){j.setHeight(k);h.setHeight(Ext.isNumber(k)?k-j.getPadding("t")-e.getPadding("b"):k)}else{j.setWidth(a);h.setWidth(Ext.isNumber(a)?a-j.getPadding("l")-e.getPadding("r"):a)}b.syncThumbs()}});Ext.define("Ext.layout.container.Absolute",{alias:"layout.absolute",extend:"Ext.layout.container.Anchor",alternateClassName:"Ext.layout.AbsoluteLayout",itemCls:Ext.baseCSSPrefix+"abs-layout-item",type:"absolute",onLayout:function(){var b=this,c=b.getTarget(),a=c.dom===document.body;if(!a){c.position()}b.paddingLeft=c.getPadding("l");b.paddingTop=c.getPadding("t");b.callParent(arguments)},adjustWidthAnchor:function(b,a){return b?b-a.getPosition(true)[0]:b},adjustHeightAnchor:function(b,a){return b?b-a.getPosition(true)[1]:b}});Ext.define("Ext.layout.container.Accordion",{extend:"Ext.layout.container.VBox",alias:["layout.accordion"],alternateClassName:"Ext.layout.AccordionLayout",itemCls:Ext.baseCSSPrefix+"box-item "+Ext.baseCSSPrefix+"accordion-item",align:"stretch",fill:true,autoWidth:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:false,animate:true,activeOnTop:false,multi:false,constructor:function(){var a=this;a.callParent(arguments);a.initialAnimate=a.animate;a.animate=false;if(a.fill===false){a.itemCls=Ext.baseCSSPrefix+"accordion-item"}},beforeLayout:function(){var a=this;a.callParent(arguments);if(a.fill){if(!(a.owner.el.dom.style.height||a.getLayoutTargetSize().height)){return false}}else{a.owner.componentLayout.monitorChildren=false;a.autoSize=true;a.owner.setAutoScroll(true)}},renderItems:function(c,j){var h=this,g=c.length,d=0,b,e=h.getLayoutTargetSize(),a=[];for(;d<g;d++){b=c[d];if(!b.rendered){a.push(b);if(h.collapseFirst){b.collapseFirst=h.collapseFirst}if(h.hideCollapseTool){b.hideCollapseTool=h.hideCollapseTool;b.titleCollapse=true}else{if(h.titleCollapse){b.titleCollapse=h.titleCollapse}}delete b.hideHeader;b.collapsible=true;b.title=b.title||"&#160;";b.width=e.width;if(h.fill){delete b.height;delete b.flex;if(h.expandedItem!==undefined){b.collapsed=true}else{if(b.hasOwnProperty("collapsed")&&b.collapsed===false){b.flex=1;h.expandedItem=d}else{b.collapsed=true}}h.owner.mon(b,{show:h.onComponentShow,beforeexpand:h.onComponentExpand,beforecollapse:h.onComponentCollapse,scope:h})}else{delete b.flex;b.animCollapse=h.initialAnimate;b.autoHeight=true;b.autoScroll=false}b.border=b.collapsed}}if(g&&h.expandedItem===undefined){h.expandedItem=0;b=c[0];b.collapsed=b.border=false;if(h.fill){b.flex=1}}h.callParent(arguments);g=a.length;for(d=0;d<g;d++){b=a[d];delete b.width;b.header.addCls(Ext.baseCSSPrefix+"accordion-hd");b.body.addCls(Ext.baseCSSPrefix+"accordion-body")}},onLayout:function(){var g=this;if(g.fill){g.callParent(arguments)}else{var e=g.getLayoutTargetSize(),c=g.getVisibleItems(),a=c.length,d=0,b;for(;d<a;d++){b=c[d];if(b.collapsed){c[d].setWidth(e.width)}else{c[d].setSize(null,null)}}}g.updatePanelClasses();return g},updatePanelClasses:function(){var c=this.getLayoutItems(),d=c.length,a=true,b,e;for(b=0;b<d;b++){e=c[b];if(Ext.isWindows){e.el.dom.scrollTop=0}if(a){e.header.removeCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded")}else{e.header.addCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded")}if(b+1==d&&e.collapsed){e.header.addCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed")}else{e.header.removeCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed")}a=e.collapsed}},animCallback:function(){Ext.Array.forEach(this.toCollapse,function(a){a.fireEvent("collapse",a)});Ext.Array.forEach(this.toExpand,function(a){a.fireEvent("expand",a)})},setupEvents:function(){this.toCollapse=[];this.toExpand=[]},onComponentExpand:function(g){var e=this,d=e.owner.items.items,a=d.length,c=0,b;e.setupEvents();for(;c<a;c++){b=d[c];if(b===g&&b.collapsed){e.setExpanded(b)}else{if(!e.multi&&(b.rendered&&b.header.rendered&&b!==g&&!b.collapsed)){e.setCollapsed(b)}}}e.animate=e.initialAnimate;if(e.activeOnTop){e.owner.insert(0,g)}else{e.layout()}e.animate=false;return false},onComponentCollapse:function(b){var c=this,d=b.next()||b.prev(),a=c.multi?c.owner.query(">panel:not([collapsed])"):[];c.setupEvents();if(c.multi){c.setCollapsed(b);if(a.length===1&&a[0]===b){c.setExpanded(d)}c.animate=c.initialAnimate;c.layout();c.animate=false}else{if(d){c.onComponentExpand(d)}}return false},onComponentShow:function(a){this.onComponentExpand(a)},setCollapsed:function(b){var e=b.getDockedItems(),d,a=e.length,c=0;b.hiddenDocked=[];for(;c<a;c++){d=e[c];if((d!==b.header)&&!d.hidden){d.hidden=true;b.hiddenDocked.push(d)}}b.addCls(b.collapsedCls);b.header.addCls(b.collapsedHeaderCls);b.height=b.header.getHeight();b.el.setHeight(b.height);b.collapsed=true;delete b.flex;if(this.initialAnimate){this.toCollapse.push(b)}else{b.fireEvent("collapse",b)}if(b.collapseTool){b.collapseTool.setType("expand-"+b.getOppositeDirection(b.collapseDirection))}},setExpanded:function(b){var d=b.hiddenDocked,a=d?d.length:0,c=0;for(;c<a;c++){d[c].show()}if(!b.body.isVisible()){b.body.show()}delete b.collapsed;delete b.height;delete b.componentLayout.lastComponentSize;b.suspendLayout=false;b.flex=1;b.removeCls(b.collapsedCls);b.header.removeCls(b.collapsedHeaderCls);if(this.initialAnimate){this.toExpand.push(b)}else{b.fireEvent("expand",b)}if(b.collapseTool){b.collapseTool.setType("collapse-"+b.collapseDirection)}b.setAutoScroll(b.initialConfig.autoScroll)}});Ext.define("Ext.resizer.Splitter",{extend:"Ext.Component",requires:["Ext.XTemplate"],uses:["Ext.resizer.SplitterTracker"],alias:"widget.splitter",renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}">&nbsp;</div>',"</tpl>"],baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",collapsible:false,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,width:5,height:5,collapseTarget:"next",onRender:function(){var a=this,b=a.getCollapseTarget(),c=a.getCollapseDirection();Ext.applyIf(a.renderData,{collapseDir:c,collapsible:a.collapsible||b.collapsible});a.addChildEls("collapseEl");this.callParent(arguments);if(a.performCollapse!==false){if(a.renderData.collapsible){a.mon(a.collapseEl,"click",a.toggleTargetCmp,a)}if(a.collapseOnDblClick){a.mon(a.el,"dblclick",a.toggleTargetCmp,a)}}a.mon(b,"collapse",a.onTargetCollapse,a);a.mon(b,"expand",a.onTargetExpand,a);a.el.addCls(a.baseCls+"-"+a.orientation);a.el.unselectable();a.tracker=Ext.create("Ext.resizer.SplitterTracker",{el:a.el});a.relayEvents(a.tracker,["beforedragstart","dragstart","dragend"])},getCollapseDirection:function(){var c=this,a,b=c.ownerCt.layout.type;if(c.collapseTarget.isComponent){a=Number(c.ownerCt.items.indexOf(c.collapseTarget)==c.ownerCt.items.indexOf(c)-1)<<1|Number(b=="hbox")}else{a=Number(c.collapseTarget=="prev")<<1|Number(b=="hbox")}c.orientation=["horizontal","vertical"][a&1];return["bottom","right","top","left"][a]},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget=="prev"?a.previousSibling():a.nextSibling()},onTargetCollapse:function(a){this.el.addCls([this.collapsedClsInternal,this.collapsedCls])},onTargetExpand:function(a){this.el.removeCls([this.collapsedClsInternal,this.collapsedCls])},toggleTargetCmp:function(c,a){var b=this.getCollapseTarget();if(b.isVisible()){if(b.collapsed){b.expand(b.animCollapse)}else{b.collapse(this.renderData.collapseDir,b.animCollapse)}}},setSize:function(){var a=this;a.callParent(arguments);if(Ext.isIE){a.el.repaint()}}});Ext.define("Ext.layout.container.Border",{alias:["layout.border"],extend:"Ext.layout.container.Container",requires:["Ext.resizer.Splitter","Ext.container.Container","Ext.fx.Anim"],alternateClassName:"Ext.layout.BorderLayout",targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:Ext.baseCSSPrefix+"border-item",bindToOwnerCtContainer:true,percentageRe:/(\d+)%/,slideDirection:{north:"t",south:"b",west:"l",east:"r"},constructor:function(a){this.initialConfig=a;this.callParent(arguments)},onLayout:function(){var a=this;if(!a.borderLayoutInitialized){a.initializeBorderLayout()}a.fixHeightConstraints();a.shadowLayout.onLayout();if(a.embeddedContainer){a.embeddedContainer.layout.onLayout()}if(!a.initialCollapsedComplete){Ext.iterate(a.regions,function(b,c){if(c.borderCollapse){a.onBeforeRegionCollapse(c,c.collapseDirection,false,0)}});a.initialCollapsedComplete=true}},isValidParent:function(b,c,a){if(!this.borderLayoutInitialized){this.initializeBorderLayout()}return this.shadowLayout.isValidParent(b,c,a)},beforeLayout:function(){if(!this.borderLayoutInitialized){this.initializeBorderLayout()}this.shadowLayout.beforeLayout()},renderItems:function(a,b){},renderItem:function(a){},renderChildren:function(){if(!this.borderLayoutInitialized){this.initializeBorderLayout()}this.shadowLayout.renderChildren()},getVisibleItems:function(){return Ext.ComponentQuery.query(":not([slideOutAnim])",this.callParent(arguments))},initializeBorderLayout:function(){var k=this,c=0,j=k.getLayoutItems(),h=j.length,b=(k.regions={}),e=[],g=[],a=0,n=0,d,m;k.splitters={};for(;c<h;c++){d=j[c];b[d.region]=d;if(d.region!="center"&&d.collapsible&&d.collapseMode!="header"){d.borderCollapse=d.collapsed;d.collapsed=false;d.on({beforecollapse:k.onBeforeRegionCollapse,beforeexpand:k.onBeforeRegionExpand,destroy:k.onRegionDestroy,scope:k});k.setupState(d)}}d=b.center;if(!d.flex){d.flex=1}delete d.width;d.maintainFlex=true;d=b.west;if(d){d.collapseDirection=Ext.Component.DIRECTION_LEFT;g.push(d);if(d.split){g.push(k.splitters.west=k.createSplitter(d))}m=Ext.isString(d.width)&&d.width.match(k.percentageRe);if(m){a+=(d.flex=parseInt(m[1],10)/100);delete d.width}}d=b.north;if(d){d.collapseDirection=Ext.Component.DIRECTION_TOP;e.push(d);if(d.split){e.push(k.splitters.north=k.createSplitter(d))}m=Ext.isString(d.height)&&d.height.match(k.percentageRe);if(m){n+=(d.flex=parseInt(m[1],10)/100);delete d.height}}if(b.north||b.south){if(b.east||b.west){e.push(k.embeddedContainer=Ext.create("Ext.container.Container",{xtype:"container",region:"center",id:k.owner.id+"-embedded-center",cls:Ext.baseCSSPrefix+"border-item",flex:b.center.flex,maintainFlex:true,layout:{type:"hbox",align:"stretch",getVisibleItems:k.getVisibleItems}}));g.push(b.center)}else{e.push(b.center)}}else{g.push(b.center)}d=b.south;if(d){d.collapseDirection=Ext.Component.DIRECTION_BOTTOM;if(d.split){e.push(k.splitters.south=k.createSplitter(d))}m=Ext.isString(d.height)&&d.height.match(k.percentageRe);if(m){n+=(d.flex=parseInt(m[1],10)/100);delete d.height}e.push(d)}d=b.east;if(d){d.collapseDirection=Ext.Component.DIRECTION_RIGHT;if(d.split){g.push(k.splitters.east=k.createSplitter(d))}m=Ext.isString(d.width)&&d.width.match(k.percentageRe);if(m){a+=(d.flex=parseInt(m[1],10)/100);delete d.width}g.push(d)}if(b.north||b.south){k.shadowContainer=Ext.create("Ext.container.Container",{ownerCt:k.owner,el:k.getTarget(),layout:Ext.applyIf({type:"vbox",align:"stretch",getVisibleItems:k.getVisibleItems},k.initialConfig)});k.createItems(k.shadowContainer,e);if(k.splitters.north){k.splitters.north.ownerCt=k.shadowContainer}if(k.splitters.south){k.splitters.south.ownerCt=k.shadowContainer}if(k.embeddedContainer){k.embeddedContainer.ownerCt=k.shadowContainer;k.createItems(k.embeddedContainer,g);if(k.splitters.east){k.splitters.east.ownerCt=k.embeddedContainer}if(k.splitters.west){k.splitters.west.ownerCt=k.embeddedContainer}Ext.each([k.splitters.north,k.splitters.south],function(p){if(p){p.on("beforedragstart",k.fixHeightConstraints,k)}});if(a){b.center.flex-=a}if(n){k.embeddedContainer.flex-=n}}else{if(n){b.center.flex-=n}}}else{k.shadowContainer=Ext.create("Ext.container.Container",{ownerCt:k.owner,el:k.getTarget(),layout:Ext.applyIf({type:(g.length==1)?"fit":"hbox",align:"stretch"},k.initialConfig)});k.createItems(k.shadowContainer,g);if(k.splitters.east){k.splitters.east.ownerCt=k.shadowContainer}if(k.splitters.west){k.splitters.west.ownerCt=k.shadowContainer}if(a){b.center.flex-=n}}for(c=0,j=k.shadowContainer.items.items,h=j.length;c<h;c++){j[c].shadowOwnerCt=k.shadowContainer}if(k.embeddedContainer){for(c=0,j=k.embeddedContainer.items.items,h=j.length;c<h;c++){j[c].shadowOwnerCt=k.embeddedContainer}}k.shadowLayout=k.shadowContainer.getLayout();k.borderLayoutInitialized=true},setupState:function(b){var a=b.getState;b.getState=function(){var c=a.call(b)||{},d=b.region;c.collapsed=!!b.collapsed;if(d=="west"||d=="east"){c.width=b.getWidth()}else{c.height=b.getHeight()}return c};b.addStateEvents(["collapse","expand","resize"])},createItems:function(a,b){delete a.items;a.initItems();a.items.addAll(b)},createSplitter:function(a){var b=this,c=(a.collapseMode!="header"),d;d=Ext.create("Ext.resizer.Splitter",{hidden:!!a.hidden,collapseTarget:a,performCollapse:!c,listeners:c?{click:{fn:Ext.Function.bind(b.onSplitterCollapseClick,b,[a]),element:"collapseEl"}}:null});if(a.collapseMode=="mini"){a.placeholder=d;d.collapsedCls=a.collapsedCls}a.on({hide:b.onRegionVisibilityChange,show:b.onRegionVisibilityChange,scope:b});return d},fixHeightConstraints:function(){var c=this,a=c.embeddedContainer,b=1e+99,d=-1;if(!a){return}a.items.each(function(e){if(Ext.isNumber(e.maxHeight)){b=Math.max(b,e.maxHeight)}if(Ext.isNumber(e.minHeight)){d=Math.max(d,e.minHeight)}});a.maxHeight=b;a.minHeight=d},onRegionVisibilityChange:function(a){this.splitters[a.region][a.hidden?"hide":"show"]();this.layout()},onSplitterCollapseClick:function(a){if(a.collapsed){this.onPlaceHolderToolClick(null,null,null,{client:a})}else{a.collapse()}},getPlaceholder:function(c){var d=this,g=c.placeholder,b=c.shadowOwnerCt,e=b.layout,a=Ext.panel.Panel.prototype.getOppositeDirection(c.collapseDirection),h=(c.region=="north"||c.region=="south");if(c.collapseMode=="header"){return}if(!g){if(c.collapseMode=="mini"){g=Ext.create("Ext.resizer.Splitter",{id:"collapse-placeholder-"+c.id,collapseTarget:c,performCollapse:false,listeners:{click:{fn:Ext.Function.bind(d.onSplitterCollapseClick,d,[c]),element:"collapseEl"}}});g.addCls(g.collapsedCls)}else{g={id:"collapse-placeholder-"+c.id,margins:c.initialConfig.margins||Ext.getClass(c).prototype.margins,xtype:"header",orientation:h?"horizontal":"vertical",title:c.title,textCls:c.headerTextCls,iconCls:c.iconCls,baseCls:c.baseCls+"-header",ui:c.ui,indicateDrag:c.draggable,cls:Ext.baseCSSPrefix+"region-collapsed-placeholder "+Ext.baseCSSPrefix+"region-collapsed-"+c.collapseDirection+"-placeholder "+c.collapsedCls,listeners:c.floatable?{click:{fn:function(j){d.floatCollapsedPanel(j,c)},element:"el"}}:null};if((Ext.isIE6||Ext.isIE7||(Ext.isIEQuirks))&&!h){g.width=25}if(!c.hideCollapseTool){g[h?"tools":"items"]=[{xtype:"tool",client:c,type:"expand-"+a,handler:d.onPlaceHolderToolClick,scope:d}]}}g=d.owner.createComponent(g);if(c.isXType("panel")){c.on({titlechange:d.onRegionTitleChange,iconchange:d.onRegionIconChange,scope:d})}}c.placeholder=g;g.comp=c;return g},onRegionTitleChange:function(a,b){a.placeholder.setTitle(b)},onRegionIconChange:function(b,a){b.placeholder.setIconCls(a)},calculateChildBox:function(a){var b=this;if(b.shadowContainer.items.contains(a)){return b.shadowContainer.layout.calculateChildBox(a)}else{if(b.embeddedContainer&&b.embeddedContainer.items.contains(a)){return b.embeddedContainer.layout.calculateChildBox(a)}}},onBeforeRegionCollapse:function(h,m,d){if(h.collapsedChangingLayout){return false}h.collapsedChangingLayout=true;var k=this,r=h.el,c,b=h.collapseMode=="mini",j=h.shadowOwnerCt,a=j.layout,p=h.placeholder,g=k.owner.suspendLayout,n=j.suspendLayout,q=(h.region=="north"||h.region=="west");k.owner.suspendLayout=true;j.suspendLayout=true;a.layoutBusy=true;if(j.componentLayout){j.componentLayout.layoutBusy=true}k.shadowContainer.layout.layoutBusy=true;k.layoutBusy=true;k.owner.componentLayout.layoutBusy=true;if(!p){p=k.getPlaceholder(h)}if(p.shadowOwnerCt===j){p.show()}else{j.insert(j.items.indexOf(h)+(q?0:1),p);p.shadowOwnerCt=j;p.ownerCt=k.owner}h.hidden=true;if(!p.rendered){a.renderItem(p,a.innerCt);if(h.region=="north"||h.region=="south"){p.setCalculatedSize(h.getWidth())}else{p.setCalculatedSize(undefined,h.getHeight())}}function e(){k.owner.suspendLayout=g;j.suspendLayout=n;delete a.layoutBusy;if(j.componentLayout){delete j.componentLayout.layoutBusy}delete k.shadowContainer.layout.layoutBusy;delete k.layoutBusy;delete k.owner.componentLayout.layoutBusy;delete h.collapsedChangingLayout;h.collapsed=true;h.fireEvent("collapse",h)}if(h.animCollapse&&k.initialCollapsedComplete){a.layout();r.dom.style.zIndex=100;if(!b){p.el.hide()}r.slideOut(k.slideDirection[h.region],{duration:Ext.Number.from(h.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){r.show().setLeftTop(-10000,-10000);r.dom.style.zIndex="";if(!b){p.el.slideIn(k.slideDirection[h.region],{easing:"linear",duration:100})}e()}}})}else{r.setLeftTop(-10000,-10000);a.layout();e()}return false},onBeforeRegionExpand:function(b,a){this.onPlaceHolderToolClick(null,null,null,{client:b,shouldFireBeforeexpand:false});return false},onPlaceHolderToolClick:function(q,x,a,c){var w=this,t=c.client,j=(t.collapseMode!="mini")||!t.split,v=t.el,m,d=t.placeholder,n=d.el,u=t.shadowOwnerCt,b=u.layout,k,r=w.owner.suspendLayout,p=u.suspendLayout,h;if(t.collapsedChangingLayout){return false}if(c.shouldFireBeforeexpand!==false&&t.fireEvent("beforeexpand",t,true)===false){return false}t.collapsedChangingLayout=true;if(t.getActiveAnimation()){t.stopAnimation()}if(t.slideOutAnim){v.un(t.panelMouseMon);n.un(t.placeholderMouseMon);delete t.slideOutAnim;delete t.panelMouseMon;delete t.placeholderMouseMon;h=true}w.owner.suspendLayout=true;u.suspendLayout=true;b.layoutBusy=true;if(u.componentLayout){u.componentLayout.layoutBusy=true}w.shadowContainer.layout.layoutBusy=true;w.layoutBusy=true;w.owner.componentLayout.layoutBusy=true;t.hidden=false;t.collapsed=false;if(j){d.hidden=true}m=b.calculateChildBox(t);if(t.collapseTool){t.collapseTool.show()}if(t.animCollapse&&!h){v.setStyle("visibility","hidden")}v.setLeftTop(m.left,m.top);k=t.getSize();if(k.height!=m.height||k.width!=m.width){w.setItemSize(t,m.width,m.height)}function g(){w.owner.suspendLayout=r;u.suspendLayout=p;delete b.layoutBusy;if(u.componentLayout){delete u.componentLayout.layoutBusy}delete w.shadowContainer.layout.layoutBusy;delete w.layoutBusy;delete w.owner.componentLayout.layoutBusy;delete t.collapsedChangingLayout;t.removeCls(Ext.baseCSSPrefix+"border-region-slide-in");t.fireEvent("expand",t)}if(j){d.el.hide()}if(t.animCollapse&&!h){v.dom.style.zIndex=100;v.slideIn(w.slideDirection[t.region],{duration:Ext.Number.from(t.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){v.dom.style.zIndex="";t.hidden=false;b.onLayout();g()}}})}else{b.onLayout();g()}},floatCollapsedPanel:function(k,h){if(h.floatable===false){return}var m=this,t=h.el,q=h.placeholder,r=q.el,j=h.shadowOwnerCt,b=j.layout,g=b.getChildBox(q),p=j.suspendLayout,a,d,n;if(k.getTarget("."+Ext.baseCSSPrefix+"tool")){return}if(t.getActiveAnimation()){return}if(h.slideOutAnim){m.slideOutFloatedComponent(h);return}function c(v){var u=t.getRegion().union(r.getRegion()).adjust(1,-1,-1,1);if(!u.contains(v.getPoint())){m.slideOutFloatedComponent(h)}}h.placeholderMouseMon=r.monitorMouseLeave(500,c);j.suspendLayout=true;m.layoutBusy=true;m.owner.componentLayout.layoutBusy=true;if(h.collapseTool){h.collapseTool.hide()}h.hidden=false;h.collapsed=false;q.hidden=true;d=b.calculateChildBox(h);q.hidden=false;if(h.region=="north"||h.region=="west"){d[b.parallelBefore]+=g[b.parallelPrefix]-1}else{d[b.parallelBefore]-=(g[b.parallelPrefix]-1)}t.setStyle("visibility","hidden");t.setLeftTop(d.left,d.top);a=h.getSize();if(a.height!=d.height||a.width!=d.width){m.setItemSize(h,d.width,d.height)}n={listeners:{afteranimate:function(){j.suspendLayout=p;delete m.layoutBusy;delete m.owner.componentLayout.layoutBusy;n.listeners={afterAnimate:function(){t.show().removeCls(Ext.baseCSSPrefix+"border-region-slide-in").setLeftTop(-10000,-10000);h.hidden=true;h.collapsed=true;delete h.slideOutAnim;delete h.panelMouseMon;delete h.placeholderMouseMon}};h.slideOutAnim=n}},duration:500};t.addCls(Ext.baseCSSPrefix+"border-region-slide-in");t.slideIn(m.slideDirection[h.region],n);h.panelMouseMon=t.monitorMouseLeave(500,c)},slideOutFloatedComponent:function(a){var c=a.el,b;c.un(a.panelMouseMon);a.placeholder.el.un(a.placeholderMouseMon);c.slideOut(this.slideDirection[a.region],a.slideOutAnim);delete a.slideOutAnim;delete a.panelMouseMon;delete a.placeholderMouseMon},onRegionDestroy:function(a){var b=a.placeholder;if(b){delete b.ownerCt;b.destroy()}},onDestroy:function(){var b=this,a=b.shadowContainer,c=b.embeddedContainer;if(a){delete a.ownerCt;Ext.destroy(a)}if(c){delete c.ownerCt;Ext.destroy(c)}delete b.regions;delete b.splitters;delete b.shadowContainer;delete b.embeddedContainer;b.callParent(arguments)}});Ext.define("Ext.layout.container.Card",{alias:["layout.card"],alternateClassName:"Ext.layout.CardLayout",extend:"Ext.layout.container.AbstractCard",setActiveItem:function(b){var e=this,a=e.owner,d=e.activeItem,c;b=e.parseActiveItem(b);c=a.items.indexOf(b);if(c==-1){c=a.items.items.length;a.add(b)}if(b&&d!=b){if(!b.rendered){e.renderItem(b,e.getRenderTarget(),a.items.length);e.configureItem(b,0)}e.activeItem=b;if(b.fireEvent("beforeactivate",b,d)===false){return false}if(d&&d.fireEvent("beforedeactivate",d,b)===false){return false}if(e.sizeAllCards){e.onLayout()}else{e.setItemBox(b,e.getTargetBox())}e.owner.suspendLayout=true;if(d){if(e.hideInactive){d.hide()}d.fireEvent("deactivate",d,b)}e.owner.suspendLayout=false;if(b.hidden){b.show()}else{e.onLayout()}b.fireEvent("activate",b,d);return b}return false},configureItem:function(a){a.layoutManagedHeight=0;a.layoutManagedWidth=0;this.callParent(arguments)}});Ext.define("Ext.layout.container.Column",{extend:"Ext.layout.container.Auto",alias:["layout.column"],alternateClassName:"Ext.layout.ColumnLayout",type:"column",itemCls:Ext.baseCSSPrefix+"column",targetCls:Ext.baseCSSPrefix+"column-layout-ct",scrollOffset:0,bindToOwnerCtComponent:false,getRenderTarget:function(){if(!this.innerCt){this.innerCt=this.getTarget().createChild({cls:Ext.baseCSSPrefix+"column-inner"});this.clearEl=this.innerCt.createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})}return this.innerCt},onLayout:function(){var h=this,e=h.getTarget(),g=h.getLayoutItems(),d=g.length,k,c,m=[],b,n,j,a;n=h.getLayoutTargetSize();if(n.width<d*10){return}if(h.adjustmentPass){if(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks){n.width=h.adjustedWidth}}else{c=e.getStyle("overflow");if(c&&c!="hidden"){h.autoScroll=true;if(!(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks)){e.setStyle("overflow","hidden");n=h.getLayoutTargetSize()}}}j=n.width-h.scrollOffset;h.innerCt.setWidth(j);for(c=0;c<d;c++){k=g[c];b=m[c]=k.getEl().getMargin("lr");if(!k.columnWidth){j-=(k.getWidth()+b)}}j=j<0?0:j;for(c=0;c<d;c++){k=g[c];if(k.columnWidth){a=Math.floor(k.columnWidth*j)-m[c];h.setItemSize(k,a,k.height)}else{h.layoutItem(k)}}if(!h.adjustmentPass&&h.autoScroll){e.setStyle("overflow","auto");h.adjustmentPass=(e.dom.scrollHeight>n.height);if(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks){h.adjustedWidth=n.width-Ext.getScrollBarWidth()}else{e.setStyle("overflow","auto")}if(h.adjustmentPass){h.onLayout()}}delete h.adjustmentPass},configureItem:function(a){this.callParent(arguments);if(a.columnWidth){a.layoutManagedWidth=1}}});Ext.define("Ext.layout.container.Table",{alias:["layout.table"],extend:"Ext.layout.container.Auto",alternateClassName:"Ext.layout.TableLayout",monitorResize:false,type:"table",autoSize:true,clearEl:true,targetCls:Ext.baseCSSPrefix+"table-layout-ct",tableCls:Ext.baseCSSPrefix+"table-layout",cellCls:Ext.baseCSSPrefix+"table-layout-cell",tableAttrs:null,renderItems:function(h){var e=this.getTable().tBodies[0],q=e.rows,d=0,g=h.length,p,m,c,a,n,k,j,b;p=this.calculateCells(h);for(;d<g;d++){m=p[d];c=m.rowIdx;a=m.cellIdx;n=h[d];k=q[c];if(!k){k=e.insertRow(c);if(this.trAttrs){k.set(this.trAttrs)}}b=j=Ext.get(k.cells[a]||k.insertCell(a));if(this.needsDivWrap()){b=j.first()||j.createChild({tag:"div"});b.setWidth(null)}if(!n.rendered){this.renderItem(n,b,0)}else{if(!this.isValidParent(n,b,0)){this.moveItem(n,b,0)}}if(this.tdAttrs){j.set(this.tdAttrs)}j.set({colSpan:n.colspan||1,rowSpan:n.rowspan||1,id:n.cellId||"",cls:this.cellCls+" "+(n.cellCls||"")});if(!p[d+1]||p[d+1].rowIdx!==c){a++;while(k.cells[a]){k.deleteCell(a)}}}c++;while(e.rows[c]){e.deleteRow(c)}},afterLayout:function(){this.callParent();if(this.needsDivWrap()){Ext.Array.forEach(this.getLayoutItems(),function(a){Ext.fly(a.el.dom.parentNode).setWidth(a.getWidth())})}},calculateCells:function(k){var n=[],b=0,d=0,a=0,h=this.columns||Infinity,p=[],e=0,c,g=k.length,m;for(;e<g;e++){m=k[e];while(d>=h||p[d]>0){if(d>=h){d=0;a=0;b++;for(c=0;c<h;c++){if(p[c]>0){p[c]--}}}else{d++}}n.push({rowIdx:b,cellIdx:a});for(c=m.colspan||1;c;--c){p[d]=m.rowspan||1;++d}++a}return n},getTable:function(){var a=this.table;if(!a){a=this.table=this.getTarget().createChild(Ext.apply({tag:"table",role:"presentation",cls:this.tableCls,cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,true)}return a},needsDivWrap:function(){return Ext.isOpera10_5}});Ext.define("Ext.menu.Item",{extend:"Ext.Component",alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",activeCls:Ext.baseCSSPrefix+"menu-item-active",ariaRole:"menuitem",canActivate:true,clickHideDelay:1,destroyMenu:true,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:true,isMenuItem:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,renderTpl:['<tpl if="plain">',"{text}","</tpl>",'<tpl if="!plain">','<a id="{id}-itemEl" class="'+Ext.baseCSSPrefix+'menu-item-link" href="{href}" <tpl if="hrefTarget">target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on">','<img id="{id}-iconEl" src="{icon}" class="'+Ext.baseCSSPrefix+'menu-item-icon {iconCls}" />','<span id="{id}-textEl" class="'+Ext.baseCSSPrefix+'menu-item-text" <tpl if="menu">style="margin-right: 17px;"</tpl> >{text}</span>','<tpl if="menu">','<img id="{id}-arrowEl" src="{blank}" class="'+Ext.baseCSSPrefix+'menu-item-arrow" />',"</tpl>","</a>","</tpl>"],maskOnDisable:false,activate:function(){var a=this;if(!a.activated&&a.canActivate&&a.rendered&&!a.isDisabled()&&a.isVisible()){a.el.addCls(a.activeCls);a.focus();a.activated=true;a.fireEvent("activate",a)}},blur:function(){this.$focused=false;this.callParent(arguments)},deactivate:function(){var a=this;if(a.activated){a.el.removeCls(a.activeCls);a.blur();a.hideMenu();a.activated=false;a.fireEvent("deactivate",a)}},deferExpandMenu:function(){var a=this;if(!a.menu.rendered||!a.menu.isVisible()){a.parentMenu.activeChild=a.menu;a.menu.parentItem=a;a.menu.parentMenu=a.menu.ownerCt=a.parentMenu;a.menu.showBy(a,a.menuAlign)}},deferHideMenu:function(){if(this.menu.isVisible()){this.menu.hide()}},deferHideParentMenus:function(){Ext.menu.Manager.hideAll()},expandMenu:function(a){var b=this;if(b.menu){clearTimeout(b.hideMenuTimer);if(a===0){b.deferExpandMenu()}else{b.expandMenuTimer=Ext.defer(b.deferExpandMenu,Ext.isNumber(a)?a:b.menuExpandDelay,b)}}},focus:function(){this.$focused=true;this.callParent(arguments)},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},hideMenu:function(a){var b=this;if(b.menu){clearTimeout(b.expandMenuTimer);b.hideMenuTimer=Ext.defer(b.deferHideMenu,Ext.isNumber(a)?a:b.menuHideDelay,b)}},initComponent:function(){var b=this,c=Ext.baseCSSPrefix,a=[c+"menu-item"];b.addEvents("activate","click","deactivate");if(b.plain){a.push(c+"menu-item-plain")}if(b.cls){a.push(b.cls)}b.cls=a.join(" ");if(b.menu){b.menu=Ext.menu.Manager.get(b.menu)}b.callParent(arguments)},onClick:function(b){var a=this;if(!a.href){b.stopEvent()}if(a.disabled){return}if(a.hideOnClick){a.deferHideParentMenusTimer=Ext.defer(a.deferHideParentMenus,a.clickHideDelay,a)}Ext.callback(a.handler,a.scope||a,[a,b]);a.fireEvent("click",a,b);if(!a.hideOnClick){a.focus()}},onDestroy:function(){var a=this;clearTimeout(a.expandMenuTimer);clearTimeout(a.hideMenuTimer);clearTimeout(a.deferHideParentMenusTimer);if(a.menu){delete a.menu.parentItem;delete a.menu.parentMenu;delete a.menu.ownerCt;if(a.destroyMenu!==false){a.menu.destroy()}}a.callParent(arguments)},onRender:function(a,d){var b=this,c=Ext.BLANK_IMAGE_URL;Ext.applyIf(b.renderData,{href:b.href||"#",hrefTarget:b.hrefTarget,icon:b.icon||c,iconCls:b.iconCls+(b.checkChangeDisabled?" "+b.disabledCls:""),menu:Ext.isDefined(b.menu),plain:b.plain,text:b.text,blank:c});b.addChildEls("itemEl","iconEl","textEl","arrowEl");b.callParent(arguments)},setHandler:function(b,a){this.handler=b||null;this.scope=a},setIconCls:function(a){var b=this;if(b.iconEl){if(b.iconCls){b.iconEl.removeCls(b.iconCls)}if(a){b.iconEl.addCls(a)}}b.iconCls=a},setText:function(c){var b=this,a=b.textEl||b.el;b.text=c;if(b.rendered){a.update(c||"");b.ownerCt.redoComponentLayout()}}});Ext.define("Ext.menu.CheckItem",{extend:"Ext.menu.Item",alias:"widget.menucheckitem",checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:false,afterRender:function(){var a=this;this.callParent();a.checked=!a.checked;a.setChecked(!a.checked,true)},initComponent:function(){var a=this;a.addEvents("beforecheckchange","checkchange");a.callParent(arguments);Ext.menu.Manager.registerCheckable(a);if(a.group){if(!a.iconCls){a.iconCls=a.groupCls}if(a.initialConfig.hideOnClick!==false){a.hideOnClick=true}}},disableCheckChange:function(){var a=this;if(a.iconEl){a.iconEl.addCls(a.disabledCls)}a.checkChangeDisabled=true},enableCheckChange:function(){var a=this;a.iconEl.removeCls(a.disabledCls);a.checkChangeDisabled=false},onClick:function(b){var a=this;if(!a.disabled&&!a.checkChangeDisabled&&!(a.checked&&a.group)){a.setChecked(!a.checked)}this.callParent([b])},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);this.callParent(arguments)},setChecked:function(c,a){var b=this;if(b.checked!==c&&(a||b.fireEvent("beforecheckchange",b,c)!==false)){if(b.el){b.el[c?"addCls":"removeCls"](b.checkedCls)[!c?"addCls":"removeCls"](b.uncheckedCls)}b.checked=c;Ext.menu.Manager.onCheckChange(b,c);if(!a){Ext.callback(b.checkHandler,b.scope,[b,c]);b.fireEvent("checkchange",b,c)}}}});Ext.define("Ext.menu.KeyNav",{extend:"Ext.util.KeyNav",requires:["Ext.FocusManager"],constructor:function(b){var a=this;a.menu=b;a.callParent([b.el,{down:a.down,enter:a.enter,esc:a.escape,left:a.left,right:a.right,space:a.enter,tab:a.tab,up:a.up}])},down:function(b){var a=this,c=a.menu.focusedItem;if(c&&b.getKey()==Ext.EventObject.DOWN&&a.isWhitelisted(c)){return true}a.focusNextItem(1)},enter:function(b){var c=this.menu,a=c.focusedItem;if(c.activeItem){c.onClick(b)}else{if(a&&a.isFormField){return true}}},escape:function(a){Ext.menu.Manager.hideAll()},focusNextItem:function(g){var h=this.menu,b=h.items,d=h.focusedItem,c=d?b.indexOf(d):-1,a=c+g;while(a!=c){if(a<0){a=b.length-1}else{if(a>=b.length){a=0}}var e=b.getAt(a);if(h.canActivateItem(e)){h.setActiveItem(e);break}a+=g}},isWhitelisted:function(a){return Ext.FocusManager.isWhitelisted(a)},left:function(b){var c=this.menu,d=c.focusedItem,a=c.activeItem;if(d&&this.isWhitelisted(d)){return true}c.hide();if(c.parentMenu){c.parentMenu.focus()}},right:function(c){var d=this.menu,g=d.focusedItem,a=d.activeItem,b;if(g&&this.isWhitelisted(g)){return true}if(a){b=d.activeItem.menu;if(b){a.expandMenu(0);Ext.defer(function(){b.setActiveItem(b.items.getAt(0))},25)}}},tab:function(b){var a=this;if(b.shiftKey){a.up(b)}else{a.down(b)}},up:function(b){var a=this,c=a.menu.focusedItem;if(c&&b.getKey()==Ext.EventObject.UP&&a.isWhitelisted(c)){return true}a.focusNextItem(-1)}});Ext.define("Ext.menu.Separator",{extend:"Ext.menu.Item",alias:"widget.menuseparator",canActivate:false,focusable:false,hideOnClick:false,plain:true,separatorCls:Ext.baseCSSPrefix+"menu-item-separator",text:"&#160;",onRender:function(b,d){var c=this,a=c.separatorCls;c.cls+=" "+a;c.callParent(arguments)}});Ext.define("Ext.menu.Menu",{extend:"Ext.panel.Panel",alias:"widget.menu",requires:["Ext.layout.container.Fit","Ext.layout.container.VBox","Ext.menu.CheckItem","Ext.menu.Item","Ext.menu.KeyNav","Ext.menu.Manager","Ext.menu.Separator"],allowOtherMenus:false,ariaRole:"menu",defaultAlign:"tl-bl?",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,isMenu:true,showSeparator:true,minWidth:120,initComponent:function(){var b=this,d=Ext.baseCSSPrefix,a=[d+"menu"],c=b.bodyCls?[b.bodyCls]:[];b.addEvents("click","mouseenter","mouseleave","mouseover");Ext.menu.Manager.register(b);if(b.plain){a.push(d+"menu-plain")}b.cls=a.join(" ");c.unshift(d+"menu-body");b.bodyCls=c.join(" ");b.layout={type:"vbox",align:"stretchmax",autoSize:true,clearInnerCtOnLayout:true,overflowHandler:"Scroller"};if(b.floating===false&&b.initialConfig.hidden!==true){b.hidden=false}b.callParent(arguments);b.on("beforeshow",function(){var e=!!b.items.length;if(e&&b.rendered){b.el.setStyle("visibility",null)}return e})},afterRender:function(a){var b=this,d=Ext.baseCSSPrefix,c="&#160;";b.callParent(arguments);if(b.showSeparator){b.iconSepEl=b.layout.getRenderTarget().insertFirst({cls:d+"menu-icon-separator",html:c})}b.focusEl=b.el.createChild({cls:d+"menu-focus",tabIndex:"-1",html:c});b.mon(b.el,{click:b.onClick,mouseover:b.onMouseOver,scope:b});b.mouseMonitor=b.el.monitorMouseLeave(100,b.onMouseLeave,b);if(b.showSeparator&&((!Ext.isStrict&&Ext.isIE)||Ext.isIE6)){b.iconSepEl.setHeight(b.el.getHeight())}b.keyNav=Ext.create("Ext.menu.KeyNav",b)},afterLayout:function(){var k=this;k.callParent(arguments);if((!Ext.isStrict&&Ext.isIE)||Ext.isIE6){var a=k.layout.getRenderTarget(),c=0,b=k.dockedItems,d=b.length,g=0,h,j,e;c=a.getWidth();e=c+k.body.getBorderWidth("lr")+k.body.getPadding("lr");k.body.setWidth(e);for(;g<d,h=b.getAt(g);g++){if(h.dock=="left"||h.dock=="right"){e+=h.getWidth()}}k.el.setWidth(e)}},getBubbleTarget:function(){return this.parentMenu||this.callParent()},canActivateItem:function(a){return a&&!a.isDisabled()&&a.isVisible()&&(a.canActivate||a.getXTypes().indexOf("menuitem")<0)},deactivateActiveItem:function(){var a=this;if(a.activeItem){a.activeItem.deactivate();if(!a.activeItem.activated){delete a.activeItem}}if(a.focusedItem&&!a.filtered){a.focusedItem.blur();if(!a.focusedItem.$focused){delete a.focusedItem}}},clearStretch:function(){if(this.rendered){this.items.each(function(a){if(a.componentLayout){delete a.componentLayout.lastComponentSize}if(a.el){a.el.setWidth(null)}})}},onAdd:function(){var a=this;a.clearStretch();a.callParent(arguments);if(Ext.isIE6||Ext.isIE7){Ext.Function.defer(a.doComponentLayout,10,a)}},onRemove:function(){this.clearStretch();this.callParent(arguments)},redoComponentLayout:function(){if(this.rendered){this.clearStretch();this.doComponentLayout()}},getFocusEl:function(){return this.focusEl},hide:function(){this.deactivateActiveItem();this.callParent(arguments)},getItemFromEvent:function(a){return this.getChildByElement(a.getTarget())},lookupComponent:function(b){var a=this;if(Ext.isString(b)){b=a.lookupItemFromString(b)}else{if(Ext.isObject(b)){b=a.lookupItemFromObject(b)}}b.minWidth=b.minWidth||a.minWidth;return b},lookupItemFromObject:function(c){var b=this,d=Ext.baseCSSPrefix,a,e;if(!c.isComponent){if(!c.xtype){c=Ext.create("Ext.menu."+(Ext.isBoolean(c.checked)?"Check":"")+"Item",c)}else{c=Ext.ComponentManager.create(c,c.xtype)}}if(c.isMenuItem){c.parentMenu=b}if(!c.isMenuItem&&!c.dock){a=[d+"menu-item",d+"menu-item-cmp"];e=Ext.Function.createInterceptor;c.focus=e(c.focus,function(){this.$focused=true},c);c.blur=e(c.blur,function(){this.$focused=false},c);if(!b.plain&&(c.indent===true||c.iconCls==="no-icon")){a.push(d+"menu-item-indent")}if(c.rendered){c.el.addCls(a)}else{c.cls=(c.cls?c.cls:"")+" "+a.join(" ")}c.isMenuItem=true}return c},lookupItemFromString:function(a){return(a=="separator"||a=="-")?Ext.createWidget("menuseparator"):Ext.createWidget("menuitem",{canActivate:false,hideOnClick:false,plain:true,text:a})},onClick:function(c){var b=this,a;if(b.disabled){c.stopEvent();return}if((c.getTarget()==b.focusEl.dom)||c.within(b.layout.getRenderTarget())){a=b.getItemFromEvent(c)||b.activeItem;if(a){if(a.getXTypes().indexOf("menuitem")>=0){if(!a.menu||!b.ignoreParentClicks){a.onClick(c)}else{c.stopEvent()}}}b.fireEvent("click",b,a,c)}},onDestroy:function(){var a=this;Ext.menu.Manager.unregister(a);if(a.rendered){a.el.un(a.mouseMonitor);a.keyNav.destroy();delete a.keyNav}a.callParent(arguments)},onMouseLeave:function(b){var a=this;a.deactivateActiveItem();if(a.disabled){return}a.fireEvent("mouseleave",a,b)},onMouseOver:function(d){var c=this,g=d.getRelatedTarget(),a=!c.el.contains(g),b=c.getItemFromEvent(d);if(a&&c.parentMenu){c.parentMenu.setActiveItem(c.parentItem);c.parentMenu.mouseMonitor.mouseenter()}if(c.disabled){return}if(b){c.setActiveItem(b);if(b.activated&&b.expandMenu){b.expandMenu()}}if(a){c.fireEvent("mouseenter",c,d)}c.fireEvent("mouseover",c,b,d)},setActiveItem:function(b){var a=this;if(b&&(b!=a.activeItem&&b!=a.focusedItem)){a.deactivateActiveItem();if(a.canActivateItem(b)){if(b.activate){b.activate();if(b.activated){a.activeItem=b;a.focusedItem=b;a.focus()}}else{b.focus();a.focusedItem=b}}b.el.scrollIntoView(a.layout.getRenderTarget())}},showBy:function(b,g,e){var a=this,d,c;if(a.floating&&b){a.layout.autoSize=true;a.doAutoRender();delete a.needsLayout;b=b.el||b;d=a.el.getAlignToXY(b,g||a.defaultAlign,e);if(a.floatParent){c=a.floatParent.getTargetEl().getViewRegion();d[0]-=c.x;d[1]-=c.y}a.showAt(d)}return a},doConstrain:function(){var g=this,h=g.el.getY(),j,e,b,k=h,m,d,a,c;delete g.height;g.setSize();e=g.getHeight();if(g.floating){d=Ext.fly(g.el.getScopeParent());a=d.getScroll().top;c=d.getViewSize().height;m=h-a;j=g.maxHeight?g.maxHeight:c-m;if(e>c){j=c;k=h-m}else{if(j<e){k=h-(e-j);j=e}}}else{j=g.getHeight()}if(g.maxHeight){j=Math.min(g.maxHeight,j)}if(e>j&&j>0){g.layout.autoSize=false;g.setHeight(j);if(g.showSeparator){g.iconSepEl.setHeight(g.layout.getRenderTarget().dom.scrollHeight)}}b=g.getConstrainVector(g.el.getScopeParent());if(b){g.setPosition(g.getPosition()[0]+b[0])}g.el.setY(k)}});Ext.define("Ext.menu.ColorPicker",{extend:"Ext.menu.Menu",alias:"widget.colormenu",requires:["Ext.picker.Color"],hideOnClick:true,pickerId:null,initComponent:function(){var b=this,a=Ext.apply({},b.initialConfig);delete a.listeners;Ext.apply(b,{plain:true,showSeparator:false,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-color-item",id:b.pickerId,xtype:"colorpicker"},a)});b.callParent(arguments);b.picker=b.down("colorpicker");b.relayEvents(b.picker,["select"]);if(b.hideOnClick){b.on("select",b.hidePickerOnSelect,b)}},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}});Ext.define("Ext.menu.DatePicker",{extend:"Ext.menu.Menu",alias:"widget.datemenu",requires:["Ext.picker.Date"],hideOnClick:true,pickerId:null,initComponent:function(){var a=this;Ext.apply(a,{showSeparator:false,plain:true,border:false,bodyPadding:0,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-date-item",id:a.pickerId,xtype:"datepicker"},a.initialConfig)});a.callParent(arguments);a.picker=a.down("datepicker");a.relayEvents(a.picker,["select"]);if(a.hideOnClick){a.on("select",a.hidePickerOnSelect,a)}},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}});Ext.define("Ext.panel.Tool",{extend:"Ext.Component",requires:["Ext.tip.QuickTipManager"],alias:"widget.tool",baseCls:Ext.baseCSSPrefix+"tool",disabledCls:Ext.baseCSSPrefix+"tool-disabled",toolPressedCls:Ext.baseCSSPrefix+"tool-pressed",toolOverCls:Ext.baseCSSPrefix+"tool-over",ariaRole:"button",renderTpl:['<img id="{id}-toolEl" src="{blank}" class="{baseCls}-{type}" role="presentation"/>'],tooltipType:"qtip",stopEvent:true,initComponent:function(){var a=this;a.addEvents("click");a.type=a.type||a.id;Ext.applyIf(a.renderData,{baseCls:a.baseCls,blank:Ext.BLANK_IMAGE_URL,type:a.type});a.addChildEls("toolEl");a.tooltip=a.tooltip||a.qtip;a.callParent()},afterRender:function(){var b=this,a;b.callParent(arguments);if(b.tooltip){if(Ext.isObject(b.tooltip)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.id},b.tooltip))}else{a=b.tooltipType=="qtip"?"data-qtip":"title";b.toolEl.dom.setAttribute(a,b.tooltip)}}b.mon(b.toolEl,{click:b.onClick,mousedown:b.onMouseDown,mouseover:b.onMouseOver,mouseout:b.onMouseOut,scope:b})},setType:function(a){var b=this;b.type=a;if(b.rendered){b.toolEl.dom.className=b.baseCls+"-"+a}return b},bindTo:function(a){this.owner=a},onClick:function(d,c){var b=this,a;if(b.disabled){return false}a=b.owner||b.ownerCt;b.el.removeCls(b.toolPressedCls);b.el.removeCls(b.toolOverCls);if(b.stopEvent!==false){d.stopEvent()}Ext.callback(b.handler,b.scope||b,[d,c,a,b]);b.fireEvent("click",b,d);return true},onDestroy:function(){if(Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.id)}this.callParent()},onMouseDown:function(){if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}});Ext.define("Ext.resizer.Handle",{extend:"Ext.Component",handleCls:"",baseHandleCls:Ext.baseCSSPrefix+"resizable-handle",region:"",onRender:function(){this.addCls(this.baseHandleCls,this.baseHandleCls+"-"+this.region,this.handleCls);this.callParent(arguments);this.el.unselectable()}});Ext.define("Ext.resizer.Resizer",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.resizer.ResizeTracker","Ext.Component"],alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",overCls:Ext.baseCSSPrefix+"resizable-over",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},constructor:function(a){var h=this,g,n,m=h.handles,b,k,e,c=0,j;this.addEvents("beforeresize","resizedrag","resize");if(Ext.isString(a)||Ext.isElement(a)||a.dom){g=a;a=arguments[1]||{};a.target=g}h.mixins.observable.constructor.call(h,a);g=h.target;if(g){if(g.isComponent){h.el=g.getEl();if(g.minWidth){h.minWidth=g.minWidth}if(g.minHeight){h.minHeight=g.minHeight}if(g.maxWidth){h.maxWidth=g.maxWidth}if(g.maxHeight){h.maxHeight=g.maxHeight}if(g.floating){if(!this.hasOwnProperty("handles")){this.handles="n ne e se s sw w nw"}}}else{h.el=h.target=Ext.get(g)}}else{h.target=h.el=Ext.get(h.el)}n=h.el.dom.tagName;if(n=="TEXTAREA"||n=="IMG"){h.originalTarget=h.target;h.target=h.el=h.el.wrap({cls:h.wrapCls,id:h.el.id+"-rzwrap"});h.el.setPositioning(h.originalTarget.getPositioning());h.originalTarget.clearPositioning();var d=h.originalTarget.getBox();h.el.setBox(d)}h.el.position();if(h.pinned){h.el.addCls(h.pinnedCls)}h.resizeTracker=Ext.create("Ext.resizer.ResizeTracker",{disabled:h.disabled,target:h.target,constrainTo:h.constrainTo,overCls:h.overCls,throttle:h.throttle,originalTarget:h.originalTarget,delegate:"."+h.handleCls,dynamic:h.dynamic,preserveRatio:h.preserveRatio,heightIncrement:h.heightIncrement,widthIncrement:h.widthIncrement,minHeight:h.minHeight,maxHeight:h.maxHeight,minWidth:h.minWidth,maxWidth:h.maxWidth});h.resizeTracker.on("mousedown",h.onBeforeResize,h);h.resizeTracker.on("drag",h.onResize,h);h.resizeTracker.on("dragend",h.onResizeEnd,h);if(h.handles=="all"){h.handles="n s e w ne nw se sw"}m=h.handles=h.handles.split(/ |\s*?[,;]\s*?/);k=h.possiblePositions;e=m.length;b=h.handleCls+" "+(this.target.isComponent?(h.target.baseCls+"-handle "):"")+h.handleCls+"-";for(;c<e;c++){if(m[c]&&k[m[c]]){j=k[m[c]];h[j]=Ext.create("Ext.Component",{owner:this,region:j,cls:b+j,renderTo:h.el});h[j].el.unselectable();if(h.transparent){h[j].el.setOpacity(0)}}}if(Ext.isNumber(h.width)){h.width=Ext.Number.constrain(h.width,h.minWidth,h.maxWidth)}if(Ext.isNumber(h.height)){h.height=Ext.Number.constrain(h.height,h.minHeight,h.maxHeight)}if(h.width!=null||h.height!=null){if(h.originalTarget){h.originalTarget.setWidth(h.width);h.originalTarget.setHeight(h.height)}h.resizeTo(h.width,h.height)}h.forceHandlesHeight()},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(c,d){var a=this.target.getBox();return this.fireEvent("beforeresize",this,a.width,a.height,d)},onResize:function(d,g){var c=this,a=c.target.getBox();c.forceHandlesHeight();return c.fireEvent("resizedrag",c,a.width,a.height,g)},onResizeEnd:function(d,g){var c=this,a=c.target.getBox();c.forceHandlesHeight();return c.fireEvent("resize",c,a.width,a.height,g)},resizeTo:function(b,a){this.target.setSize(b,a);this.fireEvent("resize",this,b,a,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var c;for(var b=0,a=this.handles.length;b<a;b++){c=this[this.possiblePositions[this.handles[b]]];delete c.owner;Ext.destroy(c)}},forceHandlesHeight:function(){var a=this,b;if(Ext.isIE6){b=a.east;if(b){b.setHeight(a.el.getHeight())}b=a.west;if(b){b.setHeight(a.el.getHeight())}a.el.repaint()}}});Ext.define("Ext.resizer.ResizeTracker",{extend:"Ext.dd.DragTracker",dynamic:true,preserveRatio:false,constrainTo:null,proxyCls:Ext.baseCSSPrefix+"resizable-proxy",constructor:function(b){var d=this;if(!b.el){if(b.target.isComponent){d.el=b.target.getEl()}else{d.el=b.target}}this.callParent(arguments);if(d.preserveRatio&&d.minWidth&&d.minHeight){var c=d.minWidth/d.el.getWidth(),a=d.minHeight/d.el.getHeight();if(a>c){d.minWidth=d.el.getWidth()*a}else{d.minHeight=d.el.getHeight()*c}}if(d.throttle){var e=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)},d.throttle);d.resize=function(h,j,g){if(g){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)}else{e.apply(null,arguments)}}}},onBeforeStart:function(a){this.startBox=this.el.getBox()},getDynamicTarget:function(){var a=this,b=a.target;if(a.dynamic){return b}else{if(!a.proxy){a.proxy=a.createProxy(b)}}a.proxy.show();return a.proxy},createProxy:function(c){var b,a=this.proxyCls,d;if(c.isComponent){b=c.getProxy().addCls(a)}else{d=Ext.getBody();if(Ext.scopeResetCSS){d=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"reset"})}b=c.createProxy({tag:"div",cls:a,id:c.id+"-rzproxy"},d)}b.removeCls(Ext.baseCSSPrefix+"proxy-el");return b},onStart:function(a){this.activeResizeHandle=Ext.getCmp(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox,{horizontal:"none",vertical:"none"})}},onDrag:function(a){if(this.dynamic||this.proxy){this.updateDimensions(a)}},updateDimensions:function(w,p){var x=this,c=x.activeResizeHandle.region,g=x.getOffset(x.constrainTo?"dragTarget":null),m=x.startBox,h,t=0,y=0,k,u,a=0,A=0,z,q=g[0]<0?"right":"left",v=g[1]<0?"down":"up",j,b;switch(c){case"south":y=g[1];b=2;break;case"north":y=-g[1];A=-y;b=2;break;case"east":t=g[0];b=1;break;case"west":t=-g[0];a=-t;b=1;break;case"northeast":y=-g[1];A=-y;t=g[0];j=[m.x,m.y+m.height];b=3;break;case"southeast":y=g[1];t=g[0];j=[m.x,m.y];b=3;break;case"southwest":t=-g[0];a=-t;y=g[1];j=[m.x+m.width,m.y];b=3;break;case"northwest":y=-g[1];A=-y;t=-g[0];a=-t;j=[m.x+m.width,m.y+m.height];b=3;break}var d={width:m.width+t,height:m.height+y,x:m.x+a,y:m.y+A};k=Ext.Number.snap(d.width,x.widthIncrement);u=Ext.Number.snap(d.height,x.heightIncrement);if(k!=d.width||u!=d.height){switch(c){case"northeast":d.y-=u-d.height;break;case"north":d.y-=u-d.height;break;case"southwest":d.x-=k-d.width;break;case"west":d.x-=k-d.width;break;case"northwest":d.x-=k-d.width;d.y-=u-d.height}d.width=k;d.height=u}if(d.width<x.minWidth||d.width>x.maxWidth){d.width=Ext.Number.constrain(d.width,x.minWidth,x.maxWidth);if(a){d.x=m.x+(m.width-d.width)}}else{x.lastX=d.x}if(d.height<x.minHeight||d.height>x.maxHeight){d.height=Ext.Number.constrain(d.height,x.minHeight,x.maxHeight);if(A){d.y=m.y+(m.height-d.height)}}else{x.lastY=d.y}if(x.preserveRatio||w.shiftKey){var r,n;h=x.startBox.width/x.startBox.height;r=Math.min(Math.max(x.minHeight,d.width/h),x.maxHeight);n=Math.min(Math.max(x.minWidth,d.height*h),x.maxWidth);if(b==1){d.height=r}else{if(b==2){d.width=n}else{z=Math.abs(j[0]-this.lastXY[0])/Math.abs(j[1]-this.lastXY[1]);if(z>h){d.height=r}else{d.width=n}if(c=="northeast"){d.y=m.y-(d.height-m.height)}else{if(c=="northwest"){d.y=m.y-(d.height-m.height);d.x=m.x-(d.width-m.width)}else{if(c=="southwest"){d.x=m.x-(d.width-m.width)}}}}}}if(y===0){v="none"}if(t===0){q="none"}x.resize(d,{horizontal:q,vertical:v},p)},getResizeTarget:function(a){return a?this.target:this.getDynamicTarget()},resize:function(b,d,a){var c=this.getResizeTarget(a);if(c.isComponent){if(c.floating){c.setPagePosition(b.x,b.y)}c.setSize(b.width,b.height)}else{c.setBox(b);if(this.originalTarget){this.originalTarget.setBox(b)}}},onEnd:function(a){this.updateDimensions(a,true);if(this.proxy){this.proxy.hide()}}});Ext.define("Ext.resizer.SplitterTracker",{extend:"Ext.dd.DragTracker",requires:["Ext.util.Region"],enabled:true,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling()},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling()},onBeforeStart:function(h){var d=this,g=d.getPrevCmp(),a=d.getNextCmp(),c=d.getSplitter().collapseEl,b;if(c&&(h.getTarget()===d.getSplitter().collapseEl.dom)){return false}if(a.collapsed||g.collapsed){return false}b=d.overlay=Ext.getBody().createChild({cls:d.overlayCls,html:"&#160;"});b.unselectable();b.setSize(Ext.Element.getViewWidth(true),Ext.Element.getViewHeight(true));b.show();d.prevBox=g.getEl().getBox();d.nextBox=a.getEl().getBox();d.constrainTo=d.calculateConstrainRegion()},onStart:function(b){var a=this.getSplitter();a.addCls(a.baseCls+"-active")},calculateConstrainRegion:function(){var g=this,a=g.getSplitter(),h=a.getWidth(),j=a.defaultSplitMin,b=a.orientation,d=g.prevBox,k=g.getPrevCmp(),c=g.nextBox,e=g.getNextCmp(),n,m;if(b==="vertical"){n=Ext.create("Ext.util.Region",d.y,(k.maxWidth?d.x+k.maxWidth:c.right-(e.minWidth||j))+h,d.bottom,d.x+(k.minWidth||j));m=Ext.create("Ext.util.Region",c.y,c.right-(e.minWidth||j),c.bottom,(e.maxWidth?c.right-e.maxWidth:d.x+(d.minWidth||j))-h)}else{n=Ext.create("Ext.util.Region",d.y+(k.minHeight||j),d.right,(k.maxHeight?d.y+k.maxHeight:c.bottom-(e.minHeight||j))+h,d.x);m=Ext.create("Ext.util.Region",(e.maxHeight?c.bottom-e.maxHeight:d.y+(k.minHeight||j))-h,c.right,c.bottom-(e.minHeight||j),c.x)}return n.intersect(m)},performResize:function(h){var k=this,c=k.getOffset("dragTarget"),a=k.getSplitter(),d=a.orientation,m=k.getPrevCmp(),j=k.getNextCmp(),b=a.ownerCt,g=b.getLayout();b.suspendLayout=true;if(d==="vertical"){if(m){if(!m.maintainFlex){delete m.flex;m.setSize(k.prevBox.width+c[0],m.getHeight())}}if(j){if(!j.maintainFlex){delete j.flex;j.setSize(k.nextBox.width-c[0],j.getHeight())}}}else{if(m){if(!m.maintainFlex){delete m.flex;m.setSize(m.getWidth(),k.prevBox.height+c[1])}}if(j){if(!j.maintainFlex){delete j.flex;j.setSize(m.getWidth(),k.nextBox.height-c[1])}}}delete b.suspendLayout;g.onLayout()},endDrag:function(){var a=this;if(a.overlay){a.overlay.remove();delete a.overlay}a.callParent(arguments)},onEnd:function(c){var a=this,b=a.getSplitter();b.removeCls(b.baseCls+"-active");a.performResize()},onDrag:function(g){var c=this,h=c.getOffset("dragTarget"),d=c.getSplitter(),b=d.getEl(),a=d.orientation;if(a==="vertical"){b.setX(c.startRegion.left+h[0])}else{b.setY(c.startRegion.top+h[1])}},getSplitter:function(){return Ext.getCmp(this.getDragCt().id)}});Ext.define("Ext.selection.CellModel",{extend:"Ext.selection.Model",alias:"selection.cellmodel",requires:["Ext.util.KeyNav"],enableKeyNav:true,preventWrap:false,constructor:function(){this.addEvents("deselect","select");this.callParent(arguments)},bindComponent:function(a){var b=this;b.primaryView=a;b.views=b.views||[];b.views.push(a);b.bind(a.getStore(),true);a.on({cellmousedown:b.onMouseDown,refresh:b.onViewRefresh,scope:b});if(b.enableKeyNav){b.initKeyNav(a)}},initKeyNav:function(a){var b=this;if(!a.rendered){a.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}a.el.set({tabIndex:-1});b.keyNav=Ext.create("Ext.util.KeyNav",a.el,{up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,tab:b.onKeyTab,scope:b})},getHeaderCt:function(){return this.primaryView.headerCt},onKeyUp:function(b,a){this.move("up",b)},onKeyDown:function(b,a){this.move("down",b)},onKeyLeft:function(b,a){this.move("left",b)},onKeyRight:function(b,a){this.move("right",b)},move:function(a,c){var b=this,d=b.primaryView.walkCells(b.getCurrentPosition(),a,c,b.preventWrap);if(d){b.setCurrentPosition(d)}return d},getCurrentPosition:function(){return this.position},setCurrentPosition:function(b){var a=this;if(a.position){a.onCellDeselect(a.position)}if(b){a.onCellSelect(b)}a.position=b},onMouseDown:function(c,a,d,b,h,j,g){this.setCurrentPosition({row:j,column:d})},onCellSelect:function(a){var d=this,c=d.view.getStore(),b=c.getAt(a.row);d.doSelect(b);d.primaryView.onCellSelect(a);d.primaryView.onCellFocus(a);d.fireEvent("select",d,b,a.row,a.column)},onCellDeselect:function(a){var d=this,c=d.view.getStore(),b=c.getAt(a.row);d.doDeselect(b);d.primaryView.onCellDeselect(a);d.fireEvent("deselect",d,b,a.row,a.column)},onKeyTab:function(h,c){var d=this,g=h.shiftKey?"left":"right",b=d.view.editingPlugin,a=d.move(g,h);if(b&&a&&d.wasEditing){b.startEditByPosition(a)}delete d.wasEditing},onEditorTab:function(b,g){var c=this,d=g.shiftKey?"left":"right",a=c.move(d,g);if(a){b.startEditByPosition(a);c.wasEditing=true}},refresh:function(){var a=this.getCurrentPosition();if(a){this.onCellSelect(a)}},onViewRefresh:function(){var a=this.getCurrentPosition();if(a){this.onCellDeselect(a);this.setCurrentPosition(null)}},selectByPosition:function(a){this.setCurrentPosition(a)}});Ext.define("Ext.selection.RowModel",{extend:"Ext.selection.Model",alias:"selection.rowmodel",requires:["Ext.util.KeyNav"],deltaScroll:5,enableKeyNav:true,ignoreRightMouseSelection:true,constructor:function(){this.addEvents("beforedeselect","beforeselect","deselect","select");this.callParent(arguments)},bindComponent:function(a){var b=this;b.views=b.views||[];b.views.push(a);b.bind(a.getStore(),true);a.on({itemmousedown:b.onRowMouseDown,scope:b});if(b.enableKeyNav){b.initKeyNav(a)}},initKeyNav:function(a){var b=this;if(!a.rendered){a.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}a.el.set({tabIndex:-1});b.keyNav=new Ext.util.KeyNav(a.el,{up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,scope:b});a.el.on(Ext.EventManager.getKeyEvent(),b.onKeyPress,b)},getRowsVisible:function(){var e=false,a=this.views[0],d=a.getNode(0),b,c;if(d){b=Ext.fly(d).getHeight();c=a.el.getHeight();e=Math.floor(c/b)}return e},onKeyEnd:function(d,a){var c=this,b=c.store.getAt(c.store.getCount()-1);if(b){if(d.shiftKey){c.selectRange(b,c.lastFocused||0);c.setLastFocused(b)}else{if(d.ctrlKey){c.setLastFocused(b)}else{c.doSelect(b)}}}},onKeyHome:function(c,a){var b=this,d=b.store.getAt(0);if(d){if(c.shiftKey){b.selectRange(d,b.lastFocused||0);b.setLastFocused(d)}else{if(c.ctrlKey){b.setLastFocused(d)}else{b.doSelect(d,false)}}}},onKeyPageUp:function(j,d){var h=this,k=h.getRowsVisible(),b,c,a,g;if(k){b=h.lastFocused?h.store.indexOf(h.lastFocused):0;c=b-k;if(c<0){c=0}a=h.store.getAt(c);if(j.shiftKey){g=h.store.getAt(b);h.selectRange(a,g,j.ctrlKey,"up");h.setLastFocused(a)}else{if(j.ctrlKey){j.preventDefault();h.setLastFocused(a)}else{h.doSelect(a)}}}},onKeyPageDown:function(j,b){var g=this,k=g.getRowsVisible(),a,h,d,c;if(k){a=g.lastFocused?g.store.indexOf(g.lastFocused):0;h=a+k;if(h>=g.store.getCount()){h=g.store.getCount()-1}d=g.store.getAt(h);if(j.shiftKey){c=g.store.getAt(a);g.selectRange(d,c,j.ctrlKey,"down");g.setLastFocused(d)}else{if(j.ctrlKey){j.preventDefault();g.setLastFocused(d)}else{g.doSelect(d)}}}},onKeyPress:function(d,b){if(d.getKey()===d.SPACE){d.stopEvent();var c=this,a=c.lastFocused;if(a){if(c.isSelected(a)){c.doDeselect(a,false)}else{c.doSelect(a,true)}}}},onKeyUp:function(h,d){var g=this,c=g.views[0],a=g.store.indexOf(g.lastFocused),b;if(a>0){b=g.store.getAt(a-1);if(h.shiftKey&&g.lastFocused){if(g.isSelected(g.lastFocused)&&g.isSelected(b)){g.doDeselect(g.lastFocused,true);g.setLastFocused(b)}else{if(!g.isSelected(g.lastFocused)){g.doSelect(g.lastFocused,true);g.doSelect(b,true)}else{g.doSelect(b,true)}}}else{if(h.ctrlKey){g.setLastFocused(b)}else{g.doSelect(b)}}}},onKeyDown:function(h,d){var g=this,c=g.views[0],a=g.store.indexOf(g.lastFocused),b;if(a+1<g.store.getCount()){b=g.store.getAt(a+1);if(g.selected.getCount()===0){g.doSelect(b)}else{if(h.shiftKey&&g.lastFocused){if(g.isSelected(g.lastFocused)&&g.isSelected(b)){g.doDeselect(g.lastFocused,true);g.setLastFocused(b)}else{if(!g.isSelected(g.lastFocused)){g.doSelect(g.lastFocused,true);g.doSelect(b,true)}else{g.doSelect(b,true)}}}else{if(h.ctrlKey){g.setLastFocused(b)}else{g.doSelect(b)}}}}},scrollByDeltaX:function(d){var a=this.views[0],c=a.up(),b=c.horizontalScroller;if(b){b.scrollByDeltaX(d)}},onKeyLeft:function(b,a){this.scrollByDeltaX(-this.deltaScroll)},onKeyRight:function(b,a){this.scrollByDeltaX(this.deltaScroll)},onRowMouseDown:function(b,a,d,c,g){b.el.focus();if(!this.allowRightMouseSelection(g)){return}this.selectWithEvent(a,g)},allowRightMouseSelection:function(a){var b=this.ignoreRightMouseSelection&&a.button!==0;if(b){b=this.hasSelection()}return !b},onSelectChange:function(g,c,m,a){var j=this,n=j.views,d=n.length,k=j.store,b=k.indexOf(g),h=c?"select":"deselect",e=0;if((m||j.fireEvent("before"+h,j,g,b))!==false&&a()!==false){for(;e<d;e++){if(c){n[e].onRowSelect(b,m)}else{n[e].onRowDeselect(b,m)}}if(!m){j.fireEvent(h,j,g,b)}}},onLastFocusChanged:function(j,d,b){var a=this.views,h=a.length,c=this.store,g,e=0;if(j){g=c.indexOf(j);if(g!=-1){for(;e<h;e++){a[e].onRowFocus(g,false)}}}if(d){g=c.indexOf(d);if(g!=-1){for(e=0;e<h;e++){a[e].onRowFocus(g,true,b)}}}},onEditorTab:function(j,g){var h=this,k=h.views[0],c=j.getActiveRecord(),b=j.getActiveColumn(),d=k.getPosition(c,b),m=g.shiftKey?"left":"right",a=k.walkCells(d,m,g,this.preventWrap);if(a){j.startEditByPosition(a)}},selectByPosition:function(a){var b=this.store.getAt(a.row);this.select(b)}});Ext.define("Ext.selection.CheckboxModel",{alias:"selection.checkboxmodel",extend:"Ext.selection.RowModel",mode:"MULTI",injectCheckbox:0,checkOnly:false,headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",bindComponent:function(a){var b=this;b.sortable=false;b.callParent(arguments);if(!b.hasLockedHeader()||a.headerCt.lockedCt){a.headerCt.on("headerclick",b.onHeaderClick,b);b.addCheckbox(true);b.mon(a.ownerCt,"reconfigure",b.addCheckbox,b)}},hasLockedHeader:function(){var a=false;Ext.each(this.views,function(b){if(b.headerCt.lockedCt){a=true;return false}});return a},addCheckbox:function(b){var c=this,d=c.injectCheckbox,a=c.views[0],e=a.headerCt;if(d!==false){if(d=="first"){d=0}else{if(d=="last"){d=e.getColumnCount()}}e.add(d,c.getHeaderConfig())}if(b!==true){a.refresh()}},toggleUiHeader:function(d){var a=this.views[0],c=a.headerCt,b=c.child("gridcolumn[isCheckerHd]");if(b){if(d){b.el.addCls(this.checkerOnCls)}else{b.el.removeCls(this.checkerOnCls)}}},onHeaderClick:function(b,d,a){if(d.isCheckerHd){a.stopEvent();var c=d.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on");if(c){this.deselectAll(true)}else{this.selectAll(true)}}},getHeaderConfig:function(){var a=this;return{isCheckerHd:true,text:"&#160;",width:a.headerWidth,sortable:false,draggable:false,resizable:false,hideable:false,menuDisabled:true,dataIndex:"",cls:Ext.baseCSSPrefix+"column-header-checkbox ",renderer:Ext.Function.bind(a.renderer,a),locked:a.hasLockedHeader()}},renderer:function(g,c,b,h,e,d,a){c.tdCls=Ext.baseCSSPrefix+"grid-cell-special";return'<div class="'+Ext.baseCSSPrefix+'grid-row-checker">&#160;</div>'},onRowMouseDown:function(b,a,h,d,j){b.el.focus();var g=this,c=j.getTarget("."+Ext.baseCSSPrefix+"grid-row-checker");if(!g.allowRightMouseSelection(j)){return}if(g.checkOnly&&!c){return}if(c){var k=g.getSelectionMode();if(k!=="SINGLE"){g.setSelectionMode("SIMPLE")}g.selectWithEvent(a,j);g.setSelectionMode(k)}else{g.selectWithEvent(a,j)}},onSelectChange:function(){this.callParent(arguments);var a=this.selected.getCount()===this.store.getCount();this.toggleUiHeader(a)}});Ext.define("Ext.selection.TreeModel",{extend:"Ext.selection.RowModel",alias:"selection.treemodel",pruneRemoved:false,onKeyRight:function(d,b){var c=this.getLastFocused(),a=this.view;if(c){if(c.isExpanded()){this.onKeyDown(d,b)}else{if(!c.isLeaf()){a.expand(c)}}}},onKeyLeft:function(j,d){var h=this.getLastFocused(),c=this.view,b=c.getSelectionModel(),a,g;if(h){a=h.parentNode;if(h.isExpanded()){c.collapse(h)}else{if(a&&!a.isRoot()){if(j.shiftKey){b.selectRange(a,h,j.ctrlKey,"up");b.setLastFocused(a)}else{if(j.ctrlKey){b.setLastFocused(a)}else{b.select(a)}}}}}},onKeyPress:function(g,b){var a=g.getKey(),c,d;if(a===g.SPACE||a===g.ENTER){g.stopEvent();c=this.getLastSelected();if(c){this.view.onCheckChange(c)}}else{this.callParent(arguments)}}});Ext.define("Ext.slider.Thumb",{requires:["Ext.dd.DragTracker","Ext.util.Format"],topZIndex:10000,constructor:function(a){var b=this;Ext.apply(b,a||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:false});b.callParent([a]);if(b.slider.vertical){Ext.apply(b,Ext.slider.Thumb.Vertical)}},render:function(){var a=this;a.el=a.slider.innerEl.insertFirst({cls:a.cls});if(a.disabled){a.disable()}a.initEvents()},move:function(b,a){if(!a){this.el.setLeft(b)}else{Ext.create("Ext.fx.Anim",{target:this.el,duration:350,to:{left:b}})}},bringToFront:function(){this.el.setStyle("zIndex",this.topZIndex)},sendToBack:function(){this.el.setStyle("zIndex","")},enable:function(){var a=this;a.disabled=false;if(a.el){a.el.removeCls(a.slider.disabledCls)}},disable:function(){var a=this;a.disabled=true;if(a.el){a.el.addCls(a.slider.disabledCls)}},initEvents:function(){var b=this,a=b.el;b.tracker=Ext.create("Ext.dd.DragTracker",{onBeforeStart:Ext.Function.bind(b.onBeforeDragStart,b),onStart:Ext.Function.bind(b.onDragStart,b),onDrag:Ext.Function.bind(b.onDrag,b),onEnd:Ext.Function.bind(b.onDragEnd,b),tolerance:3,autoStart:300,overCls:Ext.baseCSSPrefix+"slider-thumb-over"});b.tracker.initEl(a)},onBeforeDragStart:function(a){if(this.disabled){return false}else{this.slider.promoteThumb(this);return true}},onDragStart:function(b){var a=this;a.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag");a.dragging=true;a.dragStartValue=a.value;a.slider.fireEvent("dragstart",a.slider,b,a)},onDrag:function(h){var d=this,c=d.slider,b=d.index,g=d.getNewValue(),a,j;if(d.constrain){a=c.thumbs[b+1];j=c.thumbs[b-1];if(j!==undefined&&g<=j.value){g=j.value}if(a!==undefined&&g>=a.value){g=a.value}}c.setValue(b,g,false);c.fireEvent("drag",c,h,d)},getNewValue:function(){var a=this.slider,b=a.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(a.reverseValue(b.left),a.decimalPrecision)},onDragEnd:function(d){var b=this,a=b.slider,c=b.value;b.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag");b.dragging=false;a.fireEvent("dragend",a,d);if(b.dragStartValue!=c){a.fireEvent("changecomplete",a,c,b)}},destroy:function(){Ext.destroy(this.tracker)},statics:{Vertical:{getNewValue:function(){var b=this.slider,c=b.innerEl,d=c.translatePoints(this.tracker.getXY()),a=c.getHeight()-d.top;return Ext.util.Format.round(b.reverseValue(a),b.decimalPrecision)},move:function(b,a){if(!a){this.el.setBottom(b)}else{Ext.create("Ext.fx.Anim",{target:this.el,duration:350,to:{bottom:b}})}}}}});Ext.define("Ext.slider.Tip",{extend:"Ext.tip.Tip",minWidth:10,alias:"widget.slidertip",offsets:[0,-10],isSliderTip:true,init:function(b){var a=this;b.on({scope:a,dragstart:a.onSlide,drag:a.onSlide,dragend:a.hide,destroy:a.destroy})},onSlide:function(c,d,a){var b=this;b.show();b.update(b.getText(a));b.doComponentLayout();b.el.alignTo(a.el,"b-t?",b.offsets)},getText:function(a){return String(a.value)}});Ext.define("Ext.slider.Multi",{extend:"Ext.form.field.Base",alias:"widget.multislider",alternateClassName:"Ext.slider.MultiSlider",requires:["Ext.slider.Thumb","Ext.slider.Tip","Ext.Number","Ext.util.Format","Ext.Template","Ext.layout.component.field.Slider"],fieldSubTpl:['<div id="{id}" class="'+Ext.baseCSSPrefix+'slider {fieldCls} {vertical}" aria-valuemin="{minValue}" aria-valuemax="{maxValue}" aria-valuenow="{value}" aria-valuetext="{value}">','<div id="{cmpId}-endEl" class="'+Ext.baseCSSPrefix+'slider-end" role="presentation">','<div id="{cmpId}-innerEl" class="'+Ext.baseCSSPrefix+'slider-inner" role="presentation">','<a id="{cmpId}-focusEl" class="'+Ext.baseCSSPrefix+'slider-focus" href="#" tabIndex="-1" hidefocus="on" role="presentation"></a>',"</div>","</div>","</div>",{disableFormats:true,compiled:true}],vertical:false,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,dragging:false,constrainThumbs:true,componentLayout:"sliderfield",useTips:true,tipText:null,ariaRole:"slider",initValue:function(){var e=this,c=Ext.value,b=c(e.values,[c(e.value,c(e.minValue,0))]),d=0,a=b.length;e.originalValue=b;for(;d<a;d++){e.addThumb(b[d])}},initComponent:function(){var c=this,a,b;c.thumbs=[];c.keyIncrement=Math.max(c.increment,c.keyIncrement);c.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend");if(c.vertical){Ext.apply(c,Ext.slider.Multi.Vertical)}c.callParent();if(c.useTips){a=c.tipText?{getText:c.tipText}:{};c.plugins=c.plugins||[];Ext.each(c.plugins,function(d){if(d.isSliderTip){b=true;return false}});if(!b){c.plugins.push(Ext.create("Ext.slider.Tip",a))}}},addThumb:function(c){var b=this,a=Ext.create("Ext.slider.Thumb",{value:c,slider:b,index:b.thumbs.length,constrain:b.constrainThumbs});b.thumbs.push(a);if(b.rendered){a.render()}return a},promoteThumb:function(c){var a=this.thumbs,e=a.length,g,b,d;for(d=0;d<e;d++){b=a[d];if(b==c){b.bringToFront()}else{b.sendToBack()}}},onRender:function(){var e=this,d=0,b=e.thumbs,a=b.length,c;Ext.applyIf(e.subTplData,{vertical:e.vertical?Ext.baseCSSPrefix+"slider-vert":Ext.baseCSSPrefix+"slider-horz",minValue:e.minValue,maxValue:e.maxValue,value:e.value});e.addChildEls("endEl","innerEl","focusEl");e.callParent(arguments);for(;d<a;d++){b[d].render()}c=e.innerEl.down("."+Ext.baseCSSPrefix+"slider-thumb");e.halfThumb=(e.vertical?c.getHeight():c.getWidth())/2},onChange:function(b,a){this.setValue(a,undefined,true)},initEvents:function(){var a=this;a.mon(a.el,{scope:a,mousedown:a.onMouseDown,keydown:a.onKeyDown,change:a.onChange});a.focusEl.swallowEvent("click",true)},onMouseDown:function(j){var g=this,h=false,d=0,b=g.thumbs,a=b.length,c;if(g.disabled){return}for(;d<a;d++){h=h||j.target==b[d].el.dom}if(g.clickToChange&&!h){c=g.innerEl.translatePoints(j.getXY());g.onClickChange(c)}g.focus()},onClickChange:function(c){var d=this,a,b;if(c.top>d.clickRange[0]&&c.top<d.clickRange[1]){a=d.getNearest(c,"left");if(!a.disabled){b=a.index;d.setValue(b,Ext.util.Format.round(d.reverseValue(c.left),d.decimalPrecision),undefined,true)}}},getNearest:function(p,b){var m=this,r=b=="top"?m.innerEl.getHeight()-p[b]:p[b],j=m.reverseValue(r),n=(m.maxValue-m.minValue)+5,g=0,c=null,h=m.thumbs,d=0,e=h.length,a,q,k;for(;d<e;d++){a=m.thumbs[d];q=a.value;k=Math.abs(q-j);if(Math.abs(k<=n)){c=a;g=d;n=k}}return c},onKeyDown:function(c){var b=this,a,d;if(b.disabled||b.thumbs.length!==1){c.preventDefault();return}a=c.getKey();switch(a){case c.UP:case c.RIGHT:c.stopEvent();d=c.ctrlKey?b.maxValue:b.getValue(0)+b.keyIncrement;b.setValue(0,d,undefined,true);break;case c.DOWN:case c.LEFT:c.stopEvent();d=c.ctrlKey?b.minValue:b.getValue(0)-b.keyIncrement;b.setValue(0,d,undefined,true);break;default:c.preventDefault()}},afterRender:function(){var g=this,e=0,b=g.thumbs,a=b.length,d,c;g.callParent(arguments);for(;e<a;e++){d=b[e];if(d.value!==undefined){c=g.normalizeValue(d.value);if(c!==d.value){g.setValue(e,c,false)}else{d.move(g.translateValue(c),false)}}}},getRatio:function(){var a=this.innerEl.getWidth(),b=this.maxValue-this.minValue;return b===0?a:(a/b)},normalizeValue:function(a){var b=this;a=Ext.Number.snap(a,this.increment,this.minValue,this.maxValue);a=Ext.util.Format.round(a,b.decimalPrecision);a=Ext.Number.constrain(a,b.minValue,b.maxValue);return a},setMinValue:function(g){var e=this,d=0,b=e.thumbs,a=b.length,c;e.minValue=g;if(e.rendered){e.inputEl.dom.setAttribute("aria-valuemin",g)}for(;d<a;++d){c=b[d];c.value=c.value<g?g:c.value}e.syncThumbs()},setMaxValue:function(g){var e=this,d=0,b=e.thumbs,a=b.length,c;e.maxValue=g;if(e.rendered){e.inputEl.dom.setAttribute("aria-valuemax",g)}for(;d<a;++d){c=b[d];c.value=c.value>g?g:c.value}e.syncThumbs()},setValue:function(c,g,b,e){var d=this,a=d.thumbs[c];g=d.normalizeValue(g);if(g!==a.value&&d.fireEvent("beforechange",d,g,a.value,a)!==false){a.value=g;if(d.rendered){d.inputEl.set({"aria-valuenow":g,"aria-valuetext":g});a.move(d.translateValue(g),Ext.isDefined(b)?b!==false:d.animate);d.fireEvent("change",d,g,a);if(e){d.fireEvent("changecomplete",d,g,a)}}}},translateValue:function(a){var b=this.getRatio();return(a*b)-(this.minValue*b)-this.halfThumb},reverseValue:function(b){var a=this.getRatio();return(b+(this.minValue*a))/a},focus:function(){this.focusEl.focus(10)},onDisable:function(){var g=this,d=0,b=g.thumbs,a=b.length,c,e,h;g.callParent();for(;d<a;d++){c=b[d];e=c.el;c.disable();if(Ext.isIE){h=e.getXY();e.hide();g.innerEl.addCls(g.disabledCls).dom.disabled=true;if(!g.thumbHolder){g.thumbHolder=g.endEl.createChild({cls:Ext.baseCSSPrefix+"slider-thumb "+g.disabledCls})}g.thumbHolder.show().setXY(h)}}},onEnable:function(){var g=this,d=0,b=g.thumbs,a=b.length,c,e;this.callParent();for(;d<a;d++){c=b[d];e=c.el;c.enable();if(Ext.isIE){g.innerEl.removeCls(g.disabledCls).dom.disabled=false;if(g.thumbHolder){g.thumbHolder.hide()}e.show();g.syncThumbs()}}},syncThumbs:function(){if(this.rendered){var a=this.thumbs,c=a.length,b=0;for(;b<c;b++){a[b].move(this.translateValue(a[b].value))}}},getValue:function(a){return Ext.isNumber(a)?this.thumbs[a].value:this.getValues()},getValues:function(){var c=[],d=0,b=this.thumbs,a=b.length;for(;d<a;d++){c.push(b[d].value)}return c},getSubmitValue:function(){var a=this;return(a.disabled||!a.submitValue)?null:a.getValue()},reset:function(){var b=this,a=Ext.Array;a.forEach(a.from(b.originalValue),function(d,c){b.setValue(c,d)});b.clearInvalid();delete b.wasValid},beforeDestroy:function(){var a=this;Ext.destroy(a.innerEl,a.endEl,a.focusEl);Ext.each(a.thumbs,function(b){Ext.destroy(b)},a);a.callParent()},statics:{Vertical:{getRatio:function(){var b=this.innerEl.getHeight(),a=this.maxValue-this.minValue;return b/a},onClickChange:function(d){var e=this,b,c,a;if(d.left>e.clickRange[0]&&d.left<e.clickRange[1]){b=e.getNearest(d,"top");if(!b.disabled){c=b.index;a=e.reverseValue(e.innerEl.getHeight()-d.top);e.setValue(c,Ext.util.Format.round(e.minValue+a,e.decimalPrecision),undefined,true)}}}}}});Ext.define("Ext.slider.Single",{extend:"Ext.slider.Multi",alias:["widget.slider","widget.sliderfield"],alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider","Ext.slider.Slider"],getValue:function(){return this.callParent([0])},setValue:function(d,b){var c=Ext.toArray(arguments),a=c.length;if(a==1||(a<=3&&typeof arguments[1]!="number")){c.unshift(0)}return this.callParent(c)},getNearest:function(){return this.thumbs[0]}});Ext.define("Ext.tab.Tab",{extend:"Ext.button.Button",alias:"widget.tab",requires:["Ext.layout.component.Tab","Ext.util.KeyNav"],componentLayout:"tab",isTab:true,baseCls:Ext.baseCSSPrefix+"tab",activeCls:"active",closableCls:"closable",closable:true,closeText:"Close Tab",active:false,scale:false,position:"top",initComponent:function(){var a=this;a.addEvents("activate","deactivate","beforeclose","close");a.callParent(arguments);if(a.card){a.setCard(a.card)}},onRender:function(){var b=this,a=b.up("tabbar"),c=b.up("tabpanel");b.addClsWithUI(b.position);b.syncClosableUI();if(!b.minWidth){b.minWidth=(a)?a.minTabWidth:b.minWidth;if(!b.minWidth&&c){b.minWidth=c.minTabWidth}if(b.minWidth&&b.iconCls){b.minWidth+=25}}if(!b.maxWidth){b.maxWidth=(a)?a.maxTabWidth:b.maxWidth;if(!b.maxWidth&&c){b.maxWidth=c.maxTabWidth}}b.callParent(arguments);if(b.active){b.activate(true)}b.syncClosableElements();b.keyNav=Ext.create("Ext.util.KeyNav",b.el,{enter:b.onEnterKey,del:b.onDeleteKey,scope:b})},enable:function(a){var b=this;b.callParent(arguments);b.removeClsWithUI(b.position+"-disabled");return b},disable:function(a){var b=this;b.callParent(arguments);b.addClsWithUI(b.position+"-disabled");return b},onDestroy:function(){var a=this;if(a.closeEl){a.closeEl.un("click",Ext.EventManager.preventDefault);a.closeEl=null}Ext.destroy(a.keyNav);delete a.keyNav;a.callParent(arguments)},setClosable:function(a){var b=this;a=(!arguments.length||!!a);if(b.closable!=a){b.closable=a;if(b.card){b.card.closable=a}b.syncClosableUI();if(b.rendered){b.syncClosableElements();b.doComponentLayout();if(b.ownerCt){b.ownerCt.doLayout()}}}},syncClosableElements:function(){var a=this;if(a.closable){if(!a.closeEl){a.closeEl=a.el.createChild({tag:"a",cls:a.baseCls+"-close-btn",href:"#",title:a.closeText}).on("click",Ext.EventManager.preventDefault)}}else{var b=a.closeEl;if(b){b.un("click",Ext.EventManager.preventDefault);b.remove();a.closeEl=null}}},syncClosableUI:function(){var b=this,a=[b.closableCls,b.closableCls+"-"+b.position];if(b.closable){b.addClsWithUI(a)}else{b.removeClsWithUI(a)}},setCard:function(a){var b=this;b.card=a;b.setText(b.title||a.title);b.setIconCls(b.iconCls||a.iconCls)},onCloseClick:function(){var a=this;if(a.fireEvent("beforeclose",a)!==false){if(a.tabBar){if(a.tabBar.closeTab(a)===false){return}}else{a.fireEvent("close",a)}}},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(b){var a=this;if(a.tabBar){a.tabBar.onClick(b,a.el)}},onDeleteKey:function(b){var a=this;if(a.closable){a.onCloseClick()}},activate:function(b){var a=this;a.active=true;a.addClsWithUI([a.activeCls,a.position+"-"+a.activeCls]);if(b!==true){a.fireEvent("activate",a)}},deactivate:function(b){var a=this;a.active=false;a.removeClsWithUI([a.activeCls,a.position+"-"+a.activeCls]);if(b!==true){a.fireEvent("deactivate",a)}}});Ext.define("Ext.tab.Bar",{extend:"Ext.panel.Header",alias:"widget.tabbar",baseCls:Ext.baseCSSPrefix+"tab-bar",requires:["Ext.tab.Tab","Ext.FocusManager"],isTabBar:true,defaultType:"tab",plain:false,renderTpl:['<div id="{id}-body" class="{baseCls}-body <tpl if="bodyCls"> {bodyCls}</tpl> <tpl if="ui"> {baseCls}-body-{ui}<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl></tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>','<div id="{id}-strip" class="{baseCls}-strip<tpl if="ui"> {baseCls}-strip-{ui}<tpl for="uiCls"> {parent.baseCls}-strip-{parent.ui}-{.}</tpl></tpl>"></div>'],initComponent:function(){var b=this,a;if(b.plain){b.setUI(b.ui+"-plain")}b.addClsWithUI(b.dock);b.addEvents("change");b.addChildEls("body","strip");b.callParent(arguments);b.layout.align=(b.orientation=="vertical")?"left":"top";b.layout.overflowHandler=Ext.create("Ext.layout.container.boxOverflow.Scroller",b.layout);b.remove(b.titleCmp);delete b.titleCmp;a=b.orientation=="vertical"?["up","down"]:["left","right"];Ext.FocusManager.subscribe(b,{keys:a});Ext.apply(b.renderData,{bodyCls:b.bodyCls})},onAdd:function(a){a.position=this.dock;this.callParent(arguments)},onRemove:function(a){var b=this;if(a===b.previousTab){b.previousTab=null}if(b.items.getCount()===0){b.activeTab=null}b.callParent(arguments)},afterRender:function(){var a=this;a.mon(a.el,{scope:a,click:a.onClick,delegate:"."+Ext.baseCSSPrefix+"tab"});a.callParent(arguments)},afterComponentLayout:function(){var a=this;a.callParent(arguments);a.strip.setWidth(a.el.getWidth())},onClick:function(c,b){var a=Ext.getCmp(b.id),d=this.tabPanel;b=c.getTarget();if(a&&a.isDisabled&&!a.isDisabled()){if(a.closable&&b===a.closeEl.dom){a.onCloseClick()}else{if(d){d.setActiveTab(a.card)}else{this.setActiveTab(a)}a.focus()}}},closeTab:function(c){var d=this,b=c.card,e=d.tabPanel,a;if(b&&b.fireEvent("beforeclose",b)===false){return false}if(c.active&&d.items.getCount()>1){a=d.previousTab||c.next("tab")||d.items.first();d.setActiveTab(a);if(e){e.setActiveTab(a.card)}}c.fireClose();d.remove(c);if(e&&b){b.fireEvent("close",b);e.remove(b)}if(a){a.focus()}},setActiveTab:function(a){if(a.disabled){return}var b=this;if(b.activeTab){b.previousTab=b.activeTab;b.activeTab.deactivate()}a.activate();if(b.rendered){b.layout.layout();a.el&&a.el.scrollIntoView(b.layout.getRenderTarget())}b.activeTab=a;b.fireEvent("change",b,a,a.card)}});Ext.define("Ext.tab.Panel",{extend:"Ext.panel.Panel",alias:"widget.tabpanel",alternateClassName:["Ext.TabPanel"],requires:["Ext.layout.container.Card","Ext.tab.Bar"],tabPosition:"top",removePanelHeader:true,plain:false,itemCls:"x-tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:true,initComponent:function(){var c=this,b=c.dockedItems||[],a=c.activeTab||0;c.layout=Ext.create("Ext.layout.container.Card",Ext.apply({owner:c,deferredRender:c.deferredRender,itemCls:c.itemCls},c.layout));c.tabBar=Ext.create("Ext.tab.Bar",Ext.apply({},c.tabBar,{dock:c.tabPosition,plain:c.plain,border:c.border,cardLayout:c.layout,tabPanel:c}));if(b&&!Ext.isArray(b)){b=[b]}b.push(c.tabBar);c.dockedItems=b;c.addEvents("beforetabchange","tabchange");c.callParent(arguments);c.setActiveTab(a);c.on("afterlayout",c.afterInitialLayout,c,{single:true})},afterInitialLayout:function(){var b=this,a=b.getComponent(b.activeTab);if(a){b.layout.setActiveItem(a)}},setActiveTab:function(a){var c=this,b;a=c.getComponent(a);if(a){b=c.getActiveTab();if(b&&b!==a&&c.fireEvent("beforetabchange",c,a,b)===false){return false}c.tabBar.setActiveTab(a.tab);c.activeTab=a;if(c.rendered){c.layout.setActiveItem(a)}if(b&&b!==a){c.fireEvent("tabchange",c,a,b)}}},getActiveTab:function(){return this.activeTab},getTabBar:function(){return this.tabBar},onAdd:function(e,c){var d=this,b=e.tabConfig||{},a={xtype:"tab",card:e,disabled:e.disabled,closable:e.closable,hidden:e.hidden,tabBar:d.tabBar};if(e.closeText){a.closeText=e.closeText}b=Ext.applyIf(b,a);e.tab=d.tabBar.insert(c,b);e.on({scope:d,enable:d.onItemEnable,disable:d.onItemDisable,beforeshow:d.onItemBeforeShow,iconchange:d.onItemIconChange,titlechange:d.onItemTitleChange});if(e.isPanel){if(d.removePanelHeader){e.preventHeader=true;if(e.rendered){e.updateHeader()}}if(e.isPanel&&d.border){e.setBorder(false)}}if(this.rendered&&d.items.getCount()===1){d.setActiveTab(0)}},onItemEnable:function(a){a.tab.enable()},onItemDisable:function(a){a.tab.disable()},onItemBeforeShow:function(a){if(a!==this.activeTab){this.setActiveTab(a);return false}},onItemIconChange:function(b,a){b.tab.setIconCls(a);this.getTabBar().doLayout()},onItemTitleChange:function(a,b){a.tab.setText(b);this.getTabBar().doLayout()},doRemove:function(d,b){var c=this,a=c.items,e=a.getCount()>1;if(c.destroying||!e){c.activeTab=null}else{if(d===c.activeTab){c.setActiveTab(d.next()||a.getAt(0))}}c.callParent(arguments);delete d.tab.card;delete d.tab},onRemove:function(c,a){var b=this;c.un({scope:b,enable:b.onItemEnable,disable:b.onItemDisable,beforeshow:b.onItemBeforeShow});if(!b.destroying&&c.tab.ownerCt==b.tabBar){b.tabBar.remove(c.tab)}}});Ext.define("Ext.toolbar.Spacer",{extend:"Ext.Component",alias:"widget.tbspacer",alternateClassName:"Ext.Toolbar.Spacer",baseCls:Ext.baseCSSPrefix+"toolbar-spacer",focusable:false});Ext.define("Ext.tree.Column",{extend:"Ext.grid.column.Column",alias:"widget.treecolumn",initComponent:function(){var a=this.renderer||this.defaultRenderer,b=this.scope||window;this.renderer=function(p,r,e,d,n,h,m){var w=[],u=Ext.String.format,y=e.getDepth(),v=Ext.baseCSSPrefix+"tree-",g=v+"elbow-",q=v+"expander",k='<img src="{1}" class="{0}" />',z='<input type="button" role="checkbox" class="{0}" {1} />',j=a.apply(b,arguments),t=e.get("href"),x=e.get("hrefTarget"),c=e.get("cls");while(e){if(!e.isRoot()||(e.isRoot()&&m.rootVisible)){if(e.getDepth()===y){w.unshift(u(k,v+"icon "+v+"icon"+(e.get("icon")?"-inline ":(e.isLeaf()?"-leaf ":"-parent "))+(e.get("iconCls")||""),e.get("icon")||Ext.BLANK_IMAGE_URL));if(e.get("checked")!==null){w.unshift(u(z,(v+"checkbox")+(e.get("checked")?" "+v+"checkbox-checked":""),e.get("checked")?'aria-checked="true"':""));if(e.get("checked")){r.tdCls+=(" "+v+"checked")}}if(e.isLast()){if(e.isExpandable()){w.unshift(u(k,(g+"end-plus "+q),Ext.BLANK_IMAGE_URL))}else{w.unshift(u(k,(g+"end"),Ext.BLANK_IMAGE_URL))}}else{if(e.isExpandable()){w.unshift(u(k,(g+"plus "+q),Ext.BLANK_IMAGE_URL))}else{w.unshift(u(k,(v+"elbow"),Ext.BLANK_IMAGE_URL))}}}else{if(e.isLast()||e.getDepth()===0){w.unshift(u(k,(g+"empty"),Ext.BLANK_IMAGE_URL))}else{if(e.getDepth()!==0){w.unshift(u(k,(g+"line"),Ext.BLANK_IMAGE_URL))}}}}e=e.parentNode}if(t){w.push('<a href="',t,'" target="',x,'">',j,"</a>")}else{w.push(j)}if(c){r.tdCls+=" "+c}return w.join("")};this.callParent(arguments)},defaultRenderer:function(a){return a}});Ext.define("Ext.tree.View",{extend:"Ext.view.Table",alias:"widget.treeview",loadingCls:Ext.baseCSSPrefix+"grid-tree-loading",expandedCls:Ext.baseCSSPrefix+"grid-tree-node-expanded",expanderSelector:"."+Ext.baseCSSPrefix+"tree-expander",checkboxSelector:"."+Ext.baseCSSPrefix+"tree-checkbox",expanderIconOverCls:Ext.baseCSSPrefix+"tree-expander-over",nodeAnimWrapCls:Ext.baseCSSPrefix+"tree-animator-wrap",blockRefresh:true,rootVisible:true,expandDuration:250,collapseDuration:250,toggleOnDblClick:true,initComponent:function(){var a=this;if(a.initialConfig.animate===undefined){a.animate=Ext.enableFx}a.store=Ext.create("Ext.data.NodeStore",{recursive:true,rootVisible:a.rootVisible,listeners:{beforeexpand:a.onBeforeExpand,expand:a.onExpand,beforecollapse:a.onBeforeCollapse,collapse:a.onCollapse,scope:a}});if(a.node){a.setRootNode(a.node)}a.animQueue={};a.callParent(arguments)},processUIEvent:function(a){if(a.getTarget("."+this.nodeAnimWrapCls,this.el)){return false}return this.callParent(arguments)},onClear:function(){this.store.removeAll()},setRootNode:function(b){var a=this;a.store.setNode(b);a.node=b;if(!a.rootVisible){b.expand()}},onRender:function(){var b=this,a;b.callParent(arguments);a=b.el;a.on({scope:b,delegate:b.expanderSelector,mouseover:b.onExpanderMouseOver,mouseout:b.onExpanderMouseOut});a.on({scope:b,delegate:b.checkboxSelector,click:b.onCheckboxChange})},onCheckboxChange:function(d,a){var c=this,b=d.getTarget(c.getItemSelector(),c.getTargetEl());if(b){c.onCheckChange(c.getRecord(b))}},onCheckChange:function(a){var b=a.get("checked");if(Ext.isBoolean(b)){b=!b;a.set("checked",b);this.fireEvent("checkchange",a,b)}},getChecked:function(){var a=[];this.node.cascadeBy(function(b){if(b.get("checked")){a.push(b)}});return a},isItemChecked:function(a){return a.get("checked")},createAnimWrap:function(j,k){var g="",e=this.panel.headerCt,b=e.getGridColumns(),h=0,m=b.length,n,d=this.getNode(j),a,c;for(;h<m;h++){n=b[h];g+='<th style="width: '+(n.hidden?0:n.getDesiredWidth())+'px; height: 0px;"></th>'}c=Ext.get(d);a=c.insertSibling({tag:"tr",html:['<td colspan="'+e.getColumnCount()+'">','<div class="'+this.nodeAnimWrapCls+'">','<table class="'+Ext.baseCSSPrefix+'grid-table" style="width: '+e.getFullWidth()+'px;"><tbody>',g,"</tbody></table>","</div>","</td>"].join("")},"after");return{record:j,node:d,el:a,expanding:false,collapsing:false,animating:false,animateEl:a.down("div"),targetEl:a.down("tbody")}},getAnimWrap:function(a){if(!this.animate){return null}while(a){if(a.animWrap){return a.animWrap}a=a.parentNode}return null},doAdd:function(b,d,j){var k=this,g=d[0],n=g.parentNode,m=k.all.elements,q=0,e=k.getAnimWrap(n),p,c,h;if(!e||!e.expanding){k.resetScrollers();return k.callParent(arguments)}n=e.record;p=e.targetEl;c=p.dom.childNodes;h=c.length-1;q=j-k.indexOf(n)-1;if(!h||q>=h){p.appendChild(b)}else{Ext.fly(c[q+1]).insertSibling(b,"before",true)}Ext.Array.insert(m,j,b);if(e.isAnimating){k.onExpand(n)}},beginBulkUpdate:function(){this.bulkUpdate=true;this.ownerCt.changingScrollbars=true},endBulkUpdate:function(){var b=this,a=b.ownerCt;b.bulkUpdate=false;b.ownerCt.changingScrollbars=true;b.resetScrollers()},onRemove:function(e,a,b){var d=this,c=d.bulkUpdate;d.doRemove(a,b);if(!c){d.updateIndexes(b)}if(d.store.getCount()===0){d.refresh()}if(!c){d.fireEvent("itemremove",a,b)}},doRemove:function(a,c){var h=this,e=a.parentNode,d=h.all,b=h.getAnimWrap(a),g=d.item(c).dom;if(!b||!b.collapsing){h.resetScrollers();return h.callParent(arguments)}b.targetEl.appendChild(g);d.removeElement(c)},onBeforeExpand:function(d,b,c){var e=this,a;if(!e.rendered||!e.animate){return}if(e.getNode(d)){a=e.getAnimWrap(d);if(!a){a=d.animWrap=e.createAnimWrap(d);a.animateEl.setHeight(0)}else{if(a.collapsing){a.targetEl.select(e.itemSelector).remove()}}a.expanding=true;a.collapsing=false}},onExpand:function(c){var d=this,a=d.animQueue,j=c.getId(),b,e,g,h;if(d.singleExpand){d.ensureSingleExpand(c)}b=d.getAnimWrap(c);if(!b){d.resetScrollers();return}e=b.animateEl;g=b.targetEl;e.stopAnimation();a[j]=true;e.slideIn("t",{duration:d.expandDuration,listeners:{scope:d,lastframe:function(){b.el.insertSibling(g.query(d.itemSelector),"before");b.el.remove();d.resetScrollers();delete b.record.animWrap;delete a[j]}}});b.isAnimating=true},resetScrollers:function(){if(!this.bulkUpdate){var a=this.panel;a.determineScrollbars();a.invalidateScroller()}},onBeforeCollapse:function(d,b,c){var e=this,a;if(!e.rendered||!e.animate){return}if(e.getNode(d)){a=e.getAnimWrap(d);if(!a){a=d.animWrap=e.createAnimWrap(d,c)}else{if(a.expanding){a.targetEl.select(this.itemSelector).remove()}}a.expanding=false;a.collapsing=true}},onCollapse:function(c){var d=this,a=d.animQueue,h=c.getId(),b=d.getAnimWrap(c),e,g;if(!b){d.resetScrollers();return}e=b.animateEl;g=b.targetEl;a[h]=true;e.stopAnimation();e.slideOut("t",{duration:d.collapseDuration,listeners:{scope:d,lastframe:function(){b.el.remove();delete b.record.animWrap;d.resetScrollers();delete a[h]}}});b.isAnimating=true},isAnimating:function(a){return !!this.animQueue[a.getId()]},collectData:function(c){var g=this.callParent(arguments),e=g.rows,a=e.length,d=0,h,b;for(;d<a;d++){h=e[d];b=c[d];if(b.get("qtip")){h.rowAttr='data-qtip="'+b.get("qtip")+'"';if(b.get("qtitle")){h.rowAttr+=' data-qtitle="'+b.get("qtitle")+'"'}}if(b.isExpanded()){h.rowCls=(h.rowCls||"")+" "+this.expandedCls}if(b.isLoading()){h.rowCls=(h.rowCls||"")+" "+this.loadingCls}}return g},expand:function(b,a,d,c){return b.expand(a,d,c)},collapse:function(b,a,d,c){return b.collapse(a,d,c)},toggle:function(a){this[a.isExpanded()?"collapse":"expand"](a)},onItemDblClick:function(a,c,b){this.callParent(arguments);if(this.toggleOnDblClick){this.toggle(a)}},onBeforeItemMouseDown:function(a,c,b,d){if(d.getTarget(this.expanderSelector,c)){return false}return this.callParent(arguments)},onItemClick:function(a,c,b,d){if(d.getTarget(this.expanderSelector,c)){this.toggle(a);return false}return this.callParent(arguments)},onExpanderMouseOver:function(b,a){b.getTarget(this.cellSelector,10,true).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(b,a){b.getTarget(this.cellSelector,10,true).removeCls(this.expanderIconOverCls)},getTreeStore:function(){return this.panel.store},ensureSingleExpand:function(b){var a=b.parentNode;if(a){a.eachChild(function(c){if(c!==b&&c.isExpanded()){c.collapse()}})}}});Ext.define("Ext.tree.Panel",{extend:"Ext.panel.Table",alias:"widget.treepanel",alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],requires:["Ext.tree.View","Ext.selection.TreeModel","Ext.tree.Column"],viewType:"treeview",selType:"treemodel",treeCls:Ext.baseCSSPrefix+"tree-panel",deferRowRender:false,lines:true,useArrows:false,singleExpand:false,ddConfig:{enableDrag:true,enableDrop:true},rootVisible:true,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],constructor:function(a){a=a||{};if(a.animate===undefined){a.animate=Ext.enableFx}this.enableAnimations=a.animate;delete a.animate;this.callParent([a])},initComponent:function(){var b=this,a=[b.treeCls];if(b.useArrows){a.push(Ext.baseCSSPrefix+"tree-arrows");b.lines=false}if(b.lines){a.push(Ext.baseCSSPrefix+"tree-lines")}else{if(!b.useArrows){a.push(Ext.baseCSSPrefix+"tree-no-lines")}}if(Ext.isString(b.store)){b.store=Ext.StoreMgr.lookup(b.store)}else{if(!b.store||Ext.isObject(b.store)&&!b.store.isStore){b.store=Ext.create("Ext.data.TreeStore",Ext.apply({},b.store||{},{root:b.root,fields:b.fields,model:b.model,folderSort:b.folderSort}))}else{if(b.root){b.store=Ext.data.StoreManager.lookup(b.store);b.store.setRootNode(b.root);if(b.folderSort!==undefined){b.store.folderSort=b.folderSort;b.store.sort()}}}}b.viewConfig=Ext.applyIf(b.viewConfig||{},{rootVisible:b.rootVisible,animate:b.enableAnimations,singleExpand:b.singleExpand,node:b.store.getRootNode(),hideHeaders:b.hideHeaders});b.mon(b.store,{scope:b,rootchange:b.onRootChange,clear:b.onClear});b.relayEvents(b.store,["beforeload","load"]);b.store.on({append:b.createRelayer("itemappend"),remove:b.createRelayer("itemremove"),move:b.createRelayer("itemmove"),insert:b.createRelayer("iteminsert"),beforeappend:b.createRelayer("beforeitemappend"),beforeremove:b.createRelayer("beforeitemremove"),beforemove:b.createRelayer("beforeitemmove"),beforeinsert:b.createRelayer("beforeiteminsert"),expand:b.createRelayer("itemexpand"),collapse:b.createRelayer("itemcollapse"),beforeexpand:b.createRelayer("beforeitemexpand"),beforecollapse:b.createRelayer("beforeitemcollapse")});if(!b.columns){if(b.initialConfig.hideHeaders===undefined){b.hideHeaders=true}b.columns=[{xtype:"treecolumn",text:"Name",flex:1,dataIndex:b.displayField}]}if(b.cls){a.push(b.cls)}b.cls=a.join(" ");b.callParent();b.relayEvents(b.getView(),["checkchange"]);if(!b.getView().rootVisible&&!b.getRootNode()){b.setRootNode({expanded:true})}},onClear:function(){this.view.onClear()},setRootNode:function(){return this.store.setRootNode.apply(this.store,arguments)},getRootNode:function(){return this.store.getRootNode()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get("checked")},expandAll:function(e,d){var b=this.getRootNode(),c=this.enableAnimations,a=this.getView();if(b){if(!c){a.beginBulkUpdate()}b.expand(true,e,d);if(!c){a.endBulkUpdate()}}},collapseAll:function(e,d){var b=this.getRootNode(),c=this.enableAnimations,a=this.getView();if(b){if(!c){a.beginBulkUpdate()}if(a.rootVisible){b.collapse(true,e,d)}else{b.collapseChildren(true,e,d)}if(!c){a.endBulkUpdate()}}},expandPath:function(n,g,a,h,m){var d=this,c=d.getRootNode(),b=1,e=d.getView(),k,j;g=g||d.getRootNode().idProperty;a=a||"/";if(Ext.isEmpty(n)){Ext.callback(h,m||d,[false,null]);return}k=n.split(a);if(c.get(g)!=k[1]){Ext.callback(h,m||d,[false,c]);return}j=function(){if(++b===k.length){Ext.callback(h,m||d,[true,c]);return}var p=c.findChild(g,k[b]);if(!p){Ext.callback(h,m||d,[false,c]);return}c=p;c.expand(false,j)};c.expand(false,j)},selectPath:function(h,g,e,j,a){var d=this,c,b;g=g||d.getRootNode().idProperty;e=e||"/";c=h.split(e);b=c.pop();d.expandPath(c.join(e),g,e,function(n,m){var k=false;if(n&&m){m=m.findChild(g,b);if(m){d.getSelectionModel().select(m);Ext.callback(j,a||d,[true,m]);k=true}}else{if(m===d.getRootNode()){k=true}}Ext.callback(j,a||d,[k,m])},d)}});Ext.define("Ext.view.DragZone",{extend:"Ext.dd.DragZone",containerScroll:false,constructor:function(a){var b=this;Ext.apply(b,a);if(!b.ddGroup){b.ddGroup="view-dd-zone-"+b.view.id}b.callParent([b.view.el.dom.parentNode]);b.ddel=Ext.get(document.createElement("div"));b.ddel.addCls(Ext.baseCSSPrefix+"grid-dd-wrap")},init:function(c,a,b){this.initTarget(c,a,b);this.view.mon(this.view,{itemmousedown:this.onItemMouseDown,scope:this})},onItemMouseDown:function(b,a,d,c,g){if(!this.isPreventDrag(g,a,d,c)){this.handleMouseDown(g);if(b.getSelectionModel().selectionMode=="MULTI"&&!g.ctrlKey&&b.getSelectionModel().isSelected(a)){return false}}},isPreventDrag:function(a){return false},getDragData:function(h){var c=this.view,g=h.getTarget(c.getItemSelector()),b,a,d;if(g){b=c.getRecord(g);a=c.getSelectionModel();d=a.getSelection();return{copy:this.view.copy||(this.view.allowCopy&&h.ctrlKey),event:new Ext.EventObjectImpl(h),view:c,ddel:this.ddel,item:g,records:d,fromPosition:Ext.fly(g).getXY()}}},onInitDrag:function(b,k){var g=this,h=g.dragData,d=h.view,a=d.getSelectionModel(),c=d.getRecord(h.item),j=h.event;if(!a.isSelected(c)||j.hasModifier()){a.selectWithEvent(c,j,true)}h.records=a.getSelection();g.ddel.update(g.getDragText());g.proxy.update(g.ddel.dom);g.onStartDrag(b,k);return true},getDragText:function(){var a=this.dragData.records.length;return Ext.String.format(this.dragText,a,a==1?"":"s")},getRepairXY:function(b,a){return a?a.fromPosition:false}});Ext.define("Ext.tree.ViewDragZone",{extend:"Ext.view.DragZone",isPreventDrag:function(b,a){return(a.get("allowDrag")===false)||!!b.getTarget(this.view.expanderSelector)},afterRepair:function(){var d=this,a=d.view,e=a.selectedItemCls,b=d.dragData.records,c=Ext.fly;if(Ext.enableFx&&d.repairHighlight){Ext.Array.forEach(b,function(g){var h=a.getNode(g);c(h.firstChild).highlight(d.repairHighlightColor,{listeners:{beforeanimate:function(){if(a.isSelected(h)){c(h).removeCls(e)}},afteranimate:function(){if(a.isSelected(h)){c(h).addCls(e)}}}})})}d.dragging=false}});Ext.define("Ext.tree.ViewDropZone",{extend:"Ext.view.DropZone",allowParentInserts:false,allowContainerDrops:false,appendOnly:false,expandDelay:500,indicatorCls:"x-tree-ddindicator",expandNode:function(b){var a=this.view;if(!b.isLeaf()&&!b.isExpanded()){a.expand(b);this.expandProcId=false}},queueExpand:function(a){this.expandProcId=Ext.Function.defer(this.expandNode,this.expandDelay,this,[a])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},getPosition:function(g,b){var k=this.view,c=k.getRecord(b),h=g.getPageY(),m=c.isLeaf(),a=false,j=Ext.fly(b).getRegion(),d;if(c.isRoot()){return"append"}if(this.appendOnly){return m?false:"append"}if(!this.allowParentInsert){a=c.hasChildNodes()&&c.isExpanded()}d=(j.bottom-j.top)/(m?2:3);if(h>=j.top&&h<(j.top+d)){return"before"}else{if(!a&&(m||(h>=(j.bottom-d)&&h<=j.bottom))){return"after"}else{return"append"}}},isValidDropPoint:function(b,j,p,k,g){if(!b||!g.item){return false}var q=this.view,m=q.getRecord(b),d=g.records,a=d.length,n=d.length,c,h;if(!(m&&j&&a)){return false}for(c=0;c<n;c++){h=d[c];if(h.isNode&&h.contains(m)){return false}}if(j==="append"&&m.get("allowDrop")===false){return false}else{if(j!="append"&&m.parentNode.get("allowDrop")===false){return false}}if(Ext.Array.contains(d,m)){return false}return true},onNodeOver:function(a,j,g,c){var d=this.getPosition(g,a),b=this.dropNotAllowed,k=this.view,h=k.getRecord(a),m=this.getIndicator(),p=0,n=0;this.cancelExpand();if(d=="append"&&!this.expandProcId&&!Ext.Array.contains(c.records,h)&&!h.isLeaf()&&!h.isExpanded()){this.queueExpand(h)}if(this.isValidDropPoint(a,d,j,g,c)){this.valid=true;this.currentPosition=d;this.overRecord=h;m.setWidth(Ext.fly(a).getWidth());n=Ext.fly(a).getY()-Ext.fly(k.el).getY()-1;if(d=="before"){b=h.isFirst()?Ext.baseCSSPrefix+"tree-drop-ok-above":Ext.baseCSSPrefix+"tree-drop-ok-between";m.showAt(0,n);j.proxy.show()}else{if(d=="after"){b=h.isLast()?Ext.baseCSSPrefix+"tree-drop-ok-below":Ext.baseCSSPrefix+"tree-drop-ok-between";n+=Ext.fly(a).getHeight();m.showAt(0,n);j.proxy.show()}else{b=Ext.baseCSSPrefix+"tree-drop-ok-append";m.hide()}}}else{this.valid=false}this.currentCls=b;return b},onContainerOver:function(a,c,b){return c.getTarget("."+this.indicatorCls)?this.currentCls:this.dropNotAllowed},notifyOut:function(){this.callParent(arguments);this.cancelExpand()},handleNodeDrop:function(d,m,e){var p=this,q=p.view,g=m.parentNode,r=q.getStore(),u=[],a,c,k,b,j,n,t,h;if(d.copy){a=d.records;d.records=[];for(c=0,k=a.length;c<k;c++){d.records.push(Ext.apply({},a[c].data))}}p.cancelExpand();if(e=="before"){b=g.insertBefore;j=[null,m];m=g}else{if(e=="after"){if(m.nextSibling){b=g.insertBefore;j=[null,m.nextSibling]}else{b=g.appendChild;j=[null]}m=g}else{if(!m.isExpanded()){n=true}b=m.appendChild;j=[null]}}t=function(){var v;for(c=0,k=d.records.length;c<k;c++){j[0]=d.records[c];v=b.apply(m,j);if(Ext.enableFx&&p.dropHighlight){u.push(q.getNode(v))}}if(Ext.enableFx&&p.dropHighlight){Ext.Array.forEach(u,function(w){if(w){Ext.fly(w.firstChild?w.firstChild:w).highlight(p.dropHighlightColor)}})}};if(n){m.expand(false,t)}else{t()}}});Ext.define("Ext.tree.plugin.TreeViewDragDrop",{extend:"Ext.AbstractPlugin",alias:"plugin.treeviewdragdrop",uses:["Ext.tree.ViewDragZone","Ext.tree.ViewDropZone"],dragText:"{0} selected node{1}",allowParentInserts:false,allowContainerDrops:false,appendOnly:false,ddGroup:"TreeDD",expandDelay:1000,enableDrop:true,enableDrag:true,nodeHighlightColor:"c3daf9",nodeHighlightOnDrop:Ext.enableFx,nodeHighlightOnRepair:Ext.enableFx,init:function(a){a.on("render",this.onViewRender,this,{single:true})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onViewRender:function(a){var b=this;if(b.enableDrag){b.dragZone=Ext.create("Ext.tree.ViewDragZone",{view:a,ddGroup:b.dragGroup||b.ddGroup,dragText:b.dragText,repairHighlightColor:b.nodeHighlightColor,repairHighlight:b.nodeHighlightOnRepair})}if(b.enableDrop){b.dropZone=Ext.create("Ext.tree.ViewDropZone",{view:a,ddGroup:b.dropGroup||b.ddGroup,allowContainerDrops:b.allowContainerDrops,appendOnly:b.appendOnly,allowParentInserts:b.allowParentInserts,expandDelay:b.expandDelay,dropHighlightColor:b.nodeHighlightColor,dropHighlight:b.nodeHighlightOnDrop})}}});Ext.define("Ext.util.Cookies",{singleton:true,set:function(c,e){var a=arguments,j=arguments.length,b=(j>2)?a[2]:null,h=(j>3)?a[3]:"/",d=(j>4)?a[4]:null,g=(j>5)?a[5]:false;document.cookie=c+"="+escape(e)+((b===null)?"":("; expires="+b.toGMTString()))+((h===null)?"":("; path="+h))+((d===null)?"":("; domain="+d))+((g===true)?"; secure":"")},get:function(d){var b=d+"=",g=b.length,a=document.cookie.length,e=0,c=0;while(e<a){c=e+g;if(document.cookie.substring(e,c)==b){return this.getCookieVal(c)}e=document.cookie.indexOf(" ",e)+1;if(e===0){break}}return null},clear:function(a,b){if(this.get(a)){b=b||"/";document.cookie=a+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path="+b}},getCookieVal:function(b){var a=document.cookie.indexOf(";",b);if(a==-1){a=document.cookie.length}return unescape(document.cookie.substring(b,a))}});Ext.define("Ext.util.CSS",function(){var d=null;var c=document;var b=/(-[a-z])/gi;var a=function(e,g){return g.charAt(1).toUpperCase()};return{singleton:true,constructor:function(){this.rules={};this.initialized=false},createStyleSheet:function(j,n){var h,g=c.getElementsByTagName("head")[0],m=c.createElement("style");m.setAttribute("type","text/css");if(n){m.setAttribute("id",n)}if(Ext.isIE){g.appendChild(m);h=m.styleSheet;h.cssText=j}else{try{m.appendChild(c.createTextNode(j))}catch(k){m.cssText=j}g.appendChild(m);h=m.styleSheet?m.styleSheet:(m.sheet||c.styleSheets[c.styleSheets.length-1])}this.cacheStyleSheet(h);return h},removeStyleSheet:function(g){var e=document.getElementById(g);if(e){e.parentNode.removeChild(e)}},swapStyleSheet:function(j,e){var h=document;this.removeStyleSheet(j);var g=h.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");g.setAttribute("id",j);g.setAttribute("href",e);h.getElementsByTagName("head")[0].appendChild(g)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(m){if(!d){d={}}try{var q=m.cssRules||m.rules,n,k=q.length-1,g,h;for(;k>=0;--k){n=q[k].selectorText;if(n){n=n.split(",");h=n.length;for(g=0;g<h;g++){d[Ext.String.trim(n[g]).toLowerCase()]=q[k]}}}}catch(p){}},getRules:function(h){if(d===null||h){d={};var k=c.styleSheets,j=0,g=k.length;for(;j<g;j++){try{if(!k[j].disabled){this.cacheStyleSheet(k[j])}}catch(m){}}}return d},getRule:function(e,h){var g=this.getRules(h);if(!Ext.isArray(e)){return g[e.toLowerCase()]}for(var j=0;j<e.length;j++){if(g[e[j]]){return g[e[j].toLowerCase()]}}return null},updateRule:function(e,j,h){if(!Ext.isArray(e)){var k=this.getRule(e);if(k){k.style[j.replace(b,a)]=h;return true}}else{for(var g=0;g<e.length;g++){if(this.updateRule(e[g],j,h)){return true}}}return false}}}());Ext.define("Ext.util.History",{singleton:true,alternateClassName:"Ext.History",mixins:{observable:"Ext.util.Observable"},constructor:function(){var a=this;a.oldIEMode=Ext.isIE6||Ext.isIE7||!Ext.isStrict&&Ext.isIE8;a.iframe=null;a.hiddenField=null;a.ready=false;a.currentToken=null},getHash:function(){var a=window.location.href,b=a.indexOf("#");return b>=0?a.substr(b+1):null},doSave:function(){this.hiddenField.value=this.currentToken},handleStateChange:function(a){this.currentToken=a;this.fireEvent("change",a)},updateIFrame:function(b){var a='<html><body><div id="state">'+Ext.util.Format.htmlEncode(b)+"</div></body></html>";try{var d=this.iframe.contentWindow.document;d.open();d.write(a);d.close();return true}catch(c){return false}},checkIFrame:function(){var d=this,b=d.iframe.contentWindow;if(!b||!b.document){Ext.Function.defer(this.checkIFrame,10,this);return}var e=b.document,c=e.getElementById("state"),a=c?c.innerText:null,g=d.getHash();Ext.TaskManager.start({run:function(){var m=b.document,k=m.getElementById("state"),h=k?k.innerText:null,j=d.getHash();if(h!==a){a=h;d.handleStateChange(h);window.top.location.hash=h;g=h;d.doSave()}else{if(j!==g){g=j;d.updateIFrame(j)}}},interval:50,scope:d});d.ready=true;d.fireEvent("ready",d)},startUp:function(){var a=this;a.currentToken=a.hiddenField.value||this.getHash();if(a.oldIEMode){a.checkIFrame()}else{var b=a.getHash();Ext.TaskManager.start({run:function(){var c=a.getHash();if(c!==b){b=c;a.handleStateChange(b);a.doSave()}},interval:50,scope:a});a.ready=true;a.fireEvent("ready",a)}},fieldId:Ext.baseCSSPrefix+"history-field",iframeId:Ext.baseCSSPrefix+"history-frame",init:function(c,a){var b=this;if(b.ready){Ext.callback(c,a,[b]);return}if(!Ext.isReady){Ext.onReady(function(){b.init(c,a)});return}b.hiddenField=Ext.getDom(b.fieldId);if(b.oldIEMode){b.iframe=Ext.getDom(b.iframeId)}b.addEvents("ready","change");if(c){b.on("ready",c,a,{single:true})}b.startUp()},add:function(a,c){var b=this;if(c!==false){if(b.getToken()===a){return true}}if(b.oldIEMode){return b.updateIFrame(a)}else{window.top.location.hash=a;return true}},back:function(){window.history.go(-1)},forward:function(){window.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}});Ext.define("Ext.view.TableChunker",{singleton:true,requires:["Ext.XTemplate"],metaTableTpl:["{[this.openTableWrap()]}",'<table class="'+Ext.baseCSSPrefix+"grid-table "+Ext.baseCSSPrefix+'grid-table-resizer" border="0" cellspacing="0" cellpadding="0" {[this.embedFullWidth()]}>',"<tbody>",'<tr class="'+Ext.baseCSSPrefix+'grid-header-row">','<tpl for="columns">','<th class="'+Ext.baseCSSPrefix+'grid-col-resizer-{id}" style="width: {width}px; height: 0px;"></th>',"</tpl>","</tr>","{[this.openRows()]}","{row}",'<tpl for="features">',"{[this.embedFeature(values, parent, xindex, xcount)]}","</tpl>","{[this.closeRows()]}","</tbody>","</table>","{[this.closeTableWrap()]}"],constructor:function(){Ext.XTemplate.prototype.recurse=function(b,a){return this.apply(a?b[a]:b)}},embedFeature:function(b,d,a,e){var c="";if(!b.disabled){c=b.getFeatureTpl(b,d,a,e)}return c},embedFullWidth:function(){return'style="width: {fullWidth}px;"'},openRows:function(){return'<tpl for="rows">'},closeRows:function(){return"</tpl>"},metaRowTpl:['<tr class="'+Ext.baseCSSPrefix+'grid-row {addlSelector} {[this.embedRowCls()]}" {[this.embedRowAttr()]}>','<tpl for="columns">','<td class="{cls} '+Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+'grid-cell-{columnId} {{id}-modified} {{id}-tdCls} {[this.firstOrLastCls(xindex, xcount)]}" {{id}-tdAttr}><div unselectable="on" class="'+Ext.baseCSSPrefix+"grid-cell-inner "+Ext.baseCSSPrefix+'unselectable" style="{{id}-style}; text-align: {align};">{{id}}</div></td>',"</tpl>","</tr>"],firstOrLastCls:function(b,c){var a="";if(b===1){a=Ext.baseCSSPrefix+"grid-cell-first"}else{if(b===c){a=Ext.baseCSSPrefix+"grid-cell-last"}}return a},embedRowCls:function(){return"{rowCls}"},embedRowAttr:function(){return"{rowAttr}"},openTableWrap:function(){return""},closeTableWrap:function(){return""},getTableTpl:function(k,b){var j,h={openRows:this.openRows,closeRows:this.closeRows,embedFeature:this.embedFeature,embedFullWidth:this.embedFullWidth,openTableWrap:this.openTableWrap,closeTableWrap:this.closeTableWrap},g={},c=k.features||[],n=c.length,e=0,m={embedRowCls:this.embedRowCls,embedRowAttr:this.embedRowAttr,firstOrLastCls:this.firstOrLastCls},d=Array.prototype.slice.call(this.metaRowTpl,0),a;for(;e<n;e++){if(!c[e].disabled){c[e].mutateMetaRowTpl(d);Ext.apply(m,c[e].getMetaRowTplFragments());Ext.apply(g,c[e].getFragmentTpl());Ext.apply(h,c[e].getTableFragments())}}d=Ext.create("Ext.XTemplate",d.join(""),m);k.row=d.applyTemplate(k);a=Ext.create("Ext.XTemplate",this.metaTableTpl.join(""),h);j=a.applyTemplate(k);if(!b){j=Ext.create("Ext.XTemplate",j,g)}return j}});
/*
 * jQuery JavaScript Library v1.8.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Aug 09 2012 16:24:48 GMT-0400 (Eastern Daylight Time)
 */
(function(a6,aF){var B,aj,t=a6.document,aM=a6.location,d=a6.navigator,bk=a6.jQuery,M=a6.$,aq=Array.prototype.push,a8=Array.prototype.slice,aO=Array.prototype.indexOf,E=Object.prototype.toString,Z=Object.prototype.hasOwnProperty,aR=String.prototype.trim,bK=function(e,b3){return new bK.fn.init(e,b3,B)},bB=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ae=/\S/,aZ=/\s+/,H=ae.test("\xA0")?(/^[\s\xA0]+|[\s\xA0]+$/g):/^\s+|\s+$/g,bs=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bj=/^[\],:{}\s]*$/,bm=/(?:^|:|,)(?:\s*\[)+/g,bH=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,a4=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,bT=/^-ms-/,aY=/-([\da-z])/gi,R=function(e,b3){return(b3+"").toUpperCase()},aJ=function(){if(t.addEventListener){t.removeEventListener("DOMContentLoaded",aJ,false);bK.ready()}else{if(t.readyState==="complete"){t.detachEvent("onreadystatechange",aJ);bK.ready()}}},ad={};bK.fn=bK.prototype={constructor:bK,init:function(e,b6,b5){var b4,b7,b3,b8;if(!e){return this}if(e.nodeType){this.context=this[0]=e;this.length=1;return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){b4=[null,e,null]}else{b4=bs.exec(e)}if(b4&&(b4[1]||!b6)){if(b4[1]){b6=b6 instanceof bK?b6[0]:b6;b8=(b6&&b6.nodeType?b6.ownerDocument||b6:t);e=bK.parseHTML(b4[1],b8,true);if(a.test(b4[1])&&bK.isPlainObject(b6)){this.attr.call(e,b6,true)}return bK.merge(this,e)}else{b7=t.getElementById(b4[2]);if(b7&&b7.parentNode){if(b7.id!==b4[2]){return b5.find(e)}this.length=1;this[0]=b7}this.context=t;this.selector=e;return this}}else{if(!b6||b6.jquery){return(b6||b5).find(e)}else{return this.constructor(b6).find(e)}}}else{if(bK.isFunction(e)){return b5.ready(e)}}if(e.selector!==aF){this.selector=e.selector;this.context=e.context}return bK.makeArray(e,this)},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return a8.call(this)},get:function(e){return e==null?this.toArray():(e<0?this[this.length+e]:this[e])},pushStack:function(b3,b5,e){var b4=bK.merge(this.constructor(),b3);b4.prevObject=this;b4.context=this.context;if(b5==="find"){b4.selector=this.selector+(this.selector?" ":"")+e}else{if(b5){b4.selector=this.selector+"."+b5+"("+e+")"}}return b4},each:function(b3,e){return bK.each(this,b3,e)},ready:function(e){bK.ready.promise().done(e);return this},eq:function(e){e=+e;return e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(a8.apply(this,arguments),"slice",a8.call(arguments).join(","))},map:function(e){return this.pushStack(bK.map(this,function(b4,b3){return e.call(b4,b3,b4)}))},end:function(){return this.prevObject||this.constructor(null)},push:aq,sort:[].sort,splice:[].splice};bK.fn.init.prototype=bK.fn;bK.extend=bK.fn.extend=function(){var cb,b4,e,b3,b8,b9,b7=arguments[0]||{},b6=1,b5=arguments.length,ca=false;if(typeof b7==="boolean"){ca=b7;b7=arguments[1]||{};b6=2}if(typeof b7!=="object"&&!bK.isFunction(b7)){b7={}}if(b5===b6){b7=this;--b6}for(;b6<b5;b6++){if((cb=arguments[b6])!=null){for(b4 in cb){e=b7[b4];b3=cb[b4];if(b7===b3){continue}if(ca&&b3&&(bK.isPlainObject(b3)||(b8=bK.isArray(b3)))){if(b8){b8=false;b9=e&&bK.isArray(e)?e:[]}else{b9=e&&bK.isPlainObject(e)?e:{}}b7[b4]=bK.extend(ca,b9,b3)}else{if(b3!==aF){b7[b4]=b3}}}}}return b7};bK.extend({noConflict:function(e){if(a6.$===bK){a6.$=M}if(e&&a6.jQuery===bK){a6.jQuery=bk}return bK},isReady:false,readyWait:1,holdReady:function(e){if(e){bK.readyWait++}else{bK.ready(true)}},ready:function(e){if(e===true?--bK.readyWait:bK.isReady){return}if(!t.body){return setTimeout(bK.ready,1)}bK.isReady=true;if(e!==true&&--bK.readyWait>0){return}aj.resolveWith(t,[bK]);if(bK.fn.trigger){bK(t).trigger("ready").off("ready")}},isFunction:function(e){return bK.type(e)==="function"},isArray:Array.isArray||function(e){return bK.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):ad[E.call(e)]||"object"},isPlainObject:function(b5){if(!b5||bK.type(b5)!=="object"||b5.nodeType||bK.isWindow(b5)){return false}try{if(b5.constructor&&!Z.call(b5,"constructor")&&!Z.call(b5.constructor.prototype,"isPrototypeOf")){return false}}catch(b4){return false}var b3;for(b3 in b5){}return b3===aF||Z.call(b5,b3)},isEmptyObject:function(b3){var e;for(e in b3){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(b5,b4,e){var b3;if(!b5||typeof b5!=="string"){return null}if(typeof b4==="boolean"){e=b4;b4=0}b4=b4||t;if((b3=a.exec(b5))){return[b4.createElement(b3[1])]}b3=bK.buildFragment([b5],b4,e?null:[]);return bK.merge([],(b3.cacheable?bK.clone(b3.fragment):b3.fragment).childNodes)},parseJSON:function(e){if(!e||typeof e!=="string"){return null}e=bK.trim(e);if(a6.JSON&&a6.JSON.parse){return a6.JSON.parse(e)}if(bj.test(e.replace(bH,"@").replace(a4,"]").replace(bm,""))){return(new Function("return "+e))()}bK.error("Invalid JSON: "+e)},parseXML:function(b5){var b3,b4;if(!b5||typeof b5!=="string"){return null}try{if(a6.DOMParser){b4=new DOMParser();b3=b4.parseFromString(b5,"text/xml")}else{b3=new ActiveXObject("Microsoft.XMLDOM");b3.async="false";b3.loadXML(b5)}}catch(b6){b3=aF}if(!b3||!b3.documentElement||b3.getElementsByTagName("parsererror").length){bK.error("Invalid XML: "+b5)}return b3},noop:function(){},globalEval:function(e){if(e&&ae.test(e)){(a6.execScript||function(b3){a6["eval"].call(a6,b3)})(e)}},camelCase:function(e){return e.replace(bT,"ms-").replace(aY,R)},nodeName:function(b3,e){return b3.nodeName&&b3.nodeName.toUpperCase()===e.toUpperCase()},each:function(b7,b8,b4){var b3,b5=0,b6=b7.length,e=b6===aF||bK.isFunction(b7);if(b4){if(e){for(b3 in b7){if(b8.apply(b7[b3],b4)===false){break}}}else{for(;b5<b6;){if(b8.apply(b7[b5++],b4)===false){break}}}}else{if(e){for(b3 in b7){if(b8.call(b7[b3],b3,b7[b3])===false){break}}}else{for(;b5<b6;){if(b8.call(b7[b5],b5,b7[b5++])===false){break}}}}return b7},trim:aR?function(e){return e==null?"":aR.call(e)}:function(e){return e==null?"":e.toString().replace(H,"")},makeArray:function(e,b4){var b5,b3=b4||[];if(e!=null){b5=bK.type(e);if(e.length==null||b5==="string"||b5==="function"||b5==="regexp"||bK.isWindow(e)){aq.call(b3,e)}else{bK.merge(b3,e)}}return b3},inArray:function(b5,b3,b4){var e;if(b3){if(aO){return aO.call(b3,b5,b4)}e=b3.length;b4=b4?b4<0?Math.max(0,e+b4):b4:0;for(;b4<e;b4++){if(b4 in b3&&b3[b4]===b5){return b4}}}return -1},merge:function(b6,b4){var e=b4.length,b5=b6.length,b3=0;if(typeof e==="number"){for(;b3<e;b3++){b6[b5++]=b4[b3]}}else{while(b4[b3]!==aF){b6[b5++]=b4[b3++]}}b6.length=b5;return b6},grep:function(b3,b8,e){var b7,b4=[],b5=0,b6=b3.length;e=!!e;for(;b5<b6;b5++){b7=!!b8(b3[b5],b5);if(e!==b7){b4.push(b3[b5])}}return b4},map:function(e,b9,ca){var b7,b8,b6=[],b4=0,b3=e.length,b5=e instanceof bK||b3!==aF&&typeof b3==="number"&&((b3>0&&e[0]&&e[b3-1])||b3===0||bK.isArray(e));if(b5){for(;b4<b3;b4++){b7=b9(e[b4],b4,ca);if(b7!=null){b6[b6.length]=b7}}}else{for(b8 in e){b7=b9(e[b8],b8,ca);if(b7!=null){b6[b6.length]=b7}}}return b6.concat.apply([],b6)},guid:1,proxy:function(b6,b5){var b4,e,b3;if(typeof b5==="string"){b4=b6[b5];b5=b6;b6=b4}if(!bK.isFunction(b6)){return aF}e=a8.call(arguments,2);b3=function(){return b6.apply(b5,e.concat(a8.call(arguments)))};b3.guid=b6.guid=b6.guid||b3.guid||bK.guid++;return b3},access:function(e,b8,cb,b9,b6,cc,ca){var b4,b7=cb==null,b5=0,b3=e.length;if(cb&&typeof cb==="object"){for(b5 in cb){bK.access(e,b8,b5,cb[b5],1,cc,b9)}b6=1}else{if(b9!==aF){b4=ca===aF&&bK.isFunction(b9);if(b7){if(b4){b4=b8;b8=function(ce,cd,cf){return b4.call(bK(ce),cf)}}else{b8.call(e,b9);b8=null}}if(b8){for(;b5<b3;b5++){b8(e[b5],cb,b4?b9.call(e[b5],b5,b8(e[b5],cb)):b9,ca)}}b6=1}}return b6?e:b7?b8.call(e):b3?b8(e[0],cb):cc},now:function(){return(new Date()).getTime()}});bK.ready.promise=function(b6){if(!aj){aj=bK.Deferred();if(t.readyState==="complete"||(t.readyState!=="loading"&&t.addEventListener)){setTimeout(bK.ready,1)}else{if(t.addEventListener){t.addEventListener("DOMContentLoaded",aJ,false);a6.addEventListener("load",bK.ready,false)}else{t.attachEvent("onreadystatechange",aJ);a6.attachEvent("onload",bK.ready);var b5=false;try{b5=a6.frameElement==null&&t.documentElement}catch(b4){}if(b5&&b5.doScroll){(function b3(){if(!bK.isReady){try{b5.doScroll("left")}catch(b7){return setTimeout(b3,50)}bK.ready()}})()}}}}return aj.promise(b6)};bK.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b3,e){ad["[object "+e+"]"]=e.toLowerCase()});B=bK(t);var bY={};function ag(b3){var e=bY[b3]={};bK.each(b3.split(aZ),function(b5,b4){e[b4]=true});return e}bK.Callbacks=function(cc){cc=typeof cc==="string"?(bY[cc]||ag(cc)):bK.extend({},cc);var b5,e,b6,b4,b7,b8,b9=[],ca=!cc.once&&[],b3=function(cd){b5=cc.memory&&cd;e=true;b8=b4||0;b4=0;b7=b9.length;b6=true;for(;b9&&b8<b7;b8++){if(b9[b8].apply(cd[0],cd[1])===false&&cc.stopOnFalse){b5=false;break}}b6=false;if(b9){if(ca){if(ca.length){b3(ca.shift())}}else{if(b5){b9=[]}else{cb.disable()}}}},cb={add:function(){if(b9){var ce=b9.length;(function cd(cf){bK.each(cf,function(ch,cg){if(bK.isFunction(cg)&&(!cc.unique||!cb.has(cg))){b9.push(cg)}else{if(cg&&cg.length){cd(cg)}}})})(arguments);if(b6){b7=b9.length}else{if(b5){b4=ce;b3(b5)}}}return this},remove:function(){if(b9){bK.each(arguments,function(cf,cd){var ce;while((ce=bK.inArray(cd,b9,ce))>-1){b9.splice(ce,1);if(b6){if(ce<=b7){b7--}if(ce<=b8){b8--}}}})}return this},has:function(cd){return bK.inArray(cd,b9)>-1},empty:function(){b9=[];return this},disable:function(){b9=ca=b5=aF;return this},disabled:function(){return !b9},lock:function(){ca=aF;if(!b5){cb.disable()}return this},locked:function(){return !ca},fireWith:function(ce,cd){cd=cd||[];cd=[ce,cd.slice?cd.slice():cd];if(b9&&(!e||ca)){if(b6){ca.push(cd)}else{b3(cd)}}return this},fire:function(){cb.fireWith(this,arguments);return this},fired:function(){return !!e}};return cb};bK.extend({Deferred:function(b4){var b3=[["resolve","done",bK.Callbacks("once memory"),"resolved"],["reject","fail",bK.Callbacks("once memory"),"rejected"],["notify","progress",bK.Callbacks("memory")]],b5="pending",b6={state:function(){return b5},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var b7=arguments;return bK.Deferred(function(b8){bK.each(b3,function(ca,b9){var cc=b9[0],cb=b7[ca];e[b9[1]](bK.isFunction(cb)?function(){var cd=cb.apply(this,arguments);if(cd&&bK.isFunction(cd.promise)){cd.promise().done(b8.resolve).fail(b8.reject).progress(b8.notify)}else{b8[cc+"With"](this===e?b8:this,[cd])}}:b8[cc])});b7=null}).promise()},promise:function(b7){return typeof b7==="object"?bK.extend(b7,b6):b6}},e={};b6.pipe=b6.then;bK.each(b3,function(b8,b7){var ca=b7[2],b9=b7[3];b6[b7[1]]=ca.add;if(b9){ca.add(function(){b5=b9},b3[b8^1][2].disable,b3[2][2].lock)}e[b7[0]]=ca.fire;e[b7[0]+"With"]=ca.fireWith});b6.promise(e);if(b4){b4.call(e,e)}return e},when:function(b6){var b4=0,b8=a8.call(arguments),e=b8.length,b3=e!==1||(b6&&bK.isFunction(b6.promise))?e:0,cb=b3===1?b6:bK.Deferred(),b5=function(cd,ce,cc){return function(cf){ce[cd]=this;cc[cd]=arguments.length>1?a8.call(arguments):cf;if(cc===ca){cb.notifyWith(ce,cc)}else{if(!(--b3)){cb.resolveWith(ce,cc)}}}},ca,b7,b9;if(e>1){ca=new Array(e);b7=new Array(e);b9=new Array(e);for(;b4<e;b4++){if(b8[b4]&&bK.isFunction(b8[b4].promise)){b8[b4].promise().done(b5(b4,b9,b8)).fail(cb.reject).progress(b5(b4,b7,ca))}else{--b3}}}if(!b3){cb.resolveWith(b9,b8)}return cb.promise()}});bK.support=(function(){var cf,ce,cc,cd,b6,cb,ca,b8,b7,b5,b3,b4=t.createElement("div");b4.setAttribute("className","t");b4.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";ce=b4.getElementsByTagName("*");cc=b4.getElementsByTagName("a")[0];cc.style.cssText="top:1px;float:left;opacity:.5";if(!ce||!ce.length||!cc){return{}}cd=t.createElement("select");b6=cd.appendChild(t.createElement("option"));cb=b4.getElementsByTagName("input")[0];cf={leadingWhitespace:(b4.firstChild.nodeType===3),tbody:!b4.getElementsByTagName("tbody").length,htmlSerialize:!!b4.getElementsByTagName("link").length,style:/top/.test(cc.getAttribute("style")),hrefNormalized:(cc.getAttribute("href")==="/a"),opacity:/^0.5/.test(cc.style.opacity),cssFloat:!!cc.style.cssFloat,checkOn:(cb.value==="on"),optSelected:b6.selected,getSetAttribute:b4.className!=="t",enctype:!!t.createElement("form").enctype,html5Clone:t.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(t.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};cb.checked=true;cf.noCloneChecked=cb.cloneNode(true).checked;cd.disabled=true;cf.optDisabled=!b6.disabled;try{delete b4.test}catch(b9){cf.deleteExpando=false}if(!b4.addEventListener&&b4.attachEvent&&b4.fireEvent){b4.attachEvent("onclick",b3=function(){cf.noCloneEvent=false});b4.cloneNode(true).fireEvent("onclick");b4.detachEvent("onclick",b3)}cb=t.createElement("input");cb.value="t";cb.setAttribute("type","radio");cf.radioValue=cb.value==="t";cb.setAttribute("checked","checked");cb.setAttribute("name","t");b4.appendChild(cb);ca=t.createDocumentFragment();ca.appendChild(b4.lastChild);cf.checkClone=ca.cloneNode(true).cloneNode(true).lastChild.checked;cf.appendChecked=cb.checked;ca.removeChild(cb);ca.appendChild(b4);if(b4.attachEvent){for(b7 in {submit:true,change:true,focusin:true}){b8="on"+b7;b5=(b8 in b4);if(!b5){b4.setAttribute(b8,"return;");b5=(typeof b4[b8]==="function")}cf[b7+"Bubbles"]=b5}}bK(function(){var cg,ck,ci,cj,ch="padding:0;margin:0;border:0;display:block;overflow:hidden;",e=t.getElementsByTagName("body")[0];if(!e){return}cg=t.createElement("div");cg.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";e.insertBefore(cg,e.firstChild);ck=t.createElement("div");cg.appendChild(ck);ck.innerHTML="<table><tr><td></td><td>t</td></tr></table>";ci=ck.getElementsByTagName("td");ci[0].style.cssText="padding:0;margin:0;border:0;display:none";b5=(ci[0].offsetHeight===0);ci[0].style.display="";ci[1].style.display="none";cf.reliableHiddenOffsets=b5&&(ci[0].offsetHeight===0);ck.innerHTML="";ck.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";cf.boxSizing=(ck.offsetWidth===4);cf.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==1);if(a6.getComputedStyle){cf.pixelPosition=(a6.getComputedStyle(ck,null)||{}).top!=="1%";cf.boxSizingReliable=(a6.getComputedStyle(ck,null)||{width:"4px"}).width==="4px";cj=t.createElement("div");cj.style.cssText=ck.style.cssText=ch;cj.style.marginRight=cj.style.width="0";ck.style.width="1px";ck.appendChild(cj);cf.reliableMarginRight=!parseFloat((a6.getComputedStyle(cj,null)||{}).marginRight)}if(typeof ck.style.zoom!=="undefined"){ck.innerHTML="";ck.style.cssText=ch+"width:1px;padding:1px;display:inline;zoom:1";cf.inlineBlockNeedsLayout=(ck.offsetWidth===3);ck.style.display="block";ck.style.overflow="visible";ck.innerHTML="<div></div>";ck.firstChild.style.width="5px";cf.shrinkWrapBlocks=(ck.offsetWidth!==3);cg.style.zoom=1}e.removeChild(cg);cg=ck=ci=cj=null});ca.removeChild(b4);ce=cc=cd=b6=cb=ca=b4=null;return cf})();var bx=/^(?:\{.*\}|\[.*\])$/,aP=/([A-Z])/g;bK.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(bK.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?bK.cache[e[bK.expando]]:e[bK.expando];return !!e&&!S(e)},data:function(b5,b3,b7,b6){if(!bK.acceptData(b5)){return}var b8,ca,cb=bK.expando,b9=typeof b3==="string",cc=b5.nodeType,e=cc?bK.cache:b5,b4=cc?b5[cb]:b5[cb]&&cb;if((!b4||!e[b4]||(!b6&&!e[b4].data))&&b9&&b7===aF){return}if(!b4){if(cc){b5[cb]=b4=bK.deletedIds.pop()||++bK.uuid}else{b4=cb}}if(!e[b4]){e[b4]={};if(!cc){e[b4].toJSON=bK.noop}}if(typeof b3==="object"||typeof b3==="function"){if(b6){e[b4]=bK.extend(e[b4],b3)}else{e[b4].data=bK.extend(e[b4].data,b3)}}b8=e[b4];if(!b6){if(!b8.data){b8.data={}}b8=b8.data}if(b7!==aF){b8[bK.camelCase(b3)]=b7}if(b9){ca=b8[b3];if(ca==null){ca=b8[bK.camelCase(b3)]}}else{ca=b8}return ca},removeData:function(b5,b3,b6){if(!bK.acceptData(b5)){return}var b9,b8,b7,ca=b5.nodeType,e=ca?bK.cache:b5,b4=ca?b5[bK.expando]:bK.expando;if(!e[b4]){return}if(b3){b9=b6?e[b4]:e[b4].data;if(b9){if(!bK.isArray(b3)){if(b3 in b9){b3=[b3]}else{b3=bK.camelCase(b3);if(b3 in b9){b3=[b3]}else{b3=b3.split(" ")}}}for(b8=0,b7=b3.length;b8<b7;b8++){delete b9[b3[b8]]}if(!(b6?S:bK.isEmptyObject)(b9)){return}}}if(!b6){delete e[b4].data;if(!S(e[b4])){return}}if(ca){bK.cleanData([b5],true)}else{if(bK.support.deleteExpando||e!=e.window){delete e[b4]}else{e[b4]=null}}},_data:function(b3,e,b4){return bK.data(b3,e,b4,true)},acceptData:function(b3){var e=b3.nodeName&&bK.noData[b3.nodeName.toLowerCase()];return !e||e!==true&&b3.getAttribute("classid")===e}});bK.fn.extend({data:function(cb,ca){var b6,b3,b9,e,b5,b4=this[0],b8=0,b7=null;if(cb===aF){if(this.length){b7=bK.data(b4);if(b4.nodeType===1&&!bK._data(b4,"parsedAttrs")){b9=b4.attributes;for(b5=b9.length;b8<b5;b8++){e=b9[b8].name;if(e.indexOf("data-")===0){e=bK.camelCase(e.substring(5));bz(b4,e,b7[e])}}bK._data(b4,"parsedAttrs",true)}}return b7}if(typeof cb==="object"){return this.each(function(){bK.data(this,cb)})}b6=cb.split(".",2);b6[1]=b6[1]?"."+b6[1]:"";b3=b6[1]+"!";return bK.access(this,function(cc){if(cc===aF){b7=this.triggerHandler("getData"+b3,[b6[0]]);if(b7===aF&&b4){b7=bK.data(b4,cb);b7=bz(b4,cb,b7)}return b7===aF&&b6[1]?this.data(b6[0]):b7}b6[1]=cc;this.each(function(){var cd=bK(this);cd.triggerHandler("setData"+b3,b6);bK.data(this,cb,cc);cd.triggerHandler("changeData"+b3,b6)})},null,ca,arguments.length>1,null,false)},removeData:function(e){return this.each(function(){bK.removeData(this,e)})}});function bz(b5,b4,b6){if(b6===aF&&b5.nodeType===1){var b3="data-"+b4.replace(aP,"-$1").toLowerCase();b6=b5.getAttribute(b3);if(typeof b6==="string"){try{b6=b6==="true"?true:b6==="false"?false:b6==="null"?null:+b6+""===b6?+b6:bx.test(b6)?bK.parseJSON(b6):b6}catch(b7){}bK.data(b5,b4,b6)}else{b6=aF}}return b6}function S(b3){var e;for(e in b3){if(e==="data"&&bK.isEmptyObject(b3[e])){continue}if(e!=="toJSON"){return false}}return true}bK.extend({queue:function(b4,b3,b5){var e;if(b4){b3=(b3||"fx")+"queue";e=bK._data(b4,b3);if(b5){if(!e||bK.isArray(b5)){e=bK._data(b4,b3,bK.makeArray(b5))}else{e.push(b5)}}return e||[]}},dequeue:function(b7,b6){b6=b6||"fx";var b3=bK.queue(b7,b6),b5=b3.shift(),e=bK._queueHooks(b7,b6),b4=function(){bK.dequeue(b7,b6)};if(b5==="inprogress"){b5=b3.shift()}if(b5){if(b6==="fx"){b3.unshift("inprogress")}delete e.stop;b5.call(b7,b4,e)}if(!b3.length&&e){e.empty.fire()}},_queueHooks:function(b4,b3){var e=b3+"queueHooks";return bK._data(b4,e)||bK._data(b4,e,{empty:bK.Callbacks("once memory").add(function(){bK.removeData(b4,b3+"queue",true);bK.removeData(b4,e,true)})})}});bK.fn.extend({queue:function(e,b3){var b4=2;if(typeof e!=="string"){b3=e;e="fx";b4--}if(arguments.length<b4){return bK.queue(this[0],e)}return b3===aF?this:this.each(function(){var b5=bK.queue(this,e,b3);bK._queueHooks(this,e);if(e==="fx"&&b5[0]!=="inprogress"){bK.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bK.dequeue(this,e)})},delay:function(b3,e){b3=bK.fx?bK.fx.speeds[b3]||b3:b3;e=e||"fx";return this.queue(e,function(b5,b4){var b6=setTimeout(b5,b3);b4.stop=function(){clearTimeout(b6)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(b4,b8){var b3,b5=1,b9=bK.Deferred(),b7=this,e=this.length,b6=function(){if(!(--b5)){b9.resolveWith(b7,[b7])}};if(typeof b4!=="string"){b8=b4;b4=aF}b4=b4||"fx";while(e--){if((b3=bK._data(b7[e],b4+"queueHooks"))&&b3.empty){b5++;b3.empty.add(b6)}}b6();return b9.promise(b8)}});var bb,bZ,r,bN=/[\t\r\n]/g,am=/\r/g,m=/^(?:button|input)$/i,aE=/^(?:button|input|object|select|textarea)$/i,I=/^a(?:rea|)$/i,Q=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bP=bK.support.getSetAttribute;bK.fn.extend({attr:function(e,b3){return bK.access(this,bK.attr,e,b3,arguments.length>1)},removeAttr:function(e){return this.each(function(){bK.removeAttr(this,e)})},prop:function(e,b3){return bK.access(this,bK.prop,e,b3,arguments.length>1)},removeProp:function(e){e=bK.propFix[e]||e;return this.each(function(){try{this[e]=aF;delete this[e]}catch(b3){}})},addClass:function(b6){var b8,b4,b3,b5,b7,b9,e;if(bK.isFunction(b6)){return this.each(function(ca){bK(this).addClass(b6.call(this,ca,this.className))})}if(b6&&typeof b6==="string"){b8=b6.split(aZ);for(b4=0,b3=this.length;b4<b3;b4++){b5=this[b4];if(b5.nodeType===1){if(!b5.className&&b8.length===1){b5.className=b6}else{b7=" "+b5.className+" ";for(b9=0,e=b8.length;b9<e;b9++){if(!~b7.indexOf(" "+b8[b9]+" ")){b7+=b8[b9]+" "}}b5.className=bK.trim(b7)}}}}return this},removeClass:function(b8){var b5,b6,b7,b9,b3,b4,e;if(bK.isFunction(b8)){return this.each(function(ca){bK(this).removeClass(b8.call(this,ca,this.className))})}if((b8&&typeof b8==="string")||b8===aF){b5=(b8||"").split(aZ);for(b4=0,e=this.length;b4<e;b4++){b7=this[b4];if(b7.nodeType===1&&b7.className){b6=(" "+b7.className+" ").replace(bN," ");for(b9=0,b3=b5.length;b9<b3;b9++){while(b6.indexOf(" "+b5[b9]+" ")>-1){b6=b6.replace(" "+b5[b9]+" "," ")}}b7.className=b8?bK.trim(b6):""}}}return this},toggleClass:function(b5,b3){var b4=typeof b5,e=typeof b3==="boolean";if(bK.isFunction(b5)){return this.each(function(b6){bK(this).toggleClass(b5.call(this,b6,this.className,b3),b3)})}return this.each(function(){if(b4==="string"){var b8,b7=0,b6=bK(this),b9=b3,ca=b5.split(aZ);while((b8=ca[b7++])){b9=e?b9:!b6.hasClass(b8);b6[b9?"addClass":"removeClass"](b8)}}else{if(b4==="undefined"||b4==="boolean"){if(this.className){bK._data(this,"__className__",this.className)}this.className=this.className||b5===false?"":bK._data(this,"__className__")||""}}})},hasClass:function(e){var b5=" "+e+" ",b4=0,b3=this.length;for(;b4<b3;b4++){if(this[b4].nodeType===1&&(" "+this[b4].className+" ").replace(bN," ").indexOf(b5)>-1){return true}}return false},val:function(b5){var e,b3,b6,b4=this[0];if(!arguments.length){if(b4){e=bK.valHooks[b4.type]||bK.valHooks[b4.nodeName.toLowerCase()];if(e&&"get" in e&&(b3=e.get(b4,"value"))!==aF){return b3}b3=b4.value;return typeof b3==="string"?b3.replace(am,""):b3==null?"":b3}return}b6=bK.isFunction(b5);return this.each(function(b8){var b9,b7=bK(this);if(this.nodeType!==1){return}if(b6){b9=b5.call(this,b8,b7.val())}else{b9=b5}if(b9==null){b9=""}else{if(typeof b9==="number"){b9+=""}else{if(bK.isArray(b9)){b9=bK.map(b9,function(ca){return ca==null?"":ca+""})}}}e=bK.valHooks[this.type]||bK.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,b9,"value")===aF){this.value=b9}})}});bK.extend({valHooks:{option:{get:function(e){var b3=e.attributes.value;return !b3||b3.specified?e.value:e.text}},select:{get:function(e){var b8,b3,b7,b5,b6=e.selectedIndex,b9=[],ca=e.options,b4=e.type==="select-one";if(b6<0){return null}b3=b4?b6:0;b7=b4?b6+1:ca.length;for(;b3<b7;b3++){b5=ca[b3];if(b5.selected&&(bK.support.optDisabled?!b5.disabled:b5.getAttribute("disabled")===null)&&(!b5.parentNode.disabled||!bK.nodeName(b5.parentNode,"optgroup"))){b8=bK(b5).val();if(b4){return b8}b9.push(b8)}}if(b4&&!b9.length&&ca.length){return bK(ca[b6]).val()}return b9},set:function(b3,b4){var e=bK.makeArray(b4);bK(b3).find("option").each(function(){this.selected=bK.inArray(bK(this).val(),e)>=0});if(!e.length){b3.selectedIndex=-1}return e}}},attrFn:{},attr:function(b8,b5,b9,b7){var b4,e,b6,b3=b8.nodeType;if(!b8||b3===3||b3===8||b3===2){return}if(b7&&bK.isFunction(bK.fn[b5])){return bK(b8)[b5](b9)}if(typeof b8.getAttribute==="undefined"){return bK.prop(b8,b5,b9)}b6=b3!==1||!bK.isXMLDoc(b8);if(b6){b5=b5.toLowerCase();e=bK.attrHooks[b5]||(Q.test(b5)?bZ:bb)}if(b9!==aF){if(b9===null){bK.removeAttr(b8,b5);return}else{if(e&&"set" in e&&b6&&(b4=e.set(b8,b9,b5))!==aF){return b4}else{b8.setAttribute(b5,""+b9);return b9}}}else{if(e&&"get" in e&&b6&&(b4=e.get(b8,b5))!==null){return b4}else{b4=b8.getAttribute(b5);return b4===null?aF:b4}}},removeAttr:function(b5,b7){var b6,b8,b3,e,b4=0;if(b7&&b5.nodeType===1){b8=b7.split(aZ);for(;b4<b8.length;b4++){b3=b8[b4];if(b3){b6=bK.propFix[b3]||b3;e=Q.test(b3);if(!e){bK.attr(b5,b3,"")}b5.removeAttribute(bP?b3:b6);if(e&&b6 in b5){b5[b6]=false}}}}},attrHooks:{type:{set:function(e,b3){if(m.test(e.nodeName)&&e.parentNode){bK.error("type property can't be changed")}else{if(!bK.support.radioValue&&b3==="radio"&&bK.nodeName(e,"input")){var b4=e.value;e.setAttribute("type",b3);if(b4){e.value=b4}return b3}}}},value:{get:function(b3,e){if(bb&&bK.nodeName(b3,"button")){return bb.get(b3,e)}return e in b3?b3.value:null},set:function(b3,b4,e){if(bb&&bK.nodeName(b3,"button")){return bb.set(b3,b4,e)}b3.value=b4}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b7,b5,b8){var b4,e,b6,b3=b7.nodeType;if(!b7||b3===3||b3===8||b3===2){return}b6=b3!==1||!bK.isXMLDoc(b7);if(b6){b5=bK.propFix[b5]||b5;e=bK.propHooks[b5]}if(b8!==aF){if(e&&"set" in e&&(b4=e.set(b7,b8,b5))!==aF){return b4}else{return(b7[b5]=b8)}}else{if(e&&"get" in e&&(b4=e.get(b7,b5))!==null){return b4}else{return b7[b5]}}},propHooks:{tabIndex:{get:function(b3){var e=b3.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):aE.test(b3.nodeName)||I.test(b3.nodeName)&&b3.href?0:aF}}}});bZ={get:function(b3,e){var b5,b4=bK.prop(b3,e);return b4===true||typeof b4!=="boolean"&&(b5=b3.getAttributeNode(e))&&b5.nodeValue!==false?e.toLowerCase():aF},set:function(b3,b5,e){var b4;if(b5===false){bK.removeAttr(b3,e)}else{b4=bK.propFix[e]||e;if(b4 in b3){b3[b4]=true}b3.setAttribute(e,e.toLowerCase())}return e}};if(!bP){r={name:true,id:true,coords:true};bb=bK.valHooks.button={get:function(b4,b3){var e;e=b4.getAttributeNode(b3);return e&&(r[b3]?e.value!=="":e.specified)?e.value:aF},set:function(b4,b5,b3){var e=b4.getAttributeNode(b3);if(!e){e=t.createAttribute(b3);b4.setAttributeNode(e)}return(e.value=b5+"")}};bK.each(["width","height"],function(b3,e){bK.attrHooks[e]=bK.extend(bK.attrHooks[e],{set:function(b4,b5){if(b5===""){b4.setAttribute(e,"auto");return b5}}})});bK.attrHooks.contenteditable={get:bb.get,set:function(b3,b4,e){if(b4===""){b4="false"}bb.set(b3,b4,e)}}}if(!bK.support.hrefNormalized){bK.each(["href","src","width","height"],function(b3,e){bK.attrHooks[e]=bK.extend(bK.attrHooks[e],{get:function(b5){var b4=b5.getAttribute(e,2);return b4===null?aF:b4}})})}if(!bK.support.style){bK.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||aF},set:function(e,b3){return(e.style.cssText=""+b3)}}}if(!bK.support.optSelected){bK.propHooks.selected=bK.extend(bK.propHooks.selected,{get:function(b3){var e=b3.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!bK.support.enctype){bK.propFix.enctype="encoding"}if(!bK.support.checkOn){bK.each(["radio","checkbox"],function(){bK.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}bK.each(["radio","checkbox"],function(){bK.valHooks[this]=bK.extend(bK.valHooks[this],{set:function(e,b3){if(bK.isArray(b3)){return(e.checked=bK.inArray(bK(e).val(),b3)>=0)}}})});var bI=/^(?:textarea|input|select)$/i,bv=/^([^\.]*|)(?:\.(.+)|)$/,be=/(?:^|\s)hover(\.\S+|)\b/,a7=/^key/,bO=/^(?:mouse|contextmenu)|click/,bC=/^(?:focusinfocus|focusoutblur)$/,av=function(e){return bK.event.special.hover?e:e.replace(be,"mouseenter$1 mouseleave$1")};bK.event={add:function(b5,b9,cg,b7,b6){var ca,b8,ch,cf,ce,cc,e,cd,b3,b4,cb;if(b5.nodeType===3||b5.nodeType===8||!b9||!cg||!(ca=bK._data(b5))){return}if(cg.handler){b3=cg;cg=b3.handler;b6=b3.selector}if(!cg.guid){cg.guid=bK.guid++}ch=ca.events;if(!ch){ca.events=ch={}}b8=ca.handle;if(!b8){ca.handle=b8=function(ci){return typeof bK!=="undefined"&&(!ci||bK.event.triggered!==ci.type)?bK.event.dispatch.apply(b8.elem,arguments):aF};b8.elem=b5}b9=bK.trim(av(b9)).split(" ");for(cf=0;cf<b9.length;cf++){ce=bv.exec(b9[cf])||[];cc=ce[1];e=(ce[2]||"").split(".").sort();cb=bK.event.special[cc]||{};cc=(b6?cb.delegateType:cb.bindType)||cc;cb=bK.event.special[cc]||{};cd=bK.extend({type:cc,origType:ce[1],data:b7,handler:cg,guid:cg.guid,selector:b6,namespace:e.join(".")},b3);b4=ch[cc];if(!b4){b4=ch[cc]=[];b4.delegateCount=0;if(!cb.setup||cb.setup.call(b5,b7,e,b8)===false){if(b5.addEventListener){b5.addEventListener(cc,b8,false)}else{if(b5.attachEvent){b5.attachEvent("on"+cc,b8)}}}}if(cb.add){cb.add.call(b5,cd);if(!cd.handler.guid){cd.handler.guid=cg.guid}}if(b6){b4.splice(b4.delegateCount++,0,cd)}else{b4.push(cd)}bK.event.global[cc]=true}b5=null},global:{},remove:function(b5,ca,cg,b6,b9){var ch,ci,cd,b4,b3,b7,b8,cf,cc,e,ce,cb=bK.hasData(b5)&&bK._data(b5);if(!cb||!(cf=cb.events)){return}ca=bK.trim(av(ca||"")).split(" ");for(ch=0;ch<ca.length;ch++){ci=bv.exec(ca[ch])||[];cd=b4=ci[1];b3=ci[2];if(!cd){for(cd in cf){bK.event.remove(b5,cd+ca[ch],cg,b6,true)}continue}cc=bK.event.special[cd]||{};cd=(b6?cc.delegateType:cc.bindType)||cd;e=cf[cd]||[];b7=e.length;b3=b3?new RegExp("(^|\\.)"+b3.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(b8=0;b8<e.length;b8++){ce=e[b8];if((b9||b4===ce.origType)&&(!cg||cg.guid===ce.guid)&&(!b3||b3.test(ce.namespace))&&(!b6||b6===ce.selector||b6==="**"&&ce.selector)){e.splice(b8--,1);if(ce.selector){e.delegateCount--}if(cc.remove){cc.remove.call(b5,ce)}}}if(e.length===0&&b7!==e.length){if(!cc.teardown||cc.teardown.call(b5,b3,cb.handle)===false){bK.removeEvent(b5,cd,cb.handle)}delete cf[cd]}}if(bK.isEmptyObject(cf)){delete cb.handle;bK.removeData(b5,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(b3,ca,b8,ch){if(b8&&(b8.nodeType===3||b8.nodeType===8)){return}var e,b5,cb,cf,b7,b6,cd,cc,b9,cg,ce=b3.type||b3,b4=[];if(bC.test(ce+bK.event.triggered)){return}if(ce.indexOf("!")>=0){ce=ce.slice(0,-1);b5=true}if(ce.indexOf(".")>=0){b4=ce.split(".");ce=b4.shift();b4.sort()}if((!b8||bK.event.customEvent[ce])&&!bK.event.global[ce]){return}b3=typeof b3==="object"?b3[bK.expando]?b3:new bK.Event(ce,b3):new bK.Event(ce);b3.type=ce;b3.isTrigger=true;b3.exclusive=b5;b3.namespace=b4.join(".");b3.namespace_re=b3.namespace?new RegExp("(^|\\.)"+b4.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b6=ce.indexOf(":")<0?"on"+ce:"";if(!b8){e=bK.cache;for(cb in e){if(e[cb].events&&e[cb].events[ce]){bK.event.trigger(b3,ca,e[cb].handle.elem,true)}}return}b3.result=aF;if(!b3.target){b3.target=b8}ca=ca!=null?bK.makeArray(ca):[];ca.unshift(b3);cd=bK.event.special[ce]||{};if(cd.trigger&&cd.trigger.apply(b8,ca)===false){return}b9=[[b8,cd.bindType||ce]];if(!ch&&!cd.noBubble&&!bK.isWindow(b8)){cg=cd.delegateType||ce;cf=bC.test(cg+ce)?b8:b8.parentNode;for(b7=b8;cf;cf=cf.parentNode){b9.push([cf,cg]);b7=cf}if(b7===(b8.ownerDocument||t)){b9.push([b7.defaultView||b7.parentWindow||a6,cg])}}for(cb=0;cb<b9.length&&!b3.isPropagationStopped();cb++){cf=b9[cb][0];b3.type=b9[cb][1];cc=(bK._data(cf,"events")||{})[b3.type]&&bK._data(cf,"handle");if(cc){cc.apply(cf,ca)}cc=b6&&cf[b6];if(cc&&bK.acceptData(cf)&&cc.apply(cf,ca)===false){b3.preventDefault()}}b3.type=ce;if(!ch&&!b3.isDefaultPrevented()){if((!cd._default||cd._default.apply(b8.ownerDocument,ca)===false)&&!(ce==="click"&&bK.nodeName(b8,"a"))&&bK.acceptData(b8)){if(b6&&b8[ce]&&((ce!=="focus"&&ce!=="blur")||b3.target.offsetWidth!==0)&&!bK.isWindow(b8)){b7=b8[b6];if(b7){b8[b6]=null}bK.event.triggered=ce;b8[ce]();bK.event.triggered=aF;if(b7){b8[b6]=b7}}}}return b3.result},dispatch:function(cf){cf=bK.event.fix(cf||a6.event);var ch,ce,b6,b8,ci,cg,b9,b4,e,cd,cj,cb=((bK._data(this,"events")||{})[cf.type]||[]),ca=cb.delegateCount,b5=[].slice.call(arguments),cc=!cf.exclusive&&!cf.namespace,b7=bK.event.special[cf.type]||{},b3=[];b5[0]=cf;cf.delegateTarget=this;if(b7.preDispatch&&b7.preDispatch.call(this,cf)===false){return}if(ca&&!(cf.button&&cf.type==="click")){b8=bK(this);b8.context=this;for(b6=cf.target;b6!=this;b6=b6.parentNode||this){if(b6.disabled!==true||cf.type!=="click"){cg={};b4=[];b8[0]=b6;for(ch=0;ch<ca;ch++){e=cb[ch];cd=e.selector;if(cg[cd]===aF){cg[cd]=b8.is(cd)}if(cg[cd]){b4.push(e)}}if(b4.length){b3.push({elem:b6,matches:b4})}}}}if(cb.length>ca){b3.push({elem:this,matches:cb.slice(ca)})}for(ch=0;ch<b3.length&&!cf.isPropagationStopped();ch++){b9=b3[ch];cf.currentTarget=b9.elem;for(ce=0;ce<b9.matches.length&&!cf.isImmediatePropagationStopped();ce++){e=b9.matches[ce];if(cc||(!cf.namespace&&!e.namespace)||cf.namespace_re&&cf.namespace_re.test(e.namespace)){cf.data=e.data;cf.handleObj=e;ci=((bK.event.special[e.origType]||{}).handle||e.handler).apply(b9.elem,b5);if(ci!==aF){cf.result=ci;if(ci===false){cf.preventDefault();cf.stopPropagation()}}}}}if(b7.postDispatch){b7.postDispatch.call(this,cf)}return cf.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b3,e){if(b3.which==null){b3.which=e.charCode!=null?e.charCode:e.keyCode}return b3}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b5,b4){var b6,b7,e,b3=b4.button,b8=b4.fromElement;if(b5.pageX==null&&b4.clientX!=null){b6=b5.target.ownerDocument||t;b7=b6.documentElement;e=b6.body;b5.pageX=b4.clientX+(b7&&b7.scrollLeft||e&&e.scrollLeft||0)-(b7&&b7.clientLeft||e&&e.clientLeft||0);b5.pageY=b4.clientY+(b7&&b7.scrollTop||e&&e.scrollTop||0)-(b7&&b7.clientTop||e&&e.clientTop||0)}if(!b5.relatedTarget&&b8){b5.relatedTarget=b8===b5.target?b4.toElement:b8}if(!b5.which&&b3!==aF){b5.which=(b3&1?1:(b3&2?3:(b3&4?2:0)))}return b5}},fix:function(b4){if(b4[bK.expando]){return b4}var b3,b7,e=b4,b5=bK.event.fixHooks[b4.type]||{},b6=b5.props?this.props.concat(b5.props):this.props;b4=bK.Event(e);for(b3=b6.length;b3;){b7=b6[--b3];b4[b7]=e[b7]}if(!b4.target){b4.target=e.srcElement||t}if(b4.target.nodeType===3){b4.target=b4.target.parentNode}b4.metaKey=!!b4.metaKey;return b5.filter?b5.filter(b4,e):b4},special:{ready:{setup:bK.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b4,b3,e){if(bK.isWindow(this)){this.onbeforeunload=e}},teardown:function(b3,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}},simulate:function(b4,b6,b5,b3){var b7=bK.extend(new bK.Event(),b5,{type:b4,isSimulated:true,originalEvent:{}});if(b3){bK.event.trigger(b7,null,b6)}else{bK.event.dispatch.call(b6,b7)}if(b7.isDefaultPrevented()){b5.preventDefault()}}};bK.event.handle=bK.event.dispatch;bK.removeEvent=t.removeEventListener?function(b3,e,b4){if(b3.removeEventListener){b3.removeEventListener(e,b4,false)}}:function(b4,b3,b5){var e="on"+b3;if(b4.detachEvent){if(typeof b4[e]==="undefined"){b4[e]=null}b4.detachEvent(e,b5)}};bK.Event=function(b3,e){if(!(this instanceof bK.Event)){return new bK.Event(b3,e)}if(b3&&b3.type){this.originalEvent=b3;this.type=b3.type;this.isDefaultPrevented=(b3.defaultPrevented||b3.returnValue===false||b3.getPreventDefault&&b3.getPreventDefault())?V:ab}else{this.type=b3}if(e){bK.extend(this,e)}this.timeStamp=b3&&b3.timeStamp||bK.now();this[bK.expando]=true};function ab(){return false}function V(){return true}bK.Event.prototype={preventDefault:function(){this.isDefaultPrevented=V;var b3=this.originalEvent;if(!b3){return}if(b3.preventDefault){b3.preventDefault()}else{b3.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=V;var b3=this.originalEvent;if(!b3){return}if(b3.stopPropagation){b3.stopPropagation()}b3.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=V;this.stopPropagation()},isDefaultPrevented:ab,isPropagationStopped:ab,isImmediatePropagationStopped:ab};bK.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b3,e){bK.event.special[b3]={delegateType:e,bindType:e,handle:function(b7){var b5,b9=this,b8=b7.relatedTarget,b6=b7.handleObj,b4=b6.selector;if(!b8||(b8!==b9&&!bK.contains(b9,b8))){b7.type=b6.origType;b5=b6.handler.apply(this,arguments);b7.type=e}return b5}}});if(!bK.support.submitBubbles){bK.event.special.submit={setup:function(){if(bK.nodeName(this,"form")){return false}bK.event.add(this,"click._submit keypress._submit",function(b5){var b4=b5.target,b3=bK.nodeName(b4,"input")||bK.nodeName(b4,"button")?b4.form:aF;if(b3&&!bK._data(b3,"_submit_attached")){bK.event.add(b3,"submit._submit",function(e){e._submit_bubble=true});bK._data(b3,"_submit_attached",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bK.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(bK.nodeName(this,"form")){return false}bK.event.remove(this,"._submit")}}}if(!bK.support.changeBubbles){bK.event.special.change={setup:function(){if(bI.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bK.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});bK.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bK.event.simulate("change",this,e,true)})}return false}bK.event.add(this,"beforeactivate._change",function(b4){var b3=b4.target;if(bI.test(b3.nodeName)&&!bK._data(b3,"_change_attached")){bK.event.add(b3,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bK.event.simulate("change",this.parentNode,e,true)}});bK._data(b3,"_change_attached",true)}})},handle:function(b3){var e=b3.target;if(this!==e||b3.isSimulated||b3.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return b3.handleObj.handler.apply(this,arguments)}},teardown:function(){bK.event.remove(this,"._change");return bI.test(this.nodeName)}}}if(!bK.support.focusinBubbles){bK.each({focus:"focusin",blur:"focusout"},function(b5,e){var b3=0,b4=function(b6){bK.event.simulate(e,b6.target,bK.event.fix(b6),true)};bK.event.special[e]={setup:function(){if(b3++===0){t.addEventListener(b5,b4,true)}},teardown:function(){if(--b3===0){t.removeEventListener(b5,b4,true)}}}})}bK.fn.extend({on:function(b4,e,b7,b6,b3){var b8,b5;if(typeof b4==="object"){if(typeof e!=="string"){b7=b7||e;e=aF}for(b5 in b4){this.on(b5,e,b7,b4[b5],b3)}return this}if(b7==null&&b6==null){b6=e;b7=e=aF}else{if(b6==null){if(typeof e==="string"){b6=b7;b7=aF}else{b6=b7;b7=e;e=aF}}}if(b6===false){b6=ab}else{if(!b6){return this}}if(b3===1){b8=b6;b6=function(b9){bK().off(b9);return b8.apply(this,arguments)};b6.guid=b8.guid||(b8.guid=bK.guid++)}return this.each(function(){bK.event.add(this,b4,b6,b7,e)})},one:function(b3,e,b5,b4){return this.on(b3,e,b5,b4,1)},off:function(b4,e,b6){var b3,b5;if(b4&&b4.preventDefault&&b4.handleObj){b3=b4.handleObj;bK(b4.delegateTarget).off(b3.namespace?b3.origType+"."+b3.namespace:b3.origType,b3.selector,b3.handler);return this}if(typeof b4==="object"){for(b5 in b4){this.off(b5,e,b4[b5])}return this}if(e===false||typeof e==="function"){b6=e;e=aF}if(b6===false){b6=ab}return this.each(function(){bK.event.remove(this,b4,b6,e)})},bind:function(e,b4,b3){return this.on(e,null,b4,b3)},unbind:function(e,b3){return this.off(e,null,b3)},live:function(e,b4,b3){bK(this.context).on(e,this.selector,b4,b3);return this},die:function(e,b3){bK(this.context).off(e,this.selector||"**",b3);return this},delegate:function(e,b3,b5,b4){return this.on(b3,e,b5,b4)},undelegate:function(e,b3,b4){return arguments.length==1?this.off(e,"**"):this.off(b3,e||"**",b4)},trigger:function(e,b3){return this.each(function(){bK.event.trigger(e,b3,this)})},triggerHandler:function(e,b3){if(this[0]){return bK.event.trigger(e,b3,this[0],true)}},toggle:function(b5){var b3=arguments,e=b5.guid||bK.guid++,b4=0,b6=function(b7){var b8=(bK._data(this,"lastToggle"+b5.guid)||0)%b4;bK._data(this,"lastToggle"+b5.guid,b8+1);b7.preventDefault();return b3[b8].apply(this,arguments)||false};b6.guid=e;while(b4<b3.length){b3[b4++].guid=e}return this.click(b6)},hover:function(e,b3){return this.mouseenter(e).mouseleave(b3||e)}});bK.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b3,e){bK.fn[e]=function(b5,b4){if(b4==null){b4=b5;b5=null}return arguments.length>0?this.on(e,null,b5,b4):this.trigger(e)};if(a7.test(e)){bK.event.fixHooks[e]=bK.event.keyHooks}if(bO.test(e)){bK.event.fixHooks[e]=bK.event.mouseHooks}});
/*
 * Sizzle CSS Selector Engine
 *  Copyright 2012 jQuery Foundation and other contributors
 *  Released under the MIT license
 *  http://sizzlejs.com/
 */
(function(cS,ck){var cX,cs,cj,b6,cc,ca=cS.document,cd=ca.documentElement,cA="undefined",ce=false,cb=true,ci=0,cn=[].slice,cW=[].push,c0=("sizcache"+Math.random()).replace(".",""),cD="[\\x20\\t\\r\\n\\f]",cm="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",cl=cm.replace("w","w#"),c5="([*^$|!~]?=)",cP="\\["+cD+"*("+cm+")"+cD+"*(?:"+c5+cD+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cl+")|)|)"+cD+"*\\]",c6=":("+cm+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",cF=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",ch=cD+"*([\\x20\\t\\r\\n\\f>+~])"+cD+"*",cg="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+cP+"|"+c6.replace(2,7)+"|[^\\\\(),])+",cY=new RegExp("^"+cD+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cD+"+$","g"),cJ=new RegExp("^"+ch),cx=new RegExp(cg+"?(?="+cD+"*,|$)","g"),cN=new RegExp("^(?:(?!,)(?:(?:^|,)"+cD+"*"+cg+")*?|"+cD+"*(.*?))(\\)|$)"),c3=new RegExp(cg.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+ch,"g"),cO=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cT=/[\x20\t\r\n\f]*[+~]/,c1=/:not\($/,ct=/h\d/i,cQ=/input|select|textarea|button/i,cw=/\\(?!\\)/g,cI={ID:new RegExp("^#("+cm+")"),CLASS:new RegExp("^\\.("+cm+")"),NAME:new RegExp("^\\[name=['\"]?("+cm+")['\"]?\\]"),TAG:new RegExp("^("+cm.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+cP),PSEUDO:new RegExp("^"+c6),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+cD+"*(even|odd|(([+-]|)(\\d*)n|)"+cD+"*(?:([+-]|)"+cD+"*(\\d+)|))"+cD+"*\\)|)","i"),POS:new RegExp(cF,"ig"),needsContext:new RegExp("^"+cD+"*[>+~]|"+cF,"i")},cV={},cu=[],cp={},cy=[],c2=function(e){e.sizzleFilter=true;return e},b7=function(e){return function(c7){return c7.nodeName.toLowerCase()==="input"&&c7.type===e}},cv=function(e){return function(c8){var c7=c8.nodeName.toLowerCase();return(c7==="input"||c7==="button")&&c8.type===e}},cL=function(c7){var c8=false,da=ca.createElement("div");try{c8=c7(da)}catch(c9){}da=null;return c8},cr=cL(function(c7){c7.innerHTML="<select></select>";var e=typeof c7.lastChild.getAttribute("multiple");return e!=="boolean"&&e!=="string"}),b4=cL(function(c7){c7.id=c0+0;c7.innerHTML="<a name='"+c0+"'></a><div name='"+c0+"'></div>";cd.insertBefore(c7,cd.firstChild);var e=ca.getElementsByName&&ca.getElementsByName(c0).length===2+ca.getElementsByName(c0+0).length;cc=!ca.getElementById(c0);cd.removeChild(c7);return e}),b9=cL(function(e){e.appendChild(ca.createComment(""));return e.getElementsByTagName("*").length===0}),cH=cL(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild&&typeof e.firstChild.getAttribute!==cA&&e.firstChild.getAttribute("href")==="#"}),cG=cL(function(e){e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return false}e.lastChild.className="e";return e.getElementsByClassName("e").length!==1});var cR=function(c9,e,dc,df){dc=dc||[];e=e||ca;var dd,c7,de,c8,da=e.nodeType;if(da!==1&&da!==9){return[]}if(!c9||typeof c9!=="string"){return dc}de=co(e);if(!de&&!df){if((dd=cO.exec(c9))){if((c8=dd[1])){if(da===9){c7=e.getElementById(c8);if(c7&&c7.parentNode){if(c7.id===c8){dc.push(c7);return dc}}else{return dc}}else{if(e.ownerDocument&&(c7=e.ownerDocument.getElementById(c8))&&cE(e,c7)&&c7.id===c8){dc.push(c7);return dc}}}else{if(dd[2]){cW.apply(dc,cn.call(e.getElementsByTagName(c9),0));return dc}else{if((c8=dd[3])&&cG&&e.getElementsByClassName){cW.apply(dc,cn.call(e.getElementsByClassName(c8),0));return dc}}}}}return cZ(c9,e,dc,df,de)};var cK=cR.selectors={cacheLength:50,match:cI,order:["ID","TAG"],attrHandle:{},createPseudo:c2,find:{ID:cc?function(c9,c8,c7){if(typeof c8.getElementById!==cA&&!c7){var e=c8.getElementById(c9);return e&&e.parentNode?[e]:[]}}:function(c9,c8,c7){if(typeof c8.getElementById!==cA&&!c7){var e=c8.getElementById(c9);return e?e.id===c9||typeof e.getAttributeNode!==cA&&e.getAttributeNode("id").value===c9?[e]:ck:[]}},TAG:b9?function(e,c7){if(typeof c7.getElementsByTagName!==cA){return c7.getElementsByTagName(e)}}:function(e,da){var c9=da.getElementsByTagName(e);if(e==="*"){var dc,c8=[],c7=0;for(;(dc=c9[c7]);c7++){if(dc.nodeType===1){c8.push(dc)}}return c8}return c9}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(cw,"");e[3]=(e[4]||e[5]||"").replace(cw,"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1]==="nth"){if(!e[2]){cR.error(e[0])}e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd"));e[4]=+((e[6]+e[7])||e[2]==="odd")}else{if(e[2]){cR.error(e[0])}}return e},PSEUDO:function(e){var c7,c8=e[4];if(cI.CHILD.test(e[0])){return null}if(c8&&(c7=cN.exec(c8))&&c7.pop()){e[0]=e[0].slice(0,c7[0].length-c8.length-1);c8=c7[0].slice(0,-1)}e.splice(2,3,c8||e[3]);return e}},filter:{ID:cc?function(e){e=e.replace(cw,"");return function(c7){return c7.getAttribute("id")===e}}:function(e){e=e.replace(cw,"");return function(c8){var c7=typeof c8.getAttributeNode!==cA&&c8.getAttributeNode("id");return c7&&c7.value===e}},TAG:function(e){if(e==="*"){return function(){return true}}e=e.replace(cw,"").toLowerCase();return function(c7){return c7.nodeName&&c7.nodeName.toLowerCase()===e}},CLASS:function(e){var c7=cV[e];if(!c7){c7=cV[e]=new RegExp("(^|"+cD+")"+e+"("+cD+"|$)");cu.push(e);if(cu.length>cK.cacheLength){delete cV[cu.shift()]}}return function(c8){return c7.test(c8.className||(typeof c8.getAttribute!==cA&&c8.getAttribute("class"))||"")}},ATTR:function(c8,c7,e){if(!c7){return function(c9){return cR.attr(c9,c8)!=null}}return function(da){var c9=cR.attr(da,c8),dc=c9+"";if(c9==null){return c7==="!="}switch(c7){case"=":return dc===e;case"!=":return dc!==e;case"^=":return e&&dc.indexOf(e)===0;case"*=":return e&&dc.indexOf(e)>-1;case"$=":return e&&dc.substr(dc.length-e.length)===e;case"~=":return(" "+dc+" ").indexOf(e)>-1;case"|=":return dc===e||dc.substr(0,e.length+1)===e+"-"}}},CHILD:function(c7,c9,da,c8){if(c7==="nth"){var e=ci++;return function(df){var dc,dg,de=0,dd=df;if(da===1&&c8===0){return true}dc=df.parentNode;if(dc&&(dc[c0]!==e||!df.sizset)){for(dd=dc.firstChild;dd;dd=dd.nextSibling){if(dd.nodeType===1){dd.sizset=++de;if(dd===df){break}}}dc[c0]=e}dg=df.sizset-c8;if(da===0){return dg===0}else{return(dg%da===0&&dg/da>=0)}}}return function(dd){var dc=dd;switch(c7){case"only":case"first":while((dc=dc.previousSibling)){if(dc.nodeType===1){return false}}if(c7==="first"){return true}dc=dd;case"last":while((dc=dc.nextSibling)){if(dc.nodeType===1){return false}}return true}}},PSEUDO:function(da,c9,c7,e){var c8=cK.pseudos[da]||cK.pseudos[da.toLowerCase()];if(!c8){cR.error("unsupported pseudo: "+da)}if(!c8.sizzleFilter){return c8}return c8(c9,c7,e)}},pseudos:{not:c2(function(e,c8,c7){var c9=cf(e.replace(cY,"$1"),c8,c7);return function(da){return !c9(da)}}),enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var c7=e.nodeName.toLowerCase();return(c7==="input"&&!!e.checked)||(c7==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !cK.pseudos.empty(e)},empty:function(c7){var e;c7=c7.firstChild;while(c7){if(c7.nodeName>"@"||(e=c7.nodeType)===3||e===4){return false}c7=c7.nextSibling}return true},contains:c2(function(e){return function(c7){return(c7.textContent||c7.innerText||b3(c7)).indexOf(e)>-1}}),has:c2(function(e){return function(c7){return cR(e,c7).length>0}}),header:function(e){return ct.test(e.nodeName)},text:function(c8){var c7,e;return c8.nodeName.toLowerCase()==="input"&&(c7=c8.type)==="text"&&((e=c8.getAttribute("type"))==null||e.toLowerCase()===c7)},radio:b7("radio"),checkbox:b7("checkbox"),file:b7("file"),password:b7("password"),image:b7("image"),submit:cv("submit"),reset:cv("reset"),button:function(c7){var e=c7.nodeName.toLowerCase();return e==="input"&&c7.type==="button"||e==="button"},input:function(e){return cQ.test(e.nodeName)},focus:function(e){var c7=e.ownerDocument;return e===c7.activeElement&&(!c7.hasFocus||c7.hasFocus())&&!!(e.type||e.href)},active:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(c8,c7,e){return e?c8.slice(1):[c8[0]]},last:function(c9,c8,c7){var e=c9.pop();return c7?c9:[e]},even:function(dc,da,c9){var c8=[],c7=c9?1:0,e=dc.length;for(;c7<e;c7=c7+2){c8.push(dc[c7])}return c8},odd:function(dc,da,c9){var c8=[],c7=c9?0:1,e=dc.length;for(;c7<e;c7=c7+2){c8.push(dc[c7])}return c8},lt:function(c8,c7,e){return e?c8.slice(+c7):c8.slice(0,+c7)},gt:function(c8,c7,e){return e?c8.slice(0,+c7+1):c8.slice(+c7+1)},eq:function(c9,c8,c7){var e=c9.splice(+c8,1);return c7?c9:e}}};cK.setFilters.nth=cK.setFilters.eq;cK.filters=cK.pseudos;if(!cH){cK.attrHandle={href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}}}if(b4){cK.order.push("NAME");cK.find.NAME=function(e,c7){if(typeof c7.getElementsByName!==cA){return c7.getElementsByName(e)}}}if(cG){cK.order.splice(1,0,"CLASS");cK.find.CLASS=function(c8,c7,e){if(typeof c7.getElementsByClassName!==cA&&!e){return c7.getElementsByClassName(c8)}}}try{cn.call(cd.childNodes,0)[0].nodeType}catch(c4){cn=function(c7){var c8,e=[];for(;(c8=this[c7]);c7++){e.push(c8)}return e}}var co=cR.isXML=function(e){var c7=e&&(e.ownerDocument||e).documentElement;return c7?c7.nodeName!=="HTML":false};var cE=cR.contains=cd.compareDocumentPosition?function(c7,e){return !!(c7.compareDocumentPosition(e)&16)}:cd.contains?function(c7,e){var c9=c7.nodeType===9?c7.documentElement:c7,c8=e.parentNode;return c7===c8||!!(c8&&c8.nodeType===1&&c9.contains&&c9.contains(c8))}:function(c7,e){while((e=e.parentNode)){if(e===c7){return true}}return false};var b3=cR.getText=function(da){var c9,c7="",c8=0,e=da.nodeType;if(e){if(e===1||e===9||e===11){if(typeof da.textContent==="string"){return da.textContent}else{for(da=da.firstChild;da;da=da.nextSibling){c7+=b3(da)}}}else{if(e===3||e===4){return da.nodeValue}}}else{for(;(c9=da[c8]);c8++){c7+=b3(c9)}}return c7};cR.attr=function(c9,c8){var e,c7=co(c9);if(!c7){c8=c8.toLowerCase()}if(cK.attrHandle[c8]){return cK.attrHandle[c8](c9)}if(cr||c7){return c9.getAttribute(c8)}e=c9.getAttributeNode(c8);return e?typeof c9[c8]==="boolean"?c9[c8]?c8:null:e.specified?e.value:null:null};cR.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};[0,0].sort(function(){return(cb=0)});if(cd.compareDocumentPosition){cj=function(c7,e){if(c7===e){ce=true;return 0}return(!c7.compareDocumentPosition||!e.compareDocumentPosition?c7.compareDocumentPosition:c7.compareDocumentPosition(e)&4)?-1:1}}else{cj=function(df,de){if(df===de){ce=true;return 0}else{if(df.sourceIndex&&de.sourceIndex){return df.sourceIndex-de.sourceIndex}}var dc,c7,c8=[],e=[],da=df.parentNode,dd=de.parentNode,dg=da;if(da===dd){return b6(df,de)}else{if(!da){return -1}else{if(!dd){return 1}}}while(dg){c8.unshift(dg);dg=dg.parentNode}dg=dd;while(dg){e.unshift(dg);dg=dg.parentNode}dc=c8.length;c7=e.length;for(var c9=0;c9<dc&&c9<c7;c9++){if(c8[c9]!==e[c9]){return b6(c8[c9],e[c9])}}return c9===dc?b6(df,e[c9],-1):b6(c8[c9],de,1)};b6=function(c7,e,c8){if(c7===e){return c8}var c9=c7.nextSibling;while(c9){if(c9===e){return -1}c9=c9.nextSibling}return 1}}cR.uniqueSort=function(c7){var c8,e=1;if(cj){ce=cb;c7.sort(cj);if(ce){for(;(c8=c7[e]);e++){if(c8===c7[e-1]){c7.splice(e--,1)}}}}return c7};function cq(c7,dc,da,c8){var c9=0,e=dc.length;for(;c9<e;c9++){cR(c7,dc[c9],da,c8)}}function cM(e,c8,dd,de,c7,dc){var c9,da=cK.setFilters[c8.toLowerCase()];if(!da){cR.error(c8)}if(e||!(c9=c7)){cq(e||"*",de,(c9=[]),c7)}return c9.length>0?da(c9,dd,dc):[]}function cU(dh,e,df,c8,dl){var dc,c7,da,dn,de,dm,dg,dk,di=0,dj=dl.length,c9=cI.POS,dd=new RegExp("^"+c9.source+"(?!"+cD+")","i"),dp=function(){var dr=1,dq=arguments.length-2;for(;dr<dq;dr++){if(arguments[dr]===ck){dc[dr]=ck}}};for(;di<dj;di++){c9.exec("");dh=dl[di];dn=[];da=0;de=c8;while((dc=c9.exec(dh))){dk=c9.lastIndex=dc.index+dc[0].length;if(dk>da){dg=dh.slice(da,dc.index);da=dk;dm=[e];if(cJ.test(dg)){if(de){dm=de}de=c8}if((c7=c1.test(dg))){dg=dg.slice(0,-5).replace(cJ,"$&*")}if(dc.length>1){dc[0].replace(dd,dp)}de=cM(dg,dc[1],dc[2],dm,de,c7)}}if(de){dn=dn.concat(de);if((dg=dh.slice(da))&&dg!==")"){if(cJ.test(dg)){cq(dg,dn,df,c8)}else{cR(dg,e,df,c8?c8.concat(de):de)}}else{cW.apply(df,dn)}}else{cR(dh,e,df,c8)}}return dj===1?df:cR.uniqueSort(df)}function b5(dd,c8,dg){var di,dh,dj,da=[],de=0,df=cN.exec(dd),c7=!df.pop()&&!df.pop(),dk=c7&&dd.match(cx)||[""],e=cK.preFilter,c9=cK.filter,dc=!dg&&c8!==ca;for(;(dh=dk[de])!=null&&c7;de++){da.push(di=[]);if(dc){dh=" "+dh}while(dh){c7=false;if((df=cJ.exec(dh))){dh=dh.slice(df[0].length);c7=di.push({part:df.pop().replace(cY," "),captures:df})}for(dj in c9){if((df=cI[dj].exec(dh))&&(!e[dj]||(df=e[dj](df,c8,dg)))){dh=dh.slice(df.shift().length);c7=di.push({part:dj,captures:df})}}if(!c7){break}}}if(!c7){cR.error(dd)}return da}function cB(da,c9,c8){var e=c9.dir,c7=ci++;if(!da){da=function(dc){return dc===c8}}return c9.first?function(dd,dc){while((dd=dd[e])){if(dd.nodeType===1){return da(dd,dc)&&dd}}}:function(de,dd){var dc,df=c7+"."+cs,dg=df+"."+cX;while((de=de[e])){if(de.nodeType===1){if((dc=de[c0])===dg){return de.sizset}else{if(typeof dc==="string"&&dc.indexOf(df)===0){if(de.sizset){return de}}else{de[c0]=dg;if(da(de,dd)){de.sizset=true;return de}de.sizset=false}}}}}}function cz(e,c7){return e?function(da,c9){var c8=c7(da,c9);return c8&&e(c8===true?da:c8,c9)}:c7}function cC(dc,c9,e){var c8,da,c7=0;for(;(c8=dc[c7]);c7++){if(cK.relative[c8.part]){da=cB(da,cK.relative[c8.part],c9)}else{c8.captures.push(c9,e);da=cz(da,cK.filter[c8.part].apply(null,c8.captures))}}return da}function b8(e){return function(c9,c8){var da,c7=0;for(;(da=e[c7]);c7++){if(da(c9,c8)){return true}}return false}}var cf=cR.compile=function(e,c9,c7){var dd,dc,c8,da=cp[e];if(da&&da.context===c9){return da}dc=b5(e,c9,c7);for(c8=0;(dd=dc[c8]);c8++){dc[c8]=cC(dd,c9,c7)}da=cp[e]=b8(dc);da.context=c9;da.runs=da.dirruns=0;cy.push(e);if(cy.length>cK.cacheLength){delete cp[cy.shift()]}return da};cR.matches=function(c7,e){return cR(c7,null,null,e)};cR.matchesSelector=function(e,c7){return cR(c7,null,null,[e]).length>0};var cZ=function(da,c7,dd,dh,dg){da=da.replace(cY,"$1");var e,di,de,dj,c8,c9,dl,dm,dc,df=da.match(cx),dk=da.match(c3),dn=c7.nodeType;if(cI.POS.test(da)){return cU(da,c7,dd,dh,df)}if(dh){e=cn.call(dh,0)}else{if(df&&df.length===1){if(dk.length>1&&dn===9&&!dg&&(df=cI.ID.exec(dk[0]))){c7=cK.find.ID(df[1],c7,dg)[0];if(!c7){return dd}da=da.slice(dk.shift().length)}dm=((df=cT.exec(dk[0]))&&!df.index&&c7.parentNode)||c7;dc=dk.pop();c9=dc.split(":not")[0];for(de=0,dj=cK.order.length;de<dj;de++){dl=cK.order[de];if((df=cI[dl].exec(c9))){e=cK.find[dl]((df[1]||"").replace(cw,""),dm,dg);if(e==null){continue}if(c9===dc){da=da.slice(0,da.length-dc.length)+c9.replace(cI[dl],"");if(!da){cW.apply(dd,cn.call(e,0))}}break}}}}if(da){di=cf(da,c7,dg);cs=di.dirruns++;if(e==null){e=cK.find.TAG("*",(cT.test(da)&&c7.parentNode)||c7)}for(de=0;(c8=e[de]);de++){cX=di.runs++;if(di(c8,c7)){dd.push(c8)}}}return dd};if(ca.querySelectorAll){(function(){var dc,dd=cZ,da=/'|\\/g,c8=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,c7=[],e=[":active"],c9=cd.matchesSelector||cd.mozMatchesSelector||cd.webkitMatchesSelector||cd.oMatchesSelector||cd.msMatchesSelector;cL(function(de){de.innerHTML="<select><option selected></option></select>";if(!de.querySelectorAll("[selected]").length){c7.push("\\["+cD+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!de.querySelectorAll(":checked").length){c7.push(":checked")}});cL(function(de){de.innerHTML="<p test=''></p>";if(de.querySelectorAll("[test^='']").length){c7.push("[*^$]="+cD+"*(?:\"\"|'')")}de.innerHTML="<input type='hidden'>";if(!de.querySelectorAll(":enabled").length){c7.push(":enabled",":disabled")}});c7=c7.length&&new RegExp(c7.join("|"));cZ=function(dj,df,dk,dm,dl){if(!dm&&!dl&&(!c7||!c7.test(dj))){if(df.nodeType===9){try{cW.apply(dk,cn.call(df.querySelectorAll(dj),0));return dk}catch(di){}}else{if(df.nodeType===1&&df.nodeName.toLowerCase()!=="object"){var dh=df.getAttribute("id"),de=dh||c0,dg=cT.test(dj)&&df.parentNode||df;if(dh){de=de.replace(da,"\\$&")}else{df.setAttribute("id",de)}try{cW.apply(dk,cn.call(dg.querySelectorAll(dj.replace(cx,"[id='"+de+"'] $&")),0));return dk}catch(di){}finally{if(!dh){df.removeAttribute("id")}}}}}return dd(dj,df,dk,dm,dl)};if(c9){cL(function(df){dc=c9.call(df,"div");try{c9.call(df,"[test!='']:sizzle");e.push(cK.match.PSEUDO)}catch(de){}});e=new RegExp(e.join("|"));cR.matchesSelector=function(df,dh){dh=dh.replace(c8,"='$1']");if(!co(df)&&!e.test(dh)&&(!c7||!c7.test(dh))){try{var de=c9.call(df,dh);if(de||dc||df.document&&df.document.nodeType!==11){return de}}catch(dg){}}return cR(dh,null,null,[df]).length>0}}})()}cR.attr=bK.attr;bK.find=cR;bK.expr=cR.selectors;bK.expr[":"]=bK.expr.pseudos;bK.unique=cR.uniqueSort;bK.text=cR.getText;bK.isXMLDoc=cR.isXML;bK.contains=cR.contains})(a6);var ak=/Until$/,bu=/^(?:parents|prev(?:Until|All))/,ap=/^.[^:#\[\.,]*$/,D=bK.expr.match.needsContext,by={children:true,contents:true,next:true,prev:true};bK.fn.extend({find:function(e){var b6,b3,b8,b9,b7,b5,b4=this;if(typeof e!=="string"){return bK(e).filter(function(){for(b6=0,b3=b4.length;b6<b3;b6++){if(bK.contains(b4[b6],this)){return true}}})}b5=this.pushStack("","find",e);for(b6=0,b3=this.length;b6<b3;b6++){b8=b5.length;bK.find(e,this[b6],b5);if(b6>0){for(b9=b8;b9<b5.length;b9++){for(b7=0;b7<b8;b7++){if(b5[b7]===b5[b9]){b5.splice(b9--,1);break}}}}}return b5},has:function(b5){var b4,b3=bK(b5,this),e=b3.length;return this.filter(function(){for(b4=0;b4<e;b4++){if(bK.contains(this,b3[b4])){return true}}})},not:function(e){return this.pushStack(aQ(this,e,false),"not",e)},filter:function(e){return this.pushStack(aQ(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?D.test(e)?bK(e,this.context).index(this[0])>=0:bK.filter(e,this).length>0:this.filter(e).length>0)},closest:function(b6,b5){var b7,b4=0,e=this.length,b3=[],b8=D.test(b6)||typeof b6!=="string"?bK(b6,b5||this.context):0;for(;b4<e;b4++){b7=this[b4];while(b7&&b7.ownerDocument&&b7!==b5&&b7.nodeType!==11){if(b8?b8.index(b7)>-1:bK.find.matchesSelector(b7,b6)){b3.push(b7);break}b7=b7.parentNode}}b3=b3.length>1?bK.unique(b3):b3;return this.pushStack(b3,"closest",b6)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof e==="string"){return bK.inArray(this[0],bK(e))}return bK.inArray(e.jquery?e[0]:e,this)},add:function(e,b3){var b5=typeof e==="string"?bK(e,b3):bK.makeArray(e&&e.nodeType?[e]:e),b4=bK.merge(this.get(),b5);return this.pushStack(aV(b5[0])||aV(b4[0])?b4:bK.unique(b4))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});bK.fn.andSelf=bK.fn.addBack;function aV(e){return !e||!e.parentNode||e.parentNode.nodeType===11}function a2(b3,e){do{b3=b3[e]}while(b3&&b3.nodeType!==1);return b3}bK.each({parent:function(b3){var e=b3.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bK.dir(e,"parentNode")},parentsUntil:function(b3,e,b4){return bK.dir(b3,"parentNode",b4)},next:function(e){return a2(e,"nextSibling")},prev:function(e){return a2(e,"previousSibling")},nextAll:function(e){return bK.dir(e,"nextSibling")},prevAll:function(e){return bK.dir(e,"previousSibling")},nextUntil:function(b3,e,b4){return bK.dir(b3,"nextSibling",b4)},prevUntil:function(b3,e,b4){return bK.dir(b3,"previousSibling",b4)},siblings:function(e){return bK.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bK.sibling(e.firstChild)},contents:function(e){return bK.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bK.merge([],e.childNodes)}},function(e,b3){bK.fn[e]=function(b6,b4){var b5=bK.map(this,b3,b6);if(!ak.test(e)){b4=b6}if(b4&&typeof b4==="string"){b5=bK.filter(b4,b5)}b5=this.length>1&&!by[e]?bK.unique(b5):b5;if(this.length>1&&bu.test(e)){b5=b5.reverse()}return this.pushStack(b5,e,a8.call(arguments).join(","))}});bK.extend({filter:function(b4,e,b3){if(b3){b4=":not("+b4+")"}return e.length===1?bK.find.matchesSelector(e[0],b4)?[e[0]]:[]:bK.find.matches(b4,e)},dir:function(b4,b3,b6){var e=[],b5=b4[b3];while(b5&&b5.nodeType!==9&&(b6===aF||b5.nodeType!==1||!bK(b5).is(b6))){if(b5.nodeType===1){e.push(b5)}b5=b5[b3]}return e},sibling:function(b4,b3){var e=[];for(;b4;b4=b4.nextSibling){if(b4.nodeType===1&&b4!==b3){e.push(b4)}}return e}});function aQ(b5,b4,e){b4=b4||0;if(bK.isFunction(b4)){return bK.grep(b5,function(b7,b6){var b8=!!b4.call(b7,b6,b7);return b8===e})}else{if(b4.nodeType){return bK.grep(b5,function(b7,b6){return(b7===b4)===e})}else{if(typeof b4==="string"){var b3=bK.grep(b5,function(b6){return b6.nodeType===1});if(ap.test(b4)){return bK.filter(b4,b3,!e)}else{b4=bK.filter(b4,b3)}}}}return bK.grep(b5,function(b7,b6){return(bK.inArray(b7,b4)>=0)===e})}function F(e){var b4=c.split("|"),b3=e.createDocumentFragment();if(b3.createElement){while(b4.length){b3.createElement(b4.pop())}}return b3}var c="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",az=/ jQuery\d+="(?:null|\d+)"/g,b2=/^\s+/,aC=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,u=/<([\w:]+)/,bX=/<tbody/i,N=/<|&#?\w+;/,an=/<(?:script|style|link)/i,au=/<(?:script|object|embed|option|style)/i,O=new RegExp("<(?:"+c+")[\\s/>]","i"),aI=/^(?:checkbox|radio)$/,bV=/checked\s*(?:[^=]|=\s*.checked.)/i,bA=/\/(java|ecma)script/i,aL=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,X={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},aU=F(t),p=aU.appendChild(t.createElement("div"));X.optgroup=X.option;X.tbody=X.tfoot=X.colgroup=X.caption=X.thead;X.th=X.td;if(!bK.support.htmlSerialize){X._default=[1,"X<div>","</div>"]}bK.fn.extend({text:function(e){return bK.access(this,function(b3){return b3===aF?bK.text(this):this.empty().append((this[0]&&this[0].ownerDocument||t).createTextNode(b3))},null,e,arguments.length)},wrapAll:function(e){if(bK.isFunction(e)){return this.each(function(b4){bK(this).wrapAll(e.call(this,b4))})}if(this[0]){var b3=bK(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b3.insertBefore(this[0])}b3.map(function(){var b4=this;while(b4.firstChild&&b4.firstChild.nodeType===1){b4=b4.firstChild}return b4}).append(this)}return this},wrapInner:function(e){if(bK.isFunction(e)){return this.each(function(b3){bK(this).wrapInner(e.call(this,b3))})}return this.each(function(){var b3=bK(this),b4=b3.contents();if(b4.length){b4.wrapAll(e)}else{b3.append(e)}})},wrap:function(e){var b3=bK.isFunction(e);return this.each(function(b4){bK(this).wrapAll(b3?e.call(this,b4):e)})},unwrap:function(){return this.parent().each(function(){if(!bK.nodeName(this,"body")){bK(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.insertBefore(e,this.firstChild)}})},before:function(){if(!aV(this[0])){return this.domManip(arguments,false,function(b3){this.parentNode.insertBefore(b3,this)})}if(arguments.length){var e=bK.clean(arguments);return this.pushStack(bK.merge(e,this),"before",this.selector)}},after:function(){if(!aV(this[0])){return this.domManip(arguments,false,function(b3){this.parentNode.insertBefore(b3,this.nextSibling)})}if(arguments.length){var e=bK.clean(arguments);return this.pushStack(bK.merge(this,e),"after",this.selector)}},remove:function(e,b5){var b4,b3=0;for(;(b4=this[b3])!=null;b3++){if(!e||bK.filter(e,[b4]).length){if(!b5&&b4.nodeType===1){bK.cleanData(b4.getElementsByTagName("*"));bK.cleanData([b4])}if(b4.parentNode){b4.parentNode.removeChild(b4)}}}return this},empty:function(){var b3,e=0;for(;(b3=this[e])!=null;e++){if(b3.nodeType===1){bK.cleanData(b3.getElementsByTagName("*"))}while(b3.firstChild){b3.removeChild(b3.firstChild)}}return this},clone:function(b3,e){b3=b3==null?false:b3;e=e==null?b3:e;return this.map(function(){return bK.clone(this,b3,e)})},html:function(e){return bK.access(this,function(b6){var b5=this[0]||{},b4=0,b3=this.length;if(b6===aF){return b5.nodeType===1?b5.innerHTML.replace(az,""):aF}if(typeof b6==="string"&&!an.test(b6)&&(bK.support.htmlSerialize||!O.test(b6))&&(bK.support.leadingWhitespace||!b2.test(b6))&&!X[(u.exec(b6)||["",""])[1].toLowerCase()]){b6=b6.replace(aC,"<$1></$2>");try{for(;b4<b3;b4++){b5=this[b4]||{};if(b5.nodeType===1){bK.cleanData(b5.getElementsByTagName("*"));b5.innerHTML=b6}}b5=0}catch(b7){}}if(b5){this.empty().append(b6)}},null,e,arguments.length)},replaceWith:function(e){if(!aV(this[0])){if(bK.isFunction(e)){return this.each(function(b5){var b4=bK(this),b3=b4.html();b4.replaceWith(e.call(this,b5,b3))})}if(typeof e!=="string"){e=bK(e).detach()}return this.each(function(){var b4=this.nextSibling,b3=this.parentNode;bK(this).remove();if(b4){bK(b4).before(e)}else{bK(b3).append(e)}})}return this.length?this.pushStack(bK(bK.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,true)},domManip:function(b8,cc,cb){b8=[].concat.apply([],b8);var b4,b6,b7,ca,b5=0,b9=b8[0],b3=[],e=this.length;if(!bK.support.checkClone&&e>1&&typeof b9==="string"&&bV.test(b9)){return this.each(function(){bK(this).domManip(b8,cc,cb)})}if(bK.isFunction(b9)){return this.each(function(ce){var cd=bK(this);b8[0]=b9.call(this,ce,cc?cd.html():aF);cd.domManip(b8,cc,cb)})}if(this[0]){b4=bK.buildFragment(b8,this,b3);b7=b4.fragment;b6=b7.firstChild;if(b7.childNodes.length===1){b7=b6}if(b6){cc=cc&&bK.nodeName(b6,"tr");for(ca=b4.cacheable||e-1;b5<e;b5++){cb.call(cc&&bK.nodeName(this[b5],"table")?C(this[b5],"tbody"):this[b5],b5===ca?b7:bK.clone(b7,true,true))}}b7=b6=null;if(b3.length){bK.each(b3,function(cd,ce){if(ce.src){if(bK.ajax){bK.ajax({url:ce.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{bK.error("no ajax")}}else{bK.globalEval((ce.text||ce.textContent||ce.innerHTML||"").replace(aL,""))}if(ce.parentNode){ce.parentNode.removeChild(ce)}})}}return this}});function C(b3,e){return b3.getElementsByTagName(e)[0]||b3.appendChild(b3.ownerDocument.createElement(e))}function at(b9,b3){if(b3.nodeType!==1||!bK.hasData(b9)){return}var b6,b5,e,b8=bK._data(b9),b7=bK._data(b3,b8),b4=b8.events;if(b4){delete b7.handle;b7.events={};for(b6 in b4){for(b5=0,e=b4[b6].length;b5<e;b5++){bK.event.add(b3,b6,b4[b6][b5])}}}if(b7.data){b7.data=bK.extend({},b7.data)}}function K(b3,e){var b4;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(b3)}b4=e.nodeName.toLowerCase();if(b4==="object"){if(e.parentNode){e.outerHTML=b3.outerHTML}if(bK.support.html5Clone&&(b3.innerHTML&&!bK.trim(e.innerHTML))){e.innerHTML=b3.innerHTML}}else{if(b4==="input"&&aI.test(b3.type)){e.defaultChecked=e.checked=b3.checked;if(e.value!==b3.value){e.value=b3.value}}else{if(b4==="option"){e.selected=b3.defaultSelected}else{if(b4==="input"||b4==="textarea"){e.defaultValue=b3.defaultValue}else{if(b4==="script"&&e.text!==b3.text){e.text=b3.text}}}}}e.removeAttribute(bK.expando)}bK.buildFragment=function(b5,b6,b3){var b4,e,b7,b8=b5[0];b6=b6||t;b6=(b6[0]||b6).ownerDocument||b6[0]||b6;if(typeof b6.createDocumentFragment==="undefined"){b6=t}if(b5.length===1&&typeof b8==="string"&&b8.length<512&&b6===t&&b8.charAt(0)==="<"&&!au.test(b8)&&(bK.support.checkClone||!bV.test(b8))&&(bK.support.html5Clone||!O.test(b8))){e=true;b4=bK.fragments[b8];b7=b4!==aF}if(!b4){b4=b6.createDocumentFragment();bK.clean(b5,b6,b4,b3);if(e){bK.fragments[b8]=b7&&b4}}return{fragment:b4,cacheable:e}};bK.fragments={};bK.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,b3){bK.fn[e]=function(b4){var b6,b8=0,b7=[],ca=bK(b4),b5=ca.length,b9=this.length===1&&this[0].parentNode;if((b9==null||b9&&b9.nodeType===11&&b9.childNodes.length===1)&&b5===1){ca[b3](this[0]);return this}else{for(;b8<b5;b8++){b6=(b8>0?this.clone(true):this).get();bK(ca[b8])[b3](b6);b7=b7.concat(b6)}return this.pushStack(b7,e,ca.selector)}}});function q(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")}else{return[]}}}function bW(e){if(aI.test(e.type)){e.defaultChecked=e.checked}}bK.extend({clone:function(b6,b8,b4){var e,b3,b5,b7;if(bK.support.html5Clone||bK.isXMLDoc(b6)||!O.test("<"+b6.nodeName+">")){b7=b6.cloneNode(true)}else{p.innerHTML=b6.outerHTML;p.removeChild(b7=p.firstChild)}if((!bK.support.noCloneEvent||!bK.support.noCloneChecked)&&(b6.nodeType===1||b6.nodeType===11)&&!bK.isXMLDoc(b6)){K(b6,b7);e=q(b6);b3=q(b7);for(b5=0;e[b5];++b5){if(b3[b5]){K(e[b5],b3[b5])}}}if(b8){at(b6,b7);if(b4){e=q(b6);b3=q(b7);for(b5=0;e[b5];++b5){at(e[b5],b3[b5])}}}e=b3=null;return b7},clean:function(cf,b4,e,b5){var cb,b7,ce,cj,b8,ci,b9,b6,b3,cd,ch,ca,cc=0,cg=[];if(!b4||typeof b4.createDocumentFragment==="undefined"){b4=t}for(b7=b4===t&&aU;(ce=cf[cc])!=null;cc++){if(typeof ce==="number"){ce+=""}if(!ce){continue}if(typeof ce==="string"){if(!N.test(ce)){ce=b4.createTextNode(ce)}else{b7=b7||F(b4);b9=b9||b7.appendChild(b4.createElement("div"));ce=ce.replace(aC,"<$1></$2>");cj=(u.exec(ce)||["",""])[1].toLowerCase();b8=X[cj]||X._default;ci=b8[0];b9.innerHTML=b8[1]+ce+b8[2];while(ci--){b9=b9.lastChild}if(!bK.support.tbody){b6=bX.test(ce);b3=cj==="table"&&!b6?b9.firstChild&&b9.firstChild.childNodes:b8[1]==="<table>"&&!b6?b9.childNodes:[];for(cb=b3.length-1;cb>=0;--cb){if(bK.nodeName(b3[cb],"tbody")&&!b3[cb].childNodes.length){b3[cb].parentNode.removeChild(b3[cb])}}}if(!bK.support.leadingWhitespace&&b2.test(ce)){b9.insertBefore(b4.createTextNode(b2.exec(ce)[0]),b9.firstChild)}ce=b9.childNodes;b9=b7.lastChild}}if(ce.nodeType){cg.push(ce)}else{cg=bK.merge(cg,ce)}}if(b9){b7.removeChild(b9);ce=b9=b7=null}if(!bK.support.appendChecked){for(cc=0;(ce=cg[cc])!=null;cc++){if(bK.nodeName(ce,"input")){bW(ce)}else{if(typeof ce.getElementsByTagName!=="undefined"){bK.grep(ce.getElementsByTagName("input"),bW)}}}}if(e){ch=function(ck){if(!ck.type||bA.test(ck.type)){return b5?b5.push(ck.parentNode?ck.parentNode.removeChild(ck):ck):e.appendChild(ck)}};for(cc=0;(ce=cg[cc])!=null;cc++){if(!(bK.nodeName(ce,"script")&&ch(ce))){e.appendChild(ce);if(typeof ce.getElementsByTagName!=="undefined"){ca=bK.grep(bK.merge([],ce.getElementsByTagName("script")),ch);cg.splice.apply(cg,[cc+1,0].concat(ca));cc+=ca.length}}}}return cg},cleanData:function(b3,cb){var b6,b4,b5,ca,b7=0,cc=bK.expando,e=bK.cache,b8=bK.support.deleteExpando,b9=bK.event.special;for(;(b5=b3[b7])!=null;b7++){if(cb||bK.acceptData(b5)){b4=b5[cc];b6=b4&&e[b4];if(b6){if(b6.events){for(ca in b6.events){if(b9[ca]){bK.event.remove(b5,ca)}else{bK.removeEvent(b5,ca,b6.handle)}}}if(e[b4]){delete e[b4];if(b8){delete b5[cc]}else{if(b5.removeAttribute){b5.removeAttribute(cc)}else{b5[cc]=null}}bK.deletedIds.push(b4)}}}}}});(function(){var e,b3;bK.uaMatch=function(b5){b5=b5.toLowerCase();var b4=/(chrome)[ \/]([\w.]+)/.exec(b5)||/(webkit)[ \/]([\w.]+)/.exec(b5)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b5)||/(msie) ([\w.]+)/.exec(b5)||b5.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b5)||[];return{browser:b4[1]||"",version:b4[2]||"0"}};e=bK.uaMatch(d.userAgent);b3={};if(e.browser){b3[e.browser]=true;b3.version=e.version}if(b3.webkit){b3.safari=true}bK.browser=b3;bK.sub=function(){function b4(b7,b8){return new b4.fn.init(b7,b8)}bK.extend(true,b4,this);b4.superclass=this;b4.fn=b4.prototype=this();b4.fn.constructor=b4;b4.sub=this.sub;b4.fn.init=function b6(b7,b8){if(b8&&b8 instanceof bK&&!(b8 instanceof b4)){b8=b4(b8)}return bK.fn.init.call(this,b7,b8,b5)};b4.fn.init.prototype=b4.fn;var b5=b4(t);return b4}})();var J,aD,a0,bi=/alpha\([^)]*\)/i,aW=/opacity=([^)]*)/,bo=/^(top|right|bottom|left)$/,a3=/^margin/,bc=new RegExp("^("+bB+")(.*)$","i"),aa=new RegExp("^("+bB+")(?!px)[a-z%]+$","i"),W=new RegExp("^([-+])=("+bB+")","i"),bl={},bd={position:"absolute",visibility:"hidden",display:"block"},bE={letterSpacing:0,fontWeight:400,lineHeight:1},bU=["Top","Right","Bottom","Left"],aw=["Webkit","O","Moz","ms"],aN=bK.fn.toggle;function b(b5,b3){if(b3 in b5){return b3}var b6=b3.charAt(0).toUpperCase()+b3.slice(1),e=b3,b4=aw.length;while(b4--){b3=aw[b4]+b6;if(b3 in b5){return b3}}return e}function U(b3,e){b3=e||b3;return bK.css(b3,"display")==="none"||!bK.contains(b3.ownerDocument,b3)}function x(b7,e){var b6,b8,b3=[],b4=0,b5=b7.length;for(;b4<b5;b4++){b6=b7[b4];if(!b6.style){continue}b3[b4]=bK._data(b6,"olddisplay");if(e){if(!b3[b4]&&b6.style.display==="none"){b6.style.display=""}if(b6.style.display===""&&U(b6)){b3[b4]=bK._data(b6,"olddisplay",bG(b6.nodeName))}}else{b8=J(b6,"display");if(!b3[b4]&&b8!=="none"){bK._data(b6,"olddisplay",b8)}}}for(b4=0;b4<b5;b4++){b6=b7[b4];if(!b6.style){continue}if(!e||b6.style.display==="none"||b6.style.display===""){b6.style.display=e?b3[b4]||"":"none"}}return b7}bK.fn.extend({css:function(e,b3){return bK.access(this,function(b5,b4,b6){return b6!==aF?bK.style(b5,b4,b6):bK.css(b5,b4)},e,b3,arguments.length>1)},show:function(){return x(this,true)},hide:function(){return x(this)},toggle:function(b4,b3){var e=typeof b4==="boolean";if(bK.isFunction(b4)&&bK.isFunction(b3)){return aN.apply(this,arguments)}return this.each(function(){if(e?b4:U(this)){bK(this).show()}else{bK(this).hide()}})}});bK.extend({cssHooks:{opacity:{get:function(b4,b3){if(b3){var e=J(b4,"opacity");return e===""?"1":e}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bK.support.cssFloat?"cssFloat":"styleFloat"},style:function(b5,b4,cb,b6){if(!b5||b5.nodeType===3||b5.nodeType===8||!b5.style){return}var b9,ca,cc,b7=bK.camelCase(b4),b3=b5.style;b4=bK.cssProps[b7]||(bK.cssProps[b7]=b(b3,b7));cc=bK.cssHooks[b4]||bK.cssHooks[b7];if(cb!==aF){ca=typeof cb;if(ca==="string"&&(b9=W.exec(cb))){cb=(b9[1]+1)*b9[2]+parseFloat(bK.css(b5,b4));ca="number"}if(cb==null||ca==="number"&&isNaN(cb)){return}if(ca==="number"&&!bK.cssNumber[b7]){cb+="px"}if(!cc||!("set" in cc)||(cb=cc.set(b5,cb,b6))!==aF){try{b3[b4]=cb}catch(b8){}}}else{if(cc&&"get" in cc&&(b9=cc.get(b5,false,b6))!==aF){return b9}return b3[b4]}},css:function(b8,b6,b7,b3){var b9,b5,e,b4=bK.camelCase(b6);b6=bK.cssProps[b4]||(bK.cssProps[b4]=b(b8.style,b4));e=bK.cssHooks[b6]||bK.cssHooks[b4];if(e&&"get" in e){b9=e.get(b8,true,b3)}if(b9===aF){b9=J(b8,b6)}if(b9==="normal"&&b6 in bE){b9=bE[b6]}if(b7||b3!==aF){b5=parseFloat(b9);return b7||bK.isNumeric(b5)?b5||0:b9}return b9},swap:function(b6,b5,b7){var b4,b3,e={};for(b3 in b5){e[b3]=b6.style[b3];b6.style[b3]=b5[b3]}b4=b7.call(b6);for(b3 in b5){b6.style[b3]=e[b3]}return b4}});if(a6.getComputedStyle){J=function(b9,b3){var e,b6,b5,b8,b7=getComputedStyle(b9,null),b4=b9.style;if(b7){e=b7[b3];if(e===""&&!bK.contains(b9.ownerDocument.documentElement,b9)){e=bK.style(b9,b3)}if(aa.test(e)&&a3.test(b3)){b6=b4.width;b5=b4.minWidth;b8=b4.maxWidth;b4.minWidth=b4.maxWidth=b4.width=e;e=b7.width;b4.width=b6;b4.minWidth=b5;b4.maxWidth=b8}}return e}}else{if(t.documentElement.currentStyle){J=function(b6,b4){var b7,e,b3=b6.currentStyle&&b6.currentStyle[b4],b5=b6.style;if(b3==null&&b5&&b5[b4]){b3=b5[b4]}if(aa.test(b3)&&!bo.test(b4)){b7=b5.left;e=b6.runtimeStyle&&b6.runtimeStyle.left;if(e){b6.runtimeStyle.left=b6.currentStyle.left}b5.left=b4==="fontSize"?"1em":b3;b3=b5.pixelLeft+"px";b5.left=b7;if(e){b6.runtimeStyle.left=e}}return b3===""?"auto":b3}}}function aK(e,b4,b5){var b3=bc.exec(b4);return b3?Math.max(0,b3[1]-(b5||0))+(b3[2]||"px"):b4}function ax(b5,b3,e,b7){var b4=e===(b7?"border":"content")?4:b3==="width"?1:0,b6=0;for(;b4<4;b4+=2){if(e==="margin"){b6+=bK.css(b5,e+bU[b4],true)}if(b7){if(e==="content"){b6-=parseFloat(J(b5,"padding"+bU[b4]))||0}if(e!=="margin"){b6-=parseFloat(J(b5,"border"+bU[b4]+"Width"))||0}}else{b6+=parseFloat(J(b5,"padding"+bU[b4]))||0;if(e!=="padding"){b6+=parseFloat(J(b5,"border"+bU[b4]+"Width"))||0}}}return b6}function z(b5,b3,e){var b6=b3==="width"?b5.offsetWidth:b5.offsetHeight,b4=true,b7=bK.support.boxSizing&&bK.css(b5,"boxSizing")==="border-box";if(b6<=0){b6=J(b5,b3);if(b6<0||b6==null){b6=b5.style[b3]}if(aa.test(b6)){return b6}b4=b7&&(bK.support.boxSizingReliable||b6===b5.style[b3]);b6=parseFloat(b6)||0}return(b6+ax(b5,b3,e||(b7?"border":"content"),b4))+"px"}function bG(b4){if(bl[b4]){return bl[b4]}var e=bK("<"+b4+">").appendTo(t.body),b3=e.css("display");e.remove();if(b3==="none"||b3===""){aD=t.body.appendChild(aD||bK.extend(t.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!a0||!aD.createElement){a0=(aD.contentWindow||aD.contentDocument).document;a0.write("<!doctype html><html><body>");a0.close()}e=a0.body.appendChild(a0.createElement(b4));b3=J(e,"display");t.body.removeChild(aD)}bl[b4]=b3;return b3}bK.each(["height","width"],function(b3,e){bK.cssHooks[e]={get:function(b6,b5,b4){if(b5){if(b6.offsetWidth!==0||J(b6,"display")!=="none"){return z(b6,e,b4)}else{return bK.swap(b6,bd,function(){return z(b6,e,b4)})}}},set:function(b5,b6,b4){return aK(b5,b6,b4?ax(b5,e,b4,bK.support.boxSizing&&bK.css(b5,"boxSizing")==="border-box"):0)}}});if(!bK.support.opacity){bK.cssHooks.opacity={get:function(b3,e){return aW.test((e&&b3.currentStyle?b3.currentStyle.filter:b3.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""},set:function(b6,b7){var b5=b6.style,b3=b6.currentStyle,e=bK.isNumeric(b7)?"alpha(opacity="+b7*100+")":"",b4=b3&&b3.filter||b5.filter||"";b5.zoom=1;if(b7>=1&&bK.trim(b4.replace(bi,""))===""&&b5.removeAttribute){b5.removeAttribute("filter");if(b3&&!b3.filter){return}}b5.filter=bi.test(b4)?b4.replace(bi,e):b4+" "+e}}}bK(function(){if(!bK.support.reliableMarginRight){bK.cssHooks.marginRight={get:function(b3,e){return bK.swap(b3,{display:"inline-block"},function(){if(e){return J(b3,"marginRight")}})}}}if(!bK.support.pixelPosition&&bK.fn.position){bK.each(["top","left"],function(e,b3){bK.cssHooks[b3]={get:function(b6,b5){if(b5){var b4=J(b6,b3);return aa.test(b4)?bK(b6).position()[b3]+"px":b4}}}})}});if(bK.expr&&bK.expr.filters){bK.expr.filters.hidden=function(e){return(e.offsetWidth===0&&e.offsetHeight===0)||(!bK.support.reliableHiddenOffsets&&((e.style&&e.style.display)||J(e,"display"))==="none")};bK.expr.filters.visible=function(e){return !bK.expr.filters.hidden(e)}}bK.each({margin:"",padding:"",border:"Width"},function(e,b3){bK.cssHooks[e+b3]={expand:function(b6){var b5,b7=typeof b6==="string"?b6.split(" "):[b6],b4={};for(b5=0;b5<4;b5++){b4[e+bU[b5]+b3]=b7[b5]||b7[b5-2]||b7[0]}return b4}};if(!a3.test(e)){bK.cssHooks[e+b3].set=aK}});var bw=/%20/g,aT=/\[\]$/,Y=/\r?\n/g,bD=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aH=/^(?:select|textarea)/i;bK.fn.extend({serialize:function(){return bK.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?bK.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||aH.test(this.nodeName)||bD.test(this.type))}).map(function(e,b3){var b4=bK(this).val();return b4==null?null:bK.isArray(b4)?bK.map(b4,function(b6,b5){return{name:b3.name,value:b6.replace(Y,"\r\n")}}):{name:b3.name,value:b4.replace(Y,"\r\n")}}).get()}});bK.param=function(e,b4){var b5,b3=[],b6=function(b7,b8){b8=bK.isFunction(b8)?b8():(b8==null?"":b8);b3[b3.length]=encodeURIComponent(b7)+"="+encodeURIComponent(b8)};if(b4===aF){b4=bK.ajaxSettings&&bK.ajaxSettings.traditional}if(bK.isArray(e)||(e.jquery&&!bK.isPlainObject(e))){bK.each(e,function(){b6(this.name,this.value)})}else{for(b5 in e){n(b5,e[b5],b4,b6)}}return b3.join("&").replace(bw,"+")};function n(b4,b6,b3,b5){var e;if(bK.isArray(b6)){bK.each(b6,function(b8,b7){if(b3||aT.test(b4)){b5(b4,b7)}else{n(b4+"["+(typeof b7==="object"?b8:"")+"]",b7,b3,b5)}})}else{if(!b3&&bK.type(b6)==="object"){for(e in b6){n(b4+"["+e+"]",b6[e],b3,b5)}}else{b5(b4,b6)}}}var ac,b1,ar=/#.*$/,ah=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,G=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,w=/^(?:GET|HEAD)$/,aG=/^\/\//,bR=/\?/,h=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,T=/([?&])_=[^&]*/,aX=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,b0=bK.fn.load,A={},ba={},a1=["*/"]+["*"];try{ac=aM.href}catch(bh){ac=t.createElement("a");ac.href="";ac=ac.href}b1=aX.exec(ac.toLowerCase())||[];function bM(e){return function(b6,b8){if(typeof b6!=="string"){b8=b6;b6="*"}var b3,b9,ca,b5=b6.toLowerCase().split(aZ),b4=0,b7=b5.length;if(bK.isFunction(b8)){for(;b4<b7;b4++){b3=b5[b4];ca=/^\+/.test(b3);if(ca){b3=b3.substr(1)||"*"}b9=e[b3]=e[b3]||[];b9[ca?"unshift":"push"](b8)}}}}function v(b3,cc,b7,ca,b9,b5){b9=b9||cc.dataTypes[0];b5=b5||{};b5[b9]=true;var cb,b8=b3[b9],b4=0,e=b8?b8.length:0,b6=(b3===A);for(;b4<e&&(b6||!cb);b4++){cb=b8[b4](cc,b7,ca);if(typeof cb==="string"){if(!b6||b5[cb]){cb=aF}else{cc.dataTypes.unshift(cb);cb=v(b3,cc,b7,ca,cb,b5)}}}if((b6||!cb)&&!b5["*"]){cb=v(b3,cc,b7,ca,"*",b5)}return cb}function y(b4,b5){var b3,e,b6=bK.ajaxSettings.flatOptions||{};for(b3 in b5){if(b5[b3]!==aF){(b6[b3]?b4:(e||(e={})))[b3]=b5[b3]}}if(e){bK.extend(true,b4,e)}}bK.fn.load=function(b5,b8,b9){if(typeof b5!=="string"&&b0){return b0.apply(this,arguments)}if(!this.length){return this}var e,b6,b4,b3=this,b7=b5.indexOf(" ");if(b7>=0){e=b5.slice(b7,b5.length);b5=b5.slice(0,b7)}if(bK.isFunction(b8)){b9=b8;b8=aF}else{if(typeof b8==="object"){b6="POST"}}bK.ajax({url:b5,type:b6,dataType:"html",data:b8,complete:function(cb,ca){if(b9){b3.each(b9,b4||[cb.responseText,ca,cb])}}}).done(function(ca){b4=arguments;b3.html(e?bK("<div>").append(ca.replace(h,"")).find(e):ca)});return this};bK.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,b3){bK.fn[b3]=function(b4){return this.on(b3,b4)}});bK.each(["get","post"],function(e,b3){bK[b3]=function(b4,b6,b7,b5){if(bK.isFunction(b6)){b5=b5||b7;b7=b6;b6=aF}return bK.ajax({type:b3,url:b4,data:b6,success:b7,dataType:b5})}});bK.extend({getScript:function(e,b3){return bK.get(e,aF,b3,"script")},getJSON:function(e,b3,b4){return bK.get(e,b3,b4,"json")},ajaxSetup:function(b3,e){if(e){y(b3,bK.ajaxSettings)}else{e=b3;b3=bK.ajaxSettings}y(b3,e);return b3},ajaxSettings:{url:ac,isLocal:G.test(b1[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":a1},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a6.String,"text html":true,"text json":bK.parseJSON,"text xml":bK.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:bM(A),ajaxTransport:bM(ba),ajax:function(b8,b5){if(typeof b8==="object"){b5=b8;b8=aF}b5=b5||{};var cb,cp,b6,ck,cd,ch,b4,cj,cc=bK.ajaxSetup({},b5),cr=cc.context||cc,cf=cr!==cc&&(cr.nodeType||cr instanceof bK)?bK(cr):bK.event,cq=bK.Deferred(),cm=bK.Callbacks("once memory"),b9=cc.statusCode||{},cg={},cn={},b7=0,ca="canceled",ci={readyState:0,setRequestHeader:function(cs,ct){if(!b7){var e=cs.toLowerCase();cs=cn[e]=cn[e]||cs;cg[cs]=ct}return this},getAllResponseHeaders:function(){return b7===2?cp:null},getResponseHeader:function(cs){var e;if(b7===2){if(!b6){b6={};while((e=ah.exec(cp))){b6[e[1].toLowerCase()]=e[2]}}e=b6[cs.toLowerCase()]}return e===aF?null:e},overrideMimeType:function(e){if(!b7){cc.mimeType=e}return this},abort:function(e){e=e||ca;if(ck){ck.abort(e)}ce(0,e);return this}};function ce(cw,cs,cx,cu){var e,cA,cy,cv,cz,ct=cs;if(b7===2){return}b7=2;if(cd){clearTimeout(cd)}ck=aF;cp=cu||"";ci.readyState=cw>0?4:0;if(cx){cv=j(cc,ci,cx)}if(cw>=200&&cw<300||cw===304){if(cc.ifModified){cz=ci.getResponseHeader("Last-Modified");if(cz){bK.lastModified[cb]=cz}cz=ci.getResponseHeader("Etag");if(cz){bK.etag[cb]=cz}}if(cw===304){ct="notmodified";e=true}else{e=ai(cc,cv);ct=e.state;cA=e.data;cy=e.error;e=!cy}}else{cy=ct;if(!ct||cw){ct="error";if(cw<0){cw=0}}}ci.status=cw;ci.statusText=""+(cs||ct);if(e){cq.resolveWith(cr,[cA,ct,ci])}else{cq.rejectWith(cr,[ci,ct,cy])}ci.statusCode(b9);b9=aF;if(b4){cf.trigger("ajax"+(e?"Success":"Error"),[ci,cc,e?cA:cy])}cm.fireWith(cr,[ci,ct]);if(b4){cf.trigger("ajaxComplete",[ci,cc]);if(!(--bK.active)){bK.event.trigger("ajaxStop")}}}cq.promise(ci);ci.success=ci.done;ci.error=ci.fail;ci.complete=cm.add;ci.statusCode=function(cs){if(cs){var e;if(b7<2){for(e in cs){b9[e]=[b9[e],cs[e]]}}else{e=cs[ci.status];ci.always(e)}}return this};cc.url=((b8||cc.url)+"").replace(ar,"").replace(aG,b1[1]+"//");cc.dataTypes=bK.trim(cc.dataType||"*").toLowerCase().split(aZ);if(cc.crossDomain==null){ch=aX.exec(cc.url.toLowerCase());cc.crossDomain=!!(ch&&(ch[1]!=b1[1]||ch[2]!=b1[2]||(ch[3]||(ch[1]==="http:"?80:443))!=(b1[3]||(b1[1]==="http:"?80:443))))}if(cc.data&&cc.processData&&typeof cc.data!=="string"){cc.data=bK.param(cc.data,cc.traditional)}v(A,cc,b5,ci);if(b7===2){return ci}b4=cc.global;cc.type=cc.type.toUpperCase();cc.hasContent=!w.test(cc.type);if(b4&&bK.active++===0){bK.event.trigger("ajaxStart")}if(!cc.hasContent){if(cc.data){cc.url+=(bR.test(cc.url)?"&":"?")+cc.data;delete cc.data}cb=cc.url;if(cc.cache===false){var b3=bK.now(),co=cc.url.replace(T,"$1_="+b3);cc.url=co+((co===cc.url)?(bR.test(cc.url)?"&":"?")+"_="+b3:"")}}if(cc.data&&cc.hasContent&&cc.contentType!==false||b5.contentType){ci.setRequestHeader("Content-Type",cc.contentType)}if(cc.ifModified){cb=cb||cc.url;if(bK.lastModified[cb]){ci.setRequestHeader("If-Modified-Since",bK.lastModified[cb])}if(bK.etag[cb]){ci.setRequestHeader("If-None-Match",bK.etag[cb])}}ci.setRequestHeader("Accept",cc.dataTypes[0]&&cc.accepts[cc.dataTypes[0]]?cc.accepts[cc.dataTypes[0]]+(cc.dataTypes[0]!=="*"?", "+a1+"; q=0.01":""):cc.accepts["*"]);for(cj in cc.headers){ci.setRequestHeader(cj,cc.headers[cj])}if(cc.beforeSend&&(cc.beforeSend.call(cr,ci,cc)===false||b7===2)){return ci.abort()}ca="abort";for(cj in {success:1,error:1,complete:1}){ci[cj](cc[cj])}ck=v(ba,cc,b5,ci);if(!ck){ce(-1,"No Transport")}else{ci.readyState=1;if(b4){cf.trigger("ajaxSend",[ci,cc])}if(cc.async&&cc.timeout>0){cd=setTimeout(function(){ci.abort("timeout")},cc.timeout)}try{b7=1;ck.send(cg,ce)}catch(cl){if(b7<2){ce(-1,cl)}else{throw cl}}}return ci},active:0,lastModified:{},etag:{}});function j(cb,ca,b7){var b6,b8,b5,e,b3=cb.contents,b9=cb.dataTypes,b4=cb.responseFields;for(b8 in b4){if(b8 in b7){ca[b4[b8]]=b7[b8]}}while(b9[0]==="*"){b9.shift();if(b6===aF){b6=cb.mimeType||ca.getResponseHeader("content-type")}}if(b6){for(b8 in b3){if(b3[b8]&&b3[b8].test(b6)){b9.unshift(b8);break}}}if(b9[0] in b7){b5=b9[0]}else{for(b8 in b7){if(!b9[0]||cb.converters[b8+" "+b9[0]]){b5=b8;break}if(!e){e=b8}}b5=b5||e}if(b5){if(b5!==b9[0]){b9.unshift(b5)}return b7[b5]}}function ai(cd,b5){var cb,b3,b9,b7,ca=cd.dataTypes.slice(),b4=ca[0],cc={},b6=0;if(cd.dataFilter){b5=cd.dataFilter(b5,cd.dataType)}if(ca[1]){for(cb in cd.converters){cc[cb.toLowerCase()]=cd.converters[cb]}}for(;(b9=ca[++b6]);){if(b9!=="*"){if(b4!=="*"&&b4!==b9){cb=cc[b4+" "+b9]||cc["* "+b9];if(!cb){for(b3 in cc){b7=b3.split(" ");if(b7[1]===b9){cb=cc[b4+" "+b7[0]]||cc["* "+b7[0]];if(cb){if(cb===true){cb=cc[b3]}else{if(cc[b3]!==true){b9=b7[0];ca.splice(b6--,0,b9)}}break}}}}if(cb!==true){if(cb&&cd["throws"]){b5=cb(b5)}else{try{b5=cb(b5)}catch(b8){return{state:"parsererror",error:cb?b8:"No conversion from "+b4+" to "+b9}}}}}b4=b9}}return{state:"success",data:b5}}var bt=[],aA=/\?/,a9=/(=)\?(?=&|$)|\?\?/,bp=bK.now();bK.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bt.pop()||(bK.expando+"_"+(bp++));this[e]=true;return e}});bK.ajaxPrefilter("json jsonp",function(cc,b7,cb){var ca,e,b9,b5=cc.data,b3=cc.url,b4=cc.jsonp!==false,b8=b4&&a9.test(b3),b6=b4&&!b8&&typeof b5==="string"&&!(cc.contentType||"").indexOf("application/x-www-form-urlencoded")&&a9.test(b5);if(cc.dataTypes[0]==="jsonp"||b8||b6){ca=cc.jsonpCallback=bK.isFunction(cc.jsonpCallback)?cc.jsonpCallback():cc.jsonpCallback;e=a6[ca];if(b8){cc.url=b3.replace(a9,"$1"+ca)}else{if(b6){cc.data=b5.replace(a9,"$1"+ca)}else{if(b4){cc.url+=(aA.test(b3)?"&":"?")+cc.jsonp+"="+ca}}}cc.converters["script json"]=function(){if(!b9){bK.error(ca+" was not called")}return b9[0]};cc.dataTypes[0]="json";a6[ca]=function(){b9=arguments};cb.always(function(){a6[ca]=e;if(cc[ca]){cc.jsonpCallback=b7.jsonpCallback;bt.push(ca)}if(b9&&bK.isFunction(e)){e(b9[0])}b9=e=aF});return"script"}});bK.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){bK.globalEval(e);return e}}});bK.ajaxPrefilter("script",function(e){if(e.cache===aF){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});bK.ajaxTransport("script",function(b4){if(b4.crossDomain){var e,b3=t.head||t.getElementsByTagName("head")[0]||t.documentElement;return{send:function(b5,b6){e=t.createElement("script");e.async="async";if(b4.scriptCharset){e.charset=b4.scriptCharset}e.src=b4.url;e.onload=e.onreadystatechange=function(b8,b7){if(b7||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(b3&&e.parentNode){b3.removeChild(e)}e=aF;if(!b7){b6(200,"success")}}};b3.insertBefore(e,b3.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var al,aS=a6.ActiveXObject?function(){for(var e in al){al[e](0,1)}}:false,ay=0;function bF(){try{return new a6.XMLHttpRequest()}catch(b3){}}function bf(){try{return new a6.ActiveXObject("Microsoft.XMLHTTP")}catch(b3){}}bK.ajaxSettings.xhr=a6.ActiveXObject?function(){return !this.isLocal&&bF()||bf()}:bF;(function(e){bK.extend(bK.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(bK.ajaxSettings.xhr());if(bK.support.ajax){bK.ajaxTransport(function(e){if(!e.crossDomain||bK.support.cors){var b3;return{send:function(b9,b4){var b7,b6,b8=e.xhr();if(e.username){b8.open(e.type,e.url,e.async,e.username,e.password)}else{b8.open(e.type,e.url,e.async)}if(e.xhrFields){for(b6 in e.xhrFields){b8[b6]=e.xhrFields[b6]}}if(e.mimeType&&b8.overrideMimeType){b8.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!b9["X-Requested-With"]){b9["X-Requested-With"]="XMLHttpRequest"}try{for(b6 in b9){b8.setRequestHeader(b6,b9[b6])}}catch(b5){}b8.send((e.hasContent&&e.data)||null);b3=function(ci,cc){var cd,cb,ca,cg,cf;try{if(b3&&(cc||b8.readyState===4)){b3=aF;if(b7){b8.onreadystatechange=bK.noop;if(aS){delete al[b7]}}if(cc){if(b8.readyState!==4){b8.abort()}}else{cd=b8.status;ca=b8.getAllResponseHeaders();cg={};cf=b8.responseXML;if(cf&&cf.documentElement){cg.xml=cf}try{cg.text=b8.responseText}catch(ci){}try{cb=b8.statusText}catch(ch){cb=""}if(!cd&&e.isLocal&&!e.crossDomain){cd=cg.text?200:404}else{if(cd===1223){cd=204}}}}}catch(ce){if(!cc){b4(-1,ce)}}if(cg){b4(cd,cb,cg,ca)}};if(!e.async){b3()}else{if(b8.readyState===4){setTimeout(b3,0)}else{b7=++ay;if(aS){if(!al){al={};bK(a6).unload(aS)}al[b7]=b3}b8.onreadystatechange=b3}}},abort:function(){if(b3){b3(0,1)}}}}})}var P,af,bS=/^(?:toggle|show|hide)$/,bL=new RegExp("^(?:([-+])=|)("+bB+")([a-z%]*)$","i"),bQ=/queueHooks$/,aB=[k],a5={"*":[function(b3,b9){var b6,ca,e,cb=this.createTween(b3,b9),b7=bL.exec(b9),b8=cb.cur(),b4=+b8||0,b5=1;if(b7){b6=+b7[2];ca=b7[3]||(bK.cssNumber[b3]?"":"px");if(ca!=="px"&&b4){b4=bK.css(cb.elem,b3,true)||b6||1;do{e=b5=b5||".5";b4=b4/b5;bK.style(cb.elem,b3,b4+ca);b5=cb.cur()/b8}while(b5!==1&&b5!==e)}cb.unit=ca;cb.start=b4;cb.end=b7[1]?b4+(b7[1]+1)*b6:b6}return cb}]};function bn(){setTimeout(function(){P=aF},0);return(P=bK.now())}function bg(b3,e){bK.each(e,function(b8,b6){var b7=(a5[b8]||[]).concat(a5["*"]),b4=0,b5=b7.length;for(;b4<b5;b4++){if(b7[b4].call(b3,b8,b6)){return}}})}function g(b4,b8,cb){var cc,b7=0,e=0,b3=aB.length,ca=bK.Deferred().always(function(){delete b6.elem}),b6=function(){var ch=P||bn(),ce=Math.max(0,b5.startTime+b5.duration-ch),cg=1-(ce/b5.duration||0),cd=0,cf=b5.tweens.length;for(;cd<cf;cd++){b5.tweens[cd].run(cg)}ca.notifyWith(b4,[b5,cg,ce]);if(cg<1&&cf){return ce}else{ca.resolveWith(b4,[b5]);return false}},b5=ca.promise({elem:b4,props:bK.extend({},b8),opts:bK.extend(true,{specialEasing:{}},cb),originalProperties:b8,originalOptions:cb,startTime:P||bn(),duration:cb.duration,tweens:[],createTween:function(cg,cd,cf){var ce=bK.Tween(b4,b5.opts,cg,cd,b5.opts.specialEasing[cg]||b5.opts.easing);b5.tweens.push(ce);return ce},stop:function(ce){var cd=0,cf=ce?b5.tweens.length:0;for(;cd<cf;cd++){b5.tweens[cd].run(1)}if(ce){ca.resolveWith(b4,[b5,ce])}else{ca.rejectWith(b4,[b5,ce])}return this}}),b9=b5.props;ao(b9,b5.opts.specialEasing);for(;b7<b3;b7++){cc=aB[b7].call(b5,b4,b9,b5.opts);if(cc){return cc}}bg(b5,b9);if(bK.isFunction(b5.opts.start)){b5.opts.start.call(b4,b5)}bK.fx.timer(bK.extend(b6,{anim:b5,queue:b5.opts.queue,elem:b4}));return b5.progress(b5.opts.progress).done(b5.opts.done,b5.opts.complete).fail(b5.opts.fail).always(b5.opts.always)}function ao(b5,b7){var b4,b3,b8,b6,e;for(b4 in b5){b3=bK.camelCase(b4);b8=b7[b3];b6=b5[b4];if(bK.isArray(b6)){b8=b6[1];b6=b5[b4]=b6[0]}if(b4!==b3){b5[b3]=b6;delete b5[b4]}e=bK.cssHooks[b3];if(e&&"expand" in e){b6=e.expand(b6);delete b5[b3];for(b4 in b6){if(!(b4 in b5)){b5[b4]=b6[b4];b7[b4]=b8}}}else{b7[b3]=b8}}}bK.Animation=bK.extend(g,{tweener:function(b3,b6){if(bK.isFunction(b3)){b6=b3;b3=["*"]}else{b3=b3.split(" ")}var b5,e=0,b4=b3.length;for(;e<b4;e++){b5=b3[e];a5[b5]=a5[b5]||[];a5[b5].unshift(b6)}},prefilter:function(b3,e){if(e){aB.unshift(b3)}else{aB.push(b3)}}});function k(b6,cb,e){var ca,b4,cd,b5,ch,cg,cf,ce,b7=this,b3=b6.style,cc={},b9=[],b8=b6.nodeType&&U(b6);if(!e.queue){cf=bK._queueHooks(b6,"fx");if(cf.unqueued==null){cf.unqueued=0;ce=cf.empty.fire;cf.empty.fire=function(){if(!cf.unqueued){ce()}}}cf.unqueued++;b7.always(function(){b7.always(function(){cf.unqueued--;if(!bK.queue(b6,"fx").length){cf.empty.fire()}})})}if(b6.nodeType===1&&("height" in cb||"width" in cb)){e.overflow=[b3.overflow,b3.overflowX,b3.overflowY];if(bK.css(b6,"display")==="inline"&&bK.css(b6,"float")==="none"){if(!bK.support.inlineBlockNeedsLayout||bG(b6.nodeName)==="inline"){b3.display="inline-block"}else{b3.zoom=1}}}if(e.overflow){b3.overflow="hidden";if(!bK.support.shrinkWrapBlocks){b7.done(function(){b3.overflow=e.overflow[0];b3.overflowX=e.overflow[1];b3.overflowY=e.overflow[2]})}}for(ca in cb){cd=cb[ca];if(bS.exec(cd)){delete cb[ca];if(cd===(b8?"hide":"show")){continue}b9.push(ca)}}b5=b9.length;if(b5){ch=bK._data(b6,"fxshow")||bK._data(b6,"fxshow",{});if(b8){bK(b6).show()}else{b7.done(function(){bK(b6).hide()})}b7.done(function(){var ci;bK.removeData(b6,"fxshow",true);for(ci in cc){bK.style(b6,ci,cc[ci])}});for(ca=0;ca<b5;ca++){b4=b9[ca];cg=b7.createTween(b4,b8?ch[b4]:0);cc[b4]=ch[b4]||bK.style(b6,b4);if(!(b4 in ch)){ch[b4]=cg.start;if(b8){cg.end=cg.start;cg.start=b4==="width"||b4==="height"?1:0}}}}}function L(b4,b3,b6,e,b5){return new L.prototype.init(b4,b3,b6,e,b5)}bK.Tween=L;L.prototype={constructor:L,init:function(b5,b3,b7,e,b6,b4){this.elem=b5;this.prop=b7;this.easing=b6||"swing";this.options=b3;this.start=this.now=this.cur();this.end=e;this.unit=b4||(bK.cssNumber[b7]?"":"px")},cur:function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},run:function(b4){var b3,e=L.propHooks[this.prop];this.pos=b3=bK.easing[this.easing](b4,this.options.duration*b4,0,1,this.options.duration);this.now=(this.end-this.start)*b3+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(e&&e.set){e.set(this)}else{L.propHooks._default.set(this)}return this}};L.prototype.init.prototype=L.prototype;L.propHooks={_default:{get:function(b3){var e;if(b3.elem[b3.prop]!=null&&(!b3.elem.style||b3.elem.style[b3.prop]==null)){return b3.elem[b3.prop]}e=bK.css(b3.elem,b3.prop,false,"");return !e||e==="auto"?0:e},set:function(e){if(bK.fx.step[e.prop]){bK.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bK.cssProps[e.prop]]!=null||bK.cssHooks[e.prop])){bK.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}}};L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bK.each(["toggle","show","hide"],function(b3,e){var b4=bK.fn[e];bK.fn[e]=function(b5,b7,b6){return b5==null||typeof b5==="boolean"||(!b3&&bK.isFunction(b5)&&bK.isFunction(b7))?b4.apply(this,arguments):this.animate(bJ(e,true),b5,b7,b6)}});bK.fn.extend({fadeTo:function(e,b5,b4,b3){return this.filter(U).css("opacity",0).show().end().animate({opacity:b5},e,b4,b3)},animate:function(b8,b5,b7,b6){var b4=bK.isEmptyObject(b8),e=bK.speed(b5,b7,b6),b3=function(){var b9=g(this,bK.extend({},b8),e);if(b4){b9.stop(true)}};return b4||e.queue===false?this.each(b3):this.queue(e.queue,b3)},stop:function(b4,b3,e){var b5=function(b6){var b7=b6.stop;delete b6.stop;b7(e)};if(typeof b4!=="string"){e=b3;b3=b4;b4=aF}if(b3&&b4!==false){this.queue(b4||"fx",[])}return this.each(function(){var b9=true,b6=b4!=null&&b4+"queueHooks",b8=bK.timers,b7=bK._data(this);if(b6){if(b7[b6]&&b7[b6].stop){b5(b7[b6])}}else{for(b6 in b7){if(b7[b6]&&b7[b6].stop&&bQ.test(b6)){b5(b7[b6])}}}for(b6=b8.length;b6--;){if(b8[b6].elem===this&&(b4==null||b8[b6].queue===b4)){b8[b6].anim.stop(e);b9=false;b8.splice(b6,1)}}if(b9||!e){bK.dequeue(this,b4)}})}});function bJ(b4,b6){var b5,e={height:b4},b3=0;for(;b3<4;b3+=2-b6){b5=bU[b3];e["margin"+b5]=e["padding"+b5]=b4}if(b6){e.opacity=e.width=b4}return e}bK.each({slideDown:bJ("show"),slideUp:bJ("hide"),slideToggle:bJ("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,b3){bK.fn[e]=function(b4,b6,b5){return this.animate(b3,b4,b6,b5)}});bK.speed=function(b4,b5,b3){var e=b4&&typeof b4==="object"?bK.extend({},b4):{complete:b3||!b3&&b5||bK.isFunction(b4)&&b4,duration:b4,easing:b3&&b5||b5&&!bK.isFunction(b5)&&b5};e.duration=bK.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bK.fx.speeds?bK.fx.speeds[e.duration]:bK.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(){if(bK.isFunction(e.old)){e.old.call(this)}if(e.queue){bK.dequeue(this,e.queue)}};return e};bK.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}};bK.timers=[];bK.fx=L.prototype.init;bK.fx.tick=function(){var b4,b3=bK.timers,e=0;for(;e<b3.length;e++){b4=b3[e];if(!b4()&&b3[e]===b4){b3.splice(e--,1)}}if(!b3.length){bK.fx.stop()}};bK.fx.timer=function(e){if(e()&&bK.timers.push(e)&&!af){af=setInterval(bK.fx.tick,bK.fx.interval)}};bK.fx.interval=13;bK.fx.stop=function(){clearInterval(af);af=null};bK.fx.speeds={slow:600,fast:200,_default:400};bK.fx.step={};if(bK.expr&&bK.expr.filters){bK.expr.filters.animated=function(e){return bK.grep(bK.timers,function(b3){return e===b3.elem}).length}}var bq=/^(?:body|html)$/i;bK.fn.offset=function(ce){if(arguments.length){return ce===aF?this:this.each(function(cf){bK.offset.setOffset(this,ce,cf)})}var b8,b3,b9,ca,b7,cb,e,b6,cc,b5,b4=this[0],cd=b4&&b4.ownerDocument;if(!cd){return}if((b9=cd.body)===b4){return bK.offset.bodyOffset(b4)}b3=cd.documentElement;if(!bK.contains(b3,b4)){return{top:0,left:0}}b8=b4.getBoundingClientRect();ca=br(cd);b7=b3.clientTop||b9.clientTop||0;cb=b3.clientLeft||b9.clientLeft||0;e=ca.pageYOffset||b3.scrollTop;b6=ca.pageXOffset||b3.scrollLeft;cc=b8.top+e-b7;b5=b8.left+b6-cb;return{top:cc,left:b5}};bK.offset={bodyOffset:function(e){var b4=e.offsetTop,b3=e.offsetLeft;if(bK.support.doesNotIncludeMarginInBodyOffset){b4+=parseFloat(bK.css(e,"marginTop"))||0;b3+=parseFloat(bK.css(e,"marginLeft"))||0}return{top:b4,left:b3}},setOffset:function(b5,ce,b8){var b9=bK.css(b5,"position");if(b9==="static"){b5.style.position="relative"}var b7=bK(b5),b3=b7.offset(),e=bK.css(b5,"top"),cc=bK.css(b5,"left"),cd=(b9==="absolute"||b9==="fixed")&&bK.inArray("auto",[e,cc])>-1,cb={},ca={},b4,b6;if(cd){ca=b7.position();b4=ca.top;b6=ca.left}else{b4=parseFloat(e)||0;b6=parseFloat(cc)||0}if(bK.isFunction(ce)){ce=ce.call(b5,b8,b3)}if(ce.top!=null){cb.top=(ce.top-b3.top)+b4}if(ce.left!=null){cb.left=(ce.left-b3.left)+b6}if("using" in ce){ce.using.call(b5,cb)}else{b7.css(cb)}}};bK.fn.extend({position:function(){if(!this[0]){return}var b4=this[0],b3=this.offsetParent(),b5=this.offset(),e=bq.test(b3[0].nodeName)?{top:0,left:0}:b3.offset();b5.top-=parseFloat(bK.css(b4,"marginTop"))||0;b5.left-=parseFloat(bK.css(b4,"marginLeft"))||0;e.top+=parseFloat(bK.css(b3[0],"borderTopWidth"))||0;e.left+=parseFloat(bK.css(b3[0],"borderLeftWidth"))||0;return{top:b5.top-e.top,left:b5.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||t.body;while(e&&(!bq.test(e.nodeName)&&bK.css(e,"position")==="static")){e=e.offsetParent}return e||t.body})}});bK.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b4,b3){var e=/Y/.test(b3);bK.fn[b4]=function(b5){return bK.access(this,function(b6,b9,b8){var b7=br(b6);if(b8===aF){return b7?(b3 in b7)?b7[b3]:b7.document.documentElement[b9]:b6[b9]}if(b7){b7.scrollTo(!e?b8:bK(b7).scrollLeft(),e?b8:bK(b7).scrollTop())}else{b6[b9]=b8}},b4,b5,arguments.length,null)}});function br(e){return bK.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}bK.each({Height:"height",Width:"width"},function(e,b3){bK.each({padding:"inner"+e,content:b3,"":"outer"+e},function(b4,b5){bK.fn[b5]=function(b9,b8){var b7=arguments.length&&(b4||typeof b9!=="boolean"),b6=b4||(b9===true||b8===true?"margin":"border");return bK.access(this,function(cb,ca,cc){var cd;if(bK.isWindow(cb)){return cb.document.documentElement["client"+e]}if(cb.nodeType===9){cd=cb.documentElement;return Math.max(cb.body["scroll"+e],cd["scroll"+e],cb.body["offset"+e],cd["offset"+e],cd["client"+e])}return cc===aF?bK.css(cb,ca,cc,b6):bK.style(cb,ca,cc,b6)},b3,b7?b9:aF,b7)}})});a6.jQuery=a6.$=bK;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bK})}})(window);(function(d){var p,a,g,b=d(window),e={jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert",closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s",hi_menu:"ui-state-default ui-corner-bottom",hi_btn:"ui-state-default ui-corner-all",hi_btnhov:"ui-state-hover",hi_hnd:"ui-icon ui-icon-grip-dotted-horizontal"},bootstrap:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign",closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play",hi_menu:"well",hi_btn:"btn",hi_btnhov:"",hi_hnd:"icon-chevron-down"}};var n=function(){g=d("body");b=d(window);b.bind("resize",function(){if(a){clearTimeout(a)}a=setTimeout(d.pnotify_position_all,10)})};var j=null;if(document.body){n()}else{d(n)}d.extend({pnotify_remove_all:function(){var r=b.data("pnotify");if(r&&r.length){d.each(r,function(){if(this.pnotify_remove){this.pnotify_remove()}})}},pnotify_position_all:function(){if(a){clearTimeout(a)}a=null;var r=b.data("pnotify");if(!r||!r.length){return}d.each(r,function(){if(!j){j=this.opts.stack}if(!j){return}j.nextpos1=j.firstpos1;j.nextpos2=j.firstpos2;j.addpos2=0;j.animation=true});d.each(r,function(){this.pnotify_position()})},pnotify:function(B){var C;var r;if(typeof B!="object"){r=d.extend({},d.pnotify.defaults);r.text=B}else{r=d.extend({},d.pnotify.defaults,B)}for(var v in r){if(typeof v=="string"&&v.match(/^pnotify_/)){r[v.replace(/^pnotify_/,"")]=r[v]}}if(r.before_init){if(r.before_init(r)===false){return null}}var u;var w=function(H,E){y.css("display","none");var D=document.elementFromPoint(H.clientX,H.clientY);y.css("display","block");var G=d(D);var F=G.css("cursor");y.css("cursor",F!="auto"?F:"default");if(!u||u.get(0)!=D){if(u){h.call(u.get(0),"mouseleave",H.originalEvent);h.call(u.get(0),"mouseout",H.originalEvent)}h.call(D,"mouseenter",H.originalEvent);h.call(D,"mouseover",H.originalEvent)}h.call(D,E,H.originalEvent);u=G};var A=e[r.styling];var y=d("<div />",{"class":"ui-pnotify "+r.addclass,css:{display:"none"},mouseenter:function(D){if(r.nonblock){D.stopPropagation()}if(r.mouse_reset&&C=="out"){y.stop(true);C="in";y.css("height","auto").animate({width:r.width,opacity:r.nonblock?r.nonblock_opacity:r.opacity},"fast")}if(r.nonblock){y.animate({opacity:r.nonblock_opacity},"fast")}if(r.hide&&r.mouse_reset){y.pnotify_cancel_remove()}if(r.sticker&&!r.nonblock){y.sticker.trigger("pnotify_icon").css("visibility","visible")}if(r.closer&&!r.nonblock){y.closer.css("visibility","visible")}},mouseleave:function(D){if(r.nonblock){D.stopPropagation()}u=null;y.css("cursor","auto");if(r.nonblock&&C!="out"){y.animate({opacity:r.opacity},"fast")}if(r.hide&&r.mouse_reset){y.pnotify_queue_remove()}if(r.sticker_hover){y.sticker.css("visibility","hidden")}if(r.closer_hover){y.closer.css("visibility","hidden")}d.pnotify_position_all()},mouseover:function(D){if(r.nonblock){D.stopPropagation()}},mouseout:function(D){if(r.nonblock){D.stopPropagation()}},mousemove:function(D){if(r.nonblock){D.stopPropagation();w(D,"onmousemove")}},mousedown:function(D){if(r.nonblock){D.stopPropagation();D.preventDefault();w(D,"onmousedown")}},mouseup:function(D){if(r.nonblock){D.stopPropagation();D.preventDefault();w(D,"onmouseup")}},click:function(D){if(r.nonblock){D.stopPropagation();w(D,"onclick")}},dblclick:function(D){if(r.nonblock){D.stopPropagation();w(D,"ondblclick")}}});y.opts=r;y.container=d("<div />",{"class":A.container+" ui-pnotify-container "+(r.type=="error"?A.error:(r.type=="info"?A.info:(r.type=="success"?A.success:A.notice)))}).appendTo(y);if(r.cornerclass!=""){y.container.removeClass("ui-corner-all").addClass(r.cornerclass)}if(r.shadow){y.container.addClass("ui-pnotify-shadow")}y.pnotify_version="1.2.0";y.pnotify=function(D){var F=r;if(typeof D=="string"){r.text=D}else{r=d.extend({},r,D)}for(var E in r){if(typeof E=="string"&&E.match(/^pnotify_/)){r[E.replace(/^pnotify_/,"")]=r[E]}}y.opts=r;if(r.cornerclass!=F.cornerclass){y.container.removeClass("ui-corner-all").addClass(r.cornerclass)}if(r.shadow!=F.shadow){if(r.shadow){y.container.addClass("ui-pnotify-shadow")}else{y.container.removeClass("ui-pnotify-shadow")}}if(r.addclass===false){y.removeClass(F.addclass)}else{if(r.addclass!==F.addclass){y.removeClass(F.addclass).addClass(r.addclass)}}if(r.title===false){y.title_container.slideUp("fast")}else{if(r.title!==F.title){if(r.title_escape){y.title_container.text(r.title).slideDown(200)}else{y.title_container.html(r.title).slideDown(200)}}}if(r.text===false){y.text_container.slideUp("fast")}else{if(r.text!==F.text){if(r.text_escape){y.text_container.text(r.text).slideDown(200)}else{y.text_container.html(r.insert_brs?String(r.text).replace(/\n/g,"<br />"):r.text).slideDown(200)}}}y.pnotify_history=r.history;y.pnotify_hide=r.hide;if(r.type!=F.type){y.container.removeClass(A.error+" "+A.notice+" "+A.success+" "+A.info).addClass(r.type=="error"?A.error:(r.type=="info"?A.info:(r.type=="success"?A.success:A.notice)))}if(r.icon!==F.icon||(r.icon===true&&r.type!=F.type)){y.container.find("div.ui-pnotify-icon").remove();if(r.icon!==false){d("<div />",{"class":"ui-pnotify-icon"}).append(d("<span />",{"class":r.icon===true?(r.type=="error"?A.error_icon:(r.type=="info"?A.info_icon:(r.type=="success"?A.success_icon:A.notice_icon))):r.icon})).prependTo(y.container)}}if(r.width!==F.width){y.animate({width:r.width})}if(r.min_height!==F.min_height){y.container.animate({minHeight:r.min_height})}if(r.opacity!==F.opacity){y.fadeTo(r.animate_speed,r.opacity)}if(!r.closer||r.nonblock){y.closer.css("display","none")}else{y.closer.css("display","block")}if(!r.sticker||r.nonblock){y.sticker.css("display","none")}else{y.sticker.css("display","block")}y.sticker.trigger("pnotify_icon");if(r.sticker_hover){y.sticker.css("visibility","hidden")}else{if(!r.nonblock){y.sticker.css("visibility","visible")}}if(r.closer_hover){y.closer.css("visibility","hidden")}else{if(!r.nonblock){y.closer.css("visibility","visible")}}if(!r.hide){y.pnotify_cancel_remove()}else{if(!F.hide){y.pnotify_queue_remove()}}y.pnotify_queue_position();return y};y.pnotify_position=function(H){if(!j){j=this.opts.stack}if(!j){return}if(!j.nextpos1){j.nextpos1=j.firstpos1}if(!j.nextpos2){j.nextpos2=j.firstpos2}if(!j.addpos2){j.addpos2=0}var J=y.css("display")=="none";if(!J||H){var I,G;var D={};var F;switch(j.dir1){case"down":F="top";break;case"up":F="bottom";break;case"left":F="right";break;case"right":F="left";break}I=parseInt(y.css(F));if(isNaN(I)){I=0}if(typeof j.firstpos1=="undefined"&&!J){j.firstpos1=I;j.nextpos1=j.firstpos1}var E;switch(j.dir2){case"down":E="top";break;case"up":E="bottom";break;case"left":E="right";break;case"right":E="left";break}G=parseInt(y.css(E));if(isNaN(G)){G=0}if(typeof j.firstpos2=="undefined"&&!J){j.firstpos2=G;j.nextpos2=j.firstpos2}if((j.dir1=="down"&&j.nextpos1+y.height()>b.height())||(j.dir1=="up"&&j.nextpos1+y.height()>b.height())||(j.dir1=="left"&&j.nextpos1+y.width()>b.width())||(j.dir1=="right"&&j.nextpos1+y.width()>b.width())){j.nextpos1=j.firstpos1;j.nextpos2+=j.addpos2+(typeof j.spacing2=="undefined"?25:s.spacing2);j.addpos2=0}if(j.animation&&j.nextpos2<G){switch(j.dir2){case"down":D.top=j.nextpos2+"px";break;case"up":D.bottom=j.nextpos2+"px";break;case"left":D.right=j.nextpos2+"px";break;case"right":D.left=j.nextpos2+"px";break}}else{y.css(E,j.nextpos2+"px")}switch(j.dir2){case"down":case"up":if(y.outerHeight(true)>j.addpos2){j.addpos2=y.height()}break;case"left":case"right":if(y.outerWidth(true)>j.addpos2){j.addpos2=y.width()}break}if(j.nextpos1){if(j.animation&&(I>j.nextpos1||D.top||D.bottom||D.right||D.left)){switch(j.dir1){case"down":D.top=j.nextpos1+"px";break;case"up":D.bottom=j.nextpos1+"px";break;case"left":D.right=j.nextpos1+"px";break;case"right":D.left=j.nextpos1+"px";break}}else{y.css(F,j.nextpos1+"px")}}if(D.top||D.bottom||D.right||D.left){y.animate(D,{duration:500,queue:false})}switch(j.dir1){case"down":case"up":j.nextpos1+=y.height()+(typeof j.spacing1=="undefined"?25:j.spacing1);break;case"left":case"right":j.nextpos1+=y.width()+(typeof j.spacing1=="undefined"?25:j.spacing1);break}}};y.pnotify_queue_position=function(D){if(a){clearTimeout(a)}if(!D){D=10}a=setTimeout(d.pnotify_position_all,D)};y.pnotify_display=function(){if(!y.parent().length){y.appendTo(g)}if(r.before_open){if(r.before_open(y)===false){return}}if(r.stack.push!="top"){y.pnotify_position(true)}if(r.animation=="fade"||r.animation.effect_in=="fade"){y.show().fadeTo(0,0).hide()}else{if(r.opacity!=1){y.show().fadeTo(0,r.opacity).hide()}}y.animate_in(function(){if(r.after_open){r.after_open(y)}y.pnotify_queue_position();if(r.hide){y.pnotify_queue_remove()}})};y.pnotify_remove=function(){if(y.timer){window.clearTimeout(y.timer);y.timer=null}if(r.before_close){if(r.before_close(y)===false){return}}y.animate_out(function(){if(r.after_close){if(r.after_close(y)===false){return}}y.pnotify_queue_position();if(r.remove){y.detach()}})};y.animate_in=function(E){C="in";var D;if(typeof r.animation.effect_in!="undefined"){D=r.animation.effect_in}else{D=r.animation}if(D=="none"){y.show();E()}else{if(D=="show"){y.show(r.animate_speed,E)}else{if(D=="fade"){y.show().fadeTo(r.animate_speed,r.opacity,E)}else{if(D=="slide"){y.slideDown(r.animate_speed,E)}else{if(typeof D=="function"){D("in",E,y)}else{y.show(D,(typeof r.animation.options_in=="object"?r.animation.options_in:{}),r.animate_speed,E)}}}}}};y.animate_out=function(E){C="out";var D;if(typeof r.animation.effect_out!="undefined"){D=r.animation.effect_out}else{D=r.animation}if(D=="none"){y.hide();E()}else{if(D=="show"){y.hide(r.animate_speed,E)}else{if(D=="fade"){y.fadeOut(r.animate_speed,E)}else{if(D=="slide"){y.slideUp(r.animate_speed,E)}else{if(typeof D=="function"){D("out",E,y)}else{y.hide(D,(typeof r.animation.options_out=="object"?r.animation.options_out:{}),r.animate_speed,E)}}}}}};y.pnotify_cancel_remove=function(){if(y.timer){window.clearTimeout(y.timer)}};y.pnotify_queue_remove=function(){y.pnotify_cancel_remove();y.timer=window.setTimeout(function(){y.pnotify_remove()},(isNaN(r.delay)?0:r.delay))};y.closer=d("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:r.closer_hover?"hidden":"visible"},click:function(){y.pnotify_remove();y.sticker.css("visibility","hidden");y.closer.css("visibility","hidden")}}).append(d("<span />",{"class":A.closer})).appendTo(y.container);if(!r.closer||r.nonblock){y.closer.css("display","none")}y.sticker=d("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:r.sticker_hover?"hidden":"visible"},click:function(){r.hide=!r.hide;if(r.hide){y.pnotify_queue_remove()}else{y.pnotify_cancel_remove()}d(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){d(this).children().removeClass(A.pin_up+" "+A.pin_down).addClass(r.hide?A.pin_up:A.pin_down)}).append(d("<span />",{"class":A.pin_up})).appendTo(y.container);if(!r.sticker||r.nonblock){y.sticker.css("display","none")}if(r.icon!==false){d("<div />",{"class":"ui-pnotify-icon"}).append(d("<span />",{"class":r.icon===true?(r.type=="error"?A.error_icon:(r.type=="info"?A.info_icon:(r.type=="success"?A.success_icon:A.notice_icon))):r.icon})).prependTo(y.container)}y.title_container=d("<h4 />",{"class":"ui-pnotify-title"}).appendTo(y.container);if(r.title===false){y.title_container.hide()}else{if(r.title_escape){y.title_container.text(r.title)}else{y.title_container.html(r.title)}}y.text_container=d("<div />",{"class":"ui-pnotify-text"}).appendTo(y.container);if(r.text===false){y.text_container.hide()}else{if(r.text_escape){y.text_container.text(r.text)}else{y.text_container.html(r.insert_brs?String(r.text).replace(/\n/g,"<br />"):r.text)}}if(typeof r.width=="string"){y.css("width",r.width)}if(typeof r.min_height=="string"){y.container.css("min-height",r.min_height)}y.pnotify_history=r.history;y.pnotify_hide=r.hide;var z=b.data("pnotify");if(z==null||typeof z!="object"){z=[]}if(r.stack.push=="top"){z=d.merge([y],z)}else{z=d.merge(z,[y])}b.data("pnotify",z);if(r.stack.push=="top"){y.pnotify_queue_position(1)}if(r.after_init){r.after_init(y)}if(r.history){var t=b.data("pnotify_history");if(typeof t=="undefined"){t=d("<div />",{"class":"ui-pnotify-history-container "+A.hi_menu,mouseleave:function(){t.animate({top:"-"+p+"px"},{duration:100,queue:false})}}).append(d("<div />",{"class":"ui-pnotify-history-header",text:"Redisplay"})).append(d("<button />",{"class":"ui-pnotify-history-all "+A.hi_btn,text:"All",mouseenter:function(){d(this).addClass(A.hi_btnhov)},mouseleave:function(){d(this).removeClass(A.hi_btnhov)},click:function(){d.each(z,function(){if(this.pnotify_history){if(this.is(":visible")){if(this.pnotify_hide){this.pnotify_queue_remove()}}else{if(this.pnotify_display){this.pnotify_display()}}}});return false}})).append(d("<button />",{"class":"ui-pnotify-history-last "+A.hi_btn,text:"Last",mouseenter:function(){d(this).addClass(A.hi_btnhov)},mouseleave:function(){d(this).removeClass(A.hi_btnhov)},click:function(){var D=-1;var E;do{if(D==-1){E=z.slice(D)}else{E=z.slice(D,D+1)}if(!E[0]){break}D--}while(!E[0].pnotify_history||E[0].is(":visible"));if(!E[0]){return false}if(E[0].pnotify_display){E[0].pnotify_display()}return false}})).appendTo(g);var x=d("<span />",{"class":"ui-pnotify-history-pulldown "+A.hi_hnd,mouseenter:function(){t.animate({top:"0"},{duration:100,queue:false})}}).appendTo(t);p=x.offset().top+2;t.css({top:"-"+p+"px"});b.data("pnotify_history",t)}}r.stack.animation=false;y.pnotify_display();return y}});var q=/^on/,c=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,m=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,k=/^(scroll|resize|(un)?load|abort|error)$/;var h=function(t,r){var u;t=t.toLowerCase();if(document.createEvent&&this.dispatchEvent){t=t.replace(q,"");if(t.match(c)){d(this).offset();u=document.createEvent("MouseEvents");u.initMouseEvent(t,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}else{if(t.match(m)){u=document.createEvent("UIEvents");u.initUIEvent(t,r.bubbles,r.cancelable,r.view,r.detail)}else{if(t.match(k)){u=document.createEvent("HTMLEvents");u.initEvent(t,r.bubbles,r.cancelable)}}}if(!u){return}this.dispatchEvent(u)}else{if(!t.match(q)){t="on"+t}u=document.createEventObject(r);this.fireEvent(t,u)}};d.pnotify.defaults={title:false,title_escape:false,text:false,text_escape:false,styling:"bootstrap",addclass:"",cornerclass:"",nonblock:false,nonblock_opacity:0.2,history:true,width:"300px",min_height:"16px",type:"notice",icon:true,animation:"fade",animate_speed:"slow",opacity:1,shadow:true,closer:true,closer_hover:true,sticker:true,sticker_hover:true,hide:true,delay:8000,mouse_reset:true,remove:true,insert_brs:true,stack:{dir1:"down",dir2:"left",push:"bottom",spacing1:25,spacing2:25}}})(jQuery);if(!("console" in window)){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;++i){window.console[names[i]]=function(){}}}Ext.define("Ozone.plugins.Banner",{extend:"Ext.AbstractPlugin",init:function(a){}});Ext.define("Ozone.plugins.Dashboard",{extend:"Ext.AbstractPlugin",init:function(a){}});Ext.define("Ozone.plugins.DashboardContainer",{extend:"Ext.AbstractPlugin",init:function(a){}});Ext.define("Ozone.plugins.WidgetBase",{extend:"Ext.AbstractPlugin",init:function(a){}});Ext.define("Ozone.plugins.WidgetPanel",{extend:"Ozone.plugins.WidgetBase",init:function(a){}});Ext.define("Ozone.plugins.WidgetWindow",{extend:"Ozone.plugins.WidgetBase",init:function(a){}});Ext.define("Ozone.plugins.pane.Pane",{extend:"Ext.AbstractPlugin",init:function(a){}});Ext.define("Ozone.plugins.pane.AccordionPane",{extend:"Ozone.plugins.pane.Pane",init:function(a){}});Ext.define("Ozone.plugins.pane.DesktopPane",{extend:"Ozone.plugins.pane.Pane",init:function(a){}});Ext.define("Ozone.plugins.pane.FitPane",{extend:"Ozone.plugins.pane.Pane",init:function(a){}});Ext.define("Ozone.plugins.pane.PortalPane",{extend:"Ozone.plugins.pane.Pane",init:function(a){}});Ext.define("Ozone.plugins.pane.TabbedPane",{extend:"Ozone.plugins.pane.Pane",init:function(a){}});Ext.override(Ext.tip.QuickTip,{onTargetOver:function(j){var g=this,h=j.getTarget(),k,c,d,b,a;if(g.disabled){return}g.targetXY=j.getXY();if(!h||h.nodeType!==1||h==document||h==document.body){return}if(h){Ext.Object.each(g.targets,function(e,m){var n=Ext.fly(m.target);if(n&&(n.dom===h||n.contains(h))){k=n.dom;return false}});if(k){g.activeTarget=g.targets[k.id];g.activeTarget.el=h;g.anchor=g.activeTarget.anchor;if(g.anchor){g.anchorTarget=h}g.delayShow();return}}k=Ext.get(h);c=g.tagConfig;d=c.namespace;b=g.getTipCfg(j);if(b){if(b.target){h=b.target;k=Ext.get(h)}a=k.getAttribute(d+c.hide);g.activeTarget={el:h,text:b.text,width:+k.getAttribute(d+c.width)||null,autoHide:a!="user"&&a!=="false",title:k.getAttribute(d+c.title),cls:k.getAttribute(d+c.cls),align:k.getAttribute(d+c.align)};g.anchor=k.getAttribute(d+c.anchor);if(g.anchor){g.anchorTarget=h}g.delayShow()}}});Ext.apply(Ext.dd.DragDropManager,{fireEvents:function(n,p){var r=this.dragCurrent;if(!r||r.isLocked()){return}var t=n.getPoint();var a=[];var d=[];var k=[];var h=[];var c=[];for(var g in this.dragOvers){var b=this.dragOvers[g];if(!this.isTypeOfDD(b)){continue}if(!this.isOverTarget(t,b,this.mode)){d.push(b)}a[g]=true;delete this.dragOvers[g]}for(var q in r.groups){if("string"!=typeof q){continue}for(g in this.ids[q]){var j=this.ids[q][g];if(!j.el.isVisible(true)){continue}if(!this.isTypeOfDD(j)){continue}if(j.isTarget&&!j.isLocked()&&((j!=r)||(r.ignoreSelf===false))){if(this.isOverTarget(t,j,this.mode)){if(p){h.push(j)}else{if(!a[j.id]){c.push(j)}else{k.push(j)}this.dragOvers[j.id]=j}}}}}if(this.mode){if(d.length){r.b4DragOut(n,d);r.onDragOut(n,d)}if(c.length){r.onDragEnter(n,c)}if(k.length){r.b4DragOver(n,k);r.onDragOver(n,k)}if(h.length){r.b4DragDrop(n,h);r.onDragDrop(n,h)}}else{var m=0;for(g=0,m=d.length;g<m;++g){r.b4DragOut(n,d[g].id);r.onDragOut(n,d[g].id)}for(g=0,m=c.length;g<m;++g){r.onDragEnter(n,c[g].id)}for(g=0,m=k.length;g<m;++g){r.b4DragOver(n,k[g].id);r.onDragOver(n,k[g].id)}for(g=0,m=h.length;g<m;++g){r.b4DragDrop(n,h[g].id);r.onDragDrop(n,h[g].id)}}if(p&&!h.length){r.onInvalidDrop(n)}}});Ext.override(Ext.EventObjectImpl,{getTarget:function(b,c,a){if(!this.target){return null}if(b){return Ext.fly(this.target).findParent(b,c,a)}return a?Ext.get(this.target):this.target}});Ext.override(Ext.dd.DragZone,{unreg:function(){this.callOverridden(arguments);this.proxy&&this.proxy.destroy()}});var Ozone=Ozone||{};Ozone.createDragTrackerOverrides=function(){return{_useShim:true,_shimActive:false,_debugShim:false,_shim:null,_createShim:function(){var a=document.createElement("div");a.id="ext-ddm-shim";if(document.body.firstChild){document.body.insertBefore(a,document.body.firstChild)}else{document.body.appendChild(a)}a.style.display="none";a.style.backgroundColor="red";a.style.position="absolute";a.style.zIndex="9999999";Ext.create("Ext.core.Element",a.id).setOpacity(0);return a},_sizeShim:function(){if(this._shimActive){var a=this._shim;a.style.height=Ext.core.Element.getDocumentHeight()+"px";a.style.width=Ext.core.Element.getDocumentWidth()+"px";a.style.top="0";a.style.left="0"}},_activateShim:function(){if(this._useShim&&!this._shimActive){var b=Ext.get("ext-ddm-shim");this._shim=b?b.dom:this._shim;if(!this._shim){this._shim=this._createShim()}this._shimActive=true;var a=this._shim,c=0;if(this._debugShim){c=0.5}Ext.create("Ext.core.Element",a.id).setOpacity(c);this._sizeShim();a.style.display="block"}},_deactivateShim:function(){this._shim.style.display="none";this._shimActive=false},endDrag:function(a){if(this._shimActive){this._deactivateShim();if(this._handleTarget){this._handleTarget(a)}}this.callOverridden(arguments)}}};Ext.override(Ext.resizer.ResizeTracker,Ext.apply(Ozone.createDragTrackerOverrides(),{onBeforeStart:function(a){this.callOverridden(arguments);this._activateShim()}}));Ext.override(Ext.util.ComponentDragger,Ext.apply(Ozone.createDragTrackerOverrides(),{onStart:function(a){this.callOverridden(arguments);Ext.getCmp("mainPanel").activeDashboard.shimPanes()},onEnd:function(a){this.callOverridden(arguments);Ext.getCmp("mainPanel").activeDashboard.unshimPanes()}}));Ext.override(Ext.dd.DragTracker,Ext.apply(Ozone.createDragTrackerOverrides(),{onStart:function(a){this.callOverridden(arguments);this._activateShim()}}));(function(){var c=/alpha\(opacity=(.*)\)/i;var b=/^\s+|\s+$/g;var a=/button|input|textarea|select|object/;Ext.apply(Ext.Element.prototype,{setOpacity:function(e,d){var h=this,k=h.dom,j,g;if(!h.dom){return h}g=h.dom.style;if(!d||!h.anim){if(!Ext.supports.Opacity||(Ext.isIE9&&document.compatMode==="BackCompat")){e=e<1?"alpha(opacity="+e*100+")":"";j=g.filter.replace(c,"").replace(b,"");g.zoom=1;g.filter=j+(j.length>0?" ":"")+e}else{g.opacity=e}}else{if(!Ext.isObject(d)){d={duration:350,easing:"ease-in"}}h.animate(Ext.applyIf({to:{opacity:e}},d))}return h},clearOpacity:function(){var d=this.dom.style;if(!Ext.supports.Opacity||(Ext.isIE9&&document.compatMode==="BackCompat")){if(!Ext.isEmpty(d.filter)){d.filter=d.filter.replace(c,"").replace(b,"")}}else{d.opacity=d["-moz-opacity"]=d["-khtml-opacity"]=""}return this},focusable:function(){try{var j=this.dom,k=j.nodeName.toLowerCase(),d=false,g=!isNaN(j.tabIndex)&&j.tabIndex!==-1;if(!j.disabled){if(a.test(k)){d=true}else{d=k=="a"?j.href||g:g}}return d&&this.isVisible(true)}catch(h){return false}}})})();Ext.override(Ext.ZIndexManager,{assignZIndices:function(){var c=this.zIndexStack,b=c.length,e=0,g=this.zseed,d;for(;e<b;e++){d=c[e];if(d&&!d.hidden){g=d.setZIndex(g);if(d.fixedZIndex!=null){d.zIndex=g;d.setZIndex(d.fixedZIndex)}}}this._activateLast();return g},_showModalMask:function(b){var j=b.el.getStyle("zIndex")-4,d=b.floatParent?b.floatParent.getTargetEl():Ext.get(b.getEl().dom.parentNode),g;if(!d){Ext.global.console&&Ext.global.console.warn&&Ext.global.console.warn("mask target could not be found. Mask cannot be shown");return}for(var e=0,a=this.zIndexStack.length;e<a;e++){var h=this.zIndexStack[e];if(h&&!h.hidden){if(h.fixedZIndex!=null){h.setZIndex(j-1)}}}g=d.getBox();if(!this.mask){this.mask=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"mask"});this.mask.setVisibilityMode(Ext.Element.DISPLAY);this.mask.on("click",this._onMaskClick,this)}if(d.dom===document.body){g.height=Ext.Element.getViewHeight()}d.addCls(Ext.baseCSSPrefix+"body-masked");this.mask.setBox(g);this.mask.setStyle("zIndex",j);this.mask.show()},_hideModalMask:function(){if(this.mask&&this.mask.dom.parentNode){Ext.get(this.mask.dom.parentNode).removeCls(Ext.baseCSSPrefix+"body-masked");this.mask.hide();for(var b=0,a=this.zIndexStack.length;b<a;b++){var d=this.zIndexStack[b];if(d&&!d.hidden){if(d.fixedZIndex!=null){d.setZIndex(d.fixedZIndex)}}}}},_onMaskClick:function(){if(this.front){if(this.front.modalAutoClose){this.front.fireEvent("modalAutoClose");this.front.close()}else{this.front.focus()}}}});Ext.override(Ext.grid.Panel,{initComponent:function(){this.callParent(arguments);this.mon({scrollershow:function(a){a.mon({afterrender:function(b){b.scrollEl.dom.tabIndex=-1}})}})}});Ext.override(Ext.button.Button,{initComponent:function(){this.showFocus=true;this.on("afterrender",function(a){a.mon(a.getEl(),"mousedown",function(){this.showFocus=false},a);a.mon(a.getEl(),"mouseup",function(){this.showFocus=true},a);a.mon(a.getEl(),"mouseout",function(){this.showFocus=true},a)});this.callOverridden(arguments)},onFocus:function(){if(this.showFocus){this.callOverridden(arguments)}}});Ext.override(Ext.tip.Tip,{maxWidth:500});Ext.override(Ext.form.field.ComboBox,{initComponent:function(){var e=this,c=Ext.isDefined,b=e.store,d=e.transform,a,g;Ext.applyIf(e.renderSelectors,{hiddenDataEl:"."+e.hiddenDataCls.split(" ").join(".")});if(e.typeAhead&&e.multiSelect){Ext.Error.raise("typeAhead and multiSelect are mutually exclusive options -- please remove one of them.")}if(e.typeAhead&&!e.editable){Ext.Error.raise("If typeAhead is enabled the combo must be editable: true -- please change one of those settings.")}if(e.selectOnFocus&&!e.editable){Ext.Error.raise("If selectOnFocus is enabled the combo must be editable: true -- please change one of those settings.")}this.addEvents("beforequery","select","beforeselect","beforedeselect");if(d){a=Ext.getDom(d);if(a){b=Ext.Array.map(Ext.Array.from(a.options),function(h){return[h.value,h.text]});if(!e.name){e.name=a.name}if(!("value" in e)){e.value=a.value}}}e.bindStore(b||"ext-empty-store",true);b=e.store;if(b.autoCreated){e.queryMode="local";e.valueField=e.displayField="field1";if(!b.expanded){e.displayField="field2"}}if(!c(e.valueField)){e.valueField=e.displayField}g=e.queryMode==="local";if(!c(e.queryDelay)){e.queryDelay=g?10:500}if(!c(e.minChars)){e.minChars=g?0:4}if(!e.displayTpl){e.displayTpl=Ext.create("Ext.XTemplate",'<tpl for=".">{[typeof values === "string" ? values : values["'+e.displayField+'"]]}<tpl if="xindex < xcount">'+e.delimiter+"</tpl></tpl>")}else{if(Ext.isString(e.displayTpl)){e.displayTpl=Ext.create("Ext.XTemplate",e.displayTpl)}}e.callParent();e.doQueryTask=Ext.create("Ext.util.DelayedTask",e.doRawQuery,e);if(e.store.getCount()>0){e.setValue(e.value)}if(a){e.render(a.parentNode,a);Ext.removeNode(a);delete e.renderTo}e.tpl=new Ext.XTemplate('<tpl for=".">','<div class="x-boundlist-item">',"{"+e.displayField+":htmlEncode}","</div>","</tpl>")},setHiddenValue:function(c){var g=this,e;if(!g.hiddenDataEl){return}c=Ext.Array.from(c);var j=g.hiddenDataEl.dom,h=j.childNodes,b=h[0],a=c.length,d=h.length;if(!b&&a>0){g.hiddenDataEl.update(Ext.DomHelper.markup({tag:"input",type:"hidden",name:g.name+"-hidden"}));d=1;b=j.firstChild}while(d>a){j.removeChild(h[0]);--d}while(d<a){j.appendChild(b.cloneNode(true));++d}for(e=0;e<a;e++){h[e].value=c[e]}}});Ext.apply(Ext.Element.prototype,{slideIn:function(b,h,e){var g=this,d=g.dom.style,c,a;b=b||"t";h=h||{};c=function(){var p=this,n=h.listeners,q,j,m,k,r;if(!e){g.fixDisplay()}q=g.getBox();if((b=="t"||b=="b")&&q.height===0){q.height=g.dom.scrollHeight}else{if((b=="l"||b=="r")&&q.width===0){q.width=g.dom.scrollWidth}}j=g.getPositioning();g.setSize(q.width,q.height);k=g.wrap({style:{visibility:e?"visible":"hidden"}});k.setPositioning(j);if(k.isStyle("position","static")){k.position("relative")}g.clearPositioning("auto");k.clip();g.setStyle({visibility:"",position:"absolute"});if(e){k.setSize(q.width,q.height)}switch(b){case"t":r={from:{width:q.width+"px",height:"0px"},to:{width:q.width+"px",height:q.height+"px"}};d.bottom="0px";break;case"l":r={from:{width:"0px",height:q.height+"px"},to:{width:q.width+"px",height:q.height+"px"}};d.right="0px";break;case"r":r={from:{x:q.x+q.width,width:"0px",height:q.height+"px"},to:{x:q.x,width:q.width+"px",height:q.height+"px"}};break;case"b":r={from:{y:q.y+q.height,width:q.width+"px",height:"0px"},to:{y:q.y,width:q.width+"px",height:q.height+"px"}};break;case"tl":r={from:{x:q.x,y:q.y,width:"0px",height:"0px"},to:{width:q.width+"px",height:q.height+"px"}};d.bottom="0px";d.right="0px";break;case"bl":r={from:{x:q.x+q.width,width:"0px",height:"0px"},to:{x:q.x,width:q.width+"px",height:q.height+"px"}};d.right="0px";break;case"br":r={from:{x:q.x+q.width,y:q.y+q.height,width:"0px",height:"0px"},to:{x:q.x,y:q.y,width:q.width+"px",height:q.height+"px"}};break;case"tr":r={from:{y:q.y+q.height,width:"0px",height:"0px"},to:{y:q.y,width:q.width+"px",height:q.height+"px"}};d.bottom="0px";break}k.show();a=Ext.apply({},h);delete a.listeners;a=Ext.create("Ext.fx.Anim",Ext.applyIf(a,{target:k,duration:500,easing:"ease-out",from:e?r.to:r.from,to:e?r.from:r.to}));a.on("afteranimate",function(){if(e){g.setPositioning(j);if(h.useDisplay){g.setDisplayed(false)}else{g.hide()}}else{g.clearPositioning();g.setPositioning(j)}if(k.dom){var t=k.id;k.dom.parentNode.insertBefore(g.dom,k.dom);k.remove();a.disabled=true}g.setSize(q.width,q.height);p.end()});if(n){a.on(n)}};g.animate({duration:h.duration?h.duration*2:1000,listeners:{beforeanimate:{fn:c},afteranimate:{fn:function(){if(a&&a.running){a.end()}}}}});return g}});Ext.apply(Ext.fx.Manager,{runAnim:function(d){if(!d||d.disabled===true){return}var c=this,b=d.target.getId(),g=c.useCSS3&&d.target.type=="element",a=c.timestamp-d.startTime,e,h;this.collectTargetData(d,a,g);if(g){d.target.setAttr(c.targetData[b],true);c.targetData[b]=[];c.collectTargetData(d,d.duration,g);d.paused=true;e=d.target.target;if(d.target.isComposite){e=d.target.target.last()}h={};h[Ext.supports.CSS3TransitionEnd]=d.lastFrame;h.scope=d;h.single=true;e.on(h)}else{if(a>=d.duration){c.applyPendingAttrs(true);delete c.targetData[b];delete c.targetArr[b];d.lastFrame()}}}});Ext.override(Ext.button.Button,{showMenu:function(){var a=this;if(a.rendered&&a.menu){if(a.tooltip&&a.getTipAttr()!="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.btnEl)}if(a.menu.isVisible()){a.menu.hide()}a.menu.showBy(a.el,a.menuAlign);a.menu.showBy(a.el,a.menuAlign)}return a}});Ext.override(Ext.menu.Item,{deferExpandMenu:function(){var a=this;if(!a.menu.rendered||!a.menu.isVisible()){a.parentMenu.activeChild=a.menu;a.menu.parentItem=a;a.menu.parentMenu=a.menu.ownerCt=a.parentMenu;a.menu.showBy(a,a.menuAlign);a.menu.showBy(a,a.menuAlign)}}});Ext.apply(Ext.Function,{createInterceptor:function(d,c,b,a){var e=d;if(!Ext.isFunction(c)){return d}else{return function(){var h=this,g=arguments;return(c.apply(b||h||window,g)!==false)?d.apply(h||window,g):a||null}}}});Ext.override(Ext.AbstractComponent,{constructor:function(a){if(a.plugins&&this.plugins){this.plugins=[].concat(this.plugins).concat(a.plugins);delete a.plugins}this.callOverridden(arguments)}});Ext.override(Ext.form.field.Text,{supportsPlaceholder:false,usePlaceholderIfAvailable:true,initEvents:function(){var b=this,a=b.inputEl;this.callOverridden();if(b.usePlaceholderIfAvailable){b.supportsPlaceholder=Ext.supports.Placeholder}if(!b.supportsPlaceholder){b.mon(a,"keydown",function(c){if(!c.isSpecialKey()){b.firstKeyPressed=true;b.placeholderUsed=false}},b)}},afterRender:function(){var a=this;if(a.enforceMaxLength){a.inputEl.dom.maxLength=a.maxLength}a.beforeApplyEmptyText();a.applyEmptyText();a.autoSize();a.callParent()},preFocus:function(){var b=this,c=b.inputEl,a=b.emptyText,d;if(a&&!b.supportsPlaceholder&&b.placeholderUsed&&c.dom.value==a){b.setRawValue("");d=true;c.removeCls(b.emptyCls)}else{if(b.supportsPlaceholder){b.inputEl.removeCls(b.emptyCls)}}if(b.selectOnFocus||d){c.dom.select()}},beforeBlur:function(){this.beforeApplyEmptyText()},beforeApplyEmptyText:function(){var b=this,a=b.emptyText,c=b.inputEl,d;if(b.rendered&&a){d=c.dom.value.length<1;if(!this.firstKeyPressed){b.placeholderUsed=d||c.dom.value==a}else{b.placeholderUsed=d}}},postBlur:function(){this.fromBlur=true;this.applyEmptyText();this.keyPressedWithData=false;this.fromBlur=false},reset:function(){this.callParent()},applyEmptyText:function(){var b=this,a=b.emptyText,c=b.inputEl,d;if(b.rendered&&a){d=c.dom.value.length<1;if(b.supportsPlaceholder){b.inputEl.dom.placeholder=a}else{if(d){b.setRawValue(a)}}if(d){b.inputEl.addCls(b.emptyCls)}b.autoSize()}},getErrors:function(n){var g=this,m=g.callParent(arguments),a=g.validator,d=g.emptyText,c=g.allowBlank,e=g.vtype,h=Ext.form.field.VTypes,j=g.regex,k=Ext.String.format,b;n=n||g.processRawValue(g.getRawValue());if(Ext.isFunction(a)){b=a.call(g,n);if(b!==true){m.push(b)}}if(n.length<1||(!g.supportsPlaceholder&&g.placeholderUsed)){if(!c){m.push(g.blankText)}return m}if(n.length<g.minLength){m.push(k(g.minLengthText,g.minLength))}if(n.length>g.maxLength){m.push(k(g.maxLengthText,g.maxLength))}if(e){if(!h[e](n,g)){m.push(g.vtypeText||h[e+"Text"])}}if(j&&!j.test(n)){m.push(g.regexText||g.invalidText)}return m},getRawValue:function(){var b=this,a=b.callParent();if(a===b.emptyText&&b.placeholderUsed&&!b.supportsPlaceholder){a=""}return a},setValue:function(b){var a=this,c=a.inputEl;if(c&&a.emptyText&&!Ext.isEmpty(b)){c.removeCls(a.emptyCls)}a.callParent(arguments);a.beforeApplyEmptyText();a.applyEmptyText();return a}});Ext.override(Ext.tree.View,{toggle:function(a){if(a.data.expandable){this[a.isExpanded()?"collapse":"expand"](a)}},expand:function(b,a,d,c){if(b.data.expandable){return b.expand(a,d,c)}},collapse:function(b,a,d,c){if(b.data.expandable){return b.collapse(a,d,c)}}});Ext.override(Ext.LoadMask,{onBeforeLoad:function(){var c=this,a=c.ownerCt||c.floatParent,b;if(!this.disabled){if(a.componentLayoutCounter){if(a.el!=null&&a.el.isVisible()){Ext.Component.prototype.show.call(c)}else{this.showOnParentShow=true}}else{b=a.afterComponentLayout;a.afterComponentLayout=function(){a.afterComponentLayout=b;b.apply(a,arguments);if(c.loading){Ext.Component.prototype.show.call(c)}}}}},onLoad:function(){this.loading=false;Ext.Component.prototype.hide.call(this);this.showOnParentShow=false}});Ext.override(Ext.chart.LegendItem,{createLegend:function(w){var x=this,j=w.yFieldIndex,n=x.series,a=n.type,p=x.yFieldIndex,d=x.legend,t=x.surface,u=d.x+x.x,q=d.y+x.y,c,m=x.zIndex,b,k,v,e,r=false,h=Ext.apply(n.seriesStyle,n.style);function g(y){var z=n[y];return(Ext.isArray(z)?z[p]:z)}k=x.add("label",t.add({type:"text",x:20,y:0,zIndex:m||0,font:d.labelFont,fill:d.labelFill||"#000",text:g("title")||g("yField")}));if(a==="line"||a==="scatter"){if(a==="line"){x.add("line",t.add({type:"path",path:"M0.5,0.5L16.5,0.5",zIndex:m,"stroke-width":n.lineWidth,"stroke-linejoin":"round","stroke-dasharray":n.dash,stroke:h.stroke||"#000",style:{cursor:"pointer"}}))}if(n.showMarkers||a==="scatter"){b=Ext.apply(n.markerStyle,n.markerConfig||{});x.add("marker",Ext.chart.Shape[b.type](t,{fill:b.fill,x:8.5,y:0.5,zIndex:m,radius:b.radius||b.size,style:{cursor:"pointer"}}))}}else{x.add("box",t.add({type:"rect",zIndex:m,x:0,y:0,width:12,height:12,fill:n.getLegendColor(j),style:{cursor:"pointer"}}))}x.setAttributes({hidden:false},true);c=x.getBBox();v=x.add("mask",t.add({type:"rect",x:c.x,y:c.y,width:c.width||20,height:c.height||20,zIndex:(m||0)+1000,fill:"#f00",opacity:0,style:{cursor:"pointer"}}));x.on("mouseover",function(){k.setStyle({"font-weight":"bold"});v.setStyle({cursor:"pointer"});n._index=j;n.highlightItem()},x);x.on("mouseout",function(){k.setStyle({"font-weight":"normal"});n._index=j;n.unHighlightItem()},x);if(!n.visibleInLegend(j)){r=true;k.setAttributes({opacity:0.5},true)}x.on("mousedown",function(){if(!r){n.hideAll();k.setAttributes({opacity:0.5},true)}else{n.showAll();k.setAttributes({opacity:1},true)}r=!r},x);x.updatePosition({x:0,y:0})}});Ext.override(Ext.grid.Scroller,{afterRender:function(){var a=this;a.callParent();a.mon(a.scrollEl,"scroll",a.onElScroll,a);Ext.cache[a.el.id].skipGarbageCollection=true;Ext.EventManager.addListener(a.scrollEl,"scroll",a.onElScrollCheck,a);Ext.cache[a.scrollEl.id].skipGarbageCollection=true},wasScrolled:false,onElScroll:function(a,b){this.wasScrolled=true;this.fireEvent("bodyscroll",a,b)},onElScrollCheck:function(c,d,a){var b=this;if(!b.wasScrolled){b.mon(b.scrollEl,"scroll",b.onElScroll,b)}b.wasScrolled=false}});var OWF=OWF||{};OWF.Events={Widget:{BEFORE_LAUNCH:"beforeWidgetLaunch",AFTER_LAUNCH:"afterWidgetLaunch"},Dashboard:{COMPLETE_RENDER:"dashboardCompleteRender",CHANGED:"dashboardChanged"},Banner:{DOCKED:"docked",UNDOCKED:"undocked"}};Ext.apply(Ext.History,{startUp:function(){var a=this;a.currentToken=a.hiddenField.value||this.getHash();if(a.oldIEMode){a.checkIFrame()}else{var b=a.getHash();this.task=Ext.TaskManager.start({run:function(){var c=a.getHash();if(c!==b){b=c;a.handleStateChange(b);a.doSave()}},interval:50,scope:a});a.ready=true;a.fireEvent("ready",a)}},checkIFrame:function(){var d=this,b=d.iframe.contentWindow;if(!b||!b.document){Ext.Function.defer(this.checkIFrame,10,this);return}var e=b.document,c=e.getElementById("state"),a=c?c.innerText:null,g=d.getHash();this.task=Ext.TaskManager.start({run:function(){var m=b.document,k=m.getElementById("state"),h=k?k.innerText:null,j=d.getHash();if(h!==a){a=h;d.handleStateChange(h);window.top.location.hash=h;g=h;d.doSave()}else{if(j!==g){g=j;d.updateIFrame(j)}}},interval:50,scope:d});d.ready=true;d.fireEvent("ready",d)},shutDown:function(){if(this.task!=null){Ext.TaskManager.stop(this.task);this.currentToken=null;this.hiddenField.value=null}}});Ext.define("Ozone.components.util.InstanceVariablizer",{extend:"Ext.AbstractPlugin",alias:"plugin.instancevariablizer",container:null,init:function(b){var a=b.itemId||b.initialConfig.id;if(!a){throw"Cannot add component as instace variable because it has no itemId or id"}if(this.container[a]){throw"Cannot add instance variable "+a+" because a variable by that name already exists"}this.container[a]=b}});Ozone=Ozone||{};Ozone.components=Ozone.components||{};Ozone.components.keys=Ozone.components.keys||{};Ozone.components.keys.EVENT_NAME="keyup";Ozone.components.keys.HotKeys=Ozone.components.keys.HotKeys||{};Ozone.components.keys.MoveHotKeys=Ozone.components.keys.MoveHotKeys||{};(function(){var a=Ozone.components.keys.HotKeys;a.SETTINGS={key:"S".charCodeAt(0),exclusive:true};a.ADMINISTRATION={key:"A".charCodeAt(0),exclusive:true};a.MARKETPLACE={key:"M".charCodeAt(0),exclusive:true};a.METRIC={key:"R".charCodeAt(0),exclusive:true};a.LAUNCH_MENU={key:"L".charCodeAt(0)};a.HELP={key:"H".charCodeAt(0),exclusive:true};a.LOGOUT={key:"O".charCodeAt(0)};a.PREVIOUS_DASHBOARD={key:owfdojo.keys.PAGE_UP};a.NEXT_DASHBOARD={key:owfdojo.keys.PAGE_DOWN};a.DASHBOARD_SWITCHER={key:"C".charCodeAt(0),exclusive:true};a.WIDGET_SWITCHER={key:"Q".charCodeAt(0),exclusive:true};a.DEFAULT_DASHBOARD={key:owfdojo.keys.HOME};a.CLOSE_WIDGET={key:"W".charCodeAt(0)};a.MAXIMIZE_COLLAPSE_WIDGET={key:owfdojo.keys.UP_ARROW,focusParent:false};a.MINIMIZE_EXPAND_WIDGET={key:owfdojo.keys.DOWN_ARROW,focusParent:false};a.ESCAPE_FOCUS={key:owfdojo.keys.ESCAPE,alt:false,shift:false};var b={};for(var c in a){var e=a[c];if(e.alt===undefined){e.alt=true}if(e.shift===undefined){e.shift=true}if(e.focusParent===undefined){e.focusParent=true}b[e.key]=e}owfdojo.connect(document,"onkeydown",function(g){var h=b[g.keyCode];if(h&&g.altKey===h.alt&&g.shiftKey===h.shift){g.preventDefault()}});var d=Ozone.components.keys.MoveHotKeys;d.MOVE_UP={key:owfdojo.keys.UP_ARROW};d.MOVE_RIGHT={key:owfdojo.keys.RIGHT_ARROW};d.MOVE_DOWN={key:owfdojo.keys.DOWN_ARROW};d.MOVE_LEFT={key:owfdojo.keys.LEFT_ARROW};for(c in d){var e=d[c];if(e.ctrl===undefined){e.ctrl=true}if(e.alt===undefined){e.alt=false}if(e.shift===undefined){e.shift=false}if(e.focusParent===undefined){e.focusParent=false}}})();Ext.define("Ozone.components.keys.KeyMap",{extend:"Ext.util.KeyMap",alternateClassName:"Ozone.KeyMap",singleton:true,previousKey:null,constructor:function(){this.callParent([document,[],Ozone.components.keys.EVENT_NAME])},addBinding:function(b){function a(c){Ext.applyIf(c,{shift:true,alt:true,activeInWidget:true,activeOutsideWidget:true})}Ext.isArray(b)?Ext.each(b,a):a(b);this.callParent(arguments)},processBinding:function(g,a){if(!g.activeOutsideWidget){return}if(this.checkModifiers(g,a)){var h=a.getKey(),k=g.fn||g.handler,m=g.scope||this,j=g.keyCode,b=g.defaultEventAction,c,e,d=new Ext.EventObjectImpl(a);for(c=0,e=j.length;c<e;++c){if((h===j[c]&&!this.previousKey)||(h===j[c]&&this.previousKey&&(this.compareHotKeys(g,this.previousKey)||!this.previousKey.exclusive))){this.set(g);if(k.call(m,h,a)!==true&&b){d[b]()}break}}}},reset:function(){this.previousKey=null},set:function(a){this.previousKey=a},handleKey:function(a,b){Ext.iterate(this.bindings,function(e,c,d){if(e.key==a.keyCode&&e.alt===a.altKey&&e.shift===a.shiftKey&&e.ctrl===a.ctrlKey&&(e.activeInWidget==a.fromWidget||e.activeOutsideWidget==!a.fromWidget)){var g=b?Ozone.util.parseJson(b).id:null;e.fn.call(e.scope,a.keyCode,a,g);return false}})},bindWidgetEvents:function(a){a.getEl().on(Ozone.components.keys.EVENT_NAME,function(b){b.fromWidget=true;this.handleKey(b,a.getEl().id);delete b.fromWidget},this)},compareHotKeys:function(c,b){if(c===b){return true}var a=true;Ext.Object.each(b,function(d,e){if(b[d]!==c[d]){a=false;return false}});return a}});Ext.define("Ozone.components.keys.MoveKeyMap",{extend:"Ext.util.KeyMap",alternateClassName:"Ozone.MoveKeyMap",singleton:true,constructor:function(){this.callParent([document,[],"keydown"])},addBinding:function(b){function a(c){Ext.applyIf(c,{shift:true,alt:false})}Ext.isArray(b)?Ext.each(b,a):a(b);this.callParent(arguments)},handleKey:function(a,b){Ext.iterate(this.bindings,function(e,c,d){if(e.key==a.keyCode&&e.alt===a.altKey&&e.ctrl===a.ctrlKey&&e.shift===a.shiftKey){var g=b?Ozone.util.parseJson(b).id:null;e.fn.call(e.scope,a.keyCode,a,g);return false}})}});Ext.define("Ozone.components.keys.HotKeyComponent",{extend:"Ext.AbstractPlugin",constructor:function(a){this.init=function(b){b.on("show",function(){Ozone.KeyMap.set(a)});b.on("hide",function(){Ozone.KeyMap.reset();if(b.getEl().contains(document.activeElement)){document.activeElement.blur()}});b.on("destroy",function(){Ozone.KeyMap.reset()})}}});Ext.define("Ozone.components.keys.KeyMoveable",{extend:"Ext.AbstractPlugin",init:function(b){var a=this.moveAmount||Ozone.components.keys.KeyMoveable.prototype.moveAmount;b.moveUp=function(){var c=this.getPosition(),d=c[1]-a;c[1]=d>0?d:0;this.setPosition(c)};b.moveDown=function(e){var d=e-this.getHeight(),c=this.getPosition(),g=c[1]+a;c[1]=g>d?d:g;this.setPosition(c)};b.moveLeft=function(){var d=this.getPosition(),c=d[0]-a;d[0]=c>0?c:0;this.setPosition(d)};b.moveRight=function(g){var e=g-this.getWidth(),d=this.getPosition(),c=d[0]+a;d[0]=c>e?e:c;this.setPosition(d)}}});Ozone.components.keys.KeyMoveable.prototype.moveAmount=10;Ext.define("Ozone.components.focusable.Focusable",{extend:"Ext.AbstractPlugin",alias:"plugin.focusable",constructor:function(a,b){this.init=function(c){c.on("afterrender",function(){var d=a?c[a]:c.el;Ozone.components.focusable.Focusable.setupFocus(d,c,b)})}}});Ozone.components.focusable.Focusable.setupFocus=function(d,e,c){c=c||"x-focus";d=Ext.get(d);e=e||Ext.create("Ext.util.Observable");if(!d){return}var a=true;e.mon(d,"focus",function(g,h){if(a){Ext.fly(h).addCls(c)}});e.mon(d,"blur",function(g,h){Ext.fly(h).removeCls(c)});e.mon(d,"mousedown",function(){a=false});function b(){a=true}e.mon(d,{mouseup:b,mouseout:b});Ozone.components.focusable.Focusable.clearOutline(d)};Ozone.components.focusable.Focusable.clearOutline=function(a){a=Ext.get(a);if(!a){return}a.dom.tabIndex=0;a.dom.hideFocus=true;a.dom.style.outlineStyle="none"};Ext.define("Ozone.components.focusable.CircularFocus",{focusAndPrevent:function(a,b){a.preventDefault();b.focus()},setupFocus:function(b,c,j,d){var g=this;if(!b){b=g.getEl()}if(!c){c=g.getEl()}function e(k){if(k.keyCode===Ext.EventObject.TAB&&k.shiftKey===true&&document.activeElement===g.getEl().dom){if(d){d()}g.focusAndPrevent(k,c)}}function h(k){if(k.keyCode===Ext.EventObject.TAB&&k.shiftKey===true){if(d){d()}g.focusAndPrevent(k,c)}}function a(k){if(k.keyCode===Ext.EventObject.TAB&&k.shiftKey===false){if(j){j()}g.focusAndPrevent(k,b)}}g.mon(g.getFocusEl(),{keydown:e,keypress:e});g.mon(b,{keydown:h,keypress:h});g.mon(c,{keydown:a,keypress:a});g.tearDownCircularFocus=function(){g.mun(g.getFocusEl(),{keydown:e,keypress:e});g.mun(b,{keydown:h,keypress:h});g.mun(c,{keydown:a,keypress:a})}},tearDownCircularFocus:Ext.emptyFn});Ext.define("Ozone.components.focusable.FocusableGridPanel",{extend:"Ext.AbstractPlugin",init:function(b){var a=b.getView();if(a!==null){a.on("afterrender",function(d){var c=d.getEl();c.dom.tabIndex=b.isDisabled()?-1:0;a.on({beforeitemmousedown:{fn:function(h,g,m,j,n,k){this.disableFocusSelect=true},scope:a}});c.on("focus",function(){if(this.getSelectedNodes().length===0&&this.getNodes().length>0&&!this.disableFocusSelect){this.select(0)}this.addCls("x-grid-view-focus");this.disableFocusSelect=false},a);c.on("click",function(){this.focus()},c);c.on("blur",function(){a.removeCls("x-grid-view-focus")},a)},b)}b.on("edit",function(){this.getView().focus()},b);b.on("disable",function(){this.getEl().dom.tabIndex=-1},a);b.on("enable",function(){this.getEl().dom.tabIndex=0},a)}});Ext.define("Ozone.components.focusable.EscCloseHelper",{setupFocusOnEsc:function(d,b){function a(){d.focus()}function c(g){function e(){Ext.defer(a,1);this.un("keyup",arguments.callee)}var h=Ext.isFF3_6?Ext.getDoc():Ext.getBody();if(g.getKey()===g.ESC){h.on(Ozone.components.keys.EVENT_NAME,e,h)}}if(b){this.on("specialkey",function(g,h,e){c(e)})}else{this.mon(this.getEl(),"keydown",c)}this.on("close",a)}});Ext.define("Ozone.components.draggable.DraggableWidgetView",{extend:"Ext.AbstractPlugin",itemSelector:null,dragNodeSelector:null,cmpToHideAndShow:null,dashboardContainer:null,showAfterLaunch:null,init:function(a){a.on("afterrender",this.setupDragZone,this,{single:true});a.on("destroy",this.cleanup,this)},cleanup:function(){this.dragZone.unreg()},setupDragZone:function(a){this.dragZone=new Ext.dd.DragZone(a.getEl(),{isTarget:false,panes:null,ddGroup:"widgets",itemSelector:this.itemSelector,dragNodeSelector:this.dragNodeSelector,getDragData:function(c){var d=c.getTarget(this.itemSelector),e,b;if(d){e=Ext.get(d);b=Ext.getCmp(e.parent().id);return{ddel:e.down(this.dragNodeSelector).dom.cloneNode(true),widgetModel:[b.getRecord(d)]}}},onStartDrag:Ext.bind(this.onStartDrag,this),afterValidDrop:Ext.bind(this.afterDrop,this),afterInvalidDrop:Ext.bind(this.afterDrop,this)});this.dashboardContainer=a.dashboardContainer;this.cmpToHideAndShow=a.isXType("window")?a:a.up("window")},onStartDrag:function(){this.dashboardContainer.activeDashboard.enableWidgetDragAndDrop();this.cmpToHideAndShow.hide();this.showAfterLaunch&&this.dashboardContainer.activeDashboard.on(OWF.Events.Widget.AFTER_LAUNCH,this.showWindow,this)},afterDrop:function(){this.dashboardContainer.activeDashboard.disableWidgetDragAndDrop()},showWindow:function(){this.dashboardContainer.activeDashboard.un(OWF.Events.Widget.AFTER_LAUNCH,this.showWindow,this);this.cmpToHideAndShow.show()}});Ext.define("Ozone.components.tree.SimpleTreeColumn",{extend:"Ext.grid.column.Column",alias:"widget.simpletreecolumn",initComponent:function(){var a=this.renderer||this.defaultRenderer,b=this.scope||window;this.renderer=function(p,r,e,d,n,h,m){var w=[],u=Ext.String.format,y=e.getDepth(),v=Ext.baseCSSPrefix+"tree-",g=v+"elbow-",q=v+"expander",k='<img src="{1}" class="{0}" />',z='<input type="button" role="checkbox" class="{0}" {1} />',j=a.apply(b,arguments),t=e.get("href"),x=e.get("hrefTarget"),c=e.get("cls");while(e){if(!e.isRoot()||(e.isRoot()&&m.rootVisible)){if(e.getDepth()===y){}else{w.unshift(u(k,(g+"empty"),Ext.BLANK_IMAGE_URL))}}e=e.parentNode}if(t){w.push('<a href="',t,'" target="',x,'">',j,"</a>")}else{w.push(j)}if(c){r.tdCls+=" "+c}return w.join("")};this.callParent(arguments)},defaultRenderer:function(a){return a}});Ext.define("Ozone.components.resizer.NoCollapseSplitter",{extend:"Ext.resizer.Splitter",alias:"widget.nocollapsesplitter",onRender:function(){var a=this,b=a.getCollapseTarget(),c=a.getCollapseDirection();Ext.applyIf(a.renderData,{collapseDir:c,collapsible:a.collapsible});a.addChildEls("collapseEl");this.callParent(arguments);if(a.performCollapse!==false){if(a.renderData.collapsible){a.mon(a.collapseEl,"click",a.toggleTargetCmp,a)}if(a.collapseOnDblClick){a.mon(a.el,"dblclick",a.toggleTargetCmp,a)}}a.mon(b,"collapse",a.onTargetCollapse,a);a.mon(b,"expand",a.onTargetExpand,a);a.el.addCls(a.baseCls+"-"+a.orientation);a.el.unselectable();a.tracker=Ext.create("Ext.resizer.SplitterTracker",{el:a.el});a.relayEvents(a.tracker,["beforedragstart","dragstart","dragend"])}});Ext.define("Ext.ux.layout.component.form.MultiSelect",{extend:"Ext.layout.component.field.Field",alias:["layout.multiselectfield"],type:"multiselectfield",defaultHeight:200,sizeBodyContents:function(b,a){var c=this;if(!Ext.isNumber(a)){a=c.defaultHeight}c.owner.panel.setSize(b,a)}});Ext.define("Ext.ux.layout.component.form.ItemSelector",{extend:"Ext.layout.component.field.Field",alias:["layout.itemselectorfield"],type:"itemselectorfield",defaultHeight:200,sizeBodyContents:function(b,a){var c=this;if(!Ext.isNumber(a)){a=c.defaultHeight}c.owner.innerCt.setSize(b,a)}});Ext.define("Ext.ux.form.MultiSelect",{extend:"Ext.form.BaseField",alternateClassName:"Ext.ux.Multiselect",alias:["widget.multiselect","widget.multiselectfield"],uses:["Ext.view.BoundList","Ext.form.FieldSet","Ext.ux.layout.component.form.MultiSelect","Ext.view.DragZone","Ext.view.DropZone"],ddReorder:false,appendOnly:false,displayField:"text",allowBlank:true,minSelections:0,maxSelections:Number.MAX_VALUE,blankText:"This field is required",minSelectionsText:"Minimum {0} item(s) required",maxSelectionsText:"Maximum {0} item(s) allowed",delimiter:",",componentLayout:"multiselectfield",fieldBodyCls:Ext.baseCSSPrefix+"form-multiselect-body",initComponent:function(){var a=this;a.bindStore(a.store,true);if(a.store.autoCreated){a.valueField=a.displayField="field1";if(!a.store.expanded){a.displayField="field2"}}if(!Ext.isDefined(a.valueField)){a.valueField=a.displayField}a.callParent()},bindStore:function(a,c){var d=this,e=d.store,b=d.boundList;if(e&&!c&&e!==a&&e.autoDestroy){e.destroy()}d.store=a?Ext.data.StoreMgr.lookup(a):null;if(b){b.bindStore(a||null)}},onRender:function(e,a){var g=this,b,d,c;g.callParent(arguments);d=g.boundList=Ext.create("Ext.view.BoundList",{multiSelect:true,store:g.store,displayField:g.displayField,border:false});c=d.getSelectionModel();g.mon(c,{selectionChange:g.onSelectionChange,scope:g});b=g.panel=Ext.create("Ext.panel.Panel",{title:g.listTitle,tbar:g.tbar,items:[d],renderTo:g.bodyEl,layout:"fit"});b.ownerCt=g;g.setRawValue(g.rawValue)},getSubTplMarkup:function(){return""},afterRender:function(){var a=this;a.callParent();if(a.ddReorder&&!a.dragGroup&&!a.dropGroup){a.dragGroup=a.dropGroup="MultiselectDD-"+Ext.id()}if(a.draggable||a.dragGroup){a.dragZone=new Ext.view.DragZone({view:a.boundList,ddGroup:a.dragGroup,dragText:"{0} Item{1}"})}if(a.droppable||a.dropGroup){a.dropZone=new Ext.view.DropZone({view:a.boundList,ddGroup:a.dropGroup,handleNodeDrop:function(j,h,b){var c=this.view,e=c.getStore(),d=j.records,g;j.view.store.remove(d);g=e.indexOf(h);if(b==="after"){g++}e.insert(g,d);c.getSelectionModel().select(d)}})}},onSelectionChange:function(){this.checkChange()},clearValue:function(){this.setValue([])},getSubmitValue:function(){var b=this,a=b.delimiter,c=b.getValue();return Ext.isString(a)?c.join(a):c},getRawValue:function(){var b=this,a=b.boundList;if(a){b.rawValue=Ext.Array.map(a.getSelectionModel().getSelection(),function(c){return c.get(b.valueField)})}return b.rawValue},setRawValue:function(c){var b=this,a=b.boundList,d;c=Ext.Array.from(c);b.rawValue=c;if(a){d=[];Ext.Array.forEach(c,function(h){var g,e=b.store.findRecord(b.valueField,h,g,g,true,true);if(e){d.push(e)}});a.getSelectionModel().select(d,false,true)}return c},valueToRaw:function(a){return a},areValuesEqual:function(e,d){var b=Ext.Array.from,c,a;e=b(e);d=b(d);a=e.length;if(a!==d.length){return false}for(c=0;c<a;c++){if(d[c]!==e[c]){return false}}return true},getErrors:function(b){var a=this,c=Ext.String.format,e=a.callParent(arguments),d;b=Ext.Array.from(b||a.getValue());d=b.length;if(!a.allowBlank&&d<1){e.push(a.blankText)}if(d<this.minSelections){e.push(c(a.minSelectionsText,a.minSelections))}if(d>this.maxSelections){e.push(c(a.maxSelectionsText,a.maxSelections))}return e},onDisable:function(){this.callParent();this.disabled=true;this.updateReadOnly()},onEnable:function(){this.callParent();this.disabled=false;this.updateReadOnly()},setReadOnly:function(a){this.readOnly=a;this.updateReadOnly()},updateReadOnly:function(){var b=this,a=b.boundList,c=b.readOnly||b.disabled;if(a){a.getSelectionModel().setLocked(c)}},onDestroy:function(){Ext.destroyMembers(this,"panel","boundList","dragZone","dropZone");this.callParent()}});Ext.define("Ext.ux.form.ItemSelector",{extend:"Ext.ux.form.MultiSelect",alias:["widget.itemselectorfield","widget.itemselector"],alternateClassName:["Ext.ux.ItemSelector"],requires:["Ext.ux.layout.component.form.ItemSelector","Ext.button.Button"],hideNavIcons:false,buttons:["top","up","add","remove","down","bottom"],buttonsText:{top:"Move to Top",up:"Move Up",add:"Add to Selected",remove:"Remove from Selected",down:"Move Down",bottom:"Move to Bottom"},multiselects:[],componentLayout:"itemselectorfield",fieldBodyCls:Ext.baseCSSPrefix+"form-itemselector-body",bindStore:function(b,c){var d=this,a=d.toField,g=d.fromField,e;d.callParent(arguments);if(a){a.store.removeAll();g.store.removeAll();e=[];d.store.each(function(h){e.push(h.copy(h.getId()))});g.store.add(e)}},onRender:function(e,c){var n=this,b=Ext.baseCSSPrefix,g="ItemSelectorDD-"+Ext.id(),d={displayField:n.displayField,valueField:n.valueField,dragGroup:g,dropGroup:g,flex:1,hideLabel:true},m=Ext.apply({listTitle:"Available",store:Ext.create("Ext.data.Store",{model:n.store.model}),listeners:{boundList:{itemdblclick:n.onItemDblClick,scope:n}}},n.multiselects[0],d),j=Ext.apply({listTitle:"Selected",store:Ext.create("Ext.data.Store",{model:n.store.model}),listeners:{boundList:{itemdblclick:n.onItemDblClick,scope:n},change:n.onToFieldChange,scope:n}},n.multiselects[1],d),p=Ext.widget("multiselect",m),h=Ext.widget("multiselect",j),a,k=[];Ext.ux.form.MultiSelect.superclass.onRender.call(n,e,c);n.fromField=p;n.toField=h;if(!n.hideNavIcons){Ext.Array.forEach(n.buttons,function(q){k.push({xtype:"button",tooltip:n.buttonsText[q],handler:n["on"+Ext.String.capitalize(q)+"BtnClick"],cls:b+"form-itemselector-btn",iconCls:b+"form-itemselector-"+q,scope:n});k.push({xtype:"component",height:3,width:1,style:"font-size:0;line-height:0"})})}a=n.innerCt=Ext.widget("container",{renderTo:n.bodyEl,layout:{type:"hbox",align:"middle"},items:[n.fromField,{xtype:"container",margins:"0 4",items:k},n.toField]});a.ownerCt=n;n.bindStore(n.store);n.setRawValue(n.rawValue)},onToFieldChange:function(){this.checkChange()},onTopBtnClick:function(){var a=this.toField.boundList;a.getStore().insert(0,a.getSelectionModel().getSelection())},onBottomBtnClick:function(){var b=this.toField.boundList,a=b.getStore();a.insert(a.getCount(),b.getSelectionModel().getSelection())},onUpBtnClick:function(){var c=this.toField.boundList,a=c.getStore(),b=c.getSelectionModel().getSelection();Ext.Array.each(b,function(e){var d=a.indexOf(e);if(d===0){return false}a.insert(d-1,e)})},onDownBtnClick:function(){var c=this.toField.boundList,a=c.getStore(),b=c.getSelectionModel().getSelection();Ext.Array.each(b.reverse(),function(e){var d=a.indexOf(e);if(d===a.getCount()-1){return false}a.insert(d+1,e)})},onAddBtnClick:function(){var b=this,c=b.fromField.boundList,a=c.getSelectionModel().getSelection();c.getStore().remove(a);this.toField.boundList.getStore().add(a)},onRemoveBtnClick:function(){var c=this,b=c.toField.boundList,a=b.getSelectionModel().getSelection();b.getStore().remove(a);this.fromField.boundList.getStore().add(a)},onItemDblClick:function(a){var b=this;if(a==b.toField.boundList){b.onRemoveBtnClick()}else{if(a==b.fromField.boundList){b.onAddBtnClick()}}},setRawValue:function(e){var c=this,b=Ext.Array,d,a,g;e=b.from(e);c.rawValue=e;if(c.toField){d=c.toField.boundList.getStore();a=c.fromField.boundList.getStore();a.add(d.getRange());d.removeAll();g=[];Ext.Array.forEach(e,function(k){var j,h=a.findRecord(c.valueField,k,j,j,true,true);if(h){g.push(h)}});a.remove(g);d.add(g)}return e},getRawValue:function(){var b=this,a=b.toField,c=b.rawValue;if(a){c=Ext.Array.map(a.boundList.getStore().getRange(),function(d){return d.get(b.valueField)})}b.rawValue=c;return c},updateReadOnly:function(){var a=this,b=a.readOnly||a.disabled;if(a.rendered){a.toField.setReadOnly(b);a.fromField.setReadOnly(b);Ext.Array.forEach(a.innerCt.query("button"),function(c){c.setDisabled(b)})}},onDestroy:function(){Ext.destroyMembers(this,"innerCt");this.callParent()}});var Ozone=Ozone||{};Ozone.MessageBoxPlus=function(){var a=Ext.Msg;var c=function(){a.buttonText={ok:Ozone.layout.MessageBoxButtonText.ok,cancel:Ozone.layout.MessageBoxButtonText.cancel,yes:Ozone.layout.MessageBoxButtonText.yes,no:Ozone.layout.MessageBoxButtonText.no}};var b=function(d){if(d!=undefined){a.on("hide",function(e){e.removeCls(d)})}};return{progress:function(h,g,e,d){c();b((d!=undefined)?d.cls:null);a.show({title:h,msg:g,buttons:false,progress:true,closable:false,minWidth:a.minProgressWidth,progressText:e,cls:(d!=undefined)?d.cls:null});return this},wait:function(h,g,e,d){c();b((d!=undefined)?d.cls:null);a.show({title:g,msg:h,buttons:false,closable:false,wait:true,modal:true,minWidth:a.minProgressWidth,waitConfig:e,cls:(d!=undefined)?d.cls:null});return this},alert:function(k,j,h,g,d,e){c();b((d!=undefined)?d.cls:null);a.show({title:k,msg:j,buttons:a.OK,fn:h,scope:g,cls:(d!=undefined)?d.cls:null,closable:(d!=undefined)?(d.closable==false?false:true):true});e&&e.register(a);e&&e.bringToFront(a);return this},confirm:function(j,h,g,e,d){c();b((d!=undefined)?d.cls:null);a.show({title:j,msg:h,buttons:a.YESNO,fn:g,scope:e,icon:a.QUESTION,cls:(d!=undefined)?d.cls:null});return this},prompt:function(m,k,h,g,d,j,e){c();b((e!=undefined)?e.cls:null);a.show({title:m,msg:k,buttons:a.OKCANCEL,fn:h,minWidth:250,scope:g,prompt:true,multiline:d,value:j,cls:(e!=undefined)?e.cls:null});return this}}}();Ozone.Msg=Ozone.MessageBoxPlus;Ext.apply(Ext.form.field.VTypes,{dashboardTitle:function(c,b){if(b.getValue()){var a=b.up("form").down("#"+b.newDashboardField);if(Ext.isEmpty(a.getValue())){return false}}return true},newDashboard:function(c,b){if(c){var a=b.up("form").down("#"+b.newDashboardField);if(Ext.isEmpty(a.getValue())){return false}}return true},newDashboardText:"You must select a layout type.",copiedDashboard:function(c,b){if(c){var a=b.up("form").down("#"+b.copiedDashboardField);if(Ext.isEmpty(a.getValue())){return false}}return true},copiedDashboardText:"You must select a dashboard to copy.",importedDashboard:function(c,b){if(c){var a=b.up("form").down("#"+b.importedDashboardField);if(Ext.isEmpty(a.getValue())){return false}}return true},importedDashboardText:"You must select a file to import."});if(!Array.prototype.push){Array.prototype.push=function(){for(var b=0,a=arguments.length;b<a;b++){this[this.length]=arguments[b]}return this.length}}if(!Array.prototype.shift){Array.prototype.shift=function(){if(this.length>0){var c=this[0];for(var b=0,a=this.length-1;b<a;b++){this[b]=this[b+1]}this.length=this.length-1;return c}}}if(!Array.prototype.splice){Array.prototype.splice=function(j,e){var b=this.slice(j+e);var c=this.slice(j,j+e);this.length=j;var g=[];for(var d=0,a=arguments.length;d<a;d++){g[d]=arguments[d]}var h=(g.length>2)?b=g.slice(2).concat(b):b;for(d=0,a=h.length;d<a;d++){this.push(h[d])}return c}}var log4javascript;(function(){function isUndefined(obj){return typeof obj=="undefined"}function EventSupport(){}EventSupport.prototype={eventTypes:[],eventListeners:{},setEventTypes:function(eventTypesParam){if(eventTypesParam instanceof Array){this.eventTypes=eventTypesParam;this.eventListeners={};for(var i=0,len=this.eventTypes.length;i<len;i++){this.eventListeners[this.eventTypes[i]]=[]}}else{handleError("log4javascript.EventSupport ["+this+"]: setEventTypes: eventTypes parameter must be an Array")}},addEventListener:function(eventType,listener){if(typeof listener=="function"){if(!array_contains(this.eventTypes,eventType)){handleError("log4javascript.EventSupport ["+this+"]: addEventListener: no event called '"+eventType+"'")}this.eventListeners[eventType].push(listener)}else{handleError("log4javascript.EventSupport ["+this+"]: addEventListener: listener must be a function")}},removeEventListener:function(eventType,listener){if(typeof listener=="function"){if(!array_contains(this.eventTypes,eventType)){handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: no event called '"+eventType+"'")}array_remove(this.eventListeners[eventType],listener)}else{handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: listener must be a function")}},dispatchEvent:function(eventType,eventArgs){if(array_contains(this.eventTypes,eventType)){var listeners=this.eventListeners[eventType];for(var i=0,len=listeners.length;i<len;i++){listeners[i](this,eventType,eventArgs)}}else{handleError("log4javascript.EventSupport ["+this+"]: dispatchEvent: no event called '"+eventType+"'")}}};var applicationStartDate=new Date();var uniqueId="log4javascript_"+applicationStartDate.getTime()+"_"+Math.floor(Math.random()*100000000);var emptyFunction=function(){};var newLine="\r\n";var pageLoaded=false;function Log4JavaScript(){}Log4JavaScript.prototype=new EventSupport();log4javascript=new Log4JavaScript();log4javascript.version="1.4.1";log4javascript.edition="log4javascript";function toStr(obj){if(obj&&obj.toString){return obj.toString()}else{return String(obj)}}function getExceptionMessage(ex){if(ex.message){return ex.message}else{if(ex.description){return ex.description}else{return toStr(ex)}}}function getUrlFileName(url){var lastSlashIndex=Math.max(url.lastIndexOf("/"),url.lastIndexOf("\\"));return url.substr(lastSlashIndex+1)}function getExceptionStringRep(ex){if(ex){var exStr="Exception: "+getExceptionMessage(ex);try{if(ex.lineNumber){exStr+=" on line number "+ex.lineNumber}if(ex.fileName){exStr+=" in file "+getUrlFileName(ex.fileName)}}catch(localEx){logLog.warn("Unable to obtain file and line information for error")}if(showStackTraces&&ex.stack){exStr+=newLine+"Stack trace:"+newLine+ex.stack}return exStr}return null}function bool(obj){return Boolean(obj)}function trim(str){return str.replace(/^\s+/,"").replace(/\s+$/,"")}function splitIntoLines(text){var text2=text.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return text2.split("\n")}function urlEncode(str){return escape(str).replace(/\+/g,"%2B").replace(/"/g,"%22").replace(/'/g,"%27").replace(/\//g,"%2F").replace(/=/g,"%3D")}function urlDecode(str){return unescape(str).replace(/%2B/g,"+").replace(/%22/g,'"').replace(/%27/g,"'").replace(/%2F/g,"/").replace(/%3D/g,"=")}function array_remove(arr,val){var index=-1;for(var i=0,len=arr.length;i<len;i++){if(arr[i]===val){index=i;break}}if(index>=0){arr.splice(index,1);return true}else{return false}}function array_contains(arr,val){for(var i=0,len=arr.length;i<len;i++){if(arr[i]==val){return true}}return false}function extractBooleanFromParam(param,defaultValue){if(isUndefined(param)){return defaultValue}else{return bool(param)}}function extractStringFromParam(param,defaultValue){if(isUndefined(param)){return defaultValue}else{return String(param)}}function extractIntFromParam(param,defaultValue){if(isUndefined(param)){return defaultValue}else{try{var value=parseInt(param,10);return isNaN(value)?defaultValue:value}catch(ex){logLog.warn("Invalid int param "+param,ex);return defaultValue}}}function extractFunctionFromParam(param,defaultValue){if(typeof param=="function"){return param}else{return defaultValue}}function isError(err){return(err instanceof Error)}if(!Function.prototype.apply){Function.prototype.apply=function(obj,args){var methodName="__apply__";if(typeof obj[methodName]!="undefined"){methodName+=String(Math.random()).substr(2)}obj[methodName]=this;var argsStrings=[];for(var i=0,len=args.length;i<len;i++){argsStrings[i]="args["+i+"]"}var script="obj."+methodName+"("+argsStrings.join(",")+")";var returnValue=eval(script);delete obj[methodName];return returnValue}}if(!Function.prototype.call){Function.prototype.call=function(obj){var args=[];for(var i=1,len=arguments.length;i<len;i++){args[i-1]=arguments[i]}return this.apply(obj,args)}}function getListenersPropertyName(eventName){return"__log4javascript_listeners__"+eventName}function addEvent(node,eventName,listener,useCapture,win){win=win?win:window;if(node.addEventListener){node.addEventListener(eventName,listener,useCapture)}else{if(node.attachEvent){node.attachEvent("on"+eventName,listener)}else{var propertyName=getListenersPropertyName(eventName);if(!node[propertyName]){node[propertyName]=[];node["on"+eventName]=function(evt){evt=getEvent(evt,win);var listenersPropertyName=getListenersPropertyName(eventName);var listeners=this[listenersPropertyName].concat([]);var currentListener;while((currentListener=listeners.shift())){currentListener.call(this,evt)}}}node[propertyName].push(listener)}}}function removeEvent(node,eventName,listener,useCapture){if(node.removeEventListener){node.removeEventListener(eventName,listener,useCapture)}else{if(node.detachEvent){node.detachEvent("on"+eventName,listener)}else{var propertyName=getListenersPropertyName(eventName);if(node[propertyName]){array_remove(node[propertyName],listener)}}}}function getEvent(evt,win){win=win?win:window;return evt?evt:win.event}function stopEventPropagation(evt){if(evt.stopPropagation){evt.stopPropagation()}else{if(typeof evt.cancelBubble!="undefined"){evt.cancelBubble=true}}evt.returnValue=false}var logLog={quietMode:false,debugMessages:[],setQuietMode:function(quietMode){this.quietMode=bool(quietMode)},numberOfErrors:0,alertAllErrors:false,setAlertAllErrors:function(alertAllErrors){this.alertAllErrors=alertAllErrors},debug:function(message){this.debugMessages.push(message)},displayDebug:function(){alert(this.debugMessages.join(newLine))},warn:function(message,exception){},error:function(message,exception){if(++this.numberOfErrors==1||this.alertAllErrors){if(!this.quietMode){var alertMessage="log4javascript error: "+message;if(exception){alertMessage+=newLine+newLine+"Original error: "+getExceptionStringRep(exception)}alert(alertMessage)}}}};log4javascript.logLog=logLog;log4javascript.setEventTypes(["load","error"]);function handleError(message,exception){logLog.error(message,exception);log4javascript.dispatchEvent("error",{message:message,exception:exception})}log4javascript.handleError=handleError;var enabled=!((typeof log4javascript_disabled!="undefined")&&log4javascript_disabled);log4javascript.setEnabled=function(enable){enabled=bool(enable)};log4javascript.isEnabled=function(){return enabled};var useTimeStampsInMilliseconds=true;log4javascript.setTimeStampsInMilliseconds=function(timeStampsInMilliseconds){useTimeStampsInMilliseconds=bool(timeStampsInMilliseconds)};log4javascript.isTimeStampsInMilliseconds=function(){return useTimeStampsInMilliseconds};log4javascript.evalInScope=function(expr){return eval(expr)};var showStackTraces=false;log4javascript.setShowStackTraces=function(show){showStackTraces=bool(show)};var Level=function(level,name){this.level=level;this.name=name};Level.prototype={toString:function(){return this.name},equals:function(level){return this.level==level.level},isGreaterOrEqual:function(level){return this.level>=level.level}};Level.ALL=new Level(Number.MIN_VALUE,"ALL");Level.TRACE=new Level(10000,"TRACE");Level.DEBUG=new Level(20000,"DEBUG");Level.INFO=new Level(30000,"INFO");Level.WARN=new Level(40000,"WARN");Level.ERROR=new Level(50000,"ERROR");Level.FATAL=new Level(60000,"FATAL");Level.OFF=new Level(Number.MAX_VALUE,"OFF");log4javascript.Level=Level;function Timer(name,level){this.name=name;this.level=isUndefined(level)?Level.INFO:level;this.start=new Date()}Timer.prototype.getElapsedTime=function(){return new Date().getTime()-this.start.getTime()};var anonymousLoggerName="[anonymous]";var defaultLoggerName="[default]";var nullLoggerName="[null]";var rootLoggerName="root";function Logger(name){this.name=name;this.parent=null;this.children=[];var appenders=[];var loggerLevel=null;var isRoot=(this.name===rootLoggerName);var isNull=(this.name===nullLoggerName);var appenderCache=null;var appenderCacheInvalidated=false;this.addChild=function(childLogger){this.children.push(childLogger);childLogger.parent=this;childLogger.invalidateAppenderCache()};var additive=true;this.getAdditivity=function(){return additive};this.setAdditivity=function(additivity){var valueChanged=(additive!=additivity);additive=additivity;if(valueChanged){this.invalidateAppenderCache()}};this.addAppender=function(appender){if(isNull){handleError("Logger.addAppender: you may not add an appender to the null logger")}else{if(appender instanceof log4javascript.Appender){if(!array_contains(appenders,appender)){appenders.push(appender);appender.setAddedToLogger(this);this.invalidateAppenderCache()}}else{handleError("Logger.addAppender: appender supplied ('"+toStr(appender)+"') is not a subclass of Appender")}}};this.removeAppender=function(appender){array_remove(appenders,appender);appender.setRemovedFromLogger(this);this.invalidateAppenderCache()};this.removeAllAppenders=function(){var appenderCount=appenders.length;if(appenderCount>0){for(var i=0;i<appenderCount;i++){appenders[i].setRemovedFromLogger(this)}appenders.length=0;this.invalidateAppenderCache()}};this.getEffectiveAppenders=function(){if(appenderCache===null||appenderCacheInvalidated){var parentEffectiveAppenders=(isRoot||!this.getAdditivity())?[]:this.parent.getEffectiveAppenders();appenderCache=parentEffectiveAppenders.concat(appenders);appenderCacheInvalidated=false}return appenderCache};this.invalidateAppenderCache=function(){appenderCacheInvalidated=true;for(var i=0,len=this.children.length;i<len;i++){this.children[i].invalidateAppenderCache()}};this.log=function(level,params){if(level.isGreaterOrEqual(this.getEffectiveLevel())){var exception;var finalParamIndex=params.length-1;var lastParam=params[params.length-1];if(params.length>1&&isError(lastParam)){exception=lastParam;finalParamIndex--}var messages=[];for(var i=0;i<=finalParamIndex;i++){messages[i]=params[i]}var loggingEvent=new LoggingEvent(this,new Date(),level,messages,exception);this.callAppenders(loggingEvent)}};this.callAppenders=function(loggingEvent){var effectiveAppenders=this.getEffectiveAppenders();for(var i=0,len=effectiveAppenders.length;i<len;i++){effectiveAppenders[i].doAppend(loggingEvent)}};this.setLevel=function(level){if(isRoot&&level===null){handleError("Logger.setLevel: you cannot set the level of the root logger to null")}else{if(level instanceof Level){loggerLevel=level}else{handleError("Logger.setLevel: level supplied to logger "+this.name+" is not an instance of log4javascript.Level")}}};this.getLevel=function(){return loggerLevel};this.getEffectiveLevel=function(){for(var logger=this;logger!==null;logger=logger.parent){var level=logger.getLevel();if(level!==null){return level}}};this.group=function(name,initiallyExpanded){var effectiveAppenders=this.getEffectiveAppenders();for(var i=0,len=effectiveAppenders.length;i<len;i++){effectiveAppenders[i].group(name,initiallyExpanded)}};this.groupEnd=function(name){var effectiveAppenders=this.getEffectiveAppenders();for(var i=0,len=effectiveAppenders.length;i<len;i++){effectiveAppenders[i].groupEnd()}};var timers={};this.time=function(name,level){if(isUndefined(name)){handleError("Logger.time: a name for the timer must be supplied")}else{if(level&&!(level instanceof Level)){handleError("Logger.time: level supplied to timer "+name+" is not an instance of log4javascript.Level")}else{timers[name]=new Timer(name,level)}}};this.timeEnd=function(name){if(isUndefined(name)){handleError("Logger.timeEnd: a name for the timer must be supplied")}else{if(timers[name]){var timer=timers[name];var milliseconds=timer.getElapsedTime();this.log(timer.level,["Timer "+toStr(name)+" completed in "+milliseconds+"ms"]);delete timers[name]}else{logLog.warn("Logger.timeEnd: no timer found with name "+name)}}};this.assert=function(expr){if(!expr){var args=[];for(var i=1,len=arguments.length;i<len;i++){args.push(arguments[i])}args=(args.length>0)?args:["Assertion Failure"];args.push(newLine);args.push(expr);this.log(Level.ERROR,args)}};this.toString=function(){return"Logger["+this.name+"]"}}Logger.prototype={trace:function(){this.log(Level.TRACE,arguments)},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)},isEnabledFor:function(level){return level.isGreaterOrEqual(this.getEffectiveLevel())},isTraceEnabled:function(){return this.isEnabledFor(Level.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(Level.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(Level.INFO)},isWarnEnabled:function(){return this.isEnabledFor(Level.WARN)},isErrorEnabled:function(){return this.isEnabledFor(Level.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(Level.FATAL)}};Logger.prototype.trace.isEntryPoint=true;Logger.prototype.debug.isEntryPoint=true;Logger.prototype.info.isEntryPoint=true;Logger.prototype.warn.isEntryPoint=true;Logger.prototype.error.isEntryPoint=true;Logger.prototype.fatal.isEntryPoint=true;var loggers={};var loggerNames=[];var ROOT_LOGGER_DEFAULT_LEVEL=Level.DEBUG;var rootLogger=new Logger(rootLoggerName);rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL);log4javascript.getRootLogger=function(){return rootLogger};log4javascript.getLogger=function(loggerName){if(!(typeof loggerName=="string")){loggerName=anonymousLoggerName;logLog.warn("log4javascript.getLogger: non-string logger name "+toStr(loggerName)+" supplied, returning anonymous logger")}if(loggerName==rootLoggerName){handleError("log4javascript.getLogger: root logger may not be obtained by name")}if(!loggers[loggerName]){var logger=new Logger(loggerName);loggers[loggerName]=logger;loggerNames.push(loggerName);var lastDotIndex=loggerName.lastIndexOf(".");var parentLogger;if(lastDotIndex>-1){var parentLoggerName=loggerName.substring(0,lastDotIndex);parentLogger=log4javascript.getLogger(parentLoggerName)}else{parentLogger=rootLogger}parentLogger.addChild(logger)}return loggers[loggerName]};var defaultLogger=null;log4javascript.getDefaultLogger=function(){if(!defaultLogger){defaultLogger=log4javascript.getLogger(defaultLoggerName);var a=new log4javascript.PopUpAppender();defaultLogger.addAppender(a)}return defaultLogger};var nullLogger=null;log4javascript.getNullLogger=function(){if(!nullLogger){nullLogger=new Logger(nullLoggerName);nullLogger.setLevel(Level.OFF)}return nullLogger};log4javascript.resetConfiguration=function(){rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL);loggers={}};var LoggingEvent=function(logger,timeStamp,level,messages,exception){this.logger=logger;this.timeStamp=timeStamp;this.timeStampInMilliseconds=timeStamp.getTime();this.timeStampInSeconds=Math.floor(this.timeStampInMilliseconds/1000);this.milliseconds=this.timeStamp.getMilliseconds();this.level=level;this.messages=messages;this.exception=exception};LoggingEvent.prototype={getThrowableStrRep:function(){return this.exception?getExceptionStringRep(this.exception):""},getCombinedMessages:function(){return(this.messages.length==1)?this.messages[0]:this.messages.join(newLine)},toString:function(){return"LoggingEvent["+this.level+"]"}};log4javascript.LoggingEvent=LoggingEvent;var Layout=function(){};Layout.prototype={defaults:{loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url"},loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url",batchHeader:"",batchFooter:"",batchSeparator:"",returnsPostData:false,overrideTimeStampsSetting:false,useTimeStampsInMilliseconds:null,format:function(loggingEvent){handleError("Layout.format: layout supplied has no format() method")},ignoresThrowable:function(){handleError("Layout.ignoresThrowable: layout supplied has no ignoresThrowable() method")},getContentType:function(){return"text/plain"},allowBatching:function(){return true},setTimeStampsInMilliseconds:function(timeStampsInMilliseconds){this.overrideTimeStampsSetting=true;this.useTimeStampsInMilliseconds=bool(timeStampsInMilliseconds)},isTimeStampsInMilliseconds:function(){return this.overrideTimeStampsSetting?this.useTimeStampsInMilliseconds:useTimeStampsInMilliseconds},getTimeStampValue:function(loggingEvent){return this.isTimeStampsInMilliseconds()?loggingEvent.timeStampInMilliseconds:loggingEvent.timeStampInSeconds},getDataValues:function(loggingEvent,combineMessages){var dataValues=[[this.loggerKey,loggingEvent.logger.name],[this.timeStampKey,this.getTimeStampValue(loggingEvent)],[this.levelKey,loggingEvent.level.name],[this.urlKey,window.location.href],[this.messageKey,combineMessages?loggingEvent.getCombinedMessages():loggingEvent.messages]];if(!this.isTimeStampsInMilliseconds()){dataValues.push([this.millisecondsKey,loggingEvent.milliseconds])}if(loggingEvent.exception){dataValues.push([this.exceptionKey,getExceptionStringRep(loggingEvent.exception)])}if(this.hasCustomFields()){for(var i=0,len=this.customFields.length;i<len;i++){var val=this.customFields[i].value;if(typeof val==="function"){val=val(this,loggingEvent)}dataValues.push([this.customFields[i].name,val])}}return dataValues},setKeys:function(loggerKey,timeStampKey,levelKey,messageKey,exceptionKey,urlKey,millisecondsKey){this.loggerKey=extractStringFromParam(loggerKey,this.defaults.loggerKey);this.timeStampKey=extractStringFromParam(timeStampKey,this.defaults.timeStampKey);this.levelKey=extractStringFromParam(levelKey,this.defaults.levelKey);this.messageKey=extractStringFromParam(messageKey,this.defaults.messageKey);this.exceptionKey=extractStringFromParam(exceptionKey,this.defaults.exceptionKey);this.urlKey=extractStringFromParam(urlKey,this.defaults.urlKey);this.millisecondsKey=extractStringFromParam(millisecondsKey,this.defaults.millisecondsKey)},setCustomField:function(name,value){var fieldUpdated=false;for(var i=0,len=this.customFields.length;i<len;i++){if(this.customFields[i].name===name){this.customFields[i].value=value;fieldUpdated=true}}if(!fieldUpdated){this.customFields.push({name:name,value:value})}},hasCustomFields:function(){return(this.customFields.length>0)},toString:function(){handleError("Layout.toString: all layouts must override this method")}};log4javascript.Layout=Layout;var Appender=function(){};Appender.prototype=new EventSupport();Appender.prototype.layout=new PatternLayout();Appender.prototype.threshold=Level.ALL;Appender.prototype.loggers=[];Appender.prototype.doAppend=function(loggingEvent){if(enabled&&loggingEvent.level.level>=this.threshold.level){this.append(loggingEvent)}};Appender.prototype.append=function(loggingEvent){};Appender.prototype.setLayout=function(layout){if(layout instanceof Layout){this.layout=layout}else{handleError("Appender.setLayout: layout supplied to "+this.toString()+" is not a subclass of Layout")}};Appender.prototype.getLayout=function(){return this.layout};Appender.prototype.setThreshold=function(threshold){if(threshold instanceof Level){this.threshold=threshold}else{handleError("Appender.setThreshold: threshold supplied to "+this.toString()+" is not a subclass of Level")}};Appender.prototype.getThreshold=function(){return this.threshold};Appender.prototype.setAddedToLogger=function(logger){this.loggers.push(logger)};Appender.prototype.setRemovedFromLogger=function(logger){array_remove(this.loggers,logger)};Appender.prototype.group=emptyFunction;Appender.prototype.groupEnd=emptyFunction;Appender.prototype.toString=function(){handleError("Appender.toString: all appenders must override this method")};log4javascript.Appender=Appender;function SimpleLayout(){this.customFields=[]}SimpleLayout.prototype=new Layout();SimpleLayout.prototype.format=function(loggingEvent){return loggingEvent.level.name+" - "+loggingEvent.getCombinedMessages()};SimpleLayout.prototype.ignoresThrowable=function(){return true};SimpleLayout.prototype.toString=function(){return"SimpleLayout"};log4javascript.SimpleLayout=SimpleLayout;function NullLayout(){this.customFields=[]}NullLayout.prototype=new Layout();NullLayout.prototype.format=function(loggingEvent){return loggingEvent.messages};NullLayout.prototype.ignoresThrowable=function(){return true};NullLayout.prototype.toString=function(){return"NullLayout"};log4javascript.NullLayout=NullLayout;function XmlLayout(combineMessages){this.combineMessages=extractBooleanFromParam(combineMessages,true);this.customFields=[]}XmlLayout.prototype=new Layout();XmlLayout.prototype.isCombinedMessages=function(){return this.combineMessages};XmlLayout.prototype.getContentType=function(){return"text/xml"};XmlLayout.prototype.escapeCdata=function(str){return str.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")};XmlLayout.prototype.format=function(loggingEvent){var layout=this;var i,len;function formatMessage(message){message=(typeof message==="string")?message:toStr(message);return"<log4javascript:message><![CDATA["+layout.escapeCdata(message)+"]]></log4javascript:message>"}var str='<log4javascript:event logger="'+loggingEvent.logger.name+'" timestamp="'+this.getTimeStampValue(loggingEvent)+'"';if(!this.isTimeStampsInMilliseconds()){str+=' milliseconds="'+loggingEvent.milliseconds+'"'}str+=' level="'+loggingEvent.level.name+'">'+newLine;if(this.combineMessages){str+=formatMessage(loggingEvent.getCombinedMessages())}else{str+="<log4javascript:messages>"+newLine;for(i=0,len=loggingEvent.messages.length;i<len;i++){str+=formatMessage(loggingEvent.messages[i])+newLine}str+="</log4javascript:messages>"+newLine}if(this.hasCustomFields()){for(i=0,len=this.customFields.length;i<len;i++){str+='<log4javascript:customfield name="'+this.customFields[i].name+'"><![CDATA['+this.customFields[i].value.toString()+"]]></log4javascript:customfield>"+newLine}}if(loggingEvent.exception){str+="<log4javascript:exception><![CDATA["+getExceptionStringRep(loggingEvent.exception)+"]]></log4javascript:exception>"+newLine}str+="</log4javascript:event>"+newLine+newLine;return str};XmlLayout.prototype.ignoresThrowable=function(){return false};XmlLayout.prototype.toString=function(){return"XmlLayout"};log4javascript.XmlLayout=XmlLayout;function escapeNewLines(str){return str.replace(/\r\n|\r|\n/g,"\\r\\n")}function JsonLayout(readable,combineMessages){this.readable=extractBooleanFromParam(readable,false);this.combineMessages=extractBooleanFromParam(combineMessages,true);this.batchHeader=this.readable?"["+newLine:"[";this.batchFooter=this.readable?"]"+newLine:"]";this.batchSeparator=this.readable?","+newLine:",";this.setKeys();this.colon=this.readable?": ":":";this.tab=this.readable?"\t":"";this.lineBreak=this.readable?newLine:"";this.customFields=[]}JsonLayout.prototype=new Layout();JsonLayout.prototype.isReadable=function(){return this.readable};JsonLayout.prototype.isCombinedMessages=function(){return this.combineMessages};JsonLayout.prototype.format=function(loggingEvent){var layout=this;var dataValues=this.getDataValues(loggingEvent,this.combineMessages);var str="{"+this.lineBreak;var i;function formatValue(val,prefix,expand){var formattedValue;var valType=typeof val;if(val instanceof Date){formattedValue=String(val.getTime())}else{if(expand&&(val instanceof Array)){formattedValue="["+layout.lineBreak;for(i=0,len=val.length;i<len;i++){var childPrefix=prefix+layout.tab;formattedValue+=childPrefix+formatValue(val[i],childPrefix,false);if(i<val.length-1){formattedValue+=","}formattedValue+=layout.lineBreak}formattedValue+=prefix+"]"}else{if(valType!=="number"&&valType!=="boolean"){formattedValue='"'+escapeNewLines(toStr(val).replace(/\"/g,'\\"'))+'"'}else{formattedValue=val}}}return formattedValue}for(i=0,len=dataValues.length;i<len;i++){str+=this.tab+'"'+dataValues[i][0]+'"'+this.colon+formatValue(dataValues[i][1],this.tab,true);if(i<dataValues.length-1){str+=","}str+=this.lineBreak}str+="}"+this.lineBreak;return str};JsonLayout.prototype.ignoresThrowable=function(){return false};JsonLayout.prototype.toString=function(){return"JsonLayout"};JsonLayout.prototype.getContentType=function(){return"application/json"};log4javascript.JsonLayout=JsonLayout;function HttpPostDataLayout(){this.setKeys();this.customFields=[];this.returnsPostData=true}HttpPostDataLayout.prototype=new Layout();HttpPostDataLayout.prototype.allowBatching=function(){return false};HttpPostDataLayout.prototype.format=function(loggingEvent){var dataValues=this.getDataValues(loggingEvent);var queryBits=[];for(var i=0,len=dataValues.length;i<len;i++){var val=(dataValues[i][1] instanceof Date)?String(dataValues[i][1].getTime()):dataValues[i][1];queryBits.push(urlEncode(dataValues[i][0])+"="+urlEncode(val))}return queryBits.join("&")};HttpPostDataLayout.prototype.ignoresThrowable=function(loggingEvent){return false};HttpPostDataLayout.prototype.toString=function(){return"HttpPostDataLayout"};log4javascript.HttpPostDataLayout=HttpPostDataLayout;function formatObjectExpansion(obj,depth,indentation){var objectsExpanded=[];function doFormat(obj,depth,indentation){var i,j,len,childDepth,childIndentation,childLines,expansion,childExpansion;if(!indentation){indentation=""}function formatString(text){var lines=splitIntoLines(text);for(var j=1,jLen=lines.length;j<jLen;j++){lines[j]=indentation+lines[j]}return lines.join(newLine)}if(obj===null){return"null"}else{if(typeof obj=="undefined"){return"undefined"}else{if(typeof obj=="string"){return formatString(obj)}else{if(typeof obj=="object"&&array_contains(objectsExpanded,obj)){try{expansion=toStr(obj)}catch(ex){expansion="Error formatting property. Details: "+getExceptionStringRep(ex)}return expansion+" [already expanded]"}else{if((obj instanceof Array)&&depth>0){objectsExpanded.push(obj);expansion="["+newLine;childDepth=depth-1;childIndentation=indentation+"  ";childLines=[];for(i=0,len=obj.length;i<len;i++){try{childExpansion=doFormat(obj[i],childDepth,childIndentation);childLines.push(childIndentation+childExpansion)}catch(ex){childLines.push(childIndentation+"Error formatting array member. Details: "+getExceptionStringRep(ex)+"")}}expansion+=childLines.join(","+newLine)+newLine+indentation+"]";return expansion}else{if(typeof obj=="object"&&depth>0){objectsExpanded.push(obj);expansion="{"+newLine;childDepth=depth-1;childIndentation=indentation+"  ";childLines=[];for(i in obj){try{childExpansion=doFormat(obj[i],childDepth,childIndentation);childLines.push(childIndentation+i+": "+childExpansion)}catch(ex){childLines.push(childIndentation+i+": Error formatting property. Details: "+getExceptionStringRep(ex))}}expansion+=childLines.join(","+newLine)+newLine+indentation+"}";return expansion}else{return formatString(toStr(obj))}}}}}}}return doFormat(obj,depth,indentation)}var SimpleDateFormat;(function(){var regex=/('[^']*')|(G+|y+|M+|w+|W+|D+|d+|F+|E+|a+|H+|k+|K+|h+|m+|s+|S+|Z+)|([a-zA-Z]+)|([^a-zA-Z']+)/;var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var TEXT2=0,TEXT3=1,NUMBER=2,YEAR=3,MONTH=4,TIMEZONE=5;var types={G:TEXT2,y:YEAR,M:MONTH,w:NUMBER,W:NUMBER,D:NUMBER,d:NUMBER,F:NUMBER,E:TEXT3,a:TEXT2,H:NUMBER,k:NUMBER,K:NUMBER,h:NUMBER,m:NUMBER,s:NUMBER,S:NUMBER,Z:TIMEZONE};var ONE_DAY=24*60*60*1000;var ONE_WEEK=7*ONE_DAY;var DEFAULT_MINIMAL_DAYS_IN_FIRST_WEEK=1;var newDateAtMidnight=function(year,month,day){var d=new Date(year,month,day,0,0,0);d.setMilliseconds(0);return d};Date.prototype.getDifference=function(date){return this.getTime()-date.getTime()};Date.prototype.isBefore=function(d){return this.getTime()<d.getTime()};Date.prototype.getUTCTime=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())};Date.prototype.getTimeSince=function(d){return this.getUTCTime()-d.getUTCTime()};Date.prototype.getPreviousSunday=function(){var midday=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12,0,0);var previousSunday=new Date(midday.getTime()-this.getDay()*ONE_DAY);return newDateAtMidnight(previousSunday.getFullYear(),previousSunday.getMonth(),previousSunday.getDate())};Date.prototype.getWeekInYear=function(minimalDaysInFirstWeek){if(isUndefined(this.minimalDaysInFirstWeek)){minimalDaysInFirstWeek=DEFAULT_MINIMAL_DAYS_IN_FIRST_WEEK}var previousSunday=this.getPreviousSunday();var startOfYear=newDateAtMidnight(this.getFullYear(),0,1);var numberOfSundays=previousSunday.isBefore(startOfYear)?0:1+Math.floor(previousSunday.getTimeSince(startOfYear)/ONE_WEEK);var numberOfDaysInFirstWeek=7-startOfYear.getDay();var weekInYear=numberOfSundays;if(numberOfDaysInFirstWeek<minimalDaysInFirstWeek){weekInYear--}return weekInYear};Date.prototype.getWeekInMonth=function(minimalDaysInFirstWeek){if(isUndefined(this.minimalDaysInFirstWeek)){minimalDaysInFirstWeek=DEFAULT_MINIMAL_DAYS_IN_FIRST_WEEK}var previousSunday=this.getPreviousSunday();var startOfMonth=newDateAtMidnight(this.getFullYear(),this.getMonth(),1);var numberOfSundays=previousSunday.isBefore(startOfMonth)?0:1+Math.floor(previousSunday.getTimeSince(startOfMonth)/ONE_WEEK);var numberOfDaysInFirstWeek=7-startOfMonth.getDay();var weekInMonth=numberOfSundays;if(numberOfDaysInFirstWeek>=minimalDaysInFirstWeek){weekInMonth++}return weekInMonth};Date.prototype.getDayInYear=function(){var startOfYear=newDateAtMidnight(this.getFullYear(),0,1);return 1+Math.floor(this.getTimeSince(startOfYear)/ONE_DAY)};SimpleDateFormat=function(formatString){this.formatString=formatString};SimpleDateFormat.prototype.setMinimalDaysInFirstWeek=function(days){this.minimalDaysInFirstWeek=days};SimpleDateFormat.prototype.getMinimalDaysInFirstWeek=function(){return isUndefined(this.minimalDaysInFirstWeek)?DEFAULT_MINIMAL_DAYS_IN_FIRST_WEEK:this.minimalDaysInFirstWeek};var padWithZeroes=function(str,len){while(str.length<len){str="0"+str}return str};var formatText=function(data,numberOfLetters,minLength){return(numberOfLetters>=4)?data:data.substr(0,Math.max(minLength,numberOfLetters))};var formatNumber=function(data,numberOfLetters){var dataString=""+data;return padWithZeroes(dataString,numberOfLetters)};SimpleDateFormat.prototype.format=function(date){var formattedString="";var result;var searchString=this.formatString;while((result=regex.exec(searchString))){var quotedString=result[1];var patternLetters=result[2];var otherLetters=result[3];var otherCharacters=result[4];if(quotedString){if(quotedString=="''"){formattedString+="'"}else{formattedString+=quotedString.substring(1,quotedString.length-1)}}else{if(otherLetters){}else{if(otherCharacters){formattedString+=otherCharacters}else{if(patternLetters){var patternLetter=patternLetters.charAt(0);var numberOfLetters=patternLetters.length;var rawData="";switch(patternLetter){case"G":rawData="AD";break;case"y":rawData=date.getFullYear();break;case"M":rawData=date.getMonth();break;case"w":rawData=date.getWeekInYear(this.getMinimalDaysInFirstWeek());break;case"W":rawData=date.getWeekInMonth(this.getMinimalDaysInFirstWeek());break;case"D":rawData=date.getDayInYear();break;case"d":rawData=date.getDate();break;case"F":rawData=1+Math.floor((date.getDate()-1)/7);break;case"E":rawData=dayNames[date.getDay()];break;case"a":rawData=(date.getHours()>=12)?"PM":"AM";break;case"H":rawData=date.getHours();break;case"k":rawData=date.getHours()||24;break;case"K":rawData=date.getHours()%12;break;case"h":rawData=(date.getHours()%12)||12;break;case"m":rawData=date.getMinutes();break;case"s":rawData=date.getSeconds();break;case"S":rawData=date.getMilliseconds();break;case"Z":rawData=date.getTimezoneOffset();break}switch(types[patternLetter]){case TEXT2:formattedString+=formatText(rawData,numberOfLetters,2);break;case TEXT3:formattedString+=formatText(rawData,numberOfLetters,3);break;case NUMBER:formattedString+=formatNumber(rawData,numberOfLetters);break;case YEAR:if(numberOfLetters<=3){var dataString=""+rawData;formattedString+=dataString.substr(2,2)}else{formattedString+=formatNumber(rawData,numberOfLetters)}break;case MONTH:if(numberOfLetters>=3){formattedString+=formatText(monthNames[rawData],numberOfLetters,numberOfLetters)}else{formattedString+=formatNumber(rawData+1,numberOfLetters)}break;case TIMEZONE:var isPositive=(rawData>0);var prefix=isPositive?"-":"+";var absData=Math.abs(rawData);var hours=""+Math.floor(absData/60);hours=padWithZeroes(hours,2);var minutes=""+(absData%60);minutes=padWithZeroes(minutes,2);formattedString+=prefix+hours+minutes;break}}}}}searchString=searchString.substr(result.index+result[0].length)}return formattedString}})();log4javascript.SimpleDateFormat=SimpleDateFormat;function PatternLayout(pattern){if(pattern){this.pattern=pattern}else{this.pattern=PatternLayout.DEFAULT_CONVERSION_PATTERN}this.customFields=[]}PatternLayout.TTCC_CONVERSION_PATTERN="%r %p %c - %m%n";PatternLayout.DEFAULT_CONVERSION_PATTERN="%m%n";PatternLayout.ISO8601_DATEFORMAT="yyyy-MM-dd HH:mm:ss,SSS";PatternLayout.DATETIME_DATEFORMAT="dd MMM yyyy HH:mm:ss,SSS";PatternLayout.ABSOLUTETIME_DATEFORMAT="HH:mm:ss,SSS";PatternLayout.prototype=new Layout();PatternLayout.prototype.format=function(loggingEvent){var regex=/%(-?[0-9]+)?(\.?[0-9]+)?([acdfmMnpr%])(\{([^\}]+)\})?|([^%]+)/;var formattedString="";var result;var searchString=this.pattern;while((result=regex.exec(searchString))){var matchedString=result[0];var padding=result[1];var truncation=result[2];var conversionCharacter=result[3];var specifier=result[5];var text=result[6];if(text){formattedString+=""+text}else{var replacement="";switch(conversionCharacter){case"a":case"m":var depth=0;if(specifier){depth=parseInt(specifier,10);if(isNaN(depth)){handleError("PatternLayout.format: invalid specifier '"+specifier+"' for conversion character '"+conversionCharacter+"' - should be a number");depth=0}}var messages=(conversionCharacter==="a")?loggingEvent.messages[0]:loggingEvent.messages;for(var i=0,len=messages.length;i<len;i++){if(i>0&&(replacement.charAt(replacement.length-1)!==" ")){replacement+=" "}if(depth===0){replacement+=messages[i]}else{replacement+=formatObjectExpansion(messages[i],depth)}}break;case"c":var loggerName=loggingEvent.logger.name;if(specifier){var precision=parseInt(specifier,10);var loggerNameBits=loggingEvent.logger.name.split(".");if(precision>=loggerNameBits.length){replacement=loggerName}else{replacement=loggerNameBits.slice(loggerNameBits.length-precision).join(".")}}else{replacement=loggerName}break;case"d":var dateFormat=PatternLayout.ISO8601_DATEFORMAT;if(specifier){dateFormat=specifier;if(dateFormat=="ISO8601"){dateFormat=PatternLayout.ISO8601_DATEFORMAT}else{if(dateFormat=="ABSOLUTE"){dateFormat=PatternLayout.ABSOLUTETIME_DATEFORMAT}else{if(dateFormat=="DATE"){dateFormat=PatternLayout.DATETIME_DATEFORMAT}}}}replacement=(new SimpleDateFormat(dateFormat)).format(loggingEvent.timeStamp);break;case"f":if(this.hasCustomFields()){var fieldIndex=0;if(specifier){fieldIndex=parseInt(specifier,10);if(isNaN(fieldIndex)){handleError("PatternLayout.format: invalid specifier '"+specifier+"' for conversion character 'f' - should be a number")}else{if(fieldIndex===0){handleError("PatternLayout.format: invalid specifier '"+specifier+"' for conversion character 'f' - must be greater than zero")}else{if(fieldIndex>this.customFields.length){handleError("PatternLayout.format: invalid specifier '"+specifier+"' for conversion character 'f' - there aren't that many custom fields")}else{fieldIndex=fieldIndex-1}}}}replacement=this.customFields[fieldIndex].value}break;case"n":replacement=newLine;break;case"p":replacement=loggingEvent.level.name;break;case"r":replacement=""+loggingEvent.timeStamp.getDifference(applicationStartDate);break;case"%":replacement="%";break;default:replacement=matchedString;break}var l;if(truncation){l=parseInt(truncation.substr(1),10);var strLen=replacement.length;if(l<strLen){replacement=replacement.substring(strLen-l,strLen)}}if(padding){if(padding.charAt(0)=="-"){l=parseInt(padding.substr(1),10);while(replacement.length<l){replacement+=" "}}else{l=parseInt(padding,10);while(replacement.length<l){replacement=" "+replacement}}}formattedString+=replacement}searchString=searchString.substr(result.index+result[0].length)}return formattedString};PatternLayout.prototype.ignoresThrowable=function(){return true};PatternLayout.prototype.toString=function(){return"PatternLayout"};log4javascript.PatternLayout=PatternLayout;function AlertAppender(){}AlertAppender.prototype=new Appender();AlertAppender.prototype.layout=new SimpleLayout();AlertAppender.prototype.append=function(loggingEvent){var formattedMessage=this.getLayout().format(loggingEvent);if(this.getLayout().ignoresThrowable()){formattedMessage+=loggingEvent.getThrowableStrRep()}alert(formattedMessage)};AlertAppender.prototype.toString=function(){return"AlertAppender"};log4javascript.AlertAppender=AlertAppender;function BrowserConsoleAppender(){}BrowserConsoleAppender.prototype=new log4javascript.Appender();BrowserConsoleAppender.prototype.layout=new NullLayout();BrowserConsoleAppender.prototype.threshold=Level.DEBUG;BrowserConsoleAppender.prototype.append=function(loggingEvent){var appender=this;var getFormattedMessage=function(){var layout=appender.getLayout();var formattedMessage=layout.format(loggingEvent);if(layout.ignoresThrowable()&&loggingEvent.exception){formattedMessage+=loggingEvent.getThrowableStrRep()}return formattedMessage};if((typeof opera!="undefined")&&opera.postError){opera.postError(getFormattedMessage())}else{if(window.console&&window.console.log){var formattedMesage=getFormattedMessage();if(window.console.debug&&Level.DEBUG.isGreaterOrEqual(loggingEvent.level)){window.console.debug(formattedMesage)}else{if(window.console.info&&Level.INFO.equals(loggingEvent.level)){window.console.info(formattedMesage)}else{if(window.console.warn&&Level.WARN.equals(loggingEvent.level)){window.console.warn(formattedMesage)}else{if(window.console.error&&loggingEvent.level.isGreaterOrEqual(Level.ERROR)){window.console.error(formattedMesage)}else{window.console.log(formattedMesage)}}}}}}};BrowserConsoleAppender.prototype.group=function(name){if(window.console&&window.console.group){window.console.group(name)}};BrowserConsoleAppender.prototype.groupEnd=function(){if(window.console&&window.console.groupEnd){window.console.groupEnd()}};BrowserConsoleAppender.prototype.toString=function(){return"BrowserConsoleAppender"};log4javascript.BrowserConsoleAppender=BrowserConsoleAppender;function getXmlHttp(errorHandler){var xmlHttp=null;if(typeof XMLHttpRequest=="object"||typeof XMLHttpRequest=="function"){xmlHttp=new XMLHttpRequest()}else{try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP")}catch(e1){try{xmlHttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(e2){if(errorHandler){errorHandler()}else{handleError("getXmlHttp: unable to obtain XMLHttpRequest object")}}}}return xmlHttp}function isHttpRequestSuccessful(xmlHttp){return(isUndefined(xmlHttp.status)||xmlHttp.status===0||(xmlHttp.status>=200&&xmlHttp.status<300))}function AjaxAppender(url){var appender=this;var isSupported=true;if(!url){handleError("AjaxAppender: URL must be specified in constructor");isSupported=false}var timed=this.defaults.timed;var waitForResponse=this.defaults.waitForResponse;var batchSize=this.defaults.batchSize;var timerInterval=this.defaults.timerInterval;var requestSuccessCallback=this.defaults.requestSuccessCallback;var failCallback=this.defaults.failCallback;var postVarName=this.defaults.postVarName;var sendAllOnUnload=this.defaults.sendAllOnUnload;var sessionId=null;var queuedLoggingEvents=[];var queuedRequests=[];var sending=false;var initialized=false;function checkCanConfigure(configOptionName){if(initialized){handleError("AjaxAppender: configuration option '"+configOptionName+"' may not be set after the appender has been initialized");return false}return true}this.getSessionId=function(){return sessionId};this.setSessionId=function(sessionIdParam){sessionId=extractStringFromParam(sessionIdParam,null);this.layout.setCustomField("sessionid",sessionId)};this.setLayout=function(layoutParam){if(checkCanConfigure("layout")){this.layout=layoutParam;if(sessionId!==null){this.setSessionId(sessionId)}}};this.isTimed=function(){return timed};this.setTimed=function(timedParam){if(checkCanConfigure("timed")){timed=bool(timedParam)}};this.getTimerInterval=function(){return timerInterval};this.setTimerInterval=function(timerIntervalParam){if(checkCanConfigure("timerInterval")){timerInterval=extractIntFromParam(timerIntervalParam,timerInterval)}};this.isWaitForResponse=function(){return waitForResponse};this.setWaitForResponse=function(waitForResponseParam){if(checkCanConfigure("waitForResponse")){waitForResponse=bool(waitForResponseParam)}};this.getBatchSize=function(){return batchSize};this.setBatchSize=function(batchSizeParam){if(checkCanConfigure("batchSize")){batchSize=extractIntFromParam(batchSizeParam,batchSize)}};this.isSendAllOnUnload=function(){return sendAllOnUnload};this.setSendAllOnUnload=function(sendAllOnUnloadParam){if(checkCanConfigure("sendAllOnUnload")){sendAllOnUnload=extractIntFromParam(sendAllOnUnloadParam,sendAllOnUnload)}};this.setRequestSuccessCallback=function(requestSuccessCallbackParam){requestSuccessCallback=extractFunctionFromParam(requestSuccessCallbackParam,requestSuccessCallback)};this.setFailCallback=function(failCallbackParam){failCallback=extractFunctionFromParam(failCallbackParam,failCallback)};this.getPostVarName=function(){return postVarName};this.setPostVarName=function(postVarNameParam){if(checkCanConfigure("postVarName")){postVarName=extractStringFromParam(postVarNameParam,postVarName)}};function sendAll(){if(isSupported&&enabled){sending=true;var currentRequestBatch;if(waitForResponse){if(queuedRequests.length>0){currentRequestBatch=queuedRequests.shift();sendRequest(preparePostData(currentRequestBatch),sendAll)}else{sending=false;if(timed){scheduleSending()}}}else{while((currentRequestBatch=queuedRequests.shift())){sendRequest(preparePostData(currentRequestBatch))}sending=false;if(timed){scheduleSending()}}}}this.sendAll=sendAll;function sendAllRemaining(){if(isSupported&&enabled){var actualBatchSize=appender.getLayout().allowBatching()?batchSize:1;var currentLoggingEvent;var postData="";var batchedLoggingEvents=[];while((currentLoggingEvent=queuedLoggingEvents.shift())){batchedLoggingEvents.push(currentLoggingEvent);if(queuedLoggingEvents.length>=actualBatchSize){queuedRequests.push(batchedLoggingEvents);batchedLoggingEvents=[]}}if(batchedLoggingEvents.length>0){queuedRequests.push(batchedLoggingEvents)}waitForResponse=false;timed=false;sendAll()}}function preparePostData(batchedLoggingEvents){var formattedMessages=[];var currentLoggingEvent;var postData="";while((currentLoggingEvent=batchedLoggingEvents.shift())){var currentFormattedMessage=appender.getLayout().format(currentLoggingEvent);if(appender.getLayout().ignoresThrowable()){currentFormattedMessage+=loggingEvent.getThrowableStrRep()}formattedMessages.push(currentFormattedMessage)}if(batchedLoggingEvents.length==1){postData=formattedMessages.join("")}else{postData=appender.getLayout().batchHeader+formattedMessages.join(appender.getLayout().batchSeparator)+appender.getLayout().batchFooter}postData=appender.getLayout().returnsPostData?postData:urlEncode(postVarName)+"="+urlEncode(postData);if(postData.length>0){postData+="&"}return postData+"layout="+urlEncode(appender.getLayout().toString())}function scheduleSending(){setTimeout(sendAll,timerInterval)}function xmlHttpErrorHandler(){var msg="AjaxAppender: could not create XMLHttpRequest object. AjaxAppender disabled";handleError(msg);isSupported=false;if(failCallback){failCallback(msg)}}function sendRequest(postData,successCallback){try{var xmlHttp=getXmlHttp(xmlHttpErrorHandler);if(isSupported){if(xmlHttp.overrideMimeType){xmlHttp.overrideMimeType(appender.getLayout().getContentType())}xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4){if(isHttpRequestSuccessful(xmlHttp)){if(requestSuccessCallback){requestSuccessCallback(xmlHttp)}if(successCallback){successCallback(xmlHttp)}}else{var msg="AjaxAppender.append: XMLHttpRequest request to URL "+url+" returned status code "+xmlHttp.status;handleError(msg);if(failCallback){failCallback(msg)}}xmlHttp.onreadystatechange=emptyFunction;xmlHttp=null}};xmlHttp.open("POST",url,true);try{xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(headerEx){var msg="AjaxAppender.append: your browser's XMLHttpRequest implementation does not support setRequestHeader, therefore cannot post data. AjaxAppender disabled";handleError(msg);isSupported=false;if(failCallback){failCallback(msg)}return}xmlHttp.send(postData)}}catch(ex){var errMsg="AjaxAppender.append: error sending log message to "+url;handleError(errMsg,ex);isSupported=false;if(failCallback){failCallback(errMsg+". Details: "+getExceptionStringRep(ex))}}}this.append=function(loggingEvent){if(isSupported){if(!initialized){init()}queuedLoggingEvents.push(loggingEvent);var actualBatchSize=this.getLayout().allowBatching()?batchSize:1;if(queuedLoggingEvents.length>=actualBatchSize){var currentLoggingEvent;var postData="";var batchedLoggingEvents=[];while((currentLoggingEvent=queuedLoggingEvents.shift())){batchedLoggingEvents.push(currentLoggingEvent)}queuedRequests.push(batchedLoggingEvents);if(!timed){if(!waitForResponse||(waitForResponse&&!sending)){sendAll()}}}}};function init(){initialized=true;if(sendAllOnUnload){addEvent(window,"unload",sendAllRemaining)}if(timed){scheduleSending()}}}AjaxAppender.prototype=new Appender();AjaxAppender.prototype.defaults={waitForResponse:false,timed:false,timerInterval:1000,batchSize:1,sendAllOnUnload:true,requestSuccessCallback:null,failCallback:null,postVarName:"data"};AjaxAppender.prototype.layout=new HttpPostDataLayout();AjaxAppender.prototype.toString=function(){return"AjaxAppender"};log4javascript.AjaxAppender=AjaxAppender;function setCookie(name,value,days,path){var expires;path=path?"; path="+path:"";if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString()}else{expires=""}document.cookie=escape(name)+"="+escape(value)+expires+path}function getCookie(name){var nameEquals=escape(name)+"=";var ca=document.cookie.split(";");for(var i=0,len=ca.length;i<len;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1,c.length)}if(c.indexOf(nameEquals)===0){return unescape(c.substring(nameEquals.length,c.length))}}return null}function getBaseUrl(){var scripts=document.getElementsByTagName("script");for(var i=0,len=scripts.length;i<len;++i){if(scripts[i].src.indexOf("log4javascript")!=-1){var lastSlash=scripts[i].src.lastIndexOf("/");return(lastSlash==-1)?"":scripts[i].src.substr(0,lastSlash+1)}}return null}function isLoaded(win){try{return bool(win.loaded)}catch(ex){return false}}var ConsoleAppender;(function(){var getConsoleHtmlLines=function(){return['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">','<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">',"<head>","<title>log4javascript</title>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',"<!-- Make IE8 behave like IE7, having gone to all the trouble of making IE work -->",'<meta http-equiv="X-UA-Compatible" content="IE=7" />','<script type="text/javascript">var isIe = false, isIePre7 = false;<\/script>','<!--[if IE]><script type="text/javascript">isIe = true<\/script><![endif]-->','<!--[if lt IE 7]><script type="text/javascript">isIePre7 = true<\/script><![endif]-->','<script type="text/javascript">',"//<![CDATA[","var loggingEnabled=true;var logQueuedEventsTimer=null;var logEntries=[];var logEntriesAndSeparators=[];var logItems=[];var renderDelay=100;var unrenderedLogItemsExist=false;var rootGroup,currentGroup=null;var loaded=false;var currentLogItem=null;var logMainContainer;function copyProperties(obj,props){for(var i in props){obj[i]=props[i];}}","function LogItem(){}","LogItem.prototype={mainContainer:null,wrappedContainer:null,unwrappedContainer:null,group:null,appendToLog:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].appendToLog();}","this.group.update();},doRemove:function(doUpdate,removeFromGroup){if(this.rendered){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].remove();}","this.unwrappedElementContainer=null;this.wrappedElementContainer=null;this.mainElementContainer=null;}","if(this.group&&removeFromGroup){this.group.removeChild(this,doUpdate);}","if(this===currentLogItem){currentLogItem=null;}},remove:function(doUpdate,removeFromGroup){this.doRemove(doUpdate,removeFromGroup);},render:function(){},accept:function(visitor){visitor.visit(this);},getUnwrappedDomContainer:function(){return this.group.unwrappedElementContainer.contentDiv;},getWrappedDomContainer:function(){return this.group.wrappedElementContainer.contentDiv;},getMainDomContainer:function(){return this.group.mainElementContainer.contentDiv;}};LogItem.serializedItemKeys={LOG_ENTRY:0,GROUP_START:1,GROUP_END:2};function LogItemContainerElement(){}",'LogItemContainerElement.prototype={appendToLog:function(){var insertBeforeFirst=(newestAtTop&&this.containerDomNode.hasChildNodes());if(insertBeforeFirst){this.containerDomNode.insertBefore(this.mainDiv,this.containerDomNode.firstChild);}else{this.containerDomNode.appendChild(this.mainDiv);}}};function SeparatorElementContainer(containerDomNode){this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="separator";this.mainDiv.innerHTML="&nbsp;";}',"SeparatorElementContainer.prototype=new LogItemContainerElement();SeparatorElementContainer.prototype.remove=function(){this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;};function Separator(){this.rendered=false;}","Separator.prototype=new LogItem();copyProperties(Separator.prototype,{render:function(){var containerDomNode=this.group.contentDiv;if(isIe){this.unwrappedElementContainer=new SeparatorElementContainer(this.getUnwrappedDomContainer());this.wrappedElementContainer=new SeparatorElementContainer(this.getWrappedDomContainer());this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{this.mainElementContainer=new SeparatorElementContainer(this.getMainDomContainer());this.elementContainers=[this.mainElementContainer];}",'this.content=this.formattedMessage;this.rendered=true;}});function GroupElementContainer(group,containerDomNode,isRoot,isWrapped){this.group=group;this.containerDomNode=containerDomNode;this.isRoot=isRoot;this.isWrapped=isWrapped;this.expandable=false;if(this.isRoot){if(isIe){this.contentDiv=logMainContainer.appendChild(document.createElement("div"));this.contentDiv.id=this.isWrapped?"log_wrapped":"log_unwrapped";}else{this.contentDiv=logMainContainer;}}else{var groupElementContainer=this;this.mainDiv=document.createElement("div");this.mainDiv.className="group";this.headingDiv=this.mainDiv.appendChild(document.createElement("div"));this.headingDiv.className="groupheading";this.expander=this.headingDiv.appendChild(document.createElement("span"));this.expander.className="expander unselectable greyedout";this.expander.unselectable=true;var expanderText=this.group.expanded?"-":"+";this.expanderTextNode=this.expander.appendChild(document.createTextNode(expanderText));this.headingDiv.appendChild(document.createTextNode(" "+this.group.name));this.contentDiv=this.mainDiv.appendChild(document.createElement("div"));var contentCssClass=this.group.expanded?"expanded":"collapsed";this.contentDiv.className="groupcontent "+contentCssClass;this.expander.onclick=function(){if(groupElementContainer.group.expandable){groupElementContainer.group.toggleExpanded();}};}}','GroupElementContainer.prototype=new LogItemContainerElement();copyProperties(GroupElementContainer.prototype,{toggleExpanded:function(){if(!this.isRoot){var oldCssClass,newCssClass,expanderText;if(this.group.expanded){newCssClass="expanded";oldCssClass="collapsed";expanderText="-";}else{newCssClass="collapsed";oldCssClass="expanded";expanderText="+";}',"replaceClass(this.contentDiv,newCssClass,oldCssClass);this.expanderTextNode.nodeValue=expanderText;}},remove:function(){if(!this.isRoot){this.headingDiv=null;this.expander.onclick=null;this.expander=null;this.expanderTextNode=null;this.contentDiv=null;this.containerDomNode=null;this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;}},reverseChildren:function(){var node=null;var childDomNodes=[];while((node=this.contentDiv.firstChild)){this.contentDiv.removeChild(node);childDomNodes.push(node);}",'while((node=childDomNodes.pop())){this.contentDiv.appendChild(node);}},update:function(){if(!this.isRoot){if(this.group.expandable){removeClass(this.expander,"greyedout");}else{addClass(this.expander,"greyedout");}}},clear:function(){if(this.isRoot){this.contentDiv.innerHTML="";}}});function Group(name,isRoot,initiallyExpanded){this.name=name;this.group=null;this.isRoot=isRoot;this.initiallyExpanded=initiallyExpanded;this.elementContainers=[];this.children=[];this.expanded=initiallyExpanded;this.rendered=false;this.expandable=false;}',"Group.prototype=new LogItem();copyProperties(Group.prototype,{addChild:function(logItem){this.children.push(logItem);logItem.group=this;},render:function(){if(isIe){var unwrappedDomContainer,wrappedDomContainer;if(this.isRoot){unwrappedDomContainer=logMainContainer;wrappedDomContainer=logMainContainer;}else{unwrappedDomContainer=this.getUnwrappedDomContainer();wrappedDomContainer=this.getWrappedDomContainer();}","this.unwrappedElementContainer=new GroupElementContainer(this,unwrappedDomContainer,this.isRoot,false);this.wrappedElementContainer=new GroupElementContainer(this,wrappedDomContainer,this.isRoot,true);this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{var mainDomContainer=this.isRoot?logMainContainer:this.getMainDomContainer();this.mainElementContainer=new GroupElementContainer(this,mainDomContainer,this.isRoot,false);this.elementContainers=[this.mainElementContainer];}","this.rendered=true;},toggleExpanded:function(){this.expanded=!this.expanded;for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].toggleExpanded();}},expand:function(){if(!this.expanded){this.toggleExpanded();}},accept:function(visitor){visitor.visitGroup(this);},reverseChildren:function(){if(this.rendered){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].reverseChildren();}}},update:function(){var previouslyExpandable=this.expandable;this.expandable=(this.children.length!==0);if(this.expandable!==previouslyExpandable){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].update();}}},flatten:function(){var visitor=new GroupFlattener();this.accept(visitor);return visitor.logEntriesAndSeparators;},removeChild:function(child,doUpdate){array_remove(this.children,child);child.group=null;if(doUpdate){this.update();}},remove:function(doUpdate,removeFromGroup){for(var i=0,len=this.children.length;i<len;i++){this.children[i].remove(false,false);}","this.children=[];this.update();if(this===currentGroup){currentGroup=this.group;}","this.doRemove(doUpdate,removeFromGroup);},serialize:function(items){items.push([LogItem.serializedItemKeys.GROUP_START,this.name]);for(var i=0,len=this.children.length;i<len;i++){this.children[i].serialize(items);}","if(this!==currentGroup){items.push([LogItem.serializedItemKeys.GROUP_END]);}},clear:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].clear();}}});function LogEntryElementContainer(){}",'LogEntryElementContainer.prototype=new LogItemContainerElement();copyProperties(LogEntryElementContainer.prototype,{remove:function(){this.doRemove();},doRemove:function(){this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;this.contentElement=null;this.containerDomNode=null;},setContent:function(content,wrappedContent){if(content===this.formattedMessage){this.contentElement.innerHTML="";this.contentElement.appendChild(document.createTextNode(this.formattedMessage));}else{this.contentElement.innerHTML=content;}},setSearchMatch:function(isMatch){var oldCssClass=isMatch?"searchnonmatch":"searchmatch";var newCssClass=isMatch?"searchmatch":"searchnonmatch";replaceClass(this.mainDiv,newCssClass,oldCssClass);},clearSearch:function(){removeClass(this.mainDiv,"searchmatch");removeClass(this.mainDiv,"searchnonmatch");}});function LogEntryWrappedElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.appendChild(document.createTextNode(this.logEntry.formattedMessage));this.mainDiv.className="logentry wrapped "+this.logEntry.level;this.contentElement=this.mainDiv;}','LogEntryWrappedElementContainer.prototype=new LogEntryElementContainer();LogEntryWrappedElementContainer.prototype.setContent=function(content,wrappedContent){if(content===this.formattedMessage){this.contentElement.innerHTML="";this.contentElement.appendChild(document.createTextNode(this.formattedMessage));}else{this.contentElement.innerHTML=wrappedContent;}};function LogEntryUnwrappedElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="logentry unwrapped "+this.logEntry.level;this.pre=this.mainDiv.appendChild(document.createElement("pre"));this.pre.appendChild(document.createTextNode(this.logEntry.formattedMessage));this.pre.className="unwrapped";this.contentElement=this.pre;}','LogEntryUnwrappedElementContainer.prototype=new LogEntryElementContainer();LogEntryUnwrappedElementContainer.prototype.remove=function(){this.doRemove();this.pre=null;};function LogEntryMainElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="logentry nonielogentry "+this.logEntry.level;this.contentElement=this.mainDiv.appendChild(document.createElement("span"));this.contentElement.appendChild(document.createTextNode(this.logEntry.formattedMessage));}',"LogEntryMainElementContainer.prototype=new LogEntryElementContainer();function LogEntry(level,formattedMessage){this.level=level;this.formattedMessage=formattedMessage;this.rendered=false;}",'LogEntry.prototype=new LogItem();copyProperties(LogEntry.prototype,{render:function(){var logEntry=this;var containerDomNode=this.group.contentDiv;if(isIe){this.formattedMessage=this.formattedMessage.replace(/\\r\\n/g,"\\r");this.unwrappedElementContainer=new LogEntryUnwrappedElementContainer(this,this.getUnwrappedDomContainer());this.wrappedElementContainer=new LogEntryWrappedElementContainer(this,this.getWrappedDomContainer());this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{this.mainElementContainer=new LogEntryMainElementContainer(this,this.getMainDomContainer());this.elementContainers=[this.mainElementContainer];}','this.content=this.formattedMessage;this.rendered=true;},setContent:function(content,wrappedContent){if(content!=this.content){if(isIe&&(content!==this.formattedMessage)){content=content.replace(/\\r\\n/g,"\\r");}',"for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].setContent(content,wrappedContent);}",'this.content=content;}},getSearchMatches:function(){var matches=[];var i,len;if(isIe){var unwrappedEls=getElementsByClass(this.unwrappedElementContainer.mainDiv,"searchterm","span");var wrappedEls=getElementsByClass(this.wrappedElementContainer.mainDiv,"searchterm","span");for(i=0,len=unwrappedEls.length;i<len;i++){matches[i]=new Match(this.level,null,unwrappedEls[i],wrappedEls[i]);}}else{var els=getElementsByClass(this.mainElementContainer.mainDiv,"searchterm","span");for(i=0,len=els.length;i<len;i++){matches[i]=new Match(this.level,els[i]);}}',"return matches;},setSearchMatch:function(isMatch){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].setSearchMatch(isMatch);}},clearSearch:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].clearSearch();}},accept:function(visitor){visitor.visitLogEntry(this);},serialize:function(items){items.push([LogItem.serializedItemKeys.LOG_ENTRY,this.level,this.formattedMessage]);}});function LogItemVisitor(){}","LogItemVisitor.prototype={visit:function(logItem){},visitParent:function(logItem){if(logItem.group){logItem.group.accept(this);}},visitChildren:function(logItem){for(var i=0,len=logItem.children.length;i<len;i++){logItem.children[i].accept(this);}},visitLogEntry:function(logEntry){this.visit(logEntry);},visitSeparator:function(separator){this.visit(separator);},visitGroup:function(group){this.visit(group);}};function GroupFlattener(){this.logEntriesAndSeparators=[];}",'GroupFlattener.prototype=new LogItemVisitor();GroupFlattener.prototype.visitGroup=function(group){this.visitChildren(group);};GroupFlattener.prototype.visitLogEntry=function(logEntry){this.logEntriesAndSeparators.push(logEntry);};GroupFlattener.prototype.visitSeparator=function(separator){this.logEntriesAndSeparators.push(separator);};window.onload=function(){if(location.search){var queryBits=unescape(location.search).substr(1).split("&"),nameValueBits;for(var i=0,len=queryBits.length;i<len;i++){nameValueBits=queryBits[i].split("=");if(nameValueBits[0]=="log4javascript_domain"){document.domain=nameValueBits[1];break;}}}','logMainContainer=$("log");if(isIePre7){addClass(logMainContainer,"oldIe");}','rootGroup=new Group("root",true);rootGroup.render();currentGroup=rootGroup;setCommandInputWidth();setLogContainerHeight();toggleLoggingEnabled();toggleSearchEnabled();toggleSearchFilter();toggleSearchHighlight();applyFilters();checkAllLevels();toggleWrap();toggleNewestAtTop();toggleScrollToLatest();renderQueuedLogItems();loaded=true;$("command").value="";$("command").autocomplete="off";$("command").onkeydown=function(evt){evt=getEvent(evt);if(evt.keyCode==10||evt.keyCode==13){evalCommandLine();stopPropagation(evt);}else if(evt.keyCode==27){this.value="";this.focus();}else if(evt.keyCode==38&&commandHistory.length>0){currentCommandIndex=Math.max(0,currentCommandIndex-1);this.value=commandHistory[currentCommandIndex];moveCaretToEnd(this);}else if(evt.keyCode==40&&commandHistory.length>0){currentCommandIndex=Math.min(commandHistory.length-1,currentCommandIndex+1);this.value=commandHistory[currentCommandIndex];moveCaretToEnd(this);}};$("command").onkeypress=function(evt){evt=getEvent(evt);if(evt.keyCode==38&&commandHistory.length>0&&evt.preventDefault){evt.preventDefault();}};$("command").onkeyup=function(evt){evt=getEvent(evt);if(evt.keyCode==27&&evt.preventDefault){evt.preventDefault();this.focus();}};document.onkeydown=function keyEventHandler(evt){evt=getEvent(evt);switch(evt.keyCode){case 69:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){evalLastCommand();cancelKeyEvent(evt);return false;}',"break;case 75:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){focusSearch();cancelKeyEvent(evt);return false;}","break;case 40:case 76:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){focusCommandLine();cancelKeyEvent(evt);return false;}","break;}};setTimeout(setLogContainerHeight,20);setShowCommandLine(showCommandLine);doSearch();};window.onunload=function(){if(mainWindowExists()){appender.unload();}",'appender=null;};function toggleLoggingEnabled(){setLoggingEnabled($("enableLogging").checked);}',"function setLoggingEnabled(enable){loggingEnabled=enable;}","var appender=null;function setAppender(appenderParam){appender=appenderParam;}",'function setShowCloseButton(showCloseButton){$("closeButton").style.display=showCloseButton?"inline":"none";}','function setShowHideButton(showHideButton){$("hideButton").style.display=showHideButton?"inline":"none";}',"var newestAtTop=false;function LogItemContentReverser(){}","LogItemContentReverser.prototype=new LogItemVisitor();LogItemContentReverser.prototype.visitGroup=function(group){group.reverseChildren();this.visitChildren(group);};function setNewestAtTop(isNewestAtTop){var oldNewestAtTop=newestAtTop;var i,iLen,j,jLen;newestAtTop=Boolean(isNewestAtTop);if(oldNewestAtTop!=newestAtTop){var visitor=new LogItemContentReverser();rootGroup.accept(visitor);if(currentSearch){var currentMatch=currentSearch.matches[currentMatchIndex];var matchIndex=0;var matches=[];var actOnLogEntry=function(logEntry){var logEntryMatches=logEntry.getSearchMatches();for(j=0,jLen=logEntryMatches.length;j<jLen;j++){matches[matchIndex]=logEntryMatches[j];if(currentMatch&&logEntryMatches[j].equals(currentMatch)){currentMatchIndex=matchIndex;}","matchIndex++;}};if(newestAtTop){for(i=logEntries.length-1;i>=0;i--){actOnLogEntry(logEntries[i]);}}else{for(i=0,iLen=logEntries.length;i<iLen;i++){actOnLogEntry(logEntries[i]);}}","currentSearch.matches=matches;if(currentMatch){currentMatch.setCurrent();}}else if(scrollToLatest){doScrollToLatest();}}",'$("newestAtTop").checked=isNewestAtTop;}','function toggleNewestAtTop(){var isNewestAtTop=$("newestAtTop").checked;setNewestAtTop(isNewestAtTop);}',"var scrollToLatest=true;function setScrollToLatest(isScrollToLatest){scrollToLatest=isScrollToLatest;if(scrollToLatest){doScrollToLatest();}",'$("scrollToLatest").checked=isScrollToLatest;}','function toggleScrollToLatest(){var isScrollToLatest=$("scrollToLatest").checked;setScrollToLatest(isScrollToLatest);}','function doScrollToLatest(){var l=logMainContainer;if(typeof l.scrollTop!="undefined"){if(newestAtTop){l.scrollTop=0;}else{var latestLogEntry=l.lastChild;if(latestLogEntry){l.scrollTop=l.scrollHeight;}}}}',"var closeIfOpenerCloses=true;function setCloseIfOpenerCloses(isCloseIfOpenerCloses){closeIfOpenerCloses=isCloseIfOpenerCloses;}","var maxMessages=null;function setMaxMessages(max){maxMessages=max;pruneLogEntries();}",'var showCommandLine=false;function setShowCommandLine(isShowCommandLine){showCommandLine=isShowCommandLine;if(loaded){$("commandLine").style.display=showCommandLine?"block":"none";setCommandInputWidth();setLogContainerHeight();}}','function focusCommandLine(){if(loaded){$("command").focus();}}','function focusSearch(){if(loaded){$("searchBox").focus();}}',"function getLogItems(){var items=[];for(var i=0,len=logItems.length;i<len;i++){logItems[i].serialize(items);}","return items;}","function setLogItems(items){var loggingReallyEnabled=loggingEnabled;loggingEnabled=true;for(var i=0,len=items.length;i<len;i++){switch(items[i][0]){case LogItem.serializedItemKeys.LOG_ENTRY:log(items[i][1],items[i][2]);break;case LogItem.serializedItemKeys.GROUP_START:group(items[i][1]);break;case LogItem.serializedItemKeys.GROUP_END:groupEnd();break;}}","loggingEnabled=loggingReallyEnabled;}","function log(logLevel,formattedMessage){if(loggingEnabled){var logEntry=new LogEntry(logLevel,formattedMessage);logEntries.push(logEntry);logEntriesAndSeparators.push(logEntry);logItems.push(logEntry);currentGroup.addChild(logEntry);if(loaded){if(logQueuedEventsTimer!==null){clearTimeout(logQueuedEventsTimer);}","logQueuedEventsTimer=setTimeout(renderQueuedLogItems,renderDelay);unrenderedLogItemsExist=true;}}}","function renderQueuedLogItems(){logQueuedEventsTimer=null;var pruned=pruneLogEntries();var initiallyHasMatches=currentSearch?currentSearch.hasMatches():false;for(var i=0,len=logItems.length;i<len;i++){if(!logItems[i].rendered){logItems[i].render();logItems[i].appendToLog();if(currentSearch&&(logItems[i]instanceof LogEntry)){currentSearch.applyTo(logItems[i]);}}}","if(currentSearch){if(pruned){if(currentSearch.hasVisibleMatches()){if(currentMatchIndex===null){setCurrentMatchIndex(0);}","displayMatches();}else{displayNoMatches();}}else if(!initiallyHasMatches&&currentSearch.hasVisibleMatches()){setCurrentMatchIndex(0);displayMatches();}}","if(scrollToLatest){doScrollToLatest();}","unrenderedLogItemsExist=false;}","function pruneLogEntries(){if((maxMessages!==null)&&(logEntriesAndSeparators.length>maxMessages)){var numberToDelete=logEntriesAndSeparators.length-maxMessages;var prunedLogEntries=logEntriesAndSeparators.slice(0,numberToDelete);if(currentSearch){currentSearch.removeMatches(prunedLogEntries);}","var group;for(var i=0;i<numberToDelete;i++){group=logEntriesAndSeparators[i].group;array_remove(logItems,logEntriesAndSeparators[i]);array_remove(logEntries,logEntriesAndSeparators[i]);logEntriesAndSeparators[i].remove(true,true);if(group.children.length===0&&group!==currentGroup&&group!==rootGroup){array_remove(logItems,group);group.remove(true,true);}}","logEntriesAndSeparators=array_removeFromStart(logEntriesAndSeparators,numberToDelete);return true;}","return false;}",'function group(name,startExpanded){if(loggingEnabled){initiallyExpanded=(typeof startExpanded==="undefined")?true:Boolean(startExpanded);var newGroup=new Group(name,false,initiallyExpanded);currentGroup.addChild(newGroup);currentGroup=newGroup;logItems.push(newGroup);if(loaded){if(logQueuedEventsTimer!==null){clearTimeout(logQueuedEventsTimer);}',"logQueuedEventsTimer=setTimeout(renderQueuedLogItems,renderDelay);unrenderedLogItemsExist=true;}}}","function groupEnd(){currentGroup=(currentGroup===rootGroup)?rootGroup:currentGroup.group;}","function mainPageReloaded(){currentGroup=rootGroup;var separator=new Separator();logEntriesAndSeparators.push(separator);logItems.push(separator);currentGroup.addChild(separator);}","function closeWindow(){if(appender&&mainWindowExists()){appender.close(true);}else{window.close();}}","function hide(){if(appender&&mainWindowExists()){appender.hide();}}",'var mainWindow=window;var windowId="log4javascriptConsoleWindow_"+new Date().getTime()+"_"+(""+Math.random()).substr(2);function setMainWindow(win){mainWindow=win;mainWindow[windowId]=window;if(opener&&closeIfOpenerCloses){pollOpener();}}',"function pollOpener(){if(closeIfOpenerCloses){if(mainWindowExists()){setTimeout(pollOpener,500);}else{closeWindow();}}}","function mainWindowExists(){try{return(mainWindow&&!mainWindow.closed&&mainWindow[windowId]==window);}catch(ex){}","return false;}",'var logLevels=["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"];function getCheckBox(logLevel){return $("switch_"+logLevel);}','function getIeWrappedLogContainer(){return $("log_wrapped");}','function getIeUnwrappedLogContainer(){return $("log_unwrapped");}',"function applyFilters(){for(var i=0;i<logLevels.length;i++){if(getCheckBox(logLevels[i]).checked){addClass(logMainContainer,logLevels[i]);}else{removeClass(logMainContainer,logLevels[i]);}}","updateSearchFromFilters();}",'function toggleAllLevels(){var turnOn=$("switch_ALL").checked;for(var i=0;i<logLevels.length;i++){getCheckBox(logLevels[i]).checked=turnOn;if(turnOn){addClass(logMainContainer,logLevels[i]);}else{removeClass(logMainContainer,logLevels[i]);}}}','function checkAllLevels(){for(var i=0;i<logLevels.length;i++){if(!getCheckBox(logLevels[i]).checked){getCheckBox("ALL").checked=false;return;}}','getCheckBox("ALL").checked=true;}',"function clearLog(){rootGroup.clear();currentGroup=rootGroup;logEntries=[];logItems=[];logEntriesAndSeparators=[];doSearch();}",'function toggleWrap(){var enable=$("wrap").checked;if(enable){addClass(logMainContainer,"wrap");}else{removeClass(logMainContainer,"wrap");}',"refreshCurrentMatch();}","var searchTimer=null;function scheduleSearch(){try{clearTimeout(searchTimer);}catch(ex){}","searchTimer=setTimeout(doSearch,500);}","function Search(searchTerm,isRegex,searchRegex,isCaseSensitive){this.searchTerm=searchTerm;this.isRegex=isRegex;this.searchRegex=searchRegex;this.isCaseSensitive=isCaseSensitive;this.matches=[];}","Search.prototype={hasMatches:function(){return this.matches.length>0;},hasVisibleMatches:function(){if(this.hasMatches()){for(var i=0;i<this.matches.length;i++){if(this.matches[i].isVisible()){return true;}}}","return false;},match:function(logEntry){var entryText=String(logEntry.formattedMessage);var matchesSearch=false;if(this.isRegex){matchesSearch=this.searchRegex.test(entryText);}else if(this.isCaseSensitive){matchesSearch=(entryText.indexOf(this.searchTerm)>-1);}else{matchesSearch=(entryText.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1);}","return matchesSearch;},getNextVisibleMatchIndex:function(){for(var i=currentMatchIndex+1;i<this.matches.length;i++){if(this.matches[i].isVisible()){return i;}}","for(i=0;i<=currentMatchIndex;i++){if(this.matches[i].isVisible()){return i;}}","return-1;},getPreviousVisibleMatchIndex:function(){for(var i=currentMatchIndex-1;i>=0;i--){if(this.matches[i].isVisible()){return i;}}","for(var i=this.matches.length-1;i>=currentMatchIndex;i--){if(this.matches[i].isVisible()){return i;}}",'return-1;},applyTo:function(logEntry){var doesMatch=this.match(logEntry);if(doesMatch){logEntry.group.expand();logEntry.setSearchMatch(true);var logEntryContent;var wrappedLogEntryContent;var searchTermReplacementStartTag="<span class=\\"searchterm\\">";var searchTermReplacementEndTag="<"+"/span>";var preTagName=isIe?"pre":"span";var preStartTag="<"+preTagName+" class=\\"pre\\">";var preEndTag="<"+"/"+preTagName+">";var startIndex=0;var searchIndex,matchedText,textBeforeMatch;if(this.isRegex){var flags=this.isCaseSensitive?"g":"gi";var capturingRegex=new RegExp("("+this.searchRegex.source+")",flags);var rnd=(""+Math.random()).substr(2);var startToken="%%s"+rnd+"%%";var endToken="%%e"+rnd+"%%";logEntryContent=logEntry.formattedMessage.replace(capturingRegex,startToken+"$1"+endToken);logEntryContent=escapeHtml(logEntryContent);var result;var searchString=logEntryContent;logEntryContent="";wrappedLogEntryContent="";while((searchIndex=searchString.indexOf(startToken,startIndex))>-1){var endTokenIndex=searchString.indexOf(endToken,searchIndex);matchedText=searchString.substring(searchIndex+startToken.length,endTokenIndex);textBeforeMatch=searchString.substring(startIndex,searchIndex);logEntryContent+=preStartTag+textBeforeMatch+preEndTag;logEntryContent+=searchTermReplacementStartTag+preStartTag+matchedText+',"preEndTag+searchTermReplacementEndTag;if(isIe){wrappedLogEntryContent+=textBeforeMatch+searchTermReplacementStartTag+","matchedText+searchTermReplacementEndTag;}","startIndex=endTokenIndex+endToken.length;}",'logEntryContent+=preStartTag+searchString.substr(startIndex)+preEndTag;if(isIe){wrappedLogEntryContent+=searchString.substr(startIndex);}}else{logEntryContent="";wrappedLogEntryContent="";var searchTermReplacementLength=searchTermReplacementStartTag.length+',"this.searchTerm.length+searchTermReplacementEndTag.length;var searchTermLength=this.searchTerm.length;var searchTermLowerCase=this.searchTerm.toLowerCase();var logTextLowerCase=logEntry.formattedMessage.toLowerCase();while((searchIndex=logTextLowerCase.indexOf(searchTermLowerCase,startIndex))>-1){matchedText=escapeHtml(logEntry.formattedMessage.substr(searchIndex,this.searchTerm.length));textBeforeMatch=escapeHtml(logEntry.formattedMessage.substring(startIndex,searchIndex));var searchTermReplacement=searchTermReplacementStartTag+","preStartTag+matchedText+preEndTag+searchTermReplacementEndTag;logEntryContent+=preStartTag+textBeforeMatch+preEndTag+searchTermReplacement;if(isIe){wrappedLogEntryContent+=textBeforeMatch+searchTermReplacementStartTag+","matchedText+searchTermReplacementEndTag;}","startIndex=searchIndex+searchTermLength;}","var textAfterLastMatch=escapeHtml(logEntry.formattedMessage.substr(startIndex));logEntryContent+=preStartTag+textAfterLastMatch+preEndTag;if(isIe){wrappedLogEntryContent+=textAfterLastMatch;}}","logEntry.setContent(logEntryContent,wrappedLogEntryContent);var logEntryMatches=logEntry.getSearchMatches();this.matches=this.matches.concat(logEntryMatches);}else{logEntry.setSearchMatch(false);logEntry.setContent(logEntry.formattedMessage,logEntry.formattedMessage);}","return doesMatch;},removeMatches:function(logEntries){var matchesToRemoveCount=0;var currentMatchRemoved=false;var matchesToRemove=[];var i,iLen,j,jLen;for(i=0,iLen=this.matches.length;i<iLen;i++){for(j=0,jLen=logEntries.length;j<jLen;j++){if(this.matches[i].belongsTo(logEntries[j])){matchesToRemove.push(this.matches[i]);if(i===currentMatchIndex){currentMatchRemoved=true;}}}}","var newMatch=currentMatchRemoved?null:this.matches[currentMatchIndex];if(currentMatchRemoved){for(i=currentMatchIndex,iLen=this.matches.length;i<iLen;i++){if(this.matches[i].isVisible()&&!array_contains(matchesToRemove,this.matches[i])){newMatch=this.matches[i];break;}}}","for(i=0,iLen=matchesToRemove.length;i<iLen;i++){array_remove(this.matches,matchesToRemove[i]);matchesToRemove[i].remove();}","if(this.hasVisibleMatches()){if(newMatch===null){setCurrentMatchIndex(0);}else{var newMatchIndex=0;for(i=0,iLen=this.matches.length;i<iLen;i++){if(newMatch===this.matches[i]){newMatchIndex=i;break;}}","setCurrentMatchIndex(newMatchIndex);}}else{currentMatchIndex=null;displayNoMatches();}}};function getPageOffsetTop(el,container){var currentEl=el;var y=0;while(currentEl&&currentEl!=container){y+=currentEl.offsetTop;currentEl=currentEl.offsetParent;}","return y;}",'function scrollIntoView(el){var logContainer=logMainContainer;if(!$("wrap").checked){var logContainerLeft=logContainer.scrollLeft;var logContainerRight=logContainerLeft+logContainer.offsetWidth;var elLeft=el.offsetLeft;var elRight=elLeft+el.offsetWidth;if(elLeft<logContainerLeft||elRight>logContainerRight){logContainer.scrollLeft=elLeft-(logContainer.offsetWidth-el.offsetWidth)/2;}}',"var logContainerTop=logContainer.scrollTop;var logContainerBottom=logContainerTop+logContainer.offsetHeight;var elTop=getPageOffsetTop(el)-getToolBarsHeight();var elBottom=elTop+el.offsetHeight;if(elTop<logContainerTop||elBottom>logContainerBottom){logContainer.scrollTop=elTop-(logContainer.offsetHeight-el.offsetHeight)/2;}}","function Match(logEntryLevel,spanInMainDiv,spanInUnwrappedPre,spanInWrappedDiv){this.logEntryLevel=logEntryLevel;this.spanInMainDiv=spanInMainDiv;if(isIe){this.spanInUnwrappedPre=spanInUnwrappedPre;this.spanInWrappedDiv=spanInWrappedDiv;}","this.mainSpan=isIe?spanInUnwrappedPre:spanInMainDiv;}",'Match.prototype={equals:function(match){return this.mainSpan===match.mainSpan;},setCurrent:function(){if(isIe){addClass(this.spanInUnwrappedPre,"currentmatch");addClass(this.spanInWrappedDiv,"currentmatch");var elementToScroll=$("wrap").checked?this.spanInWrappedDiv:this.spanInUnwrappedPre;scrollIntoView(elementToScroll);}else{addClass(this.spanInMainDiv,"currentmatch");scrollIntoView(this.spanInMainDiv);}},belongsTo:function(logEntry){if(isIe){return isDescendant(this.spanInUnwrappedPre,logEntry.unwrappedPre);}else{return isDescendant(this.spanInMainDiv,logEntry.mainDiv);}},setNotCurrent:function(){if(isIe){removeClass(this.spanInUnwrappedPre,"currentmatch");removeClass(this.spanInWrappedDiv,"currentmatch");}else{removeClass(this.spanInMainDiv,"currentmatch");}},isOrphan:function(){return isOrphan(this.mainSpan);},isVisible:function(){return getCheckBox(this.logEntryLevel).checked;},remove:function(){if(isIe){this.spanInUnwrappedPre=null;this.spanInWrappedDiv=null;}else{this.spanInMainDiv=null;}}};var currentSearch=null;var currentMatchIndex=null;function doSearch(){var searchBox=$("searchBox");var searchTerm=searchBox.value;var isRegex=$("searchRegex").checked;var isCaseSensitive=$("searchCaseSensitive").checked;var i;if(searchTerm===""){$("searchReset").disabled=true;$("searchNav").style.display="none";removeClass(document.body,"searching");removeClass(searchBox,"hasmatches");removeClass(searchBox,"nomatches");for(i=0;i<logEntries.length;i++){logEntries[i].clearSearch();logEntries[i].setContent(logEntries[i].formattedMessage,logEntries[i].formattedMessage);}','currentSearch=null;setLogContainerHeight();}else{$("searchReset").disabled=false;$("searchNav").style.display="block";var searchRegex;var regexValid;if(isRegex){try{searchRegex=isCaseSensitive?new RegExp(searchTerm,"g"):new RegExp(searchTerm,"gi");regexValid=true;replaceClass(searchBox,"validregex","invalidregex");searchBox.title="Valid regex";}catch(ex){regexValid=false;replaceClass(searchBox,"invalidregex","validregex");searchBox.title="Invalid regex: "+(ex.message?ex.message:(ex.description?ex.description:"unknown error"));return;}}else{searchBox.title="";removeClass(searchBox,"validregex");removeClass(searchBox,"invalidregex");}','addClass(document.body,"searching");currentSearch=new Search(searchTerm,isRegex,searchRegex,isCaseSensitive);for(i=0;i<logEntries.length;i++){currentSearch.applyTo(logEntries[i]);}',"setLogContainerHeight();if(currentSearch.hasVisibleMatches()){setCurrentMatchIndex(0);displayMatches();}else{displayNoMatches();}}}","function updateSearchFromFilters(){if(currentSearch){if(currentSearch.hasMatches()){if(currentMatchIndex===null){currentMatchIndex=0;}","var currentMatch=currentSearch.matches[currentMatchIndex];if(currentMatch.isVisible()){displayMatches();setCurrentMatchIndex(currentMatchIndex);}else{currentMatch.setNotCurrent();var nextVisibleMatchIndex=currentSearch.getNextVisibleMatchIndex();if(nextVisibleMatchIndex>-1){setCurrentMatchIndex(nextVisibleMatchIndex);displayMatches();}else{displayNoMatches();}}}else{displayNoMatches();}}}","function refreshCurrentMatch(){if(currentSearch&&currentSearch.hasVisibleMatches()){setCurrentMatchIndex(currentMatchIndex);}}",'function displayMatches(){replaceClass($("searchBox"),"hasmatches","nomatches");$("searchBox").title=""+currentSearch.matches.length+" matches found";$("searchNav").style.display="block";setLogContainerHeight();}','function displayNoMatches(){replaceClass($("searchBox"),"nomatches","hasmatches");$("searchBox").title="No matches found";$("searchNav").style.display="none";setLogContainerHeight();}','function toggleSearchEnabled(enable){enable=(typeof enable=="undefined")?!$("searchDisable").checked:enable;$("searchBox").disabled=!enable;$("searchReset").disabled=!enable;$("searchRegex").disabled=!enable;$("searchNext").disabled=!enable;$("searchPrevious").disabled=!enable;$("searchCaseSensitive").disabled=!enable;$("searchNav").style.display=(enable&&($("searchBox").value!=="")&&currentSearch&&currentSearch.hasVisibleMatches())?"block":"none";if(enable){removeClass($("search"),"greyedout");addClass(document.body,"searching");if($("searchHighlight").checked){addClass(logMainContainer,"searchhighlight");}else{removeClass(logMainContainer,"searchhighlight");}','if($("searchFilter").checked){addClass(logMainContainer,"searchfilter");}else{removeClass(logMainContainer,"searchfilter");}','$("searchDisable").checked=!enable;}else{addClass($("search"),"greyedout");removeClass(document.body,"searching");removeClass(logMainContainer,"searchhighlight");removeClass(logMainContainer,"searchfilter");}',"setLogContainerHeight();}",'function toggleSearchFilter(){var enable=$("searchFilter").checked;if(enable){addClass(logMainContainer,"searchfilter");}else{removeClass(logMainContainer,"searchfilter");}',"refreshCurrentMatch();}",'function toggleSearchHighlight(){var enable=$("searchHighlight").checked;if(enable){addClass(logMainContainer,"searchhighlight");}else{removeClass(logMainContainer,"searchhighlight");}}','function clearSearch(){$("searchBox").value="";doSearch();}','function searchNext(){if(currentSearch!==null&&currentMatchIndex!==null){currentSearch.matches[currentMatchIndex].setNotCurrent();var nextMatchIndex=currentSearch.getNextVisibleMatchIndex();if(nextMatchIndex>currentMatchIndex||confirm("Reached the end of the page. Start from the top?")){setCurrentMatchIndex(nextMatchIndex);}}}','function searchPrevious(){if(currentSearch!==null&&currentMatchIndex!==null){currentSearch.matches[currentMatchIndex].setNotCurrent();var previousMatchIndex=currentSearch.getPreviousVisibleMatchIndex();if(previousMatchIndex<currentMatchIndex||confirm("Reached the start of the page. Continue from the bottom?")){setCurrentMatchIndex(previousMatchIndex);}}}',"function setCurrentMatchIndex(index){currentMatchIndex=index;currentSearch.matches[currentMatchIndex].setCurrent();}",'function addClass(el,cssClass){if(!hasClass(el,cssClass)){if(el.className){el.className+=" "+cssClass;}else{el.className=cssClass;}}}','function hasClass(el,cssClass){if(el.className){var classNames=el.className.split(" ");return array_contains(classNames,cssClass);}',"return false;}",'function removeClass(el,cssClass){if(hasClass(el,cssClass)){var existingClasses=el.className.split(" ");var newClasses=[];for(var i=0,len=existingClasses.length;i<len;i++){if(existingClasses[i]!=cssClass){newClasses[newClasses.length]=existingClasses[i];}}','el.className=newClasses.join(" ");}}',"function replaceClass(el,newCssClass,oldCssClass){removeClass(el,oldCssClass);addClass(el,newCssClass);}","function getElementsByClass(el,cssClass,tagName){var elements=el.getElementsByTagName(tagName);var matches=[];for(var i=0,len=elements.length;i<len;i++){if(hasClass(elements[i],cssClass)){matches.push(elements[i]);}}","return matches;}","function $(id){return document.getElementById(id);}","function isDescendant(node,ancestorNode){while(node!=null){if(node===ancestorNode){return true;}","node=node.parentNode;}","return false;}","function isOrphan(node){var currentNode=node;while(currentNode){if(currentNode==document.body){return false;}","currentNode=currentNode.parentNode;}","return true;}",'function escapeHtml(str){return str.replace(/&/g,"&amp;").replace(/[<]/g,"&lt;").replace(/>/g,"&gt;");}',"function getWindowWidth(){if(window.innerWidth){return window.innerWidth;}else if(document.documentElement&&document.documentElement.clientWidth){return document.documentElement.clientWidth;}else if(document.body){return document.body.clientWidth;}","return 0;}","function getWindowHeight(){if(window.innerHeight){return window.innerHeight;}else if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight;}else if(document.body){return document.body.clientHeight;}","return 0;}",'function getToolBarsHeight(){return $("switches").offsetHeight;}','function getChromeHeight(){var height=getToolBarsHeight();if(showCommandLine){height+=$("commandLine").offsetHeight;}',"return height;}",'function setLogContainerHeight(){if(logMainContainer){var windowHeight=getWindowHeight();$("body").style.height=getWindowHeight()+"px";logMainContainer.style.height=""+','Math.max(0,windowHeight-getChromeHeight())+"px";}}','function setCommandInputWidth(){if(showCommandLine){$("command").style.width=""+Math.max(0,$("commandLineContainer").offsetWidth-','($("evaluateButton").offsetWidth+13))+"px";}}',"window.onresize=function(){setCommandInputWidth();setLogContainerHeight();};if(!Array.prototype.push){Array.prototype.push=function(){for(var i=0,len=arguments.length;i<len;i++){this[this.length]=arguments[i];}","return this.length;};}","if(!Array.prototype.pop){Array.prototype.pop=function(){if(this.length>0){var val=this[this.length-1];this.length=this.length-1;return val;}};}","if(!Array.prototype.shift){Array.prototype.shift=function(){if(this.length>0){var firstItem=this[0];for(var i=0,len=this.length-1;i<len;i++){this[i]=this[i+1];}","this.length=this.length-1;return firstItem;}};}","if(!Array.prototype.splice){Array.prototype.splice=function(startIndex,deleteCount){var itemsAfterDeleted=this.slice(startIndex+deleteCount);var itemsDeleted=this.slice(startIndex,startIndex+deleteCount);this.length=startIndex;var argumentsArray=[];for(var i=0,len=arguments.length;i<len;i++){argumentsArray[i]=arguments[i];}","var itemsToAppend=(argumentsArray.length>2)?itemsAfterDeleted=argumentsArray.slice(2).concat(itemsAfterDeleted):itemsAfterDeleted;for(i=0,len=itemsToAppend.length;i<len;i++){this.push(itemsToAppend[i]);}","return itemsDeleted;};}","function array_remove(arr,val){var index=-1;for(var i=0,len=arr.length;i<len;i++){if(arr[i]===val){index=i;break;}}","if(index>=0){arr.splice(index,1);return index;}else{return false;}}","function array_removeFromStart(array,numberToRemove){if(Array.prototype.splice){array.splice(0,numberToRemove);}else{for(var i=numberToRemove,len=array.length;i<len;i++){array[i-numberToRemove]=array[i];}","array.length=array.length-numberToRemove;}","return array;}","function array_contains(arr,val){for(var i=0,len=arr.length;i<len;i++){if(arr[i]==val){return true;}}","return false;}","function getErrorMessage(ex){if(ex.message){return ex.message;}else if(ex.description){return ex.description;}",'return""+ex;}',"function moveCaretToEnd(input){if(input.setSelectionRange){input.focus();var length=input.value.length;input.setSelectionRange(length,length);}else if(input.createTextRange){var range=input.createTextRange();range.collapse(false);range.select();}","input.focus();}",'function stopPropagation(evt){if(evt.stopPropagation){evt.stopPropagation();}else if(typeof evt.cancelBubble!="undefined"){evt.cancelBubble=true;}}',"function getEvent(evt){return evt?evt:event;}","function getTarget(evt){return evt.target?evt.target:evt.srcElement;}",'function getRelatedTarget(evt){if(evt.relatedTarget){return evt.relatedTarget;}else if(evt.srcElement){switch(evt.type){case"mouseover":return evt.fromElement;case"mouseout":return evt.toElement;default:return evt.srcElement;}}}',"function cancelKeyEvent(evt){evt.returnValue=false;stopPropagation(evt);}",'function evalCommandLine(){var expr=$("command").value;evalCommand(expr);$("command").value="";}',"function evalLastCommand(){if(lastCommand!=null){evalCommand(lastCommand);}}",'var lastCommand=null;var commandHistory=[];var currentCommandIndex=0;function evalCommand(expr){if(appender){appender.evalCommandAndAppend(expr);}else{var prefix=">>> "+expr+"\\r\\n";try{log("INFO",prefix+eval(expr));}catch(ex){log("ERROR",prefix+"Error: "+getErrorMessage(ex));}}',"if(expr!=commandHistory[commandHistory.length-1]){commandHistory.push(expr);if(appender){appender.storeCommandHistory(commandHistory);}}","currentCommandIndex=(expr==commandHistory[currentCommandIndex])?currentCommandIndex+1:commandHistory.length;lastCommand=expr;}","//]]>","<\/script>",'<style type="text/css">',"body{background-color:white;color:black;padding:0;margin:0;font-family:tahoma,verdana,arial,helvetica,sans-serif;overflow:hidden}div#switchesContainer input{margin-bottom:0}div.toolbar{border-top:solid #ffffff 1px;border-bottom:solid #aca899 1px;background-color:#f1efe7;padding:3px 5px;font-size:68.75%}div.toolbar,div#search input{font-family:tahoma,verdana,arial,helvetica,sans-serif}div.toolbar input.button{padding:0 5px;font-size:100%}div.toolbar input.hidden{display:none}div#switches input#clearButton{margin-left:20px}div#levels label{font-weight:bold}div#levels label,div#options label{margin-right:5px}div#levels label#wrapLabel{font-weight:normal}div#search label{margin-right:10px}div#search label.searchboxlabel{margin-right:0}div#search input{font-size:100%}div#search input.validregex{color:green}div#search input.invalidregex{color:red}div#search input.nomatches{color:white;background-color:#ff6666}div#search input.nomatches{color:white;background-color:#ff6666}div#searchNav{display:none}div#commandLine{display:none}div#commandLine input#command{font-size:100%;font-family:Courier New,Courier}div#commandLine input#evaluateButton{}*.greyedout{color:gray !important;border-color:gray !important}*.greyedout *.alwaysenabled{color:black}*.unselectable{-khtml-user-select:none;-moz-user-select:none;user-select:none}div#log{font-family:Courier New,Courier;font-size:75%;width:100%;overflow:auto;clear:both;position:relative}div.group{border-color:#cccccc;border-style:solid;border-width:1px 0 1px 1px;overflow:visible}div.oldIe div.group,div.oldIe div.group *,div.oldIe *.logentry{height:1%}div.group div.groupheading span.expander{border:solid black 1px;font-family:Courier New,Courier;font-size:0.833em;background-color:#eeeeee;position:relative;top:-1px;color:black;padding:0 2px;cursor:pointer;cursor:hand;height:1%}div.group div.groupcontent{margin-left:10px;padding-bottom:2px;overflow:visible}div.group div.expanded{display:block}div.group div.collapsed{display:none}*.logentry{overflow:visible;display:none;white-space:pre}span.pre{white-space:pre}pre.unwrapped{display:inline !important}pre.unwrapped pre.pre,div.wrapped pre.pre{display:inline}div.wrapped pre.pre{white-space:normal}div.wrapped{display:none}body.searching *.logentry span.currentmatch{color:white !important;background-color:green !important}body.searching div.searchhighlight *.logentry span.searchterm{color:black;background-color:yellow}div.wrap *.logentry{white-space:normal !important;border-width:0 0 1px 0;border-color:#dddddd;border-style:dotted}div.wrap #log_wrapped,#log_unwrapped{display:block}div.wrap #log_unwrapped,#log_wrapped{display:none}div.wrap *.logentry span.pre{overflow:visible;white-space:normal}div.wrap *.logentry pre.unwrapped{display:none}div.wrap *.logentry span.wrapped{display:inline}div.searchfilter *.searchnonmatch{display:none !important}div#log *.TRACE,label#label_TRACE{color:#666666}div#log *.DEBUG,label#label_DEBUG{color:green}div#log *.INFO,label#label_INFO{color:#000099}div#log *.WARN,label#label_WARN{color:#999900}div#log *.ERROR,label#label_ERROR{color:red}div#log *.FATAL,label#label_FATAL{color:#660066}div.TRACE#log *.TRACE,div.DEBUG#log *.DEBUG,div.INFO#log *.INFO,div.WARN#log *.WARN,div.ERROR#log *.ERROR,div.FATAL#log *.FATAL{display:block}div#log div.separator{background-color:#cccccc;margin:5px 0;line-height:1px}","</style>","</head>",'<body id="body">','<div id="switchesContainer">','<div id="switches">','<div id="levels" class="toolbar">',"Filters:",'<input type="checkbox" id="switch_TRACE" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide trace messages" /><label for="switch_TRACE" id="label_TRACE">trace</label>','<input type="checkbox" id="switch_DEBUG" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide debug messages" /><label for="switch_DEBUG" id="label_DEBUG">debug</label>','<input type="checkbox" id="switch_INFO" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide info messages" /><label for="switch_INFO" id="label_INFO">info</label>','<input type="checkbox" id="switch_WARN" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide warn messages" /><label for="switch_WARN" id="label_WARN">warn</label>','<input type="checkbox" id="switch_ERROR" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide error messages" /><label for="switch_ERROR" id="label_ERROR">error</label>','<input type="checkbox" id="switch_FATAL" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide fatal messages" /><label for="switch_FATAL" id="label_FATAL">fatal</label>','<input type="checkbox" id="switch_ALL" onclick="toggleAllLevels(); applyFilters()" checked="checked" title="Show/hide all messages" /><label for="switch_ALL" id="label_ALL">all</label>',"</div>",'<div id="search" class="toolbar">','<label for="searchBox" class="searchboxlabel">Search:</label> <input type="text" id="searchBox" onclick="toggleSearchEnabled(true)" onkeyup="scheduleSearch()" size="20" />','<input type="button" id="searchReset" disabled="disabled" value="Reset" onclick="clearSearch()" class="button" title="Reset the search" />','<input type="checkbox" id="searchRegex" onclick="doSearch()" title="If checked, search is treated as a regular expression" /><label for="searchRegex">Regex</label>','<input type="checkbox" id="searchCaseSensitive" onclick="doSearch()" title="If checked, search is case sensitive" /><label for="searchCaseSensitive">Match case</label>','<input type="checkbox" id="searchDisable" onclick="toggleSearchEnabled()" title="Enable/disable search" /><label for="searchDisable" class="alwaysenabled">Disable</label>','<div id="searchNav">','<input type="button" id="searchNext" disabled="disabled" value="Next" onclick="searchNext()" class="button" title="Go to the next matching log entry" />','<input type="button" id="searchPrevious" disabled="disabled" value="Previous" onclick="searchPrevious()" class="button" title="Go to the previous matching log entry" />','<input type="checkbox" id="searchFilter" onclick="toggleSearchFilter()" title="If checked, non-matching log entries are filtered out" /><label for="searchFilter">Filter</label>','<input type="checkbox" id="searchHighlight" onclick="toggleSearchHighlight()" title="Highlight matched search terms" /><label for="searchHighlight" class="alwaysenabled">Highlight all</label>',"</div>","</div>",'<div id="options" class="toolbar">',"Options:",'<input type="checkbox" id="enableLogging" onclick="toggleLoggingEnabled()" checked="checked" title="Enable/disable logging" /><label for="enableLogging" id="enableLoggingLabel">Log</label>','<input type="checkbox" id="wrap" onclick="toggleWrap()" title="Enable / disable word wrap" /><label for="wrap" id="wrapLabel">Wrap</label>','<input type="checkbox" id="newestAtTop" onclick="toggleNewestAtTop()" title="If checked, causes newest messages to appear at the top" /><label for="newestAtTop" id="newestAtTopLabel">Newest at the top</label>','<input type="checkbox" id="scrollToLatest" onclick="toggleScrollToLatest()" checked="checked" title="If checked, window automatically scrolls to a new message when it is added" /><label for="scrollToLatest" id="scrollToLatestLabel">Scroll to latest</label>','<input type="button" id="clearButton" value="Clear" onclick="clearLog()" class="button" title="Clear all log messages"  />','<input type="button" id="hideButton" value="Hide" onclick="hide()" class="hidden button" title="Hide the console" />','<input type="button" id="closeButton" value="Close" onclick="closeWindow()" class="hidden button" title="Close the window" />',"</div>","</div>","</div>",'<div id="log" class="TRACE DEBUG INFO WARN ERROR FATAL"></div>','<div id="commandLine" class="toolbar">','<div id="commandLineContainer">','<input type="text" id="command" title="Enter a JavaScript command here and hit return or press \'Evaluate\'" />','<input type="button" id="evaluateButton" value="Evaluate" class="button" title="Evaluate the command" onclick="evalCommandLine()" />',"</div>","</div>","</body>","</html>",""]};var defaultCommandLineFunctions=[];ConsoleAppender=function(){};var consoleAppenderIdCounter=1;ConsoleAppender.prototype=new Appender();ConsoleAppender.prototype.create=function(inPage,container,lazyInit,initiallyMinimized,useDocumentWrite,width,height,focusConsoleWindow){var appender=this;var initialized=false;var consoleWindowCreated=false;var consoleWindowLoaded=false;var consoleClosed=false;var queuedLoggingEvents=[];var isSupported=true;var consoleAppenderId=consoleAppenderIdCounter++;initiallyMinimized=extractBooleanFromParam(initiallyMinimized,this.defaults.initiallyMinimized);lazyInit=extractBooleanFromParam(lazyInit,this.defaults.lazyInit);useDocumentWrite=extractBooleanFromParam(useDocumentWrite,this.defaults.useDocumentWrite);var newestMessageAtTop=this.defaults.newestMessageAtTop;var scrollToLatestMessage=this.defaults.scrollToLatestMessage;width=width?width:this.defaults.width;height=height?height:this.defaults.height;var maxMessages=this.defaults.maxMessages;var showCommandLine=this.defaults.showCommandLine;var commandLineObjectExpansionDepth=this.defaults.commandLineObjectExpansionDepth;var showHideButton=this.defaults.showHideButton;var showCloseButton=this.defaults.showCloseButton;var showLogEntryDeleteButtons=this.defaults.showLogEntryDeleteButtons;this.setLayout(this.defaults.layout);var init,createWindow,safeToAppend,getConsoleWindow,open;var appenderName=inPage?"InPageAppender":"PopUpAppender";var checkCanConfigure=function(configOptionName){if(consoleWindowCreated){handleError(appenderName+": configuration option '"+configOptionName+"' may not be set after the appender has been initialized");return false}return true};var consoleWindowExists=function(){return(consoleWindowLoaded&&isSupported&&!consoleClosed)};this.isNewestMessageAtTop=function(){return newestMessageAtTop};this.setNewestMessageAtTop=function(newestMessageAtTopParam){newestMessageAtTop=bool(newestMessageAtTopParam);if(consoleWindowExists()){getConsoleWindow().setNewestAtTop(newestMessageAtTop)}};this.isScrollToLatestMessage=function(){return scrollToLatestMessage};this.setScrollToLatestMessage=function(scrollToLatestMessageParam){scrollToLatestMessage=bool(scrollToLatestMessageParam);if(consoleWindowExists()){getConsoleWindow().setScrollToLatest(scrollToLatestMessage)}};this.getWidth=function(){return width};this.setWidth=function(widthParam){if(checkCanConfigure("width")){width=extractStringFromParam(widthParam,width)}};this.getHeight=function(){return height};this.setHeight=function(heightParam){if(checkCanConfigure("height")){height=extractStringFromParam(heightParam,height)}};this.getMaxMessages=function(){return maxMessages};this.setMaxMessages=function(maxMessagesParam){maxMessages=extractIntFromParam(maxMessagesParam,maxMessages);if(consoleWindowExists()){getConsoleWindow().setMaxMessages(maxMessages)}};this.isShowCommandLine=function(){return showCommandLine};this.setShowCommandLine=function(showCommandLineParam){showCommandLine=bool(showCommandLineParam);if(consoleWindowExists()){getConsoleWindow().setShowCommandLine(showCommandLine)}};this.isShowHideButton=function(){return showHideButton};this.setShowHideButton=function(showHideButtonParam){showHideButton=bool(showHideButtonParam);if(consoleWindowExists()){getConsoleWindow().setShowHideButton(showHideButton)}};this.isShowCloseButton=function(){return showCloseButton};this.setShowCloseButton=function(showCloseButtonParam){showCloseButton=bool(showCloseButtonParam);if(consoleWindowExists()){getConsoleWindow().setShowCloseButton(showCloseButton)}};this.getCommandLineObjectExpansionDepth=function(){return commandLineObjectExpansionDepth};this.setCommandLineObjectExpansionDepth=function(commandLineObjectExpansionDepthParam){commandLineObjectExpansionDepth=extractIntFromParam(commandLineObjectExpansionDepthParam,commandLineObjectExpansionDepth)};var minimized=initiallyMinimized;this.isInitiallyMinimized=function(){return initiallyMinimized};this.setInitiallyMinimized=function(initiallyMinimizedParam){if(checkCanConfigure("initiallyMinimized")){initiallyMinimized=bool(initiallyMinimizedParam);minimized=initiallyMinimized}};this.isUseDocumentWrite=function(){return useDocumentWrite};this.setUseDocumentWrite=function(useDocumentWriteParam){if(checkCanConfigure("useDocumentWrite")){useDocumentWrite=bool(useDocumentWriteParam)}};function QueuedLoggingEvent(loggingEvent,formattedMessage){this.loggingEvent=loggingEvent;this.levelName=loggingEvent.level.name;this.formattedMessage=formattedMessage}QueuedLoggingEvent.prototype.append=function(){getConsoleWindow().log(this.levelName,this.formattedMessage)};function QueuedGroup(name,initiallyExpanded){this.name=name;this.initiallyExpanded=initiallyExpanded}QueuedGroup.prototype.append=function(){getConsoleWindow().group(this.name,this.initiallyExpanded)};function QueuedGroupEnd(){}QueuedGroupEnd.prototype.append=function(){getConsoleWindow().groupEnd()};var checkAndAppend=function(){safeToAppend();if(!initialized){init()}else{if(consoleClosed&&reopenWhenClosed){createWindow()}}if(safeToAppend()){appendQueuedLoggingEvents()}};this.append=function(loggingEvent){if(isSupported){var formattedMessage=appender.getLayout().format(loggingEvent);if(this.getLayout().ignoresThrowable()){formattedMessage+=loggingEvent.getThrowableStrRep()}queuedLoggingEvents.push(new QueuedLoggingEvent(loggingEvent,formattedMessage));checkAndAppend()}};this.group=function(name,initiallyExpanded){if(isSupported){queuedLoggingEvents.push(new QueuedGroup(name,initiallyExpanded));checkAndAppend()}};this.groupEnd=function(){if(isSupported){queuedLoggingEvents.push(new QueuedGroupEnd());checkAndAppend()}};var appendQueuedLoggingEvents=function(){var currentLoggingEvent;while(queuedLoggingEvents.length>0){queuedLoggingEvents.shift().append()}if(focusConsoleWindow){getConsoleWindow().focus()}};this.setAddedToLogger=function(logger){this.loggers.push(logger);if(enabled&&!lazyInit){init()}};this.clear=function(){if(consoleWindowExists()){getConsoleWindow().clearLog()}queuedLoggingEvents.length=0};this.focus=function(){if(consoleWindowExists()){getConsoleWindow().focus()}};this.focusCommandLine=function(){if(consoleWindowExists()){getConsoleWindow().focusCommandLine()}};this.focusSearch=function(){if(consoleWindowExists()){getConsoleWindow().focusSearch()}};var commandWindow=window;this.getCommandWindow=function(){return commandWindow};this.setCommandWindow=function(commandWindowParam){commandWindow=commandWindowParam};this.executeLastCommand=function(){if(consoleWindowExists()){getConsoleWindow().evalLastCommand()}};var commandLayout=new PatternLayout("%m");this.getCommandLayout=function(){return commandLayout};this.setCommandLayout=function(commandLayoutParam){commandLayout=commandLayoutParam};this.evalCommandAndAppend=function(expr){var commandReturnValue={appendResult:true,isError:false};var commandOutput="";try{var result,i;if(!commandWindow.eval&&commandWindow.execScript){commandWindow.execScript("null")}var commandLineFunctionsHash={};for(i=0,len=commandLineFunctions.length;i<len;i++){commandLineFunctionsHash[commandLineFunctions[i][0]]=commandLineFunctions[i][1]}var objectsToRestore=[];var addObjectToRestore=function(name){objectsToRestore.push([name,commandWindow[name]])};addObjectToRestore("appender");commandWindow.appender=appender;addObjectToRestore("commandReturnValue");commandWindow.commandReturnValue=commandReturnValue;addObjectToRestore("commandLineFunctionsHash");commandWindow.commandLineFunctionsHash=commandLineFunctionsHash;var addFunctionToWindow=function(name){addObjectToRestore(name);commandWindow[name]=function(){return this.commandLineFunctionsHash[name](appender,arguments,commandReturnValue)}};for(i=0,len=commandLineFunctions.length;i<len;i++){addFunctionToWindow(commandLineFunctions[i][0])}if(commandWindow===window&&commandWindow.execScript){addObjectToRestore("evalExpr");addObjectToRestore("result");window.evalExpr=expr;commandWindow.execScript("window.result=eval(window.evalExpr);");result=window.result}else{result=commandWindow.eval(expr)}commandOutput=isUndefined(result)?result:formatObjectExpansion(result,commandLineObjectExpansionDepth);for(i=0,len=objectsToRestore.length;i<len;i++){commandWindow[objectsToRestore[i][0]]=objectsToRestore[i][1]}}catch(ex){commandOutput="Error evaluating command: "+getExceptionStringRep(ex);commandReturnValue.isError=true}if(commandReturnValue.appendResult){var message=">>> "+expr;if(!isUndefined(commandOutput)){message+=newLine+commandOutput}var level=commandReturnValue.isError?Level.ERROR:Level.INFO;var loggingEvent=new LoggingEvent(null,new Date(),level,[message],null);var mainLayout=this.getLayout();this.setLayout(commandLayout);this.append(loggingEvent);this.setLayout(mainLayout)}};var commandLineFunctions=defaultCommandLineFunctions.concat([]);this.addCommandLineFunction=function(functionName,commandLineFunction){commandLineFunctions.push([functionName,commandLineFunction])};var commandHistoryCookieName="log4javascriptCommandHistory";this.storeCommandHistory=function(commandHistory){setCookie(commandHistoryCookieName,commandHistory.join(","))};var writeHtml=function(doc){var lines=getConsoleHtmlLines();doc.open();for(var i=0,len=lines.length;i<len;i++){doc.writeln(lines[i])}doc.close()};this.setEventTypes(["load","unload"]);var consoleWindowLoadHandler=function(){var win=getConsoleWindow();win.setAppender(appender);win.setNewestAtTop(newestMessageAtTop);win.setScrollToLatest(scrollToLatestMessage);win.setMaxMessages(maxMessages);win.setShowCommandLine(showCommandLine);win.setShowHideButton(showHideButton);win.setShowCloseButton(showCloseButton);win.setMainWindow(window);var storedValue=getCookie(commandHistoryCookieName);if(storedValue){win.commandHistory=storedValue.split(",");win.currentCommandIndex=win.commandHistory.length}appender.dispatchEvent("load",{win:win})};this.unload=function(){logLog.debug("unload "+this+", caller: "+this.unload.caller);if(!consoleClosed){logLog.debug("really doing unload "+this);consoleClosed=true;consoleWindowLoaded=false;consoleWindowCreated=false;appender.dispatchEvent("unload",{})}};var pollConsoleWindow=function(windowTest,interval,successCallback,errorMessage){function doPoll(){try{if(consoleClosed){clearInterval(poll)}if(windowTest(getConsoleWindow())){clearInterval(poll);successCallback()}}catch(ex){clearInterval(poll);isSupported=false;handleError(errorMessage,ex)}}var poll=setInterval(doPoll,interval)};var getConsoleUrl=function(){var documentDomainSet=(document.domain!=location.hostname);return useDocumentWrite?"":getBaseUrl()+"console.html"+(documentDomainSet?"?log4javascript_domain="+escape(document.domain):"")};if(inPage){var containerElement=null;var cssProperties=[];this.addCssProperty=function(name,value){if(checkCanConfigure("cssProperties")){cssProperties.push([name,value])}};var windowCreationStarted=false;var iframeContainerDiv;var iframeId=uniqueId+"_InPageAppender_"+consoleAppenderId;this.hide=function(){if(initialized&&consoleWindowCreated){if(consoleWindowExists()){getConsoleWindow().$("command").blur()}iframeContainerDiv.style.display="none";minimized=true}};this.show=function(){if(initialized){if(consoleWindowCreated){iframeContainerDiv.style.display="block";this.setShowCommandLine(showCommandLine);minimized=false}else{if(!windowCreationStarted){createWindow(true)}}}};this.isVisible=function(){return !minimized&&!consoleClosed};this.close=function(fromButton){if(!consoleClosed&&(!fromButton||confirm("This will permanently remove the console from the page. No more messages will be logged. Do you wish to continue?"))){iframeContainerDiv.parentNode.removeChild(iframeContainerDiv);this.unload()}};open=function(){var initErrorMessage="InPageAppender.open: unable to create console iframe";function finalInit(){try{if(!initiallyMinimized){appender.show()}consoleWindowLoadHandler();consoleWindowLoaded=true;appendQueuedLoggingEvents()}catch(ex){isSupported=false;handleError(initErrorMessage,ex)}}function writeToDocument(){try{var windowTest=function(win){return isLoaded(win)};if(useDocumentWrite){writeHtml(getConsoleWindow().document)}if(windowTest(getConsoleWindow())){finalInit()}else{pollConsoleWindow(windowTest,100,finalInit,initErrorMessage)}}catch(ex){isSupported=false;handleError(initErrorMessage,ex)}}minimized=false;iframeContainerDiv=containerElement.appendChild(document.createElement("div"));iframeContainerDiv.style.width=width;iframeContainerDiv.style.height=height;iframeContainerDiv.style.border="solid gray 1px";for(var i=0,len=cssProperties.length;i<len;i++){iframeContainerDiv.style[cssProperties[i][0]]=cssProperties[i][1]}var iframeSrc=useDocumentWrite?"":" src='"+getConsoleUrl()+"'";iframeContainerDiv.innerHTML="<iframe id='"+iframeId+"' name='"+iframeId+"' width='100%' height='100%' frameborder='0'"+iframeSrc+"scrolling='no'></iframe>";consoleClosed=false;var iframeDocumentExistsTest=function(win){try{return bool(win)&&bool(win.document)}catch(ex){return false}};if(iframeDocumentExistsTest(getConsoleWindow())){writeToDocument()}else{pollConsoleWindow(iframeDocumentExistsTest,100,writeToDocument,initErrorMessage)}consoleWindowCreated=true};createWindow=function(show){if(show||!initiallyMinimized){var pageLoadHandler=function(){if(!container){containerElement=document.createElement("div");containerElement.style.position="fixed";containerElement.style.left="0";containerElement.style.right="0";containerElement.style.bottom="0";document.body.appendChild(containerElement);appender.addCssProperty("borderWidth","1px 0 0 0");appender.addCssProperty("zIndex",1000000);open()}else{try{var el=document.getElementById(container);if(el.nodeType==1){containerElement=el}open()}catch(ex){handleError("InPageAppender.init: invalid container element '"+container+"' supplied",ex)}}};if(pageLoaded&&container&&container.appendChild){containerElement=container;open()}else{if(pageLoaded){pageLoadHandler()}else{log4javascript.addEventListener("load",pageLoadHandler)}}windowCreationStarted=true}};init=function(){createWindow();initialized=true};getConsoleWindow=function(){var iframe=window.frames[iframeId];if(iframe){return iframe}};safeToAppend=function(){if(isSupported&&!consoleClosed){if(consoleWindowCreated&&!consoleWindowLoaded&&getConsoleWindow()&&isLoaded(getConsoleWindow())){consoleWindowLoaded=true}return consoleWindowLoaded}return false}}else{var useOldPopUp=appender.defaults.useOldPopUp;var complainAboutPopUpBlocking=appender.defaults.complainAboutPopUpBlocking;var reopenWhenClosed=this.defaults.reopenWhenClosed;this.isUseOldPopUp=function(){return useOldPopUp};this.setUseOldPopUp=function(useOldPopUpParam){if(checkCanConfigure("useOldPopUp")){useOldPopUp=bool(useOldPopUpParam)}};this.isComplainAboutPopUpBlocking=function(){return complainAboutPopUpBlocking};this.setComplainAboutPopUpBlocking=function(complainAboutPopUpBlockingParam){if(checkCanConfigure("complainAboutPopUpBlocking")){complainAboutPopUpBlocking=bool(complainAboutPopUpBlockingParam)}};this.isFocusPopUp=function(){return focusConsoleWindow};this.setFocusPopUp=function(focusPopUpParam){focusConsoleWindow=bool(focusPopUpParam)};this.isReopenWhenClosed=function(){return reopenWhenClosed};this.setReopenWhenClosed=function(reopenWhenClosedParam){reopenWhenClosed=bool(reopenWhenClosedParam)};this.close=function(){logLog.debug("close "+this);try{popUp.close();this.unload()}catch(ex){}};this.hide=function(){logLog.debug("hide "+this);if(consoleWindowExists()){this.close()}};this.show=function(){logLog.debug("show "+this);if(!consoleWindowCreated){open()}};this.isVisible=function(){return safeToAppend()};var popUp;open=function(){var windowProperties="width="+width+",height="+height+",status,resizable";var windowName="PopUp_"+location.host.replace(/[^a-z0-9]/gi,"_")+"_"+consoleAppenderId;if(!useOldPopUp||!useDocumentWrite){windowName=windowName+"_"+uniqueId}var checkPopUpClosed=function(win){if(consoleClosed){return true}else{try{return bool(win)&&win.closed}catch(ex){}}return false};var popUpClosedCallback=function(){if(!consoleClosed){appender.unload()}};function finalInit(){getConsoleWindow().setCloseIfOpenerCloses(!useOldPopUp||!useDocumentWrite);consoleWindowLoadHandler();consoleWindowLoaded=true;appendQueuedLoggingEvents();pollConsoleWindow(checkPopUpClosed,500,popUpClosedCallback,"PopUpAppender.checkPopUpClosed: error checking pop-up window")}try{popUp=window.open(getConsoleUrl(),windowName,windowProperties);consoleClosed=false;consoleWindowCreated=true;if(popUp){if(useDocumentWrite&&useOldPopUp&&isLoaded(popUp)){popUp.mainPageReloaded();finalInit()}else{if(useDocumentWrite){writeHtml(popUp.document)}var popUpLoadedTest=function(win){return bool(win)&&isLoaded(win)};if(isLoaded(popUp)){finalInit()}else{pollConsoleWindow(popUpLoadedTest,100,finalInit,"PopUpAppender.init: unable to create console window")}}}else{isSupported=false;logLog.warn("PopUpAppender.init: pop-ups blocked, please unblock to use PopUpAppender");if(complainAboutPopUpBlocking){handleError("log4javascript: pop-up windows appear to be blocked. Please unblock them to use pop-up logging.")}}}catch(ex){handleError("PopUpAppender.init: error creating pop-up",ex)}};createWindow=function(){if(!initiallyMinimized){open()}};init=function(){createWindow();initialized=true};getConsoleWindow=function(){return popUp};safeToAppend=function(){if(isSupported&&!isUndefined(popUp)&&!consoleClosed){if(popUp.closed||(consoleWindowLoaded&&isUndefined(popUp.closed))){appender.unload();logLog.debug("PopUpAppender: pop-up closed");return false}if(!consoleWindowLoaded&&isLoaded(popUp)){consoleWindowLoaded=true}}return isSupported&&consoleWindowLoaded&&!consoleClosed}}this.getConsoleWindow=getConsoleWindow};ConsoleAppender.addGlobalCommandLineFunction=function(functionName,commandLineFunction){defaultCommandLineFunctions.push([functionName,commandLineFunction])};function PopUpAppender(lazyInit,initiallyMinimized,useDocumentWrite,width,height){this.create(false,null,lazyInit,initiallyMinimized,useDocumentWrite,width,height,this.defaults.focusPopUp)}PopUpAppender.prototype=new ConsoleAppender();PopUpAppender.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:false,focusPopUp:false,lazyInit:true,useOldPopUp:true,complainAboutPopUpBlocking:true,newestMessageAtTop:false,scrollToLatestMessage:true,width:"600",height:"400",reopenWhenClosed:false,maxMessages:null,showCommandLine:true,commandLineObjectExpansionDepth:1,showHideButton:false,showCloseButton:true,showLogEntryDeleteButtons:true,useDocumentWrite:true};PopUpAppender.prototype.toString=function(){return"PopUpAppender"};log4javascript.PopUpAppender=PopUpAppender;function InPageAppender(container,lazyInit,initiallyMinimized,useDocumentWrite,width,height){this.create(true,container,lazyInit,initiallyMinimized,useDocumentWrite,width,height,false)}InPageAppender.prototype=new ConsoleAppender();InPageAppender.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:false,lazyInit:true,newestMessageAtTop:false,scrollToLatestMessage:true,width:"100%",height:"220px",maxMessages:null,showCommandLine:true,commandLineObjectExpansionDepth:1,showHideButton:false,showCloseButton:false,showLogEntryDeleteButtons:true,useDocumentWrite:true};InPageAppender.prototype.toString=function(){return"InPageAppender"};log4javascript.InPageAppender=InPageAppender;log4javascript.InlineAppender=InPageAppender})();function padWithSpaces(str,len){if(str.length<len){var spaces=[];var numberOfSpaces=Math.max(0,len-str.length);for(var i=0;i<numberOfSpaces;i++){spaces[i]=" "}str+=spaces.join("")}return str}(function(){function dir(obj){var maxLen=0;for(var p in obj){maxLen=Math.max(toStr(p).length,maxLen)}var propList=[];for(p in obj){var propNameStr="  "+padWithSpaces(toStr(p),maxLen+2);var propVal;try{propVal=splitIntoLines(toStr(obj[p])).join(padWithSpaces(newLine,maxLen+6))}catch(ex){propVal="[Error obtaining property. Details: "+getExceptionMessage(ex)+"]"}propList.push(propNameStr+propVal)}return propList.join(newLine)}var nodeTypes={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var preFormattedElements=["script","pre"];var emptyElements=["br","img","hr","param","link","area","input","col","base","meta"];var indentationUnit="  ";function getXhtml(rootNode,includeRootNode,indentation,startNewLine,preformatted){includeRootNode=(typeof includeRootNode=="undefined")?true:(includeRootNode?true:false);if(typeof indentation!="string"){indentation=""}startNewLine=startNewLine?true:false;preformatted=preformatted?true:false;var xhtml;function isWhitespace(node){return((node.nodeType==nodeTypes.TEXT_NODE)&&/^[ \t\r\n]*$/.test(node.nodeValue))}function fixAttributeValue(attrValue){return attrValue.toString().replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/\"/g,"&quot;")}function getStyleAttributeValue(el){var stylePairs=el.style.cssText.split(";");var styleValue="";var isFirst=true;for(var j=0,len=stylePairs.length;j<len;j++){var nameValueBits=stylePairs[j].split(":");var props=[];if(!/^\s*$/.test(nameValueBits[0])){props.push(trim(nameValueBits[0]).toLowerCase()+":"+trim(nameValueBits[1]))}styleValue=props.join(";")}return styleValue}function getNamespace(el){if(el.prefix){return el.prefix}else{if(el.outerHTML){var regex=new RegExp("<([^:]+):"+el.tagName+"[^>]*>","i");if(regex.test(el.outerHTML)){return RegExp.$1.toLowerCase()}}}return""}var lt="<";var gt=">";if(includeRootNode&&rootNode.nodeType!=nodeTypes.DOCUMENT_FRAGMENT_NODE){switch(rootNode.nodeType){case nodeTypes.ELEMENT_NODE:var tagName=rootNode.tagName.toLowerCase();xhtml=startNewLine?newLine+indentation:"";xhtml+=lt;var prefix=getNamespace(rootNode);var hasPrefix=prefix?true:false;if(hasPrefix){xhtml+=prefix+":"}xhtml+=tagName;for(i=0,len=rootNode.attributes.length;i<len;i++){var currentAttr=rootNode.attributes[i];if(!currentAttr.specified||currentAttr.nodeValue===null||currentAttr.nodeName.toLowerCase()==="style"||typeof currentAttr.nodeValue!=="string"||currentAttr.nodeName.indexOf("_moz")===0){continue}xhtml+=" "+currentAttr.nodeName.toLowerCase()+'="';xhtml+=fixAttributeValue(currentAttr.nodeValue);xhtml+='"'}if(rootNode.style.cssText){var styleValue=getStyleAttributeValue(rootNode);if(styleValue!==""){xhtml+=' style="'+getStyleAttributeValue(rootNode)+'"'}}if(array_contains(emptyElements,tagName)||(hasPrefix&&!rootNode.hasChildNodes())){xhtml+="/"+gt}else{xhtml+=gt;var childStartNewLine=!(rootNode.childNodes.length===1&&rootNode.childNodes[0].nodeType===nodeTypes.TEXT_NODE);var childPreformatted=array_contains(preFormattedElements,tagName);for(var i=0,len=rootNode.childNodes.length;i<len;i++){xhtml+=getXhtml(rootNode.childNodes[i],true,indentation+indentationUnit,childStartNewLine,childPreformatted)}var endTag=lt+"/"+tagName+gt;xhtml+=childStartNewLine?newLine+indentation+endTag:endTag}return xhtml;case nodeTypes.TEXT_NODE:if(isWhitespace(rootNode)){xhtml=""}else{if(preformatted){xhtml=rootNode.nodeValue}else{var lines=splitIntoLines(trim(rootNode.nodeValue));var trimmedLines=[];for(var i=0,len=lines.length;i<len;i++){trimmedLines[i]=trim(lines[i])}xhtml=trimmedLines.join(newLine+indentation)}if(startNewLine){xhtml=newLine+indentation+xhtml}}return xhtml;case nodeTypes.CDATA_SECTION_NODE:return"<![CDATA["+rootNode.nodeValue+"]]>"+newLine;case nodeTypes.DOCUMENT_NODE:xhtml="";for(var i=0,len=rootNode.childNodes.length;i<len;i++){xhtml+=getXhtml(rootNode.childNodes[i],true,indentation)}return xhtml;default:return""}}else{xhtml="";for(var i=0,len=rootNode.childNodes.length;i<len;i++){xhtml+=getXhtml(rootNode.childNodes[i],true,indentation+indentationUnit)}return xhtml}}var layouts={};function createCommandLineFunctions(appender){ConsoleAppender.addGlobalCommandLineFunction("$",function(appender,args,returnValue){return document.getElementById(args[0])});ConsoleAppender.addGlobalCommandLineFunction("dir",function(appender,args,returnValue){var lines=[];for(var i=0,len=args.length;i<len;i++){lines[i]=dir(args[i])}return lines.join(newLine+newLine)});ConsoleAppender.addGlobalCommandLineFunction("dirxml",function(appender,args,returnValue){var lines=[];for(var i=0,len=args.length;i<len;i++){var win=appender.getCommandWindow();lines[i]=getXhtml(args[i])}return lines.join(newLine+newLine)});ConsoleAppender.addGlobalCommandLineFunction("cd",function(appender,args,returnValue){var win,message;if(args.length===0||args[0]===""){win=window;message="Command line set to run in main window"}else{if(args[0].window==args[0]){win=args[0];message="Command line set to run in frame '"+args[0].name+"'"}else{win=window.frames[args[0]];if(win){message="Command line set to run in frame '"+args[0]+"'"}else{returnValue.isError=true;message="Frame '"+args[0]+"' does not exist";win=appender.getCommandWindow()}}}appender.setCommandWindow(win);return message});ConsoleAppender.addGlobalCommandLineFunction("clear",function(appender,args,returnValue){returnValue.appendResult=false;appender.clear()});ConsoleAppender.addGlobalCommandLineFunction("keys",function(appender,args,returnValue){var keys=[];for(var k in args[0]){keys.push(k)}return keys});ConsoleAppender.addGlobalCommandLineFunction("values",function(appender,args,returnValue){var values=[];for(var k in args[0]){try{values.push(args[0][k])}catch(ex){logLog.warn("values(): Unable to obtain value for key "+k+". Details: "+getExceptionMessage(ex))}}return values});ConsoleAppender.addGlobalCommandLineFunction("expansionDepth",function(appender,args,returnValue){var expansionDepth=parseInt(args[0],10);if(isNaN(expansionDepth)||expansionDepth<0){returnValue.isError=true;return""+args[0]+" is not a valid expansion depth"}else{appender.setCommandLineObjectExpansionDepth(expansionDepth);return"Object expansion depth set to "+expansionDepth}})}function init(){createCommandLineFunctions();initialized=true}init()})();function addWindowLoadListener(listener){var oldOnload=window.onload;if(typeof window.onload!="function"){window.onload=listener}else{window.onload=function(evt){if(oldOnload){oldOnload(evt)}listener(evt)}}}addWindowLoadListener(function(){pageLoaded=true;log4javascript.dispatchEvent("load",{})});window.log4javascript=log4javascript})();var Ozone=Ozone||{};Ozone.version=Ozone.version||{};Ozone.version={owfversion:"7-GA",mpversion:"2.3",preference:"-v1",eventing:"-v1",widgetLauncher:"-v1",state:"-v1",dragAndDrop:"-v1",widgetChrome:"-v1",logging:"-v1",language:"-v1"};var Ozone=Ozone||{};Ozone.util=Ozone.util||{};Ozone.util.formField=Ozone.util.formField||{};Ozone.config=Ozone.config||{};Ozone.util.isUrlLocal=function(c){var a=Ozone.util.contextPath();if(a!=""&&a!=null){a+="/"}var d=new RegExp("^(https?:)//([^/:]+):?(.*)"+a);var e=c.match(d);if(!e){if(c.match(new RegExp("^https?://"))){return false}else{return true}}var b=window.location.port;return window.location.protocol===e[1]&&window.location.hostname===e[2]&&b===e[3]};Ozone.util.parseJson=function(b){if(typeof(b)==="string"){owfdojox.secure.capability.validate(b,[],{});var a=owfdojo.fromJson(b);return a}else{throw"Ozone.util.parseJson expected a string, but didn't get one"}};Ozone.util.HTMLEncodeReservedJS=function(a){return a.replace(/"/g,"&quot;").replace(/'/g,"&#39;")};Ozone.util.HTMLEncode=function(a){return !a?a:String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};Ozone.util.parseWindowNameData=function(){var a=null;return function(){if(a){return a}try{a=Ozone.util.parseJson(window.name);return a}catch(b){return null}}}();Ozone.util.contextPath=(function(){var a=Ozone.util.parseWindowNameData(),b=Ozone.config.webContextPath;if(a&&a.webContextPath){b=Ozone.config.webContextPath=a.webContextPath}return function(){return b||""}})();Ozone.util.validUrlContext=function(d,g){var h=(d.indexOf("../")==0)?true:false;var b=(d.indexOf("/")==0)?true:false;var a=(b||h||(d.indexOf("localhost")==7)||(d.indexOf("localhost")==11)||(d.indexOf("127.0.0.1")==7))?true:false;var c=d;g=((g==undefined)?Ozone.util.contextPath():g);if((a==true)&&(g!=null)){if(b){c=String.format("{0}{1}",g,d)}else{if(h){var e=d.substring(3);c=String.format("{0}/{1}",g,e)}}}return c};Ozone.util.getContainerRelay=function(){return Ozone.util.contextPath()+"/js/eventing/rpc_relay.uncompressed.html"};Ozone.util.toString=function(a){if(typeof(a)==="object"){return owfdojo.toJson(a)}else{return a+""}};Ozone.util.formatWindowNameData=function(a){return Ozone.util.toString(a)};Ozone.util.formField.removeLeadingTrailingSpaces=function(a){var b=a.getValue().replace(new RegExp(Ozone.lang.regexLeadingTailingSpaceChars),"");a.setValue(b);return b};if(!Ozone.util.ModalBox){Ozone.util.ModalBox=function(){var t="absolute";var e="none";var m=document.getElementsByTagName("body")[0];var q=document.createDocumentFragment();var c=document.createElement("div");c.setAttribute("id","ol");c.style.display=e;c.style.position=t;c.style.top=0;c.style.left=0;c.style.zIndex=10000;c.style.width="100%";c.style.backgroundColor="#555";c.style.filter="alpha(opacity=50)";c.style.MozOpacity=0.5;c.style.opacity=0.5;q.appendChild(c);this.obol=c;var b=document.createElement("div");b.setAttribute("id","mbox");b.style.display=e;b.style.position=t;b.style.backgroundColor="#eee";b.style.padding="8px";b.style.border="2px outset #666";b.style.zIndex=10001;this.obbx=b;var g=document.createElement("span");b.appendChild(g);var r=document.createElement("div");r.setAttribute("id","mbd");var k=document.createElement("div");var h=document.createElement("span");h.innerHTML="Press OK to continue.";this.txt=h;var a=document.createElement("div");a.style.textAlign="center";a.style.fontSize="14px";a.appendChild(h);a.appendChild(document.createElement("br"));var j=document.createElement("button");j.innerHTML="OK";var p=this;j.onclick=function(){p.hide()};a.appendChild(j);k.appendChild(a);r.appendChild(k);this.obbxd=r;g.appendChild(r);q.insertBefore(b,c.nextSibling);m.insertBefore(q,m.firstChild);window.onscroll=function(){p.scrollFix()};window.onresize=function(){p.sizeFix()}};Ozone.util.ModalBox.prototype.pageWidth=function(){return window.innerWidth!=null?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body!=null?document.body.clientWidth:null};Ozone.util.ModalBox.prototype.pageHeight=function(){return window.innerHeight!=null?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body!=null?document.body.clientHeight:null};Ozone.util.ModalBox.prototype.posLeft=function(){return typeof window.pageXOffset!="undefined"?window.pageXOffset:document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft?document.body.scrollLeft:0};Ozone.util.ModalBox.prototype.posTop=function(){return typeof window.pageYOffset!="undefined"?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0};Ozone.util.ModalBox.prototype.scrollFix=function(){this.obol.style.top=this.posTop()+"px";this.obol.style.left=this.posLeft()+"px"};Ozone.util.ModalBox.prototype.sizeFix=function(){this.obol.style.height=this.pageHeight()+"px";this.obol.style.width=this.pageWidth()+"px";var b=this.posTop()+((this.pageHeight()-this.height)/2)-12;var a=this.posLeft()+((this.pageWidth()-this.width)/2)-12;this.obbx.style.top=(b<0?0:b)+"px";this.obbx.style.left=(a<0?0:a)+"px"};Ozone.util.ModalBox.prototype.kp=function(a){ky=a?a.which:event.keyCode;if(ky==88||ky==120){this.hide()}return false};Ozone.util.ModalBox.prototype.inf=function(a){tag=document.getElementsByTagName("select");for(i=tag.length-1;i>=0;i--){tag[i].style.visibility=a}tag=document.getElementsByTagName("iframe");for(i=tag.length-1;i>=0;i--){tag[i].style.visibility=a}tag=document.getElementsByTagName("object");for(i=tag.length-1;i>=0;i--){tag[i].style.visibility=a}};Ozone.util.ModalBox.prototype.hide=function(){var a="visible";var b="none";this.obol.style.display=b;this.obbx.style.display=b;this.inf(a);document.onkeypress=""};Ozone.util.ModalBox.prototype.show=function(e,g,q){var k="hidden";var m="block";var d="px";g=g|200;q=q|100;var c=this.obol;var r=this.obbxd;this.txt.innerHTML=e;c.style.height=this.pageHeight()+d;c.style.width=this.pageWidth()+d;c.style.top=this.posTop()+d;c.style.left=this.posLeft()+d;c.style.display=m;var n=this.posTop()+((this.pageHeight()-q)/2)-12;var j=this.posLeft()+((this.pageWidth()-g)/2)-12;var a=this.obbx;a.style.top=(n<0?0:n)+d;a.style.left=(j<0?0:j)+d;a.style.width=g+d;a.style.height=q+d;this.inf(k);a.style.display=m;this.width=g;this.height=q;return false}}if(!Ozone.util.ErrorDlg){Ozone.util.ErrorDlg={};Ozone.util.ErrorDlg.show=function(c,b,a){if(!this.dlgBox){this.dlgBox=new Ozone.util.ModalBox()}this.dlgBox.show(c,b,a)}}Ozone.util.fireBrowserEvent=function(e,c,b,a){if(document.createEvent){var d=document.createEvent("Events");d.initEvent(c,b||true,a||true);e.dispatchEvent(d)}else{if(document.createEventObject){e.fireEvent("on"+c)}}};Ozone.util.cloneDashboard=function(e,k,h){var g=Ozone.util.toString(e);if(k===true){var d=guid.util.guid(),b=e.guid;g=g.replace(new RegExp(b,"g"),d);dashboardStrCopy=g;var a=/\"uniqueId\"\:\"([A-Fa-f\d]{8}-[A-Fa-f\d]{4}-[A-Fa-f\d]{4}-[A-Fa-f\d]{4}-[A-Fa-f\d]{12})\"/g;var m;while((m=a.exec(dashboardStrCopy))!=null){g=g.replace(new RegExp(m[1],"g"),guid.util.guid())}}var j=Ozone.util.parseJson(g);if(h===true){var c=function(p){if(!p||!p.items){return}if(p.items.length===0&&p.widgets){for(var q=0,n=p.widgets.length;q<n;q++){delete p.widgets[q].launchData}}else{for(var q=0,n=p.items.length;q<n;q++){c(p.items[q])}}};c(j.layoutConfig)}return j};Ozone.util.createRequiredLabel=function(a){return"<span class='required-label'>"+a+" <span class='required-indicator'>*</span></span>"};var Ozone=Ozone||{};Ozone.util=Ozone.util||{};Ozone.util.isInContainer=function(){var a=false;if(Ozone.util.parseJson){var b=Ozone.util.parseWindowNameData();if(b!=null){a=true}}return a};Ozone.util.isRunningInOWF=function(){var a=false;if(Ozone.util.parseJson){var b=Ozone.util.parseWindowNameData();if(b!=null&&b.owf){a=true}}return a};Ozone.util.parseID=function(b,a){return b.substring(0,a.length)==a?b.substring(a.length):b};Ozone.util.getFlashApp=function(a){a=a||Ozone.dragAndDrop.WidgetDragAndDrop.getInstance().getFlashWidgetId();if(!a){return}if(navigator.appName.indexOf("Microsoft")!=-1){return window[a]}else{return document[a]}};var Ozone=Ozone||{};Ozone.log={};Ozone.log.logEnabled=false;Ozone.log.defaultLogger=null;Ozone.log.defaultAppender=null;Ozone.log.version=Ozone.version.owfversion+Ozone.version.logging;Ozone.log.getLogger=function(a){return log4javascript.getLogger(a)};Ozone.log.setEnabled=function(a){log4javascript.setEnabled(a)};Ozone.log.getDefaultLogger=function(){if(!Ozone.log.defaultLogger){var a="[ozonedefault]";Ozone.log.defaultLogger=Ozone.log.getLogger(a);Ozone.log.defaultAppender=new log4javascript.PopUpAppender();Ozone.log.defaultAppender.setUseOldPopUp(true);Ozone.log.defaultAppender.setComplainAboutPopUpBlocking(false);Ozone.log.defaultAppender.setThreshold(log4javascript.Level.OFF);log4javascript.getRootLogger().addAppender(Ozone.log.defaultAppender);return Ozone.log.defaultLogger}return Ozone.log.defaultLogger};Ozone.log.launchPopupAppender=function(){Ozone.log.defaultAppender.show();Ozone.log.getDefaultLogger().debug("Logger Window Lauched")};Ozone.log.widgetLog=function(){gadgets.rpc.call("..","Ozone.log",null,arguments)};if(typeof(Ext)!="undefined"){Ext.onReady(function(){gadgets.rpc.register("Ozone.log",function(b){var a=Ozone.log.getDefaultLogger();a.debug.apply(a,b)})})}var Ozone=Ozone||{};Ozone.layout=Ozone.layout||{};Ozone.ux=Ozone.ux||{};Ozone.util=Ozone.util||{};Ozone.lang={languageSetting:"en-US",regexLeadingTailingSpaceChars:/^\s+|\s+$/g,regexTrailingSpaceChars:/\s+$/,regexLeadingSpaceChars:/^\s+/,version:Ozone.version.owfversion+Ozone.version.language,urlDecode:function(g,j){if(!g||!g.length){return{}}var d={};var b=g.split("&");var c,a,k;for(var e=0,h=b.length;e<h;e++){c=b[e].split("=");a=decodeURIComponent(c[0]);k=decodeURIComponent(c[1]);if(j!==true){if(typeof d[a]=="undefined"){d[a]=k}else{if(typeof d[a]=="string"){d[a]=[d[a]];d[a].push(k)}else{d[a].push(k)}}}else{d[a]=k}}return d},getLanguage:function(){var b=Ozone.lang.urlDecode(window.location.search.substring(1));if(b.lang){return b.lang}else{if(Ozone.util.parseWindowNameData){var a=Ozone.util.parseWindowNameData();if(a!=null&&a.lang){return a.lang}}}return Ozone.lang.languageSetting}};Ozone.layout.Menu={overflowMenuButtonTooltip:"Click to show more buttons"};Ozone.layout.ConfigurationWindowString={setAsNew:"Save as new",setAsDefault:"Set as default",showCarousel:"Show Launch Menu",showShortcuts:"Show Shortcuts",showToolbar:"Show toolbar options",documentTitle:"Document Title",topSelector:"Top",centerSelector:"Center",accordionSelector:"Accordion",toolbarButtons:"Toolbar Buttons",clear:"Clear",save:"OK",cancel:"Cancel",clearAll:"Clear All",column:"Column",columns:"Columns",tab:"Tab",tabs:"Tabs"};Ozone.layout.CreateViewWindowString={createNew:"Create new",createFromExisiting:"Create from existing",importView:"Import"};Ozone.layout.ManageViewsWindowString={languages:"Language"};Ozone.layout.ToolbarString={configurationManager:"Configuration Manager"};Ozone.layout.DesktopWindowManagerString={configureDashboard:"Configure Dashboard",toggleCarousel:"Toggle Launch Menu",welcomeMessage:"Welcome"};Ozone.layout.tooltipString={widgetLaunchMenuTitle:"Launch Menu",manageDashboardsTitle:"Dashboard Settings",manageDashboardsContent:"This screen allows users to rearrange, edit, and delete dashboards. It also allows users to set their language preference.",createDashboardTitle:"Create Dashboard",createDashboardContent:"This screen allows users to create blank dashboards, copy an existing dashboard, or import a dashboard from a shared configuration.",addWidgetsTitle:"Launch Menu (Alt+Shift+L)",addWidgetsContent:"This button opens or closes the Launch Menu, allowing users to add widgets to their current dashboard.",dashboardSwitcherTitle:"Switcher (Alt+Shift+C)",dashboardSwitcherContent:"This button opens or closes the Switcher, allowing users to switch between their dashboards.",marketplaceWindowTitle:"Marketplace (Alt+Shift+M)",marketplaceWindowContent:"This button opens the Marketplace window, allowing users to discover widgets in Marketplace and add them to their OWF instance.",metricWindowTitle:"Metric (Alt+Shift+R)",metricWindowContent:"This button opens the Metric window, where widgets that monitor OWF and widget statistics are located.",settingsTitle:"Settings (Alt+Shift+S)",settingsContent:"This button opens the Settings window, allowing users to customize their widgets or change themes.",adminToolsTitle:"Administration (Alt+Shift+A)",adminToolsContent:"This button opens the Administration window, exposing administrators to functionality for managing groups, dashboards, widgets, and users.",helpTitle:"Help (Alt+Shift+H)",helpContent:"This button opens the Help window, allowing users to browse help files for assistance on using OWF.",shareTitle:"Share Dashboard",shareContent:"This feature allows a user to export their current dashboard so that other users can import it.",customizeDashboardTitle:"Customize Dashboard",customizeDashboardContent:"This screen allows users to customize the current dashboard.",eventingTitle:"Dynamic Eventing",eventingContent:"This screen allows users to manage dynamic widget eventing.",themeSelectorTitle:"Change the styling of your OWF",themeSelectorContent:"This screen allows users to change the background, window color and style for OWF.",showBannerTitle:"Show/Hide Banner",showBannerContent:"This button shows and hides the bottom two rows of the dashboard banner.",carouselCloseContent:"This button closes the widget Launch Menu.",carouselCloseTitle:"Close Launch Menu",carouselManageWidgetsTitle:"Widget Settings",carouselManageWidgetsContent:"This screen allows users to customize their Launch Menu, controlling which widgets are visible and the order in which they appear. It also allows for the deletion of widgets and contains a link to the OWF Marketplace. The grouping tags of a widget can also be modified in this screen.",adminWDEditTitle:"Edit Widget Definition",adminWDEditContent:"Change the properties of a widget definition. Note that while properties such as URLs will propagate to already existing instances of a widget, malleable properties such as height will not be affected.",adminWDDeleteTitle:"Delete Widget Definition",adminWDDeleteContent:"Deletes the selected widget definition. In addition to removing the definition itself, all instances of this widget will be removed from all user dashboards.",adminDashAddTitle:"Add Dashboard",adminPWDApplyTitle:"Apply User Widgets",adminPWDApproveTitle:"Approve User Widgets",adminDashCopyTitle:"Copy Dashboard",adminDashCopyContent:"Copy an existing dashboard to one or more users. Note that once copied, each dashboard instance is an independent entity. Changes made to the initial dashboard at a later date will not be copied.",adminDashEditTitle:"Edit Dashboard",adminDashEditContent:"Changes the properties of a dashboard. Note that dashboard state is represented as a JSON object, and any changes made to it must be valid JSON.",adminDashDeleteTitle:"Delete Dashboard",adminDashDeleteContent:"Deletes the selected dashboard. Note that if a user is currently using the dashboard, they will not be kicked out. However, it will not be available once they navigate away.",adminPrefsCopyTitle:"Copy Preference",adminPrefsCopyContent:"Copy an existing preference to one or more users. Note that once copied, each preference instance is an independent entity. Changes made to the initial preference at a later date will not be copied.",adminPrefsEditTitle:"Edit Preference",adminPrefsEditContent:"Changes the properties of a preference.",adminPrefsDeleteTitle:"Delete Preference.",adminPrefsDeleteContent:"Deletes the selected preference.",adminUsersEditTitle:"Edit User",adminUsersEditContent:"Changes the properties of a user. Note that this does not edit any user information in an underlying security implementation. Only the information that is stored in the framework itself will be changed.",adminUsersDeleteTitle:"Delete User",adminUsersDeleteContent:"Deletes a given user from the framework. Note that this does not delete the user information in an underlying security implementation. Only the user information that is stored in the framework itself will be removed. In addition, it is possible that with certain security implementations such as x509 certificates, a user will be re-created by the framework if they successfully authenticate.",adminUserWidgetsDeleteTitle:"Delete User Widget",adminUserWidgetsDeleteContent:"Removes access to this widget for a given user. Please note that this will not delete the underlying widget definition - other users will still have access.",clearConnectionsTitle:"Clear All Connections",clearConnectionsContent:"Removes all directed dynamic eventing connections between the widgets on this dashboard.",bannerDockTitle:"Dock",bannerDockContent:"Dock toolbar to banner at top of page.",bannerUndockTitle:"Undock",bannerUndockContent:"Undock toolbar to floating position and hide banner."};Ozone.layout.admin={updateDashboardTitle:"Update Dashboard",dashboardUpdatedContent:"Dashboard updated successfully."};Ozone.ux.DashboardMgmtString={createDashboard:"Create a Dashboard",selectDashboardDotDot:"Select a dashboard...",deleteDashboard:"Delete a Dashboard",importaDashboard:"Import a Dashboard",exportDashboard:"Export Current Dashboard",exportDashboardConfig:"Export Dashboard Configuration",uploadConfig:"Upload...",setAsDefault:"Set as default",dashboards:"Dashboards",title:"Title",layout:"Layout",description:"Description",top:"Top",bottom:"Bottom",columns:"Columns",arrangement:"Arrangement",selectDashboard:"Select Dashboard",accordion:"Accordion",portal:"Portal",tabbed:"Tabbed",desktop:"Desktop",fit:"Fit",tooltipManageDashboards:"Dashboard Settings",tooltipCreateDashboard:"Create Dashboard",ok:"OK",reset:"Reset",about:"About",logout:"Logout",importDashboard:"Import Dashboard",dashboardTitle:"Dashboard Title",enterDashboardTitle:"Enter Dashboard Title...",browse:"Browse...",loadDefaultMsg:"Load Default Configuration?",noDashboardSelectedMsg:"No configuration was selected.  Do you want to load the default configuration?",changeLanguage:"Change Language",es:"Spanish",en_US:"English",ko:"Korean"};Ozone.layout.AccordionWindowManagerString={configureAccordion:"Configure Accordion"};Ozone.layout.PortalWindowManagerString={configurePortlets:"Configure Portlets"};Ozone.layout.TabbedWindowManagerString={configureTabs:'<span class="configureTabButton">Configure Tabs</span>'};Ozone.util.ErrorMessageString={errorTitle:"Error",dashboardConfig:"Dashboard Configuration",widgetConfiguration:"Widget Configuration",noWidgets:"There are no widgets to which you have access.",configurationMsg:"Failed to retrieve configuration data",dashboardBlankMsg:"Invalid Dashboard Name, it cannot be blank. <br />Please provide a valid Dashboard Name.",dashboardInvalidEntryMsg:"Unable to update dashboard name(s) due <br/>to invalid characters.",invalidForm:"Invalid Form",invalidFormMsg:"Form is invalid.  Please make sure all required fields are completed.",languagePreference:"Language Preference",languagePreferenceMsg:"Error saving language preference",settingSessionDataMsg:"Error setting session data",retrievingSessionDataMsg:"Error retrieving session data",saveUserPreferences:"Error saving user preference",storeErrorMsg:"Store Error Message",sendAndForget:"Send and Forget",userName:"User Name",updateDashboardMsg:"Error updating dashboard",saveUpdatedViews:"Update Dashboards",saveUpdatedViewsMsg:"Error updating Dashboards",saveUpdatedWidgets:"Update Widgets",saveUpdatedWidgetsMsg:"Error updating widgets",retrieveUpdatedWidgets:"Retrieving Updated Widgets",retrieveUpdatedWidgetsMsg:"Error retrieving updated widgets",invalidUrl:"Invalid Url",invalidUrlMsg:"The dashboard can not be found. It may have been deleted. You will be redirected to your default dashboard.",invalidDashboard:"Invalid Dashboard Id",invalidDashboardGotoDefaultMsg:"The dashboard can not be found. It may have been deleted. You will be redirected to your default dashboard.",invalidDashboardMsg:"The dashboard can not be found. It may have been deleted. You will be redirected to the previous dashboard",invalidDashboardNameMsg:"Dashboard name is invalid.  It cannot include start or end with a space.",leadingOrTrailingWhiteSpacesMsg:"Leading or trailing spaces around dashboard name are not allowed",logoutError:"Logout Error",logoutErrorMsg:"Please close your browser to ensure logout success.",widgetName:"Widget Name",maximumLength:"The maximum length for this field is {0}",about:"About",aboutErrorMsg:"Error retrieving application information.",widgetNotApproved:"This widget has not yet been approved for use.  Please see a system administrator for approval.",restrictedTagError:" is a restricted tag.  You may not edit it or add it to other widgets",mpErrorTitle:"Marketplace Error",mpErrorMsg:"There has been an error accessing Marketplace. Please contact your System Administrator to verify that Marketplace connectivity has been correctly configured and that the Marketplace server is currently running.",oneSingleton:"Only one instance of a Singleton is permitted"};Ozone.layout.MessageBoxButtonText={ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"};Ozone.layout.DialogMessages={update:"Update",updating:"Updating...",updated:"Updated",add:"Add",adding:"Adding...",added:"Added",added_colon:"Added:",added_successfully:"added successfully",copy:"Copy",copying:"Copying...",copied:"Copied",cancel:"Cancel",ok:"OK",error:"Error",addWidget:"Add Widget",editWidget:"Edit Widget",removed_colon:"Removed:",retained_colon:"Retained:",applied_colon:"Applied:",updated_successfully:"updated successfully",added_for:"added for",formInvalid_CheckFieldMessages:"Form Invalid.<br />Check highlighted field messages (!).",formInvalid_SelectOneUser:"Form Invalid.<br />You need to select at least 1 user.",formInvalid_SelectOneWidget:"Form Invalid.<br />You need to select at least 1 widget.",view:"Dashboard",view_status:"Dashboard Status",view_dashboardNameField_label:"Dashboard name",view_dashboardNameField_blankText:"Please supply a Dashboard Name",view_dashboardStateField_label:"Configuration",view_dashboardStateField_blankText:"Please supply a Dashboard Configuration",view_dashboardGuidField_label:"GUID",view_dashboardLayoutField_label:"Layout",view_dashboardIsDefaultField_label:"Default",formError_saveView:"An error occurred while attempting to save a dashboard.",user:"User",users_opt:"user(s)",user_status:"User Status",user_usernameField_label:"User ID",user_usernameField_blankText:"Please supply a User ID",user_userRealNameField_label:"Name",user_userRealNameField_blankText:"Please supply a name for the user",formError_saveUser:"An error occurred while attempting to save a user.",preference:"Preference",preference_preferenceNameField_label:"Preference Name",preference_preferenceNameField_blankText:"Please supply a Preference Name",preference_preferenceNamespaceField_label:"Namespace",preference_preferenceNamespaceField_blankText:"Please supply a Preference Namespace",preference_preferenceValueField_label:"Value",preference_preferenceValueField_blankText:"Please supply a Preference Value",preference_status:"Preference Status",formError_savePreference:"An error occurred while attempting to save a preference.",widgetDefinition:"Widget Definition",widgetDefinition_status:"Widget Status",widgetDefinition_widgetAccess:"Widget Access",widgetDefinition_descriptorUrlField_blankText:"Please supply a Widget Descriptor URL",widgetDefinition_displayNameField_label:"Widget Name",widgetDefinition_widgetVersionField_label:"Version",widgetDefinition_displayNameField_blankText:"Please supply a Widget Name",widgetDefinition_widgetVersionField_blankText:"Please supply a Widget Version",widgetDefinition_widgetGuidField_label:"GUID",widgetDefinition_widgetUrlField_label:"URL",widgetDefinition_widgetUrlField_blankText:"Please supply a Widget URL",widgetDefinition_imageUrlSmallField_label:"Container Icon URL",widgetDefinition_imageUrlSmallField_blankText:"Please supply a Container Icon URL",widgetDefinition_imageLargeUrlField_label:"Launch Menu Icon URL",widgetDefinition_imageLargeUrlField_blankText:"Please supply a Launch Menu Icon URL",widgetDefinition_widthNumberField_label:"Width",widgetDefinition_widthNumberField_blankText:"Please supply a Widget width",widgetDefinition_heightNumberField_label:"Height",widgetDefinition_heightNumberField_blankText:"Please supply a Widget height",widgetDefinition_secureUrl_warningText:'Entering a secure HTTPS address may prevent browser security warnings such as "This page contains unsecure content."',personWidgetDef_Apply:"Apply",personWidgetDef_Order:"Order",personWidgetDef_Widget:"Widget",personWidgetDef_WidgetAccessApplied:"Widget Access Applied",personWidgetDef_ApplyStatus:"Apply Status",personWidgetDef_NoChangesNecessary:"No changes were necessary",formError_savePersonDefWidgets:"An error occurred while attempting to save user widget(s).",formError_saveWidgetDefinition:"An error occurred while attempting to save the widget.",personWidgetDef_WidgetContainerPanelTitle:"Widgets",marketplaceWindow_AddWidget:"An error occurred while attempting to add the widget from Marketplace.",marketplaceWindow_currentUser:"Could not retrieve current user name and id.",marketplaceWindow_AddSuccessful:"The widget was added successfully from Marketplace",widgetAdded:"Selected widget is already added for this user",marketplaceWindow_RequiredListingsAlertMsg:"The widget you have launched will not work without some dependencies.  These widgets are listed below and will be additionally added to the launch menu.",fitPaneFullWarning:"You are attempting to add a widget to a pane with a single-widget layout. Continuing will replace the existing widget.",dashboardLockTitle:"Lock Dashboard",dashboardLockWarning:"Locking this dashboard disables the Launch Menu. New widgets cannot be launched or added to this layout. Do you still want to lock this dashboard?",dashboardLockAlertTitle:"Locked Dashboard",dashboardLockAlert:"This dashboard is locked. Widgets cannot be added or removed from a locked dashboard.",closeBackgroundWidgetWarning:" is a background widget. You wont see it on your screen because it runs behind the scenes.<br/><br/>To close the widget, click OK."};Ozone.layout.ThemeSwitcherWindowConstants={title:"Theme Settings",header:"Change the styling of your OWF",subheader:"Select a theme below to change the background, window color, and style for OWF.",ok:"OK",cancel:"Cancel"};Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};var Ozone=Ozone||{};Ozone.util=Ozone.util||{};Ozone.util.alert=function(g,e,d,c,b){var a=Ext.WindowMgr.zseed;Ext.WindowMgr.zseed=50000;Ozone.Msg.alert(g,e,d,c,b);Ext.WindowMgr.zseed=a};Ozone.util.validateGuid=function(b){if(b==null){return false}var a=b.search(/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/);if(a<0){return false}return true};Ozone.util.validateDashboardJSON=function(a){if(a.name==null||a.guid==null||a.isdefault==null){return false}return true};Ext.define("Ozone.layout.ManageWidgetsContainer",{extend:"Ext.form.Panel",alias:["widget.owfManageWidgetsContainer","widget.Ozone.layout.ManageWidgetsContainer"],requires:["Ext.layout.container.VBox"],layout:{type:"vbox",align:"stretch"},border:false,cls:"mwc-manageWidgetsContainer",mixins:{focus:"Ozone.components.focusable.CircularFocus"},loadGridData:function(){this.setLoading(true);var k=this.dashboardContainer.widgetStore;var g=[];for(var c=0;c<k.getCount();c++){var e=k.getAt(c).data;e.removed=false;if(e.definitionVisible&&e.widgetTypes!=null){var d=e.widgetTypes;var a=false;for(var b=0;b<d.length;b++){var h=d[b];if(h!=null&&h.name=="standard"){a=true;break}}if(a){g.push(e)}}}this.store.loadData(g);this.setLoading(false)},refreshOriginalWidgetNames:function(b){this.setLoading(true);var a=this;Ozone.pref.PrefServer.findWidgets({onSuccess:function(c){for(var d=0;d<c.length;d++){a.dashboardContainer.originalWidgetNames[c[d].path]=c[d].value.namespace}if(b.reloadGrid==true){a.loadGridData()}else{a.setLoading(false)}b.callback()},onFailure:function(){a.setLoading(false);b.callback()}})},initComponent:function(){var d=this;var c=Ext.define("widgetJsonModel",{extend:"Ext.data.Model",fields:["widgetGuid",{name:"name",sortType:Ext.data.SortTypes.asUCString},"visible","removed","headerIcon","tags","editable","_tags","_editable"]});this.store=Ext.create("Ext.data.JsonStore",{model:"widgetJsonModel",sorters:[{property:"name",direction:"ASC"}],listeners:{datachanged:{fn:function(p){var h=p;h.suspendEvents();for(var n=0;n<h.getCount();n++){var r=h.getAt(n);var q=r.data;if(Ext.isArray(q.tags)&&q.tags.length>0){var g="";var m=true;for(var k=0;k<q.tags.length;k++){g+=q.tags[k].name;if(k<q.tags.length-1){g+=", "}if(q.tags[k].editable===false){m=false}}r.set("_tags",g);r.set("_editable",m);r.commit()}else{r.set("_tags","");r.set("_editable",true);r.commit()}}h.resumeEvents()},scope:this}}});this.nameField=Ext.create("Ext.form.field.Text",{maxLength:200,allowBlank:false,blankText:Ozone.layout.DialogMessages.view_dashboardNameField_blankText,validator:function(h){if(this.value){if(this.value.toUpperCase()!=h.toUpperCase()){for(var g=0;g<store.data.items.length;g++){if(h.charAt(0)===" "||h.charAt(h.length-1)===" "){return Ozone.util.ErrorMessageString.invalidDashboardNameMsg}}}else{if(this.value.charAt(0)===" "||this.value.charAt(this.value.length-1)===" "){return Ozone.util.ErrorMessageString.invalidDashboardNameMsg}}return true}return true}});this.tagsField=Ext.create("Ext.form.field.Text",{allowBlank:true,validator:function(g){if(g.match(Ozone.config.carousel.restrictedTagGroupsRegex)!=null){return'"'+g+'"'+Ozone.util.ErrorMessageString.restrictedTagError}else{return true}}});var e=Ext.create("Ext.Action",{text:"Reset Title",handler:function(h,g){var j=d.widgetGrid.getSelectionModel().getSelection()[0];if(j){d.refreshOriginalWidgetNames({reloadGrid:false,callback:function(){var k=j.get("originalName");j.set("name",k)}})}}});var a=Ext.create("Ext.Action",{text:"Reset All Titles",handler:function(j,h){var g=d.widgetGrid.getStore().getRange();d.refreshOriginalWidgetNames({reloadGrid:false,callback:function(){for(var q=0;q<g.length;q++){if(g[q].data.editable){var p=g[q].get("originalName");g[q].data.name=p;var n=[];if(g[q].data._tags.length>0&&g[q].data._tags!=""){var r=g[q].data._tags.split(",");for(var m=0;m<r.length;m++){var k=Ext.String.trim(r[m]);if(k!=""){n.push({name:k,visible:true,position:-1,editable:g[q].data._editable})}}}g[q].data.tags=n}}d.store.loadRecords(g,{addRecords:false})}})}});var b=Ext.create("Ext.menu.Menu",{items:[e,a]});this.widgetGrid=Ext.create("Ext.grid.GridPanel",{ddGroup:"ddWidgets",cls:"mwc-widgetGridPanel",store:this.store,autoScroll:true,scroll:true,viewConfig:{listeners:{itemcontextmenu:{fn:function(g,m,j,h,k){k.stopEvent();this.dashboardContainer.modalWindowManager.register(b);b.showAt(k.getXY());this.dashboardContainer.modalWindowManager.bringToFront(b);return false},scope:this},itemkeydown:{fn:function(n,k,r,m,q){switch(q.getKey()){case Ext.EventObject.S:k.set("visible",!k.get("visible"));n.refreshNode(m);var h=this.down("#showCheckColumn");k.get("visible")?h.onChecked(n,k):h.onUnchecked(n,k);break;case Ext.EventObject.D:k.set("removed",!k.get("removed"));n.refreshNode(m);var h=this.down("#deleteCheckColumn");k.get("removed")?h.onChecked(n,k):h.onUnchecked(n,k);break;case Ext.EventObject.R:if(!Ext.EventObject.hasModifier()){var g=Ext.select("tr[class*=x-grid-row-focused]:first td").item(2);var p=g.getXY();p[0]-=5;p[1]+=10;this.dashboardContainer.modalWindowManager.register(b);b.showAt(p);this.dashboardContainer.modalWindowManager.bringToFront(b);b.addListener("hide",function(u,t,v){Ext.defer(function(){Ext.getCmp("manageWidgetsWindowId").getComponent(0).getComponent(0).getComponent(0).focus()},100,this);b.removeListener("hide",arguments.callee)})}break;case Ext.EventObject.ENTER:var j=n.headerCt.getHeaderAtIndex(1);n.editingPlugin.startEdit(k,j)}},scope:this},afterrender:function(g){g.getEl().on("keyup",function(h){if(h.getKey()===h.ESC){h.stopPropagation()}})}}},columns:[{xtype:"gridcolumn",text:'<span class="gridHdr">Icon</span>',dataIndex:"headerIcon",width:36,sortable:false,resizable:false,menuDisabled:true,renderer:function(n,h,g,p,k,j){if(g.get("editable")==false){h.attr='ext:qtip="This widget belongs to a Group and may not be edited or deleted"';h.tdCls+=" x-item-disabled"}var m='<div><img width="24px" height="24px" src="'+n+'">';m+="</div>";return m}},{xtype:"textcolumn",text:'<span class="gridHdr">Widget</span>',dataIndex:"name",field:this.nameField,width:176,resizable:false,menuDisabled:true,renderer:function(m,h,g,n,k,j){if(g.get("editable")!=false&&g.get("_editable")!=false){h.tdCls+=" manage-editable"}if(g.get("editable")==false){h.tdAttr='data-qtip="This widget belongs to a Group and may not be edited or deleted"';h.tdCls+=" x-item-disabled"}return Ext.util.Format.htmlEncode(m)}},{xtype:"textcolumn",menuDisabled:true,text:'<span class="gridHdr">Tags</span>',field:this.tagsField,dataIndex:"_tags",width:170,sortable:false,resizable:false,renderer:function(n,j,h,p,m,k){j.tdCls="hd-tags";if(h.get("_editable")==false){j.tdCls+=" x-item-disabled"}if(h.get("editable")==false){j.tdAttr='data-qtip="This widget belongs to a Group and may not be edited or deleted"';j.tdCls+=" x-item-disabled"}if(h.get("editable")!=false&&h.get("_editable")!=false){j.tdCls+=" manage-editable";var g=Ext.util.Format.htmlEncode(n);j.tdAttr='data-qtip="'+new Ext.XTemplate("{foo:htmlEncode}").apply({foo:g})+'"'}return Ext.util.Format.htmlEncode(n)}},{xtype:"checkcolumn",itemId:"showCheckColumn",text:'<span class="gridHdrShow"><span class="x-grid-column-checkbox-off"></span><span class="underline">S</span>how</span>',dataIndex:"visible",width:90,sortable:false,tdCls:"gridCellShowWidgets-chkbox",listeners:{afterrender:{scope:this,single:true,fn:function(g){this.store.mon(this.store,"datachanged",function(){if(this.find("visible",false)===-1){g.toggleHeader(true)}})}}}},{xtype:"checkcolumn",itemId:"deleteCheckColumn",text:'<span class="gridHdrDelete"><span class="x-grid-column-checkbox-off"></span><span class="underline">D</span>elete</span>',dataIndex:"removed",width:90,sortable:false,tdCls:"gridCellDeleteWidgets-chkbox"}],selType:"rowmodel",frame:false,enableDragDrop:true,enableHdMenu:false,enableColumnResize:false,plugins:[Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:1}),new Ozone.components.focusable.FocusableGridPanel()],flex:1,listeners:{beforeedit:function(h){var g=function(j){if(j.get("removed")||j.get("_editable")===false||j.get("editable")===false){return false}return true};return g(h.record)},edit:function(g,h){if(g.editors.items[h.column.id]){h.record.set("_tags",g.editors.items[h.column.id].field.value.toLowerCase())}}}});this.items=[this.widgetGrid];this.widgetGrid.headerCt.on("headerclick",function(h,j,g,k){if(typeof j.onGridHeaderCtClick=="function"){j.onGridHeaderCtClick(this.widgetGrid,g,k)}},this);this.keys=[];this.keys.push({key:Ext.EventObject.ENTER,fn:function(g,j){var h=this.getFooterToolbar().getComponent("saveButton");if(h){j.button=0;h.onClick(j)}},scope:this});this.dockedItems=[{xtype:"toolbar",dock:"bottom",defaults:{minWidth:this.minButtonWidth},layout:{type:"hbox",pack:"end"},items:[{xtype:"button",scale:"small",text:Ozone.layout.MessageBoxButtonText.ok,itemId:"saveButton",handler:function(){d.onSaveClick()},listeners:{}},{xtype:"button",scale:"small",itemId:"cancelBtn",text:Ozone.layout.MessageBoxButtonText.cancel,handler:function(){Ext.getCmp(d.winId).close()}}]}];this.on("beforedestroy",function(g){g.dockedItems=null});this.on({afterrender:{fn:function(g){var h=Ext.getCmp(g.winId);h.on("show",function(){g.loadGridData()});h.setupFocus(g.widgetGrid.getView().getEl(),g.down("#cancelBtn").getFocusEl())},scope:this}});this.on("resize",function(){this.syncShadow()});this.callParent()},onSaveClick:function(){var n=this.widgetGrid.store.data.items;var d=[];var q=[];var b=[];for(var g=0;g<n.length;g++){if(n[g].data.editable){if(!n[g].data.removed){var t=n[g].data;var u=[];if(t._tags.length>0&&t._tags!=""){var p=t._tags.split(",");for(var e=0;e<p.length;e++){var a=Ext.String.trim(p[e]);if(a!=""){u.push({name:a,visible:true,position:-1,editable:t._editable})}}}var h={guid:n[g].data.widgetGuid,visible:n[g].data.visible,tags:u};var k=n[g].data.originalName;if(n[g].data.name!==k){h.name=n[g].data.name}d.push(h)}else{b.push(n[g].data.widgetGuid);q.push({guid:n[g].data.widgetGuid,name:n[g].data.name,headerIcon:n[g].data.headerIcon,image:n[g].data.image})}}}var r=this;function m(){r.dashboardContainer.retrieveUpdatedWidgets()}function c(){Ozone.Msg.alert(Ozone.util.ErrorMessageString.saveUpdatedWidgets,Ozone.util.ErrorMessageString.saveUpdatedWidgetsMsg,null,null,null,r.dashboardContainer.modalWindowManager)}Ext.getCmp(this.winId).close();Ozone.pref.PrefServer.updateAndDeleteWidgets({widgetsToUpdate:d,widgetGuidsToDelete:[],updateOrder:false,onSuccess:m,onFailure:c});if(b.length>0){Ext.create("Ext.window.Window",{title:"Deleting Widgets",cls:"delete-widgets-window",height:550,ownerCt:r.dashboardContainer,dashboardContainer:r.dashboardContainer,constrain:Ext.isIE,constrainHeader:true,width:600,layout:"fit",resizable:false,modal:true,items:{xtype:"deletewidgetspanel",delWidgets:q,dashboardContainer:r.dashboardContainer},listeners:{show:function(j){j.dashboardContainer.modalWindowManager.register(j);j.dashboardContainer.modalWindowManager.bringToFront(j);Ext.defer(function(){this.focus()},100,j.getComponent("topdeletepanel").okBtn)}}}).show()}}});Ext.define("Ozone.data.LayoutType",{extend:"Ext.data.Model",fields:["dashboardType","displayName"]});Ext.namespace("Ozone.ux");Ozone.ux.StatefulTabPanel=function(a){Ext.state.StatefulTabPanel.superclass.constructor.call(this);Ext.apply(this,a)};Ozone.ux.StatefulTabPanel=Ext.extend(Ext.TabPanel,{stateEvents:["tabchange"],getState:function(){var a={activeTab:this.getActiveTab().id};return a},applyState:function(a){if(this.getItem(a.activeTab)===null||this.getItem(a.activeTab==="undefined")){this.setActiveItem(this.items.item[0].id)}else{this.setActiveTab(a.activeTab)}}});Ext.define("Ext.ux.RadioColumn",{extend:"Ext.grid.column.Column",alias:"widget.radiocolumn",_radioCls:Ext.baseCSSPrefix+"grid-column-radio",_radioClsOn:Ext.baseCSSPrefix+"grid-column-radio-on",_radioClsOff:Ext.baseCSSPrefix+"grid-column-radio-off",_radioClsOver:Ext.baseCSSPrefix+"grid-column-over",processEvent:function(h,k,n,a,j,g){if(h=="mousedown"||(h=="keydown"&&(g.getKey()==g.ENTER||g.getKey()==g.SPACE))){var c=k.panel.store.getAt(a);var m=this.cellDisabled(k,c);if(!m){c.set(this.dataIndex,true);this.fireEvent("change",this,c);for(var b=0;b<k.panel.store.data.items.length;b++){c=k.panel.store.getAt(b);if(b!==a){c.set(this.dataIndex,false)}}}return false}else{if(h=="mouseover"){var d=Ext.fly(n);d.addCls(this._radioClsOver);return this.callParent(arguments)}else{if(h=="mouseout"){var d=Ext.fly(n);d.removeCls(this._radioClsOver);return this.callParent(arguments)}else{return this.callParent(arguments)}}}},cellDisabled:function(b,a){return false},renderer:function(h,c,b,j,e,d){var g=this.columns[e];var a=[g._radioCls];if(!h||"false"==h){a.push(g._radioClsOff)}else{a.push(g._radioClsOn)}return'<div class="'+a.join(" ")+'">&#160;</div>'}});Ext.define("Ext.ux.CheckColumn",{extend:"Ext.grid.column.Column",alias:"widget.checkcolumn",menuDisabled:true,sortable:false,resizable:false,checkbox:true,_checkBoxCls:Ext.baseCSSPrefix+"grid-column-checkbox",_checkBoxClsOn:Ext.baseCSSPrefix+"grid-column-checkbox-on",_checkBoxClsOff:Ext.baseCSSPrefix+"grid-column-checkbox-off",_checkBoxClsOver:Ext.baseCSSPrefix+"grid-column-over",toggleKey:null,processEvent:function(g,j,m,a,h,d){if(g=="mousedown"||(g=="keydown"&&toggleKey&&d.getKey()==togleKey)){var b=j.panel.store.getAt(a);var k=b.data[this.dataIndex];b.set(this.dataIndex,!k);if(k){this.onUnchecked(j,b)}else{this.onChecked(j,b)}return false}else{if(g=="mouseover"){var c=Ext.fly(m);c.addCls(this._checkBoxClsOver);return this.callParent(arguments)}else{if(g=="mouseout"){var c=Ext.fly(m);c.removeCls(this._checkBoxClsOver);return this.callParent(arguments)}else{return this.callParent(arguments)}}}},renderer:function(h,c,b,j,e,d){var g=this.columns[e];var a=[g._checkBoxCls];if(!h||"false"==h){a.push(g._checkBoxClsOff)}else{a.push(g._checkBoxClsOn)}if(b.get("editable")==false){c.tdAttr='data-qtip="This widget belongs to a Group and may not be edited or deleted"';c.tdCls+=" x-item-disabled"}return'<div class="'+a.join(" ")+'">&#160;</div>'},onGridHeaderCtClick:function(c,g,b){g.stopEvent();var a=Ext.fly(b);var d=(a.hasCls(this._checkBoxClsOn)||a.hasCls(this._checkBoxClsOff))?true:false;if(d){var h=a.hasCls(this._checkBoxClsOn);if(h){a.removeCls(this._checkBoxClsOn);a.addCls(this._checkBoxClsOff);this.toggleSelectAll(c,false)}else{a.removeCls(this._checkBoxClsOff);a.addCls(this._checkBoxClsOn);this.toggleSelectAll(c,true)}}},toggleSelectAll:function(c,d){for(var b=0,a=c.store.data.items.length;b<a;b++){c.store.getAt(b).set(this.dataIndex,d?true:false)}},toggleHeader:function(b){var a=this.el.query("."+(b?this._checkBoxClsOff:this._checkBoxClsOn))[0];if(a!=null){a.className=b?this._checkBoxClsOn:this._checkBoxClsOff}},onChecked:function(b,a){if(a.store.find(this.dataIndex,false)===-1){this.toggleHeader(true)}},onUnchecked:function(b,a){this.toggleHeader(false)}});Ext.namespace("Ozone.app");Ozone.app.App=function(b,a){Ext.apply(this,a);this.scope=b;this.addEvents({ready:true,beforeunload:true,sessionexpire:true});Ext.onReady(this.initApp,this)};Ext.extend(Ozone.app.App,Ext.util.Observable,{isReady:false,startMenu:null,modules:null,getStartConfig:Ext.emptyFn,initApp:function(){this.startConfig=this.startConfig||this.getStartConfig();this.desktop=new Ozone.layout.Desktop(this,this.scope);this.launcher=this.desktop.taskbar.startMenu;this.modules=this.getModules();if(this.modules){this.initModules(this.modules)}this.init();Ext.EventManager.on(window,"beforeunload",this.onUnload,this);this.fireEvent("ready",this);this.isReady=true},getModules:Ext.emptyFn,init:Ext.emptyFn,initModules:function(c){for(var d=0,b=c.length;d<b;d++){var a=c[d];this.launcher.add(a.launcher);a.app=this}},getModule:function(c){var b=this.getModules();for(var d=0,a=b.length;d<a;d++){if(b[d].launcher.windowId==c){b[d].app=this;return b[d]}}return""},onReady:function(b,a){if(!this.isReady){this.on("ready",b,a)}else{b.call(a,this)}},getDesktop:function(){return this.desktop},onUnload:function(a){if(this.fireEvent("beforeunload",this)===false){a.stopEvent()}}});Ext.namespace("Ozone.app");Ozone.app.Module=function(a){Ext.apply(this,a);Ozone.app.Module.superclass.constructor.call(this);this.init()};Ext.define("Ext.ux.Portlet",{extend:"Ext.panel.Panel",alias:"widget.portlet",anchor:"100%",frame:true,collapsible:true,draggable:true,cls:"x-portlet",stateEvents:["collapse","expand","resize","destroy"],getState:function(){var b=((this.height!=null)&&(this.height!="undefined"))?this.height:"";var a=((this.width!=null)&&(this.width!="undefined"))?this.width:"";var c={widgetGuid:((this.widgetGuid!=null)&&(this.widgetGuid!="undefined"))?this.widgetGuid:"",uniqueId:((this.uniqueId!=null)&&(this.uniqueId!="undefined"))?this.uniqueId:"",name:((this.name!=null)&&(this.name!="undefined"))?this.name:"",active:false,width:a,height:b,x:"",y:"",zIndex:"",minimized:"",maximized:"",pinned:"",collapsed:((this.collapsed!=null)&&(this.collapsed!="undefined"))?this.collapsed:"",columnPos:((this.columnPos!=null)&&(this.columnPos!="undefined"))?this.columnPos:"",buttonId:"",buttonOpened:"",region:""};return c},applyState:function(a){this.widgetGuid=a.widgetGuid;this.uniqueId=a.uniqueId;this.name=a.name;this.active=a.active;this.width=a.width;this.height=a.height;this.x=a.x;this.y=a.y;this.zIndex=a.zIndex;this.minimized=a.minimized;this.maximized=a.maximized;this.pinned=a.pinned;this.collapsed=a.collapsed;this.columnPos=a.columnPos;this.buttonId=a.buttonId;this.buttonOpened=a.buttonOpened;this.region=a.region},constructor:function(b){this.column=b.column;this.callParent(arguments);var a=this;this.panel=a;this.on("render",function(){this.body.setHeight(this.height-this.getFrameHeight());a.resizer=Ext.create("Ext.resizer.Resizer",{target:a.el,handles:"s",minHeight:100,resizeElement:function(){var c=this.proxy.getBox();a.setSize(c);a.initialConfig.height=c.height;return c}})})},updatePortletLayout:function(b,a){Ozone.Msg.alert(Ozone.ux.DashboardMgmtString.portal,"You moved me to column "+b+", index="+a)}});Ext.define("Ext.ux.PortalColumn",{extend:"Ext.container.Container",alias:"widget.portalcolumn",layout:{type:"anchor"},defaultType:"portlet",cls:"x-portal-column",autoHeight:true});Ext.define("Ext.ux.PortalPanel",{extend:"Ext.panel.Panel",alias:["widget.portalpanel","widget.portal"],cls:"x-portal",bodyCls:"x-portal-body",defaultType:"portalcolumn",componentLayout:"body",autoScroll:true,initComponent:function(){var a=this;this.layout={type:"column"};this.callParent();this.addEvents({validatedrop:true,beforedragover:true,dragover:true,beforedrop:true,drop:true});this.on("drop",this.doLayout,this)},beforeLayout:function(){var b=this.layout.getLayoutItems(),a=b.length,c=0,d;for(;c<a;c++){d=b[c];d.columnWidth=1/a;d.removeCls(["x-portal-column-first","x-portal-column-last"])}if(b[0]){b[0].addCls("x-portal-column-first")}if(b[a-1]){b[a-1].addCls("x-portal-column-last")}return this.callParent(arguments)},initEvents:function(){this.callParent();this.dd=Ext.create("Ext.ux.PortalDropZone",this,this.dropConfig)},beforeDestroy:function(){if(this.dd){this.dd.unreg()}Ext.ux.PortalPanel.superclass.beforeDestroy.call(this)}});Ext.define("Ext.ux.PortalDropZone",{extend:"Ext.dd.DropTarget",constructor:function(a,b){this.portal=a;Ext.dd.ScrollManager.register(a.body);Ext.ux.PortalDropZone.superclass.constructor.call(this,a.body,b);a.body.ddScrollConfig=this.ddScrollConfig},ddScrollConfig:{vthresh:50,hthresh:-1,animate:true,increment:200},createEvent:function(a,g,d,b,j,h){return{portal:this.portal,panel:d.panel,columnIndex:b,column:j,position:h,data:d,source:a,rawEvent:g,status:this.dropAllowed}},notifyOver:function(z,y,A){var d=y.getXY(),a=this.portal,u=z.proxy;if(!this.grid){this.grid=this.getGrid()}var b=a.body.dom.clientWidth;if(!this.lastCW){this.lastCW=b}else{if(this.lastCW!=b){this.lastCW=b;this.grid=this.getGrid()}}var t=0,c=0,r=this.grid.columnX,v=r.length,q=false;for(v;t<v;t++){c=r[t].x+r[t].w;if(d[0]<c){q=true;break}}if(!q){t--}var k,j=0,w=0,p=false,n=a.items.getAt(t),x=n.items.items,m=false;v=x.length;for(v;j<v;j++){k=x[j];w=k.el.getHeight();if(w===0){m=true}else{if((k.el.getY()+(w/2))>d[1]){p=true;break}}}j=(p&&k?j:n.items.getCount())+(m?-1:0);var g=this.createEvent(z,y,A,t,n,j);if(a.fireEvent("validatedrop",g)!==false&&a.fireEvent("beforedragover",g)!==false){u.getProxy().setWidth("auto");if(k){u.moveProxy(k.el.dom.parentNode,p?k.el.dom:null)}else{u.moveProxy(n.el.dom,null)}this.lastPos={c:n,col:t,p:m||(p&&k)?j:false};this.scrollPos=a.body.getScroll();a.fireEvent("dragover",g);return g.status}else{return g.status}},notifyOut:function(){delete this.grid},notifyDrop:function(p,j,h){delete this.grid;if(!this.lastPos){return}var m=this.lastPos.c,g=this.lastPos.col,n=this.lastPos.p,a=p.panel,b=this.createEvent(p,j,h,g,m,n!==false?n:m.items.getCount());if(this.portal.fireEvent("validatedrop",b)!==false&&this.portal.fireEvent("beforedrop",b)!==false){a.el.dom.style.display="";if(n!==false){m.insert(n,a)}else{m.add(a)}p.proxy.hide();this.portal.fireEvent("drop",b);var q=this.scrollPos.top;if(q){var k=this.portal.body.dom;setTimeout(function(){k.scrollTop=q},10)}}delete this.lastPos;return true},getGrid:function(){var a=this.portal.body.getBox();a.columnX=[];this.portal.items.each(function(b){a.columnX.push({x:b.el.getX(),w:b.el.getWidth()})});return a},unreg:function(){Ext.dd.ScrollManager.unregister(this.portal.body);Ext.ux.PortalDropZone.superclass.unreg.call(this)}});Ext.namespace("Ozone.form");Ozone.form.ComboBox=Ext.extend(Ext.form.ComboBox,{doQuery:function(c,b){if(Ext.isEmpty(this.queryField)){this.queryField=this.displayField}if(c===undefined||c===null){c=""}var a={query:c,forceAll:b,combo:this,cancel:false};if(this.fireEvent("beforequery",a)===false||a.cancel){return false}c=a.query;b=a.forceAll;if(b===true||(c.length>=this.minChars)){if(this.lastQuery!==c){this.lastQuery=c;if(this.mode=="local"){this.selectedIndex=-1;if(b){this.store.clearFilter()}else{this.store.filter(this.queryField,c)}this.onLoad()}else{this.store.baseParams[this.queryParam]=c;this.store.load({params:this.getParams(c)});this.expand()}}else{this.selectedIndex=-1;this.onLoad()}}},onTypeAhead:function(){if(Ext.isEmpty(this.queryField)){this.queryField=this.displayField}if(this.store.getCount()>0){var b=this.store.getAt(0);var c=b.data[this.queryField];var a=c.length;var d=this.getRawValue().length;if(d!=a){this.setRawValue(c);this.selectText(d,c.length)}}},assertValue:function(){var c=this.getRawValue();var b=null;if(this.value&&this.valueField){var a=this.findRecord(this.valueField,this.value);if(c==a.get(this.displayField)){b=a}}if(!b){b=this.findRecord(this.displayField,c)}if(!b&&this.forceSelection){if(c.length>0&&c!=this.emptyText){this.el.dom.value=Ext.value(this.lastSelectionText,"");this.applyEmptyText()}else{this.clearValue()}}else{if(b){if(c==b.get(this.displayField)&&this.value==b.get(this.valueField)){return}c=b.get(this.valueField||this.displayField)}this.setValue(c)}},setValue:function(a){if(Ext.isEmpty(this.queryField)){this.queryField=this.displayField}var c=a;if(this.valueField){var b=this.findRecord(this.valueField,a);if(b){c=b.data[this.queryField]}else{if(this.valueNotFoundText!==undefined){c=this.valueNotFoundText}}}this.lastSelectionText=c;if(this.hiddenField){this.hiddenField.value=a}Ext.form.ComboBox.superclass.setValue.call(this,c);this.value=a},restrictHeight:function(){this.innerList.dom.style.height="";var b=this.innerList.dom;var e=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight;var c=Math.max(b.clientHeight,b.offsetHeight,b.scrollHeight);var a=this.getPosition()[1]-Ext.getBody().getScroll().top;var g=Ext.core.Element.getViewportHeight()-a-this.getSize().height;var d=Math.max(a,g,this.minHeight||0)-e-2;if((this.shadow!=undefined)&&(this.shadow!=false)){d-=this.list.shadow.offset}c=Math.min(c,d,this.maxHeight);if(Ext.isIE&&b.scrollWidth>b.offsetWidth){c+=20}this.innerList.setHeight(c+2);this.list.beginUpdate();this.list.setHeight(c+e);this.list.alignTo(this.el,this.listAlign);this.list.endUpdate()}});Ext.define("Ozone.ux.DashboardSplitter",{extend:"Ext.resizer.Splitter",alias:["widget.dashboardsplitter","widget.Ozone.ux.DashboardSplitter"],width:3,height:3,cls:"dashboard-splitter",performCollapse:false,initComponent:function(){this.on("dragend",this.doResize,this);this.callParent(arguments)},doResize:function(c,n,m,b){var a=this.ownerCt;if(a.items.getCount()==3&&!a.rendering){var k=a.items.getAt(0);var u=a.items.getAt(2);var g=(k.initialConfig.htmlText=="Variable");var w,q,r;var d,t,j;var v,p,e;var h=(this.orientation==="vertical");v=a.getWidth();p=a.getHeight();w=k.getWidth();q=k.getHeight();d=v-w-this.width;t=p-q-this.height;delete k.initialConfig.flex;delete k.initialConfig.width;delete k.initialConfig.height;delete k.flex;delete u.initialConfig.flex;delete u.initialConfig.width;delete u.initialConfig.height;delete u.flex;if(k.initialConfig.htmlText){e=k.initialConfig.htmlText.charAt(k.initialConfig.htmlText.length-1)}else{if(u.initialConfig.htmlText){e=u.initialConfig.htmlText.charAt(u.initialConfig.htmlText.length-1)}else{e="%"}}if(e==="%"){if(h){r=Math.round((w/v)*100)}else{r=Math.round((q/p)*100)}j=100-r;k.initialConfig.flex=k.flex=r/100;k.initialConfig.htmlText=r+"%";if(k.textEl){k.textEl.update(r+"%")}u.initialConfig.flex=u.flex=j/100;if(u.textEl){u.textEl.update(j+"%")}u.initialConfig.htmlText=j+"%"}else{if(g){if(h){j=d;u.initialConfig.width=j;u.width=j}else{j=t;u.initialConfig.height=j;u.height=j}u.initialConfig.htmlText=j+"px";if(u.textEl){u.textEl.update(j+"px")}k.initialConfig.htmlText="Variable";if(k.textEl){k.textEl.update("Variable")}k.initialConfig.flex=k.flex=1}else{if(h){r=w;k.initialConfig.width=r;k.width=r}else{r=q;k.initialConfig.height=r;k.height=r}k.initialConfig.htmlText=r+"px";if(k.textEl){k.textEl.update(r+"px")}u.initialConfig.htmlText="Variable";if(u.textEl){u.textEl.update("Variable")}u.initialConfig.flex=u.flex=1}}if(k.dashboard){k.dashboard.hasChanged=true}}}});Ext.define("Ozone.ux.AutoHideLoadMask",{extend:"Ext.LoadMask",alias:["widget.autohideloadmask"],initComponent:function(){var a=this;a.callParent(arguments);Ext.EventManager.on(window,"error",function(){a.hide()})},show:function(){var a=this;a.callParent(arguments);setTimeout(function(){a.hide()},30000)}});Ext.define("Owf.menu.Item",{extend:"Ext.menu.Item",alias:"widget.owfmenuitem",renderTpl:['<tpl if="plain">',"{text}","</tpl>",'<tpl if="!plain">','<a id="{id}-itemEl" class="'+Ext.baseCSSPrefix+'menu-item-link" style="padding-left: 5px;" href="{href}" <tpl if="hrefTarget">target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on">','<span id="{id}-textEl" class="'+Ext.baseCSSPrefix+'menu-item-text" <tpl if="menu">style="margin-right: 17px;"</tpl> >{text}</span>','<tpl if="menu">','<img id="{id}-arrowEl" src="'+(Ext.isIE?"../themes/owf-ext-theme/resources/themes/images/owf-ext/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==")+'" class="'+Ext.baseCSSPrefix+'menu-item-arrow" />',"</tpl>","</a>","</tpl>"]});var Ozone=Ozone||{};Ozone.util=Ozone.util||{};Ozone.util.Transport={version:Ozone.version.owfversion+Ozone.version.preference};Ozone.util.Transport.send=function(b){if(Ozone.log){Ozone.log.getDefaultLogger().debug("Transport Send",b.url,b.method,b.content)}var a=function(m){if(m==undefined||m==null){m=""}var n=m.indexOf("<body");if(n>-1){n=m.indexOf(">",n)+1;var e=m.indexOf("</body>",n);if(e>-1){m=m.substring(n,e)}else{m=m.substring(n)}}if(!Ozone.Msg){Ozone.util.ErrorDlg.show(m,200,50)}else{Ozone.Msg.alert("Server Error",m,null,this,{cls:"owfAlert"})}};if(!b.onFailure){b.onFailure=function(e){a(e)}}var j=b.method;var h=false;if(j=="PUT"||j=="DELETE"){j="POST"}if(j=="POST"){h=true}if(b.content==null){b.content={}}if(!(b.autoSendVersion===false)){b.content.version=Ozone.util.Transport.version}if(b.content.state){b.content.state=Ozone.util.toString(b.content.state)}var g=b.content;var d="json";if(b.handleAs!=null){d=b.handleAs}if(Ozone.util.isUrlLocal(b.url)&&!b.forceXdomain){return owfdojo.xhr(j.toUpperCase(),{url:b.url,content:b.content,preventCache:true,sync:b.async==false?true:false,timeout:b.timeout?b.timeout:0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},load:function(n,m){if(Ozone.log){Ozone.log.getDefaultLogger().debug("Transport AJAX Return",n)}if(d=="json"){try{var p=Ozone.util.parseJson(n);b.onSuccess(p)}catch(q){b.onFailure(q.name+" : "+q.message)}}else{b.onSuccess(n)}},error:function(m,e){if(m.dojoType=="cancel"){return}if(m.status!=0){if(b.ignoredErrorCodes!=null&&b.ignoredErrorCodes.length>0&&owfdojo.indexOf(b.ignoredErrorCodes,m.status)>-1){b.onSuccess({})}else{b.onFailure(m.responseText,m.status)}}}},h)}else{try{var j=b.method;if(j=="PUT"||j=="DELETE"){j="POST"}var c=owfdojox.io.windowName.send(j.toUpperCase(),{url:b.url,content:g,preventCache:true,timeout:b.timeout?b.timeout:20000,load:function(e){try{var m=null;if(e&&typeof(e)==="string"){m=Ozone.util.parseJson(e)}else{m=e}if(m&&m.message&&m.message=="Timeout"){return b.onFailure("Error: Request timed out")}if(m.status===200){if(Ozone.log){Ozone.log.getDefaultLogger().debug("Transport AJAX Return",m.data)}if(d=="json"){b.onSuccess(m.data)}else{b.onSuccess(e)}}else{if(m.status===500||m.status===401){b.onFailure(m.data)}else{if(b.ignoredErrorCodes!=null&&b.ignoredErrorCodes.length>0&&owfdojo.indexOf(b.ignoredErrorCodes,m.status)>-1){b.onSuccess({})}else{b.onFailure(m.data,m.status)}}}return m}catch(n){b.onFailure(n.name+" : "+n.message)}},error:function(e){if(e.dojoType=="cancel"){return}if(e instanceof Error){b.onFailure(e.name+" : "+e.message)}else{b.onFailure(e)}}});return c}catch(k){b.onFailure(k.name+" : "+k.message)}}};Ozone.util.Transport.sendAndForget=function(a){var a=a;if(Ozone.log){Ozone.log.getDefaultLogger().debug("Transport SendAndForget",a.url,a.method,a.content)}var g=a.method;if(g=="PUT"||g=="DELETE"){g="POST"}var d=false;if(g=="POST"){d=true}if(a.content==null){a.content={}}if(a.autoSendVersion===false){a.content.version=Ozone.util.Transport.version}if(a.content.state){a.content.state=Ozone.util.toString(a.content.state)}var c=null;if(g=="GET"){c=owfdojo.objectToQuery(a.content)}else{c=a.content}if(Ozone.util.isUrlLocal(a.url)){owfdojo.xhr(g.toUpperCase(),{url:a.url,content:a.content,preventCache:true,sync:a.async==false?false:true},d)}else{try{var g=a.method;if(g=="PUT"||g=="DELETE"){g="POST"}var b=owfdojox.io.windowName.send(g.toUpperCase(),{url:a.url,content:c,preventCache:true})}catch(h){if(!Ozone.Msg){Ozone.util.ErrorDlg.show(Ozone.util.ErrorMessageString.sendAndForget,h.name+" : "+h.message,200,50)}else{Ozone.Msg.alert(Ozone.util.ErrorMessageString.sendAndForget,h.name+" : "+h.message)}}}};Ozone.util.Transport.sendToFirst=function(a){var b=a.urls.shift();if(b===undefined){if(a.onLastFailure!==undefined){a.onLastFailure()}return}var c=function(){Ozone.util.Transport.sendToFirst({urls:a.urls,method:a.method,onSuccess:a.onSuccess,onLastFailure:a.onLastFailure,content:a.content})};Ozone.util.Transport.send({url:b,method:a.method,onSuccess:a.onSuccess,onFailure:c,content:a.content})};Ext.define("Ozone.ux.layout.container.boxOverflow.Menu",{extend:"Ext.layout.container.boxOverflow.Menu",alternateClassName:"Ext.layout.container.boxOverflow.StyleableMenu",createMenu:function(a,c){var m=this,j=m.layout,n=j.parallelBefore,e=j.parallelPrefix,b=c[e],h=a.boxes,d=0,k=h.length,g;if(!m.menuTrigger){m.createInnerElements();m.menu=Ext.create("Ext.menu.Menu",{componentCls:m.componentCls?m.componentCls:"widgetmenubar",listeners:{scope:m,beforeshow:m.beforeMenuShow}});m.menuTrigger=Ext.create("Ext.button.Button",{ownerCt:m.layout.owner,iconCls:m.layout.owner.menuTriggerCls,ui:j.owner instanceof Ext.toolbar.Toolbar?"default-toolbar":"default",menu:m.menu,getSplitCls:function(){return""},renderTo:m.afterCt})}m.showTrigger();b-=m.afterCt.getWidth();m.menuItems.length=0;for(;d<k;d++){g=h[d];if(g[n]+g[e]>b){m.menuItems.push(g.component);g.component.hide()}}}});var Ozone=Ozone||{};Ozone.pref=Ozone.pref||{};(function(d,a,e){Ozone.pref.PrefServer=function(m){if(m===e||m==="null"||m.indexOf("$")!==-1||m.length===0){}else{if(m.lastIndexOf("/")===(m.length-1)){m=m.substring(0,m.length-1)}}var j=function(t){t.method="GET";t.async=true;Ozone.util.Transport.send(t)};var n=function(t){t.method="DELETE";r(t)};var p=function(t){t.url=m+"/"+t.url;j(t)};var k=function(t){t.method=t.content._method;if(t.onSuccess){if(!t.onFailure){t.onFailure=function(u){alert(Ozone.util.ErrorMessageString.saveUserPreferences+" : "+u)}}Ozone.util.Transport.send(t)}else{Ozone.util.Transport.sendAndForget(t)}};var r=function(t){if(t.method==null){t.method="PUT"}var u={_method:t.method};if(t.json){u={_method:t.method,name:t.json.name,description:t.json.description,guid:t.json.guid,isdefault:t.json.isdefault,locked:t.json.locked,state:t.json.state,layoutConfig:t.json.layoutConfig,stack:t.json.stack};if(t.json.cloned===true){u.cloned=true}if(t.json.bypassLayoutRearrange===true){u.bypassLayoutRearrange=true}}t.content=u;k(t)};var q=function(t){if(t.jsonObject._method===e){if(t.method==null){t.method="PUT"}t.jsonObject._method=t.method}t.json=t.jsonObject;r(t)};var h=function(t){var u={name:t.name,description:t.description,guid:t.guid,isdefault:t.isdefault,locked:t.locked,state:t.state,layoutConfig:typeof t.layoutConfig==="string"?t.layoutConfig:Ozone.util.toString(t.layoutConfig),stack:t.stack};return u};return{version:Ozone.version.owfversion+Ozone.version.preference,getUrl:function(){return m},setUrl:function(t){m=t},getDashboard:function(t){t.url=m+"/dashboard/"+t.dashboardId;j(t)},getDefaultDashboard:function(t){t.url=m+"/dashboard?isdefault=true";t.method="POST";Ozone.util.Transport.send(t)},setDefaultDashboard:function(t){t.url=m+"/dashboard/"+t.dashboardId+"?isdefault="+t.isDefault;t.method="PUT";r(t)},createOrUpdateDashboard:function(t){t.url=m+"/dashboard/"+t.json.guid;var u=h(t.json);u.bypassLayoutRearrange=true;t.method=t.saveAsNew?"POST":"PUT";t.jsonObject=u;q(t)},cloneDashboard:function(t){t.url=m+"/dashboard/"+t.json.guid;var u=h(t.json);u.cloned=true;t.method="POST";t.jsonObject=u;q(t)},updateAndDeleteDashboards:function(t){t.url=m+"/dashboard";var u={_method:"PUT",viewsToUpdate:Ozone.util.toString(t.viewsToUpdate),viewGuidsToDelete:Ozone.util.toString(t.viewGuidsToDelete),updateOrder:t.updateOrder};t.method="POST";t.content=u;Ozone.util.Transport.send(t)},deleteDashboard:function(t){t.url=m+"/dashboard/"+t.dashboardId;n(t)},findDashboards:function(t){t.url="dashboard";p(t)},findDashboardsByType:function(t){if(typeof t.onSuccess==="function"){var u={data:[],results:0,success:true};t.onSuccess(u)}},getWidget:function(t){t.url=m+"/widget/"+t.widgetId;if(t.universalName){t.url+="?universalName="+t.universalName}j(t)},findWidgets:function(t){t.url=m+"/widget";if(!t.userOnly){t.url+="/listUserAndGroupWidgets"}var v={_method:"GET"};if(t.searchParams){if(t.searchParams.widgetName&&t.searchParams.widgetName.length>0){var u=t.searchParams.widgetName;if(!t.searchParams.widgetNameExactMatch){u="%"+u+"%"}v.widgetName=u}if(t.searchParams.widgetVersion&&t.searchParams.widgetVersion.length>0){v.widgetVersion=t.searchParams.widgetVersion}if(t.searchParams.widgetGuid&&t.searchParams.widgetGuid.length>0){v.widgetGuid=t.searchParams.widgetGuid}if(t.searchParams.universalName&&t.searchParams.universalName.length>0){v.universalName=t.searchParams.universalName}if(t.searchParams.group_id){v.group_id=t.searchParams.group_id}}t.method="POST";t.content=v;Ozone.util.Transport.send(t)},updateAndDeleteWidgets:function(t){t.url=m+"/widget";var u={_method:"PUT",widgetsToUpdate:Ozone.util.toString(t.widgetsToUpdate),widgetGuidsToDelete:Ozone.util.toString(t.widgetGuidsToDelete),updateOrder:t.updateOrder};t.method="POST";t.content=u;Ozone.util.Transport.send(t)},getUserPreference:function(t){t.url=m+"/preference/"+t.namespace+"/"+t.name;t.ignoredErrorCodes=[404];j(t)},doesUserPreferenceExist:function(t){t.url=m+"/hasPreference/"+t.namespace+"/"+t.name;j(t)},getCurrentUser:function(t){t.url=m+"/person/whoami";j(t)},getServerVersion:function(t){t.url=m+"/server/resources";j(t)},setUserPreference:function(t){t.url=m+"/preference/"+t.namespace+"/"+t.name;if(t.method==null){t.method="PUT"}t.content={_method:t.method,value:t.value};if(t.onSuccess){if(!t.onFailure){t.onFailure=function(u){alert(Ozone.util.ErrorMessageString.saveUserPreferences+" : "+u)}}Ozone.util.Transport.send(t)}else{Ozone.util.Transport.sendAndForget(t)}},deleteUserPreference:function(t){t.method="DELETE";t.ignoredErrorCodes=[404];t.path=t.name;Ozone.pref.PrefServer.setUserPreference(t)},getDependentWidgets:function(t){t.url=m+"/widgetDefinition/dependents";t.method="POST";if(!t.content){t.content={}}Ozone.util.Transport.send(t)},getDependentPersonWidgets:function(t){t.url=m+"/personWidgetDefinition/dependents";t.method="POST";if(!t.content){t.content={}}Ozone.util.Transport.send(t)},deleteWidgetDefs:function(t){t.url=m+"/widgetDefinition";t.method="DELETE";if(!t.content){t.content={}}Ozone.util.Transport.send(t)}}};var b=Ozone.util.parseWindowNameData();var c=null;if(b!=null&&b.preferenceLocation!=null){c=b.preferenceLocation}else{c=Ozone.config.prefsLocation}Ozone.pref.PrefServer=Ozone.pref.PrefServer(c);if(c==null){for(var g in Ozone.pref.PrefServer){if(typeof Ozone.pref.PrefServer[g]=="function"){Ozone.pref.PrefServer[g]=function(){}}}}}(window,document));var gadgets=gadgets||{};gadgets.util=function(){function g(){var n;var m=document.location.href;var j=m.indexOf("?");var k=m.indexOf("#");if(k===-1){n=m.substr(j+1)}else{n=[m.substr(j+1,k-j-1),"&",m.substr(k+1)].join("")}return n.split("&")}var d=null;var c={};var e=[];var a={0:false,10:true,13:true,34:true,39:true,60:true,62:true,92:true,8232:true,8233:true};function b(j,k){return String.fromCharCode(k)}function h(j){c=j["core.util"]||{}}if(gadgets.config){gadgets.config.register("core.util",null,h)}return{getUrlParameters:function(){if(d!==null){return d}d={};var p=g();var t=window.decodeURIComponent?decodeURIComponent:unescape;for(var m=0,k=p.length;m<k;++m){var r=p[m].indexOf("=");if(r===-1){continue}var q=p[m].substring(0,r);var n=p[m].substring(r+1);n=n.replace(/\+/g," ");d[q]=t(n)}return d},makeClosure:function(p,r,q){var n=[];for(var m=2,k=arguments.length;m<k;++m){n.push(arguments[m])}return function(){var t=n.slice();for(var v=0,u=arguments.length;v<u;++v){t.push(arguments[v])}return r.apply(p,t)}},makeEnum:function(k){var n={};for(var m=0,j;j=k[m];++m){n[j]=j}return n},getFeatureParameters:function(j){return typeof c[j]==="undefined"?null:c[j]},hasFeature:function(j){return typeof c[j]!=="undefined"},registerOnLoadHandler:function(j){e.push(j)},runOnLoadHandlers:function(){for(var m=0,k=e.length;m<k;++m){e[m]()}},escape:function(k,q){if(!k){return k}else{if(typeof k==="string"){return gadgets.util.escapeString(k)}else{if(typeof k==="array"){for(var p=0,m=k.length;p<m;++p){k[p]=gadgets.util.escape(k[p])}}else{if(typeof k==="object"&&q){var n={};for(var r in k){if(k.hasOwnProperty(r)){n[gadgets.util.escapeString(r)]=gadgets.util.escape(k[r],true)}}return n}}}}return k},escapeString:function(q){var m=[],p,r;for(var n=0,k=q.length;n<k;++n){p=q.charCodeAt(n);r=a[p];if(r===true){m.push("&#",p,";")}else{if(r!==false){m.push(q.charAt(n))}}}return m.join("")},unescapeString:function(j){return j.replace(/&#([0-9]+);/g,b)}}}();gadgets.util.getUrlParameters();var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();var gadgets=gadgets||{};gadgets.rpc=function(){var F="__cb";var L="";var j="__g2c_rpc";var g="__c2g_rpc";var d="GRPC____NIXVBS_wrapper";var q="GRPC____NIXVBS_get_wrapper";var z="GRPC____NIXVBS_handle_message";var J="GRPC____NIXVBS_create_channel";var w={};var p={};var E=[];var M={};var B={};var y={};var x=0;var h={};var k={};var K={};var b={};if(gadgets.util){b=gadgets.util.getUrlParameters()}y[".."]=b.rpctoken||b.ifpctok||0;var u=2000;var S={};var v={};function c(){return typeof window.postMessage==="function"?"wpm":typeof window.postMessage==="object"?"wpm":typeof document.postMessage==="function"?"dpm":window.ActiveXObject?"nix":navigator.product==="Gecko"?"fe":"ifpc"}function t(){if(r==="dpm"||r==="wpm"){var V=function(W){P(gadgets.json.parse(W.data))};if(typeof window.addEventListener!="undefined"){window.addEventListener("message",V,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onmessage",V)}}}if(r==="nix"){if(typeof window[q]!=="unknown"){window[z]=function(W){P(gadgets.json.parse(W))};window[J]=function(W,Y,X){if(y[W]==X){w[W]=Y}};var T="Class "+d+"\n Private m_Intended\nPrivate m_Auth\nPublic Sub SetIntendedName(name)\n If isEmpty(m_Intended) Then\nm_Intended = name\nEnd If\nEnd Sub\nPublic Sub SetAuth(auth)\n If isEmpty(m_Auth) Then\nm_Auth = auth\nEnd If\nEnd Sub\nPublic Sub SendMessage(data)\n "+z+"(data)\nEnd Sub\nPublic Function GetAuthToken()\n GetAuthToken = m_Auth\nEnd Function\nPublic Sub CreateChannel(channel, auth)\n Call "+J+"(m_Intended, channel, auth)\nEnd Sub\nEnd Class\nFunction "+q+"(name, auth)\nDim wrap\nSet wrap = New "+d+"\nwrap.SetIntendedName name\nwrap.SetAuth auth\nSet "+q+" = wrap\nEnd Function";try{window.execScript(T,"vbscript")}catch(U){r="ifpc"}}}}var H=null;function Q(T){if(T.charAt(0)!="{"){return T}else{var U=gadgets.json.parse(T);var V=U.id;return gadgets.json.stringify({id:U.id})}}var r=c();t();p[L]=function(){};p[F]=function(U,T){var V=h[U];if(V){delete h[U];V(T)}};function N(U,T){if(k[U]){return}if(r==="fe"){try{var W=document.getElementById(U);W[j]=function(Y){P(gadgets.json.parse(Y))}}catch(V){}}if(r==="nix"){try{var W=document.getElementById(U);var X=window[q](U,T);W.contentWindow.opener=X}catch(V){}}k[U]=true}function m(V){var X=gadgets.json.stringify;var T=[];for(var W=0,U=V.length;W<U;++W){T.push(encodeURIComponent(X(V[W])))}return T.join("&")}function P(U){if(U&&typeof U.s==="string"&&typeof U.f==="string"&&U.a instanceof Array){U.f=Q(U.f);if(y[U.f]){if(y[U.f]!=U.t){throw new Error("Invalid auth token.")}}if(U.c){U.callback=function(V){gadgets.rpc.call(U.f,F,null,U.c,V)}}var T=(p[U.s]||p[L]).apply(U,U.a);if(U.c&&typeof T!="undefined"){gadgets.rpc.call(U.f,F,null,U.c,T)}}}function A(T,W,Z,X){try{if(Z!=".."){var V=w[".."];if(!V&&window.opener&&"GetAuthToken" in window.opener){V=window.opener;if(V.GetAuthToken()==y[".."]){var U=y[".."];V.CreateChannel(window[q]("..",U),U);w[".."]=V;window.opener=null}}if(V){V.SendMessage(X);return}}else{if(w[T]){w[T].SendMessage(X);return}}}catch(Y){}I(T,W,Z,X)}function e(U,V,aa,W,Y){try{if(aa!=".."){var T=window.frameElement;if(typeof T[j]==="function"){if(typeof T[j][g]!=="function"){T[j][g]=function(ab){P(gadgets.json.parse(ab))}}T[j](W);return}}else{var Z=document.getElementById(U);if(typeof Z[j]==="function"&&typeof Z[j][g]==="function"){Z[j][g](W);return}}}catch(X){}I(U,V,aa,W,Y)}function I(ae,ac,ad,Y,aa){var W=gadgets.rpc.getRelayUrl(ae);if(!W){throw new Error("No relay file assigned for IFPC")}var T=null,U=[];if(B[ae]){T=[W,"#",m([ad,x,1,0,m([ad,ac,"","",ad].concat(aa))])].join("");U.push(T)}else{T=[W,"#",encodeURIComponent(ae),"&",ad,"@",x,"&"].join("");if(!v[ae]){U.push([T,1,"&",0,"&",,encodeURIComponent(Y)].join(""))}else{var af=encodeURIComponent(Y),Z=u-T.length,ab=Math.ceil(af.length/Z),X=0,V;while(af.length>0){V=af.substring(0,Z);af=af.substring(Z);U.push([T,ab,"&",X,"&",V].join(""));X+=1}}}do{C(U.shift(),ae)}while(U.length>0);return true}function a(T){if(!T){return false}if(T==".."){return false}var U=document.getElementById(T);if(U){return false}if(typeof _childWindows==="undefined"){return false}return true}window._childWindowMessageQueue=[];window._childWindowMessageId=0;window._getChildWindowMessage=function(W){var V=_childWindowMessageQueue;for(var U=0;U<V.length;U++){var T=V[U];if(T.id==W){return T}}};function n(T,V){for(var U=V-1;U>=0;--U){if(typeof T[U]==="undefined"){return false}}return true}function C(X,T){if(a(T)){var Z=window._childWindowMessageId;Z++;window._childWindowMessageQueue.push({id:Z,target:T,src:X});window._childWindowMessageId++;if(window._childWindowMessageQueue.length>20){window._childWindowMessageQueue.shift()}return}var V;for(var U=E.length-1;U>=0;--U){var Y=E[U];try{if(Y&&(Y.recyclable||Y.readyState==="complete")){Y.parentNode.removeChild(Y);if(window.ActiveXObject){E[U]=Y=null;E.splice(U,1)}else{Y.recyclable=false;V=Y;break}}}catch(W){}}if(!V){V=document.createElement("iframe");V.style.border=V.style.width=V.style.height="0px";V.style.visibility="hidden";V.style.position="absolute";V.onload=function(){this.recyclable=true};E.push(V)}V.src=X;setTimeout(function(){document.body.appendChild(V)},0)}function R(X){if(typeof X==="undefined"||X===".."){if(window.parent.opener){return window.parent.opener.parent}return window.parent}X=String(X);var W=null;W=document.getElementById(X);if(W&&W.contentWindow){return W.contentWindow}if(typeof _childWindows!=="undefined"){for(var T=0;T<_childWindows.length;T++){var U=_childWindows[T];try{if(U.document){W=U.document.getElementById(X)}}catch(V){}if(W&&W.contentWindow){return W.contentWindow}}}return null}function G(V,X){var T;if(K[V]!==false){K[V]=false;var W=R(V);try{T=W.gadgets.rpc.receiveSameDomain}catch(U){}}if(typeof T==="function"){T(X);K[V]=true;return true}else{K[V]=false}return false}if(gadgets.config){function O(T){if(T.rpc.parentRelayUrl.substring(0,7)==="http://"){M[".."]=T.rpc.parentRelayUrl}else{var X=document.location.search.substring(0).split("&");var W="";for(var U=0,V;V=X[U];++U){if(V.indexOf("parent=")===0){W=decodeURIComponent(V.substring(7));break}}M[".."]=W+T.rpc.parentRelayUrl}B[".."]=!!T.rpc.useLegacyProtocol}var D={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",D,O)}return{register:function(U,T){if(U==F){throw new Error("Cannot overwrite callback service")}if(U==L){throw new Error("Cannot overwrite default service: use registerDefault")}p[U]=T},unregister:function(T){if(T==F){throw new Error("Cannot delete callback service")}if(T==L){throw new Error("Cannot delete default service: use unregisterDefault")}delete p[T]},registerDefault:function(T){p[""]=T},unregisterDefault:function(){delete p[""]},call:function(ab,X,ac,aa){++x;ab=Q(ab)||"..";if(ac){h[x]=ac}var Z="..";if(ab===".."){Z=Q(window.name)}var V={s:X,f:Z,c:ac?x:0,a:Array.prototype.slice.call(arguments,3),t:y[ab]};if(G(ab,V)){return}var T=gadgets.json.stringify(V);var U=r;if(B[ab]){U="ifpc"}switch(U){case"dpm":var Y=R(ab);var ad=Y.document;if(ad!=null){try{ad.postMessage(T)}catch(W){I(ab,X,Z,T,V.a)}}break;case"wpm":var Y=R(ab);if(Y!=null){try{Y.postMessage(T,M[ab])}catch(W){I(ab,X,Z,T,V.a)}}break;case"nix":A(ab,X,Z,T);break;case"fe":e(ab,X,Z,T,V.a);break;default:I(ab,X,Z,T,V.a);break}},getRelayUrl:function(T){return M[T]},setRelayUrl:function(U,T,W,V){M[U]=T;B[U]=!!W;v[U]=!!V},setAuthToken:function(T,U){y[T]=U;N(T,U)},getRelayChannel:function(){return r},receive:function(T){if(T.length>4){var Y=T[1],X=parseInt(T[2],10),V=parseInt(T[3],10),W=T[T.length-1],U=X===1;if(X>1){if(!S[Y]){S[Y]=[]}S[Y][V]=W;if(n(S[Y],X)){W=S[Y].join("");delete S[Y];U=true}}if(U){P(gadgets.json.parse(decodeURIComponent(W)))}}},receiveSameDomain:function(T){T.a=Array.prototype.slice.call(T.a);window.setTimeout(function(){P(T)},0)}}}();var gadgets=gadgets||{};gadgets.pubsubrouter=(function(){var e;var h={};var j;var a;var g;var d;var c={};function b(n,r,v,t){var k=this.f;var p=e(k);if(p){switch(n){case"subscribe":if(j&&j(k,r)){break}if(!h[r]){h[r]={}}h[r][k]=true;break;case"unsubscribe":if(a&&a(k,r)){break}if(h[r]){delete h[r][k]}if(c[r]&&k==".."){delete c[r]}break;case"publish":if(g&&g(k,r,v)){break}var q=h[r];if(q){for(var u in q){if(document.getElementById(u)!=null){if(d&&!d(p,u,r,v)&&(t==null||u==t)){gadgets.rpc.call(u,"pubsub",null,r,p,v)}}else{if(u==".."&&(t==null||u==t)){var m=c[r];if(typeof m==="function"){m(p,v,r)}}else{if(typeof _childWindows!=="undefined"){gadgets.rpc.call(u,"pubsub",null,r,p,v)}else{delete q[u]}}}}}break;default:throw new Error("Unknown pubsub command")}}}return{init:function(k,m){if(typeof k!="function"){throw new Error("Invalid handler")}if(typeof m==="object"){j=m.onSubscribe;a=m.onUnsubscribe;g=m.onPublish;d=m.onRoute}e=k;gadgets.rpc.register("pubsub",b)},publish:function(n,m,k){b.call({f:".."},"publish",n,m,k)},subscribe:function(m,k){c[m]=k;b.call({f:".."},"subscribe",m)},unsubscribe:function(k){b.call({f:".."},"unsubscribe",k)}}})();var Ozone=Ozone||{};Ozone.eventing=Ozone.eventing||{};Ozone.eventing.rpc=Ozone.eventing.rpc||{};Ozone.eventing.rpc.priv=Ozone.eventing.rpc.priv||{};if(typeof JSON==="undefined"){JSON=gadgets.json}(function(j){var e="_widgetReady",g="_getWidgetReady",d={},a={},b={},c={};function h(k){k=k||{};j.getIframeId=k.getIframeId;function p(v,w){gadgets.rpc.call(j.getIframeId(v),"DIRECT_MESSAGEL_CLIENT",null,w)}gadgets.rpc.register("DIRECT_MESSAGE",p);function r(w,v,x,y){gadgets.rpc.call(j.getIframeId(w),"FUNCTION_CALL_CLIENT",null,w,v,x,y)}gadgets.rpc.register("FUNCTION_CALL",r);function m(x,w,y,v){gadgets.rpc.call(j.getIframeId(w),"FUNCTION_CALL_RESULT_CLIENT",null,x,y,v)}gadgets.rpc.register("FUNCTION_CALL_RESULT",m);function q(x,v){var w=a[v]||[];w.push(x);a[v]=w}gadgets.rpc.register("ADD_EVENT",q);function u(v,z){var x=a[v];for(var w=0;w<x.length;w++){var y=x[w];gadgets.rpc.call(j.getIframeId(y),"EVENT_CLIENT",null,v,z)}}gadgets.rpc.register("CALL_EVENT",u);function t(w,x){var v=document.getElementById(j.getIframeId(w));setTimeout(function(){document.body.removeChild(v.parentNode)},500)}gadgets.rpc.register("CLOSE_EVENT",t);function n(v,x){var w=d[v];if(b[v]==null){b[v]=[]}if(x!=null){b[v].push(x)}return w!=null?w:[]}gadgets.rpc.register("GET_FUNCTIONS",n);j.priv.clientToldUsFunctionsHandler=function(y,w,x){var v=JSON.parse(y).id;d[v]=x};j.priv.clientToldUsFunctionsHandlerAfterInit=function(C,B){var z=JSON.parse(C).id;if(!d[z]){d[z]=B;return}var A;for(var y=0,v=B.length;y<v;y++){A=false;for(var x=0,w=d[z].length;x<w;x++){if(B[y]===d[z][x]){A=true;break}}if(A===false){d[z].push(B[y])}}};gadgets.rpc.register("register_functions",function(w,v){j.priv.clientToldUsFunctionsHandlerAfterInit(w,v)});gadgets.rpc.register(e,function(y){c[y]=true;var z=b[y];if(z!=null){for(var w=0,v=z.length;w<v;w++){var x=z[w];if(x!=null){gadgets.rpc.call(x,e,null,y)}}}});gadgets.rpc.register(g,function(v,w){return c[v]==true})}j.init=h})(Ozone.eventing.rpc);var Ozone=Ozone?Ozone:{};Ozone.eventing=Ozone.eventing?Ozone.eventing:{};(function(b,a,c){Ozone.eventing.Container=function(){var h={widgetEventingReady:[],onRoute:[],onPublish:[],onSubscribe:[],onUnsubscribe:[]},g={},e={};function d(p,v){if((b.name==="undefined")||(b.name==="")){b.name="ContainerWindowName"+Math.random()}var j=gadgets.json.parse(v);var t=j.useMultiPartMessagesForIFPC;var k=null;if(j.id.charAt(0)!="{"){k=j.id}else{var n=gadgets.json.parse(j.id);var m=n.id;k=gadgets.json.stringify({id:n.id})}gadgets.rpc.setRelayUrl(k,j.relayUrl,false,t);gadgets.rpc.setAuthToken(k,0);for(var q=0,r=h.widgetEventingReady.length;q<r;q++){h.widgetEventingReady[q].fn.call(h.widgetEventingReady[q].scope,p,v)}var u='{"id":"'+b.name+'"}';gadgets.rpc.call(k,"after_container_init",null,b.name,u)}return{name:"OWF",version:Ozone.version.owfversion+Ozone.version.eventing,init:function(j){e=j||{};this.setContainerRelay(e.containerRelay!=null?e.containerRelay:Ozone.util.getContainerRelay());if(e.widgetEventingReady!=null){h.widgetEventingReady.push(e.widgetEventingReady)}if(e.onRoute!=null){h.onRoute.push(e.onRoute)}if(e.onPublish!=null){h.onPublish.push(e.onPublish)}if(e.onSubscribe!=null){h.onSubscribe.push(e.onSubscribe)}if(e.onUnsubscribe!=null){h.onUnsubscribe.push(e.onUnsubscribe)}if(e.getIframeId!=null){this.getIframeId=owfdojo.hitch(e.getIframeId.scope,e.getIframeId.fn)}if(e.getOpenedWidgets!=null){this.getOpenedWidgets=owfdojo.hitch(e.getOpenedWidgets.scope,e.getOpenedWidgets.fn)}gadgets.rpc.register("LIST_WIDGETS",this.getOpenedWidgets);Ozone.eventing.rpc.init({getIframeId:this.getIframeId});gadgets.rpc.register("container_init",function(k,m,n){Ozone.eventing.rpc.priv.clientToldUsFunctionsHandler(k,m,n);d(k,m)});gadgets.pubsubrouter.init(function(k){return k},{onRoute:function(n,q,t,r){var p=true;for(var m=0,k=h.onRoute.length;m<k;m++){p=p&&!(h.onRoute[m].fn.call(h.onRoute[m].scope,n,q,t,r)===false)}return !p},onPublish:function(n,r,q){var p=true;for(var m=0,k=h.onPublish.length;m<k;m++){p=p&&!(h.onPublish[m].fn.call(h.onPublish[m].scope,n,r,q)===false)}return !p},onSubscribe:function(n,q){var p=true;for(var m=0,k=h.onSubscribe.length;m<k;m++){p=p&&!(h.onSubscribe[m].fn.call(h.onSubscribe[m].scope,n,q)===false)}return !p},onUnsubscribe:function(n,q){var p=true;for(var m=0,k=h.onUnsubscribe.length;m<k;m++){p=p&&!(h.onUnsubscribe[m].fn.call(h.onUnsubscribe[m].scope,n,q)===false)}return !p}})},widgetEventingReady:function(k,j){h.widgetEventingReady.push({fn:k,scope:j})},onRoute:function(k,j){h.onRoute.push({fn:k,scope:j})},onPublish:function(k,j){h.onPublish.push({fn:k,scope:j})},onSubscribe:function(k,j){h.onSubscribe.push({fn:k,scope:j})},onUnsubscribe:function(k,j){h.onUnsubscribe.push({fn:k,scope:j})},addListener:function(m,k,j){if(h[m]!=null){h[m].push({fn:k,scope:j})}},removeListener:function(p,n,m){if(h[p]!=null){for(var k=0;k<h[p].length;k++){var j=h[p][k];if(j.fn==n&&j.scope==m){h[p].splice(k,1)}}}},clearListeners:function(j){if(h[j]!=null){h[j]=[]}},clearAllListeners:function(){h={widgetEventingReady:[],onRoute:[],onPublish:[],onSubscribe:[],onUnsubscribe:[]}},getIframeId:function(j){return g[j]},getOpenedWidgets:function(){return g.length!=null?g:0},getIframeProperties:function(u,z,t,y,m,x){u||(u=t.url);var A=Ozone.util.toString(this.generateIframeId(z));var n=this.generateIframeName(u,z,t,y,m,x);var k=Ozone.util.toString(n);var j=Ozone.util.HTMLEncodeReservedJS(A);var p=Ozone.util.HTMLEncodeReservedJS(k);var C=u.split("?");var v=Ozone.util.HTMLEncodeReservedJS(C[0]);var r="";if(C[1]){r="&"+C[1]}r=Ozone.util.HTMLEncodeReservedJS(r);var D='id = "'+j+'" name = "'+p+'" src= "'+v+"?lang="+Ozone.lang.getLanguage()+"&owf=true"+r;if(n.currentTheme){var q=Ozone.util.HTMLEncodeReservedJS(n.currentTheme.themeName);var w=Ozone.util.HTMLEncodeReservedJS(n.currentTheme.themeContrast);var B=n.currentTheme.themeFontSize;D+="&themeName="+q;D+="&themeContrast="+w;D+="&themeFontSize="+B}D+='" ';g[z]=A;g.length!=null?g.length++:g.length=0;return D},generateIframeName:function(k,j,q,p,n,r){var m={id:j,containerVersion:Ozone.version.owfversion,webContextPath:Ozone.config.webContextPath,preferenceLocation:Ozone.config.prefsLocation,relayUrl:this.getContainerRelay(),lang:Ozone.lang.getLanguage(),currentTheme:Ozone.config.currentTheme,owf:true,layout:p||"",url:k,guid:q.widgetGuid,version:q.version||1,locked:r||false};if(n){m.data=n}return m},generateIframeId:function(j){return{id:j}},getContainerRelay:function(){return this.containerRelay},setContainerRelay:function(k){if(k===c||k===""){throw"Ozone.eventing.Container.setContainerRelay was called with a null or empty string. Please provide a valid URL."}var m=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;var j=m.exec(k);if(j[1]===c||j[1]===null||j[1]===""){this.containerRelay=b.location.protocol+"//"+(b.location.host+"/"+k).replace(/\/{2,}/,"/")}else{this.containerRelay=b.location.protocol+"//"+(b.location.host+"/"+j[5]).replace(/\/{2,}/,"/")}},registerHandler:function(j,k){if(this.containerRelay===null){throw"A call was made to Ozone.eventing.Container.registerHandler before the container relay was set. Please call setContainerRelay before attempting to register any handlers."}gadgets.rpc.register(j,k)},send:function(){gadgets.rpc.call.apply(gadgets.rpc,arguments)},subscribe:function(j,k){gadgets.pubsubrouter.subscribe(j,k)},unsubscribe:function(j){gadgets.pubsubrouter.unsubscribe(j)},publish:function(j,m,k){gadgets.pubsubrouter.publish(j,m,k)}}}()}(window,document));OWF=window.OWF?window.OWF:{};(function(b,a,c){OWF.IntentsContainer=function(){var e="_intents",h="_intents_receive",j={onRoute:[],onIntentsReady:[]},k={},g={};function d(t,m,r,x){var p=c;var q={send:OWF.IntentsContainer.send,addListener:OWF.IntentsContainer.addListener,removeListener:OWF.IntentsContainer.removeListener,callback:this.callback};var n=[];for(var u=0,v=j.onRoute.length;u<v;u++){var w=j.onRoute[u].fn.call(j.onRoute[u].scope,t,m,r,x,q);if(w!=null){if(p==null){p=[]}p=p.concat(w)}if(!j.onRoute[u].single){n.push(j.onRoute[u])}}j.onRoute=n;return p}return{init:function(m){g=m||{};if(g.onRoute!=null){j.onRoute=j.onRoute.concat(g.onRoute)}Ozone.eventing.Container.registerHandler(e,d);Ozone.eventing.Container.registerHandler(h,function(t,u){if(k[u]==null){k[u]={}}k[u][owfdojo.toJson(t)]=true;var p=j.onIntentsReady.slice(0);for(var q=0,n=p.length;q<n;q++){p[q].fn.call(p[q].scope,t,u);if(p[q].single){var r=j.onIntentsReady.indexOf(p[q]);if(r>-1){j.onIntentsReady.splice(r,1)}}}return true})},onRoute:function(n,m,p){this.addListener("onRoute",n,m,p)},onIntentsReady:function(n,m,p){this.addListener("onIntentsReady",n,m,p)},send:function(p,v,u,r,m){var q=[].concat(m);var t=0;for(var n=0;n<q.length;n++){if(k[q[n]]!=null&&k[q[n]][owfdojo.toJson(v)]){Ozone.eventing.Container.send(q[n],e,r,p,v,u);t++}}return t==q.length},addListener:function(p,n,m,q){if(j[p]!=null){j[p].push({fn:n,scope:m,single:q})}},removeListener:function(r,q,p){if(j[r]!=null){for(var n=0;n<j[r].length;n++){var m=j[r][n];if(m.fn==q&&m.scope==p){j[r].splice(n,1)}}}},clearListeners:function(m){if(j[m]!=null){j[m]=[]}},clearAllListeners:function(){j={onRoute:[]}}}}()}(window,document));var Ozone=Ozone?Ozone:{};Ozone.launcher=Ozone.launcher?Ozone.launcher:{};Ozone.launcher.WidgetLauncherContainer=function(b){this.launchChannelName="_WIDGET_LAUNCHER_CHANNEL";this.windowManager=null;if(b!=null){this.eventingContainer=b;var a=this;this.eventingContainer.registerHandler(this.launchChannelName,function(c,d){return a.launchWidget(Ozone.util.parseJson(c),Ozone.util.parseJson(d))})}else{throw {name:"WidgetLauncherContainerException",message:"eventingContainer is null"}}};Ozone.launcher.WidgetLauncherContainer.prototype={launchWidget:function(b,a){var d=null;var c=null;d=this.windowManager;if(d!=null){c=d.launchWidgetInstance(b,a)}else{throw {name:"WidgetLauncherContainerException",message:"window_manager is null"}}return c},registerWindowManager:function(a){this.windowManager=a}};var Ozone=Ozone?Ozone:{};Ozone.marketplace=Ozone.marketplace||{};Ozone.marketplace.AddWidgetContainer=function(b){this.addWidgetChannelName="_ADD_WIDGET_CHANNEL";this.windowManager=null;if(b!=null){this.eventingContainer=b;var a=this;this.eventingContainer.registerHandler(this.addWidgetChannelName,function(d,e){var c=Ozone.util.parseJson(e);return a.addWidget(c)})}else{throw {name:"AddWidgetContainerException",message:"eventingContainer is null"}}};Ozone.marketplace.AddWidgetContainer.prototype={addWidget:function(b){var a=b.widgetsJSON;this.processMarketplaceWidgetData(a.baseUrl,a.itemId);return a.itemId},processMarketplaceWidgetData:function(c,b){var a=this;Ozone.util.Transport.send({url:c+"/relationship/getOWFRequiredItems",method:"POST",content:{id:b},onSuccess:function(g){var h=[],j=g.data;for(var e=0,d=j.length;e<d;e++){var k=j[e];h.push(Ext.JSON.encode(a.createOwfWidgetJson(k,b)))}a.submitWidgetList(Ext.JSON.encode(h))},onFailure:function(d){Ext.Msg.alert("Error","Error has occurred while adding widgets from Marketplace")}})},createOwfWidgetJson:function(e,c){var b=[];for(var a=0;a<e.requires.length;a++){b.push(e.requires[a].uuid)}var d={displayName:e.title,description:e.description?e.description:"",imageUrlLarge:e.imageLargeUrl,imageUrlSmall:e.imageSmallUrl,widgetGuid:e.uuid,widgetUrl:e.launchUrl,widgetVersion:e.versionName,singleton:e.owfProperties.singleton,visible:e.owfProperties.visibleInLaunch,background:e.owfProperties.background,isSelected:c==e.id,height:200,width:200,isExtAjaxFormat:true};if(b.length>0){d.directRequired=Ext.JSON.encode(b)}return d},createApprovalTag:function(){var c={};if(Ozone.config.enablePendingApprovalWidgetTagGroup){c={name:Ozone.config.carousel.pendingApprovalTagGroupName,visible:true,position:-1,editable:false}}else{var b=new Date();var a=Ext.Date.format(b,"Y-m-d");c={name:Ozone.config.carousel.approvedTagGroupName+" on "+a,visible:true,position:-1,editable:true}}return c},submitWidgetList:function(a){return owfdojo.xhrPost({url:Ozone.util.contextPath()+"/widget/",sync:true,content:{addExternalWidgetsToUser:true,widgets:a},load:function(d,c){var e=Ext.getCmp("widget-launcher");e.loadLauncherState();var b={dir1:"up",dir2:"left",firstpos1:25,firstpos2:25};$.pnotify({title:Ozone.layout.DialogMessages.added,text:Ozone.layout.DialogMessages.marketplaceWindow_AddSuccessful,type:"success",addclass:"stack-bottomright",stack:b,history:false,sticker:false,icon:false})},error:function(c,b){Ozone.Msg.alert(Ozone.layout.DialogMessages.error,Ozone.layout.DialogMessages.marketplaceWindow_AddWidget,null,null,{cls:"confirmationDialog"})}})},registerWindowManager:function(a){this.windowManager=a}};var Ozone=Ozone?Ozone:{};Ozone.dragAndDrop=Ozone.dragAndDrop?Ozone.dragAndDrop:{};Ozone.dragAndDrop.WidgetDragAndDropContainer=function(a){this.callback=a.callback;this.dragIndicatorText=a.dragIndicatorText?a.dragIndicatorText:"Dragging Data";this.dragIndicator=this.createDragIndicator();this.dragIndicatorTextNode=owfdojo.query("span.ddText",this.dragIndicator)[0];this.eventingContainer=a.eventingContainer;this.eventingContainer.subscribe(this.dragStartName,owfdojo.hitch(this,this.onStartDrag));this.eventingContainer.subscribe(this.dragStopInWidgetName,owfdojo.hitch(this,this.onDragStopInWidget));this.eventingContainer.subscribe(this.dragSendDataName,owfdojo.hitch(this,this.onDragSendData));this.listeners={};this.callbacks={};var b;function c(g,e,h){var d;if(document.createEvent){d=document.createEvent("MouseEvents");d.initMouseEvent(e,true,true,window,1,h.screenX,h.screenY,h.pageX,h.pageY,false,false,false,false,null,null);g.dispatchEvent(d)}else{if(document.createEventObject){d=document.createEventObject();g.fireEvent("on"+e,d)}}}gadgets.rpc.register("_fake_mouse_move",owfdojo.hitch(this,function(j){var g=gadgets.json.parse(j.sender);var k=gadgets.json.stringify({id:g.id});var d=Ext.get(k).getOffsetsTo(Ext.getBody());var h=document.elementFromPoint(d[0]+j.pageX,d[1]+j.pageY);j.pageX+=d[0];j.pageY+=d[1];if(b&&b!==h){if(b.nodeName==="IFRAME"){this.eventingContainer.publish(this.dragOutName,null,b.id)}else{c(b,"mouseout",j);c(h,"mouseover",j)}}if(h&&h.nodeName==="IFRAME"){var e=Ext.get(h.id).getOffsetsTo(Ext.getBody());j.pageX-=e[0];j.pageY-=e[1];gadgets.rpc.call(h.id,"_fire_mouse_move",null,j);this.hideDragIndicator()}else{if(h){c(h,"mousemove",j)}}b=h}));gadgets.rpc.register("_fake_mouse_out",owfdojo.hitch(this,this.hideDragIndicator));gadgets.rpc.register("_fake_mouse_up",owfdojo.hitch(this,function(j){var g=gadgets.json.parse(j.sender);var k=gadgets.json.stringify({id:g.id});var d=Ext.get(k).getOffsetsTo(Ext.getBody());var h=document.elementFromPoint(d[0]+j.pageX,d[1]+j.pageY);j.pageX+=d[0];j.pageY+=d[1];if(h.nodeName==="IFRAME"){var e=Ext.get(h.id).getOffsetsTo(Ext.getBody());j.pageX-=e[0];j.pageY-=e[1];gadgets.rpc.call(h.id,"_fire_mouse_up",null,j)}else{c(h,"mouseup",j)}b=null}))};Ozone.dragAndDrop.WidgetDragAndDropContainer.prototype={dragStart:"dragStart",dragStop:"dragStop",dropReceive:"dropReceive",dragStartName:"_dragStart",dragOverWidgetName:"_dragOverWidget",dragOutName:"_dragOutName",dragStopInContainerName:"_dragStopInContainer",dragStopInWidgetName:"_dragStopInWidget",dragSendDataName:"_dragSendData",dropReceiveDataName:"_dropReceiveData",version:Ozone.version.owfversion+Ozone.version.dragAndDrop,dragDropData:null,createDragIndicator:function(){return owfdojo.create("span",{className:"ddBox ddBoxCannotDrop",style:"display: none",innerHTML:'<span class="ddText">'+this.dragIndicatorText+"</span>"},owfdojo.body())},onStartDrag:function(a,b){this.dragging=true;if(owfdojo.isFunction(this.callbacks[this.dragStart])){if(this.callbacks[this.dragStart](a,b)===false){return}}this.dragIndicatorText=b.dragDropLabel;if(this.listeners.onmousemove==null){this.listeners.onmousemove=owfdojo.connect(document,"onmousemove",this,this.mouseMove)}if(this.listeners.onmouseup==null){this.listeners.onmouseup=owfdojo.connect(document,"onmouseup",this,this.mouseUp)}if(this.listeners.onmouseout==null){this.listeners.onmouseout=owfdojo.connect(document,"onmouseout",this,this.mouseOut)}},getMouseCoordinates:function(b){var a=null;if(b.pageX||b.pageY){a={x:b.pageX,y:b.pageY}}else{a={x:b.clientX+document.body.scrollLeft-document.body.clientLeft,y:b.clientY+document.body.scrollTop-document.body.clientTop}}return a},mouseMove:function(h){var j=null;var b=null;var k=this.getMouseCoordinates(h);var g=k.x;var d=k.y;this.hideDragIndicator();if(h===undefined){h=window.event}this.dragIndicator.style.top=d+19+"px";if(owfdojo.isIE){j=document.body.clientWidth;b=document.body.clientHeight}else{j=window.innerWidth;b=window.innerHeight}var c=j-100;if((g<j)&&(g>c)){this.dragIndicator.style.left=g-88+"px"}else{this.dragIndicator.style.left=g+12+"px"}var a=b-40;if((d>a)&&(d<b)){this.dragIndicator.style.top=d-30+"px"}this.dragIndicatorTextNode.innerHTML=this.dragIndicatorText;owfdojo.style(this.dragIndicator,{display:"block"})},onDragStopInWidget:function(a,b){this.hideDragIndicator();for(l in this.listeners){owfdojo.disconnect(this.listeners[l]);this.listeners[l]=null}this.eventingContainer.publish(this.dropReceiveDataName,this.dragDropData,a);this.eventingContainer.publish(this.dragStopInContainerName,null);this.dragging=false;if(owfdojo.isFunction(this.callbacks[this.dragStop])){this.callbacks[this.dragStop](b)}},mouseUp:function(){this.hideDragIndicator();for(l in this.listeners){owfdojo.disconnect(this.listeners[l]);this.listeners[l]=null}this.eventingContainer.publish(this.dragStopInContainerName,null);this.dragging=false;if(owfdojo.isFunction(this.callbacks[this.dragStop])){this.callbacks[this.dragStop]()}},mouseOut:function(a){if(a===undefined){a=window.event}var b=null;if(a.toElement===undefined){b=a.relatedTarget}else{b=a.toElement}if(b){this.hideDragIndicator();this.eventingContainer.publish(this.dragOutName,null)}},onDragSendData:function(a,b){this.dragDropData=b},addCallback:function(b,a){this.callbacks[b]=a},isDragging:function(){return this.dragging},hideDragIndicator:function(){owfdojo.style(this.dragIndicator,{display:"none"})}};var output=output||{};output.console=function(){return{log:function(b){var a=navigator.appName;if(a=="Microsoft Internet Explorer"){}else{console.log(b)}}}}();var guid=guid||{};var Ozone=Ozone||{};Ozone.util=Ozone.util||{};guid.util=function(){function a(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return{guid:function(){return(a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a())}}}();Ozone.util.guid=function(){return guid.util.guid()};Ext.define("Ozone.data.JsonProxy",{extend:"Ext.data.ClientProxy",alias:"proxy.ozone.data.jsonproxy",constructor:function(a){this.jsonRetriever=a.jsonRetriever;this.callParent([a])},read:function(c,b,a){this.jsonRetriever.retrieve(c,b,a)},processJson:function(b,h,g,c){var a;try{a=this.getReader().readRecords(b);h.resultSet=a;h.setSuccessful();h.setCompleted()}catch(d){this.fireEvent("loadexception",this,null,arg,d);g.call(c,h);return}g.call(c,h)}});Ext.define("Ozone.data.OWFTransportProxy",{extend:"Ext.data.proxy.Server",alias:"proxy.owftransportproxy",constructor:function(a){this.callParent(arguments);if(a.methods){this.methods=a.methods}else{this.methods={read:"GET",load:"GET",create:"POST",update:"PUT",save:"POST",destroy:"DELETE"}}if(a.updateActions){this.updateActions=a.updateActions}if(a.callback){this.callback=a.callback}},doRequest:function(b,h,c){var g=this.getWriter();var e=this.buildRequest(b,h,c);if(b.allowWrite()){e=g.write(e)}b.params=e.params;b.params.owfversion=Ozone.version.owfversion;b.params._method=this.api[b.action].method?this.api[b.action].method:this.methods[b.action];if(this.updateActions&&this.updateActions[b.action]){b.params.update_action=this.updateActions[b.action]}var d=this;var a=function(j,k){j.resultSet=d.reader.readRecords(k);j.setCompleted();j.setSuccessful();if(Ext.isFunction(d.callback)){d.callback(j)}};Ozone.util.Transport.send({url:Ozone.util.contextPath()+this.api[b.action],method:"POST",onSuccess:function(j){a(b,j);h.call(c,b)},onFailure:Ext.bind(function(j){b.setException(j);this.fireEvent("exception",this,j,b)},this),autoSendVersion:false,timeout:null,content:b.params})}});Ext.define("Ozone.data.OWFStore",{extend:"Ext.data.Store",remoteSort:true,constructor:function(b){b=b?b:{};var a=((b.reader&&b.reader.root)?b.reader.root:"data");var c=((b.writer&&b.writer.root)?b.writer.root:"data");if(this.proxy==null){this.proxy=this.proxy||{};Ext.apply(this.proxy,{type:"owftransportproxy",limitParam:"max",pageParam:undefined,startParam:"offset",simpleSortMode:true,sortParam:"sort",directionParam:"order",reader:{type:"json",root:a,totalProperty:"results"},writer:{type:"json",allowSingle:false,encode:true,root:c}});if(b.api){Ext.copyTo(this.proxy,b,"api")}if(b.methods){Ext.copyTo(this.proxy,b,"methods")}if(b.updateActions){Ext.copyTo(this.proxy,b,"updateActions")}if(b.proxy!=null){Ext.apply(this.proxy,b.proxy)}}this.callParent(arguments);if(!this.proxy.hasListener("exception")&&this.enableDefaultExceptionListener){this.proxy.on({exception:{fn:function(k,g,d,j){try{var h=(typeof g)=="string"?Ext.util.JSON.decode(g):g}catch(m){h={errorMsg:g}}Ext.Msg.alert("Server Error!","Error during "+d.action+(h&&h.errorMsg?(":\n "+h.errorMsg):""),function(){},this)},scope:this}})}}});(function(){gadgets.rpc.register("_widget_iframe_ready",function(a){var b=Ext.getCmp(Ozone.util.parseJson(a).id);if(b){b.iframeReady=true}});gadgets.rpc.register("_key_eventing",function(a,d){var c=Ext,b;if(d.focusParent){b=c.get(a);if(b){b.blur()}}if(!d.keydown){Ozone.KeyMap.handleKey(c.apply(d,{fromWidget:true}),a)}else{Ozone.MoveKeyMap.handleKey(c.apply(d,{fromWidget:true}),a)}})})();Ext.define("Ozone.components.tip.QuickTip",{extend:"Ext.tip.QuickTip",alias:"widget.ozonequicktip",cls:"ozonequicktip",onFloatRender:function(){if(this.zIndexManager){this.zIndexManager.register(this)}}});Ext.define("Ozone.components.tip.ToolTip",{extend:"Ext.tip.ToolTip",alias:"widget.ozonetooltip",zIndexManager:Ext.create("Ext.ZIndexManager"),onFloatRender:function(){if(this.zIndexManager){this.zIndexManager.register(this)}}});Ext.define("Ozone.components.WidgetIframeComponent",{extend:"Ext.Component",alias:["widget.widgetiframe"],iframeProperties:null,itemId:"widgetIframe",initComponent:function(){var a=/id\s*=\s*"([^"]*)"/.exec(this.iframeProperties);if(a!=null){this.id=a[1]}a=/name\s*=\s*"([^"]*)"/.exec(this.iframeProperties);if(a!=null){this.name=a[1]}this.autoEl={tag:"iframe",src:/src\s*=\s*"([^"]*)"/.exec(this.iframeProperties)[1],frameBorder:0};if(this.name){this.autoEl.name=this.name}this.callParent(arguments);this.on("afterrender",function(b){Ozone.KeyMap.bindWidgetEvents(b)})},clearSrc:function(){this.getEl().dom.src="about:blank"},isSrcCleared:function(){var a=this.getEl();if(!a){return true}return a.dom.src==="about:blank"}});Ext.define("Ozone.components.focusable.FocusCatch",{extend:"Ext.Component",alias:"widget.focuscatch",cls:"focus-catch",listeners:{afterrender:function(a){Ozone.components.focusable.Focusable.clearOutline(a.getEl())}}});Ext.define("Ozone.components.widget.WidgetBase",{mixins:{circularfocus:"Ozone.components.focusable.CircularFocus"},dashboard:null,pane:null,isWidget:false,widgetStateContainer:null,stateEventChannelName:null,originalStateEvents:[],debugStateEvents:true,focusCls:"x-focus",focusDelay:200,overrides:{showFocusFrame:function(b){this.addCls("x-focus");this.focusShown=true;if(Ext.isIE){b.on("blur",function(){this.removeCls("x-focus");this.focusShown=false},this)}else{var a={handleEvent:Ext.bind(function(c){this.removeCls(this.focusCls);this.focusShown=false;document.removeEventListener("focus",a,true);window.removeEventListener("blur",a,false)},this)};document.addEventListener("focus",a,true);window.addEventListener("blur",a,false)}},getIframeEl:function(){var a=this.down(".widgetiframe");return a?a.getEl():null},focus:function(g,b,c,h){var e=this,a;if(b){if(!e.focusTask){e.focusTask=Ext.create("Ext.util.DelayedTask",e.focus)}e.focusTask.delay(Ext.isNumber(b)?b:10,null,e,[g,false,c,h]);return e}if(e.rendered&&!e.isDestroyed){a=e.getFocusEl();if(a.dom&&g===true){a.dom.select()}if(e.floating){e.toFront(true)}}if(h===true){var d=this.getIframeEl();if(d){d.focus();this.forceIframeFocus();if(c){this.showFocusFrame(d)}}}return e},forceIframeFocus:(function(){var a=0;return function(){var b=this;if(this.iframeReady){gadgets.rpc.call(this.getIframeId(),"_focus_widget_window");if(b.focusIframeTask){b.focusIframeTask.cancel()}}else{if(!b.focusIframeTask){b.focusIframeTask=Ext.create("Ext.util.DelayedTask",b.forceIframeFocus,b)}a+=1;if(a*b.focusDelay<=30*1000){b.focusIframeTask.delay(b.focusDelay)}else{b.focusIframeTask.cancel()}}}})(),updateHeader:function(b){var a=this,e=a.header,d=a.title,c=a.tools;Ext.each(c,function(h,g,j){if(h.xtype==="tool"&&!h.rendered){newTool={};Ext.copyTo(newTool,h,["type","expandType","handler","scope"]);newTool.xtype="widgettool";newTool=Ext.ComponentManager.create(newTool);j[g]=newTool;if(a.collapseTool===h){a.collapseTool=newTool}if(a.expandTool===h){a.expandTool=newTool}}});if(!a.preventHeader&&(b||d||(c&&c.length))){if(!e){e=a.header=Ext.create("Ozone.components.panel.WidgetHeader",{title:d,orientation:(a.headerPosition=="left"||a.headerPosition=="right")?"vertical":"horizontal",dock:a.headerPosition||"top",textCls:a.headerTextCls,icon:a.icon,iconCls:a.iconCls,baseCls:a.baseCls+"-header",tools:c,ui:a.ui,indicateDrag:a.draggable,border:a.border,frame:a.frame&&a.frameHeader,ignoreParentFrame:a.frame||a.overlapHeader,ignoreBorderManagement:a.frame||a.ignoreHeaderBorderManagement,singleton:a.singleton,listeners:a.collapsible&&a.titleCollapse?{click:a.toggleCollapse,scope:a}:null});a.addDocked(e,0);a.tools=e.tools}e.show();a.initHeaderAria()}else{if(e){e.hide()}}},insertTool:function(a,c){if(this.headers==null&&this.header!=null){this.headers=[this.header];this.header.insertTool(a,c)}else{if(this.headers){for(var b=0;b<this.headers.length;b++){if(this.headers[b]!=null){this.headers[b].insertTool(a,c)}}this.doComponentLayout()}}},updateTool:function(b){if(this.headers==null&&this.header!=null){this.headers=[this.header]}for(var c=0;c<this.headers.length;c++){if(this.headers[c]!=null){var a=this.headers[c].items.indexOfKey(b.itemId);if(a!=null&&a>-1){this.headers[c].remove(b.itemId);this.headers[c].insert(a,b)}}}this.doComponentLayout()},removeTool:function(b){if(this.headers==null&&this.header!=null){this.headers=[this.header]}for(var a=0;a<this.headers.length;a++){if(this.headers[a]!=null){this.headers[a].remove(b)}}this.doComponentLayout()},handleStateEvent:function(b,a){var d=b==="listen"?true:false,c={eventKey:guid.util.guid(),eventName:a};this.stateEventChannelName=this.stateEventChannelName?this.stateEventChannelName:this.widgetStateContainer.stateChannelPrefix+this.uniqueId;this.widgetStateContainer.eventingContainer.publish(this.stateEventChannelName,c);return d},initState:function(){if(Ext.state.Manager){var c=this.getStateId();if(c!=null){var b=null;var a=Ext.state.Manager.getProvider();if(a.getByStore!=null&&typeof a.getByStore=="function"){b=a.getByStore(this.dashboardGuid,c)}else{b=Ext.state.Manager.get(c)}if(b){if(this.fireEvent("beforestaterestore",this,b)!==false){this.applyState(Ext.apply({},b));this.fireEvent("staterestore",this,b)}}}}},saveState:function(){if(Ext.state.Manager&&this.stateful!==false){var b=this.getStateId();if(b!=null){var a=this.getState();if(this.fireEvent("beforestatesave",this,a)!==false){Ext.state.Manager.set(a.uniqueId,a);this.fireEvent("statesave",this,a)}}}},onStateChange:function(){var b=this,a=b.saveDelay;if(a>0&&!b.debugStateEvents){if(!b.stateTask){b.stateTask=Ext.create("Ext.util.DelayedTask",b.saveState,b)}b.stateTask.delay(b.saveDelay)}else{b.saveState()}}},beforeInitComponent:function(){this.createFocusCatch()},afterInitComponent:function(){this.addEvents("beforeclose","close");this.originalStateEvents=this.events;this.on({activate:this.onWidgetActivate,deactivate:this.onWidgetDeactivate,afterrender:{fn:this.onWidgetAfterRender,scope:this}});if(this.isWidget){this.on({beforeDestroy:this.onBeforeWidgetDestroy,destroy:this.onWidgetDestroy,render:this.onWidgetRender})}},onWidgetActivate:function(){this.active=true;this.removeCls(this.inactiveCls);this.removeClsWithUI([this.inactiveCls]);if(!this.preventHeader){if(this.header){this.header.activate()}else{this.on({afterrender:{fn:function(a){this.header.activate()},scope:this,single:true}})}}},onWidgetDeactivate:function(){this.active=false;this.addCls(this.inactiveCls);this.addClsWithUI([this.inactiveCls]);if(!this.preventHeader){if(this.header){this.header.deactivate()}else{this.on({afterrender:{fn:function(a){this.header.deactivate()},scope:this,single:true}})}}},onWidgetRender:function(){var a=Ozone.config.user;Ozone.metrics.logWidgetRender(a.id,a.displayName,Ozone.config.metric.url,this)},onWidgetAfterRender:function(){var g,b=false,a=false,d=this,e=Ext,c={capture:true};if(!d.header){return}if(d.xtype==="widgetwindow"||d.xtype==="widgetportlet"){d.mon(d.getEl(),"mousedown",function(k,j,h){var m=null;if(d.header!=null&&d.header.tools!=null){if(d.header.tools.close!=null){m=d.header.tools.close.toolEl}}if(m==null||j!==m.dom){this.dashboard.updateActiveWidget(this,true);if(d.xtype==="widgetwindow"){this.focus(undefined,undefined,undefined,true)}}},d)}g=d.header.getEl().dom},onBeforeWidgetDestroy:function(b){var a=b.getComponent("widgetIframe");if(a&&!a.isSrcCleared()){a.clearSrc();Ext.defer(b.destroy,100,b);return false}},onWidgetDestroy:function(c){c.dashboard.updateActiveWidget();Ext.state.Manager.clear({uniqueId:c.id,paneGuid:c.paneGuid});var d=Ext.getCmp("launchMenuWindow");if(d!=null){var a=d.down("#groupingdataview");if(a){a.enableItem(c.widgetGuid)}var b=d.down("#infodataview");if(b){b.enableItem(c.widgetGuid)}}},getStateId:function(){if(this.stateId!=null){return this.stateId}else{return((/^(ext-comp-|ext-gen)/).test(String(this.id))?null:this.id)}},purgeListener:function(a){var b=this.events[a];if(typeof b=="object"){b.clearListeners()}},restoreListener:function(a){var b=this.originalStateEvents[a];if(typeof b=="object"){this.events[a]=b}},getCurrentState:function(){var a=this.getSize(),b=this.getState();if(this.maximized){b.height=a.height;b.width=a.width}return b},getIframeId:function(){var a=this.getIframeEl();if(a!=null){return a.id}else{return null}},wasToolClicked:function(){var a=false;if(this.header!=null&this.header.toolClicked){a=true}return a},getFirstFocusableElement:function(){var a=this.getHeader();if(a!=null){return a.titleCmp.getEl()}},createFocusCatch:function(){if(!this.dockedItems){this.dockedItems=[]}this.dockedItems.push({xtype:"focuscatch",itemId:"focusCatch",dock:"bottom",listeners:{afterrender:{fn:function(a){a.mon(a.getEl(),"focus",function(){this.showFocusFrame(a.getEl())},this)},scope:this}}});this.on("afterrender",function(a){a.setupFocus(this.getFirstFocusableElement(),this.getComponent("focusCatch").getEl())})}});Ext.define("Ozone.components.widget.WidgetPanel",{extend:"Ext.panel.Panel",alias:["widget.widgetpanel","widget.Ozone.components.widget.WidgetPanel"],mixins:{widget:"Ozone.components.widget.WidgetBase"},plugins:[new Ozone.plugins.WidgetPanel()],dashboardGuid:null,widgetStateContainer:null,hideMode:"visibility",initComponent:function(){this.beforeInitComponent();this.callParent(arguments);this.addEvents("minimize","maximize");this.on({beforeCollapse:{fn:function(a){this.restoreSize=this.getSize()},scope:this},expand:{fn:function(a){delete this.restoreSize;this.focus(null,null,false,true)},scope:this},show:{fn:function(a){this.focus()},scope:this},collapse:{fn:function(b){var a=this.tools["collapse-top"];if(a){a.blur();a.focus()}},scope:this}});Ext.apply(this,this.mixins.widget.overrides);this.afterInitComponent()},stateEvents:["resize","collapse","expand","activate","deactivate","minimize","maximize","titlechange"],getState:function(){var b={universalName:this.universalName,widgetGuid:this.widgetGuid,uniqueId:this.uniqueId,dashboardGuid:this.dashboardGuid,paneGuid:this.paneGuid,intentConfig:this.intentConfig,launchData:this.launchData,name:this.title?this.title:this.name,active:!!this.active,x:this.restorePos?this.restorePos[0]:this.x,y:this.restorePos?this.restorePos[1]:this.y,zIndex:0,minimized:!!this.minimized,maximized:!!this.maximized,pinned:!!this.pinned,collapsed:!!this.collapsed,columnPos:0,buttonId:this.buttonId?this.buttonId:null,buttonOpened:this.buttonOpened?this.buttonOpened:false,region:this.region||"none",statePosition:this.statePosition,singleton:this.singleton,floatingWidget:false};if(this.rendered){var a=this.getBox();Ext.apply(b,{height:this.collapseMemento!=null&&this.collapseMemento.data!=null?this.collapseMemento.data.height:a.height,width:a.width,x:a.x,y:a.y})}else{Ext.apply(b,{height:this.height,width:this.width})}return b},applyState:function(a){this.title=a.name},insertTool:function(a,b){if(this.header){this.header.insertTool(a,b)}},afterCollapse:function(b,a){this.callParent(arguments);if(a){this.saveState()}}});Ext.define("Ozone.components.widget.WidgetToolbarItem",{extend:"Ozone.components.widget.WidgetPanel",alias:["widget.widgettoolbaritem","widget.Ozone.components.widget.WidgetToolbarItem"],width:200,widget:null,focusable:true,initComponent:function(){var a=this.widget;this.title=a.title;this.icon=a.icon;this.widget=a;this.itemId=a.uniqueId;this.singleton=a.singleton;this.active=a.active;this.tools=[{type:"minimize",itemId:"minimize",hidden:a.minimized,handler:function(c,e,b,d){c.stopEvent();a.minimize()}},{type:"restore",itemId:"restore",hidden:!a.minimized,handler:function(c,e,b,d){c.stopEvent();if(a.minimized){a.restoreFromMinimize()}else{a.restore()}}},{type:"maximize",itemId:"maximize",handler:function(c,e,b,d){c.stopEvent();if(a.rendered){if(a.minimized){a.restoreFromMinimize()}a.maximize();a.focus()}else{a.on({afterrender:{fn:function(g){if(g.minimized){g.restoreFromMinimize()}g.maximize();g.focus()}}});a.show()}}},{type:"close",itemId:"close",handler:function(e,d,b,c){a.close()}}];this.listeners={activate:this.onToolbarItemActivate,titlechange:this.onToolbarItemTitleChange,click:{fn:this.onToolbarItemClick,element:"el",scope:this}};this.relayEvents(a,["activate","deactivate"]);a.on({minimize:{fn:this.onWidgetMinimize,scope:this.header},maximize:{fn:this.onWidgetMaximize,scope:this.header},restore:{fn:this.onWidgetRestore,scope:this.header},destroy:{fn:this.onWidgetDestroy,scope:this},titlechange:{fn:this.onWidgetTitleChange,scope:this}});this.callParent(arguments)},onToolbarItemActivate:function(a){this.ownerCt.layout.overflowHandler.scrollToItem(a,true)},onToolbarItemClick:function(c,a,d){var b=this.widget;if(b.rendered){if(b.minimized){b.restoreFromMinimize()}if(!b.active){b.focus()}}else{b.on({afterrender:this.onWidgetAfterrender});b.show()}},onToolbarItemTitleChange:function(b,a,c){this.widget.suspendEvents();this.widget.setTitle(a);this.widget.resumeEvents()},onWidgetTitleChange:function(b,a,c){this.suspendEvents();this.setTitle(a);this.resumeEvents()},onWidgetAfterrender:function(a){if(a.minimized){a.restoreFromMinimize()}if(!a.active){a.focus()}},onWidgetMinimize:function(){this.tools.restore.show();this.tools.maximize.show();this.tools.minimize.hide()},onWidgetMaximize:function(){this.tools.restore.show();this.tools.maximize.hide()},onWidgetRestore:function(a){this.tools.minimize.show();if(a.maximized){this.tools.maximize.hide();this.tools.restore.show()}else{this.tools.maximize.show();this.tools.restore.hide()}},onWidgetDestroy:function(){if(this.ownerCt){this.ownerCt.ownerCt.attemptScrollerReset(this.ownerCt);this.ownerCt.remove(this)}}});Ext.define("Ozone.data.State",{extend:"Ext.data.Model",idProperty:"uniqueId",fields:["uniqueId","dashboardGuid","paneGuid","widgetGuid","statePosition","name","active","width","height","x","y","zIndex","minimized","maximized","pinned","collapsed","columnPos","columnOrder","buttonId","buttonOpened","region","singleton",{name:"floatingWidget",type:"boolean"},"intentConfig","launchData",{name:"background",type:"boolean"}],get:function(b){var c=this.callParent(arguments);if(c!==undefined){return c}var a=this.callParent(["widgetGuid"]);if(!a){return a}return Ext.StoreManager.lookup("widgetStore").getById(a).get(b)}});Ext.define("Ozone.data.StateStore",{extend:"Ext.data.Store",model:"Ozone.data.State",proxy:{type:"ajax",url:Ozone.util.contextPath()+"/dashboard"}});Ext.define("Ozone.data.Dashboard",{extend:"Ext.data.Model",idProperty:"guid",fields:["alteredByAdmin","guid",{name:"id",mapping:"guid"},{name:"isdefault",type:"boolean",defaultValue:false},{name:"dashboardPosition",type:"int"},"EDashboardLayoutList","name",{name:"state",defaultValue:[]},"removed","groups","isGroupDashboard","description","createdDate","prettyCreatedDate","editedDate","prettyEditedDate",{name:"stack",defaultValue:null},{name:"locked",type:"boolean",defaultValue:false},{name:"layoutConfig",defaultValue:null},{name:"createdBy",model:"User"},{name:"user",model:"User"}],constructor:function(b,c,a){if(b.layoutConfig&&typeof b.layoutConfig==="string"&&b.layoutConfig!==Object.prototype.toString()){b.layoutConfig=Ext.JSON.decode(b.layoutConfig)}if(b.layoutConfig===Object.prototype.toString()){b.layoutConfig=""}if(!b.guid){b.guid=guid.util.guid()}this.callParent(arguments)}});Ext.define("Ozone.data.DashboardStore",{extend:"Ozone.data.OWFStore",model:"Ozone.data.Dashboard",alias:"store.dashboardstore",proxy:{type:"owftransportproxy",limitParam:undefined,pageParam:undefined,startParam:undefined,api:{read:"/dashboard",create:"/dashboard",update:"/dashboard",destroy:"/dashboard"},reader:{type:"json",root:"data",totalProperty:"results"},writer:{type:"json",allowSingle:false,encode:true,root:"data"}},remoteSort:true,totalProperty:"results"});Ext.define("Ozone.data.Stack",{extend:"Ext.data.Model",idProperty:"id",fields:[{name:"id",type:"int",defaultValue:-1},{name:"name",type:"string"},{name:"description",type:"string"},{name:"stackContext",type:"string"},{name:"descriptorUrl",type:"string"},{name:"totalDashboards",type:"int"},{name:"totalUsers",type:"int"},{name:"totalGroups",type:"int"},{name:"totalWidgets",type:"int"}]});Ext.define("Ozone.data.StackStore",{extend:"Ozone.data.OWFStore",model:"Ozone.data.Stack",sorters:[{property:"name",direction:"ASC"}],constructor:function(a){a=a?a:{};Ext.applyIf(a,{api:{read:"/stack",create:"/stack",update:"/stack",destroy:"/stack"},fields:["id","name","description","stackContext","descriptorUrl","totalDashboards","totalUsers","totalGroups","totalWidgets"],autoDestroy:true});this.callParent(arguments)}});Ext.define("Ozone.data.ModelIdGenerator",{extend:"Ext.data.IdGenerator",alias:"idgen.model",getRecId:function(b){var a=this.overrideIdProperty||b.idProperty;return b.get(a)},generate:function(){return null}});Ext.define("Ozone.data.WidgetDefinition",{extend:"Ext.data.Model",idProperty:"widgetGuid",fields:[{name:"id",mapping:"id"},{name:"name",mapping:"value.namespace"},{name:"originalName",mapping:"value.originalName"},{name:"version",mapping:"value.widgetVersion"},{name:"description",mapping:"value.description"},{name:"url",mapping:"value.url"},{name:"headerIcon",mapping:"value.headerIcon"},{name:"image",mapping:"value.image"},{name:"width",mapping:"value.width"},{name:"height",mapping:"value.height"},{name:"widgetGuid",mapping:"path"},{name:"universalName",mapping:"value.universalName"},{name:"maximized",mapping:"value.maximized"},{name:"minimized",mapping:"value.minimized"},{name:"x",mapping:"value.x"},{name:"y",mapping:"value.y"},{name:"visible",mapping:"value.visible"},{name:"definitionVisible",mapping:"value.definitionVisible"},{name:"background",mapping:"value.background"},{name:"disabled",mapping:"value.disabled"},{name:"editable",mapping:"value.editable"},{name:"tags",mapping:"value.tags"},{name:"singleton",mapping:"value.singleton"},{name:"allRequired",mapping:"value.allRequired"},{name:"directRequired",mapping:"value.directRequired"},{name:"userId",mapping:"value.userId"},{name:"userRealName",mapping:"value.userRealName"},{name:"totalUsers",mapping:"value.totalUsers"},{name:"totalGroups",mapping:"value.totalGroups"},{name:"widgetTypes",mapping:"value.widgetTypes"},{name:"descriptorUrl",mapping:"value.descriptorUrl"},{name:"intents",mapping:"value.intents"},{name:"title",mapping:"value.namespace"},{name:"groups",mapping:"value.groups"},{name:"disabled",mapping:"value.disabled"}]});Ext.define("Ozone.data.WidgetStore",{extend:"Ext.data.Store",model:"Ozone.data.WidgetDefinition",proxy:{type:"ajax",url:Ozone.util.contextPath()+"/prefs/widgetList",limitParam:undefined,pageParam:undefined,startParam:undefined,reader:{type:"json",root:"rows"}},totalProperty:"results"});Ext.define("Ozone.data.Group",{extend:"Ext.data.Model",idProperty:"id",fields:[{name:"name",type:"string"},{name:"id",type:"int"},{name:"description",type:"string"},{name:"totalWidgets",type:"int"},{name:"totalUsers",type:"int"},{name:"totalStacks",type:"int"},{name:"automatic",type:"boolean"},{name:"stackDefault",type:"boolean"},{name:"status",type:"string"},{name:"displayName",type:"string"},{name:"email",type:"string"},{name:"title",mapping:"displayName"}]});Ext.define("Ozone.data.GroupStore",{extend:"Ozone.data.OWFStore",model:"Ozone.data.Group",sorters:[{property:"displayName",direction:"ASC"}],constructor:function(a){a=a?a:{};Ext.applyIf(a,{api:{read:"/group",create:"/group",update:"/group",destroy:"/group"},fields:["id","name","description","totalWidgets","totalUsers","totalStacks","automatic","stackDefault","status","displayName","email"],autoDestroy:true});this.callParent(arguments)}});Ext.define("Ozone.layout.CreateViewContainer",{extend:"Ext.form.Panel",alias:["widget.owfCreateDashboardsContainer","widget.owfCreateViewsContainer","widget.Ozone.layout.CreateViewContainer"],requires:["Ext.layout.container.Border"],border:false,config:{},views:null,dashboardContainer:null,itemId:"createNewDashboardPanel",cls:"cvc-createNewDashboardContainer",afterRenderInitComplete:false,createViewContainer_FormValid:true,hideViewSelectRadio:false,initComponent:function(){this.config=this.dashboardContainer.activeDashboard.config;this.views=this.dashboardContainer.dashboards;this.addEvents("saved","failed");this.titleBox={xtype:"textfield",name:"titleBox",cls:"titleBox",itemId:"titleBox",fieldLabel:Ozone.util.createRequiredLabel(Ozone.ux.DashboardMgmtString.title),labelSeparator:"",labelWidth:undefined,allowBlank:false,maxLength:200,value:"",enforceMaxLength:true,listeners:{blur:function(e){var g=e.getValue().replace(new RegExp(Ozone.lang.regexLeadingTailingSpaceChars),"");e.setValue(g)}}};this.description={xtype:"textareafield",name:"description",cls:"description",itemId:"description",fieldLabel:Ozone.ux.DashboardMgmtString.description,labelSeparator:"",labelWidth:undefined,value:"",maxLength:4000,enforceMaxLength:true};if(this.existingDashboardRecord!=null){this.titleBox.value=this.existingDashboardRecord.get("name");this.description.value=this.existingDashboardRecord.get("description")}this.existingViewRadio={boxLabel:Ozone.layout.CreateViewWindowString.createFromExisiting,name:"viewSelectRadio",inputValue:"copiedDashboard",cls:"existingViewRadio",listeners:{change:{fn:function(g,k,e){if(k){var j=this.down("#existViewCb");j.enable();j.validate();var h=this.down("#importFileupload");h.reset();h.disable()}},scope:this}},vtype:"copiedDashboard",copiedDashboardField:"existViewCb"};this.importedViewRadio={boxLabel:Ozone.layout.CreateViewWindowString.importView,name:"viewSelectRadio",inputValue:"importedDashboard",cls:"importedViewRadio",listeners:{change:{fn:function(g,k,e){if(k){var j=this.down("#existViewCb");j.reset();j.disable();var h=this.down("#importFileupload");h.enable();h.validate()}},scope:this}},vtype:"importedDashboard",importedDashboardField:"importFileupload"};this.existingView={xtype:"combo",itemId:"existViewCb",store:this.dashboardContainer.dashboardStore,valueField:"guid",displayField:"name",hideLabel:true,typeAhead:true,queryMode:"local",value:null,triggerAction:"all",editable:true,selectOnFocus:true,allowBlank:true,forceSelection:true,disabled:true,width:400};this.existingView.value=this.views[0].guid;function c(e){d=null;Ozone.Msg.alert(Ozone.util.ErrorMessageString.dashboardConfig,"Invalid configuration file.",function(){e.focusTitleBox()},e,null,e.dashboardContainer.modalWindowManager)}var a=this;var d=null;var b=false;this.importedView={xtype:"filefield",itemId:"importFileupload",cls:"importFileupload",name:"importFileupload",hideLabel:true,label:"",width:400,emptyText:Ozone.ux.DashboardMgmtString.uploadConfig,allowBlank:true,disabled:true,buttonText:Ozone.ux.DashboardMgmtString.browse,listeners:{afterrender:function(e){e.setupFocus=function(){var m=this.button.getEl();var h=this.button.btnEl;var g=this.fileInputEl;var j=true;h.dom.tabIndex=-1;e.inputEl.dom.tabIndex=-1;g.dom.tabIndex=0;g.dom.hideFocus=true;g.dom.style.outlineStyle="none";e.mon(g,"focus",function(){this.addCls("x-focus")},m);e.mon(g,"blur",function(){this.removeCls("x-focus")},m);function k(){j=true}e.mon(g,{mouseup:k,mouseout:k})};e.setupFocus();e._reset=e.reset;e.reset=function(){if(!b){this._reset.apply(this,arguments);d=null}else{if(this.rendered){this.fileInputEl.remove();this.createFileInput()}this.callParent()}this.setupFocus()}},change:function(g,h,e){b=true;a.getForm().submit({clientValidation:false,reset:false,url:Ozone.util.contextPath()+"/servlet/FileServlet",waitMsg:"Reading file...",success:function(j,k){d=Ozone.util.parseJson(k.response.responseText).value;if(!Ozone.util.validateDashboardJSON(d)){c()}else{if(a.getComponent("description").getValue()==null||a.getComponent("description").getValue()==""){a.getComponent("description").setValue(d.description)}}b=false},failure:Ext.bind(function(j,k){c(a);b=false},a)})}}};this.viewSelectRadio={layout:{type:"hbox",align:"stretchmax"},cls:"createSelector",region:"center",allowBlank:false,hideLabel:true,hidden:this.hideViewSelectRadio,items:[[{xtype:"radiogroup",flex:1,cls:"viewSelect",itemId:"viewSelect",layout:{type:"vbox",align:"stretch"},defaults:{flex:1},items:[this.existingViewRadio,this.importedViewRadio]},{layout:{type:"vbox",align:"stretch"},cls:"viewSelectBoxes",flex:1,defaults:{flex:1},items:[this.existingView,this.importedView]}]]};this.layout={type:"vbox",align:"stretch"};this.items=[this.titleBox,this.description,this.viewSelectRadio];this.dockedItems=[{xtype:"toolbar",dock:"bottom",defaults:{minWidth:this.minButtonWidth},items:[{xtype:"tbfill"},{xtype:"button",scale:"small",text:Ozone.layout.DialogMessages.ok,itemId:"saveButton",handler:function(j,e){if(this.getForm().isValid()&&this.createViewContainer_FormValid){Ozone.util.formField.removeLeadingTrailingSpaces(this.getComponent("titleBox"));Ext.getCmp("mainPanel").saveActiveDashboardToServer();var p=this.getComponent("titleBox").getValue();var m=this.getComponent("description").getValue();if(m==null||m==""){m=" "}if(this.existingDashboardRecord!=null){this.existingDashboardRecord.set("name",p);this.existingDashboardRecord.set("description",m);this.dashboardContainer.editDashboard(this.existingDashboardRecord);this.close()}else{var q=this.down("#viewSelect").getValue().viewSelectRadio;var g=(q=="copiedDashboard")?true:false;var n=(q=="importedDashboard")?true:false;if(g){var h=this.down("#existViewCb").getValue();if(Ext.isEmpty(h)){this.down("#existViewCb").markInvalid("This field cannot be blank.");Ozone.Msg.alert(Ozone.util.ErrorMessageString.invalidForm,Ozone.util.ErrorMessageString.invalidFormMsg,function(){this.focusTitleBox()},this,null,this.dashboardContainer.modalWindowManager);return}var k=this.dashboardContainer.dashboardStore.getById(h).data;k=Ozone.util.cloneDashboard(k,true);k.name=p;k.description=m;k.isdefault=false;Ext.getCmp("mainPanel").createDashboard(Ext.create("Ozone.data.Dashboard",k));this.close()}else{if(n){if(d!=null){d.name=p;d.description=m;if(!Ozone.util.validateDashboardJSON(d)){Ozone.Msg.alert(Ozone.util.ErrorMessageString.dashboardConfig,"Invalid "+d.layout+" configuration file.",function(){this.focusTitleBox()},this,null,this.dashboardContainer.modalWindowManager)}else{delete d.state;Ext.getCmp("mainPanel").createDashboard(Ext.create("Ozone.data.Dashboard",Ozone.util.cloneDashboard(d,true)));this.close()}}else{Ozone.Msg.alert(Ozone.util.ErrorMessageString.invalidForm,Ozone.util.ErrorMessageString.invalidFormMsg,function(){this.focusTitleBox()},this,null,this.dashboardContainer.modalWindowManager)}}else{Ext.getCmp("mainPanel").createDashboard(Ext.create("Ozone.data.Dashboard",{name:p,description:m}));this.close()}}}}else{Ozone.Msg.alert(Ozone.util.ErrorMessageString.invalidForm,Ozone.util.ErrorMessageString.invalidFormMsg,function(){this.focusTitleBox()},this,null,this.dashboardContainer.modalWindowManager)}},scope:this,listeners:{afterrender:function(e){e.getEl().on("keydown",function(g){g.stopPropagation()})}}},{xtype:"button",scale:"small",text:"Cancel",itemId:"cancelBtn",scope:this,handler:this.cancel}]}];this.on("beforedestroy",function(e){e.dockedItems=null});this.callParent()},refreshData:function(){this.config=this.dashboardContainer.activeDashboard.config;this.views=this.dashboardContainer.dashboards;var e=this.getComponent("titleBox");if(e){e.setRawValue("")}var d=this.getComponent("description");if(d){d.setRawValue("")}var b=this.down("#importFileupload");if(b){b.setRawValue("")}var c=this.getComponent("viewSelect");if(c){c.reset()}var a=this.down("#existViewCb");a.setValue(this.views[0].guid)},focusTitleBox:function(){Ext.defer(function(){this.getComponent("titleBox").focus()},500,this)},cancel:function(){this.close()},close:function(){Ext.getCmp(this.winId).close()}});Ext.define("Ozone.components.button.UserMenuButton",{extend:"Ext.button.Button",alias:["widget.usermenubutton","widget.Ozone.components.button.UserMenuButton"],iconAlign:"right",iconCls:"userMenuIcon",scale:"banner-large",user:null,logoutText:"Sign Out",menuHidden:true,hideMenu:false,hideDelay:100,showDelay:800,initComponent:function(){var e=this;e.text=Ext.htmlEncode(e.user.userRealName);var g=(function(){var h;return function j(){if(!h||h.isDestroyed){h=Ext.create("Ozone.components.window.ModalWindow",{id:"about-window",ui:"system-window",cls:"system-window",modalAutoClose:true,preventHeader:true,width:550,draggable:false,resizable:false,shadow:false,dashboardContainer:e.dashboardContainer});Ext.Ajax.request({url:Ozone.util.contextPath()+"/about.jsp",success:function(k){var n=k.responseText;function m(){Ext.DomHelper.append(h.body,n);h.setupFocus();h.center()}if(h.isVisible()){m()}else{h.on("show",function(){m()})}}})}if(!h.isVisible()){h.show();h.center()}else{h.hide()}}})();e.items=[{text:"Previous Sign In "+e.user.prettyPrevLogin,id:"prevLogin",clickable:false},{text:"Profile",id:"profile",handler:Ext.bind(function(){if(this.profileWindow==null||this.profileWindow.isDestroyed){this.profileWindow=Ext.widget("profileWindow",{ownerCt:this.dashboardContainer,dashboardContainer:this.dashboardContainer,user:this.user})}this.profileWindow.show()},this)},{text:"About",id:"about",handler:g}];if(Ozone.config.logoutURL!=null){e.items.push({spacer:true},{text:e.logoutText,id:"logout",handler:b})}for(var c=0,a=e.items.length;c<a;c++){var d=e.items[c];Ext.applyIf(d,{spacer:false,clickable:true});if(d.spacer){d.clickable=false}}function b(){window.location.href=Ozone.util.contextPath()+Ozone.config.logoutURL}Ozone.KeyMap.addBinding([Ext.apply({scope:this,fn:b},Ozone.components.keys.HotKeys.LOGOUT)]);e.userMenu=new Ext.XTemplate('<ul id="userMenu">','<tpl for=".">','<tpl if="spacer">',"<hr/>","</tpl>",'<tpl if="!spacer">','<li id="{id}" ','<tpl if="clickable">','class="clickable"',"</tpl>","><span>","{text}","</span>","</li>","</tpl>","</tpl>","</ul>");e.on("afterrender",e.onAfterRender,this);e.on("click",e.onClick,this);e.callParent(arguments)},getClickables:(function(){var a;return function(){if(!a){a=this.userMenu.el.select(".clickable")}return a}})(),setupFocusBridge:function(){var b=Ext.apply({},this.getClickables().first()),a=this.getFocusEl();this.mon(a,"keydown",function(c){if(c.keyCode===Ext.EventObject.TAB&&c.shiftKey===false){c.preventDefault();b.focus()}});this.mon(b,"keydown",function(c){if(c.keyCode===Ext.EventObject.TAB&&c.shiftKey===true){c.preventDefault();a.focus()}})},onAfterRender:function(e){var g;e.userMenu.el=Ext.get(e.userMenu.append(Ext.getBody(),e.items));e.userMenu.el.setVisibilityMode(Ext.Element.DISPLAY);e.userMenu.el.setVisible(false);e.setupFocusBridge();g=e.getClickables();e.addMenuShowHideHandlers();g.each(function(h){h.addClsOnOver("over");h.addClsOnOver(h.id+"-over");h.addClsOnFocus(h.id+"-focus");Ozone.components.focusable.Focusable.setupFocus(h.dom,e)});for(var b=0,a=e.items.length;b<a;b++){var d=e.items[b];if(d.clickable){var c=Ext.get(d.id);c.handler=d.handler;e.mon(c,"click",c.handler)}}e.setupMenuNav();Ext.widget("tooltip",{id:"prevLoginToolTip",target:Ext.get("prevLogin"),html:"Previous Sign In "+this.formatLoginDate(this.user.prevLogin),listeners:{show:{fn:function(j,h){j.setZIndex(100000001)}}}})},onClick:function(){if(this.menuHidden){this.hideMenu=false;this._showMenu()}else{this.hideMenu=true;this._hideMenu()}},setupMenuNav:function(){var b=this,c;function a(h,d){var e=Ext.get(h),g=d?"previousSibling":"nextSibling";while((e=Ext.get(e.dom[g]))&&!e.hasCls("clickable")){}if(e){e.focus()}}var c=new Ext.util.KeyNav(this.userMenu.el,{up:function(d){a(d.getTarget(),true)},down:function(d){a(d.getTarget())},esc:Ext.bind(b.hideUserMenu,b),enter:function(d){Ext.get(d.getTarget()).handler.call()}});b.on("destroy",function(){this.destroy()},c)},formatLoginDate:function(b){var a=new Date();if(b){a.setUTCFullYear(b.substring(0,4));a.setUTCMonth(b.substring(5,7)-1);a.setUTCDate(b.substring(8,10));a.setUTCHours(b.substring(11,13),b.substring(14,16))}return Ext.util.Format.date(a,Ozone.config.lastLoginDateFormat)},addMenuShowHideHandlers:function(){var b=this,a=b.userMenu.el,c=b.getClickables();b.mon(a,"mouseover",b.keepMenuOpen,b);b.mon(a,"mouseout",b.hideUserMenu,b);b.on("mouseout",b.hideUserMenu,b);b.on("mouseover",b.showUserMenu,b);b.mon(b.getFocusEl(),"focus",b.showUserMenu,b);b.mon(c,"focus",b.keepMenuOpen,b);b.mon(c,"blur",b.hideUserMenu,b);b.mon(b.getFocusEl(),"blur",b.hideUserMenu,b)},keepMenuOpen:function(){this.hideMenu=false},showUserMenu:function(){var b=this,a=b.userMenu.el;b.hideMenu=false;if(!b.showTask){b.showTask=Ext.create("Ext.util.DelayedTask",function(){b._showMenu()})}b.showTask.delay(Ext.isNumber(b.showDelay)?b.showDelay:800,null)},hideUserMenu:function(){var a=this;a.hideMenu=true;if(!a.hideTask){a.hideTask=Ext.create("Ext.util.DelayedTask",function(){a._hideMenu()})}a.hideTask.delay(Ext.isNumber(a.hideDelay)?a.hideDelay:100,null)},_showMenu:function(){var b=this,a=b.userMenu.el;if(b.hideTask){b.hideTask.cancel()}b.menuHidden=false;a.stopAnimation();a.setVisible(true);a.alignTo(b.getEl(),"tr-br");a.fadeIn()},_hideMenu:function(){var a=this;if(a.showTask){a.showTask.cancel()}if(a.menuHidden){return}if(a.hideMenu===true&&a.userMenu&&a.userMenu.el){a.menuHidden=true;a.userMenu.el.fadeOut({listeners:{afteranimate:{fn:function(){if(a.userMenu.el.contains(document.activeElement)){document.activeElement.blur()}this.userMenu.el.setVisible(false)},scope:a}}})}}});Ext.define("Ozone.components.focusable.Focusable",{extend:"Ext.AbstractPlugin",alias:"plugin.focusable",constructor:function(a,b){this.init=function(c){c.on("afterrender",function(){var d=a?c[a]:c.el;Ozone.components.focusable.Focusable.setupFocus(d,c,b)})}}});Ozone.components.focusable.Focusable.setupFocus=function(d,e,c){c=c||"x-focus";d=Ext.get(d);e=e||Ext.create("Ext.util.Observable");if(!d){return}var a=true;e.mon(d,"focus",function(g,h){if(a){Ext.fly(h).addCls(c)}});e.mon(d,"blur",function(g,h){Ext.fly(h).removeCls(c)});e.mon(d,"mousedown",function(){a=false});function b(){a=true}e.mon(d,{mouseup:b,mouseout:b});Ozone.components.focusable.Focusable.clearOutline(d)};Ozone.components.focusable.Focusable.clearOutline=function(a){a=Ext.get(a);if(!a){return}a.dom.tabIndex=0;a.dom.hideFocus=true;a.dom.style.outlineStyle="none"};Ext.define("Ozone.components.layout.SearchBoxLayout",{extend:"Ext.layout.component.field.Text",alias:"layout.searchbox",sizeBodyContents:function(e,a){var c=this.owner.bodyEl;var g=this.owner.inputEl;var b=this.owner.clearEl.getWidth();e-=(b*2)+c.getPadding("lr")+c.getBorderWidth("lr")+g.getMargin("lr");var d=this.adjustForGrow(e,a);this.setElementSize(this.owner.inputEl,d[0])}});Ext.define("Ozone.components.form.field.SearchBox",{extend:"Ext.form.field.Text",alias:"widget.searchbox",emptyText:"Search...",fieldSubTpl:['<span class="magnifier-btn search-img" ></span>','<input type="text" id="{id}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','autocomplete="off" />','<span class="clear-btn search-img" id="{id}-clearEl"></span>',{compiled:true,disableFormats:true}],fieldBodyCls:"search",minHeight:20,componentLayout:"searchbox",dynamic:false,searchChangedEventDelay:200,initComponent:function(){this.addChildEls({name:"clearEl",id:this.getInputId()+"-clearEl"});this.callParent(arguments);function a(b){b.mon(b.clearEl,"click",function(){this.onClear()},b);b.clearKeyMap=new Ext.util.KeyMap(b.clearEl,{key:[Ext.EventObject.ENTER,Ext.EventObject.SPACE],handler:function(d,c){c.stopPropagation();this.onClear()},scope:b});Ozone.components.focusable.Focusable.setupFocus(b.clearEl,b);b.clearEl.hover(function(){this.addCls("clear-btn-over")},function(){this.removeCls("clear-btn-over")},b.clearEl)}this.on("afterrender",function(c){a(c);c.keymap=new Ext.util.KeyMap(c.inputEl,{key:Ext.EventObject.ENTER,handler:function(){this.fireSearchChanged()},scope:c});var b=new Ext.util.DelayedTask(function(){c.fireSearchChanged()});if(c.dynamic){c.inputEl.on("keyup",function(g,d){b.delay(c.searchChangedEventDelay)})}c.setHeight(c.getHeight())});this.on("destroy",function(b){b.clearKeyMap.destroy();b.keymap.destroy()});this.addEvents("searchChanged")},onClear:function(){this.setValue("");this.clearInvalid();this.inputEl.focus();this.fireSearchChanged()},fireSearchChanged:function(){this.fireEvent("searchChanged",this,this.getValue())}});Ext.define("Ext.grid.column.TextColumn",{extend:"Ext.grid.column.Column",alias:"widget.textcolumn",_textBoxClsOver:Ext.baseCSSPrefix+"grid-column-over",processEvent:function(g,b,a,c,d,h){if(g=="mouseover"){var j=Ext.fly(a);j.addCls(this._textBoxClsOver);return this.callParent(arguments)}else{if(g=="mouseout"){var j=Ext.fly(a);j.removeCls(this._textBoxClsOver);return this.callParent(arguments)}else{return this.callParent(arguments)}}}});Ext.define("Ozone.components.container.boxOverflow.Menu",{extend:"Ext.layout.container.boxOverflow.Menu",createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),d=c.toggleGroup;Ext.copyTo(b,c,["iconCls","icon","itemId","disabled","handler","scope","menu","externalHidden"]);Ext.apply(b,{text:c.overflowText||c.text||c.type,hideOnClick:a,destroyMenu:false});if(d||c.enableToggle){Ext.apply(b,{group:d,checked:c.pressed,listeners:{checkchange:function(g,e){c.toggle(e)}}})}if(c.isXType("tool")||c.isXType("widgettool")){b.type=c.type;if(a){Ext.apply(b,{listeners:{click:function(e){Ext.menu.Manager.hideAll()}}})}}b.hidden=b.externalHidden;delete b.externalHidden;delete b.ownerCt;delete b.xtype;delete b.id;return b},addComponentToMenu:function(c,a){var b=this;if(a instanceof Ext.toolbar.Separator){c.add("-")}else{if(a.isComponent){if(a.isXType("splitbutton")){c.add(b.createMenuConfig(a,true))}else{if(a.isXType("button")){c.add(b.createMenuConfig(a,!a.menu))}else{if(a.isXType("buttongroup")){a.items.each(function(d){b.addComponentToMenu(c,d)})}else{if(a.isXType("tool")||a.isXType("widgettool")){c.add(Ext.create(Ext.getClassName(a),b.createMenuConfig(a,true)))}else{c.add(Ext.create(Ext.getClassName(a),b.createMenuConfig(a)))}}}}}}},createMenu:function(a,d){var p=this,m=p.layout,q=m.parallelBefore,g=m.parallelPrefix,b=d[g],j=a.boxes,e=0,n=j.length,h;if(!p.menuTrigger){p.createInnerElements();p.menu=Ext.create("Ext.menu.Menu",{shadow:false,listeners:{scope:p,beforeshow:p.beforeMenuShow,show:function(){this.menu.alignTo(this.menuTrigger,"bl-tl")},setActiveItem:function(t){var r=this;if(t&&(t!=r.activeItem&&t!=r.focusedItem)){r.deactivateActiveItem();if(r.canActivateItem(t)){if(t.activate){t.activate();if(t.activated){r.activeItem=t}}}t.el.scrollIntoView(r.layout.getRenderTarget())}}}});p.menu.addCls("box-overflow-menu");p.menu.on("destroy",function(){p.menu.clearListeners()});p.menuTrigger=Ext.create("Ext.button.Button",{ownerCt:p.layout.owner,iconCls:Ext.baseCSSPrefix+m.owner.getXType()+"-more-icon",ui:m.owner instanceof Ext.toolbar.Toolbar?"default-toolbar":"default",menu:p.menu,tooltip:Ozone.layout.Menu.overflowMenuButtonTooltip,getSplitCls:function(){return""},renderTo:p.afterCt,handler:function(t,r){r.stopPropagation()},tabIndex:0})}p.showTrigger();b-=p.afterCt.getWidth();p.menuItems.length=0;for(;e<n;e++){h=j[e];if(h[q]+h[g]>b){var k=h.component.hidden;p.menuItems.push(h.component);h.component.hide();c(h.component,k)}}function c(r,t){if(!r.hide.customized){r.externalHidden=t;r.menuItemHide=r.hide;r.hide=function(){this.menuItemHide();if(arguments.callee.caller!==p.createMenu){this.externalHidden=true}};r.hide.customized=true}if(!r.show.customized){r.menuItemShow=r.show;r.show=function(){this.menuItemShow();this.externalHidden=false};r.show.customized=true}}}});Ext.define("Ozone.components.layout.container.HBox",{alias:["layout.owfhbox"],extend:"Ext.layout.container.HBox",initOverflowHandler:function(){if(this.overflowHandler==null){this.callParent(arguments)}else{if(typeof this.overflowHandler=="string"){this.overflowHandler=Ext.create(this.overflowHandler,this)}}}});Ext.define("Ozone.components.layout.BufferedCardLayout",{extend:"Ext.layout.container.Card",alias:"layout.bufferedcard",deferredRender:true,type:"bufferedcard",cardBufferSize:10,constructor:function(a){this.callParent(arguments);this.initCardBuffers()},initCardBuffers:function(){if(!this.cardBuffer){this.cardBuffer=Ext.create("Ext.util.MixedCollection")}if(!this.removedCardConfigBuffer){this.removedCardConfigBuffer=Ext.create("Ext.util.MixedCollection")}},afterRemove:function(a){this.callParent([a]);if(!a.dontRemove){this.cardBuffer.remove(a);this.removedCardConfigBuffer.remove(a)}},setActiveItem:function(m){var h=this,a=h.owner,c=h.activeItem,n;var j=m;m=h.parseActiveItem(m);n=a.items.indexOf(m);if(!m){m=this.removedCardConfigBuffer.get(j);var e=Ext.create("Ozone.data.StateStore",{storeId:m.config.guid,data:[]});m.stateStore=e;n=a.items.items.length;m=a.add(m)}var k=this.cardBuffer.indexOf(m);if(k>-1){this.cardBuffer.removeAt(k)}this.cardBuffer.add(m);if(n==-1){n=a.items.items.length;a.add(m)}if(m){if(!m.rendered){h.renderItem(m,h.getRenderTarget(),a.items.length);h.configureItem(m,0)}h.activeItem=m;if(m.fireEvent("beforeactivate",m,c)===false){return false}if(c&&c.fireEvent("beforedeactivate",c,m)===false){return false}if(h.sizeAllCards){h.onLayout()}else{h.setItemBox(m,h.getTargetBox())}h.owner.suspendLayout=true;if(c){if(h.hideInactive){c.hide()}c.fireEvent("deactivate",c,m)}var g=this.cardBuffer.getCount()-this.cardBufferSize;if(g>0){for(var d=0;d<g;d++){var b=this.cardBuffer.getAt(d);if(b.rendered){this.removedCardConfigBuffer.add(b.initialConfig);b.dontRemove=true;b.destroy();b.dontRemove=false}this.cardBuffer.removeAt(d)}}h.owner.suspendLayout=false;if(m.hidden){m.show();delete m.deferLayout}else{h.onLayout()}m.fireEvent("activate",m,c);return m}return false}});Ext.define("Ozone.components.layout.PinnableAccordion",{extend:"Ext.layout.container.Accordion",alias:"layout.pinnableaccordion",renderItems:function(h,e){var j=this,g=h.length,c=0,d,b=j.getLayoutTargetSize(),k=[],a;for(;c<g;c++){d=h[c];if(!d.rendered){k.push(d);if(j.collapseFirst){d.collapseFirst=j.collapseFirst}if(j.hideCollapseTool){d.hideCollapseTool=j.hideCollapseTool;d.titleCollapse=true}else{if(j.titleCollapse){d.titleCollapse=j.titleCollapse}}delete d.hideHeader;d.collapsible=true;d.title=d.title||"&#160;";d.setBorder(false);d.width=b.width;if(j.fill){delete d.height;delete d.flex;if(d.collapsed===false){d.flex=1}else{d.collapsed=true}}else{delete d.flex;d.animCollapse=j.initialAnimate;d.autoHeight=true;d.autoScroll=false}}}Ozone.components.layout.PinnableAccordion.superclass.superclass.renderItems.apply(this,arguments);g=k.length;for(c=0;c<g;c++){d=k[c];delete d.width;d.header.addCls(Ext.baseCSSPrefix+"accordion-hd");d.body.addCls(Ext.baseCSSPrefix+"accordion-body");if(j.fill){j.owner.mon(d,{show:j.onComponentShow,beforeexpand:j.onComponentExpand,beforecollapse:j.onComponentCollapse,scope:j})}}},onComponentExpand:function(g){var e=this,d=e.owner.items.items,a=d.length,c=0,b;for(;c<a;c++){b=d[c];if(b===g&&b.collapsed&&!b.pinned){e.setExpanded(b)}else{if(!e.multi&&(b.rendered&&b.header.rendered&&b!==g&&!b.collapsed)){e.setCollapsed(b)}}}e.animate=e.initialAnimate;e.layout();e.animate=false;return false},onComponentCollapse:function(b){var c=this,d=b.next()||b.prev(),a=c.multi?c.owner.query(">panel:not([collapsed])"):[];if(c.multi&&!c.pinned){c.setCollapsed(b);c.animate=c.initialAnimate;c.layout();c.animate=false}else{if(d&&!c.pinned){c.onComponentExpand(d)}}return false},setCollapsed:function(a){this.callParent(arguments);var e=a.header.layout.overflowHandler.menu;if(a.collapseTool&&e!=null&&e.items!=null&&e.items.getCount()>0){var d=null;var c=e.items;for(var b=0;b<c.getCount();b++){if(c.getAt(b).type.indexOf("collapse-")==0){d=c.getAt(b);break}}if(d){d.setType("expand-"+a.getOppositeDirection(a.collapseDirection))}c=a.header.layout.overflowHandler.menuItems;for(var b=0;b<c.length;b++){if(c[b].type.indexOf("collapse-")==0){d=c[b];break}}if(d){d.setType("expand-"+a.getOppositeDirection(a.collapseDirection))}}},setExpanded:function(a){this.callParent(arguments);var e=a.header.layout.overflowHandler.menu;if(a.collapseTool&&e!=null&&e.items!=null&&e.items.getCount()>0){var d=null;var c=e.items;for(var b=0;b<c.getCount();b++){if(c.getAt(b).type.indexOf("expand-")==0){d=c.getAt(b);break}}if(d){d.setType("collapse-"+a.collapseDirection)}c=a.header.layout.overflowHandler.menuItems;for(var b=0;b<c.length;b++){if(c[b].type.indexOf("expand-")==0){d=c[b];break}}if(d){d.setType("collapse-"+a.collapseDirection)}}}});Ext.define("Ozone.components.panel.WidgetHeader",{extend:"Ext.panel.Header",alias:["widget.widgetheader","widget.Ozone.components.panel.WidgetHeader"],defaultType:"widgettool",cls:"widgetheader",inactiveCls:"x-tab-top-inactive",initComponent:function(){var d=this,g,c,b,e;d.indicateDragCls=d.baseCls+"-draggable";d.title=Ext.htmlEncode(d.title)||"&#160;";d.tools=d.tools||[];d.items=d.items||[];d.orientation=d.orientation||"horizontal";d.dock=(d.dock)?d.dock:(d.orientation=="horizontal")?"top":"left";d.addClsWithUI(d.orientation);d.addClsWithUI(d.dock);d.addChildEls("body");if(!Ext.isEmpty(d.iconCls)||!Ext.isEmpty(d.icon)){d.initIconCmp();d.items.push(d.iconCmp)}if(d.orientation=="vertical"){if(Ext.isIE6||Ext.isIE7){d.width=this.width||24}else{if(Ext.isIEQuirks){d.width=this.width||25}}d.layout={type:"vbox",align:"center",clearInnerCtOnLayout:true,bindToOwnerCtContainer:false};d.textConfig={cls:d.baseCls+"-text",type:"text",text:d.title,rotate:{degrees:90}};e=d.ui;if(Ext.isArray(e)){e=e[0]}g=Ext.util.CSS.getRule("."+d.baseCls+"-text-"+e);if(g){c=g.style}if(c){Ext.apply(d.textConfig,{"font-family":c.fontFamily,"font-weight":c.fontWeight,"font-size":c.fontSize,fill:c.color})}d.titleCmp=Ext.create("Ext.draw.Component",{ariaRole:"heading",focusable:false,viewBox:false,flex:1,autoSize:true,margins:"5 0 0 0",items:[d.textConfig],renderSelectors:{textEl:"."+d.baseCls+"-text"}})}else{d.layout={type:"owfhbox",overflowHandler:"Ozone.components.container.boxOverflow.Menu",align:"middle"};function a(m){var h=d,j=h.titleCmp;m.stopEvent();var k=Ext.create("Ext.Editor",{updateEl:false,width:j.getWidth(),height:j.getHeight(),parentEl:j.getEl(),shadow:false,titleCmp:j,field:{xtype:"textfield",allowBlank:false},listeners:{specialkey:{fn:function(p,q,n){if(n.getKey()===n.ENTER){n.preventDefault();h.titleCmp.focus()}},scope:h},afterrender:function(n){n.mon(n.getEl(),"keydown",function(p){p.stopPropagation()});Ozone.components.focusable.EscCloseHelper.prototype.setupFocusOnEsc.call(n,h.titleCmp.getFocusEl(),true)}}});k.startEdit(j.textEl,Ext.htmlDecode(d.title));k.alignTo(h.iconCmp,"l-r");k.on("complete",function(q,r,n,p){h.ownerCt.setTitle(r);q.clearListeners();q.destroy()})}d.titleCmp=Ext.create("Ext.Component",{xtype:"component",ariaRole:"heading",plugins:[new Ozone.components.focusable.Focusable()],minWidth:66,flex:1,cls:d.baseCls+"-text-container",renderTpl:['<span id="{id}-textEl" class="{cls}-text {cls}-text-{ui}">{title}</span>'],renderData:{title:d.title,cls:d.baseCls,ui:d.ui},childEls:["textEl"],renderSelectors:{textEl:"."+d.baseCls+"-text"},listeners:{afterrender:{fn:function(j){var m=false;var k={text:this.title};this.setTooltip(k);j.keyMap=new Ext.util.KeyMap(j.el,[{key:[Ext.EventObject.ENTER,Ext.EventObject.SPACE],handler:function(p,n){a(n)}}]);j.mon(j.textEl,"dblclick",a);j.mon(j.getEl(),"focus",function(){if(m){this.blur()}},j.getEl());j.mon(j.getEl(),"mousedown",function(n){m=true});var h=function(){m=false};j.mon(j.getEl(),{mouseup:h,mouseout:h})},scope:this,single:true},destroy:{fn:function(h){this.clearTip()},scope:this}}})}d.items.push(d.titleCmp);d.spacer=Ext.create("Ext.Component",{itemId:"spacer",xtype:"component",html:"&nbsp;",width:14,focusable:false});d.items.push(d.spacer);d.items=d.items.concat(d.tools);Ozone.components.panel.WidgetHeader.superclass.superclass.initComponent.apply(this,arguments)},onClick:function(a){this.fireEvent("click",a)},initIconCmp:function(){this.iconCmp=Ext.create("Ext.Component",{focusable:false,renderTpl:['<div><img id="{id}-iconEl" alt="" src="{icon}" class="{cls}-icon {iconCls}"/></div>'],renderData:{icon:this.icon!=null?this.icon:Ext.BLANK_IMAGE_URL,cls:this.baseCls,iconCls:this.iconCls,orientation:this.orientation,singleton:this.singleton},childEls:["iconEl"],renderSelectors:{iconEl:"."+this.baseCls+"-icon"},icon:this.icon,iconCls:this.iconCls})},setIcon:function(b){this.icon=b;if(!this.iconCmp){this.initIconCmp();this.insert(0,this.iconCmp)}else{if(!b||!b.length){this.iconCmp.destroy()}else{var c=this.iconCmp,a=c.iconEl;a.set({src:b});c.icon=b}}},setTooltip:function(d,a){var c=this;if(c.rendered){if(!a){c.clearTip()}if(Ext.isObject(d)){var b=Ext.apply({target:this.titleCmp.textEl,anchor:"bottom"},d);b.html=b.text;c.tooltip=Ext.create("Ozone.components.tip.ToolTip",b)}else{c.btnEl.dom.setAttribute("data-"+this.tooltipType,d)}}else{c.tooltip=d}return c},clearTip:function(){if(Ext.isObject(this.tooltip)){this.tooltip.destroy()}},setTitle:function(a){a=Ext.htmlEncode(a);this.callParent([a]);this.setTooltip({text:a})},activate:function(b){var a=this;a.active=true;a.removeCls(a.inactiveCls);if(b!==true){a.fireEvent("activate",a)}},deactivate:function(b){var a=this;a.active=false;a.addCls(a.inactiveCls);if(b!==true){a.fireEvent("deactivate",a)}},insertTool:function(b,c){var a=this.items.indexOf(this.spacer)+1;if(c){a+=c}this.tools.push(this.insert(a,b))},insertMenuItem:function(c,d){var a=this.items.indexOf(this.spacer);if(d){a=this.items.indexOf(this.editor)+1+d}var b=Ext.ClassManager.instantiateByAlias("widget."+c.xtype,c);this.insert(a,b)},isXType:function(b,a){if(b=="header"){return this.callParent([b,false])}else{return this.callParent(arguments)}}});Ext.define("Ozone.components.panel.WidgetTool",{extend:"Ext.panel.Tool",alias:["widget.widgettool","widget.Ozone.components.panel.WidgetTool"],renderTpl:['<img id="{id}-toolEl" src="{icon}" class="{baseCls}-{type}" role="presentation"/>'],plugins:[new Ozone.components.focusable.Focusable("toolEl")],initComponent:function(){var a=this;this.renderData=this.renderData?this.renderData:{};Ext.apply(this.renderData,{icon:this.icon!=null?this.icon:Ext.BLANK_IMAGE_URL});a.childEls=["toolEl"];a.callParent();a.on("afterrender",function(){var b=new Ext.util.KeyMap(a.el,{key:[Ext.EventObject.ENTER,Ext.EventObject.SPACE],fn:function(d,c){c.preventDefault();a.handler.call(this,c)},scope:a.scope||a})})},getFocusEl:function(){return this.toolEl},isFocused:function(){return(this.toolEl.dom===document.activeElement)},onMouseDown:function(){if(this.disabled){return false}this.el.addCls(this.toolPressedCls);this.wasClicked=true;if(this.ownerCt){this.ownerCt.toolClicked=true}},onClick:function(c,b){var a=null;a=this.callParent(arguments);this.wasClicked=false;if(this.ownerCt){this.ownerCt.toolClicked=false}return a}});Ext.define("Ozone.components.tab.WidgetTabPanel",{extend:"Ext.tab.Panel",alias:"widget.widgettabpanel",initComponent:function(){var c=this,b=c.dockedItems||[],a=c.activeTab||0;c.layout=Ext.create("Ext.layout.container.Card",Ext.apply({owner:c,deferredRender:c.deferredRender,activeItem:c.activeItem?c.activeItem:0,itemCls:c.itemCls,parseActiveItem:function(d){if(!Ext.isDefined(d)){return null}else{if(d&&d.isComponent){return d}else{if(typeof d=="number"){return this.getLayoutItems()[d]}else{return this.owner.getComponent(d)}}}}},c.layout));c.tabBar=Ext.create("Ozone.components.tab.WidgetTabBar",Ext.apply({},c.tabBar,{dock:c.tabPosition,border:c.border,cardLayout:c.layout,tabPanel:c}));c.tabBar.on("render",function(d){d.layout.overflowHandler.on("scroll",function(h,g,e){this.layout.scollerResetPerformed=false},d)},this,{single:true});if(b&&!Ext.isArray(b)){b=[b]}b.push(c.tabBar);c.dockedItems=b;c.addEvents("beforetabchange","tabchange");Ozone.components.tab.WidgetTabPanel.superclass.superclass.initComponent.apply(this,arguments);c.setActiveTab(a);c.on("afterlayout",c.afterInitialLayout,c,{single:true})},onAdd:function(c,a){var b=this;c.tab=b.tabBar.insert(a,{xtype:"widgettab",card:c,cls:"widget-tab",title:c.title,itemId:c.itemId,model:c.model,stateful:false,icon:c.icon,disabled:c.disabled,closable:c.closable,hidden:c.hidden,width:200,tabBar:b.tabBar,singleton:c.singleton,listeners:{activate:{fn:function(d){this.setActiveTab(d.card,true)},scope:this},beforeclose:{fn:this.onBeforeClose,scope:this},close:{fn:function(d){this.tabBar.closeTab(d,true)},scope:this},titlechange:{fn:function(e,d,g){if(d!=g){e.suspendEvents();c.setTitle(d);e.resumeEvents()}},scope:this}}});c.on({scope:b,enable:b.onItemEnable,disable:b.onItemDisable});if(c.isPanel){if(b.removePanelHeader){c.preventHeader=true;if(c.rendered){c.updateHeader()}}if(c.isPanel&&b.border){c.setBorder(false)}}if(this.rendered&&b.items.getCount()===1){b.setActiveTab(0)}},setActiveTab:function(b,a){var d=this,c;b=d.getComponent(b);if(b){c=d.getActiveTab();if(c&&c!==b&&d.fireEvent("beforetabchange",d,b,c)===false){return false}d.tabBar.setActiveTab(b.tab,a);d.activeTab=b;if(d.rendered){d.layout.setActiveItem(b)}if(c&&c!==b){d.fireEvent("tabchange",d,b,c)}}},onItemActivate:function(a){this.tabBar.setActiveTab(a.tab)},onItemClose:function(a){this.tabBar.closeTab(a.tab)},onItemIconChange:function(b,a){b.tab.setIconCls(a);this.getTabBar().doLayout()},onItemTitleChange:function(a,b){a.tab.setTitle(b);this.getTabBar().doLayout()},onBeforeClose:function(a){if(a.card.dashboard.configRecord.get("locked")&&!a.card.model.get("floatingWidget")){Ozone.Msg.alert(Ozone.layout.DialogMessages.dashboardLockAlertTitle,Ozone.layout.DialogMessages.dashboardLockAlert,null,null,null,a.card.dashboard.dashboardContainer.modalWindowManager);return false}}});Ext.define("Ozone.components.tab.WidgetTabBar",{extend:"Ext.toolbar.Toolbar",alias:"widget.widgettabbar",cls:"widget-tab-bar",defaultType:"widgettab",initComponent:function(){var b=this;b.addEvents("change");if(!b.layout&&b.enableOverflow){b.layout={overflowHandler:"Menu"}}if(b.dock==="right"||b.dock==="left"){b.vertical=true}b.layout=Ext.applyIf(Ext.isString(b.layout)?{type:b.layout}:b.layout||{},{type:b.vertical?"vbox":"hbox",align:b.vertical?"stretchmax":"middle"});if(b.vertical){b.addClsWithUI("vertical")}if(b.ui==="footer"){b.ignoreBorderManagement=true}Ozone.components.tab.WidgetTabBar.superclass.superclass.initComponent.apply(this,arguments);b.addEvents("overflowchange");var a=b.getLayout();a.overflowHandler=Ext.create("Ext.layout.container.boxOverflow.Scroller",a,{beforeScrollerCls:Ext.baseCSSPrefix+"toolbar-scroll-"+b.layout.parallelBefore,afterScrollerCls:Ext.baseCSSPrefix+"toolbar-scroll-"+b.layout.parallelAfter});a.scollerResetPerformed=false;a.autoSize=false;a.clearInnerCtOnLayout=true},closeTab:function(c,d){var b=c.card,e=this.tabPanel,a;if(c.active&&this.items.getCount()>1){a=c.next("tab")||this.items.items[0];this.setActiveTab(a,d);if(e){e.setActiveTab(a.card)}}this.remove(c);if(e&&b){e.remove(b)}if(a){a.focus()}},setActiveTab:function(b,a){if(b.disabled){return}var c=this;if(c.activeTab){c.activeTab.deactivate()}b.activate(a);if(c.rendered){c.layout.layout();b.el.scrollIntoView(c.layout.getRenderTarget())}c.activeTab=b;c.fireEvent("change",c,b,b.card)}});Ext.define("Ozone.components.tab.WidgetTab",{extend:"Ozone.components.widget.WidgetPanel",alias:["widget.widgettab","widget.Ozone.components.tab.WidgetTab"],activeCls:"active",onRender:function(){var a=this;a.callParent(arguments);a.el.setStyle("cursor","pointer");a.mon(a.el,{scope:a,click:a.onClick});if(a.active){a.activate(true)}a.keyMap=new Ext.util.KeyMap(a.el,[{key:Ext.EventObject.ENTER,handler:a.onEnterKey,scope:a},{key:Ext.EventObject.DOWN,handler:a.onDown,scope:a}])},onClick:function(a){this.activate()},enable:function(a){var b=this;b.callParent(arguments);b.removeClsWithUI(b.position+"-disabled");return b},disable:function(a){var b=this;b.callParent(arguments);b.addClsWithUI(b.position+"-disabled");return b},onDestroy:function(){var a=this;Ext.destroy(a.keyMap);delete a.keyMap;a.callParent(arguments)},setClosable:function(a){var b=this;a=(!arguments.length||!!a);if(b.closable!=a){b.closable=a;if(b.card){b.card.closable=a}b.syncClosableUI();if(b.rendered){b.syncClosableElements();b.doComponentLayout();if(b.ownerCt){b.ownerCt.doLayout()}}}},setCard:function(a){var b=this;b.card=a;b.setTitle(b.title||a.title)},onCloseClick:function(){var a=this;if(a.fireEvent("beforeclose",a)!==false){a.fireEvent("close",a)}},onEnterKey:function(a,c){var b=this;b.fireEvent("click",this,c)},onDown:function(){this.card.focus(null,null,true,true)},activate:function(b){var a=this;a.active=true;a.addClsWithUI([a.activeCls]);if(b!==true){a.fireEvent("activate",a)}},deactivate:function(b){var a=this;a.active=false;a.removeClsWithUI([a.activeCls]);if(b!==true){a.fireEvent("deactivate",a)}}});Ext.define("Ozone.components.toolbar.WidgetToolbar",{extend:"Ext.toolbar.Toolbar",alias:"widget.widgettoolbar",defaultType:"wigdetpanel",initComponent:function(){var c=this,b;if(!c.layout&&c.enableOverflow){c.layout={overflowHandler:"Menu"}}if(c.dock==="right"||c.dock==="left"){c.vertical=true}c.layout=Ext.applyIf(Ext.isString(c.layout)?{type:c.layout}:c.layout||{},{type:c.vertical?"vbox":"hbox",align:c.vertical?"stretchmax":"middle"});if(c.vertical){c.addClsWithUI("vertical")}if(c.ui==="footer"){c.ignoreBorderManagement=true}Ozone.components.toolbar.WidgetToolbar.superclass.superclass.initComponent.apply(this,arguments);c.addEvents("overflowchange");var a=c.getLayout();a.overflowHandler=Ext.create("Ext.layout.container.boxOverflow.Scroller",a,{beforeScrollerCls:Ext.baseCSSPrefix+"toolbar-scroll-"+c.layout.parallelBefore,afterScrollerCls:Ext.baseCSSPrefix+"toolbar-scroll-"+c.layout.parallelAfter});a.scrollerResetPerformed=false;a.autoSize=false;a.clearInnerCtOnLayout=true}});Ext.define("Ozone.components.marketplace.SortablePagingToolbar",{extend:"Ext.toolbar.Paging",alias:"widget.sortablepagingtoolbar",doLoad:function(c,b){pn=this.getParams();b=b||{};b[pn.start]=c;var a=this.getLoadParams(b);if(this.fireEvent("beforechange",this,a)!==false){this.store.load({params:a})}},getLoadParams:function(c){var b={},a=this.getParams();for(param in a){b[a[param]]=this.store.lastOptions.params[a[param]]}Ext.apply(b,c);return b},doRefresh:function(){var a=this.store.currentPage;if(this.fireEvent("beforechange",this,a)!==false){this.store.loadPage(a,this.store.lastOptions.params)}}});(function(){var a=false;Ext.define("Ozone.components.focusable.FocusableView",{extend:"Ext.view.View",alias:"widget.focusableview",initComponent:function(){this.callParent(arguments);this.on("selectionchange",function(c,g){for(var d=0,b=g.length;d<b;d++){var j=this.getNode(g[d]);if(j!=null){if(a){a=false}else{if(document.activeElement!==j){try{j.focus()}catch(h){}}}}}},this);this.on("itemupdate",function(b,c,d){this.setupFocusListeners(d)},this)},refresh:function(){this.callParent(arguments);this.getEl().select(this.itemSelector).each(function(b){this.setupFocusListeners(b.dom)},this)},setupFocusListeners:function(c){var b=new Ext.Element(c);this.mon(b,"focus",function(d,e){if(this.getSelectedNodes()[0]!==e){this.select(this.getRecord(e))}},this);this.mon(b,"mousedown",function(d,e){});this.mon(b,"blur",function(d,e){if(this.store){this.deselect(this.getRecords([e]))}},this);Ozone.components.focusable.Focusable.clearOutline(b)}})})();Ext.define("Ozone.components.view.TemplateEventDataView",{extend:"Ext.view.View",alias:"widget.templateeventdataview",initComponent:function(){this.callParent();this.addEvents("templaterendered")},refresh:function(){this.callParent();if(this.store.getRange().length>0){this.fireEvent("templaterendered",this)}},update:function(b,c,a){this.callParent([b,c,a]);this.fireEvent("templaterendered",this)},bindStore:function(a,b){this.suspendEvents();this.callParent([a,b]);this.resumeEvents()}});Ext.define("Ozone.components.window.ModalWindow",{extend:"Ext.window.Window",alias:["widget.modalwindow","widget.Ozone.components.window.ModalWindow"],mixins:{widget:"Ozone.components.focusable.CircularFocus"},modal:true,hideMode:"display",initComponent:function(){this.callParent(arguments);this.dashboardContainer&&this.on("show",function(){this.dashboardContainer.modalWindowManager.register(this);this.dashboardContainer.modalWindowManager.bringToFront(this)})},afterRender:function(){var a=this,b;a.callParent(arguments);if(!a.closable){b=a.getKeyMap();b.on(27,a.onEsc,a);b.disable()}},onEsc:function(a,b){if(this.onClose){this.onClose()}this.callParent(arguments)}});Ext.define("Ozone.components.window.WidgetSwitcher",{extend:"Ozone.components.window.ModalWindow",alias:"widget.widgetswitcher",closeAction:"hide",modal:true,modalAutoClose:true,width:520,preventHeader:true,shadow:false,ui:"system-window",store:null,dashboard:null,viewId:"widget-switcher-widgets-view",noWidgetsViewId:"widget-switcher-no-widgets",activateWidget:function(b,a,g,c,e,d){this.close();this.activeDashboard.activateWidget(a.data.uniqueId,true,true);if(!a.data.background){Ext.getCmp(a.data.uniqueId).focus(false,false,true,true)}else{this.confirmRemoveBackgroundWidget(a)}},showNoWidgetsView:function(){if(this.view){this.view.getEl().hide()}if(!this.noWidgetsView){this.noWidgetsView=Ext.create("Ext.Component",{itemId:this.noWidgetsViewId,autoEl:{tag:"span",tabIndex:"0",html:"No open widgets found!"}});this.add(this.noWidgetsView);this.noWidgetsView.keynav=new Ext.util.KeyNav(this.noWidgetsView.getEl(),{tab:function(a){this.focus()},scope:this.noWidgetsView});Ozone.components.focusable.Focusable.clearOutline(this.noWidgetsView.getEl())}else{this.noWidgetsView.getEl().setVisible()}this.noWidgetsView.focus()},setStore:function(a){var d=a.getCount()-1,b,e=[];b=Ext.create("Ext.data.Store",{proxy:{type:"memory",reader:{type:"json",root:"."}}});while(d>-1){var c=this.widgetStore.getById(a.getAt(d).get("widgetGuid"));if(c){if(c.get("background")){e.push(a.data.items[d])}else{b.add(a.data.items[d])}}d-=1}b.add(e);if(b.getCount()>0){if(this.noWidgetsView){this.noWidgetsView.getEl().hide()}if(this.view){this.view.getEl().setVisible()}else{this.add(this.initView())}this.view.bindStore(b)}else{this.showNoWidgetsView()}},initView:function(){var a=this;if(this.view){return this.view}this.view=Ext.create("Ozone.components.focusable.FocusableView",{itemId:this.viewId,itemSelector:".widget",overItemCls:"widget-over",selectedItemCls:"widget-selected",trackOver:true,singleSelect:true,tpl:new Ext.XTemplate('<tpl for=".">','<div class="widget" tabindex="0" data-qtip="{[Ext.htmlEncode(Ext.htmlEncode(values.name))]}">','<div class="thumb-wrap">','<img src="{[this.getIcon(xindex, values)]}" class="thumb" />',"</div>",'<div class="thumb-text">{[Ext.String.ellipsis(Ext.htmlEncode(values.name),20,false)]}</div>',"</div>","</tpl>",{compiled:true,getIcon:function(d,b){var c=a.activeDashboard.widgetStore.getById(b.widgetGuid).data.image;return c}})});this.view.on("itemclick",this.activateWidget,this);this.view.on("itemkeydown",function(c,b,h,d,g,e){switch(g.getKey()){case g.ENTER:case g.SPACE:g.preventDefault();this.activateWidget(c,b,h,d,g,e)}},this);this.view.on("viewready",function(){var b,c=this;if(this.getStore().getCount()>0){this.widgetEls=this.getEl().query(this.itemSelector);b=this.widgetEls[0];if(b){setTimeout(function(){c.getNode(0).focus()},100)}}},this.view);this.view.on("refresh",function(){var c=this.view.getEl().query(this.view.itemSelector),b=c.length;if(b>0){this.setupFocus(Ext.get(c[0]),Ext.get(c[b-1]))}},this);return this.view},confirmRemoveBackgroundWidget:function(a){var b=this;Ext.widget("alertwindow",{title:"Warning",html:"<i>"+Ext.htmlEncode(a.get("name"))+"</i>"+Ozone.layout.DialogMessages.closeBackgroundWidgetWarning,width:400,dashboardContainer:b.activeDashboard.dashboardContainer,okFn:function(){var d=Ext.getCmp(a.get("paneGuid")).stateStore,c=b.activeDashboard.stateStore;d.remove(d.findRecord("uniqueId",a.get("uniqueId")))}}).show()}});Ext.define("Ozone.layout.window.ManagerWindow",{extend:"Ozone.components.window.ModalWindow",alias:["widget.managerwindow","widget.Ozone.layout.window.ManagerWindow"],stateful:false,closeAction:"hide",closable:true,maximizable:false,minimizable:false,layout:"fit",constrain:true,initComponent:function(){var a=this;a.width=a.width?a.width:a.ownerCt.getWidth()-200;a.height=a.height?a.height:a.ownerCt.getHeight()-100;a.callParent();a.on("afterrender",function(){var b=this.getEl();b.dom.tabIndex=0;b.dom.hideFocus=true;b.dom.outlineStyle="none"},a);a.on("resize",function(){a.syncShadow()});if(a.launchingBtn){a.on("hide",a.focusLaunchingBtn,a)}},focusLaunchingBtn:function(){if(this.launchingBtn){this.launchingBtn.focus()}}});Ext.define("Ozone.components.window.AdminToolsWindow",{extend:"Ozone.components.window.ModalWindow",alias:["widget.admintoolswindow","widget.Ozone.components.window.AdminToolsWindow"],plugins:[new Ozone.components.keys.HotKeyComponent(Ozone.components.keys.HotKeys.ADMINISTRATION),new Ozone.components.draggable.DraggableWidgetView({itemSelector:".tool",dragNodeSelector:".thumb-wrap"})],title:"Administration",id:"admToolsWindow",cls:"system-window settings-window",ui:"system-window",iconCls:"admin-tools-header-icon",layout:"auto",closable:false,resizable:false,draggable:false,modal:true,modalAutoClose:true,shadow:false,autoScroll:false,minToolsInRow:3,maxToolsInRow:5,dashboardContainer:null,activeDashboard:null,store:null,initComponent:function(){var b=this,a=b.dashboardContainer.widgetStore;b.store=Ext.create("Ext.data.Store",{fields:[{name:"name",sortType:Ext.data.SortTypes.asUCString},"image","guid","singleton"]});b.dashboardContainer.activeDashboard.widgetStore.each(function(c){var d=c.get("widgetTypes");if(d.length>0&&d[0].name=="administration"&&c.get("definitionVisible")){b.store.add(c)}});b.store.sort("name","ASC");this.view=Ext.create("Ozone.components.view.ToolDataView",{store:b.store,multiSelect:false,singleSelect:true,autoScroll:true,listeners:{refresh:{fn:b.setupModalFocus,scope:b},viewready:{fn:this.updateWindowSize,scope:this,single:true}}});this.items=[this.view];this.on("resize",this.center,this);this.callParent(arguments)},setupModalFocus:function(){var a=this.down("tooldataview");this.setupFocus(Ext.get(a.getNode(0)),Ext.get(a.getNode(a.store.getCount()-1)));Ext.defer(function(){Ext.get(a.getNode(0)).focus()},100)},callBtnHandler:function(c,b,a){this.close();this.dashboardContainer.launchWidgets(this.store.getAt(this.store.find("name",c)),a)},updateWindowSize:function(e){var j,d,c;c=e.getNode(0);if(!c){return}var b=Ext.get(c),g=b.getMargin("r"),a=e.getStore().getCount(),h=0;j=b.getWidth();if(a<this.minToolsInRow){h=this.minToolsInRow}else{if(a>this.maxToolsInRow){h=this.maxToolsInRow}else{h=a}}d=(j+g)*h;this.view.doComponentLayout(d)}});Ext.define("Ozone.components.window.MarketplaceWindow",{extend:"Ozone.components.window.ModalWindow",alias:["widget.marketplacewindow","widget.Ozone.components.window.MarketplaceWindow"],title:"Marketplaces",id:"marketplaceWindow",cls:"system-window settings-window",ui:"system-window",iconCls:"marketplace-header-icon",layout:"auto",closable:false,resizable:false,draggable:false,modal:true,modalAutoClose:true,shadow:false,autoScroll:false,minToolsInRow:3,maxToolsInRow:5,dashboardContainer:null,plugins:[new Ozone.components.keys.HotKeyComponent(Ozone.components.keys.HotKeys.MARKETPLACE),new Ozone.components.draggable.DraggableWidgetView({itemSelector:".tool",dragNodeSelector:".thumb-wrap"})],store:null,initComponent:function(){var a=this;a.store=Ext.create("Ext.data.Store",{fields:[{name:"name",sortType:Ext.data.SortTypes.asUCString},"image","caption","guid","singleton"]});a.dashboardContainer.activeDashboard.widgetStore.each(function(b){var c=b.get("widgetTypes");if(c.length>0&&c[0].name=="marketplace"&&b.get("definitionVisible")){a.store.add(b)}});a.store.sort("name","ASC");this.view=Ext.create("Ozone.components.view.ToolDataView",{store:this.store,multiSelect:false,singleSelect:true,autoScroll:true,listeners:{refresh:{fn:this.setupModalFocus,scope:this},viewready:{fn:this.updateWindowSize,scope:this,single:true}}});this.items=[this.view];this.on("resize",this.center,this);this.callParent(arguments)},setupModalFocus:function(){var a=this.down("tooldataview");this.setupFocus(Ext.get(a.getNode(0)),Ext.get(a.getNode(a.store.getCount()-1)));Ext.defer(function(){var b=a.getNode(0);if(b){Ext.get(b).focus()}},100)},callBtnHandler:function(c,b,a){this.close();this.dashboardContainer.launchWidgets(this.store.getAt(this.store.find("name",c)),a)},updateWindowSize:function(e){var j,d,c;c=e.getNode(0);if(!c){return}var b=Ext.get(c),g=b.getMargin("r"),a=e.getStore().getCount(),h=0;j=b.getWidth();if(a<this.minToolsInRow){h=this.minToolsInRow}else{if(a>this.maxToolsInRow){h=this.maxToolsInRow}else{h=a}}d=(j+g)*h;this.view.doComponentLayout(d)}});Ext.define("Ozone.components.window.MetricWindow",{extend:"Ozone.components.window.ModalWindow",alias:["widget.metricwindow","widget.Ozone.components.window.MetricWindow"],title:"Metric",id:"metricWindow",cls:"system-window settings-window",ui:"system-window",iconCls:"metric-header-icon",layout:"auto",closable:false,resizable:false,draggable:false,modal:true,modalAutoClose:true,shadow:false,autoScroll:false,minToolsInRow:3,maxToolsInRow:5,dashboardContainer:null,plugins:[new Ozone.components.keys.HotKeyComponent(Ozone.components.keys.HotKeys.METRIC),new Ozone.components.draggable.DraggableWidgetView({itemSelector:".tool",dragNodeSelector:".thumb-wrap"})],store:null,initComponent:function(){var a=this;a.store=Ext.create("Ext.data.Store",{fields:[{name:"name",sortType:Ext.data.SortTypes.asUCString},"image","guid","singleton"]});a.dashboardContainer.activeDashboard.widgetStore.each(function(b){var c=b.get("widgetTypes");if(c.length>0&&c[0].name=="metric"&&b.get("definitionVisible")){a.store.add(b)}});a.store.sort("name","ASC");this.view=Ext.create("Ozone.components.view.ToolDataView",{store:this.store,multiSelect:false,singleSelect:true,autoScroll:true,listeners:{refresh:{fn:this.setupModalFocus,scope:this},viewready:{fn:this.updateWindowSize,scope:this,single:true}}});this.items=[this.view];this.on("resize",this.center,this);this.callParent(arguments)},setupModalFocus:function(){var a=this.down("tooldataview");this.setupFocus(Ext.get(a.getNode(0)),Ext.get(a.getNode(a.store.getCount()-1)));Ext.defer(function(){var b=a.getNode(0);if(b){Ext.get(b).focus()}},100)},callBtnHandler:function(c,b,a){this.close();this.dashboardContainer.launchWidgets(this.store.getAt(this.store.find("name",c)),a)},updateWindowSize:function(e){var j,d,c;c=e.getNode(0);if(!c){return}var b=Ext.get(c),g=b.getMargin("r"),a=e.getStore().getCount(),h=0;j=b.getWidth();if(a<this.minToolsInRow){h=this.minToolsInRow}else{if(a>this.maxToolsInRow){h=this.maxToolsInRow}else{h=a}}d=(j+g)*h;this.view.doComponentLayout(d)}});Ext.define("Ozone.components.window.AlertWindow",{extend:"Ozone.components.window.ModalWindow",alias:["widget.alertwindow","widget.Ozone.components.window.AlertWindow"],resizable:false,buttonAlign:"center",focusOnClose:null,dashboardContainer:null,initComponent:function(){var a=this;a.buttons=[{text:"OK",itemId:"ok",scope:this}];if(a.showCancelButton!==false){a.buttons.push({text:"Cancel",itemId:"cancel",scope:this})}a.on("afterrender",function(){var e=a.getEl();var d=a.down("#ok");var b=d.getEl();if(a.showCancelButton!==false){var g=a.down("#cancel");var c=g.getEl();a.defaultFocus=g;if(a.initialConfig.cancelText&&a.showCancelButton!==false){g.setText(a.initialConfig.cancelText)}a.cancelKeyMap=new Ext.util.KeyMap(c,{key:[Ext.EventObject.ENTER],fn:a.onCancelBtnEnter,scope:a});g.on("click",function(h,j){a.close()});a.setupFocus(e,c)}else{a.defaultFocus=d;a.setupFocus(e,b)}if(a.initialConfig.okText){d.setText(a.initialConfig.okText)}a.okKeyMap=new Ext.util.KeyMap(b,{key:[Ext.EventObject.ENTER],fn:a.onOkBtnEnter,scope:a});d.on("click",function(h,j){if(a.initialConfig.okFn){a.initialConfig.okFn()}a.skipCancelFn=true;a.close()});a.mon(e,"focus",function(){e.removeCls("x-focus");a.initialConfig.firstEl?a.initialConfig.firstEl.focus():d.focus()})});a.on("beforeclose",function(){a.down("#ok").clearListeners();var b;if(b=a.down("#cancel")){b.clearListeners()}a.clearListeners();a.okKeyMap.destroy();a.cancelKeyMap&&a.cancelKeyMap.destroy();if(a.focusOnClose){a.focusOnClose.focus()}if(!a.skipCancelFn&&a.initialConfig.cancelFn){a.initialConfig.cancelFn()}});a.callParent(arguments)},onCancelBtnEnter:function(){var a=this;a.cancelKeyMap.destroy();a.down("#cancel").clearListeners();a.on("keyup",function(b){if(a.initialConfig.cancelFn){a.initialConfig.cancelFn()}b.stopEvent();a.skipCancelFn=true;a.close()},a,{element:"el"})},onOkBtnEnter:function(){var a=this;a.okKeyMap.destroy();a.down("#ok").clearListeners();a.on("keyup",function(b){if(a.initialConfig.okFn){a.initialConfig.okFn()}b.stopEvent();a.skipCancelFn=true;a.close()},a,{element:"el"})}});Ext.define("Ozone.components.window.CreateDashboardWindow",{extend:"Ozone.layout.window.ManagerWindow",alias:["widget.createdashboardwindow","widget.Ozone.components.window.CreateDashboardWindow"],title:Ozone.layout.tooltipString.createDashboardTitle,constrain:Ext.isIE,constrainHeader:true,cls:"manageContainer",draggable:true,closeAction:"destroy",mixins:{escHelper:"Ozone.components.focusable.EscCloseHelper"},dashboardContainer:null,existingDashboardModel:null,ownerCt:null,initComponent:function(){var c=this;var b=c.ownerCt.getHeight();var a=c.ownerCt.getWidth();if(c.height==null){c.height=(b>379)?370:b-10}if(c.width==null){c.width=(a>559)?550:a-10}if(c.minHeight==null){c.minHeight=250}c.items=[{xtype:"owfCreateDashboardsContainer",dashboardContainer:c.dashboardContainer,hideViewSelectRadio:c.hideViewSelectRadio,winId:c.id,existingDashboardRecord:c.existingDashboardRecord}];c.callParent();c.on("afterrender",c.setupModalFocus,c,{single:true});c.on("show",c.focusFirstEl,c);c.addEvents("cancel")},setupModalFocus:function(){this.setupFocus(this.down("textfield").inputEl,this.down("#cancelBtn").getEl())},focusFirstEl:function(){this.down("textfield").inputEl.focus(250)}});Ext.define("Ozone.components.window.ProfileWindow",{extend:"Ozone.layout.window.ManagerWindow",alias:["widget.profileWindow"],title:"Profile",constrain:Ext.isIE,constrainHeader:true,modal:true,modalAutoClose:true,cls:"profileWindow",mixins:{escHelper:"Ozone.components.focusable.EscCloseHelper"},initComponent:function(){var c=this;var b=c.ownerCt.getHeight();var a=c.ownerCt.getWidth();c.height=(b>379)?370:b-10;c.width=(a>559)?550:a-10;c.minHeight=250;Ext.apply(this,{items:[{xtype:"panel",cls:"userInfo",title:"User Information",layout:{type:"fit"},autoScroll:true,items:[{xtype:"component",cls:"userInfoTable",renderTpl:new Ext.XTemplate("<table>","<tr>",'<td class="fieldLabel">',"User Name","</td>",'<td class="fieldValue displayName">',"{displayName:htmlEncode}","</td>","</tr>","<tr>",'<td class="fieldLabel">',"Full Name","</td>",'<td class="fieldValue">',"{userRealName:htmlEncode}","</td>","</tr>","<tr>",'<td class="fieldLabel">',"Email","</td>",'<td class="fieldValue">',"{email:htmlEncode}","</td>","</tr>","<tr>",'<td class="fieldLabel">',"Member of","</td>",'<td class="fieldValue">',"{[this.renderGroupList(values.groups)]}","</td>","</tr>","</table>",{renderGroupList:function(e){var h="";if(e!=null&&e.length>0){for(var g=0,d=e.length;g<d;g++){h+=Ext.htmlEncode(e[g].name);if(g<d-1){h+=", "}}}return h}}),renderData:this.user}]}]});c.callParent(arguments)}});Ext.define("Ozone.components.dashboarddesigner.DraggableView",{extend:"Ozone.components.focusable.FocusableView",alias:["widget.dashboarddesignerbaselayoutdraggableview","widget.Ozone.components.dashboarddesigner.DraggableView"],initComponent:function(){var a=this;a.on("viewready",a.setup,a,{single:true});a.on("destroy",a.cleanUp,a);a.on("keyup",a.keyup,a,{element:"el"});a.addEvents("enterpress");a.enableBubble(["enterpress"]);a.callParent(arguments)},keyup:function(b,d){var c=d,a=this.getRecord(c);if(b.getKey()===Ext.EventObject.ENTER){this.fireEvent("enterpress",this,a,c)}},setup:function(a){var c=this;c.tip=Ext.create("Ext.tip.ToolTip",{target:a.el,delegate:a.itemSelector,trackMouse:true,renderTo:a.el,mouseOffset:[0,10],listeners:{beforeshow:function b(d){d.update(a.getRecord(d.triggerElement).get("displayName"))}}});c.dragZone=new Ext.dd.DragZone(a.getEl(),{isTarget:false,dragSourceView:a,ddGroup:"dashboard-designer",animRepair:false,getDragData:function(d){var e=d.getTarget(this.dragSourceView.itemSelector);if(e){return{ddel:e.cloneNode(true),draggedRecord:a.getRecord(e)}}}})},cleanUp:function(){this.tip.destroy();this.dragZone.destroy()}});Ext.define("Ozone.components.dashboarddesigner.BaseLayout",{extend:"Ozone.components.dashboarddesigner.DraggableView",alias:["widget.dashboarddesignerbaselayout","widget.Ozone.components.dashboarddesigner.BaseLayout"],id:"dashboard-designer-base-layout",itemSelector:".layout-type",singleSelect:true,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="layout-type" tabindex="0">','<img height="100" width="100" src="{image}"></img>',"</div>","</tpl>"),store:Ext.create("Ext.data.Store",{fields:["type","displayName","image","classes"],data:[{type:"vbox",displayName:"Horizontal Divider",image:"images/dashboard-designer/vbox.png",classes:["top","bottom"]},{type:"hbox",displayName:"Vertical Divider",image:"images/dashboard-designer/hbox.png",classes:["left","right"]}]})});Ext.define("Ozone.components.dashboarddesigner.LayoutType",{extend:"Ozone.components.dashboarddesigner.DraggableView",alias:["widget.dashboarddesignerlayouttype","widget.Ozone.components.dashboarddesigner.LayoutType"],id:"dashboard-designer-layout",itemSelector:".layout",singleSelect:true,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="layout" tabindex="0">','<img height="100" width="100" src="{image}"></img>',"</div>","</tpl>"),store:Ext.create("Ext.data.Store",{model:"Ozone.data.LayoutType",data:[{paneType:"accordionpane",displayName:Ozone.ux.DashboardMgmtString.accordion,image:"images/dashboard-designer/accordion.png"},{paneType:"desktoppane",displayName:Ozone.ux.DashboardMgmtString.desktop,image:"images/dashboard-designer/desktop.png"},{paneType:"portalpane",displayName:Ozone.ux.DashboardMgmtString.portal,image:"images/dashboard-designer/portal.png"},{paneType:"tabbedpane",displayName:Ozone.ux.DashboardMgmtString.tabbed,image:"images/dashboard-designer/tabbed.png"},{paneType:"fitpane",displayName:Ozone.ux.DashboardMgmtString.fit,image:"images/dashboard-designer/fit.png"}]})});Ext.define("Ozone.components.dashboarddesigner.Pane",{extend:"Ext.container.Container",alias:["widget.dashboarddesignerpane","widget.Ozone.components.dashboarddesigner.Pane"],layout:{type:"fit"},componentCls:"dashboarddesignerpane droppable",paneType:null,initComponent:function(){if(this.htmlText){this.html="<h3>"+Ext.htmlEncode(this.htmlText)+"</h3>"}if(this.paneType){this.componentCls+=" "+this.paneType}this.listeners={afterrender:{fn:this.onAfterPaneRender,scope:this},destroy:function(){this.el.removeAllListeners()}};this.addEvents("paneselect");this.enableBubble(["paneselect"]);this.callParent(arguments)},getBubbleTarget:function(){return this.up("dashboarddesignerworkingarea")},onAfterPaneRender:function(){var a=this,b=true;this.textEl=this.el.down("h3");this.el.set({tabIndex:0});this.el.on({mousedown:function(){b=false},mouseup:function(){b=true},focus:function(c,d){if(b){Ext.fly(d).addCls("highlight-dashboard-designer-drop")}},blur:function(c,d){if(b){Ext.fly(d).removeCls("highlight-dashboard-designer-drop")}},click:a.showBoxLayout,scope:a});if(this.textEl){this.enableEditing()}},showBoxLayout:function(a,b){this.fireEvent("paneselect",this)},onKeyUp:function(a,b){if(a.getKey()===Ext.EventObject.ENTER&&b.nodeName!=="INPUT"){this.fireEvent("paneselect",this);this.disableEditing();this.startEdit(a,this.textEl)}},enableEditing:function(){if(this._editingEnabled||!this.textEl){return}this.el.on("dblclick",this.startEdit,this,{delegate:"h3"});this.el.on("keyup",this.onKeyUp,this);this._editingEnabled=true},disableEditing:function(){this.el.un("dblclick",this.startEdit,this,{delegate:"h3"});this.el.un("keyup",this.onKeyUp,this);this._editingEnabled=false},startEdit:function(a,b){a.stopEvent();this.editor=this.editor||new Ext.Editor({updateEl:true,shadow:false,floating:false,revertInvalid:false,field:{xtype:"textfield",validator:function(d){var c=parseFloat(d);if(isNaN(c)){return"Nice try! Invalid input, please enter a valid value. For example, 400px or 50%."}if(d.charAt(d.length-1)==="%"){if(c<=0){return"Width/Height of 0% or lower is not allowed"}else{if(c>=100){return"Width/Height of 100% or higher is not allowed"}}}else{if(c<36){return"Minimum width/height allowed is 36px"}}return true}},listeners:{complete:this.editComplete,canceledit:this.resetFocus,scope:this},parentEl:this.el});this.editor.startEdit(Ext.get(b))},editComplete:function(g,h,d){var c=this.el.getWidth(),b=parseFloat(h),e=this.getNextPane(),j,a;if(h.charAt(h.length-1)==="%"){this.initialConfig.flex=this.flex=b/100;j=(100-b)+"%";e.initialConfig.flex=e.flex=(100-b)/100;if(e.textEl){e.textEl.update(j)}this.initialConfig.htmlText=b+"%";e.initialConfig.htmlText=j}else{delete this.initialConfig.flex;delete this.flex;a=this.ownerCt.initialConfig.layout&&this.ownerCt.initialConfig.layout.type==="hbox";if(a){this.initialConfig.width=b;this.width=b}else{this.initialConfig.height=b;this.height=b}this.initialConfig.htmlText=b+"px";e.initialConfig.htmlText="Variable";if(e.textEl){e.textEl.update("Variable")}e.initialConfig.flex=e.flex=1}this.textEl.update(this.initialConfig.htmlText);this.up("container").doLayout();this.resetFocus()},resetFocus:function(){var a=this;Ext.defer(function(){a.el.focus();a.enableEditing()},100)},getNextPane:function(){if(this.next()&&this.next().next()){return this.next().next()}else{if(this.prev()&&this.prev().prev()){return this.prev().prev()}}return null}});Ext.define("Ozone.components.dashboarddesigner.SidePanel",{extend:"Ext.container.Container",alias:["widget.dashboarddesignersidepanel","widget.Ozone.components.dashboarddesigner.SidePanel"],id:"dashboard-designer-side-panel",dashboardDesigner:null,initComponent:function(){var a=this;a.items=[{xtype:"dashboarddesignerbaselayout",listeners:{viewready:{fn:a.setupFocus},enterpress:{fn:a.baseLayoutSelected,scope:a}}},{xtype:"dashboarddesignerlayouttype",listeners:{enterpress:{fn:a.baseLayoutSelected,scope:a}}},{xtype:"button",text:"Reset",handler:a.dashboardDesigner.reset,scope:a.dashboardDesigner},{xtype:"component",itemId:"dashboard-lock",cls:"dashboard-lock",tpl:['<img src="{image}"></img>',],data:{image:a.dashboardDesigner.locked?"themes/common/images/dashboard-designer/LockON.png":"themes/common/images/dashboard-designer/LockOFF.png"},listeners:{afterrender:{fn:function(d){var c=this;d.el.on("mouseover",function(){d.tip=Ext.create("Ext.tip.ToolTip",{target:d.el,trackMouse:true,mouseOffset:[0,10],renderTo:d.ownerCt.el,width:115,html:c.dashboardDesigner.locked?"Dashboard locked":"Dashboard unlocked",listeners:{beforeshow:{fn:function e(g){var h=c.dashboardDesigner.locked?"Dashboard locked":"Dashboard unlocked";g.update(h)}}}});d.tip.show()},null,{single:true});Ozone.components.focusable.Focusable.setupFocus(d.el,this);var b=new Ext.util.KeyMap(d.el,{key:[Ext.EventObject.ENTER],fn:function(g,e){e.stopEvent();c.dashboardDesigner.toggleDashboardLock(c.dashboardDesigner)},scope:d});d.el.on("click",c.dashboardDesigner.toggleDashboardLock,c.dashboardDesigner);this.on("beforedestroy",function(){d.el.un("click",c.dashboardDesigner.toggleDashboardLock,c.dashboardDesigner);d.tip&&d.tip.destroy();b.destroy()})},scope:this}}},{xtype:"button",text:"Save",handler:a.dashboardDesigner.save,scope:a.dashboardDesigner},{itemId:"cancelBtn",xtype:"button",text:"Cancel",handler:a.dashboardDesigner.cancel,scope:a.dashboardDesigner}];a.addEvents("baselayoutselected");a.enableBubble(["baselayoutselected"]);a.callParent(arguments)},getBubbleTarget:function(){return this.up("dashboarddesigner")},baseLayoutSelected:function(b,a,c){this.fireEvent("baselayoutselected",b,a,c)},paneLayoutTypeSelected:function(b,a,c){this.fireEvent("panelayouttypeselected",b,a,c)},setupFocus:function(a){var b=this.el.query(".layout-type");Ext.defer(function(){a.select(0);b[0].focus()},100)}});Ext.define("Ozone.components.dashboarddesigner.WorkingArea",{extend:"Ext.container.Container",alias:["widget.dashboarddesignerworkingarea","widget.Ozone.components.dashboarddesigner.WorkingArea"],mixins:{circularFocus:"Ozone.components.focusable.CircularFocus"},componentCls:"droppable",initComponent:function(){this.on({paneselect:{fn:this.paneSelected,scope:this}});this.callParent(arguments)},paneSelected:function(b){var a;a=b.getNextPane();if(!a){return}if(this._lastClickedPane&&!this._lastClickedPane.isDestroyed){this._lastClickedPane.el.removeCls("active-pane")}if(this._lastClickedPaneSibling&&!this._lastClickedPaneSibling.isDestroyed){this._lastClickedPaneSibling.el.removeCls("sibling-active-pane")}this._lastClickedPane=b;this._lastClickedPaneSibling=a;b.el.addCls("active-pane");a.el.addCls("sibling-active-pane")}});Ext.define("Ozone.components.dashboarddesigner.DashboardDesigner",{extend:"Ext.container.Container",alias:["widget.dashboarddesigner","widget.Ozone.components.dashboarddesigner.DashboardDesigner"],id:"dashboard-designer",mixins:{circularFocus:"Ozone.components.focusable.CircularFocus"},autoRender:true,dashboardContainer:null,dashboard:null,ownerCt:null,dashboardExists:false,dashboardStore:null,height:"100%",floating:true,allWidgets:null,buildItemsArray:function(b){if(!b||!b.items){return}if(b.items.length===0){b.paneType=b.xtype;b.xtype="dashboarddesignerpane";if(b.widgets&&b.widgets.length>0){this.allWidgets=this.allWidgets.concat(b.widgets)}}else{if(b.xtype==="dashboarddesignerpane"){b.xtype="container";b.layout="fit";b.cls=""}for(var c=0,a=b.items.length;c<a;c++){this.buildItemsArray(b.items[c])}}return b},initComponent:function(){var a=this,b=a.dashboardExists?a.dashboard.configRecord.get("layoutConfig"):a.dashboard.get("layoutConfig");a.locked=a.dashboardExists?a.dashboard.configRecord.get("locked"):a.dashboard.get("locked");a.allWidgets=[];a.layout={type:"hbox",align:"stretch"};a.items=[{itemId:"dashboard-designer-working-area",id:"dashboard-designer-working-area",xtype:"dashboarddesignerworkingarea",flex:3,layout:"fit",items:a.buildItemsArray(b?Ext.clone(b):[]),listeners:{afterrender:{fn:a.setupDropZone,options:{single:true}},destroy:{fn:a.cleanUp}}},{xtype:"dashboarddesignersidepanel",dashboardDesigner:a}];a.callParent(arguments);a.down("dashboarddesignerbaselayout").on("viewready",a.setup,a,{single:true});a.on("baselayoutselected",a.enableKeyboardDesign,a);a.on("panelayouttypeselected",a.enableKeyboardDesign,a);Ext.EventManager.onWindowResize(a.resize,a)},setup:function(){var b=this.query("dashboarddesignerpane"),a;this.dashboardContainer.dashboardDesignerManager.register(this);this.dashboardContainer.dashboardDesignerManager.bringToFront(this);if(b.length>0){a=b[0].el}else{var d=this.down("dashboarddesignerbaselayout").el.query(".layout-type")[0];a=Ext.get(d)}var c=this.down("#cancelBtn").getFocusEl();this.setupFocus(a,c)},resize:function(){this.doComponentLayout()},enableKeyboardDesign:function(n,g,p){var m=this,b=this.down("dashboarddesignerworkingarea"),k=this.query("dashboarddesignerpane"),a;if(k.length===0||k.length===1){var j=k.length===0?b:k[0];g.get("type")?m.nest(j,g):m.updatePaneType(j,g);return}a=k[0].el;a.focus();for(var e=0,h=k.length;e<h;e++){var d=k[e];d.disableEditing()}b.setupFocus(a,k[h-1].el);function c(r,w){if(r.getKey()===Ext.EventObject.ENTER){if(g.get("type")){m.nest(w,g)}else{m.updatePaneType(w,g)}}if(r.getKey()===Ext.EventObject.ENTER||r.getKey()===Ext.EventObject.ESC){b.el.un("keyup",c);b.tearDownCircularFocus();var t=m.query("dashboarddesignerpane");for(var u=0,q=t.length;u<q;u++){var v=t[u];v.enableEditing()}p.focus()}}b.el.on("keyup",c)},nest:function(h,e){var j=e.get("type"),k=Ext.getCmp(h.id),c,a,c=e.get("classes"),b;if(!k){return}b=k.ownerCt;a={xtype:"container",cls:j+" "+(k.initialConfig.cls||""),layout:{type:j,align:"stretch"},items:[{xtype:"dashboarddesignerpane",cls:c[0],flex:1,htmlText:"50%",items:[],widgets:k.isXType("dashboarddesignerworkingarea")?this.allWidgets:k.initialConfig.widgets||[],paneType:k.initialConfig.paneType||""},{xtype:"dashboardsplitter"},{xtype:"dashboarddesignerpane",cls:c[1],flex:1,htmlText:"50%",items:[],paneType:k.initialConfig.paneType||""}]};if(k.initialConfig.flex){a.flex=k.initialConfig.flex}else{if(k.initialConfig.width){a.width=k.initialConfig.width}else{if(k.initialConfig.height){a.height=k.initialConfig.height}}}if(k.isXType("dashboarddesignerpane")){for(var d=0,g=b.initialConfig.items.length;d<g;d++){if(b.initialConfig.items[d]===k.initialConfig){b.initialConfig.items[d]=a;break}}b.remove(k);b.insert(d,a)}else{delete k.initialConfig.widgets;if(k.initialConfig.paneType){k.el.removeCls(k.initialConfig.paneType)}k.add(a)}this.tearDownCircularFocus();this.setup()},updatePaneType:function(j,b){var h=b.get("paneType"),g=Ext.getCmp(j.id),c=g.initialConfig.paneType;if(h==="fitpane"){var e=[];if(g.isXType("dashboarddesignerworkingarea")){e=this.allWidgets}else{e=g.initialConfig.widgets}var a=[];for(var d=0;e&&d<e.length;d++){if(!e[d].floatingWidget&&!e[d].background){a.push(e[d])}}if(a.length>1&&(g.isXType("dashboarddesignerworkingarea")||(c!==null&&c!=="fitpane"))){this.confirmRemoveWidgets(g,a)}else{g.el.replaceCls(g.initialConfig.paneType,h);g.initialConfig.paneType=h}}else{g.el.replaceCls(g.initialConfig.paneType,h);g.initialConfig.paneType=h}},confirmRemoveWidgets:function(c,a){var b=this,d=this.dashboard.activeWidget?this.dashboard.activeWidget:a[0];d=d.floatingWidget?a[0]:d;var e=Ext.fly("dashboard-designer-side-panel").query(".x-item-selected")[0];if(!e){e=Ext.fly("dashboard-designer-side-panel").query(".layout-type")[0]}Ext.widget("alertwindow",{title:"Warning",html:"<p>You are about to set a single-widget Fit layout to a pane containing "+a.length+" widgets. On save, all widgets in the pane except for <i>"+Ext.htmlEncode(d.name)+"</i> will be removed from the dashboard.</p><br/><p>Set to Fit layout and <b>permanently</b> remove the other widgets?</p>",width:400,dashboardContainer:b.dashboardContainer,focusOnClose:e,okFn:function(){c.el.replaceCls(c.initialConfig.paneType,"fitpane");c.initialConfig.paneType="fitpane";var h=[];if(c.isXType("dashboarddesignerworkingarea")){h=b.allWidgets}else{h=c.initialConfig.items[0]?c.initialConfig.items[0].widgets:c.initialConfig.widgets}for(var g=0;g<h.length;g++){var j=h[g];if(j.floatingWidget!==true&&j.background!==true&&j.uniqueId!==d.uniqueId){h[g]=null}}h=Ext.Array.clean(h);c.initialConfig.items[0]?c.initialConfig.items[0].widgets=h:c.initialConfig.widgets=h;if(c.isXType("dashboarddesignerworkingarea")){b.allWidgets=h}}}).show()},setupDropZone:function(){this.dropZone=new Ext.dd.DropZone(this.el,{ddGroup:"dashboard-designer",getTargetFromEvent:function(a){return a.getTarget(".droppable",1)},onNodeEnter:function(d,a,c,b){Ext.fly(d).addCls("highlight-dashboard-designer-drop")},onNodeOut:function(d,a,c,b){Ext.fly(d).removeCls("highlight-dashboard-designer-drop")},onNodeOver:function(d,a,c,b){return Ext.dd.DropZone.prototype.dropAllowed},onNodeDrop:Ext.bind(this.ownerCt.onDrop,this.ownerCt)})},onDrop:function(h,a,g,d){var b=d.draggedRecord.get("type"),c=d.draggedRecord.get("paneType");if(b){this.nest(h,d.draggedRecord)}else{if(c){this.updatePaneType(h,d.draggedRecord)}}return true},reset:function(){var b=this.getComponent("dashboard-designer-working-area"),a=b.initialConfig.paneType;b.removeAll(true);b.initialConfig.items=[];if(a){b.el.removeCls(a)}this.tearDownCircularFocus();this.setup()},save:function(){var d=this,a=d.getComponent("dashboard-designer-working-area"),c=a.items.get(0),b;if(c){b=c.initialConfig}else{b={xtype:"container",flex:1,height:"100%",items:[],paneType:a.initialConfig.paneType||"",widgets:d.allWidgets}}delete b.itemId;if(d.dashboardExists){if(!Ext.isIE){d.dashboard.removeAll(true)}d.dashboard.configRecord.set("layoutConfig",b);d.dashboard.configRecord.set("locked",d.locked);d.dashboard.saveToServer(null,null,null,function(){d.dashboardContainer.dashboardStore.load({callback:function(e,g,h){if(h==true){d.dashboardContainer.updateDashboardsFromStore(e,g,h,d.dashboard.getGuid())}},scope:d})})}else{d.dashboard.set("layoutConfig",b);d.dashboard.set("locked",d.locked);d.dashboard.set("stack",null);d.dashboardContainer.saveDashboard(d.dashboard.data,"create",function(){var e=d.dashboard.get("guid");d.dashboardContainer.activateDashboard(e)})}d.cancel()},cancel:function(){Ext.EventManager.removeResizeListener(this.resize,this);this.destroy()},toggleDashboardLock:function(){var d=this,e=this.getComponent("dashboard-designer-side-panel"),c=e.getComponent("dashboard-lock");if(!this.locked){if(!this.dashboardContainer.suppressLockWarning){var b=Ext.widget("alertwindow",{title:Ozone.layout.DialogMessages.dashboardLockTitle,width:500,dashboardContainer:d.dashboardContainer,html:Ozone.layout.DialogMessages.dashboardLockWarning,focusOnClose:c,okText:Ozone.layout.MessageBoxButtonText.yes,okFn:function(){d.locked=true;var g=c.el.down("img");g.set({src:"themes/common/images/dashboard-designer/LockON.png"})},cancelText:Ozone.layout.MessageBoxButtonText.no,cancelFn:function(){}});b.show().setZIndex(this.el.getStyle("z-index")+10)}else{this.locked=true;var a=c.el.down("img");a.set({src:"themes/common/images/dashboard-designer/LockON.png"})}}else{this.locked=false;var a=c.el.down("img");a.set({src:"themes/common/images/dashboard-designer/LockOFF.png"})}},cleanUp:function(){this.dropZone.destroy()}});Ext.define("Ozone.components.theming.ThemeBrowser",{extend:"Ext.view.View",alias:"widget.themebrowser",uses:"Ext.data.Store",cls:"owf-view",singleSelect:true,trackOver:true,overItemCls:"x-view-over",itemSelector:"div.thumb-wrap",tpl:['<tpl for=".">','<div class="thumb-wrap">','<div class="thumb">','<img src="{thumb}" />',"</div>","<span>{display_name}</span>","</div>","</tpl>"],initComponent:function(){this.store=Ext.create("Ext.data.Store",{fields:["name","display_name","author","contact_email","created_date","modified_date","description","css","base_url","thumb","screenshots"],proxy:{type:"ajax",url:Ozone.util.contextPath()+"/themes/"},autoLoad:true,sorters:[{property:"name"}],sortOnLoad:true});this.callParent(arguments);this.on("afterrender",function(a){Ozone.components.focusable.Focusable.setupFocus(a.getEl())})}});Ext.define("Ozone.components.theming.ThemeInfoPanel",{extend:"Ext.panel.Panel",alias:"widget.themeinfopanel",autoScroll:true,width:532,minWidth:300,tpl:['<div id="header">','<div id="theme-info">','<span id="theme-name">{display_name}</span>','<span id="author">{author}</span>','<span id="contact">{contact_email}</span>','<span id="created">Created {created_date}</span>','<span id="modified">Modified {modified_date}</span>','<p id="description">{description}</p>',"</div>","</div>",'<div class="clear"></div>','<fieldset id="screenshots">',"<legend>Preview</legend>",'<tpl if="screenshots.length &gt; 0">','<tpl for="screenshots" />','<div class="screenshot">','<div class="screenshot-inner">','<img src="{url}" />',"</div>",'<div class="screenshot-desc">',"<span>{description}</span>","</div>","</div>","</tpl>","</tpl>",'<tpl if="screenshots.length === 0">',"<p>No preview images found!</p>","</tpl>","</fieldset>"],loadThemeInfo:function(a){this.tpl.overwrite(this.body,a.data)}});Ext.define("Ozone.components.theming.ThemeSwitcherWindow",{extend:"Ozone.components.window.ModalWindow",alias:"widget.themeswitcherwindow",id:"themeSwitcher",iconCls:"themeSwitcher-header-icon",modalAutoClose:true,selectedTheme:null,initComponent:function(){this.items=[{xtype:"themebrowser",id:"theme-browser-view",itemId:"theme-browser-view",region:"center",autoScroll:true,listeners:{scope:this,selectionchange:function(){this.scrollToSelectedTheme.apply(this,arguments);this.onThemeSelect.apply(this,arguments)},itemkeydown:function(d,c,e,a,b){if(b.getKey()===b.ENTER||b.getKey()===b.SPACE){this.applyTheme()}}}},{xtype:"themeinfopanel",id:"theme-info-panel",region:"east",split:true,preventHeader:true}];this.okBtn=Ext.widget("button",{itemId:"okBtn",text:Ozone.layout.ThemeSwitcherWindowConstants.ok,disabled:true,scope:this,handler:function(){this.close();this.applyTheme()}});this.cancelBtn=Ext.widget("button",{xtype:"button",itemId:"cancelBtn",text:Ozone.layout.ThemeSwitcherWindowConstants.cancel,scope:this,handler:function(){this.close()}});this.dockedItems=[{xtype:"toolbar",dock:"bottom",defaults:{minWidth:60},layout:{type:"hbox",pack:"end"},items:[this.okBtn,this.cancelBtn]}];this.on("afterrender",function(c){var a=c.getComponent("theme-browser-view"),b=a.getStore();c.setupFocus(a.getEl(),c.cancelBtn.getEl());b.on("load",function(d){record=d.find("name",Ozone.config.currentTheme.themeName);this.select(record)},a);a.getSelectionModel().deselectOnContainerClick=false});this.on("resize",function(){this.syncShadow()});this.callParent(arguments)},onThemeSelect:function(a,c){var b=c[0],d=this.down("themeinfopanel");if(b){this.selectedTheme=b;this.okBtn.enable();d.loadThemeInfo(b)}},applyTheme:function(){if(this.selectedTheme&&this.selectedTheme.data&&this.selectedTheme.data.css){Ozone.pref.PrefServer.setUserPreference({namespace:"owf",name:"selected_theme",value:this.selectedTheme.data.name,onSuccess:Ext.bind(function(){window.location.reload()},this)})}},scrollToSelectedTheme:function(){var a=this.down("themebrowser"),b=a.getSelectedNodes()[0];if(b){offsets=Ext.get(b).getOffsetsTo(a.getEl());a.getEl().scroll("b",offsets[1],true)}}});Ext.define("Ozone.components.dashboard.DashboardContainer",{extend:"Ext.panel.Panel",alias:["widget.dashboardContainer","widget.Ozone.components.dashboard.DashboardContainer"],plugins:new Ozone.plugins.DashboardContainer(),activeDashboard:null,dashboardMenuItems:null,dashboardStore:null,widgetStore:null,dashboards:null,autoSaveEnabled:true,layout:"fit",refreshUrl:window.location,user:null,widgetNames:{},originalWidgetNames:{},pollingInterval:Ozone.config.autoSaveInterval?Ozone.config.autoSaveInterval:900000,suppressLockWarning:false,floatingWidgetManager:null,bannerManager:null,dashboardDesignerManager:null,modalWindowManager:null,tooltipManager:null,initComponent:function(){var h=this,e={},c,b,d;this.stackStore=Ext.create("Ozone.data.StackStore",{});for(var g=0,a=this.dashboardStore.getCount();g<a;g++){d=this.dashboardStore.getAt(g);c=d.data;b=c.stack;if(b){if(e[b.id]){e[b.id].get("dashboards").push(d)}else{var j=this.stackStore.add(b)[0];j.set("dashboards",[d]);e[b.id]=j}}}this.originalDashboardStore=Ext.create("Ozone.data.DashboardStore",{});this.dashboardMenuItems=[];this.dashboards=[];this.initEventing();OWF.Container=OWF.Container||{};OWF.Container.Eventing=Ozone.eventing.Container;OWF.Container.Launcher=new Ozone.launcher.WidgetLauncherContainer(OWF.Container.Eventing);this.addWidgetContainer=new Ozone.marketplace.AddWidgetContainer(OWF.Container.Eventing);OWF.Container.DragAndDrop=new Ozone.dragAndDrop.WidgetDragAndDropContainer({eventingContainer:OWF.Container.Eventing});OWF.Container.DragAndDrop.addCallback("dragStart",Ext.bind(function(k){Ext.getCmp(this.activeDashboard.id).fireEvent("widgetStartDrag",k)},this));OWF.Container.DragAndDrop.addCallback("dragStop",Ext.bind(function(k){Ext.getCmp(this.activeDashboard.id).fireEvent("widgetStopDrag",k)},this));OWF.Container.Chrome=new Ozone.chrome.WidgetChromeContainer({eventingContainer:OWF.Container.Eventing});OWF.Container.State=new Ozone.state.WidgetStateContainer(OWF.Container.Eventing);this.user=Ozone.config.user;this.widgetNames=Ozone.config.widgetNames||{};this.widgetStore.on("datachanged",this.updateTitlesandBanner,this);Ext.apply(this,{layout:{type:"vbox",align:"stretch"},items:[{itemId:"owfbanner",xtype:"owfbanner",user:this.user,dashboardContainer:this},{id:"dashboardCardPanel",itemId:"dashboardCardPanel",xtype:"panel",flex:1,layout:{type:"bufferedcard"},cls:"usableCentralRegion",listeners:{afterlayout:{fn:function(k){k.isLayedOut=true},scope:this,single:true}},items:[]}]});this.callParent(arguments);this.on("afterlayout",this.startAutoSave,this,{single:true});this.on("resize",function(p,r,k,n,u,q){var m=this.getBanner();if(m&&m.popOutToolbar&&m.popOutToolbar.isVisible()){var t=m.getBanner().getPosition(true);if(t[0]>r||t[1]>k){m.dockPopOutBanner()}}});this.onBeforeUnload=function(k){Ozone.pref.PrefServer.deleteUserPreference({namespace:"owf.custom.widgetprefs",sync:true,name:"widgetNames"});if(this.activeDashboard!=null){Ext.getCmp(this.activeDashboard.id).saveToServer(true)}if(!this.shareButtonClicked){Ext.History.shutDown()}else{this.shareButtonClicked=false}};Ext.EventManager.on(window,"beforeunload",this.onBeforeUnload,this);this.addKeyBindings();this.addEvents({dashboardChanged:true});Ext.getDoc().on("mousedown",this.onWidgetMouseDown,this,{delegate:".widgetheader"});this.updateTitlesandBanner();this.initLoad()},onWidgetMouseDown:function(k,h){var e,c,n,b;if(k.getTarget().nodeName==="IMG"){return}n=Ext.get(h);e=n.up(".x-closable");c=e?e.dom.id:h.id;b=Ext.getCmp(c);b=b.card||b;if(!b.isWidget||b.floatingWidget){return}Ext.getDoc().on("mousemove",this.onMouseMove,this);Ext.getDoc().on("mouseup",this.onMouseUp,this);this._widgetToMove=b;this._sourcePane=this._widgetToMove.pane;this._paneWidgets=[];this._paneWidgetsBox=[];var b,m;var a=this._sourcePane.getWidgets(),d=Ext.getBody();for(var j=0,g=a.length;j<g;j++){b=a[j];b._position=j;this._paneWidgets.push(b);m=b.tab?b.tab.getBox():b.getBox();m.midpoint=b.tab?m.x+(m.width/2):m.y+(m.height/2);this._paneWidgetsBox.push(m)}},onMouseMove:function(m,e){var q=m.getXY(),d=Ext.get(e).up(".pane"),a=this._widgetToMove.isFloating();this._reorderingWidgets=false;if(this._counter){this.ddProxy.el.setStyle({left:(q[0]+25)+"px",top:(q[1]+25)+"px"});if(this.activeDashboard.configRecord.get("locked")){this.ddProxy.setStatus(this.ddProxy.dropNotAllowed)}else{this.ddProxy.setStatus(d?this.ddProxy.dropAllowed:this.ddProxy.dropNotAllowed)}if(d&&this._sourcePane.el===d){if(a){this.ddProxy.hide()}else{this.ddProxy.show();this._reorderingWidgets=true;var n,p;var b=false,k=q[0],j=q[1];for(var g=0,c=this._paneWidgets.length;g<c;g++){p=this._paneWidgets[g];n=this._paneWidgetsBox[g];if(p.tab){if(n.x<k&&((n.x+n.width)>k)){b=true;break}}else{if(n.y<j&&((n.y+n.height)>j)){b=true;break}}}g=(b&&p?g:this._paneWidgets.length);if(this._lastDropIndicatedWidget){this._lastDropIndicatedWidget.el.removeCls.call(this._lastDropIndicatedWidget.tab?this._lastDropIndicatedWidget.tab.el:this._lastDropIndicatedWidget.el,["indicate-drop-before","indicate-drop-after"])}if(g===this._widgetToMove._position){this.ddProxy.setStatus(this.ddProxy.dropNotAllowed)}else{if(b){this._lastDropIndicatedWidget=this._paneWidgets[g];var h;if((p.tab&&n.midpoint>k)||(!p.tab&&n.midpoint>j)){h="indicate-drop-before"}else{g=g+1;h="indicate-drop-after"}this._lastDropIndicatedWidget.el.addCls.call(this._lastDropIndicatedWidget.tab?this._lastDropIndicatedWidget.tab.el:this._lastDropIndicatedWidget.el,h);this._movePosition=g}}}}else{this.ddProxy.show()}}else{this._counter=1;this.ddProxy=this.ddProxy||Ext.create("Ext.dd.StatusProxy",{shadow:false});this.ddProxy.update('<img src="'+this._widgetToMove.model.get("image")+'" class="widget-drag-proxy"/>');this.ddProxy.show();this.ddProxy.hide();this.activeDashboard.enableWidgetMove(d)}},onMouseUp:function(a,b){var c;if(this._lastDropIndicatedWidget){this._lastDropIndicatedWidget.el.removeCls.call(this._lastDropIndicatedWidget.tab?this._lastDropIndicatedWidget.tab.el:this._lastDropIndicatedWidget.el,["indicate-drop-before","indicate-drop-after"])}Ext.getDoc().un("mousemove",this.onMouseMove,this);Ext.getDoc().un("mouseup",this.onMouseUp,this);if(this._movePosition&&this._widgetToMove._position<this._movePosition){this._movePosition-=1}if(this._reorderingWidgets&&this._movePosition!==undefined&&this._movePosition!==this._widgetToMove._position){this._sourcePane.reorderWidget(this._widgetToMove,this._movePosition)}else{if(this._widgetToMove&&(c=Ext.fly(b).up(".pane"))){this.activeDashboard.moveWidgetToPane(a,Ext.getCmp(this._widgetToMove.paneGuid),Ext.getCmp(c.dom.id),this._widgetToMove)}}this.activeDashboard.disableWidgetMove();this.ddProxy&&this.ddProxy.hide();delete this._counter;delete this._movePosition;delete this._widgetToMove;delete this._lastDropIndicatedWidget;delete this._sourcePane;delete this._paneWidgets;delete this._paneWidgetsBox},launchWidgets:function(a,c){var b=this;b.selectPane(c).then(function(g,d){b.activeDashboard.launchWidgets(g,null,d,{widgetModel:a})},function(){var d=Ext.getCmp("widget-launcher");if(d){d.fireEvent("noWidgetLaunched")}})},selectPane:function(b){var d=this,a=jQuery.Deferred(),c=this.activeDashboard.panes,e=Ext.getDoc();if(c.length===1){a.resolve(c[0])}else{this.activeDashboard.enableWidgetMove();if(b===true){if(document.activeElement){document.activeElement.blur()}c[0].focus()}e.on("keydown",this._selectPaneOnKeyDown,this,{capture:true,deferred:a});this.el.on("click",this._selectPaneOnClick,this,{deferred:a});a.always(function(){d.activeDashboard.disableWidgetMove();e.un("keydown",d._selectPaneOnKeyDown,d,{capture:true});d.el.un("click",d._selectPaneOnClick,d)})}return a.promise()},_selectPaneOnKeyDown:function(g,j,b){var c=this.activeDashboard.panes,a=g.getKey(),d=c.length-1,h;g.stopEvent();this._previousPaneIndex=this._previousPaneIndex||0;if(a===Ext.EventObject.TAB){if(g.shiftKey){if(this._previousPaneIndex===0){h=d}else{h=this._previousPaneIndex-1}}else{if(this._previousPaneIndex===d){h=0}else{h=this._previousPaneIndex+1}}c[this._previousPaneIndex].blur();c[h].focus();this._previousPaneIndex=h}else{if(a===Ext.EventObject.ENTER){b.deferred.resolve(c[this._previousPaneIndex],g);delete this._previousPaneIndex}else{if(a===Ext.EventObject.ESC){b.deferred.reject()}}}},_selectPaneOnClick:function(c,g,b){var d=Ext.get(g).up(".pane"),a=b.deferred;if(d){a.resolve(Ext.getCmp(d.id),c)}else{a.reject()}},initLoad:function(){var c=this.widgetStore.getRange();for(var h=0;h<c.length;h++){this.originalWidgetNames[c[h].data.widgetGuid]=c[h].data.name}var b=Ext.util.History.getToken();var g=b?Ext.urlDecode(b):{};var p=g.guid;var a=[];var n=g.stack;if(this.dashboardStore.getCount()>0){for(var h=0,m=this.dashboardStore.getCount();h<m;h++){var e=this.dashboardStore.getAt(h);var k=e.data;this.dashboards.push(this.createDashboardConfig(e));this.originalDashboardStore.add(Ext.JSON.decode(Ext.JSON.encode(e.data)));if(n&&e.data.stack&&e.data.stack.stackContext==n){a.push(this.createDashboardConfig(e))}if(p!=null){if(k.guid==p){this.activeDashboard=this.dashboards[this.dashboards.length-1]}}if(k.isdefault){this.defaultDashboard=this.dashboards[this.dashboards.length-1]}}}if(this.activeDashboard==null){if(a.length>0){this.activeDashboard=a[0];if(this.defaultDashboard){for(var h=0;h<a.length;h++){if(this.defaultDashboard.guid==a[h].guid){this.activeDashboard=a[h];break}}}this.defaultDashboard=this.activeDashboard}else{if(this.defaultDashboard!=null){this.activeDashboard=this.defaultDashboard}else{if(this.dashboards.length>0){this.activeDashboard=this.dashboards[0];this.defaultDashboard=this.activeDashboard}else{this.activeDashboard=this.createDashboardConfig(this.createEmptyDashboard("desktop",true));this.defaultDashboard=this.activeDashboard;this.dashboards.push(this.activeDashboard)}}}}Ext.state.Manager.setProvider(Ext.create("Ozone.state.WidgetStateStoreProvider",{store:this.activeDashboard?this.activeDashboard.stateStore:null}));Ext.util.History.on("change",function(q){if(q!=null){var r=Ext.urlDecode(q);if(r.guid!=null&&r.guid!="notFound"){this._activateDashboard(r.guid,r.stack)}else{if(r.guid=="notFound"){this._activateDashboard(null,r.stack)}else{this._activateDashboard("",r.stack)}}}else{this._activateDashboard(this.defaultDashboard.guid,r.stack)}},this);var j=this.getComponent("dashboardCardPanel");var d=Ext.bind(function(){j.activeItem=this.activeDashboard.id;j.add(this.dashboards);this.activeDashboard=j.getComponent(this.activeDashboard.id);this.activateDashboard(this.activeDashboard.id,true,this.activeDashboard.stackContext);if(this.activeDashboard.configRecord.get("locked")){this.getBanner().disableLaunchMenu()}else{this.getBanner().enableLaunchMenu()}},this);if(j.isLayedOut){d()}else{j.on({afterlayout:{fn:function(){d()},scope:this,single:true}})}},addKeyBindings:function(){Ext.FocusManager.disable();Ozone.KeyMap.addBinding([Ext.apply(Ozone.components.keys.HotKeys.WIDGET_SWITCHER,{scope:this,fn:this.showWidgetSwitcher}),Ext.apply(Ozone.components.keys.HotKeys.CLOSE_WIDGET,{scope:this,fn:this.closeWidget}),Ext.apply(Ozone.components.keys.HotKeys.MAXIMIZE_COLLAPSE_WIDGET,{scope:this,fn:this.maximizeCollapseWidget}),Ext.apply(Ozone.components.keys.HotKeys.MINIMIZE_EXPAND_WIDGET,{scope:this,fn:this.minimizeExpandWidget}),Ext.apply(Ozone.components.keys.HotKeys.ESCAPE_FOCUS,{scope:this,fn:this.esc}),Ext.apply(Ozone.components.keys.MoveHotKeys.MOVE_UP,{scope:this,alt:false,fn:this.saveWidgetState}),Ext.apply(Ozone.components.keys.MoveHotKeys.MOVE_RIGHT,{scope:this,alt:false,fn:this.saveWidgetState}),Ext.apply(Ozone.components.keys.MoveHotKeys.MOVE_DOWN,{scope:this,alt:false,fn:this.saveWidgetState}),Ext.apply(Ozone.components.keys.MoveHotKeys.MOVE_LEFT,{scope:this,alt:false,fn:this.saveWidgetState})]);Ozone.MoveKeyMap.addBinding([Ext.apply(Ozone.components.keys.MoveHotKeys.MOVE_UP,{scope:this,fn:function(a,c,b){this.activeDashboard.moveWidgetUp(b)}}),Ext.apply(Ozone.components.keys.MoveHotKeys.MOVE_RIGHT,{scope:this,fn:function(a,c,b){this.activeDashboard.moveWidgetRight(b)}}),Ext.apply(Ozone.components.keys.MoveHotKeys.MOVE_DOWN,{scope:this,fn:function(a,c,b){this.activeDashboard.moveWidgetDown(b)}}),Ext.apply(Ozone.components.keys.MoveHotKeys.MOVE_LEFT,{scope:this,fn:function(a,c,b){this.activeDashboard.moveWidgetLeft(b)}})])},showWidgetSwitcher:function(){var a="widget-switcher",b=Ext.getCmp(a);if(!b){b=Ext.widget("widgetswitcher",{id:a,dashboardContainer:this,activeDashboard:this.activeDashboard,widgetStore:this.widgetStore,plugins:new Ozone.components.keys.HotKeyComponent(Ozone.components.keys.HotKeys.WIDGET_SWITCHER)})}else{if(b.isVisible()){b.close();return}}b.show();b.activeDashboard=this.activeDashboard;b.setStore(this.activeDashboard.stateStore);b.center()},showDashboardSwitcher:function(){this.activeDashboard.saveToServer(false,true);var a="dashboard-switcher",b=Ext.getCmp(a);if(!b){b=Ext.widget("dashboardswitcher",{id:a,dashboardContainer:this,activeDashboard:this.activeDashboard,dashboardStore:this.dashboardStore,plugins:new Ozone.components.keys.HotKeyComponent(Ozone.components.keys.HotKeys.DASHBOARD_SWITCHER)})}else{if(b.isVisible()){b.close();return}}b.activeDashboard=this.activeDashboard;b.show().center()},destroyDashboardSwitcher:function(){var a="dashboard-switcher",b=Ext.getCmp(a);b&&b.destroy()},createDashboardConfig:function(a){var c=a.data;var b=Ext.create("Ozone.data.StateStore",{storeId:c.guid,data:[]});return{id:c.guid,itemId:c.guid,guid:c.guid,xtype:"dashboard",config:c,configRecord:a,widgetStore:this.widgetStore,stateStore:b,eventingContainer:OWF.Container.Eventing,widgetLauncher:OWF.Container.Launcher,addWidgetContainer:this.addWidgetContainer,widgetStateContainer:OWF.Container.State,widgetDragAndDrop:OWF.Container.DragAndDrop,dashboardContainer:this,viewportId:this.viewportId,name:c.name,userId:this.user.id,userName:this.user.displayName,stackContext:c.stack?c.stack.stackContext:null}},activateDashboard:function(b,a,c){var d=new Object();if(c){d.stack=c}d.guid=b;if(a){Ext.util.History.shutDown()}Ext.util.History.add(Ext.urlEncode(d));if(a){Ext.util.History.startUp()}},_activateDashboard:function(k,j){var d=this.getDashboardCardPanel();if(!d){return}if(k!=null&&k!=""){var m=d.layout.setActiveItem(k);if(m){this.activeDashboard=m;this.fireEvent(OWF.Events.Dashboard.CHANGED,k);this.setDefaultDashboard(k)}}else{var a=new Object();if(j){a.stack=j;var n=[];if(this.dashboardStore.getCount()>0){for(var c=0,h=this.dashboardStore.getCount();c<h;c++){var b=this.dashboardStore.getAt(c);if(j&&b.data.stack&&b.data.stack.stackContext==j){n.push(b.data.guid)}}}if(n.length>0){a.guid=n[0];if(this.defaultDashboard){for(var c=0;c<n.length;c++){if(this.defaultDashboard.guid==n[c]){a.guid=n[c];break}}}}}if(!a.guid){if(k==""){var g=this.defaultDashboard.guid;a.guid=g}else{var e=this.activeDashboard.guid;a.guid=e;Ext.defer(Ozone.Msg.alert,100,this,[Ozone.util.ErrorMessageString.invalidDashboard,this.activeDashboard.isdefault?Ozone.util.ErrorMessageString.invalidDashboardMsg:Ozone.util.ErrorMessageString.invalidDashboardGotoDefaultMsg,null,null,null,this.modalWindowManager])}}if(a.guid){Ext.util.History.add(Ext.urlEncode(a))}}},getBanner:function(){return this.getComponent("owfbanner")},getDashboardCardPanel:function(){return this.getComponent("dashboardCardPanel")},esc:function(c,a,b){if(a.fromWidget){this.unfocusWidget(c,a,b)}else{this.getBanner().getBanner().focus()}},unfocusWidget:function(b,c,a){var d=Ext.getCmp(a),e;if(d){e=d.tab?d.tab.header:d.header;if(e){e.titleCmp.focus()}else{this.getBanner().getBanner().focus()}}},openDashboardMgr:function(){var a="user-manage-dashboards";var b=Ext.getCmp(a);if(b){b.show();return}Ext.create("Ozone.components.window.DashboardsManager",{ownerCt:this,dashboardContainer:this,id:a,itemId:a,modal:true,border:false,bodyBorder:false}).show()},showCreateWindow:function(){var d=this.getHeight();var a=this.getWidth();var c=(d>339)?330:d-10;var b=(a>559)?550:a-10;var e="createNewDashboardWindowId";var h=Ext.getCmp(e);if(!h){var g={id:e,title:Ozone.layout.tooltipString.createDashboardTitle,ownerCt:this,constrain:Ext.isIE,constrainHeader:true,cls:"manageContainer",closeAction:"destroy",draggable:true,items:[{xtype:"owfCreateDashboardsContainer",dashboardContainer:this,winId:e}],width:b+20,height:c,listeners:{show:function(n){var j=this.getComponent("createNewDashboardPanel");var k=j.getComponent("titleBox");k.setRawValue("");var m=j.down("#importFileupload");m.setRawValue("");j.refreshData();if(j.afterRenderInitComplete==false){j.down("#viewCb").enable();j.down("#viewCb").validate();var p=j.down("#existViewCb");p.reset();p.disable();m.reset();m.disable();j.afterRenderInitComplete=true}j.focusTitleBox();k.clearInvalid();this.setupFocus(k.el,this.down("#cancelBtn").el)}}};h=Ext.widget("managerwindow",g)}if(h.isVisible()){h.close()}else{h.show()}},navigate:function(d){var c=this.getComponent("dashboardCardPanel");var b=c.getLayout();var a=c.items.indexOf(b.activeItem);a=a+d;b.activeItem.windowGroup.hideAll();if(a>0&&a<c.items.getCount()){b.setActiveItem(c.items.get(a))}},initEventing:function(){Ozone.eventing.Container.init({getIframeId:{fn:function(c){var a=Ext.getCmp(c);if(a!=null){var b=a.down("#widgetIframe");if(b!=null){return b.el.dom.id}}},scope:this},getOpenedWidgets:{fn:this.getOpenedWidgets,scope:this},widgetEventingReady:{fn:function(c,d){var h=gadgets.json.parse(d);if(h.loadTime!=null){var e=gadgets.json.parse(h.id);var b={id:e.id,msg:"Loaded in "+h.loadTime+" (ms)",loadTime:h.loadTime};var g=this.activeDashboard.stateStore;if(g!=null){var a=g.getById(e.id);if(a!=null){b.name=a.get("name");b.widgetGuid=a.get("widgetGuid");this.sendLoadTime(b)}else{g.on({add:{fn:function(m,k,n){var j=m.getById(e.id);if(j!=null){b.name=j.get("name");b.widgetGuid=j.get("widgetGuid");this.sendLoadTime(b)}},scope:this,single:true}})}}}},scope:this},onRoute:{fn:function(d,j,h,k){var b=false;if(d!=".."&&j!=".."){var a=Ozone.util.parseJson(d);var e=this.findParentDashboard(a.id);var c=Ozone.util.parseJson(j);var g=this.findParentDashboard(c.id);if(e!=null&&e==g){b=true}}else{b=true}return b},scope:this}});this.eventingContainer=Ozone.eventing.Container;OWF.IntentsContainer.init({onRoute:{fn:function(j,a,h,n,b){var p=Ozone.util.parseJson(j).id;var r=Ext.getCmp(p);var q=r.intentConfig;if(!n||(n.length!=null&&n.length<=0)){if(q!=null&&q[owfdojo.toJson(a)]!=null){var k=q[owfdojo.toJson(a)];var c=0;for(var g=0,m=k.length;g<m;g++){var e=k[g];var d=Ozone.util.parseJson(e).id;if(this.activeDashboard.stateStore.indexOfId(d)>-1){c++}}if(c==k.length){b.send(j,a,h,null,k);b.callback(k);return}else{delete q[owfdojo.toJson(a)]}}this.showLaunchMenuForIntents(a,b,j,h,r)}else{b.send(j,a,h,null,n);b.callback(n)}},scope:this}})},showLaunchMenuForIntents:function(a,c,h,g,n){var m=n.intentConfig;var k=Ext.getCmp("widget-launcher");if(k){if(!k.isVisible()){k.show()}k.disableWidgetStoreLoading(true);this.widgetStore.load({scope:this,callback:function(t,u,y){k.refreshOpenedWidgets();k.clearSelections(true);var p=Ext.create("Ozone.data.WidgetDefinition",{name:"Please select a widget below",description:"Widgets below are filtered against Intent: "+a.action+" "+a.dataType});k.updateInfoPanel(p,false,true,false,false);k.showIntentCheckBox=true;k.openOrCloseAdvancedSearch(true);var v=k.searchPanel.down("#intentsTree");var q=v.getSelectionModel();q.setLocked(false);var r={expanded:true,children:[{text:a.action,expanded:true,expandable:false,children:[{text:a.dataType,leaf:true}]}]};v.setRootNode(r);var w="!@//@!";v.selectPath(w+"Root"+w+a.action+w+a.dataType,"text",w);q.setLocked(true);k.disableWidgetStoreLoading(false);k.on({close:{fn:function(z){q.setLocked(false)},scope:this,single:true}});var x={intent:{action:a.action,dataType:a.dataType,receive:true}};k.searchPanel.search(x);k.searchPanel.loadGroupStore();k.showOpenedWidgetsView(true);k.loadLauncherState()}});var b=null;var e=null;var j=this;var d={beforewidgetlaunch:{fn:function(r,p){var q={intents:true};p.set("launchData",gadgets.json.stringify(q))}},afterwidgetlaunch:{fn:function(r,q,p){var u=r.uniqueId;var t='{"id":"'+u+'"}';!n.intentConfig&&(n.intentConfig={});m=n.intentConfig;if(p){c.send(h,a,g,null,t);if(k.getIntentCheckBoxValue()){if(m[owfdojo.toJson(a)]==null){m[owfdojo.toJson(a)]=[]}m[owfdojo.toJson(a)].push(t)}}else{b=function(v,w){if(v!=null&&owfdojo.toJson(v)===owfdojo.toJson(a)&&w===t){c.send(h,a,g,null,t);c.removeListener("onIntentsReady",b,this);if(k.getIntentCheckBoxValue()){if(m[owfdojo.toJson(a)]==null){m[owfdojo.toJson(a)]=[]}m[owfdojo.toJson(a)].push(t)}}};c.addListener("onIntentsReady",b,this)}c.callback([t]);k.showIntentCheckBox=false;k.un(e);j.un(d)},scope:this,single:true}};this.on(d);e={noWidgetLaunched:{fn:function(){this.un(d);if(b!=null){c.removeListener("onIntentsReady",b,this)}c.callback([]);k.showIntentCheckBox=false},scope:this,single:true}};k.on(e)}},findParentDashboard:function(d){var c=this.getComponent("dashboardCardPanel");var e=null;for(var b=0;b<c.items.getCount();b++){var a=c.items.getAt(b);if(a.stateStore.getById(d)!=null){e=a;break}}return e},sendLoadTime:function(a){if(Ozone.config.sendWidgetLoadTimesToServer===true){Ozone.util.Transport.send({url:Ozone.util.contextPath()+"/widgetLoadTime",method:"POST",async:true,content:a,onSuccess:function(){}})}if(Ozone.config.publishWidgetLoadTimes===true){var b=gadgets.json.stringify(a);Ozone.eventing.Container.publish("Ozone.eventing.widget.public",b)}},getOpenedWidgets:function(){var e=[];if(this.activeDashboard!=null&&this.activeDashboard.stateStore!=null){var h=this.activeDashboard.stateStore.getRange();for(var d=0;d<h.length;d++){var j=h[d].data;var a=Ext.getCmp(j.uniqueId);var c=this.widgetStore.getById(j.widgetGuid);if(c!=null){var b=c.data;if(b!=null&&a!=null){var g=a.down("#widgetIframe");if(g!=null){e.push({id:j.uniqueId,name:j.name,url:b.url,frameId:g.id,widgetGuid:j.widgetGuid,widgetName:b.name,universalName:b.universalName})}}}}}return e},startAutoSave:function(){if(this.autoSaveId){clearInterval(this.autoSaveId)}this.autoSaveId=setInterval(Ext.bind(function(){if(this.autoSaveClear){clearInterval(this.autoSaveId);this.autoSaveClear=false}else{if(this.autoSaveEnabled){if(this.activeDashboard){Ext.getCmp(this.activeDashboard.id).saveToServer()}}}},this),this.pollingInterval)},deleteDashboards:function(a){var e=a.length;if(e==0){return}var d=this.getDashboardCardPanel();for(var g=0;g<e;g++){var b=this.dashboardStore.find("guid",a[g]);if(b!=-1){if(this.dashboardStore.getAt(b).get("isDefault")==true){this.dashboardStore.getAt(0).get("isDefault")==true;this.activeDashboard=this.dashboards[0];this.defaultDashboard=this.activeDashboard}this.dashboardStore.removeAt(b)}d.remove(a[g]);for(var c=0,h=this.dashboards.length;c<h;c++){if(this.dashboards[c].id==a[g]){this.dashboards.splice(c,1);break}}}this.destroyDashboardSwitcher()},updateDashboardsFromStore:function(k,a,e,b){var g=this;var d=k[0].get("guid");var h=k[0].get("stack");var c=h?h.stackContext:null;this.dashboards.length=0;var j=this.getDashboardCardPanel();j.removeAll(true);this.destroyDashboardSwitcher();setTimeout(function(){for(var q=0,n=k.length;q<n;q++){var m=k[q];g.dashboards.push(g.createDashboardConfig(m));var p=j.add(g.dashboards[q]);if(m.get("isdefault")){d=m.get("guid");h=m.get("stack");c=h?h.stackContext:null;g.activeDashboard=p;g.defaultDashboard=p}}g._activateDashboard(b||d);g.activateDashboard(b||d,true,c)},200)},reloadDashboards:function(){var a=this;a.dashboardStore.load({callback:function(b,c,d){if(d==true){a.updateDashboardsFromStore(b,c,d)}}})},saveActiveDashboardToServer:function(){if(this.dashboardStore.getById(this.activeDashboard.id)){Ext.getCmp(this.activeDashboard.id).saveToServer(true,true,false)}},saveDashboard:function(c,b,e,a){var d=this;if(!a){a=function(){Ozone.Msg.alert("Dashboard Manager","Error creating or updating dashboard.",null,null,null,d.modalWindowManager);return}}Ozone.pref.PrefServer.createOrUpdateDashboard({json:c,saveAsNew:b=="create"?true:false,onSuccess:function(g){d.destroyDashboardSwitcher();d.dashboardCreated(g);e&&e(g);d=null},onFailure:a})},createEmptyDashboard:function(d,c){var a=guid.util.guid();var b={name:"Untitled",guid:a,isdefault:c,state:[]};this.saveDashboard(b,"create");var e={id:a,itemId:a,alteredByAdmin:"false",guid:a,isdefault:c,name:"Untitled",state:[]};this.dashboardStore.add(e);return this.dashboardStore.getAt(this.dashboardStore.getCount()-1)},createDashboard:function(a){this.designDashboard(a,false)},editDashboard:function(b){var a=this.getDashboardCardPanel().getComponent(b.get("guid"));this.designDashboard(a||b,a?true:false)},dashboardCreated:function(c){if(this.dashboardStore.getById(c.guid)){return}var a=Ext.create("Ozone.data.Dashboard",c);this.dashboardStore.add(a);this.dashboards.push(this.createDashboardConfig(a));var b=this.getDashboardCardPanel();return b.add(this.dashboards[this.dashboards.length-1])},designDashboard:function(b,c){Ozone.KeyMap.disable();var a=this.getBanner().getBanner(),e=this;if(a.state!=="docked"){a.hide()}else{a.el.mask()}var d=Ext.getCmp("dashboardCardPanel");var g=Ext.widget("dashboarddesigner",{dashboardContainer:this,dashboard:b||this.activeDashboard,dashboardStore:this.dashboardStore,dashboardExists:c,renderTo:d.el,ownerCt:d});g.on("destroy",function(){if(a.state!=="docked"){a.show()}else{a.el.unmask()}Ozone.KeyMap.enable()})},setDefaultDashboard:function(a){var b=this.getDashboardCardPanel().getComponent(a);if(b&&this.defaultDashboard!=b){this.defaultDashboard.isdefault=false;this.defaultDashboard.configRecord.set("isdefault",false);this.defaultDashboard.configRecord.commit(true);b.isdefault=true;b.configRecord.set("isdefault",true);b.configRecord.commit(true);this.defaultDashboard=b}},retrieveUpdatedWidgets:function(){this.widgetStore.load({scope:this,callback:function(b,a,c){if(b.length>=0){if(!c){Ozone.Msg.alert(Ozone.util.ErrorMessageString.retrieveUpdatedWidgets,Ozone.util.ErrorMessageString.retrieveUpdatedWidgetsMsg,null,null,null,this.modalWindowManager)}}else{Ozone.Msg.alert(Ozone.util.ErrorMessageString.retrieveUpdatedWidgets,Ozone.util.ErrorMessageString.retrieveUpdatedWidgetsMsg,null,null,null,this.modalWindowManager)}}})},storeContains:function(b){var a=this.activeDashboard.stateStore;if(a){return a.findRecord("widgetGuid",b)}return null},closeWidget:function(a,c,b){var d=b?Ext.getCmp(b):this.activeDashboard.getActiveWidget();d&&d.close()},maximizeCollapseWidget:function(a,c,b){var d=b?Ext.getCmp(b):this.activeDashboard.getActiveWidget();d&&d.pane.maximizeCollapseWidget(d)},minimizeExpandWidget:function(a,c,b){var d=b?Ext.getCmp(b):this.activeDashboard.getActiveWidget();d&&d.pane.minimizeExpandWidget(d)},saveWidgetState:function(a,c,b){var d=b?Ext.getCmp(b):this.activeDashboard.getActiveWidget();if(d&&d.isFloating()){d.onStateChange()}},updateTitlesandBanner:function(){var b=false;var e=false;var g=[],d=null;var a=this.widgetStore.getRange();for(var c=0;c<a.length;c++){var h=this.widgetNames[a[c].data.widgetGuid];if(h){a[c].data.name=h}if(a[c].data.widgetTypes[0].name=="marketplace"){b=true;g.push(a[c])}if(a[c].data.widgetTypes[0].name=="metric"){e=true}}if(b){if(g.length==1){d=g[0]}this.getBanner().addMarketplaceButton(d)}else{this.getBanner().removeMarketplaceButton()}if(e){this.getBanner().addMetricButton()}else{this.getBanner().removeMetricButton()}}});Ext.define("Ozone.components.dashboard.Dashboard",{extend:"Ext.panel.Panel",alias:["widget.dashboard","widget.Ozone.components.dashboard.Dashboard"],activeWidget:null,plugins:[new Ozone.plugins.Dashboard()],dashboardContainer:null,eventingContainer:null,widgetLauncher:null,addWidgetContainer:null,widgetStateHandler:null,windowGroup:null,widgetStateContainer:null,type:null,configRecord:null,config:{name:"Default Dashboard",alteredByAdmin:"false",user:null,isdefault:false,locked:false,guid:null,state:null},hideMode:"visibility",cls:"dashboard",saveLock:false,hasChanged:false,dontSave:false,stateStore:null,widgetStore:null,widgetIframeDelay:200,panes:null,layout:"fit",widgetCls:"widgetwindow",buildItemsArray:function(b){if(!b||!b.items){return}if(b.items.length===0){if(!b.paneType){b.paneType="tabbedpane"}b.xtype=b.paneType}else{if(b.xtype==="dashboarddesignerpane"){b.xtype="container";b.layout="fit"}for(var c=0,a=b.items.length;c<a;c++){this.buildItemsArray(b.items[c])}}return b},initComponent:function(){var a=this;if(!a.configRecord.get("layoutConfig")){a.configRecord.set("layoutConfig",{cls:null,height:"100%",items:[],paneType:null,xtype:"desktoppane"})}a.items=a.buildItemsArray(a.configRecord.get("layoutConfig"))||[];if(this.stateStore!=null&&this.stateStore.storeId==null){this.stateStore.storeId=this.guid;Ext.data.StoreManager.register(this.stateStore)}this.callParent(arguments);this.addEvents("beforeserversave","serversave","widgetStartDrag","widgetStopDrag",OWF.Events.Widget.BEFORE_LAUNCH,OWF.Events.Widget.AFTER_LAUNCH);this.enableBubble([OWF.Events.Widget.BEFORE_LAUNCH,OWF.Events.Widget.AFTER_LAUNCH]);this.on("activate",this.onActivate,this);this.on("deactivate",this.onDeActivate,this);if(!this.stateStore){this.stateStore=Ext.create("Ozone.data.StateStore")}this.stateStore.on({add:{fn:function(){if(this.rendered){this.hasChanged=true}},scope:this},update:{fn:function(){if(this.rendered){this.hasChanged=true}},scope:this},remove:{fn:function(){if(this.rendered){this.hasChanged=true}},scope:this},clear:{fn:function(){if(this.rendered){this.hasChanged=true}},scope:this}});a.on(OWF.Events.Widget.BEFORE_LAUNCH,a.onBeforeWidgetLaunch,a);a.on("afterlayout",a.afterDashboardLayout,a,{single:true});a.on("beforedestroy",a.cleanup,a)},afterDashboardLayout:function(){var c=this,e,d=[];this.panes=this.query("pane");for(var b=0,a=this.panes.length;b<a;b++){e=this.panes[b];e.widgetStateContainer=this.widgetStateContainer;d.push.apply(d,e.launchPreviouslyOpenedWidgets())}$.when(d).then(function(){c.fireEvent(OWF.Events.Dashboard.COMPLETE_RENDER,c);if(OWF.Mask){OWF.Mask.hide();OWF.Mask=null}var r=c.stateStore.data.items;for(var p=0,q=r.length;p<q;p++){var k=r[p];var t=k.get("intentConfig");for(var g in t){var u=t[g];var m=[];for(var n=0;n<u.length;n++){var h=Ozone.util.parseJson(u[n]).id;if(c.stateStore.findExact("uniqueId",h)>-1){m.push(u[n])}}if(m.length>0){t[g]=m}else{delete t[g]}}}console.timeEnd("initload")})},enableWidgetDragAndDrop:function(){this.dropZone=this.dropZone||new Ext.dd.DropZone(this.getEl(),{ddGroup:"widgets",getTargetFromEvent:function(a){return a.getTarget(".paneshim")},onNodeEnter:function(d,a,c,b){Ext.fly(d).addCls("highlight-dashboard-designer-drop")},onNodeOut:function(d,a,c,b){Ext.fly(d).removeCls("highlight-dashboard-designer-drop")},onNodeOver:function(d,a,c,b){return Ext.dd.DropZone.prototype.dropAllowed},onNodeDrop:this.launchWidgets});this.enableWidgetMove()},disableWidgetDragAndDrop:function(){this.disableWidgetMove();this.cleanup()},cleanup:function(){if(this.dropZone){this.dropZone.unreg();delete this.dropZone}},launchWidgets:function(g,m,k,d){var a=g.id,b,c,e=Ext.getCmp(a),j,h;if(k){j=k.x?k.x:k.getX();h=k.y?k.y:k.getY()}if(!e||!e.isXType("pane")){b=Ext.get(g).up(".pane");if(b){e=Ext.getCmp(b.id)}}if(e&&e.isXType("pane")){e=Ext.getCmp(e.id);if(k){c=e.el.getOffsetsTo(Ext.getBody());e.launchWidgets(d.widgetModel,j-c[0],h-c[1],0)}else{e.launchWidgets(d.widgetModel)}return true}return false},onBeforeWidgetLaunch:function(e,h,d){var j=this.stateStore,m=h.get("uniqueId")||guid.util.guid(),a=h.get("singleton"),n=h.get("background"),b=j.findRecord("widgetGuid",h.get("widgetGuid")),c=!!b,k;if(a&&c){e.activateWidget(Ext.getCmp(b.get("uniqueId")));return false}if(n){k=this.add({xtype:"widgetiframe",style:"display: none",isWidget:true,iframeProperties:OWF.Container.Eventing.getIframeProperties(h.get("url"),m,h.data,e.id,d,this.configRecord.get("locked"))});var p={uniqueId:m,dashboardGuid:this.id,paneGuid:e.id,widgetGuid:h.get("widgetGuid"),statePosition:++e.statePositionCount,name:h.get("name"),active:false,width:h.get("width"),height:h.get("height"),x:0,y:0,zIndex:0,minimized:false,maximized:false,pinned:false,collapsed:false,columnPos:0,columnOrder:"",buttonId:null,buttonOpened:false,region:"",singleton:h.get("singleton"),background:h.get("background")};var g=e.stateStore.findExact("uniqueId",m);if(g!==-1){e.stateStore.removeAt(g)}e.stateStore.add(p);e.fireEvent(OWF.Events.Widget.AFTER_LAUNCH,k,h);return false}if(!e._launchingPreviouslyOpenedWidgets&&!e._reorderingWidgets&&e.dashboard.configRecord.get("locked")){e.launchFloatingWidget(h,null,null,m,d);return false}return true},moveWidgetToPane:function(m,b,e,d){var h=this,c=d.model,k=m.getX(),j=m.getY();if(!b||!e||b===e||this.configRecord.get("locked")){return}c=this.widgetStore.findRecord("widgetGuid",c.get("widgetGuid"));function g(){if(e.isXType("fitpane")&&e.items.length>0){e.confirmReplaceWidget(d.id,d.title,function(){e.clearWidgets(false);e.items.clear();a()})}else{a()}}function a(){var p=e,n=p.cloneWidgetDataForTransfer(d);d.on("destroy",function(){h.launchWidgets(p,null,{x:k,y:j},{widgetModel:n})});d.destroy()}d.isFloating()?setTimeout(g,500):g()},onDestroy:function(){if(this.stateStore!=null){this.stateStore.destroyStore();this.stateStore=null}this.callParent(arguments)},launchWidgetInstance:function(j,t){var c=null,r=null,e,d=Ext.getCmp(j.id).pane;if(t.guid!=null){r=this.widgetStore.getById(t.guid)}else{if(t.universalName!=null){var n=this.widgetStore.findExact("universalName",t.universalName);if(n>-1){r=this.widgetStore.getAt(n)}}}if(r==null){e={error:true,newWidgetLaunched:false,message:"The specified widget wasn't found."}}else{r=r.copy();if(t.title!=null){if(t.titleRegex==null){r.data.name=t.title}else{var k=t.titleRegex.match(/^\/(.*)\/(.*)$/);if(k!=null&&k[1]!=""){r.data.name=r.data.name.replace(new RegExp(k[1],k[2]),t.title)}}}if(!d.isXType("fitpane")){if(this.panes&&this.panes.length>1){var v,g,u;for(var h=0,m=this.panes.length;h<m;h++){var b=this.panes[h];if(!b.isXType("fitpane")){if(b.defaultSettings&&b.defaultSettings.widgetStates){v=b.defaultSettings.widgetStates[r.data.widgetGuid];if(v&&v.timestamp){if(!g||v.timestamp>g){g=v.timestamp;u=b}}}}}if(u){d=u}}}t.guid=r.data.widgetGuid;if(t.launchOnlyIfClosed){for(var h=0,m=this.stateStore.getCount();h<m;h++){var a=this.stateStore.getAt(h);if(a!=null&&a.get("widgetGuid")==t.guid){c=a;if(!r.get("background")){this.handleAlreadyLaunchedWidget(a.data)}e={error:false,newWidgetLaunched:false,message:"An instance of the specified widget already exists.",uniqueId:a.get("uniqueId")};break}}}if(c==null){var q=guid.util.guid();if(d.fireEvent(OWF.Events.Widget.BEFORE_LAUNCH,d,r,t.data)!==false){d.launchWidget(r,null,null,q,t.data,true)}e={error:false,newWidgetLaunched:true,uniqueId:q}}}return e},handleWidgetRequest:function(a){switch(a.fn){case"getWidgetState":return this.getWidgetState(a.params.guid);case"getWidgetStateEvents":return this.getWidgetStateEvents(a.params.guid);case"addStateEventListeners":return this.addWidgetStateEvents("listen",a.params.guid,a.params.events);case"addStateEventOverrides":return this.addWidgetStateEvents("override",a.params.guid,a.params.events);case"removeStateEventListeners":return this.removeWidgetStateEvents("listen",a.params.guid,a.params.events);case"removeStateEventOverrides":return this.removeWidgetStateEvents("override",a.params.guid,a.params.events);case"closeWidget":return this.closeWidget(a.params.guid);case"activateWidget":return this.activateWidget(a.params.guid);case"getWidgetConfig":var b=this.getWidgetState(a.params.guid);return Ext.JSON.encode(b);case"refreshWidgetLaunchMenu":return this.refreshWidgetLaunchMenu();default:break}},getWidgetStateEvents:function(d){var c=Ext.getCmp(d);var b=[];if(c){for(var a in c.events){b.push(a)}return b.sort()}return b},addWidgetStateEvents:function(g,c,e){var h=Ext.getCmp(c),b;function j(n,m,k){return function(){return n.handleStateEvent(m,k)}}if(h){if(e==null||e==undefined||e.length==0){e=this.getWidgetStateEvents(c)}for(var d=0,a=e.length;d<a;d++){b=e[d];if(h.tab&&b.indexOf("close")>-1){if(g==="override"){h.tab.purgeListener(b)}h["on_"+b]=j(h,g,b);h.tab.on(b,h["on_"+b])}else{if(g==="override"){h.purgeListener(b)}h["on_"+b]=j(h,g,b);h.on(b,h["on_"+b])}}return true}return false},removeWidgetStateEvents:function(e,b,d){var h=Ext.getCmp(b),a,g;if(h){if(d==null||d==undefined||d.length==0){d=this.getWidgetStateEvents(b)}for(var c=0;c<d.length;c++){a=d[c];g=h;if(h.tab&&a.indexOf("close")>-1){g=h.tab}if(g.hasListener(a)){g.un(a,h["on_"+a])}if(e=="override"){g.restoreListener(a)}}return true}return false},activateWidget:function(a){var b=Ext.getCmp(a);if(b){if(b.floatingWidget){b.minimized===true?b.restoreFromMinimize(true):b.focus(false,false,true,true);this.updateActiveWidget(b);return true}else{return b.pane.activateWidget(b)}}return false},closeWidget:function(a){var b=Ext.getCmp(a);if(b!==undefined){b.close();return true}return false},refreshWidgetLaunchMenu:function(){var a=Ext.getCmp("widget-launcher");a.refresh()},handleAlreadyLaunchedWidget:function(b){var a=Ext.getCmp(b.uniqueId);this.fireEvent(OWF.Events.Widget.AFTER_LAUNCH,a,a.model,true);Ext.getCmp(b.paneGuid).activateWidget(a)},getWidgetConfig:function(a){var b=this.widgetStore.getById(a);return b?b.data:null},getWidgetState:function(b){var e=Ext.getCmp(b),d,a,c;if(e){c=e.getSize();d=e.getState();if(e.maximized){Ext.apply(d,{height:c.height,width:c.width})}}else{a=this.stateStore.getById(b);d=a?a.data:{}}delete d.launchData;return d},removeState:function(a){this.stateStore.remove(this.stateStore.getById(a))},initNewWidget:function(a){a.on("close",function(){this.updateActiveWidget(null,false)},this);a.on("statesave",function(){this.defaultSettings.widgetStates=this.defaultSettings.widgetStates||{};var d=this.stateStore.data.items;for(var e=0,b=d.length;e<b;e++){var c=d[e];this.defaultSettings.widgetStates[c.data.widgetGuid]={x:c.data.x,y:c.data.y,height:c.data.height,width:c.data.width,columnPos:c.data.columnPos}}},this)},initDashboard:function(){this.widgetLauncher.registerWindowManager(this);this.addWidgetContainer.registerWindowManager(this);this.widgetStateContainer.registerWindowManager(this);var a=Ext.state.Manager.getProvider();if(a.setStore&&typeof a.setStore==="function"){a.setStore(this.stateStore)}document.title=this.config.name},onRender:function(b,a){this.initDashboard();this.callParent(arguments)},onActivate:function(e){var b=this.dashboardContainer.getBanner();this.initDashboard();if(this.configRecord.get("locked")){b.disableLaunchMenu()}else{b.enableLaunchMenu()}var c=this.stateStore.data.items;for(var d=0,a=c.length;d<a;d++){var g=c[d],j=g.get("uniqueId"),e=Ext.getCmp(j);var h;if(e&&(h=e.on_show)){h()}}},onDeActivate:function(e){this.saveToServer();var c=this.stateStore.data.items;for(var d=0,a=c.length;d<a;d++){var g=c[d],h=g.get("uniqueId"),e=Ext.getCmp(h);var b;if(e&&(b=e.on_hide)){b()}}},getJson:function(){var d=this.configRecord.data,g,e=this.query("pane"),b;for(var c=0,a=e.length;c<a;c++){g=e[c];g.initialConfig.widgets=g.getStatesOfAllWidgets();g.initialConfig.defaultSettings=g.defaultSettings}d.state=[];d=Ext.clone(d);return d},saveToServer:function(c,d,b,a,g){if(this.configRecord&&this.stateStore&&!this.dontSave){if(this.hasChanged||this.configRecord.dirty||d){var e=this;if(this.fireEvent("beforeserversave",this)!==false){if(!this.saveLock){this.saveLock=true;Ozone.pref.PrefServer.createOrUpdateDashboard({json:this.getJson(),saveAsNew:(b===true),onSuccess:function(){e.configRecord.commit();e.hasChanged=false;e.fireEvent("serversave",e,true);e.saveLock=false;if(a){a()}},onFailure:function(){e.fireEvent("serversave",e,false);e.saveLock=false;if(g){g()}},async:!c})}}}}},shimPanes:function(){var c=this.panes;for(var b=0,a=c.length;b<a;b++){c[b].shim()}},unshimPanes:function(){var c=this.panes;for(var b=0,a=c.length;b<a;b++){c[b].unshim()}},enableWidgetMove:function(d){var c=this.panes;for(var b=0,a=c.length;b<a;b++){if(this.configRecord.get("locked")===true){c[b].disableWidgetMove()}else{if(d){if(c[b].id!==d.id){c[b].enableWidgetMove()}else{c[b].shim()}}else{c[b].enableWidgetMove()}}}},disableWidgetMove:function(){var c=this.panes;if(!c){return}for(var b=0,a=c.length;b<a;b++){c[b].disableWidgetMove()}},getViewPort:function(){return Ext.getCmp(this.viewportId)},getSite:function(){var c=window.location.pathname;var a=/^(\/[^\/]+\/).*$/i;var b=c.match(a);if(b&&b[1]&&b[1].length>0){c=b[1];c=c.substring(0,c.length-1)}else{c=""}return window.location.protocol+"//"+window.location.host+(c.charAt(0)!="/"?("/"+c):c)},updateActiveWidget:function(c,b){if(!c){this.activeWidget=null;return}if(this.activeWidget===c&&c.iframeReady){gadgets.rpc.call(c.getIframeId(),"_widget_activated")}if(this.activeWidget&&this.activeWidget!==c){this.activeWidget.active=false;this.activeWidget.removeCls(this.activeWidget.focusCls);if(this.activeWidget.iframeReady&&b!==false){this.activeWidget._activated=false;var a=this.activeWidget.getIframeId();if(a){gadgets.rpc.call(a,"_widget_deactivated")}}}this.activeWidget=c;if(c&&b!==false&&this.activeWidget.iframeReady&&!c._activated){c.active=true;c._activated=true;gadgets.rpc.call(c.getIframeId(),"_widget_activated")}},getActiveWidget:function(a){return Ext.getCmp(a)||this.activeWidget},getViewHeight:function(){return Ext.getCmp("dashboardCardPanel").getHeight()},getViewWidth:function(){return Ext.getCmp("dashboardCardPanel").getWidth()},moveWidgetUp:function(b){var a=this.getActiveWidget(b);if(a&&a.initialConfig.floatingWidget){a.pane.moveFloatingWidgetUp(a)}else{a&&a.pane.moveWidgetUp(a)}},moveWidgetRight:function(b){var a=this.getActiveWidget(b);if(a&&a.initialConfig.floatingWidget){a.pane.moveFloatingWidgetRight(a)}else{a&&a.pane.moveWidgetRight(a)}},moveWidgetDown:function(b){var a=this.getActiveWidget(b);if(a&&a.initialConfig.floatingWidget){a.pane.moveFloatingWidgetDown(a)}else{a&&a.pane.moveWidgetDown(a)}},moveWidgetLeft:function(b){var a=this.getActiveWidget(b);if(a&&a.initialConfig.floatingWidget){a.pane.moveFloatingWidgetLeft(a)}else{a&&a.pane.moveWidgetLeft(a)}}});Ext.define("Ozone.components.window.DashboardSwitcher",{extend:"Ozone.components.window.ModalWindow",alias:"widget.dashboardswitcher",closeAction:"hide",modal:true,preventHeader:true,modalAutoClose:true,shadow:false,layout:"auto",ui:"system-window",store:null,closable:false,title:"Dashboards",iconCls:"dashboard-switcher-header-icon",cls:"system-window",resizable:false,draggable:false,viewId:"dashboard-switcher-dashboard-view",dashboardContainer:null,dashboardItemHeight:0,dashboardItemWidth:0,minDashboardsWidth:3,maxDashboardsWidth:5,maxDashboardsHeight:3,storeLengthChanged:true,selectedItemCls:"dashboard-selected",_deletedStackOrDashboards:null,DROP_LEFT_CLS:"x-view-drop-indicator-left",DROP_RIGHT_CLS:"x-view-drop-indicator-right",_previouslyFocusedStackOrDashboard:null,initComponent:function(){var g=this,b=[],a={},k={},h,j,d;for(var c=0,e=g.dashboardStore.getCount();c<e;c++){d=g.dashboardStore.getAt(c);h=Ext.clone(d.data);h.model=d;k[h.guid]=h;j=h.stack;if(j){if(a[j.id]){a[j.id].dashboards.push(h)}else{j=Ext.clone(j);j.isStack=true;j.dashboards=[h];a[j.id]=j;b.push(j)}}else{b.push(h)}}g.callParent(arguments);g.stackOrDashboards=b;g.dashboards=k;g.stacks=a;g._deletedStackOrDashboards=[];g.tpl=new Ext.XTemplate('<tpl for=".">','<div id="{[this.getName(values)+this.getId(values)]}" class="{[this.getClass(values)]}" tabindex="0" data-{[this.getName(values)]}-id="{[this.getId(values)]}" {[this.getToolTip(values)]}>','<div class="thumb-wrap">','<div class="thumb {layout}">',"</div>","</div>","{[this.getActions(values)]}",'<div class="{[this.getName(values)]}-name">',"{[this.encodeAndEllipsize(values.name)]}","</div>","</div>","</tpl>",{compiled:true,getId:function(m){return m.isStack?m.id:m.guid},getClass:function(m){var n=this.getName(m);return m.guid===g.activeDashboard.id?n+" "+g.selectedItemCls:n},getName:function(m){return m.isStack?"stack":"dashboard"},getToolTip:function(m){var q="data-qtip=\"<div class='dashboard-tooltip-content'><h3 class='name'>"+Ext.htmlEncode(Ext.htmlEncode(m.name))+"</h3>";m.description&&(q+="<p class='tip-description'>"+Ext.htmlEncode(Ext.htmlEncode(m.description))+"</p><br>");if(m.isStack){return q+'</div>"'}else{if(m.groups&&m.groups.length>0){var p="";for(var n=-1;++n<m.groups.length;){if(!m.groups[n].stackDefault){p+=Ext.htmlEncode(Ext.htmlEncode(m.groups[n].name))+", "}}if(p.length>0){q=q+"<p class='group'><label>Group(s): </label>";p=p.substring(0,p.length-2);q=q+p+"</p>"}}return q+"<p class='created-by'><label>Created by: </label>"+(Ext.htmlEncode(Ext.htmlEncode(m.createdBy.userRealName))||"")+"</p><p class='last-updated'><label>Last Modified: </label>"+(m.prettyEditedDate||"")+'</p></div>"'}},getActions:function(m){return m.isStack?'<ul class="stack-actions hide"><li></li><li class="restore icon-refresh" tabindex="0" data-qtip="Restore"></li><li class="delete icon-remove" tabindex="0" data-qtip="Delete"></li><li></li></ul>':'<ul class="dashboard-actions hide"><li class="share icon-share" tabindex="0" data-qtip="Share"></li><li class="restore icon-refresh" tabindex="0" data-qtip="Restore"></li><li class="edit icon-edit" tabindex="0" data-qtip="Edit"></li><li class="delete icon-remove" tabindex="0" data-qtip="Delete"></li></ul>'},encodeAndEllipsize:function(m){return Ext.util.Format.htmlEncode(Ext.Array.map(Ext.Array.erase(/^([\S]+)\s*(.*)?/.exec(Ext.String.trim(m)),0,1),function(n){return Ext.util.Format.ellipsis(n,14)}).join(" "))}});g.stackDashboardsTpl='<div class="stack-dashboards"><div class="stack-dashboards-anchor-tip x-tip-anchor x-tip-anchor-top"></div><div class="dashboards"></div></div>';g.on("afterrender",function(m){g.tpl.overwrite(m.body,b);Ext.DomHelper.append(m.el,'<ul class="actions"><li class="manage" tabindex="0" data-qtitle="Manage" data-qtip="Activates the Share, Restore, Edit and Delete manager buttons.">Manage</li><li class="create" tabindex="0" data-qtitle="Create Dashboard" data-qtip="Name, describe and design a new dashboard.">+</li></ul>');g.bindEvents(m)});g.on("beforeclose",g.onClose,g);g.on("show",g.updateWindowSize,g);g.on("show",g.initCircularFocus,g,{single:true});g.on("show",g.focusActiveDashboard,g)},bindEvents:function(){var d=this,e=jQuery,a=e(d.el.dom);a.on("click",".dashboard",e.proxy(d.onDashboardClick,d)).on("click",".stack",e.proxy(d.onStackClick,d)).on("click",".manage",e.proxy(d.toggleManage,d)).on("click",".create",e.proxy(d.createDashboard,d)).on("mouseover",".stack, .dashboard",e.proxy(d.onMouseOver,d)).on("focus",".stack, .dashboard",e.proxy(d.onMouseOver,d)).on("click",".dashboard .restore",e.proxy(d.restoreDashboard,d)).on("click",".dashboard .share",e.proxy(d.shareDashboard,d)).on("click",".dashboard .edit",e.proxy(d.editDashboard,d)).on("click",".dashboard .delete",e.proxy(d.deleteDashboard,d)).on("click",".stack .restore",e.proxy(d.restoreStack,d)).on("click",".stack .delete",e.proxy(d.deleteStack,d));d.initKeyboardNav();var g,c,b;a.attr("unselectable","on").css("user-select","none").on("selectstart",false);a.on("mousedown",".dashboard, .stack",function(h){g=e(this);c=g.parent();b=g.clone().addClass("x-dd-drag-proxy drag-proxy");e("ul, .dashboard-name, .stack-name",b).remove();e(document.body).append(b);a.on("mouseover.reorder",".dashboard, .stack",function(j){j.preventDefault();j.stopPropagation()});e(document).on("mousemove.reorder",function(j){var m=j.pageX,k=j.pageY;b.css({left:m+15,top:k+15})});a.one("mousemove.reorder",".dashboard, .stack",function(j){var k=e(this);d._hideStackDashboardsOnMove(k)});a.on("mousemove.reorder",".dashboard, .stack",function(j){var m=e(this);if(c[0]!==m.parent()[0]){return}var p=j.pageX,k=j.pageY,q=m.offset(),n=m.outerWidth();m.removeClass(d.DROP_LEFT_CLS+" "+d.DROP_RIGHT_CLS);if(p<=q.left+(n/2)){m.addClass(d.DROP_LEFT_CLS)}else{m.addClass(d.DROP_RIGHT_CLS)}});a.on("mouseleave.reorder",".dashboard, .stack",function(j){e(this).removeClass(d.DROP_LEFT_CLS+" "+d.DROP_RIGHT_CLS)});a.on("mouseup.reorder",".dashboard",function(j){d._dropOnDashboard(g,e(this))});a.on("mouseup.reorder",".stack",function(j){d._dropOnStack(g,e(this))});e(document).on("mouseup.reorder",function(j){g=null;c=null;b.remove();e(document).off(".reorder");a.off(".reorder")})})},_hideStackDashboardsOnMove:function(a){if(!(a.parent().hasClass("dashboards"))){this.hideStackDashboards()}},initKeyboardNav:function(){var b=this;function a(e,g){g.hasClass("stack")?b._dropOnStack(e,g):b._dropOnDashboard(e,g)}function d(){var g=$(this),e=g.prev(),h;if(e.length===1&&!e.hasClass("dashboard")&&!e.hasClass("stack")){e=e.prev()}if(e.length===0){return}e.addClass(b.DROP_LEFT_CLS);if(h=b._hideStackDashboardsOnMove(g)){h.then(function(){a(g,e)})}else{a(g,e)}}function c(){var g=$(this),e=g.next(),h;if(e.length===1&&!e.hasClass("dashboard")&&!e.hasClass("stack")){e=e.next()}if(e.length===0){return}e.addClass(b.DROP_RIGHT_CLS);if(h=b._hideStackDashboardsOnMove(g)){h.then(function(){a(g,e)})}else{a(g,e)}}$(b.el.dom).on("keyup",".stack",function(e){if(e.which===Ext.EventObject.ENTER){b.onStackClick(e)}else{if(e.which==219){d.call(this)}else{if(e.which==221){c.call(this)}}}}).on("keyup",".dashboard",function(e){if(e.which===Ext.EventObject.ENTER){b.onDashboardClick(e)}else{if(e.which==219){d.call(this)}else{if(e.which==221){c.call(this)}}}}).on("focus",".dashboard, .stack",function(e){$(e.currentTarget).addClass(b.selectedItemCls)}).on("blur",".dashboard, .stack",function(e){b._previouslyFocusedStackOrDashboard=$(e.currentTarget).removeClass(b.selectedItemCls)}).on("focus",".dashboard-actions li, .stack-actions li",function(e){$(e.currentTarget).addClass("hover")}).on("blur",".dashboard-actions li, .stack-actions li",function(e){$(e.currentTarget).removeClass("hover")}).on("keyup",".dashboard-actions .restore",function(e){if(e.which===Ext.EventObject.ENTER){b.restoreDashboard(e)}}).on("keyup",".dashboard-actions .share",function(e){if(e.which===Ext.EventObject.ENTER){b.shareDashboard(e)}}).on("keyup",".dashboard-actions .edit",function(e){if(e.which===Ext.EventObject.ENTER){b.editDashboard(e)}}).on("keyup",".dashboard-actions .delete",function(e){if(e.which===Ext.EventObject.ENTER){b.deleteDashboard(e)}}).on("keyup",".stack-actions .restore",function(e){if(e.which===Ext.EventObject.ENTER){b.restoreStack(e)}}).on("keyup",".stack-actions .delete",function(e){if(e.which===Ext.EventObject.ENTER){b.deleteStack(e)}}).on("focus",".manage",function(e){$(e.currentTarget).addClass("selected")}).on("blur",".manage",function(e){if(!b._managing){$(e.currentTarget).removeClass("selected")}}).on("focus",".create",function(e){$(e.currentTarget).addClass("selected")}).on("blur",".create",function(e){$(e.currentTarget).removeClass("selected")}).on("keyup",".manage",function(e){if(e.which===Ext.EventObject.ENTER){b.toggleManage(e);$(e.currentTarget).addClass("selected")}}).on("keyup",".create",function(e){if(e.which===Ext.EventObject.ENTER){b.createDashboard(e)}})},_dropOnDashboard:function(c,k){var m=this,p=m.getDashboard(k),g;if(k[0]===c[0]){k.removeClass(m.DROP_LEFT_CLS+" "+m.DROP_RIGHT_CLS);return}var d=k.hasClass(m.DROP_LEFT_CLS);var r=m.dashboardStore,t,q;q=c.index();if(d){k.removeClass(m.DROP_LEFT_CLS);c.insertBefore(k)}else{k.removeClass(m.DROP_RIGHT_CLS);c.insertAfter(k)}t=c.index();if(c.hasClass("dashboard")){g=m.getDashboard(c);r.remove(g.model,true);var j=r.indexOf(p.model);if(!d){j++}r.insert(j,g.model);if(g.stack){var n=m.stacks[g.stack.id];n.dashboards.splice(t,0,n.dashboards.splice(q,1)[0])}}else{g=m.getStack(c);var b=g.dashboards,a;for(var e=0,h=b.length;e<h;e++){a=b[e];r.remove(a.model,true)}j=r.indexOf(p.model);if(!d){j++}for(var e=0,h=b.length;e<h;e++){a=b[e];r.insert(j++,a.model)}}c.focus();m.initCircularFocus();m.reordered=true},_dropOnStack:function(d,q){var r=this,t=r.getStack(q),h;if(q[0]===d[0]){q.removeClass(r.DROP_LEFT_CLS+" "+r.DROP_RIGHT_CLS);return}u=r.dashboardStore;var e=q.hasClass(r.DROP_LEFT_CLS);var u=r.dashboardStore;if(d.hasClass("dashboard")){h=r.getDashboard(d);u.remove(h.model,true);var m;if(e){m=u.indexOf(t.dashboards[0].model)}else{var c=q.next();if(c.length===1&&!c.hasClass("dashboard")&&!c.hasClass("stack")){c=c.next()}if(c.length===1){if(c.hasClass("dashboard")){var k=r.getDashboard(c);m=u.indexOf(k.model)}else{var n=r.getStack(c);m=u.indexOf(n.dashboards[0].model)}}else{var p=t.dashboards[t.dashboards.length-1];m=u.indexOf(p.model);m++}}u.insert(m,h.model)}else{h=r.getStack(d);var b=h.dashboards,a;for(var g=0,j=b.length;g<j;g++){a=b[g];u.remove(a.model,true)}if(e){m=u.indexOf(t.dashboards[0].model)}else{var c=q.next();if(c.length===1){if(c.hasClass("dashboard")){var k=r.getDashboard(c);m=u.indexOf(k.model)}else{var n=r.getStack(c);m=u.indexOf(n.dashboards[0].model)}}else{var p=t.dashboards[t.dashboards.length-1];m=u.indexOf(p.model);m++}}for(var g=0,j=b.length;g<j;g++){a=b[g];u.insert(m++,a.model)}}if(e){q.removeClass(r.DROP_LEFT_CLS);d.insertBefore(q)}else{q.removeClass(r.DROP_RIGHT_CLS);d.insertAfter(q)}d.focus();r.initCircularFocus();r.reordered=true},initCircularFocus:function(){var a=this.body.first(),b=this.el.last().last();this.tearDownCircularFocus();this.setupFocus(a,b)},focusActiveDashboard:function(){var b=this,d=this.activeDashboard.id,c=$("#dashboard"+d);if(c.length===0){var a=this.activeDashboard.configRecord.get("stack").id;this.toggleStack(this.stacks[a],$("#stack"+a)).then(function(){b.focusActiveDashboard()});return}setTimeout(function(){c&&c.focus()},500)},getDashboard:function(a){return this.dashboards[a.attr("data-dashboard-id")]},getStack:function(a){return this.stacks[a.attr("data-stack-id")]},getElByClassFromEvent:function(b,a){var c=$(b.currentTarget||b.target);return c.hasClass("cls")?c:c.parents("."+a)},onDashboardClick:function(a){if((a.type!=="click"&&a.which!==Ext.EventObject.ENTER)||this._managing===true){return}var d=$(a.currentTarget),b=this.getDashboard(d);var c=b.stack?b.stack.stackContext:null;this.activateDashboard(b.guid,c);d.addClass(this.selectedItemCls);if(this._$lastClickedDashboard){this._$lastClickedDashboard.removeClass(this.selectedItemCls)}this._$lastClickedDashboard=d},onStackClick:function(b){if(b.type==="click"||b.which===Ext.EventObject.ENTER){var d=this,e=jQuery,c=e(b.currentTarget),a=d.getStack(c);if(a){d.toggleStack(a,c)}b.preventDefault()}},toggleStack:function(b,d){var c=this,a=$.Deferred();if(c._lastExpandedStack){if(c._lastExpandedStack===b){return c.hideStackDashboards()}else{c.hideStackDashboards().then(function(){c.showStackDashboards(b,d,a)})}}else{c.showStackDashboards(b,d,a)}return a.promise()},showStackDashboards:function(m,u,r){var j=this,h=u.outerWidth(true),d=u.outerHeight(true),p=u.parent(),q=p.outerWidth(true),a;var c=Math.round(q/h),t=$(j.body.dom).children(".dashboard, .stack").length,g=u.index()+1;if(g===t||(g%c)===0){a=u}else{var e=g;while((e%c)!==0){e++;if(e>=t){break}}a=p.children().eq(e-1)}this.$stackDashboards=$(this.stackDashboardsTpl);this.$stackDashboards.children(".dashboards").html(this.tpl.applyTemplate(m.dashboards));this.$stackDashboards.insertAfter(a);this.stackDashboardsAnchorTip=$(".stack-dashboards-anchor-tip",this.$stackDashboards);if(!this.stackDashboardsAnchorTipHeight){this.stackDashboardsAnchorTipHeight=this.stackDashboardsAnchorTip.outerHeight()}if(!this.stackDashboardsAnchorTipWidth){this.stackDashboardsAnchorTipWidth=this.stackDashboardsAnchorTip.outerWidth()}this.$stackDashboards.hide();var n=u.position(),k=n.top+d-(this.stackDashboardsAnchorTipHeight),b=n.left+(h/2)-(this.stackDashboardsAnchorTipWidth/2);this.stackDashboardsAnchorTip.css({left:b+"px"});if(Ext.isIE7||Ext.isIE8){this.$stackDashboards.show();r.resolve()}else{this.$stackDashboards.slideDown("fast").promise().then(function(){r.resolve()})}this._lastExpandedStack=m},hideStackDashboards:function(){var b=this;if(!this.$stackDashboards){var a=$.Deferred();a.resolve();return a.promise()}if(Ext.isIE7||Ext.isIE8){var a=$.Deferred();this.$stackDashboards&&this.$stackDashboards.hide();a.resolve();this.$stackDashboards.remove();this._lastExpandedStack=null;return a.promise()}else{var c=this.$stackDashboards.slideUp("fast").promise();c.then(function(){b.$stackDashboards.remove();b._lastExpandedStack=null});return c}},onMouseOver:function(a){var b,c=jQuery;if(!this._managing){return}b=c(a.currentTarget);if(this._lastManageEl){if(b[0]===this._lastManageEl[0]){return}else{c("ul",this._lastManageEl).addClass("hide")}}this._lastManageEl=b;c("ul",this._lastManageEl).removeClass("hide");c(".dashboard, .stack",this.el.dom).css("height",b.height()+"px")},updateDashboardEl:function(c,a){var b=$(this.tpl.apply([a])).insertBefore(c);c.remove();b.focus()},updateStackDashboardsEl:function(a){if(this.$stackDashboards){this.$stackDashboards.children(".dashboards").html(this.tpl.applyTemplate(a.dashboards))}},toggleManage:function(a){var b;if(a){b=$(a.currentTarget);this.$manageBtn=b}if(this._managing){this.resetManage();this._managing=false}else{b&&b.addClass("selected");this._managing=true;if(this._previouslyFocusedStackOrDashboard){this._previouslyFocusedStackOrDashboard.trigger("mouseover")}}},resetManage:function(){if(!this._managing){return}this.$manageBtn.removeClass("selected");$(".dashboard, .stack",this.el.dom).css("height","");if(this._lastManageEl){$("ul",this._lastManageEl).addClass("hide");this._lastManageEl=null}this._managing=false},restoreDashboard:function(a){a.stopPropagation();var d=this,e=this.getElByClassFromEvent(a,"dashboard"),b=this.getDashboard(e),c=b.guid;this.warn('This action will return the dashboard <span class="heading-bold">'+Ext.htmlEncode(b.name)+"</span> to its current default state. If an administrator changed the dashboard after it was assigned to you, the default state may differ from the one that originally appeared in your Switcher.",function(){Ext.Ajax.request({url:Ozone.util.contextPath()+"/dashboard/restore",params:{guid:c,isdefault:c==d.activeDashboard.guid},success:function(g,m){var j=Ext.decode(g.responseText);if(j!=null&&j.data!=null&&j.data.length>0){d.notify("Restore Dashboard",'<span class="heading-bold">'+Ext.htmlEncode(b.name)+"</span> is restored successfully to its default state!");var h=j.data[0].name,k=j.data[0].description;b.model.set({name:h,description:k});b.name=h;b.description=h;d.updateDashboardEl(e,b);d.reloadDashboards=true}},failure:function(g,h){Ozone.Msg.alert("Dashboard Manager","Error restoring dashboard.",function(){Ext.defer(function(){e[0].focus()},200,d)},d,null,d.dashboardContainer.modalWindowManager);return}})},function(){a.currentTarget.focus()})},shareDashboard:function(k){k.stopPropagation();var h=this.getElByClassFromEvent(k,"dashboard"),b=this.getDashboard(h).guid,d=this.dashboardContainer.dashboardStore.find("guid",b),j=this.dashboardContainer.dashboardStore.getAt(d).data,c=j.model;if(this.dashboardContainer.activeDashboard.configRecord.data.guid===j.guid){j=this.dashboardContainer.activeDashboard.getJson()}delete j.model;var m=Ozone.util.cloneDashboard(j,false,true);j.model=c;Ext.EventManager.un(window,"beforeunload",this.dashboardContainer.onBeforeUnload);var a=document.createElement("form");var g=document.createElement("input");g.id="json";g.name="json";g.type="hidden";g.value=Ext.JSON.encode(m);a.appendChild(g);a.action=Ozone.util.contextPath()+"/servlet/ExportServlet";a.method="POST";a.enctype=a.encoding="multipart/form-data";document.body.appendChild(a);a.submit();document.body.removeChild(a);a=null;g=null;var e=this;setTimeout(function(){Ext.EventManager.on(window,"beforeunload",e.dashboardContainer.onBeforeUnload,e.dashboardContainer)},100)},createDashboard:function(a){var b=this,c=Ext.widget("createdashboardwindow",{itemId:"createDashWindow",dashboardContainer:b.dashboardContainer,ownerCt:b.dashboardContainer});c.show();b.close()},editDashboard:function(a){a.stopPropagation();var d=this,e=this.getElByClassFromEvent(a,"dashboard"),b=this.getDashboard(e);var c=Ext.widget("createdashboardwindow",{itemId:"editDashWindow",title:"Edit Dashboard",height:250,dashboardContainer:this.dashboardContainer,ownerCt:this.dashboardContainer,hideViewSelectRadio:true,existingDashboardRecord:b.model}).show();this.close()},deleteDashboard:function(a){a.stopPropagation();var d=this,g=this.getElByClassFromEvent(a,"dashboard"),c=this.getDashboard(g),e;function b(){a.currentTarget.focus()}if(c.stack){this.warn("Users cannot remove individual dashboards from a stack. Please contact your administrator.",b);return}if(c.groups&&c.groups.length>0){this.warn("Users cannot remove dashboards assigned to a group. Please contact your administrator.",b);return}e='This action will permanently delete <span class="heading-bold">'+Ext.htmlEncode(c.name)+"</span>.";this.warn(e,function(){d.dashboardStore.remove(c.model);d.dashboardStore.save();d.notify("Delete Dashboard",'<span class="heading-bold">'+Ext.htmlEncode(c.name)+"</span> deleted!");d._deletedStackOrDashboards.push(c);d.reloadDashboards=true;var h=g.prev();g.remove();h.focus()},b)},restoreStack:function(b){b.stopPropagation();var c=this,d=this.getElByClassFromEvent(b,"stack"),a=this.getStack(d);this.warn('This action will return the stack <span class="heading-bold">'+Ext.htmlEncode(a.name)+"</span> to its current default state. If an administrator changed any dashboard in the stack after it was assigned to you, the default state may differ from the one that originally appeared in your Switcher.",function(){Ext.Ajax.request({url:Ozone.util.contextPath()+"/stack/restore",params:{id:a.id},success:function(e,m){var k=Ext.decode(e.responseText);if(k!=null&&k.updatedDashboards!=null&&k.updatedDashboards.length>0){c.notify("Restore Stack",'<span class="heading-bold">'+Ext.htmlEncode(a.name)+"</span> is restored successfully to its default state!");var n=a.dashboards;for(var h=0;h<n.length;h++){for(var g=0;g<k.updatedDashboards.length;g++){var p=k.updatedDashboards[g];if(p.guid==n[h].guid){n[h].model.set({name:p.name,description:p.description});n[h].name=p.name;n[h].description=p.description}}}c.updateStackDashboardsEl(a);c.reloadDashboards=true;d.focus()}},failure:function(e,g){Ozone.Msg.alert("Dashboard Manager","Error restoring stack.",function(){Ext.defer(function(){d[0].focus()},200,c)},c,null,c.dashboardContainer.modalWindowManager);return}})},function(){b.currentTarget.focus()})},deleteStack:function(u){u.stopPropagation();var q=this,p=this.getElByClassFromEvent(u,"stack"),r=this.getStack(p),b='This action will permanently delete stack <span class="heading-bold">'+Ext.htmlEncode(r.name)+"</span> and its dashboards.";function n(){u.currentTarget.focus()}var c=r.groups,t=Ozone.config.user.groups,m=false;if(c&&t&&c.length>0&&t.length>0){for(var h=0,g=c.length;h<g;h++){var a=c[h];for(var e=0,d=t.length;e<d;e++){var k=t[e];if(a.id===k.id){m=true;break}}if(m===true){break}}}if(m){this.warn("Users in a group cannot remove stacks assigned to the group. Please contact your administrator.",n);return}this.warn(b,function(){q.dashboardContainer.stackStore.remove(q.dashboardContainer.stackStore.getById(r.id));q.dashboardContainer.stackStore.save();if(q._lastExpandedStack===r){q.hideStackDashboards()}var j=p.prev();p.remove();j.focus();q._deletedStackOrDashboards.push(r);q.reloadDashboards=true},n)},warn:function(c,b,a){Ext.widget("alertwindow",{title:"Warning",html:c,minHeight:115,width:250,dashboardContainer:this.dashboardContainer,okFn:b,cancelFn:a,showCancelButton:!!a}).show()},notify:function(d,c,b){var a={dir1:"up",dir2:"left",firstpos1:25,firstpos2:25};$.pnotify({title:d,text:c,type:b||"success",addclass:"stack-bottomright",stack:a,history:false,sticker:false,icon:false,delay:3000})},activateDashboard:function(a,b){this.close();this.dashboardContainer.activateDashboard(a,false,b)},updateWindowSize:function(){var d,a,j=this.body.first().dom;if(!j){return}var e=Ext.get(j),g=this.getEl(),c=e.getMargin("lr"),k=e.getMargin("tb"),b=this.body.query("> .dashboard, > .stack").length,h=0;this.dashboardItemWidth=e.getWidth();this.dashboardItemHeight=e.getHeight();if(b<this.minDashboardsWidth){h=this.minDashboardsWidth}else{if(b>this.maxDashboardsWidth){h=this.maxDashboardsWidth}else{h=b}}d=(this.dashboardItemWidth+c+1)*h;if(b>this.maxDashboardsWidth*this.maxDashboardsHeight){d+=30}if(b>this.maxDashboardsWidth*this.maxDashboardsHeight){a=(this.dashboardItemHeight+k)*this.maxDashboardsHeight}this.body.setSize(d+30,a);this.body.setStyle({"max-height":((this.dashboardItemHeight+k+1)*this.maxDashboardsHeight)+40+"px"})},saveDashboardOrder:function(){var a=$.Deferred();var d=this.dashboardStore.data.items;var b=[];var e=[];for(var c=0;c<d.length;c++){if(!d[c].data.removed){b.push({guid:d[c].data.guid,isdefault:d[c].data.isdefault,name:d[c].data.name.replace(new RegExp(Ozone.lang.regexLeadingTailingSpaceChars),"")})}else{e.push(d[c].data.guid)}}Ozone.pref.PrefServer.updateAndDeleteDashboards({viewsToUpdate:b,viewGuidsToDelete:e,updateOrder:true,onSuccess:function(){a.resolve()},onFailure:function(){a.reject()}});return a.promise()},onClose:function(){var a=this;a.resetManage();if(a.dashboardContainer.dashboardStore.getCount()===0){window.location.reload();return}if(a.reordered){if(a.reloadDashboards){a.saveDashboardOrder().always(function(){a.dashboardContainer.reloadDashboards()})}else{a.saveDashboardOrder().fail(function(){a.dashboardContainer.reloadDashboards()})}}else{if(a.reloadDashboards===true){a.dashboardContainer.reloadDashboards()}}},destroy:function(){this.tearDownCircularFocus();$(this.el.dom).off();return this.callParent()}});Ext.define("Ozone.components.window.HelpWindow",{extend:"Ext.window.Window",alias:["widget.helpwindow","widget.Ozone.components.window.HelpWindow"],id:"helpWindow",title:"Help",closable:true,maximizable:true,autoScroll:false,defaultFocus:"helpTreeView",height:600,width:900,mixins:{circularFocus:"Ozone.components.focusable.CircularFocus"},plugins:new Ozone.components.keys.HotKeyComponent(Ozone.components.keys.HotKeys.HELP),initComponent:function(){function a(d,b,g,c,h){if(b.get("leaf")){this.down("#helpPanel").getEl().set({src:"help"+b.get("path")})}}Ext.apply(this,{layout:{type:"border"},items:[{xtype:"treepanel",preventHeader:true,viewConfig:{plugins:new Ozone.components.focusable.Focusable(),itemId:"helpTreeView",listeners:{itemclick:a,itemkeydown:function(d,b,g,c,h){switch(h.getKey()){case h.ENTER:case h.SPACE:a.apply(this,arguments)}},scope:this}},store:Ext.create("Ext.data.TreeStore",{fields:["text","path"],proxy:{type:"ajax",url:"helpFiles"},reader:{type:"json",root:"children"},autoLoad:true}),rootVisible:false,region:"west",split:true,collapsible:true,collapseMode:"mini",flex:1,listeners:{load:{fn:function(){var b=this.down("#helpTreeView");if(b.getSelectedNodes().length===0&&b.getStore().getCount()>0){b.select(0);b.fireEvent("itemclick",this,b.getStore().getAt(0),b.getNode(0),0,{})}},scope:this}}},{flex:2,region:"center",xtype:"component",itemId:"helpPanel",cls:"helpPanel",autoEl:{tag:"iframe"},plugins:new Ozone.components.focusable.Focusable(),autoScroll:true}],dockedItems:[{xtype:"focuscatch",itemId:"focusCatch",dock:"bottom"}],listeners:{afterrender:function(c){var b=c.getComponent("focusCatch").getEl();c.setupFocus(c.down("#helpTreeView").getEl(),b);c.mon(b,{focus:function(){this.getEl().addCls("x-focus")},blur:function(){this.getEl().removeCls("x-focus")},scope:c});c.mon(c.getEl(),"keydown",function(d){if(!(d.altKey&&d.shiftKey)){return}switch(d.getKey()){case d.UP:d.stopEvent();this.maximize();break;case d.DOWN:d.stopEvent();this.restore();break}},c)},resize:function(b){b.syncShadow()},beforeclose:function(c,b){c.down("#helpPanel").getEl().set({src:""})}}});this.dashboardContainer&&this.on("show",function(){this.dashboardContainer.modalWindowManager.register(this);this.dashboardContainer.modalWindowManager.bringToFront(this)});this.callParent(arguments)}});Ext.define("Ozone.components.view.DDView",{extend:"Ozone.components.focusable.FocusableView",alias:"widget.ddview",store:null,ddGroup:null,disableDragAndDrop:false,disableDragLaunching:false,indicatorHtml:'<div class="x-view-drop-indicator-left"></div><div class="x-view-drop-indicator-right"></div>',indicatorCls:"x-view-drop-indicator",dragImgSelector:"img",initComponent:function(){this.disabledItems=Ext.create("Ext.util.MixedCollection");this.defaultFilterFunction=function(a,b){return a.get("visible")&&a.get("definitionVisible")};this.filterFunction=this.defaultFilterFunction;this.on("render",this.setupDragZone);this.callParent(arguments);this.addEvents(["dragStarted","dragEnd","invalidDrop"]);this.enableBubble(["dragStarted","dragEnd","invalidDrop"])},refresh:function(){this.callParent(arguments);if(this.sizeCfg){this.setItemSize(this.sizeCfg)}},setupDragZone:function(){var a=this;if(!this.disableDragAndDrop){var b=Ext.create("Ext.dd.StatusProxy",{shadow:false});a.dragZone=new Ext.dd.DragZone(a.getEl(),{ddGroup:this.ddGroup,proxy:b,getDragData:function(h){var c=h.getTarget(a.itemSelector);if(c){var g=a.indexOf(c);var j=a.dragImgSelector==="."?Ext.fly(c).dom.cloneNode(true):Ext.fly(c).down(a.dragImgSelector).dom.cloneNode(true);Ext.fly(j).addCls("widget-drag-proxy");return{ddel:j,sourceEl:c,repairXY:Ext.fly(c).getXY(),sourceStore:a.store,view:a,origIdx:g,lastIdx:g,widgetModel:a.getRecord(c)}}},getRepairXY:function(){return this.dragData.repairXY},onStartDrag:function(c,d){a.fireEvent("dragStarted",a.dragZone,this.disableDragLaunching)},endDrag:function(){a.fireEvent("dragEnd",a.dragZone)},afterInvalidDrop:function(c,d){a.fireEvent("invalidDrop")}});a.dropZone=new Ext.dd.DropZone(a.getEl(),{ddGroup:this.ddGroup,getTargetFromEvent:function(c){return c.getTarget(a.itemSelector)},onNodeEnter:function(h,c,g,d){},onNodeOut:function(h,c,g,d){Ext.fly(h).removeCls(["drag-cls","x-view-drop-indicator-right","x-view-drop-indicator-left"])},onNodeOver:function(j,c,h,d){var g=a.getDropPoint(h,j,c);if(g=="before"){Ext.fly(j).replaceCls("x-view-drop-indicator-right","x-view-drop-indicator-left")}else{Ext.fly(j).replaceCls("x-view-drop-indicator-left","x-view-drop-indicator-right")}return Ext.dd.DropZone.prototype.dropAllowed},onNodeDrop:function(m,c,k,h){var j=a.getDropPoint(k,m,c);if(a==h.view){h.sourceStore.remove(h.widgetModel)}var n=a.store.findExact("widgetGuid",h.widgetModel.get("widgetGuid"));if(n>-1){a.store.removeAt(n)}var g=a.indexOf(m);var d=a.store.getAt(g);if(j=="after"){g++}a.store.insert(g,[h.widgetModel]);h.view.fireEvent("drag",a,d,m,g,k);return true}})}},onItemKeyDown:function(b,d,c,a){if(a.getKey()==219){if(c>0){this.store.removeAt(c);this.store.insert(c-1,b);this.select(b)}}else{if(a.getKey()==221){if(c<this.store.getCount()){this.store.removeAt(c);this.store.insert(c+1,b);this.select(b)}}}},getDropPoint:function(j,h,d){if(h==this.el.dom){return"before"}var g=Ext.fly(h).getX(),a=g+h.offsetWidth;var m=g+(a-g)/2;var k=j.getX();if(k<=m){return"before"}else{return"after"}},defaultFilter:function(){this.filterFunction=this.defaultFilterFunction;this.store.filter({filterFn:this.filterFunction})},enableAllItems:function(){if(this.rendered){for(var b=0;b<this.disabledItems.getCount();b++){var c=this.el.down("#"+this.disabledItems.getAt(b));if(c!=null){var a=c.down("img");if(a!=null){a.applyStyles("zoom: 1; filter: alpha(opacity=100);opacity:1.0;")}}}}},enableItem:function(b){if(this.rendered){var c=this.el.down("#"+b);if(c!=null){this.disabledItems.removeAtKey(b);var a=c.down("img");if(a!=null){a.applyStyles("zoom: 1; filter: alpha(opacity=100);opacity:1.0;")}}}},disableItem:function(b){if(this.rendered){var c=this.el.down("#"+b);if(c!=null){this.disabledItems.add(b,b);var a=c.down("img");if(a!=null){a.applyStyles("zoom: 1;filter: alpha(opacity=20);opacity: 0.2;")}}}},searchByText:function(c,d,a,b,e){a=(a!==null)?a:true;b=(b!==null)?b:false;e=(e!==null)?e:false;if(a){this.store.clearFilter(true)}if(d===""||d===null){this.filterFunction=this.defaultFilterFunction;c.loadViewStore();c.widgetSelect(c.lastSelected);return this.filterFunction}else{if(b){this.filterFunction=Ext.bind(function(g,h){return this.searchByTagFilter(d,g,h)},this)}else{this.filterFunction=Ext.bind(function(g,h){return this.searchByTextFilter(d,g,h,e)},this)}}this.store.filter({filterFn:this.filterFunction});return this.filterFunction},searchByTextFilter:function(b,d,e,c){var a=new RegExp(b,"i");if((d.get("name").match(a))&&d.get("visible")&&d.get("definitionVisible")){return d}},searchByTagFilter:function(d,e,g){var a=e.get("tags");var c=false;for(var b=0;b<a.length;b++){d=d.replace("_"," ");if(a[b].name==d){c=true}}if(c&&e.get("visible")&&e.get("definitionVisible")){return e}},setItemSize:function(a){this.sizeCfg=a;Ext.Object.each(a,function(c,b){if(b){this.setElementSize(b.width,b.height,c)}},this)},setElementSize:function(e,b,a){var d=new Ext.CompositeElementLite(this.getNodes());if(typeof a==="undefined"){a=this.sizeElSelector}if(a!=="."){var c=d;d=new Ext.CompositeElementLite();c.each(function(g){d.add(g.select(a))},this)}if(e){d.setWidth(e)}if(b){d.setHeight(b)}}});Ext.define("Ozone.components.launchMenu.Carousel",{extend:"Ext.panel.Panel",alias:"widget.carousel",layout:"fit",cls:"carousel",resizable:{handles:"n",minHeight:48,maxHeight:144,pinned:true,dynamic:true},ddGroup:"carousel",store:null,viewStore:null,carouselView:null,slideDistance:3,initComponent:function(){var a=this;this.execScrollIdMap={};Ext.apply(this,{items:{xtype:"ddview",itemId:"carouselView",cls:"carousel-view",itemSelector:".carousel-widget",overItemCls:"carousel-widget-over",selectedItemCls:"carousel-widget-selected",dragImgSelector:".",trackOver:true,singleSelect:true,store:a.store,ddGroup:this.ddGroup,plugins:{ptype:"instancevariablizer",container:a},tpl:new Ext.XTemplate('<tpl for=".">','<img onerror="this.src = \'{[this.getDefaultIcon()]}\'" src="{[this.getIcon(xindex, values)]}" class="carousel-widget <tpl if="this.setDisabled(values)">widget-disabled</tpl>" />',"</div>","</tpl>",{compiled:true,getIcon:function(e,c){var d=null;var b=a.store.findExact("widgetGuid",c.widgetGuid);if(b>-1){var g=a.store.getAt(b);d=encodeURI(decodeURI(g.get("image")))}return d},getDefaultIcon:function(){return"themes/common/images/settings/WidgetsIcon.png"},setDisabled:function(b){var c=false;if(b.disabled!==null||b.disabled!==undefined){c=b.disabled}else{var d=a.widgetStore.getById(b.uniqueId);if(d!=null){c=d.get("disabled")}}return c}}),listeners:{render:{fn:function(b){this.relayEvents(b,["itemclick","itemdblclick","itemkeydown"])},scope:this},selectionchange:{fn:function(c,b,d){d=d||{};d.favorite=true;this.fireEvent("selectionchange",c,b,d)},scope:this},scope:this}},lbar:{xtype:"button",itemId:"leftBtn",cls:"leftCarouselBtn",iconCls:"leftCarouselBtnIcon",handler:function(){a.slideView(false)},listeners:{render:{fn:function(b){this.addScrollBtnDropZone(b,this.ddGroup)},scope:this}}},rbar:{xtype:"button",itemId:"rightBtn",cls:"rightCarouselBtn",iconCls:"rightCarouselBtnIcon",handler:function(){a.slideView(true)},listeners:{render:{fn:function(b){this.addScrollBtnDropZone(b,this.ddGroup)},scope:this}}},listeners:{resize:a.updateWidth,scope:this}});a.callParent(arguments);this.addEvents(["itemclick","itemdblclick","itemkeydown","selectionchange"]);this.enableBubble(["itemclick","itemdblclick","itemkeydown","selectionchange"]);a.on({destroy:{fn:function(c,b){this.cleanUpScrollerTasks()},scope:this}});a.store.on("datachanged",a.updateWidth,a)},addScrollBtnDropZone:function(b,a){var c=this,d=null,h={mouseup:{fn:function(){d=null;c.cleanUpScrollerTasks()},single:true}};function g(){if(b.itemId=="leftBtn"){c.slideView(false)}else{c.slideView(true)}}var e=new Ext.dd.DropZone(b.el,{ddGroup:a,getTargetFromEvent:function(j){return j.getTarget()},onNodeEnter:function(n,j,m,k){c.cleanUpScrollerTasks();Ext.getDoc().un(h);d=window.setInterval(g,500);c.execScrollIdMap[d]=true;Ext.getDoc().on(h)},onNodeOut:function(n,j,m,k){d=null;c.cleanUpScrollerTasks()},onNodeOver:function(n,j,m,k){return Ext.dd.DropZone.prototype.dropAllowed},onNodeDrop:function(n,j,m,k){d=null;c.cleanUpScrollerTasks()},onContainerDrop:function(k,m,j){d=null;c.cleanUpScrollerTasks()}});e.addToGroup("widgets")},cleanUpScrollerTasks:function(){for(var a in this.execScrollIdMap){if(this.execScrollIdMap[a]){window.clearInterval(a)}}this.execScrollIdMap={}},slideView:function(c){var d=this,a=d.getNodeWidth(),b=a?(a*d.slideDistance):0;this.body.scroll(c?"left":"right",b,true)},refresh:function(){var a=this;a.carouselView.refresh()},updateWidth:function(){var a=this.carouselView;if(this.rendered){Ext.Array.forEach(a.getNodes(),function(c){var b=Ext.fly(c);b.setWidth(b.getHeight())});a.getEl().setWidth(this.store.count()*this.getNodeWidth()+a.getEl().getPadding("lr")+10)}},getNodeWidth:function(){var a=Ext.fly(this.carouselView.getNode(0));return a?a.getComputedWidth()+a.getMargin("lr"):0},addWidget:function(a){if(!(this.store.findRecord("widgetGuid",a.data.widgetGuid))){this.store.add(a)}},removeWidget:function(a){if(this.store.findRecord("widgetGuid",a.data.widgetGuid)){this.store.remove(a)}},clearSelection:function(){var a=this.carouselView.getSelectionModel();this.carouselView.deselect(a.getSelection())}});Ext.define("Ozone.components.launchMenu.AdvancedSearchPanel",{extend:"Ext.panel.Panel",alias:"widget.advancedsearchpanel",cls:"search-panel",autoScroll:true,widgetStore:null,dontLoadWidgetStore:false,initComponent:function(){var b=this;this.groupStore=Ext.create("Ozone.data.GroupStore");this.loadGroupStore();this.intentTreeStore=Ext.create("Ext.data.TreeStore");this.loadIntentTreeStore();this.tagGridStore=Ext.create("Ext.data.Store",{fields:[{name:"tag"}],data:[],proxy:{type:"memory",reader:{type:"array"}},listeners:{add:{fn:function(d){var c=this.down("#tagGrid");c.enable();c.show()},scope:this},remove:{fn:function(d){if(d.getCount()==0){var c=this.down("#tagGrid");c.disable();c.hide()}},scope:this},clear:{fn:function(d){if(d.getCount()==0){var c=this.down("#tagGrid");c.disable();c.hide()}},scope:this}}});this.tagCloudStore=Ext.create("Ext.data.Store",{fields:[{name:"tag"},{name:"uses",type:"int"}]});this.loadTagCloudStore();var a={xtype:"actioncolumn",width:25,items:[{icon:"themes/common/images/delete.png",tooltip:"Delete",handler:function(d,g,c){var e=d.getStore().getAt(g);d.getStore().remove(e);this.search()},scope:this}]};Ext.apply(this,{layout:{type:"vbox",align:"stretch"},items:[{xtype:"searchbox",itemId:"searchbox",width:this.width-25,listeners:{searchChanged:{fn:function(d,e){if(e!=""){var c=b.down("#termGrid");if(!(c.store.findRecord("term",Ext.htmlEncode(e)))){c.store.add({term:Ext.htmlEncode(e)});d.setRawValue("");this.search()}}},scope:this}}},{xtype:"grid",itemId:"termGrid",cls:"term-grid",autoScroll:true,hidden:true,disabled:true,flex:0.8,plugins:[new Ozone.components.focusable.FocusableGridPanel()],store:Ext.create("Ext.data.Store",{fields:[{name:"term"}],data:[],proxy:{type:"memory",reader:{type:"array"}},listeners:{add:{fn:function(d){var c=this.down("#termGrid");c.setDisabled(false);c.show()},scope:this},remove:{fn:function(d){if(d.getCount()==0){var c=this.down("#termGrid");c.setDisabled(true);c.hide()}},scope:this},clear:{fn:function(d){if(d.getCount()==0){var c=this.down("#termGrid");c.setDisabled(true);c.hide()}},scope:this}}}),hideHeaders:true,columns:[{header:"",dataIndex:"term",flex:1},a],viewConfig:{listeners:{itemkeydown:{fn:function(e,d,j,g,c){switch(c.getKey()){case c.SPACE:case c.ENTER:case c.DELETE:var h=this.down("#termGrid");h.getStore().remove(d);this.search();break;default:break}},scope:this}}}},{xtype:"grid",title:"Groups",itemId:"groupGrid",cls:"group-grid",store:this.groupStore,flex:1,hideHeaders:true,collapsible:true,plugins:[new Ozone.components.focusable.FocusableGridPanel()],selModel:Ext.create("Ext.selection.CheckboxModel",{checkOnly:true,listeners:{selectionchange:{fn:function(d,c){this.search()},scope:this}}}),columns:[{header:"",dataIndex:"displayName",renderer:function(c){return Ext.htmlEncode(c)},flex:1}]},{xtype:"nocollapsesplitter",collapsible:false},{xtype:"treepanel",title:"Intents",itemId:"intentsTree",plugins:[new Ozone.components.focusable.FocusableGridPanel()],columns:[{xtype:"simpletreecolumn",text:"Name",flex:1,dataIndex:"text",renderer:function(j,e,d,h,k,g,c){return Ext.htmlEncode(j)}}],cls:"group-grid",store:this.intentTreeStore,rootVisible:false,allowDeselect:true,flex:1,hideHeaders:true,collapsible:true,listeners:{selectionchange:{fn:function(c,e,d){this.search()},scope:this}},viewConfig:{listeners:{itemkeydown:{fn:function(e,d,h,g,c){switch(c.getKey()){case c.SPACE:case c.ENTER:e.selModel.selectWithEvent(d,c);break;default:break}},scope:this}}}},{xtype:"nocollapsesplitter",collapsible:false},{xtype:"panel",itemId:"tagPanel",title:"Tags",cls:"tag-grid",layout:{type:"vbox",align:"stretch"},collapsible:true,flex:1,autoScroll:true,items:[{xtype:"grid",itemId:"tagGrid",cls:"tag-grid",flex:0.8,hidden:true,plugins:[new Ozone.components.focusable.FocusableGridPanel()],store:this.tagGridStore,hideHeaders:true,anchor:"100%",columns:[{header:"",dataIndex:"tag",flex:1},{xtype:"actioncolumn",width:25,items:[{icon:"themes/common/images/delete.png",tooltip:"Delete",handler:function(d,g,c){var e=d.getStore().getAt(g);d.getStore().remove(e);this.search()},scope:this}]}],listeners:{afterrender:{fn:function(e){var c=e.getView();var d=c.getEl();d.dom.tabIndex=-1},scope:this}},viewConfig:{listeners:{itemkeydown:{fn:function(e,d,j,g,c){switch(c.getKey()){case c.SPACE:case c.ENTER:case c.DELETE:var h=this.down("#tagGrid");h.getStore().remove(d);this.search();break;default:break}},scope:this}}}},{xtype:"tagcloud",itemId:"tagCloud",cls:"tagCloud",itemSelector:".tag",selectedItemCls:"tag-selected",trackOver:true,overItemCls:"tag-over",flex:1,minHeight:100,autoScroll:true,store:this.tagCloudStore,listeners:{itemkeydown:{fn:function(e,d,j,g,c){switch(c.getKey()){case c.SPACE:case c.ENTER:var h=this.down("#tagGrid");if(!(h.store.findRecord("tag",Ext.htmlEncode(d.data.tag)))){h.store.add({tag:Ext.htmlEncode(d.data.tag)});this.search()}break;default:break}},scope:this},itemClick:{fn:function(d,c,k,e,j,h){var g=this.down("#tagGrid");if(!(g.store.findRecord("tag",Ext.htmlEncode(c.data.tag)))){g.store.add({tag:Ext.htmlEncode(c.data.tag)});this.search()}},scope:this}}}]}],bbar:{xtype:"toolbar",itemId:"reset-bar",items:[{xtype:"tbfill"},{xtype:"button",text:"Reset",handler:function(c,d){b.clearAllFilters();b.search()}}]}});this.callParent(arguments)},loadGroupStore:function(){this.groupStore.removeAll();for(var e=0,b=this.widgetStore.getCount();e<b;e++){var a=this.widgetStore.getAt(e).get("groups");if(a!=null&&a.length>0){for(var d=0,c=a.length;d<c;d++){if(this.groupStore.findExact("id",a[d].id)<0&&!a[d].stackDefault){this.groupStore.add(a[d])}}}}},loadIntentTreeStore:function(){var d={expanded:true,children:[]};var t={};var c={};for(var h=0,n=this.widgetStore.getCount();h<n;h++){var r=this.widgetStore.getAt(h).data;if(r.intents!=null&&r.intents.receive!=null){for(var g=0;g<r.intents.receive.length;g++){var b=r.intents.receive[g];if(b!=null){var a=t[b.action];if(a==null){a={text:b.action,expanded:true,expandable:false,children:[]};t[b.action]=a;d.children.push(a)}if(b.dataTypes!=null){for(var e=0;e<b.dataTypes.length;e++){var q=b.dataTypes[e],p=q+"\0"+b.action;var m=c[p];if(m==null){m={text:q,leaf:true};c[p]=m;a.children.push(m)}}}}}}}this.intentTreeStore.setRootNode(d)},refresh:function(a){this.clearAllFilters(a);this.loadGroupStore();this.loadIntentTreeStore();var b=this.down("#intentsTree");b.getSelectionModel().setLocked(false);this.loadTagCloudStore()},loadTagCloudStore:function(){var h={};var g=[];this.tagCloudStore.removeAll();for(var e=0;e<this.widgetStore.getCount();e++){var a=this.widgetStore.getAt(e);var c=a.data.tags;for(var b in c){var d=c[b].name;if(this.tagGridStore.findExact("tag",d)<0){if(h[d]==null){h[d]={tag:d,uses:1};g.push(h[d])}else{h[d].uses++}}}}this.tagCloudStore.add(g)},search:function(d){if(!this.dontLoadWidgetStore){var E=false;var z=this.down("#termGrid").getStore();var m=this.down("#tagGrid").getStore();var u=this.down("#groupGrid");var p=u.getSelectionModel().getSelection();var L={};var P=this.down("#intentsTree");var b=P.selModel.getSelection();if(b.length>0){E=true;if(b[0].isLeaf()){var h=b[0].parentNode;L.action=h.get("text");L.dataType=b[0].get("text")}else{L.action=b[0].get("text")}L.receive=true}if(d!=null){if(d.customWidgetName!=null&&d.customWidgetName!=""){z=Ext.create("Ext.data.Store",{fields:[{name:"term"}],data:[],proxy:{type:"memory",reader:{type:"array"}}});z.add({term:d.customWidgetName})}if(d.intent!=null){L=d.intent}}this.widgetStore.removeAll();var N=this.dashboardContainer.widgetStore;var v=[];for(var M=0,q=N.getCount();M<q;M++){var O=true;var F=N.getAt(M);O=F.get("visible")&&F.get("definitionVisible");if(O){var D=F.get("widgetTypes");if(D!=null){var e=false;for(var K=0;K<D.length;K++){var Q=D[K];if(Q.name=="standard"){e=true}}if(!e){O=false}}}if(O){for(var K=0;K<z.getCount();K++){var x=Ext.htmlDecode(z.getAt(K).get("term"));E=true;if(F.get("name")!=null&&!F.get("name").match(new RegExp(".*"+x+".*","i"))){O=false;break}}}if(O){var w=F.get("groups");for(var K=0;K<p.length;K++){E=true;var t=p[K].get("id");var C=false;for(var J=0;J<w.length;J++){var G=w[J].id;if(t==G){C=true}}if(!C){O=false;break}}}if(O){if(L.action!=null){var a=F.get("intents").receive;var A=false;for(var J=0;J<a.length;J++){var g=a[J];if(L.action==g.action){if(L.dataType!=null){var y=g.dataTypes;if(y!=null){A=false;for(var I=0;I<y.length;I++){var r=y[I];if(L.dataType==r){A=true}}}}else{A=true}}}if(!A){O=false}}}if(O){var n=F.get("tags");for(var K=0;K<m.getCount();K++){var H=Ext.htmlDecode(m.getAt(K).get("tag"));var c=false;for(var J=0;J<n.length;J++){E=true;var B=n[J].name;if(H==B){c=true}}if(!c){O=false;break}}}if(O){v.push(F.copy())}}this.widgetStore.add(v);this.widgetStore.widgetFiltered=E;this.loadTagCloudStore()}},clearAllFilters:function(b){var g=this.down("#tagGrid");g.store.removeAll();var e=this.down("#termGrid");e.store.removeAll();var a=this.down("#groupGrid");a.getSelectionModel().deselectAll(b);var j=this.down("#intentsTree");var h=j.getSelectionModel();var d=h.isLocked();if(!d){h.deselectAll(b)}var c=this.down("#searchbox");c.reset()}});Ext.define("Ozone.components.launchMenu.WidgetView",{extend:"Ext.Container",alias:"widget.widgetview",alreadyOpenedWidget:false,disableDragAndDrop:false,disableDragLaunching:false,initComponent:function(){var a=this;this.gridStore=Ext.create("Ozone.data.WidgetStore",{sorters:[{property:"name",direction:"ASC"}]});this.gridStore.add(this.widgetStore.getRange());this.widgetStore.on({datachanged:{fn:function(b,c){this.gridStore.removeAll();this.gridStore.add(b.getRange());this.gridStore.sort(this.gridStore.getSorters())},scope:this}});Ext.apply(this,{layout:{type:"card",deferredRender:true},activeItem:0,items:[{xtype:"ddview",itemId:"view",itemSelector:".widget",overItemCls:"widget-over",selectedItemCls:"widget-selected",trackOver:true,singleSelect:true,store:this.widgetStore,disableDragAndDrop:this.disableDragAndDrop,disableDragLaunching:this.disableDragLaunching,autoScroll:true,ddGroup:"widgets",plugins:{ptype:"instancevariablizer",container:this},tpl:new Ext.XTemplate('<tpl for=".">','<div class="widget <tpl if="this.setDisabled(values)">widget-disabled</tpl>" >','<div class="thumb-wrap" id={widgetGuid}>','<img onerror="this.src = \'{[this.getDefaultIcon()]}\'" src="{[this.getIcon(xindex, values)]}" class="thumb" />',"</div>",'<div class="thumb-text">{[this.encodeAndEllipsize(values.name)]}</div>',"</div>","</tpl>",{compiled:true,setDisabled:function(b){var c=false;if(b.disabled!==null||b.disabled!==undefined){c=b.disabled}else{var d=a.widgetStore.getById(b.uniqueId);if(d!=null){c=d.get("disabled")}}return c},getIcon:function(d,b){var c=null;if(b.image!=null){c=encodeURI(decodeURI(b.image))}else{var e=a.widgetStore.getById(b.uniqueId);if(e!=null){c=encodeURI(decodeURI(e.get("image")))}}return c},getDefaultIcon:function(){return"themes/common/images/settings/WidgetsIcon.png"},encodeAndEllipsize:function(b){return Ext.util.Format.htmlEncode(Ext.Array.map(Ext.Array.erase(/^([\S]+)\s*(.*)?/.exec(Ext.String.trim(b)),0,1),function(c){return Ext.util.Format.ellipsis(c,11)}).join(" "))}}),listeners:{itemclick:{fn:function(c,b,h,d,g,e){Ext.apply(b.data,{alreadyOpenedWidget:this.alreadyOpenedWidget});this.fireEvent("itemclick",c,b,h,d,g,e)},scope:this},itemdblclick:{fn:function(c,b,h,d,g,e){Ext.apply(b.data,{alreadyOpenedWidget:this.alreadyOpenedWidget});this.fireEvent("itemdblclick",c,b,h,d,g,e)},scope:this},itemkeydown:{fn:function(c,b,h,d,g,e){Ext.apply(b.data,{alreadyOpenedWidget:this.alreadyOpenedWidget});this.fireEvent("itemkeydown",c,b,h,d,g,e)},scope:this},selectionchange:{fn:function(d,c,g){if(c.length>0){for(var e=0;e<c.length;e++){var b=c[e];Ext.apply(b.data,{alreadyOpenedWidget:this.alreadyOpenedWidget})}}this.fireEvent("selectionchange",d,c,g)},scope:this}}},{xtype:"grid",store:this.gridStore,itemId:"grid",forceFit:true,plugins:[new Ozone.components.focusable.FocusableGridPanel(),{ptype:"instancevariablizer",container:this}],viewConfig:{getRowClass:function(b,e,d,c){if(b.get("disabled")){return"widget-disabled"}return""},listeners:{itemkeydown:{fn:function(c,b,h,d,g,e){Ext.apply(b.data,{alreadyOpenedWidget:this.alreadyOpenedWidget});this.fireEvent("itemkeydown",c,b,h,d,g,e)},scope:this}}},columns:[{header:"Icon",renderer:function(c,b,d,h,m,k,j){var e="themes/common/images/settings/WidgetsIcon.png";var g=null;if(c!=null){g=encodeURI(c)}else{g=encodeURI(d.get("image"))}return"<img onerror=\"this.src = '"+e+'\'" src="'+g+'" style="width: 24px;height: 24px">'},dataIndex:"image",flex:0,width:45,sortable:false},{header:"Name",dataIndex:"name",renderer:function(b){return Ext.htmlEncode(b)},flex:0,width:200},{header:"Tags",sortable:false,renderer:function(j,d,c){var g="";if(j==null){var h=a.widgetStore.getById(c.get("uniqueId"));j=h.get("tags")}for(var e=0;e<j.length;e++){var b=(j[e]).name;if(e==j.length-1){g+=b}else{g+=b+","}}return Ext.htmlEncode(g)},dataIndex:"tags",flex:1}],listeners:{render:{fn:function(b){b.enableBubble(["dragStarted","dragEnd","invalidDrop"]);if(!this.disableDragAndDrop){b.dragZone=new Ext.dd.DragZone(b.getEl(),{ddGroup:"widgets",getDragData:function(h){var c=h.getTarget(b.getView().itemSelector);if(c){var g=b.getSelectionModel().getLastSelected();var j=c.cloneNode(true);j.id=Ext.id();return{ddel:j,sourceEl:c,repairXY:Ext.fly(c).getXY(),widgetModel:g}}},getRepairXY:function(){return this.dragData.repairXY},onStartDrag:function(){b.fireEvent("dragStarted",b.dragZone,this.disableDragLaunching)},endDrag:function(){b.fireEvent("dragEnd")},afterInvalidDrop:function(c,d){b.fireEvent("invalidDrop")}})}},scope:this},itemclick:{fn:function(c,b,h,d,g,e){Ext.apply(b.data,{alreadyOpenedWidget:this.alreadyOpenedWidget});this.fireEvent("itemclick",c,b,h,d,g,e)},scope:this},itemdblclick:{fn:function(c,b,h,d,g,e){Ext.apply(b.data,{alreadyOpenedWidget:this.alreadyOpenedWidget});this.fireEvent("itemdblclick",c,b,h,d,g,e)},scope:this},selectionchange:{fn:function(d,c,g){if(c.length>0){for(var e=0;e<c.length;e++){var b=c[e];Ext.apply(b.data,{alreadyOpenedWidget:this.alreadyOpenedWidget})}this.fireEvent("selectionchange",d,c,g)}},scope:this}}}]});this.callParent();this.addEvents(["itemclick","itemdblclick","itemkeydown","selectionchange"]);this.enableBubble(["itemclick","itemdblclick","itemkeydown","selectionchange"])}});Ext.define("Ozone.components.launchMenu.WidgetViewContainer",{extend:"Ext.Container",alias:"widget.widgetviewcontainer",layout:{type:"vbox",align:"stretch"},showOpenedWidgets:false,iconOrGrid:true,initComponent:function(){Ext.apply(this,{items:[{xtype:"component",itemId:"openedwidgetsviewtitle",cls:"title",html:"Current Instances",hidden:!this.showOpenedWidgets},{xtype:"widgetview",itemId:"openedwidgetsview",flex:1,hidden:!this.showOpenedWidgets,widgetStore:this.openedWidgetStore,disableDragAndDrop:true,disableDragLaunching:true,alreadyOpenedWidget:true},{xtype:"component",itemId:"widgetsviewtitle",cls:"title",html:"Open a new Instance",hidden:!this.showOpenedWidgets},{xtype:"widgetview",itemId:"widgetsview",flex:1,widgetStore:this.widgetStore}]});this.callParent(arguments);this.on("itemclick",this.frameClickedWidgetInstance)},showIconOrGridView:function(c){var a=false,b=this.getComponent("widgetsview"),d=this.getComponent("openedwidgetsview");if(c!=null){a=c;this.iconOrGrid=c}else{a=this.iconOrGrid}if(a){b.getLayout().setActiveItem("view");if(d.isVisible()){d.getLayout().setActiveItem("view")}}else{b.getLayout().setActiveItem("grid");if(d.isVisible()){d.getLayout().setActiveItem("grid")}}},showOpenedWidgetsView:function(a){this.showOpenedWidgets=a;if(this.showOpenedWidgets&&this.openedWidgetStore.getCount()>0){this.getComponent("openedwidgetsview").show();this.getComponent("widgetsviewtitle").show();this.getComponent("openedwidgetsviewtitle").show();this.showIconOrGridView()}else{this.getComponent("openedwidgetsview").hide();this.getComponent("widgetsviewtitle").hide();this.getComponent("openedwidgetsviewtitle").hide()}},setOpenedWidgets:function(a){var b=this.openedWidgetStore;b.removeAll();b.add(a.getRange());b.sort("name","ASC")},setItemSize:function(c){var b=this.getComponent("widgetsview").down("#view");var a=this.getComponent("openedwidgetsview").down("#view");b.setItemSize(c);a.setItemSize(c)},deselectAll:function(a){var c=this.getComponent("widgetsview").down("#view");var b=this.getComponent("openedwidgetsview").down("#view");var e=this.getComponent("widgetsview").down("#grid");var d=this.getComponent("openedwidgetsview").down("#grid");c.getSelectionModel().deselectAll(a);b.getSelectionModel().deselectAll(a);e.getSelectionModel().deselectAll(a);d.getSelectionModel().deselectAll(a)},getFirstActiveViewOrGrid:function(){var a=this.getComponent("openedwidgetsview");var c=this.getComponent("widgetsview");var b=null;if(a.isVisible()){b=a.getLayout().getActiveItem()}else{b=c.getLayout().getActiveItem()}return b},frameClickedWidgetInstance:function(b,a){var c=a.get("uniqueId");if(c){Ext.getCmp(c).el.frame("#f00")}}});Ext.define("Ozone.components.launchMenu.LaunchMenu",{extend:"Ozone.components.window.ModalWindow",alias:"widget.launchMenu",closeAction:"hide",modal:true,modalAutoClose:true,shadow:false,ui:"widget-launcher",dashboardContainer:null,closable:true,preventHeader:true,iconCls:"widget-launcher-header-icon",resizable:false,draggable:true,mouseDownCounter:0,dontLoadWidgetStore:false,launchBtnCfg:{xtype:"button",text:"Launch",cls:"launch-btn",itemId:"launch"},initComponent:function(){var a=this;this.widgetStore=Ext.create("Ozone.data.WidgetStore");this.widgetStore.proxy.extraParams={visible:true,widgetTypes:["standard"]};this.widgetStore.on({datachanged:{fn:function(d,c,j,b,g){for(var e=0;e<c.length;e++){var h=this.dashboardContainer.widgetNames[c[e].data.widgetGuid];if(h){c[e].data.name=h}}},scope:this}});this.dashboardContainer.widgetStore.on({load:{fn:function(d,c,g,b,e){if(!this.dontLoadWidgetStore){this.widgetStore.widgetFiltered=false}},scope:this}});this.openedWidgetStore=Ext.create("Ozone.data.WidgetStore");this.widgetStore.on({datachanged:{fn:function(b,c){this.openedWidgetStore.clearFilter();this.openedWidgetStore.filter({filterFn:function(e,g){var d=e.get("widgetGuid");return b.findExact("widgetGuid",d)>-1}})},scope:this}});this.favStore=Ext.create("Ozone.data.WidgetStore",{sortOnFilter:false});this.favStoreUnFiltered=Ext.create("Ozone.data.WidgetStore");this.favStore.on({add:{fn:function(d,c,e,h){for(var g=0;g<c.length;g++){var b=c[g];if(this.favStoreUnFiltered.findExact("widgetGuid",b.get("widgetGuid"))<0){if(this.widgetStore.widgetFiltered){this.favStoreUnFiltered.add(b)}else{this.favStoreUnFiltered.insert(e+g,b)}}}},scope:this},remove:{fn:function(d,b,e,g){var c=this.favStoreUnFiltered.findExact("widgetGuid",b.get("widgetGuid"));if(c>-1){this.favStoreUnFiltered.removeAt(c)}},scope:this},clear:{fn:function(b,c){if(!this.widgetStore.widgetFiltered){this.favStoreUnFiltered.removeAll()}},scope:this}});this.widgetStore.on({datachanged:{fn:function(b,c){this.favStore.clearFilter();this.favStore.filter({filterFn:function(e,g){var d=e.get("widgetGuid");return b.findExact("widgetGuid",d)>-1}})},scope:this},clear:{fn:function(b,c){this.favStore.clearFilter();this.favStore.filter({filterFn:function(d,e){return false}})},scope:this}});Ext.apply(this,{layout:{type:"vbox",align:"stretch"},dockedItems:[{xtype:"toolbar",dock:"left",itemId:"advSearchBtnToolbar",cls:"advSearchBtnToolbar",layout:{type:"vbox",align:"stretchmax",pack:"center",clearInnerCtOnLayout:true},listeners:{afterlayout:{fn:function(b){Ext.FocusManager.unsubscribe(b)},scope:this}},items:[{xtype:"button",itemId:"advSearchBtn",cls:"advSearchBtn",iconCls:"advSearchBtnIcon",enableToggle:true,toggleHandler:function(c,g){this.openOrCloseAdvancedSearch(g);if(g){var d=this.searchPanel.down("#searchbox");var e=d.getFocusEl().dom;e.focus()}},scope:this}]}],items:[{xtype:"panel",layout:{type:"hbox",align:"stretchmax"},itemId:"infoPanel",cls:"info-panel",region:"north",padding:"10",items:[{xtype:"panel",itemId:"imagePanel",cls:"image-panel",items:[{xtype:"image",cls:"widget-icon",region:"west",itemId:"widgetImg",src:Ext.BLANK_IMAGE_URL,listeners:{afterrender:function(b){b.el.on({error:function(c,e,d){e.src="themes/common/images/settings/WidgetsIcon.png"}})}}},a.launchBtnCfg]},{xtype:"container",layout:{type:"vbox",align:"stretch"},flex:1,cls:"infoCenter",itemId:"infoCenter",items:[{xtype:"component",itemId:"htmlPanel",cls:"htmlPanel",flex:1},{xtype:"checkbox",hidden:true,itemId:"intentCheckBox",cls:"intentCheckBox",boxLabel:"Remember this decision"}]},{xtype:"panel",itemId:"toolbar-panel",cls:"toolbar-panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"toolbar",cls:"viewSwitch",flex:1,layout:"auto",items:[{xtype:"button",itemId:"iconViewBtn",cls:"iconViewBtn",text:null,scale:"large",iconCls:"iconViewBtnIcon-down",iconAlign:"top",handler:function(c,d){this.showIconView(c)},scope:this},{xtype:"button",itemId:"gridViewBtn",cls:"gridViewBtn",text:null,scale:"large",iconCls:"gridViewBtnIcon-up",iconAlign:"top",handler:function(c,d){this.showGridView(c)},scope:this}]},{xtype:"slider",itemId:"iconSlider",cls:"iconSlider",value:64,flex:1,increment:1,minValue:24,maxValue:128,plugins:[new Ozone.components.focusable.Focusable()],onKeyDown:function(d){var c=this,b,g;if(c.disabled||c.thumbs.length!==1){d.preventDefault();return}b=d.getKey();switch(b){case d.UP:case d.RIGHT:d.stopEvent();g=d.ctrlKey?c.maxValue:c.getValue(0)+c.keyIncrement;c.setValue(0,g,undefined,true);break;case d.DOWN:case d.LEFT:d.stopEvent();g=d.ctrlKey?c.minValue:c.getValue(0)-c.keyIncrement;c.setValue(0,g,undefined,true);break;default:break}},listeners:{change:function(e,g,b,c){var d={".thumb-wrap":{width:g,height:g},".":Ext.isIE7?{width:g}:null};a.view.setItemSize(d)},scope:this}},{xtype:"toolbar",cls:"searchBar",flex:1,items:[{xtype:"searchbox",itemId:"searchbox",flex:1,emptyText:"Search title",dynamic:true,listeners:{searchChanged:function(b,c){if(!this.dontLoadWidgetStore){if(c==""){this.widgetStore.widgetFiltered=false}else{this.widgetStore.widgetFiltered=true}this.searchPanel.search({customWidgetName:c})}},scope:this}}]}]}]},{xtype:"widgetviewcontainer",itemId:"view",cls:"widgetviewcontainer",region:"center",flex:1,widgetStore:this.widgetStore,openedWidgetStore:this.openedWidgetStore,listeners:{itemkeydown:{fn:function(d,c,h,e,b,g){if(b.getKey()==b.F){this.carousel.addWidget(c)}},scope:this},render:{fn:function(b){var c=new Ext.dd.DropZone(b.getEl(),{ddGroup:"carousel",onContainerOver:function(g,h,d){return Ext.dd.DropZone.prototype.dropAllowed},onContainerDrop:function(g,h,d){a.carousel.removeWidget(d.widgetModel)}})},scope:this}},plugins:{ptype:"instancevariablizer",container:a}},{xtype:"carousel",region:"south",id:"launchMenu-carousel",itemId:"carousel",height:96,store:a.favStore,plugins:{ptype:"instancevariablizer",container:a}}]});this.callParent();this.addEvents("noWidgetLaunched","refresh");a.carousel.on("render",function(c){var b=c.down("#carouselView");var d=new Ext.dd.DropZone(c.getEl(),{ddGroup:"widgets",getTargetFromEvent:function(g){return g.getTarget(b.itemSelector)},onNodeEnter:function(k,g,j,h){},onNodeOut:function(k,g,j,h){Ext.fly(k).removeCls(["drag-cls","x-view-drop-indicator-right","x-view-drop-indicator-left"])},onNodeOver:function(m,g,k,h){var j=b.getDropPoint(k,m,g);if(j=="before"){Ext.fly(m).replaceCls("x-view-drop-indicator-right","x-view-drop-indicator-left")}else{Ext.fly(m).replaceCls("x-view-drop-indicator-left","x-view-drop-indicator-right")}return Ext.dd.DropZone.prototype.dropAllowed},onNodeDrop:function(p,g,n,k){var m=b.getDropPoint(n,p,g);if(b==k.view){k.sourceStore.remove(k.widgetModel)}var q=b.store.findExact("widgetGuid",k.widgetModel.get("widgetGuid"));if(q>-1){b.store.removeAt(q)}var j=b.indexOf(p);var h=b.store.getAt(j);if(m=="after"){j++}b.store.insert(j,[k.widgetModel]);k.view.fireEvent("drag",b,h,p,j,n);return true},onContainerOver:function(h,j,g){return Ext.dd.DropZone.prototype.dropAllowed},onContainerDrop:function(h,j,g){a.carousel.addWidget(g.widgetModel)}});b.on({itemkeydown:{fn:function(h,g,m,j,e,k){if(e.getKey()==e.D||e.getKey()==e.DELETE){h.store.remove(g);if(h.store.getCount()>0){h.selModel.select(0)}else{a.el.focus()}}},scope:this}})});this.on({render:{fn:function(b){a.createSidePanel()},scope:this},afterrender:{fn:function(b){this.setupCircularFocus()},scope:this},close:{fn:this.onClose,scope:this},beforeshow:{fn:function(b){this.setSize(document.body.clientWidth*0.55,document.body.clientHeight*0.7);Ext.EventManager.un(window,"beforeunload",this.saveLauncherStateSync,this);Ext.EventManager.on(window,"beforeunload",this.saveLauncherStateSync,this)},scope:this},invalidDrop:{fn:function(){this.fireEvent("noWidgetLaunched")},scope:this},modalAutoClose:{fn:function(){this.fireEvent("noWidgetLaunched")},scope:this},selectionchange:{fn:function(d,c,e){if(c.length>0){var b=c[0];this.updateInfoPanel(b,(e&&e.favorite)||this.favStore.findRecord("widgetGuid",b.get("widgetGuid")))}},scope:this},itemdblclick:{fn:this.itemDblClick,scope:this},itemkeydown:{fn:this.itemKeyDown,scope:this}});a.on("afterrender",a.enableDraggingOut,a,{single:true})},refreshOpenedWidgets:function(){if(this.dashboardContainer.activeDashboard!=null){this.view.setOpenedWidgets(this.dashboardContainer.activeDashboard.stateStore)}},refresh:function(){if(this.rendered){this.showIntentCheckBox=false;this.clearSelections(true);this.showOpenedWidgetsView(false);this.dashboardContainer.widgetStore.on({load:{fn:function(c,b,e,a,d){if(this.searchPanel!=null){this.searchPanel.search();this.searchPanel.refresh();this.openOrCloseAdvancedSearch(false,true)}this.refreshOpenedWidgets();this.loadLauncherState()},scope:this,single:true}});this.dashboardContainer.widgetStore.load();this.updateInfoPanel(null,false,true);this.fireEvent("refresh")}else{this.dashboardContainer.widgetStore.load()}},enableDraggingOut:function(){var c,b=false;function a(){if(this.isDragging===true){this.close();if(!c.groups.widgets){b=true;c.addToGroup("widgets")}this.dashboardContainer.activeDashboard.enableWidgetDragAndDrop()}}this.on("dragStarted",function(d){c=d;var e=c.dragData.widgetModel;var g=e.get("disabled");this.isDragging=true;if(!g){Ext.getDoc().on("mousemove",a,this,{delegate:".x-mask"})}},this);this.on("dragEnd",function(d){if(b){b=false;c.removeFromGroup("widgets")}Ext.getDoc().un("mousemove",a,this,{delegate:".x-mask"});this.isDragging=false;this.dashboardContainer.activeDashboard.disableWidgetDragAndDrop()},this)},launchWidget:function(c,m,h){var n=this.dashboardContainer;var a=c.get("widgetGuid");var j=true;var k=n.widgetStore.queryBy(function(p,q){return p.data.widgetGuid==a});if(k&&k.getCount()>0){var d=k.get(0);if(d.get("disabled")!==true){if(d.get("singleton")){var b=n.storeContains(a);if(b){n.activeDashboard.handleAlreadyLaunchedWidget(b.data);j=false}}else{if(c.data.alreadyOpenedWidget){n.activeDashboard.handleAlreadyLaunchedWidget(c.data);j=false}}}else{Ozone.Msg.alert(Ozone.util.ErrorMessageString.errorTitle,Ozone.util.ErrorMessageString.widgetNotApproved,null,null,null,n.modalWindowManager);j=false}if(j){if(n.activeDashboard.configRecord.get("locked")){var g=d.get("uniqueId")||guid.util.guid();n.activeDashboard.panes[0].launchFloatingWidget(d,null,null,g)}else{m.stopEvent();var e=n.launchWidgets(d,m&&m.getKey()===Ext.EventObject.ENTER)}}}this.close()},itemDblClick:function(b,a,e,c,d){this.launchWidget(a,d)},updateInfoPanel:function(c,d,h,b,n){var w=this,e=w.down("#infoPanel"),k=e.getComponent("infoCenter"),g=e.getComponent("imagePanel"),a=g.getComponent("launch"),v=e.down("#htmlPanel"),p=e.down("#intentCheckBox"),m=g.getComponent("widgetImg"),u=function(y,x){w.launchWidget(c,x)};if(a){g.remove(a)}if(c==null){c=Ext.create("Ozone.data.WidgetDefinition",{name:"Please select a widget below",description:"Double click a widget to launch"})}var r=c.get("disabled");if(r){g.addCls("widget-disabled");k.addCls("widget-disabled")}else{g.removeCls("widget-disabled");k.removeCls("widget-disabled")}var t=c.get("description")!=null?c.get("description"):"";var j='<h1 class="launchMenuTitle">'+Ext.htmlEncode(c.get("name"))+"</h1><p>"+Ext.htmlEncode(t)+"</p>";m.setSrc(c.get("image")?c.get("image"):"images/launch-menu/launch-infoPanel-default.png");v.el.update(j);if(this.showIntentCheckBox){p.show()}else{p.hide()}if(n!==undefined){p.setValue(n)}var q=Ext.apply({},w.launchBtnCfg);if(h){q.disabled=true}g.add(Ext.applyIf({handler:u},q))},itemClick:function(b,a,g,c,e,d){this.updateInfoPanel(a,(d&&d.favorite)||this.favStore.findRecord("widgetGuid",a.get("widgetGuid")))},itemKeyDown:function(b,a,g,c,e,d){if(e.getKey()===Ext.EventObject.ENTER){e.preventDefault();this.launchWidget(a,e)}},loadFavStore:function(c){var g=this,h=g.favStore,e=[];c=Ext.JSON.decode(c);e=c.favStore||[];h.removeAll();for(var b=0;b<e.length;b++){var d=e[b];var a=g.dashboardContainer.widgetStore.findRecord("widgetGuid",d);if(a&&a.get("visible")&&!h.findRecord("widgetGuid",d)){h.add(a)}}if(h.isFiltered()){h.filter(g.favStore.filters.items)}g.favStoreLoaded=true},getGuidList:function(c){var a=[];var b=c.getRange();for(var d=0;d<b.length;d++){a.push(b[d].data.widgetGuid)}return a},saveLauncherStateSync:function(){this.saveLauncherState(true)},saveLauncherState:function(g){var e=this;if(e.favStoreLoaded){var d=e.getGuidList(e.favStoreUnFiltered);var j={favStore:d};Ozone.pref.PrefServer.setUserPreference({namespace:"owf",name:"widget_launcher",async:!g,value:Ozone.util.toString(j),onSuccess:function(k){},onFailure:function(){}})}if(!this.widgetStore.widgetFiltered){var c=[];var a=e.widgetStore.getRange();for(var b=0;b<a.length;b++){var h={guid:a[b].data.widgetGuid};if(a[b].data.name!==a[b].data.originalName){h.name=a[b].data.name}c.push(h)}Ozone.pref.PrefServer.updateAndDeleteWidgets({widgetsToUpdate:c,widgetGuidsToDelete:[],updateOrder:true,async:!g,onSuccess:function(k){},onFailure:function(){}})}},loadLauncherState:function(){var a=this;Ozone.pref.PrefServer.getUserPreference({namespace:"owf",name:"widget_launcher",onSuccess:function(b){if(b.value){a.loadFavStore(b.value)}else{a.favStoreLoaded=true}},onFailure:function(c,b){a.favStoreLoaded=true}})},clearSelections:function(a){if(this.view){this.view.deselectAll(a)}if(this.searchPanel){this.searchPanel.clearAllFilters(a)}if(this.carousel){this.carousel.clearSelection(a)}var b=this.down("#searchbox");if(b){b.reset()}var c=this.down("#intentCheckbox");if(c){c.reset()}},createSidePanel:function(){this.searchPanel=Ext.widget("advancedsearchpanel",{itemId:"search-panel",width:document.body.clientWidth*0.15,height:document.body.clientHeight*0.65,renderTo:this.el,dashboardContainer:this.dashboardContainer,widgetStore:this.widgetStore,hidden:true,listeners:{beforeshow:{fn:function(a){a.setSize(document.body.clientWidth*0.15,document.body.clientHeight*0.65)},scope:this},show:{fn:function(a){a.alignTo(this,"tr-tl",[0,10])},scope:this}}});this.searchPanel.show();this.searchPanel.alignTo(this,"tr-tl",[0,10])},openOrCloseAdvancedSearch:function(b,e){var d=this;if(!d.searchPanel){d.createSidePanel()}else{if(b){d.searchPanel.show();this.searchPanel.alignTo(this,"tr-tl",[0,10])}else{d.searchPanel.hide()}}var c=this.down("#advSearchBtn");c.toggle(b,true);var a=this.down("#searchbox");if(b){c.removeCls("advSearchBtn");c.addCls("advSearchBtn-clicked");if(a.getValue()!=""){a.reset();if(!e){a.onClear()}}a.disable()}else{c.removeCls("advSearchBtn-clicked");c.addCls("advSearchBtn");a.enable();d.searchPanel.clearAllFilters();if(!e){d.searchPanel.search()}}},onEsc:function(a,b){this.callParent(arguments);this.fireEvent("noWidgetLaunched")},showOpenedWidgetsView:function(a){this.view.showOpenedWidgetsView(a)},showIconView:function(a){var c=this.down("#view");c.showIconOrGridView(true);var d=this.down("#iconSlider");d.show();a=a||this.down("#iconViewBtn");a.setIconCls("iconViewBtnIcon-down");this.down("#gridViewBtn").setIconCls("gridViewBtnIcon-up")},showGridView:function(a){var c=this.down("#view");c.showIconOrGridView(false);var d=this.down("#iconSlider");d.hide();a=a||this.down("#gridViewBtn");a.setIconCls("gridViewBtnIcon-down");this.down("#iconViewBtn").setIconCls("iconViewBtnIcon-up")},getIntentCheckBoxValue:function(){var a=this.down("#intentCheckBox");return a.getValue()},disableWidgetStoreLoading:function(a){this.dontLoadWidgetStore=a;if(this.searchPanel!=null){this.searchPanel.dontLoadWidgetStore=a}},setupCircularFocus:function(){var a=this.down("#advSearchBtn");var b=Ext.DomHelper.append(this.el,'<div class="focus-catch" tabindex="0"></div>',true);this.setupFocus(a.getFocusEl(),b)},onClose:function(){this.openOrCloseAdvancedSearch(false,true);this.saveLauncherState();this.widgetStore.removeAll();this.openedWidgetStore.removeAll();this.favStore.removeAll();this.carousel.cleanUpScrollerTasks();Ext.EventManager.un(window,"beforeunload",this.saveLauncherStateSync,this)}});Ext.define("Ozone.components.pane.Pane",{extend:"Ext.panel.Panel",alias:["widget.pane","widget.Ozone.components.pane.Pane"],plugins:[new Ozone.plugins.pane.Pane()],activeWidget:null,id:null,paneGuid:null,dashboard:null,type:null,afterWidgetLaunch:function(){},launchWidget:function(b,a,g,d,c,e){},maximizeCollapseWidget:function(a){},minimizeExpandWidget:function(a){},moveWidgetUp:function(a){},moveWidgetRight:function(a){},moveWidgetDown:function(a){},moveWidgetLeft:function(a){},initComponent:function(){var g=this,d=Ext.StoreManager.lookup("widgetStore"),h;g.id=g.paneGuid=guid.util.guid();g.statePositionCount=0;g.widgets=g.widgets||[];g.defaultSettings=g.defaultSettings||{};g.componentCls="pane "+g.xtype;h=g.widgets;g.widgets=[];for(var c=0,a=h.length;c<a;c++){var b=h[c];var e=d.getById(h[c].widgetGuid);if(e){b.singleton=e.get("singleton");b.background=e.get("background");g.widgets.push(b)}}g.stateStore=Ext.create("Ozone.data.StateStore",{storeId:g.paneGuid,data:g.widgets});g.stateStore.on({add:{fn:g.onStoreAdd,scope:g},remove:{fn:g.onStoreRemove,scope:g}});g.addEvents(OWF.Events.Widget.BEFORE_LAUNCH,OWF.Events.Widget.AFTER_LAUNCH);g.enableBubble([OWF.Events.Widget.BEFORE_LAUNCH,OWF.Events.Widget.AFTER_LAUNCH]);g.on(OWF.Events.Widget.AFTER_LAUNCH,g.afterWidgetLaunch,g);g.on("destroy",g.onPaneDestroy,g);g.callParent(arguments)},afterRender:function(){this.el.set({tabIndex:-1});this.dashboard=this.up("dashboard");this.callParent(arguments)},onPaneDestroy:function(){this.stateStore.clearListeners();this.clearWidgets()},clearWidgets:function(d){var a=this.stateStore.data.items;for(var b=a.length-1;b>=0;b--){var e=a[b];var c=Ext.getCmp(e.get("uniqueId"));if(c&&d!==false){c.destroy()}else{if(c&&c.floatingWidget!==true){c.destroy()}}}},getWidgets:function(){var d=Ext.clone(this.items.items),c=this.stateStore;for(var b=0,a=c.getCount();b<a;b++){if(c.getAt(b).data.floatingWidget){d.push(Ext.getCmp(c.getAt(b).data.uniqueId))}}return d},getStatesOfAllWidgets:function(){var d=[],c=this.getWidgets();for(var b=0,a=c.length;b<a;b++){d.push(c[b].getState())}for(var b=0,a=this.stateStore.getCount();b<a;b++){if(this.stateStore.getAt(b).get("background")){d.push(this.stateStore.getAt(b).data)}}return d},launchFloatingWidget:function(d,k,j,g,a,e){var h=this,m,c;m=h.createWidgetConfig(d,g,a);m=Ext.Object.merge(m,{width:d.get("width"),height:d.get("height"),x:k?k:d.get("x"),y:j?j:d.get("y"),active:d.get("active")||true,floatingWidget:!e});if(!d.data.uniqueId){if(h.defaultSettings&&h.defaultSettings.widgetStates&&h.defaultSettings.widgetStates[m.widgetGuid]){var b=h.defaultSettings.widgetStates[m.widgetGuid];m=Ext.Object.merge(m,{width:b.width,height:b.height});if(!k&&!j){m=Ext.Object.merge(m,{x:b.x,y:b.y})}}}m.renderTo=e?h.body:h.dashboard.body;c=Ext.widget("widgetwindow",m);!e&&this.dashboard.dashboardContainer.floatingWidgetManager.register(c);c.on("statesave",function(p,n){this.defaultSettings.widgetStates=this.defaultSettings.widgetStates||{};this.defaultSettings.widgetStates[n.widgetGuid]={x:p.x,y:p.y,height:n.height,width:n.width,timestamp:Ext.Date.now()}},this);if(e){h.createTaskbarComponent(c);if(!h._launchingPreviouslyOpenedWidgets){c.show()}else{h._widgetCmps[c.id]=c}}else{this.dashboard.dashboardContainer.floatingWidgetManager.register(c);c.show();c.model.get("minimized")&&c.minimize()}return c.deferred.promise()},launchPreviouslyOpenedWidgets:function(){var a;this._launchingPreviouslyOpenedWidgets=true;a=this.launchWidgets(this.stateStore.data.items);delete this._launchingPreviouslyOpenedWidgets;return a},launchWidgets:function(j,b,h,g){var d,e=[];if(!j){return}j=[].concat(j);b=b>0?b:null;h=h>0?h:null;for(var c=0,a=j.length;c<a;c++){d=j[c];d=d.isModel?d:Ext.create("Ozone.data.State",d);if(this.fireEvent(OWF.Events.Widget.BEFORE_LAUNCH,this,d)!==false){if(d.get("floatingWidget")){e.push(this.launchFloatingWidget(d,b,h,null,null,g))}else{e.push(this.launchWidget(d,b,h,null,null,g))}Ext.isNumber(g)&&g++}}return e},activateWidget:function(b,a,c){b.focus(false,false,a,c);this.dashboard.updateActiveWidget(b);return true},createWidgetConfig:function(a,d,c){var b=this,e;d||(d=a.get("uniqueId")||guid.util.guid());OWF.Container.State.registerHandler(d);e={id:d,itemId:d,isWidget:true,model:a,pane:b,dashboard:b.dashboard,paneGuid:b.paneGuid,dashboardGuid:b.dashboard.id,uniqueId:d,universalName:a.get("universalName"),widgetGuid:a.get("widgetGuid"),widgetStateContainer:this.widgetStateContainer,name:a.get("name"),title:a.get("name"),icon:encodeURI(decodeURI(a.get("headerIcon"))),singleton:a.get("singleton"),background:a.get("background"),statePosition:++this.statePositionCount,launchData:c||a.get("launchData")||null,intentConfig:a.get("intentConfig")||null,deferred:$.Deferred(),listeners:{afterrender:{fn:b.onWidgetRender,options:{single:true}},beforeclose:{fn:b.onBeforeClose,scope:b}}};return e},cloneWidgetDataForTransfer:function(c){var b=Ext.clone(c.model.data),a=this.dashboard.widgetStore.findRecord("widgetGuid",c.model.get("widgetGuid"));b.name=c.title||a.get("name");b.uniqueId=c.id;b.intentConfig=c.intentConfig;b.launchData=c.launchData||null;return b},reorderWidget:function(e,b,c){var d=this,a=d.cloneWidgetDataForTransfer(e);e.on("destroy",function(){d._reorderingWidgets=true;d.launchWidgets(a,null,null,b);delete d._reorderingWidgets});e.destroy()},onBeforeClose:function(a){if(this.dashboard.configRecord.get("locked")&&!a.floatingWidget){Ozone.Msg.alert(Ozone.layout.DialogMessages.dashboardLockAlertTitle,Ozone.layout.DialogMessages.dashboardLockAlert,null,null,null,this.dashboard.dashboardContainer.modalWindowManager);return false}return true},onWidgetRender:function(){this.pane.fireEvent(OWF.Events.Widget.AFTER_LAUNCH,this,this.model,false);this.add({xtype:"widgetiframe",iframeProperties:OWF.Container.Eventing.getIframeProperties(this.model.get("url"),this.id,this.model.data,this.pane.type,this.launchData,this.dashboard.configRecord.get("locked"))});this.deferred.resolve(true);if(!(this.model instanceof Ozone.data.State)){this.focus(false,false,false,true)}},getBubbleTarget:function(){return this.dashboard},onStoreRemove:function(a,b){this.dashboard.hasChanged=true;this.dashboard.stateStore.remove(b)},onStoreAdd:function(a,b){this.dashboard.hasChanged=true;this.dashboard.stateStore.add(b)},focus:function(){this.enableDrop();this.callParent(arguments)},blur:function(){this.disableDrop()},shim:function(){if(!this.shimEl){this.shimEl=Ext.DomHelper.append(this.el,"<div></div>",true)}this.shimEl&&this.shimEl.addCls("paneshim")},unshim:function(){this.shimEl&&this.shimEl.removeCls("paneshim")},enableDrop:function(){this.shimEl&&this.shimEl.addCls("highlight-dashboard-designer-drop")},disableDrop:function(){this.shimEl&&this.shimEl.removeCls("highlight-dashboard-designer-drop")},enableWidgetMove:function(){this.shim();this.el.on("mousemove",this.enableDrop,this);this.el.on("mouseout",this.disableDrop,this)},disableWidgetMove:function(){this.unshim();this.disableDrop();this.el.un("mousemove",this.enableDrop,this);this.el.un("mouseout",this.disableDrop,this)},moveFloatingWidgetUp:function(a){a&&a.moveUp()},moveFloatingWidgetRight:function(a){a&&a.moveRight(a.renderTo.getWidth())},moveFloatingWidgetDown:function(a){a&&a.moveDown(a.renderTo.getHeight())},moveFloatingWidgetLeft:function(a){a&&a.moveLeft()}});Ext.define("Ozone.components.pane.DesktopPane",{extend:"Ozone.components.pane.Pane",alias:["widget.desktoppane","widget.Ozone.components.pane.DesktopPane"],plugins:[new Ozone.plugins.pane.DesktopPane()],activeWidget:null,componentCls:"desktoppane pane",type:"desktop",getTaskBar:function(){return this.getDockedItems('toolbar[dock="bottom"]')[0]},initComponent:function(){var a=this;this.dockedItems=[{xtype:"widgettoolbar",itemId:"taskbar",cls:"taskbar",dock:"bottom",layout:{type:"hbox",align:"stretch",autoSize:false,clearInnerCtOnLayout:true,overflowHandler:"Scroller",scollerResetPerformed:false},items:[],listeners:{resize:{fn:a.attemptScrollerReset,scope:a}}}];a.callParent(arguments)},getWidgets:function(){var d=[],c=this.stateStore;for(var b=0,a=c.getCount();b<a;b++){d.push(Ext.getCmp(c.getAt(b).data.uniqueId))}return Ext.Array.clean(d)},activateWidget:function(b,a,c){if(b.rendered===false||(b.rendered===true&&b.floating)){b.minimized===true?b.restoreFromMinimize(a):b.focus(false,false,a,c)}this.dashboard.updateActiveWidget(b);return true},launchPreviouslyOpenedWidgets:function(){var h,j,g;this._launchingPreviouslyOpenedWidgets=true;this._widgetCmps={};this._sortedUniqueIds=[];if(this.widgets.length>0){this.stateStore.sort("zIndex","ASC");for(var d=0,a=this.stateStore.getCount();d<a;d++){var c=this.stateStore.getAt(d);if(!c.get("floatingWidget")&&!c.get("background")){this._sortedUniqueIds.push(c.get("uniqueId"))}}this.stateStore.sort("statePosition","ASC")}h=this.launchWidgets(this.stateStore.data.items);for(var d=0,a=this._sortedUniqueIds.length;d<a;d++){var b=Ext.getCmp(this._sortedUniqueIds[d]);if(!b){continue}if(d===0){j=b}if(g){g.on("show",function(k){return function(){e(k)}}(b),null,{single:true})}g=b}if(j){e(j)}delete this._sortedUniqueIds;delete this._widgetCmps;delete this._launchingPreviouslyOpenedWidgets;return h;function e(k){k.show();if(k.model.get("minimized")){k.minimize()}else{if(k.model.get("maximized")){k.maximize()}}}},launchWidget:function(b,a,e,d,c){this.launchFloatingWidget(b,a,e,d,c,true)},createTaskbarComponent:function(b){var a=this.getTaskBar().add({xtype:"widgettoolbaritem",widget:b});b.fireEvent("toolbaritem:created",a)},attemptScrollerReset:function(c){if(!c.layout.scollerResetPerformed){var a=c.layout.overflowHandler;if(a!=undefined){var b=a.afterScroller;var d=a.beforeScroller;if((d!=undefined)&&(b!=undefined)){if((!d.isDisplayed())&&(!b.isDisplayed())){a.scrollTo(0,false);c.layout.scollerResetPerformed=true}}else{a.on("scroll",function(h,g,e){this.layout.scollerResetPerformed=false},c)}}}},maximizeCollapseWidget:function(a){a.minimized?a.restoreFromMinimize():a.maximize()},minimizeExpandWidget:function(a){a.maximized?a.restore():a.minimize()},moveWidgetUp:function(a){a&&a.moveUp()},moveWidgetRight:function(a){a&&a.moveRight(a.renderTo.getWidth())},moveWidgetDown:function(a){a&&a.moveDown(a.renderTo.getHeight())},moveWidgetLeft:function(a){a&&a.moveLeft()}});Ext.define("Ozone.components.pane.AccordionPane",{extend:"Ozone.components.pane.Pane",alias:["widget.accordionpane","widget.Ozone.components.pane.AccordionPane"],plugins:[new Ozone.plugins.pane.AccordionPane()],activeWidget:null,defaults:{xtype:"widgetpanel",layout:"fit",border:true},layout:{type:"pinnableaccordion",animate:false,titleCollapse:false,fill:true,multi:true},type:"accordion",activateWidget:function(b,a,c){b.rendered?b.expand():b.show();b.focus(false,false,a,c);this.dashboard.updateActiveWidget(b);return true},launchWidget:function(c,j,h,e,a,d){var g=this,k,b;k=g.createWidgetConfig(c,e,a);k=Ext.Object.merge(k,{height:c.get("height"),zIndex:c.get("zIndex"),active:c.get("active"),autoHeight:false,resizable:false,draggable:false,border:true,animCollapse:false,split:true,closable:true,collapsed:false});b=Ext.isNumber(d)?g.insert(d,k):g.add(k);b.on("statesave",function(n,m){this.defaultSettings.widgetStates=this.defaultSettings.widgetStates||{};this.defaultSettings.widgetStates[m.widgetGuid]={timestamp:Ext.Date.now()}},this);b.fireEvent("statesave",b,{widgetGuid:b.widgetGuid});return b.deferred.promise()},afterWidgetLaunch:function(a,b){if(b.get("collapsed")){a.collapse()}},maximizeCollapseWidget:function(a){a.collapse()},minimizeExpandWidget:function(a){a.expand()},moveWidgetUp:function(e){var c=this.items.getCount(),d;for(var b=0,a=c;b<a;b++){if(e===this.items.items[b]){d=b;break}}if(d!==0){this.reorderWidget(e,d-1,d)}},moveWidgetDown:function(e){var c=this.items.getCount(),d;for(var b=0,a=c;b<a;b++){if(e===this.items.items[b]){d=b;break}}if(d!==(c-1)){this.reorderWidget(e,d+1,d)}}});Ext.define("Ozone.components.layout.PortalAnchor",{extend:"Ext.layout.container.Anchor",alias:["layout.portalanchor"],isValidParent:function(b,c,a){var d=b.el?b.el.dom:Ext.getDom(b);if(d&&c&&c.dom){return(d.parentNode==(c.dom||c))}return false}});Ext.define("Ozone.components.pane.PortalPane",{extend:"Ozone.components.pane.Pane",alias:["widget.portalpane","widget.Ozone.components.pane.PortalPane"],plugins:[new Ozone.plugins.pane.PortalPane()],activeWidget:null,defaults:{xtype:"widgetportlet"},componentCls:"portalpane pane",autoHeight:true,autoScroll:true,type:"portal",widgetCls:"x-portlet",layout:"portalanchor",activateWidget:function(b,a,c){b.rendered?b.expand():b.show();b.focus(false,false,a,c);this.dashboard.updateActiveWidget(b);return true},launchWidget:function(d,k,j,g,a,e){var h=this,m,c;m=h.createWidgetConfig(d,g,a);m=Ext.Object.merge(m,{height:d.get("height"),width:"100%",x:0,y:0,zIndex:0,active:d.get("active"),maximized:false,pinned:false,collapsed:false});if(!d.data.uniqueId){if(h.defaultSettings&&h.defaultSettings.widgetStates&&h.defaultSettings.widgetStates[m.widgetGuid]){var b=h.defaultSettings.widgetStates[m.widgetGuid];m=Ext.Object.merge(m,{width:b.width,height:b.height})}}c=Ext.isNumber(e)?h.insert(e,m):h.add(m);c.on("statesave",function(p,n){this.defaultSettings.widgetStates=this.defaultSettings.widgetStates||{};this.defaultSettings.widgetStates[n.widgetGuid]={height:n.height,width:n.width,timestamp:Ext.Date.now()}},this);c.on({expand:h.layoutOnExpandCollapse,collapse:h.layoutOnExpandCollapse,destroy:h.layoutOnExpandCollapse,scope:h});c.fireEvent("statesave",c,{widgetGuid:c.widgetGuid,height:c.height,width:c.width});return c.deferred.promise()},afterWidgetLaunch:function(a,b){if(b.get("collapsed")){a.collapse()}},layoutOnExpandCollapse:function(){if(!this.destroying){this.doComponentLayout()}},maximizeCollapseWidget:function(a){a.toggleCollapse(true)},minimizeExpandWidget:function(a){a.toggleCollapse(true)},moveWidgetUp:function(e){var c=this.items.getCount(),d;for(var b=0,a=c;b<a;b++){if(e===this.items.items[b]){d=b;break}}if(d!==0){this.reorderWidget(e,d-1,d)}},moveWidgetDown:function(e){var c=this.items.getCount(),d;for(var b=0,a=c;b<a;b++){if(e===this.items.items[b]){d=b;break}}if(d!==(c-1)){this.reorderWidget(e,d+1,d)}}});Ext.define("Ozone.components.pane.TabbedPane",{extend:"Ozone.components.pane.Pane",alias:["widget.tabbedpane","widget.Ozone.components.pane.TabbedPane"],plugins:[new Ozone.plugins.pane.TabbedPane()],activeWidget:null,layout:"fit",componentCls:"tabbedpane pane",type:"tabbed",widgetCls:"x-portlet",initComponent:function(){var a=this;a.tabPanel=Ext.widget("widgettabpanel",{cls:"tab-dashboard-panel",enableTabScroll:true,layoutOnTabChange:true,deferredRender:true,defaults:{closable:true},autoScroll:false,border:false,split:false,activeTab:0,listeners:{add:a.onTabWidgetAdd,tabchange:{fn:function(c,b){if(b.getIframeEl()){a.activateWidget(b,false,true)}}},scope:a}});a.items=[a.tabPanel];a.callParent(arguments)},getWidgets:function(){var d=Ext.clone(this.tabPanel.items.items),c=this.stateStore;for(var b=0,a=c.getCount();b<a;b++){if(c.getAt(b).data.floatingWidget){d.push(Ext.getCmp(c.getAt(b).data.uniqueId))}}return d},activateWidget:function(b,a,c){this.tabPanel.setActiveTab(b);b.focus(false,false,a,c);this.dashboard.updateActiveWidget(b);return true},launchPreviouslyOpenedWidgets:function(){this._launchingPreviouslyOpenedWidgets=true;var a=this.launchWidgets(this.stateStore.data.items);delete this._launchingPreviouslyOpenedWidgets;this.tabPanel.setActiveTab(this.activeWidgetGuid);return a},launchWidget:function(c,j,h,e,a,d){var g=this,k,b;k=g.createWidgetConfig(c,e,a);k=Ext.Object.merge(k,{xtype:"widgetpanel",x:0,y:0,zIndex:0,active:c.get("active"),layout:"fit",minimized:false,maximized:false,pinned:false,collapsed:false,frame:false,border:false,getFirstFocusableElement:function(){var m=this.ownerCt.getTabBar();if(m!=null){return m.getComponent(this.id)}},getBubbleTarget:function(){return g.tabPanel},listeners:{render:g.onTabWidgetRender}});if(k.active){g.activeWidgetGuid=k.id}b=Ext.isNumber(d)?g.tabPanel.insert(d,k):g.tabPanel.add(k);b.on("statesave",function(n,m){this.defaultSettings.widgetStates=this.defaultSettings.widgetStates||{};this.defaultSettings.widgetStates[m.widgetGuid]={timestamp:Ext.Date.now()}},this);g.tabPanel.setActiveTab(k.id);b.fireEvent("statesave",b,{widgetGuid:b.widgetGuid});return b.deferred.promise()},onTabWidgetRender:function(a){a.headers=[a.tab.header];a.addDocked({xtype:"focuscatch",dock:"top",itemId:"frontFocusCatch"})},onTabWidgetAdd:function(a,d,b){function c(){d.tearDownCircularFocus();d.tab.tearDownCircularFocus();d.tab.getComponent("focusCatch").destroy();this.setupTabbedCircularFocus(d)}if(a!==this.tabPanel){return}if(d.rendered){c.call(this)}else{d.on("afterrender",function(e){Ext.defer(c,1,this)},this)}},setupTabbedCircularFocus:function(b){var h=b.tab,d=h.getEl().select("*").filter(function(j){return j.dom.tabIndex===0}),c=Ext.get(h.getEl().select(".x-tool img").last().dom),e=Ext.get(h.getEl().select(".x-panel-header-text-container").first().dom),a=b.getComponent("frontFocusCatch").getEl(),g=b.getComponent("focusCatch").getEl();b.mon(a,"keydown",function(j){if(j.getKey()===j.TAB&&j.shiftKey===true){b.focusAndPrevent(j,c)}});b.mon(g,"keydown",function(j){if(j.getKey()===j.TAB&&j.shiftKey===false){b.focusAndPrevent(j,e)}});b.mon(e,"keydown",function(j){if(j.getKey()===j.TAB&&j.shiftKey===true){b.focusAndPrevent(j,g)}});b.mon(c,"keydown",function(j){if(j.getKey()===j.TAB&&j.shiftKey===false){b.focusAndPrevent(j,a)}});b.mon(a,"keypress",function(j){if(j.getKey()===j.TAB&&j.shiftKey===true){b.focusAndPrevent(j,c)}});b.mon(g,"keypress",function(j){if(j.getKey()===j.TAB&&j.shiftKey===false){b.focusAndPrevent(j,e)}});b.mon(e,"keypress",function(j){if(j.getKey()===j.TAB&&j.shiftKey===true){b.focusAndPrevent(j,g)}});b.mon(c,"keypress",function(j){if(j.getKey()===j.TAB&&j.shiftKey===false){b.focusAndPrevent(j,a)}})},moveWidgetLeft:function(e){var c=this.tabPanel.items.getCount(),d;for(var b=0,a=c;b<a;b++){if(e===this.tabPanel.items.items[b]){d=b;break}}if(d!==0){this.reorderWidget(e,d-1,d)}},moveWidgetRight:function(e){var c=this.tabPanel.items.getCount(),d;for(var b=0,a=c;b<a;b++){if(e===this.tabPanel.items.items[b]){d=b;break}}if(d!==(c-1)){this.reorderWidget(e,d+1,d)}}});Ext.define("Ozone.components.pane.FitPane",{extend:"Ozone.components.pane.Pane",alias:["widget.fitpane","widget.Ozone.components.pane.FitPane"],plugins:[new Ozone.plugins.pane.FitPane()],activeWidget:null,layout:"fit",componentCls:"fitpane pane",type:"fit",launchWidget:function(b,a,j,e,d,h){var c=this,g;g=c.createWidgetConfig(b,e,d);if(c.items.getCount()>0){if(h){this.launchFloatingWidget(b,null,null,e,d)}else{this.confirmReplaceWidget(g.id,g.title,function(){c.clearWidgets(false);Ext.defer(function(){c.addWidget(g,b)},200)})}}else{c.addWidget(g,b)}},addWidget:function(b,a){b=Ext.Object.merge(b,{xtype:"widgetpanel",x:0,y:0,zIndex:0,active:a.get("active"),layout:"fit",minimized:false,maximized:false,pinned:false,collapsed:false,frame:false,border:false,getFirstFocusableElement:function(){return this.getComponent("frontFocusCatch").getEl()},listeners:{render:function(c){c.addDocked({xtype:"focuscatch",dock:"top",itemId:"frontFocusCatch",listeners:{afterrender:{fn:function(d){d.mon(d.getEl(),"focus",function(){this.showFocusFrame(d.getEl())},this)},scope:this}}})}}});if(b.active){this.activeWidgetGuid=b.id}b.preventHeader=true;this.add(b)},confirmReplaceWidget:function(d,a,b){var c=this;Ext.widget("alertwindow",{title:"Warning",html:"<p>"+Ozone.layout.DialogMessages.fitPaneFullWarning+"</p><br/><p>Replace <i>"+Ext.htmlEncode(this.items.get(0).title)+"</i> with <i>"+Ext.htmlEncode(a)+"</i>?</p>",width:400,dashboardContainer:this.dashboard.dashboardContainer,okFn:b,cancelFn:function(){c.dashboard.activateWidget(d)}}).show()}});Ext.define("Ozone.components.SettingsWindow",{extend:"Ozone.components.window.ModalWindow",alias:["widget.settingswindow","widget.Ozone.components.SettingsWindow"],title:"Settings",id:"settingsWindow",cls:"system-window settings-window",iconCls:"settings-header-icon",ui:"system-window",layout:"auto",closable:false,resizable:false,draggable:false,modal:true,modalAutoClose:true,shadow:false,autoScroll:false,minToolsInRow:2,maxToolsInRow:5,items:[],plugins:new Ozone.components.keys.HotKeyComponent(Ozone.components.keys.HotKeys.SETTINGS),store:Ext.create("Ext.data.Store",{fields:["name","image","caption"],data:[{name:"Themes",image:"themes/common/images/settings/ThemeIcon.png"},{name:"Widgets",image:"themes/common/images/settings/WidgetsIcon.png"}]}),initComponent:function(){var a=this;this.view=Ext.create("Ozone.components.view.ToolDataView",{store:this.store,multiSelect:false,singleSelect:true,autoScroll:true,listeners:{refresh:{fn:this.setupModalFocus,scope:this},viewready:{fn:this.updateWindowSize,scope:this,single:true}}});this.items=[this.view];this.on("resize",this.center,this);this.callParent(arguments)},setupModalFocus:function(){var a=this.down("tooldataview");this.setupFocus(Ext.get(a.getNode(0)),Ext.get(a.getNode(a.store.getCount()-1)));Ext.defer(function(){Ext.get(a.getNode(0)).focus()},100)},callBtnHandler:function(b,a){switch(b){case"Themes":this.themeBtnHandler(a);break;case"Widgets":this.widgetsBtnHandler(a);break}this.close()},themeBtnHandler:function(a){Ext.create("Ozone.components.theming.ThemeSwitcherWindow",{ownerCt:this.dashboardContainer,dashboardContainer:this.dashboardContainer,height:650,width:810,title:Ozone.layout.ThemeSwitcherWindowConstants.title,modal:true,layout:"border",border:false,bodyBorder:false}).show()},widgetsBtnHandler:function(b){var c="manageWidgetsWindowId";var d=Ext.getCmp(c);if(!d){var a={id:c,title:Ozone.layout.tooltipString.carouselManageWidgetsTitle,ownerCt:this.dashboardContainer,dashboardContainer:this.dashboardContainer,constrain:Ext.isIE,constrainHeader:true,cls:"manageContainer",iconCls:"manageWidgetsContainer-header-icon",draggable:true,items:[{xtype:"owfManageWidgetsContainer",dashboardContainer:this.dashboardContainer,winId:c}],width:593,height:425};d=Ext.widget("managerwindow",a)}d.on("beforeclose",function(e){e.destroy()});d.show();Ext.defer(d.focus,500,d)},updateWindowSize:function(e){var j,d,c;c=e.getNode(0);if(!c){return}var b=Ext.get(c),g=b.getMargin("r"),a=e.getStore().getCount(),h=0;j=b.getWidth();if(a<this.minToolsInRow){h=this.minToolsInRow}else{if(a>this.maxToolsInRow){h=this.maxToolsInRow}else{h=a}}d=(j+g)*h;this.view.doComponentLayout(d)}});Ext.define("Ozone.components.view.ToolDataView",{extend:"Ozone.components.focusable.FocusableView",alias:"widget.tooldataview",dataField:null,overItemCls:"setting-over",trackOver:true,singleSelect:true,selectedItemCls:"setting-over",itemSelector:"div.tool",store:null,tpl:{},initComponent:function(){this.tpl=Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="tool" tabindex="0" data-qtip="{[Ext.htmlEncode(Ext.htmlEncode(values.name))]}">','<div class="thumb-wrap">','<img src="{image}" class="thumb">',"</div>",'<div class="thumb-text">{[this.encodeAndEllipsize(values.name)]}</div>',"</div>","</tpl>",{encodeAndEllipsize:function(a){return Ext.util.Format.htmlEncode(Ext.Array.map(Ext.Array.erase(/^([\S]+)\s*(.*)?/.exec(Ext.String.trim(a)),0,1),function(b){return Ext.util.Format.ellipsis(b,11)}).join(" "))}});this.on("itemclick",this.onClick);this.on("itemKeyDown",this.onKeyDown);this.on("itemmouseenter",function(b,a,h,d,j,g){var c=b.getSelectionModel();c.select([h])});this.callParent(arguments)},onClick:function(c,a,b){this.up().callBtnHandler(a.data.name,b);return true},onKeyDown:function(b,a,g,c,e,d){switch(e.getKey()){case e.ENTER:case e.SPACE:this.up().callBtnHandler(a.data.name,g,true);return true}}});Ext.define("Ozone.components.view.TagCloud",{extend:"Ozone.components.focusable.FocusableView",alias:"widget.tagcloud",cls:"tagCloud",minFont:0.8,maxFont:2.5,initComponent:function(){var a=this;if(a.store==null){a.store=Ext.create("Ext.data.Store",{fields:[{name:"tag"},{name:"uses",type:"int"}]})}a.minTagUses=a.store.min("uses");a.maxTagUses=a.store.max("uses");a.tpl=new Ext.XTemplate('<tpl for=".">','<div class="tag">','<span style="font-size:{[this.calculateFontSize(values)]}">{tag:htmlEncode}</span>',"</div>","</tpl>",{calculateFontSize:function(b){return this.fs(b)+"em"},fs:function(b){var c=Math.log(a.maxTagUses-(a.minTagUses-1))/(a.maxFont-a.minFont);var d=a.minFont;if(c>0){d=Math.log(b.uses-(a.minTagUses-1))/c+a.minFont}return d}});a.callParent()},refresh:function(){var a=this;a.minTagUses=a.store.min("uses");a.maxTagUses=a.store.max("uses");a.callParent()}});Ext.define("Ozone.components.button.ShareButton",{extend:"Ext.button.Button",alias:["widget.owf-share-button","widget.Ozone.components.button.ShareButton"],DEFAULT_SHARE_BUTTON_TEXT:"Share",DEFAULT_SHARE_TOOLTIP_HEADER:Ozone.layout.tooltipString.shareTitle,DEFAULT_TOOLTIP_TEXT:Ozone.layout.tooltipString.shareContent,dashboardScope:null,initComponent:function(){if(!this.text){this.text=this.DEFAULT_SHARE_BUTTON_TEXT}if(!this.handler){this.handler=this.openWindow}if(!this.tooltip){this.tooltip={title:this.DEFAULT_SHARE_TOOLTIP_HEADER,text:this.DEFAULT_TOOLTIP_TEXT,width:250}}},openWindow:function(){var d=Ext.getCmp("export-win");this.dashboardScope.activeDashboard.saveToServer(true);if(d){d.getEl().down("textarea").focus();return}var b=this.dashboardScope.activeDashboard.config;d=Ext.create("Ext.window.Window",Ext.apply({id:"export-win",cls:"manageContainer",title:Ozone.ux.DashboardMgmtString.exportDashboardConfig,width:550,height:500,closable:true,collapsible:false,draggable:true,maximizable:false,minimizable:false,resizable:true,layout:"fit",shadow:false,items:[{xtype:"textarea",id:"json",hideLabel:true,readOnly:true,width:550,height:500,value:owfdojo.toJson(b,true),plugins:new Ozone.components.focusable.Focusable()}]},this.winConfig||{}));d.show();d.center();d.getEl().down("textarea").focus();var c=document.createElement("form");var a=document.createElement("input");a.id="json";a.name="json";a.type="hidden";a.value=Ext.JSON.encode(b);c.appendChild(a);c.action=Ozone.util.contextPath()+"/servlet/ExportServlet";c.method="POST";c.enctype=c.encoding="multipart/form-data";document.body.appendChild(c);c.submit();document.body.removeChild(c);c=null;a=null}});Ext.define("Ozone.components.banner.Banner",{extend:"Ext.toolbar.Toolbar",alias:["widget.owfbanner","widget.Ozone.components.banner.Banner"],itemId:"banner",cls:"banner",mixins:{focus:"Ozone.components.focusable.CircularFocus"},plugins:[new Ozone.components.focusable.Focusable(),new Ozone.plugins.Banner()],state:"docked",dashboardContainer:null,toolbarButtons:null,noItemsToShow:2,collapseDelay:5000,marketplaceButtonIndex:3,hasMarketplaceButton:false,hasMetricButton:false,openLaunchMenu:function(){if(this.dashboardContainer.activeDashboard.configRecord.get("locked")===true){return}if(this.launchMenu.isVisible()){this.launchMenu.close()}else{this.launchMenu.show();this.launchMenu.refresh()}},disableLaunchMenu:function(){if(this.launchMenu.isVisible()){this.launchMenu.close()}this.getComponent("launchMenuBtn").disable();if(this.popOutToolbar){this.popOutToolbar.getComponent("launchMenuBtn").disable()}},enableLaunchMenu:function(){this.getComponent("launchMenuBtn").enable();if(this.popOutToolbar){this.popOutToolbar.getComponent("launchMenuBtn").enable()}},openSettingsWindow:function(){if(!this.settingsWindow||this.settingsWindow.isDestroyed){this.settingsWindow=Ext.widget("settingswindow",{dashboardContainer:this.dashboardContainer})}if(this.settingsWindow.isVisible()){this.settingsWindow.close()}else{this.settingsWindow.show()}},openAdministrationWindow:function(){if(!this.administrationWindow||this.administrationWindow.isDestroyed){this.administrationWindow=Ext.widget("admintoolswindow",{dashboardContainer:this.dashboardContainer})}if(this.administrationWindow.isVisible()){this.administrationWindow.hide()}else{this.administrationWindow.show()}},openMarketplaceWindow:function(){if(this.hasMarketplaceButton){if(!this.mpWindow){this.mpWindow=Ext.widget("marketplace")}if(this.mpWindow.isVisible()){this.mpWindow.close()}else{this.mpWindow.show()}}else{Ozone.components.keys.KeyMap.reset()}},openMarketplaceModalWindow:function(b,c){if(this.hasMarketplaceButton){if(this.marketplaceWidget){var a=("keyup"==c.type)?true:false;c.stopEvent();this.dashboardContainer.launchWidgets(this.marketplaceWidget,a)}else{if(!this.mpModalWindow||this.mpModalWindow.isDestroyed){this.mpModalWindow=Ext.widget("marketplacewindow",{dashboardContainer:this.dashboardContainer})}if(this.mpModalWindow.isVisible()){this.mpModalWindow.close()}else{this.mpModalWindow.show()}}}else{Ozone.components.keys.KeyMap.reset()}},openMetricWindow:function(){if(this.hasMetricButton){if(!this.metricWindow||this.metricWindow.isDestroyed){this.metricWindow=Ext.widget("metricwindow",{dashboardContainer:this.dashboardContainer})}if(this.metricWindow.isVisible()){this.metricWindow.close()}else{this.metricWindow.show()}}else{Ozone.components.keys.KeyMap.reset()}},openHelpWindow:function(){if(!this.helpWindow||this.helpWindow.isDestroyed){this.helpWindow=Ext.widget("helpwindow",{constrainHeader:true,dashboardContainer:this.dashboardContainer})}if(this.helpWindow.isVisible()){this.helpWindow.close()}else{this.helpWindow.show()}},addKeyBindings:function(){Ozone.KeyMap.addBinding([Ext.apply(Ozone.components.keys.HotKeys.LAUNCH_MENU,{scope:this,fn:this.openLaunchMenu}),Ext.apply(Ozone.components.keys.HotKeys.SETTINGS,{scope:this,fn:this.openSettingsWindow}),Ext.apply(Ozone.components.keys.HotKeys.DASHBOARD_SWITCHER,{scope:this.dashboardContainer,fn:this.dashboardContainer.showDashboardSwitcher}),Ext.apply(Ozone.components.keys.HotKeys.MARKETPLACE,{scope:this,fn:this.openMarketplaceModalWindow}),Ext.apply(Ozone.components.keys.HotKeys.METRIC,{scope:this,fn:this.openMetricWindow}),Ext.apply(Ozone.components.keys.HotKeys.HELP,{scope:this,fn:this.openHelpWindow})]);if(this.user.isAdmin){Ozone.KeyMap.addBinding(Ext.apply(Ozone.components.keys.HotKeys.ADMINISTRATION,{scope:this,fn:this.openAdministrationWindow}))}},initComponent:function(){var b=this;b.addKeyBindings();b.addEvents({docked:true,undocked:true});b.launchMenu=Ext.widget("launchMenu",{id:"widget-launcher",dashboardContainer:b.dashboardContainer,hidden:true,listeners:{hide:{fn:function(){this.down("#launchMenuBtn").toggle(false,true)},scope:b},show:{fn:function(){this.down("#launchMenuBtn").toggle(true,true)},scope:b}}});b.items=[];b.items.push({xtype:"button",id:"launchMenuBtn",itemId:"launchMenuBtn",scale:"launchmenu-banner-large",iconAlign:"top",text:null,tooltip:{title:Ozone.layout.tooltipString.addWidgetsTitle,text:Ozone.layout.tooltipString.addWidgetsContent,width:500,maxWidth:500},cls:"bannerBtn launchMenuBtn",iconCls:"launchMenuBtnIcon",enableToggle:true,clickCount:0,handler:this.openLaunchMenu,scope:this},"-");b.items.push([{xtype:"button",id:"dashMenuBtn",text:null,tooltip:{title:Ozone.layout.tooltipString.dashboardSwitcherTitle,text:Ozone.layout.tooltipString.dashboardSwitcherContent,width:500,maxWidth:500},cls:"bannerBtn dashMenuBtn",iconCls:"dashMenuBtnIcon",iconAlign:"top",scale:"banner-large",enableToggle:true,scope:this.dashboardContainer,handler:this.dashboardContainer.showDashboardSwitcher},"-",{xtype:"button",itemId:"settingsBtn",cls:"bannerBtn  settingsBtn",iconCls:"settingsBtnIcon",scale:"banner-large",iconAlign:"top",text:null,tooltip:{title:Ozone.layout.tooltipString.settingsTitle,text:Ozone.layout.tooltipString.settingsContent,width:500,maxWidth:500},enableToggle:true,scope:this,toggleHandler:this.openSettingsWindow}]);if(this.user.isAdmin){b.items.push(["-",{xtype:"button",itemId:"adminBtn",cls:"bannerBtn  adminBtn",iconCls:"adminBtnIcon",scale:"banner-large",iconAlign:"top",text:null,tooltip:{title:Ozone.layout.tooltipString.adminToolsTitle,text:Ozone.layout.tooltipString.adminToolsContent,width:500,maxWidth:500},enableToggle:true,scope:this,toggleHandler:this.openAdministrationWindow}])}b.items.push(["-",{xtype:"button",itemId:"helpBtn",cls:"bannerBtn  helpBtn",iconCls:"helpBtnIcon",scale:"banner-large",iconAlign:"top",text:null,tooltip:{title:Ozone.layout.tooltipString.helpTitle,text:Ozone.layout.tooltipString.helpContent,width:500,maxWidth:500},handler:this.openHelpWindow,scope:this},"-",{xtype:"button",id:"popOutBannerBtn",cls:"popOutBannerBtn ",iconCls:"popOutBannerBtnIcon",iconAlign:"top",scale:"banner-large",width:10,text:null,tooltip:{title:Ozone.layout.tooltipString.bannerUndockTitle,text:Ozone.layout.tooltipString.bannerUndockContent,width:280,maxWidth:280},handler:this.popOutDockedBanner,scope:this},{xtype:"component",itemId:"logoImg",flex:1,cls:"logo-img"},{xtype:"usermenubutton",id:"userMenuBtn",user:this.user,dashboardContainer:this.dashboardContainer}]);function a(){var c=this.items.get(0).getFocusEl(),e=this.getComponent("userMenuBtn"),d=this.getComponent("userMenuBtn").getClickables().last();function g(){e.showUserMenu()}this.setupFocus(c,d,undefined,g)}b.on("afterrender",function(c){a.call(c);Ozone.components.focusable.Focusable.clearOutline(this.getEl())});b.callParent(arguments);this.on({render:{fn:function(){if(Ozone.config.banner.state==="mini"){b.popOutDockedBanner(false,Ozone.config.banner.position)}else{if(Ozone.config.banner.state==="collapsed"){b.popOutDockedBanner(true,Ozone.config.banner.position)}}},scope:this}})},getBanner:function(){if(this.popOutToolbar&&this.popOutToolbar.isVisible()){return this.popOutToolbar}else{return this}},getPopOutBanner:function(){var b=this,c=[],a=this.getComponent("launchMenuBtn");if(b.popOutToolbar){return b.popOutToolbar}c.push({id:"gripper",xtype:"component"},{id:"popout_logo",xtype:"component"});c.push(a.cloneConfig({id:"popWidgetButton",clickCount:a.clickCount,disabled:this.getComponent("launchMenuBtn").disabled}),"-",this.getComponent("dashMenuBtn").cloneConfig(),"-");if(this.hasMarketplaceButton){c.push(this.getComponent("marketBtn").cloneConfig(),"-")}if(this.hasMetricButton){c.push(this.getComponent("metricBtn").cloneConfig(),"-")}c.push(this.getComponent("settingsBtn").cloneConfig(),"-");if(this.user.isAdmin){c.push(this.getComponent("adminBtn").cloneConfig(),"-")}c.push(this.getComponent("helpBtn").cloneConfig(),"-",{xtype:"button",id:"popInBannerBtn",cls:"popInBannerBtn",iconCls:"popInBannerBtnIcon",iconAlign:"top",scale:"banner-large",width:10,text:null,tooltip:{title:Ozone.layout.tooltipString.bannerDockTitle,text:Ozone.layout.tooltipString.bannerDockContent,width:200,maxWidth:200},handler:this.dockPopOutBanner,scope:this});b.popOutToolbar=Ext.create("Ext.toolbar.Toolbar",{id:"popOutBanner",cls:"banner",constrain:true,ownerCt:b.dashboardContainer,floating:true,draggable:true,state:"full",plugins:[new Ozone.components.keys.KeyMoveable(),new Ozone.components.focusable.Focusable()],bindMovementKeys:function(){var k=this,j={},h=Ozone.components.keys.MoveHotKeys,e,g;function d(m,n){return Ext.copyTo({handler:function(q,p){p.stopPropagation();n()},scope:k},m,Ext.Array.difference(Ext.Object.getKeys(m),["fn","handler","scope"]))}j.MOVE_UP=d(h.MOVE_UP,Ext.bind(k.moveUp,k));j.MOVE_DOWN=d(h.MOVE_DOWN,Ext.bind(function(){this.moveDown(Ext.getCmp("mainPanel").getHeight())},k));j.MOVE_LEFT=d(h.MOVE_LEFT,Ext.bind(k.moveLeft,k));j.MOVE_RIGHT=d(h.MOVE_RIGHT,Ext.bind(function(){this.moveRight(Ext.getCmp("mainPanel").getWidth())},k));e=Ext.Object.getValues(j);e.push({key:[Ext.EventObject.LEFT,Ext.EventObject.RIGHT],handler:function(n,m){if(!m.ctrlKey){var q=m.getKey()===m.LEFT?"previousSibling":"nextSibling",r=this.getChildByElement(document.activeElement),p=r?r[q](".button"):null;if(p){p.focus()}}},scope:this});g=new Ext.util.KeyMap(this.getFocusEl(),e);this.on("destroy",function(){this.destroy()},g);this.on("show",function(){Ext.FocusManager.unsubscribe(this)},this)},items:[c]});b.popOutToolbar.on("move",function(){this.saveState()},b,{buffer:500});b.popOutToolbar.on("afterrender",function(h){var d=h.items.items,e=d[d.length-1].getEl(),g=e.getOffsetsTo(h.getEl())[0]+e.getWidth();h.originalWidth=g+5;h.originalHeight=h.getHeight();h.setWidth(h.originalWidth);h.setHeight(h.originalHeight);h.getEl().on("mouseout",b.startCollapseTimer,b);h.getEl().on("blur",b.startCollapseTimer,b);h.getEl().on("mouseover",b.clearCollapseTimer,b);h.getEl().on("focus",function(){b.clearCollapseTimer();b.expandBanner()},b);Ozone.components.focusable.Focusable.clearOutline(h.getFocusEl());h.bindMovementKeys();h.items.firstFocusable=function(){return this.findBy(function(j){return(j.getFocusEl&&j.getFocusEl().focusable())})};Ext.apply(h,new Ozone.components.focusable.CircularFocus());h.setupFocus(h.items.firstFocusable().getFocusEl(),h.items.last().getFocusEl());if(Ext.isIE){Ext.defer(function(){this.getEl().select(".x-toolbar-separator, #gripper, #popout_logo").each(function(j){j.dom.tabIndex=-1})},100,h)}},null,{single:true});b.popOutToolbar.on("show",function(){b.dashboardContainer.bannerManager.register(b.popOutToolbar);b.dashboardContainer.bannerManager.bringToFront(b.popOutToolbar);if(this.height<this.originalHeight){this.setHeight(this.originalHeight)}});return b.popOutToolbar},popOutDockedBanner:function(d,a){var c=this,b=c.getPopOutBanner();c.hide();if(b.rendered){b.setHeight(b.originalHeight)}c.state="mini";b.show();c.fireEvent(OWF.Events.Banner.UNDOCKED);if(a&&a.length==2){b.setPosition(a[0],a[1])}d===true?c.collapseMiniBanner(0):c.startCollapseTimer();c.resizePopOutBanner();if(this.popOutToolbar.width<50){c.resizePopOutBanner()}this.saveState()},dockPopOutBanner:function(){var a=this;a.state="docked";a.fireEvent(OWF.Events.Banner.DOCKED);a.clearCollapseTimer();a.setHeight(34);a.setVisible(true);a.popOutToolbar.hide();a.focus();this.saveState()},startCollapseTimer:function(){var a=this;if(!a.collapseTask){a.collapseTask=Ext.create("Ext.util.DelayedTask",function(){if(a.popOutToolbar.getEl().contains(document.activeElement)){a.startCollapseTimer()}else{a.collapseMiniBanner()}})}a.collapseTask.delay(Ext.isNumber(a.collapseDelay)?a.collapseDelay:5000,null,a)},clearCollapseTimer:function(){var a=this;if(a.collapseTask){a.collapseTask.cancel();a.collapseTask=null;a.expandBanner()}},collapseMiniBanner:function(d){var c=this,b=this.getPopOutBanner(),a=b.items.items;if(!b.miniWidth){b.miniWidth=a[c.noItemsToShow].getEl().getOffsetsTo(b.getEl())[0]}b.animate({easing:"elasticIn",duration:Ext.isNumber(d)?d:500,to:{width:b.miniWidth},listeners:{afteranimate:function(){if(c.state!="docked"){c.state="collapsed"}}}})},expandBanner:function(){var c=this,b=this.getPopOutBanner(),a=b.items.items;if(b.originalWidth&&b.originalWidth!==b.getSize().width){b.animate({easing:"backOut",duration:500,to:{width:b.originalWidth},listeners:{afteranimate:function(){if(c.state!="docked"){c.state="mini"}}}})}},resizePopOutBanner:function(){var a=this.getPopOutBanner(),b=a.items.items,c=b[b.length-1].getEl(),d=c.getOffsetsTo(a.getEl())[0]+c.getWidth();a.originalWidth=d+5;a.setWidth(a.originalWidth)},saveState:function(a){var b=this,c={state:b.state,position:b.isVisible()||!b.popOutToolbar?[0,0]:b.popOutToolbar.getPosition()};Ozone.pref.PrefServer.setUserPreference({namespace:"owf.banner",name:"state",value:Ozone.util.toString(c),onSuccess:function(d){if(a!=null){a()}},onFailure:function(){}})},addMarketplaceButton:function(b){this.marketplaceWidget=b;if(!this.hasMarketplaceButton){var a=this,c=0;a.insert(this.marketplaceButtonIndex+c,{xtype:"tbseparator",itemId:"mpSeparator"});a.insert(this.marketplaceButtonIndex+1+c,{xtype:"button",itemId:"marketBtn",cls:"bannerBtn  marketBtn",iconCls:"marketplaceBtnIcon",scale:"banner-large",iconAlign:"top",text:null,tooltip:{title:Ozone.layout.tooltipString.marketplaceWindowTitle,text:Ozone.layout.tooltipString.marketplaceWindowContent,width:500,maxWidth:500},scope:this,handler:this.openMarketplaceModalWindow});if(this.popOutToolbar){if(!this.popOutToolbar.getComponent("marketBtn")){this.popOutToolbar.insert(this.marketplaceButtonIndex+2,{xtype:"tbseparator",itemId:"mpSeparator"});this.popOutToolbar.insert(this.marketplaceButtonIndex+3,this.getComponent("marketBtn").cloneConfig());this.resizePopOutBanner()}}this.hasMarketplaceButton=true}},removeMarketplaceButton:function(){if(this){var a=this.items.indexOf(this.getComponent("marketBtn"));this.remove(a);this.remove(a-1)}if(this.popOutToolbar){var a=this.popOutToolbar.items.indexOf(this.popOutToolbar.getComponent("marketBtn"));this.popOutToolbar.remove(a);this.popOutToolbar.remove(a-1);this.resizePopOutBanner()}this.hasMarketplaceButton=false},addMetricButton:function(){var b=this.hasMarketplaceButton?this.marketplaceButtonIndex+2:this.marketplaceButtonIndex;if(!this.hasMetricButton){var a=this,c=0;a.insert(b+c,{xtype:"tbseparator",itemId:"metricSeparator"});a.insert(b+1+c,{xtype:"button",itemId:"metricBtn",cls:"bannerBtn  metricBtn",iconCls:"metricBtnIcon",scale:"banner-large",iconAlign:"top",text:null,tooltip:{title:Ozone.layout.tooltipString.metricWindowTitle,text:Ozone.layout.tooltipString.metricWindowContent,width:250},scope:this,handler:this.openMetricWindow})}if(this.popOutToolbar){if(!this.popOutToolbar.getComponent("metricBtn")){this.popOutToolbar.insert(b+2,{xtype:"tbseparator",itemId:"metricSeparator"});this.popOutToolbar.insert(b+3,this.getComponent("metricBtn").cloneConfig());this.resizePopOutBanner()}}this.hasMetricButton=true},removeMetricButton:function(){if(this){var a=this.items.indexOf(this.getComponent("metricBtn"));this.remove(a);this.remove(a-1)}if(this.popOutToolbar){var a=this.popOutToolbar.items.indexOf(this.popOutToolbar.getComponent("metricBtn"));this.popOutToolbar.remove(a);this.popOutToolbar.remove(a-1);this.resizePopOutBanner()}this.hasMetricButton=false}});Ext.define("Ozone.components.widget.WidgetPortlet",{extend:"Ozone.components.widget.WidgetPanel",alias:"widget.widgetportlet",anchor:"100%",componentCls:"x-portlet",closable:true,collapsible:true,draggable:false,stateEvents:["collapse","expand","resize","titlechange"],stateful:true,getState:function(){var a={universalName:this.universalName,widgetGuid:((this.widgetGuid!=null)&&(this.widgetGuid!="undefined"))?this.widgetGuid:"",dashboardGuid:this.dashboardGuid,paneGuid:this.paneGuid,uniqueId:((this.uniqueId!=null)&&(this.uniqueId!="undefined"))?this.uniqueId:"",name:this.title?this.title:this.name,active:!!this.active,x:"",y:"",zIndex:"",minimized:false,maximized:false,pinned:false,collapsed:((this.collapsed!=null)&&(this.collapsed!="undefined"))?this.collapsed:"",columnPos:0,columnOrder:this.ownerCt?this.ownerCt.items.indexOf(this):"",buttonId:"",buttonOpened:"",region:"none",statePosition:this.statePosition,intentConfig:this.intentConfig,launchData:this.launchData,singleton:this.singleton?this.singleton:false};if(this.rendered){Ext.apply(a,{height:this.collapseMemento!=null&&this.collapseMemento.data!=null?this.collapseMemento.data.height:this.getSize().height,width:this.getSize().width})}else{Ext.apply(a,{height:this.height,width:this.width})}return a},applyState:function(a){this.widgetGuid=a.widgetGuid;this.uniqueId=a.uniqueId;this.name=a.name;this.active=a.active;this.height=a.height;this.minimized=a.minimized;this.maximized=a.maximized;this.pinned=a.pinned;if(this.rendered){this.collapsed=a.collapsed}this.columnPos=a.columnPos;this.buttonId=a.buttonId;this.buttonOpened=a.buttonOpened;this.region=a.region;this.title=a.name},initComponent:function(){this.beforeInitComponent();this.callParent(arguments);var a=this;this.panel=a;this.on("render",function(){this.body.setHeight(this.getHeight());a.resizer=Ext.create("Ext.resizer.Resizer",{target:a,handles:"s",minHeight:100})});this.addEvents("beforeexpand")}});Ext.define("Ozone.components.widget.WidgetWindow",{extend:"Ext.window.Window",alias:["widget.widgetwindow","widget.Ozone.components.widget.WidgetWindow"],mixins:{widget:"Ozone.components.widget.WidgetBase"},plugins:[new Ozone.components.keys.KeyMoveable(),new Ozone.plugins.WidgetWindow()],floating:{shadow:false},hideMode:"offsets",inactiveCls:"inactive",maximizable:true,minimizable:true,constrain:!!Ext.isIE,constrainHeader:!Ext.isIE,enableDeactivateShim:false,debugDeactivateShim:false,deactivateShim:null,initialMouseOverActivate:true,isMouseOverActivateFlag:false,mouseOverActivateDelay:1000,widgetStateContainer:null,closable:true,widgetIframeDelay:200,liveDrag:true,onEsc:Ext.emptyFn,initComponent:function(){if(!this.manager){this.manager=Ext.WindowMgr}this.beforeInitComponent();this.callParent(arguments);this.on({activate:this.onActivate,deactivate:this.onDeActivate,maximize:this.onMaximize,restore:this.onRestore,afterrender:{fn:this.onAfterRender,scope:this}});Ext.apply(this,this.mixins.widget.overrides);this.afterInitComponent();if(!this.headers){this.headers=[]}this.on("toolbaritem:created",function(a){this.headers.push(a.header)})},onAfterRender:function(){this.headers.push(this.header);if(this.initialMouseOverActivate){this.addMouseOverActivate()}},bringToFront:function(){this.manager.bringToFront(this)},addMouseOverActivate:function(){if(!this.isMouseOverActivateFlag){this.el.on("mouseover",this.mouseOver,this);this.el.on("mouseleave",this.mouseLeave,this)}this.isMouseOverActivateFlag=true},removeMouseOverActivate:function(){if(this.isMouseOverActivateFlag){this.el.un("mouseover",this.mouseOver,this);this.el.un("mouseleave",this.mouseLeave,this)}if(this.mouseOverDeferredId!=null){clearTimeout(this.mouseOverDeferredId);this.mouseOverDeferredId=null}this.isMouseOverActivateFlag=false},mouseOver:function(c,b,a){if(this.isMouseOverActivateFlag&&OWF.Container.DragAndDrop.isDragging()&&this.mouseOverDeferredId==null){this.mouseOverDeferredId=Ext.defer(function(){if(OWF.Container.DragAndDrop.isDragging()){this.bringToFront()}this.mouseOverDeferredId=null},this.mouseOverActivateDelay,this)}},mouseLeave:function(c,b,a){if(this.mouseOverDeferredId!=null){clearTimeout(this.mouseOverDeferredId);this.mouseOverDeferredId=null}},onMaximize:function(a){a.resizer.disable()},onRestore:function(a){a.resizer.enable();if(a.focusOnRestore){a.focusOnRestore.focus()}},onActivate:function(a){if(this.enableDeactivateShim){if(this.deactivateShim){this.deactivateShim.hide()}}},onDeActivate:function(c){if(this.enableDeactivateShim){var b=this.body;if(!this.deactivateShim){var a=document.createElement("div");a.id="ext-deactivate-shim-"+this.getId();a.style.display="block";a.style.backgroundColor="black";this.deactivateShim=Ext.create("Ext.Layer",{id:"ext-deactivate-shim-"+this.getId(),shadow:false,useDisplay:true,constrain:false},a);if(this.debugDeactivateShim){this.deactivateShim.setOpacity(0.5)}else{this.deactivateShim.setOpacity(0)}this.deactivateShim.setZIndex(parseInt(this.el.getStyle("z-index")));b.insertSibling(this.deactivateShim)}this.deactivateShim.setHeight(b.getHeight());this.deactivateShim.setWidth(b.getWidth());this.deactivateShim.setTop(b.getTop(true));this.deactivateShim.setLeft(b.getLeft(true));this.deactivateShim.setRight(b.getRight(true));this.deactivateShim.setBottom(b.getBottom(true));this.deactivateShim.show()}},stateEvents:["bodyresize","show","minimize","maximize","activate","deactivate","titlechange"],getState:function(){var d={universalName:this.universalName,widgetGuid:this.widgetGuid,uniqueId:this.uniqueId,dashboardGuid:this.dashboardGuid,paneGuid:this.paneGuid,name:this.title?this.title:this.name,active:this.active?true:false,x:this.restorePos?this.restorePos[0]:this.x,y:this.restorePos?this.restorePos[1]:this.y,minimized:this.minimized?true:false,maximized:this.maximized?true:false,pinned:false,collapsed:false,columnPos:0,buttonId:this.buttonId?this.buttonId:null,buttonOpened:this.buttonOpened?this.buttonOpened:false,region:"none",statePosition:this.statePosition,intentConfig:this.intentConfig,launchData:this.launchData,singleton:this.singleton?this.singleton:false,floatingWidget:this.floatingWidget?this.floatingWidget:false,background:this.background?this.background:false};if(this.rendered){var e=null;var a=null;var b=null;var c=this.getBox();if(!this.destroying&&!this.isDestroyed){e=this.el.getZIndex();a=c.height;b=c.width}else{a=this.height;b=this.width}Ext.apply(d,{zIndex:Ext.isNumber(e)&&e>0?e:this.zIndex!=null?this.zIndex:0,height:this.restoreSize?this.restoreSize.height:a,width:this.restoreSize?this.restoreSize.width:b,x:c.x,y:c.y})}else{Ext.apply(d,{zIndex:this.zIndex!=null?this.zIndex:0,height:this.restoreSize?this.restoreSize.height:-1,width:this.restoreSize?this.restoreSize.width:-1})}return d},applyState:function(a){this.setSize(a.width,a.height);this.setPosition(a.x,a.y);this.title=a.name;this.minimized=a.minimized;this.maximized=a.maximized},toggleMaximize:function(a){if(!a.getTarget("."+this.baseCls+"-header-text")&&!a.getTarget("titleEditor")){return this[this.maximized?"restore":"maximize"]()}},maximize:function(){var a=this;if(!a.maximized){a.expand(false);if(!a.hasSavedRestore){a.restoreSize=a.getSize();a.restorePos=a.getPosition(true)}if(a.maximizable){var b=this.header.tools.maximize;a.tools.restore.show();if(b.isFocused()){this.tools.restore.focus()}this.focusOnRestore=b;b.hide()}a.maximized=true;a.el.disableShadow();if(a.dd){a.dd.disable()}if(a.collapseTool){a.collapseTool.hide()}a.el.addCls(Ext.baseCSSPrefix+"window-maximized");if(!Ext.isGecko){a.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct")}a.setPosition(0,0);a.fitContainer();a.fireEvent("maximize",a)}return a},minimize:function(){var a=this;if(!a.minimized){a.expand(false);if(!a.hasSavedRestore&&!a.maximized){a.restoreSize=a.getSize();a.restorePos=a.getPosition(true)}a.minimized=true;this.focusOnRestore=null;a.fireEvent("minimize",a);a.hide()}return a},restore:function(){if(!this.tools.restore.isFocused()){this.focusOnRestore=null}this.callParent(arguments)},restoreFromMinimize:(function(){var a=function(){if(this.minimized){if(this.minimizable){this.tools.minimize.show()}this.minimized=false;this.fireEvent("restore",this)}};return function(b){var c=this;if(c.rendered){c.show();a.call(c);c.focus(false,false,b,true)}else{c.on("afterrender",function(d){a.call(d);d.focus(false,false,b,true)});c.show()}return c}}()),purgeListener:function(a){var b=this.events[a];if(typeof b=="object"){b.clearListeners()}},restoreListener:function(a){var b=this.originalStateEvents[a];if(typeof b=="object"){this.events[a]=b}}});Ext.define("Ozone.state.WidgetStateStoreProvider",{extend:"Ext.state.Provider",constructor:function(a){this.callParent();Ext.apply(this,a)},store:null,clear:function(a){if(Ext.isObject(a)){var b=this.findStore(a.paneGuid);if(b&&a.paneGuid){if(Ext.isNumber(a.pos)){return this.clearAt(a.pos,a)}else{return this.clearById(a.uniqueId,a)}}}},clearById:function(d,a){var b=this.findStore(a.paneGuid);if(b){var c=b.getById(d);if(c){b.remove(c);this.fireEvent("statechange",this,a.uniqueId,null)}}},clearAt:function(c,a){var b=this.findStore(a.paneGuid);if(b){b.removeAt(c);this.fireEvent("statechange",this,name,null)}},get:function(b,a){if(Ext.isNumber(b)){return this.getAt(b)}else{return this.getById(b,a)}},getById:function(b,a){if(this.lastUsedStore!=null&&!this.lastUsedStore.isDestroyed){return this.lastUsedStore.getById(b)==null?a:this.lastUsedStore.getById(b).data}},getAt:function(b,a){if(this.lastUsedStore!=null&&!this.lastUsedStore.isDestroyed){return this.lastUsedStore.getAt(b)==null?a:this.lastUsedStore.getAt(b).data}},getByStore:function(b,d,a){var c=this.findStore(b);if(c){return this.get(d,a)}},setAt:function(c,b){var a=this.findStore(b.paneGuid);if(a&&b.paneGuid){a.removeAt(c);a.insert(c,[b]);this.fireEvent("statechange",this,c,b)}},set:function(b,a){if(a===null){this.clear(a.paneGuid,b);return}if(Ext.isNumber(b)){this.setAt(b,a)}else{this.setById(b,a)}},setById:function(c,b){var a=this.findStore(b.paneGuid);if(a&&b.paneGuid){a.remove(a.getById(c));a.add(b);this.fireEvent("statechange",this,c,b)}},getStore:function(){return this.lastUsedStore},setStore:function(a){return this.lastUsedStore=a},findStore:function(b){var a=Ext.data.StoreManager.get(b);if(a){this.lastUsedStore=a;return a}return this.lastUsedStore}});var Ozone=Ozone?Ozone:{};Ozone.state=Ozone.state?Ozone.state:{};Ozone.state.WidgetStateContainer=function(a){this.stateChannelPrefix="_WIDGET_STATE_CHANNEL_";this.windowManager=null;if(a!=null){this.eventingContainer=a}else{throw {name:"WidgetStateContainerException",message:"eventingContainer is null"}}};Ozone.state.WidgetStateContainer.prototype={registerHandler:function(b){var c=this;var a=this.stateChannelPrefix+b;this.eventingContainer.registerHandler(a,function(d,e){return c.handleWidgetRequest(e)})},handleWidgetRequest:function(a){var c=null;var b=null;c=this.windowManager;if(c!=null){b=c.handleWidgetRequest(a)}else{throw {name:"WidgetStateContainerException",message:"window_manager is null"}}return b},registerWindowManager:function(a){this.windowManager=a}};Ext.namespace("Ozone.marketplace");Ext.define("Ozone.marketplace.MPListingsRetriever",{extend:"Ext.util.Observable",constructor:function(a){this.addEvents({success:true,failure:true});this.callParent()},retrieve:function(e,h,j){var k=this;var a={total:0,data:[]};var d="title";var b="asc";if(e.sorters&&e.sorters[0]){d=e.sorters[0].property;b=e.sorters[0].direction}Ozone.marketplace.util.getOwfCompatibleItems({max:e.limit,offset:e.start,sort:d,order:b,categoryIDs:e.categoryIDs,typeIDs:e.typeIDs,stateIDs:e.stateIDs,title:e.title,description:e.description,author:e.author,queryString:e.queryString,useIndex:e.useIndex,success:function g(m){k.fireEvent("success",m,e,h,j)},failure:function c(n,m){k.fireEvent("failure",a,e,h,j)}})}});Ext.namespace("Ozone.marketplace");Ext.define("Ozone.marketplace.MPCategoryRetriever",{extend:"Ext.util.Observable",constructor:function(a){this.addEvents({success:true,failure:true});this.callParent()},retrieve:function(g,e,b){var a=this;Ozone.marketplace.util.getCategories({max:g.limit,offset:g.start,sort:g.sort,order:g.order,success:function c(h){a.fireEvent("success",h,g,e,b)},failure:function d(j,h){a.fireEvent("failure",[],g,e,b)}})}});Ext.namespace("Ozone.marketplace");Ext.define("Ozone.marketplace.model.ServiceItem",{extend:"Ext.data.Model",fields:["imageLargeUrl","launchUrl","state","screenshot2Url","requirements","id","author","organization","avgRate","title","releaseDate","recommendedLayouts","dependencies","description","docUrl","totalVotes","approvalStatus","types","techPoc","screenshot1Url","customFields","isPublished","versionName","installUrl","categories","uuid","imageSmallUrl","createdDate","editedDate","isEnabled","createdBy","lastActivity","owfProperties"]});Ozone.marketplace.MPListingsAPI=function(){var b=Ext.create("Ozone.data.JsonProxy",{reader:{type:"json",root:"data",totalProperty:"total",idProperty:"id",successProperty:"success"},jsonRetriever:Ext.create("Ozone.marketplace.MPListingsRetriever",{})});b.jsonRetriever.on("success",function(c,g,e,d){b.processJson(c,g,e,d)});b.jsonRetriever.on("failure",function(c,g,e,d){b.processJson(c,g,e,d)});var a=Ext.create("Ext.data.Store",{model:"Ozone.marketplace.model.ServiceItem",proxy:b,remoteSort:true,pageSize:12,sorters:[{property:"title",direction:"asc"}],lastOptions:{params:{limit:20,start:0}},listeners:{load:{fn:function(e,d,g){var j=e.getRange();for(var h=0;h<j.length;h++){var c=j[h].data;c.dependencies=Ext.util.Format.htmlEncode(c.dependencies);c.description=Ext.util.Format.htmlEncode(c.description);c.requirements=Ext.util.Format.htmlEncode(c.requirements);c.title=Ext.util.Format.htmlEncode(c.title);c.versionName=Ext.util.Format.htmlEncode(c.versionName);c.launchUrl=Ext.util.Format.htmlEncode(c.launchUrl);c.author=Ext.util.Format.htmlEncode(c.author);if(Ext.isEmpty(c.owfProperties)){c.owfProperties={visibleInLaunch:true,singleton:false}}}},scope:this}}});this.getStore=function(){return a};this.loadStore=function(c,d){c=c||{};if(d){c=Ext.applyIf(c,a.lastOptions.params)}a.lastOptions.params=c;if(c.sorters&&c.sorters[0]){a.sorters.items[0].property=c.sorters[0].property;a.sorters.items[0].direction=c.sorters[0].direction}if(c.currentPage){a.currentPage=c.currentPage}a.load({categoryIDs:c.categoryIDs,typeIDs:c.typeIDs,stateIDs:c.stateIDs,title:c.title,description:c.description,author:c.author,queryString:c.queryString,scope:c.scope,start:c.start,limit:c.limit,sorters:c.sorters,event:c.event,pageSize:c.pageSize,useIndex:(c.useIndex!==false)?true:false,callback:c.countCategories?function(j,g,h){var k=[];a.each(function(p){var n=p.data.categories.length;if(n>0){for(var m=0;m<n;m++){var q=parseInt(p.data.categories[m].id);if(isNaN(k[q])){k[q]=1}else{k[q]++}}}});var e=Ext.query("*[class*=category-selectable]",Ext.get("mpCategoryTree").dom);Ext.each(e,function(q,n){var m=q.id.substr(14);if(q){if(q.id!="category-tree-all"){var p=k[parseInt(m)];var r=Ext.query("*[id="+q.id+"-count]",q);if(p!=undefined&&p!=null&&!isNaN(p)){r[0].innerHTML=" ("+p+")"}else{r[0].innerHTML=" (0)"}}}});if(c.callback){c.callback.call(j,g,h)}}:c.callback,add:c.append})};this.getCategoryCount=function(c){if(!isNaN(c)){return categoryCount[parseInt(c)]}}};Ext.namespace("Ozone.marketplace");Ext.define("Ozone.marketplace.model.Category",{extend:"Ext.data.Model",fields:["class","id","title","description","isDeleted"]});Ozone.marketplace.MPCategoryAPI=function(){var b=Ext.create("Ozone.data.JsonProxy",{reader:{type:"json",root:"data",totalProperty:"total",idProperty:"id",successProperty:"success"},jsonRetriever:Ext.create("Ozone.marketplace.MPCategoryRetriever")});b.jsonRetriever.on("success",function(c,g,e,d){b.processJson(c,g,e,d)});b.jsonRetriever.on("failure",function(c,g,e,d){b.processJson(c,g,e,d)});var a=Ext.create("Ext.data.Store",{model:"Ozone.marketplace.model.Category",proxy:b,remoteSort:true,lastOptions:{params:{sort:"title",order:"asc",limit:20,start:0}}});this.getStore=function(){return a};this.loadStore=function(c,d){c=c||{};if(d){c=Ext.applyIf(c,a.lastOptions.params)}a.lastOptions.params=c;a.load(c)}};var DEFAULT_ICON_HEIGHT=49;var DEFAULT_ICON_WIDTH=48;var DEFAULT_ITEM_WIDTH=75;Ext.define("Ozone.components.marketplace.MarketplaceWindow",{extend:"Ext.window.Window",alias:["widget.marketplace","widget.Ozone.components.marketplace.MarketplaceWindow"],id:"mpWindow",itemId:"mpWindow",cls:"mpWindow",layout:"fit",width:800,height:500,closable:true,closeAction:"hide",title:"Marketplace",plugins:new Ozone.components.keys.HotKeyComponent(Ozone.components.keys.HotKeys.MARKETPLACE),mixins:{circularFocus:"Ozone.components.focusable.CircularFocus"},mpPanel:null,mpMainPanelContainer:null,mpWidgetDetailPage:null,mpSearchResults:null,mpHomeIcon:{itemId:"mpHomeIcon",cls:"mpHomeIcon",height:90,region:"north",html:'<div id="mpShoppeIcon" class="mpShoppeIcon"><img class="market-icon" src="images/marketplace/shoppe.png" /><div class="market-text">Market</div></div>'},mpCategories:null,listeners:{activate:{fn:function(a){a.removeCls("floatingWinContainerInactive")},scope:this},deactivate:{fn:function(a){a.addCls("floatingWinContainerInactive")},scope:this},move:{fn:function(d,a,h){var g=Ext.core.Element.getViewportWidth();var b=Ext.core.Element.getViewportHeight();var e=a;var c=h;if(h<19){c=19}else{if(h>b-(d.getHeight()+19)){c=b-(d.getHeight()+19)}}if(a<0){e=0}else{if(a>g-d.getWidth()){e=g-d.getWidth()}}if(e!=a||c!=h){d.setPagePosition(e,c)}},scope:this}},searchByText:function(b){var d=this.mpSearchResults;if(d){var a=Ozone.components.MPListingsAPI.getStore();var c=a.lastOptions;if(b==""){b=null}Ext.apply(c.params,{useIndex:true,queryString:b,countCategories:false,start:0,limit:a.lastOptions.params.limit,dir:a.lastOptions.params.dir,sort:a.lastOptions.params.sort});Ozone.components.MPListingsAPI.loadStore(c.params)}},addWidget:function(){var a=this.down("#mpWidgetDetailPage").data;var c=this.down("#mpWidgetDetailPage").data.requiredListings;var m={};var q=[];var g=[];if(Ozone.config.enablePendingApprovalWidgetTagGroup){m={name:Ozone.config.carousel.pendingApprovalTagGroupName,visible:true,position:-1,editable:false}}else{var b=new Date();var n=Ext.Date.format(b,"Y-m-d");m={name:Ozone.config.carousel.approvedTagGroupName+" on "+n,visible:true,position:-1,editable:true}}if(c&&c[0].requires){for(var h=0;h<c[0].requires.length;h++){g.push(c[0].requires[h].uuid)}}var p={displayName:a.title,height:200,imageUrlLarge:a.imageLargeUrl?a.imageLargeUrl:Ozone.util.contextPath(),imageUrlSmall:a.imageSmallUrl?a.imageSmallUrl:Ozone.util.contextPath(),isExtAjaxFormat:true,widgetGuid:a.uuid,widgetUrl:a.launchUrl,width:200,widgetVersion:a.versionName,tags:Ext.JSON.encode([m]),singleton:a.owfProperties&&a.owfProperties!=""?a.owfProperties.singleton:false,visible:a.owfProperties&&a.owfProperties!=""?a.owfProperties.visibleInLaunch:true};if(g.length>0){p.directRequired=Ext.JSON.encode(g)}q.push(Ext.JSON.encode(p));if(c&&c.length>1){c=c.slice(1);for(var h=0;h<c.length;h++){g=[];for(var e=0;e<c[h].requires.length;e++){g.push(c[h].requires[e].uuid)}p={displayName:c[h].title,height:200,imageUrlLarge:c[h].imageLargeUrl?c[h].imageLargeUrl:Ozone.util.contextPath(),imageUrlSmall:c[h].imageSmallUrl?c[h].imageSmallUrl:Ozone.util.contextPath(),isExtAjaxFormat:true,widgetGuid:c[h].uuid,widgetUrl:c[h].launchUrl,width:200,widgetVersion:c[h].versionName,tags:Ext.JSON.encode([m]),singleton:c[h].owfProperties?c[h].owfProperties.singleton:false,visible:c[h].owfProperties?c[h].owfProperties.visibleInLaunch:true};if(g.length>0){p.directRequired=Ext.JSON.encode(g)}q.push(Ext.JSON.encode(p))}var d=Ext.widget("templateeventdataview",{multiSelect:false,singleSelect:false,simpleSelect:false,autoScroll:true,cls:"mpWindow",style:{background:"none"},itemSelector:".selectable",data:c,tpl:Ext.create("Ext.XTemplate",'<div class="mpMsgWindow">','<div class="mpParentListing">','<table width="100%">',"<tr>",'<td valign="top" width="65">','<div class="parent-icon">','<img src="'+a.imageLargeUrl+'" title="'+Ext.util.Format.htmlEncode(a.title)+'">',"</div>","</td>",'<td valign="top">','<div class="parent-title">'+Ext.util.Format.htmlEncode(a.title)+"</div>",'<div class="parent-text">'+Ozone.layout.DialogMessages.marketplaceWindow_RequiredListingsAlertMsg+"</div>","</td>","</tr>","</table>","</div>",'<div id="mpMsgWindowProgress" class="mpMsgWindowProgress"></div>','<div class="mpRequiredListings">','<tpl for=".">','<div class="mpDetailSummary {[xindex % 2 === 0 ? "" : "striped-row"]}">','<table width="100%">',"<tr>",'<td valign="top" width="85">','<div class="detail-icon">','<img src="{imageLargeUrl}" title="{title:this.htmlEncode}">',"</div>","</td>",'<td valign="top">','<div class="detail-title">{title:this.htmlEncode}</div>','<div class="detail-version">',"Version {versionName:this.htmlEncode}&nbsp;&nbsp;{owfProperties:this.visibleInLaunch}","</div>",'<div class="mpDetailInfo">','<span class="detail-author-label">Owner: </span>','<span class="detail-author">{author:this.htmlEncode}</span>',"</div>",'<div class="mpDetailInfo">','<span class="detail-released-label">Released: </span>','<span class="detail-released">{createdDate:this.displayDate}</span>',"</div>","</td>",'<td valign="top">','<div style="padding-top:25px;">&nbsp;</div>','<div class="mpDetailInfo">','<span class="detail-organization-label">Organization: </span>','<span class="detail-organization">{organization:this.htmlEncode}</span>',"</div>",'<div class="mpDetailInfo">','<span class="detail-modified-label">Modified: </span>','<span class="detail-modified">{editedDate:this.displayDate}</span>',"</div>","</td>","</tr>","</table>","</div>","</tpl>","</div>","</div>",{compiled:true,htmlEncode:function(j){return Ext.util.Format.htmlEncode(j)},displayDate:function(v){if(v){var y=v.substr(0,4);var x=parseInt(v.substr(5,2),10)-1;var j=v.substr(8,2);var t=v.substr(11,2);var r=v.substr(14,2);var u=v.substr(17,2);var w=new Date(y,x,j,t,r,u,0);v=Ext.Date.format(w,"m/d/Y")}return v?v:""},visibleInLaunch:function(j){return j&&j.visibleInLaunch?"":"(Hidden)"}})});var k=Ext.create("Ext.window.Window",{title:"Adding Widget",width:750,height:450,layout:"fit",modal:true,items:[d],dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",items:[{xtype:"tbfill"},{xtype:"button",text:Ozone.layout.MessageBoxButtonText.ok,handler:function(){var j=Ext.create("Ext.ProgressBar",{text:"Adding Widget...",autoShow:true,renderTo:"mpMsgWindowProgress"});j.wait({text:"Adding Widget...",interval:1000,increment:100});owfdojo.xhrPost({url:Ozone.util.contextPath()+"/widget/",sync:true,content:{addExternalWidgetsToUser:true,widgets:Ext.JSON.encode(q)},load:function(t,r){var u=Ext.getCmp("launchMenuPanel");u.widgetStore.load();k.close()},error:function(t,r){k.close();Ozone.Msg.alert(Ozone.layout.DialogMessages.error,Ozone.layout.DialogMessages.marketplaceWindow_AddWidget,null,null,{cls:"confirmationDialog"})}})}},{xtype:"button",text:Ozone.layout.MessageBoxButtonText.cancel,handler:function(){k.close()}},{xtype:"tbfill"}]}]}).show()}else{owfdojo.xhrPost({url:Ozone.util.contextPath()+"/widget/",sync:true,content:{addExternalWidgetsToUser:true,widgets:Ext.JSON.encode(q)},load:function(r,j){var t=Ext.getCmp("launchMenuPanel");t.widgetStore.load()},error:function(r,j){Ozone.Msg.alert(Ozone.layout.DialogMessages.error,Ozone.layout.DialogMessages.marketplaceWindow_AddWidget,null,null,{cls:"confirmationDialog"})}})}},initComponent:function(){Ozone.components.MPListingsAPI=new Ozone.marketplace.MPListingsAPI();Ozone.components.MPCategoryAPI=new Ozone.marketplace.MPCategoryAPI();this.mpWidgetDetailPage=Ext.create("Ozone.components.marketplace.MPWidgetDetailsPanel",{parentWidget:{},requiredListings:[]});this.mpWidgetDetailPage.mpWidgetSummary.on("templaterendered",this.resetCircularFocus,this);this.mpWidgetDetailPage.mpWidgetSummary.on("refresh",this.resetCircularFocus,this);var c=function(m,k){var j=this.down("#mpWidgetDetailPage");j.recordId=k.data.id;var h=this.down("#mpMainPanel");h.layout.setActiveItem("mpWidgetDetailPage")};this.mpSearchResults=Ext.widget("templateeventdataview",{pageSize:12,itemId:"mpSearchResults",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div id="{uuid}-thumb" class="thumb-wrap dataview-item" style="width:'+DEFAULT_ITEM_WIDTH+'px;">',"<center>",'<div id="{uuid}-thumb-icon" class="thumb">','<img src="{imageLargeUrl}">',"</div>",'<div id="{uuid}-thumb-name" class="thumb-text">{shortName}</div>','<div id="{uuid}-thumb-author" class="thumb-text">By {shortAuthor}</div>',"</center>","</div>","</tpl>",{compiled:true,createTooltip:function(j,h){return Ext.util.Format.htmlEncode(Ext.util.Format.ellipsis(j,30))+"<br>"+Ext.util.Format.htmlEncode(Ext.util.Format.ellipsis(h,144))}}),multiSelect:false,singleSelect:true,autoScroll:true,store:Ozone.components.MPListingsAPI.getStore(),autoHeight:true,cls:"mpSearchResults",itemSelector:"div.dataview-item",overItemCls:"x-grid3-row-over",selectedItemCls:"x-grid3-cell-selected",region:"center",listeners:{itemdblclick:{fn:c,scope:this},itemkeydown:{fn:function(k,j,n,m,h){switch(h.getKey()){case h.ENTER:case h.SPACE:c.apply(this,arguments)}},scope:this},templaterendered:{fn:function(h){var k=h.getNodes();var j=h.getRecords(k);for(var m=0;m<k.length;m++){var q=Ext.util.Format.htmlEncode(j[m].data.title);var n=Ext.util.Format.htmlEncode(Ext.util.Format.ellipsis(j[m].data.description,144));var p='<div class="tooltip-title">'+q+"</div><div>"+n+"</div>";Ext.create("Ext.tip.ToolTip",{target:k[m],html:p});Ozone.components.focusable.Focusable.setupFocus(k[m])}},scope:this}},prepareData:function(h){h.shortName=Ext.util.Format.htmlEncode(Ext.util.Format.ellipsis(h.title,10));h.shortAuthor=Ext.util.Format.htmlEncode(Ext.util.Format.ellipsis(h.author,7));return h}});function g(u,p,m,h){var k=Ozone.util.parseID;var n=u.tpl.idHeader;var r=k(m.id,n)!="all"?parseInt(k(m.id,n),10):undefined;var q=[];if(r){q.push(r)}var t=Ozone.components.MPListingsAPI.getStore();var j=t.lastOptions;Ext.apply(j.params,{categoryIDs:q.length>0?("["+q.toString()+"]"):undefined,event:{dataView:u,index:p,node:m,event:h},countCategories:false,start:0,limit:this.mpSearchResults.pageSize,currentPage:1,queryString:j.params.queryString,callback:function(x,D,B){var v=D.event;var w=v.dataView.getNodes();for(var z=0;z<w.length;z++){if(v.node.id==w[z].id){(Ext.create("Ext.core.Element",w[z])).addCls("category-selected")}else{(Ext.create("Ext.core.Element",w[z])).removeCls("category-selected")}}var y=Ext.get("category-tree-all");if(y){y.removeCls("category-selected")}var C=this.down("#mpMainPanel");var A=Ozone.components.MPListingsAPI.getStore();if(A&&C){if(A!==this.mpSearchResults.store){this.mpSearchResults.bindStore(A)}C.layout.setActiveItem("mpSearchResultsPanel")}},scope:this});Ozone.components.MPListingsAPI.loadStore(j.params,true)}this.mpCategories=Ext.widget("templateeventdataview",{id:"mpCategoryTree",itemId:"mpCategoryTree",multiSelect:false,singleSelect:true,store:Ozone.components.MPCategoryAPI.getStore(),autoHeight:false,autoScroll:true,itemSelector:"span.category-selectable",region:"center",ctCls:"navigation-panel",selectedItemCls:"",listeners:{itemclick:{fn:g,scope:this},itemkeydown:{fn:function(n,j,m,k,h){switch(h.getKey()){case h.ENTER:case h.SPACE:g.apply(this,arguments)}},scope:this},templaterendered:{fn:function(k){var j=Ext.get("category-tree-all");if(j){function h(){var n=Ozone.util.parseID;var r=k.tpl.idHeader;var q=undefined;var p=[];if(q){p.push(q)}var m=Ozone.components.MPListingsAPI.getStore();Ozone.components.MPListingsAPI.loadStore({queryString:m.lastOptions.params.queryString,categoryIDs:undefined,countCategories:false,start:0,limit:this.mpSearchResults.pageSize,sort:"title",order:"asc",callback:function(v,w,z){var u=k.getNodes();for(var y=0;y<u.length;y++){(Ext.create("Ext.core.Element",u[y])).removeCls("category-selected")}if(j){j.addCls("category-selected")}var t=this.down("#mpMainPanel");var x=Ozone.components.MPListingsAPI.getStore();if(x&&t){if(x!==this.mpSearchResults.store){this.mpSearchResults.bindStore(x)}t.layout.setActiveItem("mpSearchResultsPanel")}},scope:this})}j.addListener("click",h,this);j.addListener("keydown",function(m){switch(m.getKey()){case m.ENTER:case m.SPACE:h.apply(this)}},this)}Ext.select(".category-selectable, .category-all-selectable").each(function(m){Ozone.components.focusable.Focusable.setupFocus(m.dom,this)},this);this.resetCircularFocus()},scope:this}},tpl:Ext.create("Ext.XTemplate",'<div id="category-tree" class="category-tree">','<span class="category-header">Categories</span><br>','<span id={id:this.createID} class="category-selected category-all-selectable">All Categories</span><br>','<tpl for=".">','<span id={id:this.createID} class="category-selectable">','{title}<span id="{id:this.createID}-count"></span>',"</span><br>","</tpl>","</div>",{compiled:true,idHeader:"category-tree-",createID:function(h){return h?this.idHeader+h:this.idHeader+"all"}})});this.mpNavigation={itemId:"mpNavigation",cls:"mpNavigation",region:"west",split:false,border:true,layout:"border",width:200,items:[this.mpHomeIcon,this.mpCategories]};var b=[["Alphabetical: A -> Z","title-asc"],["Alphabetical: Z -> A","title-desc"],["Newest -> Oldest","releaseDate-desc"],["Oldest -> Newest","releaseDate-asc"]];var e=new Array();e.push("Sort&nbsp;");e.push({xtype:"combo",itemId:"mpSortCombo",store:new Ext.data.SimpleStore({data:b,fields:["sortLabel","sortType"]}),valueField:"sortType",displayField:"sortLabel",typeAhead:true,mode:"local",triggerAction:"all",selectOnFocus:true,allowBlank:true,forceSelection:true,width:125,listeners:{select:{scope:this,fn:function(m,h,k){var j={sorters:[]};switch(m.getValue()){case"releaseDate-asc":j.sorters.push({property:"releaseDate",direction:"asc"});break;case"releaseDate-desc":j.sorters.push({property:"releaseDate",direction:"desc"});break;case"title-desc":j.sorters.push({property:"title",direction:"desc"});break;case"title-asc":j.sorters.push({property:"title",direction:"asc"});break}Ozone.components.MPListingsAPI.loadStore(j,true)}}}});e.push("->");e.push({xtype:"searchbox",listeners:{searchchanged:function(k,j){var h=this.down("#mpMainPanel");if(h){h.layout.setActiveItem("mpSearchResultsPanel");this.searchByText(j)}},scope:this}});var a={itemId:"mpSearchResultsPanel",cls:"mpSearchResultsPanel",items:[this.mpSearchResults],autoScroll:true,autoHeight:false,bbar:Ext.widget("sortablepagingtoolbar",{itemId:"mpPagingToolbar",cls:"mpPagingToolbar",pageSize:this.mpSearchResults.pageSize,store:this.mpSearchResults.store,displayInfo:true})};this.mpMainPanel={itemId:"mpMainPanel",cls:"mpMainPanel",xtype:"panel",region:"center",activeItem:0,layout:"bufferedcard",flex:3,layoutConfig:{deferredRender:true,layoutOnCardChange:true},dockedItems:{xtype:"toolbar",dock:"top",layout:{type:"hbox",align:"stretchmax"},items:e},listeners:{afterlayout:{fn:function(h,j){this.resetCircularFocus()},scope:this}},items:[a,this.mpWidgetDetailPage]};this.mpPanel=Ext.create("Ext.panel.Panel",{itemId:"mpPanel",region:"center",layout:{type:"hbox",align:"stretch"},split:false,border:false,items:[this.mpNavigation,this.mpMainPanel]});var d=Ext.create("Ext.panel.Panel",{itemId:"mpLoginPanel",html:'<iframe id="mpLoginIFrame" src="'+Ozone.config.marketplaceLocation+'/about.gsp" height="100%" width="100%"></iframe>'});this.mpMainPanelContainer={itemId:"mpMainPanelContainer",cls:"mpMainPanelContainer",xtype:"panel",region:"center",activeItem:"mpLoginPanel",layout:"bufferedcard",layoutConfig:{deferredRender:true,layoutOnCardChange:true},items:[d]};this.mpProgressBar=Ext.create("Ext.ProgressBar",{itemId:"mpProgressBar",width:this.width-16});Ext.applyIf(this,{items:[this.mpMainPanelContainer],bbar:[this.mpProgressBar]});this.on("resize",this.onResize);this.callParent()},onResize:function(d,b,a){this.callParent(arguments);var c=this.down("#mpProgressBar");c.setWidth(b-16)},onShow:function(b){this.callParent(arguments);this.maxTimeout=30000;this.timeoutInterval=5000;if(!this.alreadyShownFlag){this.initialTimeoutInterval=Ozone.config.mpInitialPollingInterval}else{this.initialTimeoutInterval=this.timeoutInterval}this.alreadyShownFlag=true;var e=this.down("#mpProgressBar");var d=this.getComponent("mpMainPanelContainer");var a="Loading Marketplace Widget";if(d.layout.activeItem.itemId!="mpLoginPanel"){a="Refreshing Marketplace Widget"}e.wait({text:a,increment:(this.maxTimeout/1000)});var h=false;var g={pingMP:function(j){if(j.maxTimeout){j.maxTimeout=j.maxTimeout-j.timeoutInterval}else{a="Refreshing Marketplace Widget";e.updateText(a);e.wait({text:a,increment:(j.timeoutInterval/1000)})}try{Ozone.marketplace.util.getOwfCompatibleItems({useIndex:true,max:0,timeout:2000,success:function m(r){h=true;clearTimeout(j.timeout);document.getElementById("mpLoginIFrame").src=Ozone.config.marketplaceLocation+"/about.gsp";if(d){if(d.layout.activeItem.itemId=="mpLoginPanel"){d.add(j.mpPanel);d.layout.setActiveItem("mpPanel");Ozone.components.MPCategoryAPI.loadStore({start:0,limit:20,callback:function(){Ozone.components.MPListingsAPI.loadStore({countCategories:false,start:0,limit:this.mpSearchResults.pageSize,pageSize:this.mpSearchResults.pageSize,sorters:[{property:"title",direction:"asc"}]})},scope:j})}else{try{var q=Ozone.components.MPListingsAPI.getStore();Ozone.components.MPListingsAPI.loadStore(q.lastOptions.params,true)}catch(u){var t=u}if(j.down("#mpMainPanel").layout.activeItem.itemId=="mpWidgetDetailPage"){var p=j.down("#mpWidgetDetailPage");p.updateDetails()}}}e.reset();e.updateText("");j.timeoutInterval=Ozone.config.mpPollingInterval?Ozone.config.mpPollingInterval:300000;j.maxTimeout=j.timeoutInterval*2;j.timeout=setTimeout(owfdojo.hitch(g,"pingMP",j),j.timeoutInterval)},failure:function n(q,p){if(j.maxTimeout<=0){clearTimeout(j.timeout);e.reset();Ozone.Msg.alert(Ozone.util.ErrorMessageString.mpErrorTitle,Ozone.util.ErrorMessageString.mpErrorMsg);Ext.getCmp("mpWindow").hide()}else{if(!h&&d.layout.activeItem&&d.layout.activeItem.itemId!="mpLoginPanel"){document.getElementById("mpLoginIFrame").src=Ozone.config.marketplaceLocation+"/about.gsp";d.layout.setActiveItem("mpLoginPanel")}j.timeoutInterval=5000;if(j.maxTimeout>=30000){j.maxTimeout=30000}clearTimeout(j.timeout);j.timeout=setTimeout(owfdojo.hitch(g,"pingMP",j),j.timeoutInterval)}}})}catch(k){clearTimeout(j.timeout);e.reset();Ozone.Msg.alert(Ozone.util.ErrorMessageString.mpErrorTitle,Ozone.util.ErrorMessageString.mpErrorMsg);Ext.getCmp("mpWindow").hide()}}};if(this.timeout){clearTimeout(this.timeout)}this.timeout=setTimeout(owfdojo.hitch(g,"pingMP",this),this.initialTimeoutInterval);var c=Ext.get("mpShoppeIcon");if(c){c.removeAllListeners();c.on("click",function(k,n,m){var j=this.down("#mpMainPanel");if(j){j.layout.setActiveItem("mpSearchResultsPanel")}});c.on("mouseover",function(j,k){this.dom.style.cursor="pointer"});c.on("mouseout",function(j,k){this.dom.style.cursor="default"})}},resetCircularFocus:function(){this.tearDownCircularFocus();this.setupFocus(this.getEl().select(".category-all-selectable").first(),this.getEl().select("button").filter(function(a){return a.isVisible(true)}).last())}});Ext.define("Ozone.components.marketplace.MPWidgetDetailsPanel",{extend:"Ext.panel.Panel",alias:["widget.marketplace.widgetdetails","widget.Ozone.components.marketplace.MPWidgetDetailsPanel"],itemId:"mpWidgetDetailPage",cls:"mpWidgetDetailPage",preventHeader:true,autoScroll:true,recordId:null,parentWidget:{},requiredListings:[],mpWidgetSummary:null,mpWidgetSpecifications:null,mpWidgetAssociations:null,returnToSearchResults:function(){var a=this.up("#mpMainPanel"),b=a.up("#mpWindow");a.layout.setActiveItem("mpSearchResultsPanel");b.focus()},refreshPage:function(a,e){this.parentWidget=a?a:this.parentWidget;this.requiredListings=e?e:this.requiredListings;this.mpWidgetSummary.store=new Ext.data.Store({model:"Ozone.marketplace.model.ServiceItem",data:[this.parentWidget]});this.mpWidgetSummary.tpl.overwrite(this.mpWidgetSummary.el,this.parentWidget);this.mpWidgetSummary.doComponentLayout();var g=Ext.get("mpSearchResultsLink");if(g){Ozone.components.focusable.Focusable.setupFocus(g);g.addListener({click:{fn:this.returnToSearchResults,scope:this},keydown:{fn:function(h,j){switch(h.getKey()){case h.ENTER:case h.SPACE:this.returnToSearchResults()}},scope:this}})}var b=Ext.get("mpAddButton");if(b){Ext.create("Ext.Button",{text:"Add Widget",renderTo:"mpAddButton",width:100,handler:function(){this.addWidget()},scope:this})}this.mpWidgetSpecifications.tpl.overwrite(this.mpWidgetSpecifications.body,this.parentWidget);this.mpWidgetSpecifications.doComponentLayout();var c=[];for(var d=0;d<this.requiredListings.length;d++){c.push(Ext.create("Ozone.marketplace.model.ServiceItem",this.requiredListings[d]))}this.mpWidgetAssociations.setTitle(this.parentWidget.title+" Requires:");this.mpWidgetAssociations.store=Ext.data.StoreManager.lookup("requiredWidgetsStore");this.mpWidgetAssociations.store.loadRecords(c,{addRecords:false});if(this.requiredListings&&this.requiredListings.length>0){this.mpWidgetAssociations.show()}else{this.mpWidgetAssociations.hide()}this.mpWidgetSummary.fireEvent("refresh",this.mpWidgetSummary)},updateDetails:function(a){this.recordId=a?a:this.recordId;if(this.recordId){var b=this;this.setLoading(true);Ozone.marketplace.util.getOWFRequiredListings({id:this.recordId,success:function c(e){if(e.data instanceof Array){b.refreshPage(e.data[0],e.data.slice(1))}else{b.refreshPage(e.data,[])}b.setLoading(false)},failure:function d(g,e){b.setLoading(false)}})}},addWidget:function(){var m={};var q=[];var g=[];var c=this.requiredListings;var a=this.parentWidget;if(Ozone.config.enablePendingApprovalWidgetTagGroup){m={name:Ozone.config.carousel.pendingApprovalTagGroupName,visible:true,position:-1,editable:false}}else{var b=new Date();var n=Ext.Date.format(b,"Y-m-d");m={name:Ozone.config.carousel.approvedTagGroupName+" on "+n,visible:true,position:-1,editable:true}}if(a.requires){for(var h=0;h<a.requires.length;h++){g.push(a.requires[h].uuid)}}var p={displayName:a.title,height:200,imageUrlLarge:a.imageLargeUrl?a.imageLargeUrl:Ozone.util.contextPath(),imageUrlSmall:a.imageSmallUrl?a.imageSmallUrl:Ozone.util.contextPath(),isExtAjaxFormat:true,widgetGuid:a.uuid,widgetUrl:a.launchUrl,width:200,widgetVersion:a.versionName,tags:Ext.JSON.encode([m]),singleton:a.owfProperties&&a.owfProperties!=""?a.owfProperties.singleton:false,visible:a.owfProperties&&a.owfProperties!=""?a.owfProperties.visibleInLaunch:true,isSelected:true,background:false};if(g.length>0){p.directRequired=Ext.JSON.encode(g)}q.push(Ext.JSON.encode(p));if(c&&c.length>0){for(var h=0;h<c.length;h++){g=[];for(var e=0;e<c[h].requires.length;e++){g.push(c[h].requires[e].uuid)}p={displayName:c[h].title,height:200,imageUrlLarge:c[h].imageLargeUrl?c[h].imageLargeUrl:Ozone.util.contextPath(),imageUrlSmall:c[h].imageSmallUrl?c[h].imageSmallUrl:Ozone.util.contextPath(),isExtAjaxFormat:true,widgetGuid:c[h].uuid,widgetUrl:c[h].launchUrl,width:200,widgetVersion:c[h].versionName,tags:Ext.JSON.encode([m]),singleton:c[h].owfProperties?c[h].owfProperties.singleton:false,visible:c[h].owfProperties?c[h].owfProperties.visibleInLaunch:true,background:false};if(g.length>0){p.directRequired=Ext.JSON.encode(g)}q.push(Ext.JSON.encode(p))}var d=Ext.create("Ext.panel.Panel",{autoScroll:true,preventHeader:true,cls:"mpWindow",bodyCls:"mpMsgWindow",data:c,tpl:Ext.create("Ext.XTemplate",'<div class="mpParentListing">',"<table>","<tr>",'<td valign="top" width="65">','<div class="parent-icon">','<img src="'+a.imageLargeUrl+'" title="'+Ext.util.Format.htmlEncode(a.title)+'">',"</div>","</td>",'<td valign="top">','<div class="parent-title">'+Ext.util.Format.htmlEncode(a.title)+"</div>",'<div class="parent-text">'+Ozone.layout.DialogMessages.marketplaceWindow_RequiredListingsAlertMsg+"</div>","</td>","</tr>","</table>","</div>",'<div id="mpMsgWindowProgress" class="mpMsgWindowProgress"></div>','<div class="mpRequiredListings">','<tpl for=".">','<div class="mpDetailSummary {[xindex % 2 === 0 ? "" : "striped-row"]}">','<table width="100%">',"<tr>",'<td valign="top" width="85">','<div class="detail-icon">','<img src="{imageLargeUrl}" title="{title:this.htmlEncode}">',"</div>","</td>",'<td valign="top">','<div class="detail-title">{title:this.htmlEncode}</div>','<div class="detail-version">',"Version {versionName:this.htmlEncode}&nbsp;&nbsp;{owfProperties:this.visibleInLaunch}","</div>",'<div class="mpDetailInfo">','<span class="detail-author-label">Owner: </span>','<span class="detail-author">{author:this.htmlEncode}</span>',"</div>",'<tpl if="releaseDate != &quot;&quot;">','<div class="mpDetailInfo">','<span class="detail-released-label">Released: </span>','<tpl if="releaseDate != &quot;&quot;">','<span class="detail-released">{releaseDate:this.displayDate}</span>',"</tpl>","</div>","</tpl>","</td>",'<td valign="top">','<div style="padding-top:25px;">&nbsp;</div>','<div class="mpDetailInfo">','<span class="detail-organization-label">Organization: </span>','<span class="detail-organization">{organization:this.htmlEncode}</span>',"</div>",'<tpl if="lastActivity != null && lastActivity.activityDate != &quot;&quot;">','<div class="mpDetailInfo">','<span class="detail-modified-label">Modified: </span>','<tpl if="lastActivity != null && lastActivity.activityDate != &quot;&quot;">','<span class="detail-modified">{lastActivity.activityDate:this.displayDate}</span>',"</tpl>","</div>","</tpl>","</td>","</tr>","</table>","</div>","</tpl>","</div>",{compiled:true,htmlEncode:function(j){return Ext.util.Format.htmlEncode(j)},displayDate:function(v){if(v){var y=v.substr(0,4);var x=parseInt(v.substr(5,2),10)-1;var j=v.substr(8,2);var t=v.substr(11,2);var r=v.substr(14,2);var u=v.substr(17,2);var w=new Date(y,x,j,t,r,u,0);v=Ext.Date.format(w,"m/d/Y")}return v?v:""},visibleInLaunch:function(j){return j&&j.visibleInLaunch?"":"(Hidden)"}})});var k=Ext.create("Ext.window.Window",{title:"Adding Widget",width:650,height:400,layout:"fit",modal:true,items:[d],dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",items:[{xtype:"tbfill"},{xtype:"button",itemId:"okBtn",text:Ozone.layout.MessageBoxButtonText.ok,handler:function(){var j=Ext.create("Ext.ProgressBar",{text:"Adding Widget...",autoShow:true,renderTo:"mpMsgWindowProgress"});j.wait({text:"Adding Widget...",interval:1000,increment:100});owfdojo.xhrPost({url:Ozone.util.contextPath()+"/widget/",sync:true,content:{addExternalWidgetsToUser:true,widgets:Ext.JSON.encode(q)},load:function(t,r){var u=Ext.getCmp("launchMenuPanel");u.widgetStore.load();k.close()},error:function(t,r){k.close();Ozone.Msg.alert(Ozone.layout.DialogMessages.error,Ozone.layout.DialogMessages.marketplaceWindow_AddWidget,null,null,{cls:"confirmationDialog"})}})}},{xtype:"button",itemId:"cancelBtn",text:Ozone.layout.MessageBoxButtonText.cancel,handler:function(){k.close()}},{xtype:"tbfill"}]}],listeners:{afterrender:function(j){Ext.applyIf(j,new Ozone.components.focusable.EscCloseHelper());j.setupFocusOnEsc(Ext.getCmp("mpWindow").getFocusEl());Ext.applyIf(j,new Ozone.components.focusable.CircularFocus());j.setupFocus(j.down("#okBtn").getFocusEl(),j.down("#cancelBtn").getFocusEl())}}});k.show()}else{owfdojo.xhrPost({url:Ozone.util.contextPath()+"/widget/",sync:true,content:{addExternalWidgetsToUser:true,widgets:Ext.JSON.encode(q)},load:function(r,j){var t=Ext.getCmp("launchMenuPanel");t.widgetStore.load()},error:function(r,j){Ozone.Msg.alert(Ozone.layout.DialogMessages.error,Ozone.layout.DialogMessages.marketplaceWindow_AddWidget,null,null,{cls:"confirmationDialog"})}})}},onBeforeShow:function(a){this.callParent(arguments)},onShow:function(a){this.callParent(arguments);this.updateDetails()},onRender:function(a){this.callParent(arguments);this.updateDetails()},initComponent:function(){Ozone.components.MPListingsAPI=new Ozone.marketplace.MPListingsAPI();Ozone.components.MPCategoryAPI=new Ozone.marketplace.MPCategoryAPI();var a=[];this.mpWidgetSummary=Ext.widget("templateeventdataview",{itemId:"mpWidgetDetailPage",cls:"mpWidgetDetailPage",multiSelect:false,singleSelect:false,simpleSelect:false,autoScroll:true,autoHeight:true,itemSelector:".selectable",listeners:{itemclick:{scope:this,fn:function(g,c,e,d){}},templaterendered:{fn:function(g){g.el.dom.tabIndex=0;g.focus();var d=Ext.get("mpSearchResultsLink");if(d){var e=Ext.bind(function(){this.returnToSearchResults()},this);d.addListener("click",e,this);d.addListener("keydown",function(h){switch(h.getKey()){case Ext.EventObject.ENTER:case Ext.EventObject.SPACE:e()}},this)}var c=Ext.get("mpAddButton");if(c){Ext.create("Ext.Button",{text:"Add Widget",renderTo:"mpAddButton",width:100,handler:function(){this.addWidget()},scope:this})}var d=Ext.get("mpSearchResultsLink");if(d){Ozone.components.focusable.Focusable.setupFocus(d,this)}},scope:this}},tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div id="mpSearchResultsLink" class="return-search-link detail-selectable">Return to Search Results</div>','<div class="detail-title">{title:this.htmlEncode}</div>','<div id="mpDetailSummary" class="mpDetailSummary">',"<table>","<tr>",'<td valign="top" width="125" class="detail-top-row">','<div id="mpDetailIcon" class="mpDetailIcon">','<div class="detail-icon">','<img src="{imageLargeUrl}" title="{title:this.htmlEncode}">',"</div>",'<div id="mpAddButton" class="detail-add-button">',"</div>","</div>","</td>",'<td valign="top">','<div id="mpDetailInfo" class="mpDetailInfo">','<span class="detail-author-label">Owner: </span>','<span class="detail-author">{author:this.htmlEncode}</span>','<span class="detail-version">Version {versionName:this.htmlEncode}</span>',"</div>",'<div class="detail-description">{description:this.htmlEncode}</div>','<div class="detail-categories">','<span class="detail-category-header">Categories: </span>','<span class="detail-category">{categories:this.listCategoryLinks}</span>',"</td>","</td>","</tr>","</table>","</div>",'<div id="mpAddlInfo" class="mpAddlInfo">',"</div>",'<div id="mpDependencies" class="mpDependencies">',"</div>","</tpl>",{compiled:true,idHeader:"detail-category-",htmlEncode:function(c){return Ext.util.Format.htmlEncode(c)},listCategoryLinks:function(c){var e="";for(var d=0;d<c.length;d++){var h=c[d].id?this.idHeader+c[d].id:this.idHeader+"all";var g=Ext.util.Format.htmlEncode(c[d].title);e+='<span id="'+h+'" class="detail-category-link">'+g+"</span>";if(c.length>1&&d<c.length-1){e+=", "}}return e}})});a.push(this.mpWidgetSummary);this.mpWidgetSpecifications=Ext.create("Ext.panel.Panel",{title:"Specifications",data:this.parentWidget,componentCls:"mp-specifications-panel",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"<table>",'<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>State:</div>","</td>",'<td valign="top" class="detail-specifications-row">','<tpl for="state">',"<div>{title:this.htmlEncode}</div>","</tpl>","</td>","</tr>",'<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>Launch URL:</div>","</td>",'<td valign="top" class="detail-specifications-row">',"<div>{launchUrl}</div>","</td>","</tr>",'<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>Organization:</div>","</td>",'<td valign="top" class="detail-specifications-row">',"<div>{organization:this.htmlEncode}</div>","</td>","</tr>",'<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>Technical POC:</div>","</td>",'<td valign="top" class="detail-specifications-row">',"<div>{techPoc:this.htmlEncode}</div>","</td>","</tr>",'<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>Recommended Layouts:</div>","</td>",'<td valign="top" class="detail-specifications-row">',"<div>{recommendedLayouts:this.convertArrayToString}</div>","</td>","</tr>",'<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>Singleton:</div>","</td>",'<td valign="top" class="detail-specifications-row">',"<div>{owfProperties:this.isSingleton}</div>","</td>","</tr>",'<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>Visible in Launch Menu:</div>","</td>",'<td valign="top" class="detail-specifications-row">',"<div>{owfProperties:this.isVisible}</div>","</td>","</tr>",'<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>Screenshot:</div>","</td>",'<td valign="top" class="detail-specifications-row">{screenshot1Url:this.createScreenshot}',"</td>","</tr>",'<tpl if="this.getCreatedBy(createdBy)">','<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>Created By:</div>","</td>",'<td valign="top" class="detail-specifications-row">',"<div>{createdBy:this.getCreatedBy}</div>","</td>","</tr>","</tpl>",'<tpl if="createdDate != &quot;&quot;">','<tr class="detail-specifications">','<td valign="top" width="125" class="detail-specifications-row">',"<div>Created Date:</div>","</td>",'<td valign="top" class="detail-specifications-row">',"<div>{createdDate:this.displayDate}</div>","</td>","</tr>","</tpl>","</table>","</div>","</tpl>",{compiled:true,htmlEncode:function(c){return Ext.util.Format.htmlEncode(c)},getCreatedBy:function(c){return Ext.util.Format.htmlEncode(c.name)},displayDate:function(h){if(h){var m=h.substr(0,4);var k=parseInt(h.substr(5,2),10)-1;var c=h.substr(8,2);var e=h.substr(11,2);var d=h.substr(14,2);var g=h.substr(17,2);var j=new Date(m,k,c,e,d,g,0);h=Ext.Date.format(j,"M d, Y h:i:s A T")}return h?h:""},convertArrayToString:function(c){return c?c.toString().replace(/,/g,", "):""},createScreenshot:function(c){return c?'<div class="detail-specifications-screenshot"><img src="'+c+'" title="{title}"></div>':""},isVisible:function(c){return(c&&Ext.isDefined(c.visibleInLaunch))?c.visibleInLaunch:true},isSingleton:function(c){return(c&&c.singleton)?c.singleton:false}})});a.push(this.mpWidgetSpecifications);var b=Ext.create("Ext.data.Store",{storeId:"requiredWidgetsStore",model:"Ozone.marketplace.model.ServiceItem"});this.mpWidgetAssociations=Ext.create("Ext.grid.Panel",{title:this.parentWidget.title+" Requires:",store:b,hideHeaders:true,componentCls:"mp-required-panel",bodyCls:"mp-required-body",loadMask:true,viewConfig:{stripeRows:false},height:200,columns:[{xtype:"gridcolumn",dataIndex:"imageSmallUrl",width:36,sortable:false,resizable:false,menuDisabled:true,renderer:function(j,d,c,k,g,e){var h='<div><img width="24px" height="24px" src="'+j+'"></div>';return j?h:""}},{dataIndex:"title",flex:1,renderer:function(h,d,c,j,g,e){return h?Ext.util.Format.htmlEncode(h):""}},{xtype:"gridcolumn",dataIndex:"versionName",width:75,sortable:false,menuDisabled:true,renderer:function(j,d,c,k,g,e){var h='<span class="requiredListingsVersion">v.'+Ext.util.Format.htmlEncode(j)+"</span>";return j?h:""}}],listeners:{itemdblclick:{scope:this,fn:function(d,c,g,e,h){this.updateDetails(c.data.id)}}}});a.push(this.mpWidgetAssociations);Ext.applyIf(this,{items:[a]});this.callParent()}});var Ozone=Ozone?Ozone:{};Ozone.chrome=Ozone.chrome?Ozone.chrome:{};Ozone.chrome.WidgetChromeContainer=function(c){var r=this;this.channelName="Ozone._WidgetChromeChannel";this.dashboard=null;r.registerChromeMenuHandlers=function(t,v){if(t.menu){t.menu.componentCls="widgetmenubar";t.menu.tabIndex=0;for(var u=0;u<t.menu.items.length;u++){var w=t.menu.items[u];if(!w.menu){w.handler=function(){var x=gadgets.json.stringify({itemId:this.itemId});gadgets.rpc.call(v,r.channelName,null,"..",x)}}else{r.registerChromeMenuHandlers(w,v)}}}else{t.handler=function(){var x=gadgets.json.stringify({itemId:this.itemId});gadgets.rpc.call(v,r.channelName,null,"..",x)}}};var d=function(w,t){var u={};if(w===undefined){return}for(var v=0;v<t.length;v++){if(w[t[v]]){u[t[v]]=Ext.htmlEncode(w[t[v]])}}return u},q=function(t){var u=d(t,["itemId","xtype","type","icon","text","disabled"]);u.tooltip=d(t.tooltip,["title","text"]);return u},g=function(u){var t=d(u,["itemId","parentId","icon","text","disabled"]);if(u.menu){t.menu={};t.menu.items=Ext.Array.map(u.menu.items,g)}return t};var h=function(w,v){var t={success:false},D;var C=Ozone.util.parseJson(w);if(C!=null){var B=Ext.getCmp(C.id);if(B!=null){if(v.items!=null){var z=v.items;if(!Ext.isArray(v.items)){z=[v.items]}for(var x=0;x<z.length;x++){if(v.type==="button"){D=q(z[x]);D.handler=function(){var E=gadgets.json.stringify({itemId:this.itemId});gadgets.rpc.call(w,r.channelName,null,"..",E)};if(D.xtype==="button"){D.tabIndex=0}B.addTool(D);B.headerModified=true}else{if(v.type==="menu"){D=g(z[x]);r.registerChromeMenuHandlers(D,w);n(D);var A=B.getDockedComponent("menuBar");if(!A){A=Ext.create("Ext.toolbar.Toolbar",{itemId:"menuBar",cls:"widgetmenubar",enableOverflow:true,style:{overflow:"hidden"},layout:{overflowHandler:{type:"StyleableMenu"}},items:[]});B.addDocked(A)}if(D.parentId){var u=A.down("#"+D.parentId);if(u){u.menu.add(D);B.headerModified=true}}else{A.add(D);var y=A.items.length==1?true:false;if(y){B.forceComponentLayout()}B.headerModified=true}}}}}t.success=true}}return gadgets.json.stringify(t)};var p=function(w,v){var t={success:false},D;var C=Ozone.util.parseJson(w);if(C!=null){var B=Ext.getCmp(C.id);if(B!=null){if(v.items!=null){v.pos=v.pos?v.pos:0;var z=v.items;if(!Ext.isArray(v.items)){z=[v.items]}for(var x=0;x<z.length;x++){if(v.type==="button"){D=q(z[x]);D.handler=function(){var E=gadgets.json.stringify({itemId:this.itemId});gadgets.rpc.call(w,r.channelName,null,"..",E)};B.insertTool(D,v.pos+x);B.headerModified=true}else{if(v.type==="menu"){D=g(z[0]);r.registerChromeMenuHandlers(D,w);n(D);var A=B.getDockedComponent("menuBar");if(!A){A=Ext.create("Ext.toolbar.Toolbar",{itemId:"menuBar",cls:"widgetmenubar",enableOverflow:true,style:{overflow:"hidden"},layout:{overflowHandler:{type:"StyleableMenu"}},items:[]});B.addDocked(A)}if(D.parentId){var u=A.down("#"+D.parentId);if(u){u.menu.insert(v.pos+x,D);B.headerModified=true}}else{A.insert(v.pos+x,D);var y=A.items.length==1?true:false;if(y){B.forceComponentLayout()}B.headerModified=true}}}}t.success=true}}}return gadgets.json.stringify(t)};var a=function(w,v){var t={success:false},E;var D=Ozone.util.parseJson(w);if(D!=null){var C=Ext.getCmp(D.id);if(C!=null){t.success=true;var z=v.items;if(!Ext.isArray(v.items)){z=[v.items]}for(var x=0;x<z.length;x++){if(v.type==="button"){E=q(z[0]);E.handler=function(){var F=gadgets.json.stringify({itemId:this.itemId});gadgets.rpc.call(w,r.channelName,null,"..",F)};C.updateTool(E);C.headerModified=true}else{if(v.type==="menu"){E=g(z[0]);r.registerChromeMenuHandlers(E,w);n(E);var A=C.getDockedComponent("menuBar");if(A){var y=A.down("#"+E.itemId);var u=y.ownerCt;var B=u.items.indexOfKey(E.itemId);if(B>-1){u.remove(E.itemId,true);u.insert(B,E);C.headerModified=true}else{alert("Error updating menu. Invalid itemId")}}}}}}}return gadgets.json.stringify(t)};var b=function(w,v){var t={success:false};var C=Ozone.util.parseJson(w);if(C!=null){var B=Ext.getCmp(C.id);if(B!=null){t.success=true;var z=v.items;if(!Ext.isArray(v.items)){z=[v.items]}for(var x=0;x<z.length;x++){var D=Ext.apply({},z[x]);if(v.type==="button"){B.removeTool(D.itemId)}else{if(v.type==="menu"){var A=B.getDockedComponent("menuBar");if(A){var y=A.down("#"+D.itemId);if(y){var u=y.ownerCt;u.remove(D.itemId,true);if(A.items.items.length==0){B.removeDocked(A)}}}}}}}}return gadgets.json.stringify(t)};var k=function(w,v){var t={success:false};var B=Ozone.util.parseJson(w);if(B!=null){var z=Ext.getCmp(B.id);if(z!=null){t.success=true;t.items=[];if(v.type=="button"&&z.tools!=null){for(var x in z.tools){t.items.push(z.tools[x].id)}}else{if(v.type=="menu"){function A(C){var E=[];if(C.itemId){E.push(C.itemId)}if(C.menu){for(var D=0;D<C.menu.items.items.length;D++){E=E.concat(A(C.menu.items.items[D]))}}return E}var y=z.getDockedComponent("menuBar");if(y){for(var x=0;x<y.items.length;x++){var u=A(y.items.items[x]);t.items=t.items.concat(u)}}}}}}return gadgets.json.stringify(t)};var m=function(t,x){var u={success:false};var w=Ozone.util.parseJson(t);if(w!=null){var v=Ext.getCmp(w.id);if(v!=null){u.success=true;u.modified=(v.headerModified==true)}}return gadgets.json.stringify(u)};var n=function(t){if(t.menu){t.menu.listeners={hide:function(v){var u=Ext.getCmp(v.constrainTo.id);if(u){u.getFocusEl().focus()}}}}};var j=function(t){var u={success:false};var w=Ozone.util.parseJson(t);if(w!=null){var v=Ext.getCmp(w.id);if(v!=null){u.success=true;u.title=v.title}}return gadgets.json.stringify(u)};var e=function(t,x){var u={success:false};var w=Ozone.util.parseJson(t);if(w!=null){var v=Ext.getCmp(w.id);if(v!=null&&v.setTitle!=null){u.success=true;v.setTitle(x.title);u.title=v.title}}return gadgets.json.stringify(u)};if(c!=null&&c.eventingContainer!=null){this.eventingContainer=c.eventingContainer;this.eventingContainer.registerHandler(this.channelName,function(t,w){var u=true;var v=Ozone.util.parseJson(w);switch(v.action){case"isModified":u=m(t,v);break;case"addHeaderButtons":u=h(t,v);break;case"updateHeaderButtons":u=a(t,v);break;case"insertHeaderButtons":u=p(t,v);break;case"removeHeaderButtons":u=b(t,v);break;case"listHeaderButtons":u=k(t,v);break;case"addHeaderMenus":u=h(t,v);break;case"updateHeaderMenus":u=a(t,v);break;case"insertHeaderMenus":u=p(t,v);break;case"removeHeaderMenus":u=b(t,v);break;case"listHeaderMenus":u=k(t,v);break;case"getTitle":u=j(t,v);break;case"setTitle":u=e(t,v);break;default:}return u})}else{throw {name:"WidgetChromeContainerException",message:"eventingContainer is null"}}};Ext.define("Ozone.components.widget.DeleteWidgetsPanel",{extend:"Ext.panel.Panel",alias:["widget.deletewidgetspanel","widget.Ozone.components.widget.DeleteWidgetsPanel"],delWidgets:null,dashboardContainer:null,delTitlePanel:null,delView:null,reqTitlePanel:null,reqGrid:null,mixins:{circularFocus:"Ozone.components.focusable.CircularFocus"},id:"topdeletepanel",width:600,height:300,layout:{type:"vbox",align:"stretch"},initComponent:function(){this.delTitlePanel=Ext.create("Ext.panel.Panel",{layout:"fit",border:false,html:"You have selected to delete 0 widgets:"});this.delView=Ext.create("Ext.grid.Panel",{cls:"delView",columns:[{xtype:"templatecolumn",sortable:false,hideable:false,tpl:'<img src="{headerIcon}" />',width:36},{header:"Name",dataIndex:"name",flex:1,hideable:false}],store:Ext.create("Ext.data.Store",{autoDestroy:true,storeId:"deleteStore",idIndex:0,sortInfo:{field:"name",direction:"ASC"},fields:[{name:"guid"},{name:"name"},{name:"headerIcon"},{name:"image"}]})});this.reqTitlePanel=Ext.create("Ext.panel.Panel",{itemId:"reqTitlePanel",layout:"fit",hidden:true,border:false,html:"These widgets are required by other widgets in OWF. Deleting these widgets will additionally delete the widgets listed below."});this.reqGrid=Ext.create("Ext.grid.Panel",{itemId:"reqGrid",hidden:true,store:Ext.create("Ext.data.Store",{autoDestroy:true,storeId:"requiredStore",idIndex:0,sortInfo:{field:"name",direction:"ASC"},fields:[{name:"id"},{name:"name"},{name:"version"},{name:"url"},{name:"headerIcon"},{name:"image"},{name:"width"},{name:"height"},{name:"widgetGuid"},{name:"maximized"},{name:"minimized"},{name:"x"},{name:"y"},{name:"visible"},{name:"tags"},{name:"totalUsers"},{name:"totalGroups"},{name:"singleton"}]}),columns:[{dataIndex:"headerIcon",width:36,sortable:false,hideable:false,menuDisabled:true,renderer:function(q,j,h,r,p,k){var n=null;var m=Ozone.util.contextPath();if(!q.match(new RegExp("^/?"+m+"/.*$","i"))&&!q.match(new RegExp("^https?://.*","i"))){if(q.indexOf("/")==0){n=m+q}else{n=m+"/"+q}}else{n=q}return'<img src="'+n+'" title="'+h.data.name+'">'}},{header:"Name",dataIndex:"name",flex:1,sortable:false,hideable:false,menuDisabled:true},{header:"Version",dataIndex:"version",width:121,sortable:false,hideable:false,menuDisabled:true},{header:"Tags",dataIndex:"tags",flex:1,sortable:false,hideable:false,menuDisabled:true,renderer:function(q,j,h,r,m,k){var p="";if(q!=null){for(var n=0;n<q.length;n++){p+=q[n].name;if(n<q.length-1){p+=", "}}}return p}}],viewConfig:{emptyText:"No additional widgets to delete"},autoScroll:true,foreceFilt:true,flex:1,border:false,iconCls:"icon-grid"});this.items=[this.delTitlePanel,this.delView,this.reqTitlePanel,this.reqGrid];this.okBtn=Ext.create("Ext.button.Button",{text:Ozone.layout.DialogMessages.ok,handler:function(h){this.del()},scope:this});this.cancelBtn=Ext.create("Ext.button.Button",{xtype:"button",text:"Cancel",handler:function(h){this.cancel()},scope:this});this.buttons=[this.okBtn,this.cancelBtn];var d=this;var c=[];var e=[];var a=this.delWidgets;for(var b=0;b<a.length;b++){c.push(a[b].guid);e.push([a[b].guid,Ext.htmlEncode(a[b].name),a[b].headerIcon,a[b].image])}var g=this.delView.getStore();if(g){g.removeAll();g.loadData(e,true)}this.delTitlePanel.update("You have selected to delete "+g.getCount()+" widgets:");Ozone.pref.PrefServer.getDependentPersonWidgets({content:{ids:c},onSuccess:function(j){var q=[];var p=j.data;var n=d.delView.getStore();if(p){for(var k=0;k<p.length;k++){if(-1==n.find("guid",p[k].path)){q.push({id:p[k].path,name:p[k].value.namespace,version:p[k].value.widgetVersion,url:p[k].value.url,headerIcon:p[k].value.headerIcon,image:p[k].value.image,width:p[k].value.width,height:p[k].value.height,widgetGuid:p[k].path,maximized:p[k].value.maximized,minimized:p[k].value.minimized,x:p[k].value.x,y:p[k].value.y,visible:p[k].value.visible,tags:p[k].value.tags,totalUsers:p[k].value.totalUsers,totalGroups:p[k].value.totalGroups,singleton:p[k].value.singleton})}}}var r=d.reqTitlePanel;var h=d.reqGrid;var m=d.reqGrid.getStore();if(m){m.removeAll();if(q.length>0){r.show();h.show();m.loadData(q);d.doLayout()}else{r.hide();h.hide();d.doLayout()}}},onFailure:function(){alert("Error")}});this.callParent();this.on("afterrender",function(h){h.setupFocus(h.okBtn.getFocusEl(),h.cancelBtn.getFocusEl())})},del:function(){var g=this.delView.getStore();var h=g.getRange();var e=this.reqGrid.getStore();var a=e.getRange();var d=[];for(var b=0;b<h.length;b++){d.push(h[b].data.guid)}for(var b=0;b<a.length;b++){d.push(a[b].data.widgetGuid)}var c=this;Ozone.pref.PrefServer.updateAndDeleteWidgets({widgetsToUpdate:[],widgetGuidsToDelete:d,updateOrder:false,onSuccess:function(j){c.dashboardContainer.retrieveUpdatedWidgets()},onFailure:function(){Ozone.Msg.alert(Ozone.util.ErrorMessageString.saveUpdatedWidgets,Ozone.util.ErrorMessageString.saveUpdatedWidgetsMsg,null,null,null,c.dashboardContainer.modalWindowManager)}});this.cancel()},cancel:function(){this.ownerCt.close()}});var Ozone=Ozone||{};Ozone.metrics=Ozone.metrics||{};Ozone.metrics.logMetric=function(d,h,c,e,g,k,a,j){var b=new Date();Ozone.util.Transport.send({url:OWF.getContainerUrl()+"/metric",method:"POST",onSuccess:function(m){},autoSendVersion:false,content:{metricTime:b.getTime(),userId:d,userName:h,site:c,userAgent:navigator.userAgent,component:e,componentId:g,instanceId:k,metricTypeId:a,widgetData:j}})};Ozone.metrics.logBatchMetrics=function(b){var a=new Date();Ozone.util.Transport.send({url:OWF.getContainerUrl()+"/metric",method:"POST",onSuccess:function(c){},autoSendVersion:false,content:{data:b}})};Ozone.metrics.logWidgetRender=function(a,c,d,b){if(Ozone.config.metric.enabled===true){Ozone.metrics.logMetric(a,c,d,b.name,b.widgetGuid,b.id,"ozone.widget.view","")}};(function(){var b=function(p,q,r,u,v){if(typeof q!=="string"){this.prepareListenerConfig(p,q,true);return}var m=Ext.getDom(p),d=this.getEventListenerCache(m,q),t=this.normalizeEvent(q).eventName,n=d.length,k,g,e,h;v=v||{};while(n--){g=d[n];if(g&&(!r||g.fn==r)&&(!u||g.scope===u)){e=g.wrap;if(e.task){clearTimeout(e.task);delete e.task}k=e.tasks&&e.tasks.length;if(k){while(k--){clearTimeout(e.tasks[k])}delete e.tasks}if(m.detachEvent){m.detachEvent("on"+t,e)}else{m.removeEventListener(t,e,v.capture||false)}if(e&&m==document&&q=="mousedown"){this.stoppedMouseDownEvent.removeListener(e)}Ext.Array.erase(d,n,1)}}};Ext.apply(Ext.EventManager,{removeListener:b,un:b});var a=function(d,h,g,e){Ext.EventManager.un(this.dom,d,h,g||this,e);return this};Ext.apply(Ext.Element.prototype,{removeListener:a,un:a});var c={removeManagedListener:function(p,h,m,q,d){var k=this,r,g,n,e,j;if(typeof h!=="string"){r=h;for(h in r){if(r.hasOwnProperty(h)){g=r[h];if(!k.eventOptionsRe.test(h)){k.removeManagedListener(p,h,g.fn||g,g.scope||r.scope,d)}}}}n=k.managedListeners?k.managedListeners.slice():[];for(j=0,e=n.length;j<e;j++){k.removeManagedListenerItem(false,n[j],p,h,m,q,d)}},removeManagedListenerItem:function(e,d,m,h,k,j,g){if(e||(d.item===m&&d.ename===h&&(!k||d.fn===k)&&(!j||d.scope===j)&&(!g||d.options===g))){d.item.un(d.ename,d.fn,d.scope,d.options);if(!e){Ext.Array.remove(this.managedListeners,d)}}}};Ext.override(Ext.util.Observable,c);Ext.override(Ozone.components.tab.WidgetTab,c)})();