var Ozone=Ozone?Ozone:{};OWF=window.OWF?window.OWF:{};(function(f,h,a){var b="_widgetReady",g=false,j=[],c=Ozone.util.parseWindowNameData(),i,k,e,d;owfdojo.mixin(OWF,{Eventing:{},RPC:{},Preferences:{},Launcher:{},DragAndDrop:{},Chrome:{},Util:Ozone.util,Metrics:Ozone.metrics,Log:Ozone.log,Lang:Ozone.lang,Version:Ozone.version,ready:function(m,l){if(m===a){throw"Error: no arguments passed";return}if(typeof m!=="function"){throw"Error: handler must be a function";return}g===true?m.call(l):j.push({fn:m,scope:l})},notifyWidgetReady:function(){gadgets.rpc.call("..",b,null,OWF.getInstanceId())},getWidgetGuid:function(){return c.guid},getInstanceId:function(){return c.id},getIframeId:function(){return'{"id":"'+c.id+'"}'},getDashboardLayout:function(){return c.layout},getVersion:function(){return c.version},getUrl:function(){return c.url},getCurrentTheme:function(){return c.currentTheme},getContainerName:function(){return c.containerName},getContainerVersion:function(){return c.containerVersion},isDashboardLocked:function(){return c.locked},getContainerUrl:function(){var l=c.preferenceLocation;return l.substring(0,l.length-6)},getOpenedWidgets:function(l){if(l===a){throw"Error: no arguments passed";return}if(typeof l!=="function"){throw"Error: fn must be a function";return}Ozone.eventing.getAllWidgets(l)}});Ozone.Widget=OWF;OWF._init=function(s,t,n){if(OWF.relayFile!=null){Ozone.eventing.Widget.widgetRelayURL=OWF.relayFile}function q(){for(var v=0,u=["publish","subscribe","unsubscribe"];v<u.length;v++){OWF.Eventing[u[v]]=this[u[v]]}}function o(){OWF.RPC.registerFunctions=Ozone.eventing.registerFunctions;OWF.RPC.getWidgetProxy=Ozone.eventing.importWidget;OWF.RPC.handleDirectMessage=function(u){if(typeof u!=="function"){throw"Error: fn must be a function";return}Ozone.eventing.handleDirectMessage=u}}function l(){for(var u in Ozone.pref.PrefServer){if(typeof Ozone.pref.PrefServer[u]==="function"){OWF.Preferences[u]=Ozone.pref.PrefServer[u]}}}function r(){OWF.Launcher.launch=e.launchWidget;OWF.Launcher.getLaunchData=Ozone.launcher.WidgetLauncherUtils.getLaunchConfigData}function p(){OWF.DragAndDrop={onDragStart:function(x,w){k.addCallback("dragStart",owfdojo.hitch(w,x));return this},onDragStop:function(x,w){k.addCallback("dragStop",owfdojo.hitch(w,x));return this},onDrop:function(x,w){k.addCallback("dropReceive",owfdojo.hitch(w,x));return this},startDrag:function(w){k.doStartDrag(w);return this}};for(var v=0,u=["addDropZoneHandler","getDragStartData","getDropEnabled","setDropEnabled","isDragging","getFlashWidgetId","setFlashWidgetId"];v<u.length;v++){OWF.DragAndDrop[u[v]]=function(w){return function(){return k[w].apply(k,arguments)}}(u[v])}}function m(){for(var v=0,u=["addHeaderButtons","addHeaderMenus","insertHeaderButtons","insertHeaderMenus","isModified","listHeaderButtons","listHeaderMenus","removeHeaderButtons","removeHeaderMenus","updateHeaderButtons","updateHeaderMenus","getTitle","setTitle"];v<u.length;v++){OWF.Chrome[u[v]]=d[u[v]]}}i=Ozone.eventing.Widget.getInstance(function(){k=Ozone.dragAndDrop.WidgetDragAndDrop.getInstance({widgetEventingController:this});e=Ozone.launcher.WidgetLauncher.getInstance();d=Ozone.chrome.WidgetChrome.getInstance({widgetEventingController:this});q.call(this);o();l();r();p();m();Ozone.components.keys.createKeyEventSender(this);g=true;for(var v=0,u=j.length;v<u;v++){j[v].fn.call(j[v].scope)}})}}(window,document));