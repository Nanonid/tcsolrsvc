var Ozone=Ozone||{};Ozone.eventing=Ozone.eventing||{};Ozone.eventing.rpc=Ozone.eventing.rpc||{};Ozone.eventing.rpc.priv=Ozone.eventing.rpc.priv||{};if(typeof JSON==="undefined"){JSON=gadgets.json}(function(h){var e="_widgetReady",f="_getWidgetReady",d={},a={},b={},c={};function g(i){i=i||{};h.getIframeId=i.getIframeId;function l(q,r){gadgets.rpc.call(h.getIframeId(q),"DIRECT_MESSAGEL_CLIENT",null,r)}gadgets.rpc.register("DIRECT_MESSAGE",l);function n(r,q,s,t){gadgets.rpc.call(h.getIframeId(r),"FUNCTION_CALL_CLIENT",null,r,q,s,t)}gadgets.rpc.register("FUNCTION_CALL",n);function j(s,r,t,q){gadgets.rpc.call(h.getIframeId(r),"FUNCTION_CALL_RESULT_CLIENT",null,s,t,q)}gadgets.rpc.register("FUNCTION_CALL_RESULT",j);function m(s,q){var r=a[q]||[];r.push(s);a[q]=r}gadgets.rpc.register("ADD_EVENT",m);function p(q,u){var s=a[q];for(var r=0;r<s.length;r++){var t=s[r];gadgets.rpc.call(h.getIframeId(t),"EVENT_CLIENT",null,q,u)}}gadgets.rpc.register("CALL_EVENT",p);function o(r,s){var q=document.getElementById(h.getIframeId(r));setTimeout(function(){document.body.removeChild(q.parentNode)},500)}gadgets.rpc.register("CLOSE_EVENT",o);function k(q,s){var r=d[q];if(b[q]==null){b[q]=[]}if(s!=null){b[q].push(s)}return r!=null?r:[]}gadgets.rpc.register("GET_FUNCTIONS",k);h.priv.clientToldUsFunctionsHandler=function(t,r,s){var q=JSON.parse(t).id;d[q]=s};h.priv.clientToldUsFunctionsHandlerAfterInit=function(x,w){var u=JSON.parse(x).id;if(!d[u]){d[u]=w;return}var v;for(var t=0,q=w.length;t<q;t++){v=false;for(var s=0,r=d[u].length;s<r;s++){if(w[t]===d[u][s]){v=true;break}}if(v===false){d[u].push(w[t])}}};gadgets.rpc.register("register_functions",function(r,q){h.priv.clientToldUsFunctionsHandlerAfterInit(r,q)});gadgets.rpc.register(e,function(t){c[t]=true;var u=b[t];if(u!=null){for(var r=0,q=u.length;r<q;r++){var s=u[r];if(s!=null){gadgets.rpc.call(s,e,null,t)}}}});gadgets.rpc.register(f,function(q,r){return c[q]==true})}h.init=g})(Ozone.eventing.rpc);