Ext.define("Ozone.data.OWFTransportProxy",{extend:"Ext.data.proxy.Server",alias:"proxy.owftransportproxy",constructor:function(a){this.callParent(arguments);if(a.methods){this.methods=a.methods}else{this.methods={read:"GET",load:"GET",create:"POST",update:"PUT",save:"POST",destroy:"DELETE"}}if(a.updateActions){this.updateActions=a.updateActions}if(a.callback){this.callback=a.callback}},doRequest:function(b,g,c){var f=this.getWriter();var e=this.buildRequest(b,g,c);if(b.allowWrite()){e=f.write(e)}b.params=e.params;b.params.owfversion=Ozone.version.owfversion;b.params._method=this.api[b.action].method?this.api[b.action].method:this.methods[b.action];if(this.updateActions&&this.updateActions[b.action]){b.params.update_action=this.updateActions[b.action]}var d=this;var a=function(h,i){h.resultSet=d.reader.readRecords(i);h.setCompleted();h.setSuccessful();if(Ext.isFunction(d.callback)){d.callback(h)}};Ozone.util.Transport.send({url:Ozone.util.contextPath()+this.api[b.action],method:"POST",onSuccess:function(h){a(b,h);g.call(c,b)},onFailure:Ext.bind(function(h){b.setException(h);this.fireEvent("exception",this,h,b)},this),autoSendVersion:false,timeout:null,content:b.params})}});