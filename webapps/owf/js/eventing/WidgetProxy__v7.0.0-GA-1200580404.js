var Ozone=Ozone?Ozone:{};Ozone.eventing=Ozone.eventing?Ozone.eventing:{};(function(c,a,d){function b(f,e,g,h){gadgets.rpc.call("..","FUNCTION_CALL",null,f,e,g,h)}Ozone.eventing.WidgetProxy=function(n,h,e,k){var i=n,f,m=[],g=k;if(i.charAt(0)==="{"){f=i;i=OWF.Util.parseJson(f).id}else{f='{"id":"'+i+'"}'}if(g==null){g={id:f,isReady:false,callbacks:{},sendMessage:function(o){gadgets.rpc.call("..","DIRECT_MESSAGE",null,i,o)},onReady:function(p,o){if(this.isReady){p.call(o)}else{m.push({fn:p,scope:o})}},fireReady:function(){this.isReady=true;for(var p=0,o=m.length;p<o;p++){m[p].fn.call(m[p].scope)}}}}if(h!=null){for(var l=0;l<h.length;l++){var j=h[l];g[j]=function(o){return function(){var r=arguments[arguments.length-1];var q=typeof r=="function";var p=Array.prototype.slice.call(arguments,0,q?arguments.length-1:arguments.length);if(q){g.callbacks[o]=r}b.call(this,i,e,o,p)}}(j)}}return g}}(window,document));