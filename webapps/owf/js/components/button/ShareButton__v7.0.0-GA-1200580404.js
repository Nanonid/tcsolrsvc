Ext.define("Ozone.components.button.ShareButton",{extend:"Ext.button.Button",alias:["widget.owf-share-button","widget.Ozone.components.button.ShareButton"],DEFAULT_SHARE_BUTTON_TEXT:"Share",DEFAULT_SHARE_TOOLTIP_HEADER:Ozone.layout.tooltipString.shareTitle,DEFAULT_TOOLTIP_TEXT:Ozone.layout.tooltipString.shareContent,dashboardScope:null,initComponent:function(){if(!this.text){this.text=this.DEFAULT_SHARE_BUTTON_TEXT}if(!this.handler){this.handler=this.openWindow}if(!this.tooltip){this.tooltip={title:this.DEFAULT_SHARE_TOOLTIP_HEADER,text:this.DEFAULT_TOOLTIP_TEXT,width:250}}},openWindow:function(){var d=Ext.getCmp("export-win");this.dashboardScope.activeDashboard.saveToServer(true);if(d){d.getEl().down("textarea").focus();return}var b=this.dashboardScope.activeDashboard.config;d=Ext.create("Ext.window.Window",Ext.apply({id:"export-win",cls:"manageContainer",title:Ozone.ux.DashboardMgmtString.exportDashboardConfig,width:550,height:500,closable:true,collapsible:false,draggable:true,maximizable:false,minimizable:false,resizable:true,layout:"fit",shadow:false,items:[{xtype:"textarea",id:"json",hideLabel:true,readOnly:true,width:550,height:500,value:owfdojo.toJson(b,true),plugins:new Ozone.components.focusable.Focusable()}]},this.winConfig||{}));d.show();d.center();d.getEl().down("textarea").focus();var c=document.createElement("form");var a=document.createElement("input");a.id="json";a.name="json";a.type="hidden";a.value=Ext.JSON.encode(b);c.appendChild(a);c.action=Ozone.util.contextPath()+"/servlet/ExportServlet";c.method="POST";c.enctype=c.encoding="multipart/form-data";document.body.appendChild(c);c.submit();document.body.removeChild(c);c=null;a=null}});