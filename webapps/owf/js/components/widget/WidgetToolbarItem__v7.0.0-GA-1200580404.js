Ext.define("Ozone.components.widget.WidgetToolbarItem",{extend:"Ozone.components.widget.WidgetPanel",alias:["widget.widgettoolbaritem","widget.Ozone.components.widget.WidgetToolbarItem"],width:200,widget:null,focusable:true,initComponent:function(){var a=this.widget;this.title=a.title;this.icon=a.icon;this.widget=a;this.itemId=a.uniqueId;this.singleton=a.singleton;this.active=a.active;this.tools=[{type:"minimize",itemId:"minimize",hidden:a.minimized,handler:function(c,e,b,d){c.stopEvent();a.minimize()}},{type:"restore",itemId:"restore",hidden:!a.minimized,handler:function(c,e,b,d){c.stopEvent();if(a.minimized){a.restoreFromMinimize()}else{a.restore()}}},{type:"maximize",itemId:"maximize",handler:function(c,e,b,d){c.stopEvent();if(a.rendered){if(a.minimized){a.restoreFromMinimize()}a.maximize();a.focus()}else{a.on({afterrender:{fn:function(f){if(f.minimized){f.restoreFromMinimize()}f.maximize();f.focus()}}});a.show()}}},{type:"close",itemId:"close",handler:function(e,d,b,c){a.close()}}];this.listeners={activate:this.onToolbarItemActivate,titlechange:this.onToolbarItemTitleChange,click:{fn:this.onToolbarItemClick,element:"el",scope:this}};this.relayEvents(a,["activate","deactivate"]);a.on({minimize:{fn:this.onWidgetMinimize,scope:this.header},maximize:{fn:this.onWidgetMaximize,scope:this.header},restore:{fn:this.onWidgetRestore,scope:this.header},destroy:{fn:this.onWidgetDestroy,scope:this},titlechange:{fn:this.onWidgetTitleChange,scope:this}});this.callParent(arguments)},onToolbarItemActivate:function(a){this.ownerCt.layout.overflowHandler.scrollToItem(a,true)},onToolbarItemClick:function(c,a,d){var b=this.widget;if(b.rendered){if(b.minimized){b.restoreFromMinimize()}if(!b.active){b.focus()}}else{b.on({afterrender:this.onWidgetAfterrender});b.show()}},onToolbarItemTitleChange:function(b,a,c){this.widget.suspendEvents();this.widget.setTitle(a);this.widget.resumeEvents()},onWidgetTitleChange:function(b,a,c){this.suspendEvents();this.setTitle(a);this.resumeEvents()},onWidgetAfterrender:function(a){if(a.minimized){a.restoreFromMinimize()}if(!a.active){a.focus()}},onWidgetMinimize:function(){this.tools.restore.show();this.tools.maximize.show();this.tools.minimize.hide()},onWidgetMaximize:function(){this.tools.restore.show();this.tools.maximize.hide()},onWidgetRestore:function(a){this.tools.minimize.show();if(a.maximized){this.tools.maximize.hide();this.tools.restore.show()}else{this.tools.maximize.show();this.tools.restore.hide()}},onWidgetDestroy:function(){if(this.ownerCt){this.ownerCt.ownerCt.attemptScrollerReset(this.ownerCt);this.ownerCt.remove(this)}}});