Ext.define("Ozone.components.widget.WidgetPanel",{extend:"Ext.panel.Panel",alias:["widget.widgetpanel","widget.Ozone.components.widget.WidgetPanel"],mixins:{widget:"Ozone.components.widget.WidgetBase"},plugins:[new Ozone.plugins.WidgetPanel()],dashboardGuid:null,widgetStateContainer:null,hideMode:"visibility",initComponent:function(){this.beforeInitComponent();this.callParent(arguments);this.addEvents("minimize","maximize");this.on({beforeCollapse:{fn:function(a){this.restoreSize=this.getSize()},scope:this},expand:{fn:function(a){delete this.restoreSize;this.focus(null,null,false,true)},scope:this},show:{fn:function(a){this.focus()},scope:this},collapse:{fn:function(b){var a=this.tools["collapse-top"];if(a){a.blur();a.focus()}},scope:this}});Ext.apply(this,this.mixins.widget.overrides);this.afterInitComponent()},stateEvents:["resize","collapse","expand","activate","deactivate","minimize","maximize","titlechange"],getState:function(){var b={universalName:this.universalName,widgetGuid:this.widgetGuid,uniqueId:this.uniqueId,dashboardGuid:this.dashboardGuid,paneGuid:this.paneGuid,intentConfig:this.intentConfig,launchData:this.launchData,name:this.title?this.title:this.name,active:!!this.active,x:this.restorePos?this.restorePos[0]:this.x,y:this.restorePos?this.restorePos[1]:this.y,zIndex:0,minimized:!!this.minimized,maximized:!!this.maximized,pinned:!!this.pinned,collapsed:!!this.collapsed,columnPos:0,buttonId:this.buttonId?this.buttonId:null,buttonOpened:this.buttonOpened?this.buttonOpened:false,region:this.region||"none",statePosition:this.statePosition,singleton:this.singleton,floatingWidget:false};if(this.rendered){var a=this.getBox();Ext.apply(b,{height:this.collapseMemento!=null&&this.collapseMemento.data!=null?this.collapseMemento.data.height:a.height,width:a.width,x:a.x,y:a.y})}else{Ext.apply(b,{height:this.height,width:this.width})}return b},applyState:function(a){this.title=a.name},insertTool:function(a,b){if(this.header){this.header.insertTool(a,b)}},afterCollapse:function(b,a){this.callParent(arguments);if(a){this.saveState()}}});