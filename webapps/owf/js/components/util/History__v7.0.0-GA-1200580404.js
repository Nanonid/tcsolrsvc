Ext.apply(Ext.History,{startUp:function(){var a=this;a.currentToken=a.hiddenField.value||this.getHash();if(a.oldIEMode){a.checkIFrame()}else{var b=a.getHash();this.task=Ext.TaskManager.start({run:function(){var c=a.getHash();if(c!==b){b=c;a.handleStateChange(b);a.doSave()}},interval:50,scope:a});a.ready=true;a.fireEvent("ready",a)}},checkIFrame:function(){var d=this,b=d.iframe.contentWindow;if(!b||!b.document){Ext.Function.defer(this.checkIFrame,10,this);return}var e=b.document,c=e.getElementById("state"),a=c?c.innerText:null,f=d.getHash();this.task=Ext.TaskManager.start({run:function(){var j=b.document,i=j.getElementById("state"),g=i?i.innerText:null,h=d.getHash();if(g!==a){a=g;d.handleStateChange(g);window.top.location.hash=g;f=g;d.doSave()}else{if(h!==f){f=h;d.updateIFrame(h)}}},interval:50,scope:d});d.ready=true;d.fireEvent("ready",d)},shutDown:function(){if(this.task!=null){Ext.TaskManager.stop(this.task);this.currentToken=null;this.hiddenField.value=null}}});