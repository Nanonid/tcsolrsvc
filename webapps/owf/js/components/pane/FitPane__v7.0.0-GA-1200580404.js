Ext.define("Ozone.components.pane.FitPane",{extend:"Ozone.components.pane.Pane",alias:["widget.fitpane","widget.Ozone.components.pane.FitPane"],plugins:[new Ozone.plugins.pane.FitPane()],activeWidget:null,layout:"fit",componentCls:"fitpane pane",type:"fit",launchWidget:function(b,a,h,e,d,g){var c=this,f;f=c.createWidgetConfig(b,e,d);if(c.items.getCount()>0){if(g){this.launchFloatingWidget(b,null,null,e,d)}else{this.confirmReplaceWidget(f.id,f.title,function(){c.clearWidgets(false);Ext.defer(function(){c.addWidget(f,b)},200)})}}else{c.addWidget(f,b)}},addWidget:function(b,a){b=Ext.Object.merge(b,{xtype:"widgetpanel",x:0,y:0,zIndex:0,active:a.get("active"),layout:"fit",minimized:false,maximized:false,pinned:false,collapsed:false,frame:false,border:false,getFirstFocusableElement:function(){return this.getComponent("frontFocusCatch").getEl()},listeners:{render:function(c){c.addDocked({xtype:"focuscatch",dock:"top",itemId:"frontFocusCatch",listeners:{afterrender:{fn:function(d){d.mon(d.getEl(),"focus",function(){this.showFocusFrame(d.getEl())},this)},scope:this}}})}}});if(b.active){this.activeWidgetGuid=b.id}b.preventHeader=true;this.add(b)},confirmReplaceWidget:function(d,a,b){var c=this;Ext.widget("alertwindow",{title:"Warning",html:"<p>"+Ozone.layout.DialogMessages.fitPaneFullWarning+"</p><br/><p>Replace <i>"+Ext.htmlEncode(this.items.get(0).title)+"</i> with <i>"+Ext.htmlEncode(a)+"</i>?</p>",width:400,dashboardContainer:this.dashboard.dashboardContainer,okFn:b,cancelFn:function(){c.dashboard.activateWidget(d)}}).show()}});