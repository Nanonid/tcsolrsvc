Ext.define("Ozone.components.layout.PortalAnchor",{extend:"Ext.layout.container.Anchor",alias:["layout.portalanchor"],isValidParent:function(b,c,a){var d=b.el?b.el.dom:Ext.getDom(b);if(d&&c&&c.dom){return(d.parentNode==(c.dom||c))}return false}});Ext.define("Ozone.components.pane.PortalPane",{extend:"Ozone.components.pane.Pane",alias:["widget.portalpane","widget.Ozone.components.pane.PortalPane"],plugins:[new Ozone.plugins.pane.PortalPane()],activeWidget:null,defaults:{xtype:"widgetportlet"},componentCls:"portalpane pane",autoHeight:true,autoScroll:true,type:"portal",widgetCls:"x-portlet",layout:"portalanchor",activateWidget:function(b,a,c){b.rendered?b.expand():b.show();b.focus(false,false,a,c);this.dashboard.updateActiveWidget(b);return true},launchWidget:function(d,i,h,f,a,e){var g=this,j,c;j=g.createWidgetConfig(d,f,a);j=Ext.Object.merge(j,{height:d.get("height"),width:"100%",x:0,y:0,zIndex:0,active:d.get("active"),maximized:false,pinned:false,collapsed:false});if(!d.data.uniqueId){if(g.defaultSettings&&g.defaultSettings.widgetStates&&g.defaultSettings.widgetStates[j.widgetGuid]){var b=g.defaultSettings.widgetStates[j.widgetGuid];j=Ext.Object.merge(j,{width:b.width,height:b.height})}}c=Ext.isNumber(e)?g.insert(e,j):g.add(j);c.on("statesave",function(l,k){this.defaultSettings.widgetStates=this.defaultSettings.widgetStates||{};this.defaultSettings.widgetStates[k.widgetGuid]={height:k.height,width:k.width,timestamp:Ext.Date.now()}},this);c.on({expand:g.layoutOnExpandCollapse,collapse:g.layoutOnExpandCollapse,destroy:g.layoutOnExpandCollapse,scope:g});c.fireEvent("statesave",c,{widgetGuid:c.widgetGuid,height:c.height,width:c.width});return c.deferred.promise()},afterWidgetLaunch:function(a,b){if(b.get("collapsed")){a.collapse()}},layoutOnExpandCollapse:function(){if(!this.destroying){this.doComponentLayout()}},maximizeCollapseWidget:function(a){a.toggleCollapse(true)},minimizeExpandWidget:function(a){a.toggleCollapse(true)},moveWidgetUp:function(e){var c=this.items.getCount(),d;for(var b=0,a=c;b<a;b++){if(e===this.items.items[b]){d=b;break}}if(d!==0){this.reorderWidget(e,d-1,d)}},moveWidgetDown:function(e){var c=this.items.getCount(),d;for(var b=0,a=c;b<a;b++){if(e===this.items.items[b]){d=b;break}}if(d!==(c-1)){this.reorderWidget(e,d+1,d)}}});