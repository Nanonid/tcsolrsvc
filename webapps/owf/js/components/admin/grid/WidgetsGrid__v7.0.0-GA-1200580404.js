Ext.define("Ozone.components.admin.grid.WidgetsGrid",{extend:"Ext.grid.Panel",alias:["widget.widgetsgrid"],plugins:new Ozone.components.focusable.FocusableGridPanel(),cls:"grid-widget",defaultPageSize:50,forceFit:true,baseParams:null,initComponent:function(){if(this.store==null){this.store=Ext.StoreMgr.lookup({type:"adminwidgetstore",pageSize:this.defaultPageSize})}if(this.baseParams){this.setBaseParams(this.baseParams)}Ext.apply(this,{columnLines:true,columns:[{itemId:"universalName",header:"Universal Name",dataIndex:"universalName",flex:1,width:210,minWidth:210,sortable:true,hidden:true,renderer:function(f,c,b,g,e,d,a){return'<div class="grid-text">'+f?Ext.htmlEncode(f):"</div>"}},{itemId:"widgetGuid",header:"GUID",dataIndex:"widgetGuid",flex:1,width:210,minWidth:210,sortable:true,hidden:true,renderer:function(f,c,b,g,e,d,a){return'<div class="grid-text">'+f+"</div>"}},{itemId:"name",header:"Title",dataIndex:"name",flex:1,minWidth:200,sortable:true,renderer:function(m,b,f,j,g,n,k){var l=m;var a=f.get("headerIcon");var d=Ozone.util.contextPath();if(!a.match(new RegExp("^/?"+d+"/.*$","i"))&&!a.match(new RegExp("^https?://.*","i"))){if(a.indexOf("/")==0){a=d+a}else{a=d+"/"+a}var i=/admin\/64x64_blue_dashboard.png/g;var h=/admin\/64x64_blue_group.png/g;var e=/admin\/64x64_blue_user.png/g;var o=/admin\/64x64_blue_widget.png/g;if(a.match(i)){a=a.replace(i,"admin/24x24_blue_dashboard.png")}else{if(a.match(h)){a=a.replace(h,"admin/24x24_blue_group.png")}else{if(a.match(e)){a=a.replace(e,"admin/24x24_blue_user.png")}else{if(a.match(o)){a=a.replace(o,"admin/24x24_blue_widget.png")}}}}}var c='<div class="grid-icon-and-text-title-box"><div class="grid-icon-and-text-icon"><img class="grid-icon-and-text-icon-image" src="'+Ext.htmlEncode(a)+'">';c+="</div>";c+='<div class="grid-icon-and-text-title">'+Ext.htmlEncode(l)+"</div>";return c}},{itemId:"widgetUrl",header:"URL",dataIndex:"url",width:250,sortable:true,renderer:function(f,c,b,g,e,d,a){return'<div class="grid-text">'+Ext.htmlEncode(f)+"</div>"}},{itemId:"type",header:"Type",dataIndex:"widgetTypes",width:75,sortable:false,hidden:true,renderer:function(f,c,b,g,e,d,a){return'<div class="grid-text">'+f[0]?f[0].name:"</div>"}},{itemId:"version",header:"Version",dataIndex:"version",width:75,sortable:true,hidden:true,renderer:function(f,c,b,g,e,d,a){return'<div class="grid-text">'+Ext.htmlEncode(f)+"</div>"}},{itemId:"totalUsers",header:"Users",dataIndex:"totalUsers",width:75,hidden:this.hideTotalUsersCol,sortable:false,renderer:function(f,c,b,g,e,d,a){return'<div class="grid-text">'+f+"</div>"}},{itemId:"totalGroups",header:"Groups",dataIndex:"totalGroups",width:75,hidden:this.hideTotalGroupsCol,sortable:false,renderer:function(f,c,b,g,e,d,a){return'<div class="grid-text">'+f+"</div>"}}]});Ext.apply(this,{multiSelect:true,dockedItems:[Ext.create("Ext.toolbar.Paging",{dock:"bottom",store:this.store,displayInfo:true,hidden:this.hidePagingToolbar,itemId:"widget-grid-paging"})]});this.callParent(arguments)},load:function(){this.store.loadPage(1)},refresh:function(){this.store.loadPage(this.store.currentPage)},getTopToolbar:function(){return this.getDockedItems('toolbar[dock="top"]')[0]},getBottomToolbar:function(){return this.getDockedItems('toolbar[dock="bottom"]')[0]},applyFilter:function(d,a){this.store.proxy.extraParams=undefined;if(d){var c=[];for(var b=0;b<a.length;b++){c.push({filterField:a[b],filterValue:d})}this.store.proxy.extraParams={filters:Ext.JSON.encode(c),filterOperator:"OR"}}if(this.baseParams){this.setBaseParams(this.baseParams)}this.store.loadPage(1,{params:{offset:0,max:this.store.pageSize}})},clearFilters:function(){this.store.proxy.extraParams=undefined;if(this.baseParams){this.setBaseParams(this.baseParams)}this.store.load({params:{start:0,max:this.store.pageSize}})},setBaseParams:function(a){this.baseParams=a;if(this.store.proxy.extraParams){Ext.apply(this.store.proxy.extraParams,a)}else{this.store.proxy.extraParams=a}},setStore:function(b,c){this.reconfigure(b,c);var a=this.getBottomToolbar();if(a){a.bindStore(b)}}});