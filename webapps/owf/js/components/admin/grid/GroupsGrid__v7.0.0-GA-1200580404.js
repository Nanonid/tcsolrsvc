Ext.define("Ozone.components.admin.GroupsGrid",{extend:"Ext.grid.Panel",alias:["widget.groupsgrid"],plugins:new Ozone.components.focusable.FocusableGridPanel(),title:"Groups",columns:[{itemId:"id",header:"ID",dataIndex:"id",sortable:true,hidden:true},{header:"Group Name",dataIndex:"displayName",flex:3,renderer:function(e,b,a,f,d,c){return this.renderCell(Ext.htmlEncode(e?e:a.data.name),b,a)}},{header:"Users",dataIndex:"totalUsers",flex:1,sortable:false,renderer:function(e,b,a,f,d,c){return this.renderCell(e,b,a)}},{header:"Widgets",dataIndex:"totalWidgets",flex:1,sortable:false,renderer:function(e,b,a,f,d,c){return this.renderCell(e,b,a)}},{header:"Stacks",dataIndex:"totalStacks",flex:1,sortable:false,renderer:function(e,b,a,f,d,c){return this.renderCell(e,b,a)}}],defaultPageSize:50,multiSelect:true,initComponent:function(){Ext.apply(this,{columnLines:true});this.store=Ext.create("Ozone.data.GroupStore",{id:"groupstore",autoLoad:false,pageSize:this.defaultPageSize});this.bbar=Ext.create("Ext.toolbar.Paging",{itemId:"bottomBar",store:this.store,pageSize:this.pageSize,displayInfo:true});this.relayEvents(this.store,["datachanged"]);this.callParent(arguments)},applyFilter:function(d,a){this.store.proxy.extraParams=undefined;if(d){var c=[];for(var b=0;b<a.length;b++){c.push({filterField:a[b],filterValue:d})}this.store.proxy.extraParams={filters:Ext.JSON.encode(c),filterOperator:"OR"}}if(this.baseParams){this.setBaseParams(this.baseParams)}this.store.loadPage(1,{params:{offset:0,max:this.pageSize}})},clearFilter:function(){this.store.proxy.extraParams=undefined;if(this.baseParams){this.setBaseParams(this.baseParams)}this.store.load({params:{start:0,max:this.pageSize}})},renderCell:function(b,c,a){if(a.get("status")=="inactive"){c.tdCls+=" x-item-disabled"}return b},setBaseParams:function(a){this.baseParams=a;if(this.store.proxy.extraParams){Ext.apply(this.store.proxy.extraParams,a)}else{this.store.proxy.extraParams=a}},setStore:function(b,c){this.reconfigure(b,c);var a=this.getBottomToolbar();if(a){a.bindStore(b)}},getTopToolbar:function(){return this.getDockedItems('toolbar[dock="top"]')[0]},getBottomToolbar:function(){return this.getDockedItems('toolbar[dock="bottom"]')[0]},load:function(){this.store.loadPage(1)},refresh:function(){this.store.loadPage(this.store.currentPage)}});