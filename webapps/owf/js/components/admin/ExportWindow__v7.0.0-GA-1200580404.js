Ext.define("Ozone.components.admin.ExportWindow",{extend:"Ext.window.Window",alias:["widget.exportwindow","widget.ExportWindow"],mixins:{widget:"Ozone.components.focusable.CircularFocus"},title:"Export",itemId:"exportwindow",modal:true,closable:true,draggable:false,resizable:false,closeAction:"hide",border:false,minWidth:250,layout:"auto",items:[{xtype:"panel",itemId:"exportpanel",cls:"admineditoraddpanel",layout:"fit",border:false,flex:1,items:[{xtype:"form",itemId:"form",layout:"anchor",bodyCls:"properties-body",border:false,preventHeader:true,padding:5,autoScroll:true,defaults:{anchor:"100%",msgTarget:"side",labelSeparator:"",margin:"5 5 0 5"},items:[{xtype:"textfield",itemId:"filename",fieldLabel:"File Name",labelWidth:130,allowBlank:false,name:"filename",maxLength:200,regex:/^[a-zA-Z\d\-\_]+$/,regexText:"Invalid characters! The Filename may only contain letters, numbers, dashes, and underscores."}]}]}],buttons:[{text:"OK",itemId:"ok",disabled:true},{text:"Cancel",itemId:"cancel"}],initComponent:function(){var a=this;a.setWidth(Math.round(Ext.getBody().getViewSize().width*0.9));a.on("beforeshow",function(){a.setTitle(a.generateTitle())});a.on("afterrender",function(){var d=a.down("#form");var b=a.down("#filename");var c=a.down("#ok");var e=a.down("#cancel");a.itemFilename&&b.setValue(a.itemFilename)&&c.enable();d.on("fieldvaliditychange",function(h,g,i,f){if(i){c.enable()}else{c.disable()}});e.on("click",function(f,g){a.close()});c.on("click",function(f,g){if(a.okFn){a.okFn(b.value)}a.close()});a.setupFocus(b.getFocusEl(),e.getFocusEl())});a.on("beforeclose",function(){a.down("#form").clearListeners();a.down("#ok").clearListeners();a.down("#cancel").clearListeners();a.focusOnClose&&a.focusOnClose.focus()});a.callParent(arguments)},generateTitle:function(){var d="Export";if(this.itemName){d="Export "+this.itemName}var c=100;d=Ext.util.Format.ellipsis(d,c);var b=Ext.getBody().getViewSize();var a=new Ext.util.TextMetrics();var e=a.getWidth(d);while(e>((b.width*0.8))){c-=5;d=Ext.util.Format.ellipsis(d,c);e=a.getWidth(d)}a.destroy();return Ext.htmlEncode(d)}});