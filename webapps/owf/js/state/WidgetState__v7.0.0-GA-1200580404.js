var Ozone=Ozone?Ozone:{};Ozone.state=Ozone.state?Ozone.state:{};Ozone.state.WidgetState=function(a){if(Ozone.state.WidgetState.instance==null){var b="_WIDGET_STATE_CHANNEL_";a=a||{};this.widgetEventingController=a.widgetEventingController||Ozone.eventing.Widget.instance;this.widgetStateHandler=Ozone.state.WidgetStateHandler.getInstance(this.widgetEventingController);this.widgetIdJSON=Ozone.util.parseJson(this.widgetEventingController.getWidgetId());this.widgetGuid=a.widgetGuid?a.widgetGuid:this.widgetIdJSON.id;this.stateChannel=b+this.widgetGuid;this.onStateEventReceived=a.onStateEventReceived?a.onStateEventReceived:this.onStateEventReceived;if(a.autoInit!==false){this.init()}Ozone.state.WidgetState.instance=this}return Ozone.state.WidgetState.instance};Ozone.state.WidgetState.prototype={version:Ozone.version.owfversion+Ozone.version.state,init:function(){this.widgetEventingController.subscribe(this.stateChannel,this.onStateEventReceived)},onStateEventReceived:function(){return true},getStateChannel:function(){return this.stateChannel},getWidgetState:function(a){a=a?a:{};var b={fn:"getWidgetState",params:{guid:a.guid?a.guid:this.widgetGuid}};this.widgetStateHandler.handleWidgetRequest(b,a.callback)},getRegisteredStateEvents:function(a){a=a?a:{};var b={fn:"getWidgetStateEvents",params:{guid:a.guid?a.guid:this.widgetGuid}};this.widgetStateHandler.handleWidgetRequest(b,a.callback)},activateWidget:function(a){a=a?a:{};var b={fn:"activateWidget",params:{guid:a.guid?a.guid:this.widgetGuid}};this.widgetStateHandler.handleWidgetRequest(b,a.callback)},closeWidget:function(a){a=a?a:{};var b={fn:"closeWidget",params:{guid:a.guid?a.guid:this.widgetGuid}};this.widgetStateHandler.handleWidgetRequest(b,a.callback)},addStateEventListeners:function(a){a=a?a:{};var b={fn:"addStateEventListeners",params:{guid:a.guid?a.guid:this.widgetGuid,events:a.events}};this.widgetStateHandler.handleWidgetRequest(b,a.callback)},removeStateEventListeners:function(a){a=a?a:{};var b={fn:"removeStateEventListeners",params:{guid:a.guid?a.guid:this.widgetGuid,events:a.events}};this.widgetStateHandler.handleWidgetRequest(b,a.callback)},addStateEventOverrides:function(a){a=a?a:{};var b={fn:"addStateEventOverrides",params:{guid:a.guid?a.guid:this.widgetGuid,events:a.events}};this.widgetStateHandler.handleWidgetRequest(b,a.callback)},removeStateEventOverrides:function(a){a=a?a:{};var b={fn:"removeStateEventOverrides",params:{guid:a.guid?a.guid:this.widgetGuid,events:a.events}};this.widgetStateHandler.handleWidgetRequest(b,a.callback)}};Ozone.state.WidgetState.getInstance=function(a){if(Ozone.state.WidgetState.instance==null){Ozone.state.WidgetState.instance=new Ozone.state.WidgetState(a)}return Ozone.state.WidgetState.instance};