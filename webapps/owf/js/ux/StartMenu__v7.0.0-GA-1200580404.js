Ext.namespace("Ozone.ux");Ozone.ux.StartMenu=function(a){Ozone.ux.StartMenu.superclass.constructor.call(this,a);var b=this.toolItems;this.toolItems=new Ext.util.MixedCollection();if(b){this.addTool.apply(this,b)}};Ext.extend(Ozone.ux.StartMenu,Ext.menu.Menu,{render:function(){if(this.el){return}var a=this.el=new Ext.Layer({cls:"x-menu ux-start-menu",shadow:this.shadow,constrain:false,parentEl:this.parentEl||document.body,zindex:15000});var f=a.createChild({tag:"div",cls:"x-window-header x-unselectable x-panel-icon "+this.iconCls});this.header=f;var g=f.createChild({tag:"span",cls:"x-window-header-text"});var q=f.wrap({cls:"ux-start-menu-tl"});var l=f.wrap({cls:"ux-start-menu-tr"});var c=f.wrap({cls:"ux-start-menu-tc"});this.menuBWrap=a.createChild({tag:"div",cls:"x-window-body x-border-layout-ct ux-start-menu-body"});var d=this.menuBWrap.wrap({cls:"ux-start-menu-ml"});var m=this.menuBWrap.wrap({cls:"x-window-mc ux-start-menu-bwrap"});this.toolsPanel=this.menuBWrap.createChild({tag:"div",cls:"x-panel x-border-panel ux-start-menu-tools-panel"});var k=d.wrap({cls:"x-window-bwrap"});var j=k.createChild({tag:"div",cls:"ux-start-menu-bc"});var b=j.wrap({cls:"ux-start-menu-bl x-panel-nofooter"});var p=j.wrap({cls:"ux-start-menu-br"});this.keyNav=new Ext.menu.MenuNav(this);if(this.plain){a.addCls("x-menu-plain")}if(this.cls){a.addCls(this.cls)}this.focusEl=a.createChild({tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"});var n=this.toolsPanel.createChild({tag:"ul",cls:"x-menu-list"});var h={click:{fn:this.onClick,scope:this},mouseover:{fn:this.onMouseOver,scope:this},mouseout:{fn:this.onMouseOut,scope:this}};n.on(h);this.toolItems.each(function(s){var r=document.createElement("li");r.className="x-menu-list-item";n.dom.appendChild(r);s.render(r,this)},this);this.toolsUl=n;this.menuBWrap.setStyle("position","relative");this.menuBWrap.setHeight(this.height);this.toolsPanel.setStyle({padding:"2px 4px 2px 2px",position:"absolute",overflow:"visible"});this.setTitle(this.title);var i=this.toolsPanel.getWidth();var o=this.header.getWidth();var e=o;if(Ext.isIE){i=this.toolsUl.getWidth();o=this.header.getTextWidth()}if(o<i){e=i}this.toolsUl.setWidth(e);this.el.setWidth(e+16)},findTargetItem:function(b){var a=b.getTarget(".x-menu-list-item",this.ul,true);if(a&&a.menuItemId){if(this.items.get(a.menuItemId)){return this.items.get(a.menuItemId)}else{return this.toolItems.get(a.menuItemId)}}},show:function(b,d,a){this.parentMenu=a;if(!this.el){this.render()}this.fireEvent("beforeshow",this);this.showAt(this.el.getAlignToXY(b,d||this.defaultAlign),a,false);var c=this.menuBWrap.getBox();this.toolsPanel.setX(c.x);this.toolsPanel.setHeight(c.height)},addTool:function(){var c=arguments,b=c.length,f;for(var d=0;d<b;d++){var e=c[d];if(e.render){f=this.addToolItem(e)}else{if(typeof e=="string"){if(e=="separator"||e=="-"){f=this.addToolSeparator()}else{f=this.addText(e)}}else{if(e.tagName||e.el){f=this.addElement(e)}else{if(typeof e=="object"){f=this.addToolMenuItem(e)}}}}}return f},addToolSeparator:function(){return this.addToolItem(new Ext.menu.Separator({itemCls:"ux-toolmenu-sep"}))},addToolItem:function(b){this.toolItems.add(b);if(this.ul){var a=document.createElement("li");a.className="x-menu-list-item";this.ul.dom.appendChild(a);b.render(a,this);this.delayAutoWidth()}return b},addToolMenuItem:function(a){if(!(a instanceof Ext.menu.Item)){if(typeof a.checked=="boolean"){a=new Ext.menu.CheckItem(a)}else{a=new Ext.menu.Item(a)}}return this.addToolItem(a)},setTitle:function(b,a){this.title=b;this.header.child("span").update(b);return this}});