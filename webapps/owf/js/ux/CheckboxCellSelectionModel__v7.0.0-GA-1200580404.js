Ext.ux.CheckboxCellSelectionModel=function(a){Ext.apply(this,a);this.addEvents("beforecellselect","cellselect");Ext.ux.CheckboxCellSelectionModel.superclass.constructor.call(this)};Ext.extend(Ext.ux.CheckboxCellSelectionModel,Ext.grid.CheckboxSelectionModel,{initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag){this.grid.on("cellmousedown",this.handleCellMouseDown,this)}else{this.grid.on("cellclick",function(b,f,c,d){if(d.button===0&&!d.shiftKey&&!d.ctrlKey){this.selectCell([f,c],false);this.selectRow(f,false);b.view.focusRow(f)}},this)}this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:function(c){if(!c.shiftKey){this.selectPrevious(c.shiftKey)}else{if(this.last!==false&&this.lastActive!==false){var b=this.last;this.selectRange(this.last,this.lastActive-1);this.grid.getView().focusRow(this.lastActive);if(b!==false){this.last=b}}else{this.selectFirstRow()}}},down:function(c){if(!c.shiftKey){this.selectNext(c.shiftKey)}else{if(this.last!==false&&this.lastActive!==false){var b=this.last;this.selectRange(this.last,this.lastActive+1);this.grid.getView().focusRow(this.lastActive);if(b!==false){this.last=b}}else{this.selectFirstRow()}}},scope:this});var a=this.grid.view;a.on("refresh",this.onRefresh,this);a.on("rowupdated",this.onRowUpdated,this);a.on("rowremoved",this.onRemove,this);this.grid.on("render",function(){var b=this.grid.getView();b.mainBody.on("mousedown",this.onMouseDown,this);Ext.fly(b.innerHd).on("mousedown",this.onHdMouseDown,this)},this)},handleCellMouseDown:function(b,d,a,c){if(c.button!==0||this.isLocked()){return}this.selectCell([d,a],c.ctrlKey||c.shiftKey);this.handleMouseDown(b,d,c)},selectCell:function(c,d,a){if(this.locked){return}var e=c[0];var b=c[1];if(e<0||e>=this.grid.store.getCount()){return}if(b<0||b>=this.grid.getColumnModel().getColumnCount()){return}if(this.fireEvent("beforecellselect",this,c,d)!==false){this.fireEvent("cellselect",this,c)}}});