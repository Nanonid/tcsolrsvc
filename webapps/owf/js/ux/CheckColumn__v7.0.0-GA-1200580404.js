Ext.define("Ext.ux.CheckColumn",{extend:"Ext.grid.column.Column",alias:"widget.checkcolumn",menuDisabled:true,sortable:false,resizable:false,checkbox:true,_checkBoxCls:Ext.baseCSSPrefix+"grid-column-checkbox",_checkBoxClsOn:Ext.baseCSSPrefix+"grid-column-checkbox-on",_checkBoxClsOff:Ext.baseCSSPrefix+"grid-column-checkbox-off",_checkBoxClsOver:Ext.baseCSSPrefix+"grid-column-over",toggleKey:null,processEvent:function(f,h,j,a,g,d){if(f=="mousedown"||(f=="keydown"&&toggleKey&&d.getKey()==togleKey)){var b=h.panel.store.getAt(a);var i=b.data[this.dataIndex];b.set(this.dataIndex,!i);if(i){this.onUnchecked(h,b)}else{this.onChecked(h,b)}return false}else{if(f=="mouseover"){var c=Ext.fly(j);c.addCls(this._checkBoxClsOver);return this.callParent(arguments)}else{if(f=="mouseout"){var c=Ext.fly(j);c.removeCls(this._checkBoxClsOver);return this.callParent(arguments)}else{return this.callParent(arguments)}}}},renderer:function(g,c,b,h,e,d){var f=this.columns[e];var a=[f._checkBoxCls];if(!g||"false"==g){a.push(f._checkBoxClsOff)}else{a.push(f._checkBoxClsOn)}if(b.get("editable")==false){c.tdAttr='data-qtip="This widget belongs to a Group and may not be edited or deleted"';c.tdCls+=" x-item-disabled"}return'<div class="'+a.join(" ")+'">&#160;</div>'},onGridHeaderCtClick:function(c,f,b){f.stopEvent();var a=Ext.fly(b);var d=(a.hasCls(this._checkBoxClsOn)||a.hasCls(this._checkBoxClsOff))?true:false;if(d){var g=a.hasCls(this._checkBoxClsOn);if(g){a.removeCls(this._checkBoxClsOn);a.addCls(this._checkBoxClsOff);this.toggleSelectAll(c,false)}else{a.removeCls(this._checkBoxClsOff);a.addCls(this._checkBoxClsOn);this.toggleSelectAll(c,true)}}},toggleSelectAll:function(c,d){for(var b=0,a=c.store.data.items.length;b<a;b++){c.store.getAt(b).set(this.dataIndex,d?true:false)}},toggleHeader:function(b){var a=this.el.query("."+(b?this._checkBoxClsOff:this._checkBoxClsOn))[0];if(a!=null){a.className=b?this._checkBoxClsOn:this._checkBoxClsOff}},onChecked:function(b,a){if(a.store.find(this.dataIndex,false)===-1){this.toggleHeader(true)}},onUnchecked:function(b,a){this.toggleHeader(false)}});